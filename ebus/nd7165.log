!SYSNO
TYMSHARE F33-P035/D-7 1-12-88
!DAYTIME
22-AUG-1988 23:44:53 PDT

!; This CTL file rebuilds the BND file for an EBUS base from scratch.
!; The following files must exist:
!DIRECT (EBUS)EBUS02.O02

EBUS02  O02       9   9-MAY-88 1336    ALL RD  NO      4096

!DIRECT NW7165.TYM,NW7165.T01,NW7165.CMD,NW7165.C00,NW7165.C01

NW7165  TYM       3  22-AUG-88 1733    ALL RD  NO       587
NW7165  C01       2  19-MAY-88 1245    ALL RD  NO        37
NW7165  C00       2  18-MAY-88 1828    ALL RD  NO        40
NW7165  CMD       2  18-MAY-88 1809    ALL RD  NO        42
NW7165  T01       2  15-FEB-88 1537    ALL RD  NO        77

!DIRECT ISXRAY.GGY,GOODGY.NQA

GOODGY  NQA       2  10-DEC-87 1302    ALL RD  NO       334
ISXRAY  GGY       2   2-JUL-87 1305    ALL RD  NO       128

!
!; Create the ISIS Kernel from NDxxxx.TYM
!R (SYS)NAD
1.5
;X   NW7165.CMD

;; ISIS-II Version 7.03 Sample Command File
;@   (SOURCE)I2IS07.I03

End of assembly
;@   NW7165.TYM

End of assembly
;@   GOODGY.NQA

End of assembly
;@   (SOURCE)I2IS07.R03

SYNC specified but not assigned...(warning only, no change)
SYNC 1BD6 2442
CLOCKS 2442 2582
MBOARD 2582 26E8
IPI 26E8 2946
FLASH 2946 2DE6
KCAREA 2DE6 2FDC
TTY 2FDC 3300
KERNEL 3300 7B7C
DDT 7B7C 0AB00
   3273d bufferlets allocated to dispatcher
DISPAT 0AB00 16400
.............................................



    ***  ISIS-II  ***
      Version 7.3d

TYMNET-II Node 7165, Kernel Host 2546
Maximum slot number is 2

       >>> HARDWARE CONFIGURATION <<<

Expects enhanced sync microcode
Expects enhanced async microcode
Expects MAC II
Expects maximum baud rate of 1200
Expects 1 sync board(s)
Expects 1 SIO mother-board processor(s)
   Board 0 has 2 channel(s), device address 80
Expects 1 IPI processor(s)
   IPI device 0 has device address 88

       >>> SLOT CONFIGURATIONS <<<

SLOT 0, NODE CODE, has 350 K-bytes of core, from 16400 to 6DBFF
   2 logical unit(s)
   L.U. 0 is M.Board channel 0
   L.U. 1 is M.Board channel 1

SLOT 1 has 266 K-bytes of core, from 6DC00 to 0B03FF
   1 logical unit(s)
   L.U. 0 is M.Board channel 0

SLOT 2 has 100 K-bytes of core, from 0B0400 to 0C93FF
   no logical units

***Highest location used in this configuration is 0C9400

Requires 809d k-bytes of core


.............................................


Code Generated:  08/23/88  06:46:54 GMT

.............................................

End of assembly
;X   (SOURCE)I2IS07.P03

;; ISIS-II Version 7.03 Patch File

;@   (SOURCE)I2IS07.Q03

ISIS 7.03 PATCH 1
  Fixes reversed CTS and DSR on HDLC micro.

ISIS 7.03 PATCH 2
  This patch is superseded by patch 4.

ISIS 7.03 PATCH 3
  Causes ISIS to read memory error log before crashing.

ISIS 7.03 PATCH 4
  Refreshes CPU and MAC registers to avoid degradation.
  (Updated version of patch 2)

ISIS 7.03 PATCH 5
  Correctly initializes registers for checking newlog bit array

ISIS 7.03 PATCH 6
  Wraps around accounting char counts when count exceeds 28 bits

ISIS 7.03 PATCH 7
Patch to prevent disk from doing retries on a 
controller errror

ISIS 7.03 PATCH 8
  Corrects initialization order of Emulated Sync.
  Also it allows window for interrupts to be flushed
  during initialization.

ISIS 7.03 PATCH 9
have DCSLOT free channels for ports in time-out
or clean-up

ISIS 7.03 PATCH 10
Have KRASHI report crashes to dispatcher
and pause slot for 4 seconds

ISIS 7.03 PATCH 11
Keep DDT Mask command from crashing machine

ISIS 7.03 PATCH 12
Have restart SVC disable watch-frog timer

ISIS 7.03 PATCH 13
Crash ISIS on DMA parity error

ISIS 7.03 PATCH 14 
 CLEAR DHANG ON SYSTEM CRASH 

ISIS 7.03 PATCH 15 
THIS PATCH IS USED TO CORRECT  A TID RECOGNITION5 
FOR 300 BAUD WHEN USING HIGH SPEED INTERRUPTS.

ISIS 7.03 PATCH 16 
ISIS VERSION GREATER 6 ALLOWS WRITING PAST SEGMENT 
BOUNDARIES WITHOUT PROTECTION.  CHANGES MADE FOR  
MULTIMEG SUPPORT INDUCED THIS PROBLEM.  THIS PATCH 
PROTECTS ISIS FROM OVER WRITING BOUNDARIES. 
See NSR 1772 

End of assembly


1;F   NW7165.NIB

70;T
0,SUMTBL;P
INTLEN,IEND-INTLEN;P
%P
SEGF,SFSIZE;P
%Q
EXIT

!
!; Create the node code for slot 0 from NDxxxx.TYM
!R (SYS)NAD
1.5
;X   NW7165.C00

;; UPDATED 88/05/18 NW7165 ISIS-II T-II JOE SMITH
;A   (SOURCE)TII05.I22

End of assembly
;A   NW7165.TYM

End of assembly
;A   ISXRAY.GGY

End of assembly
;A   (SOURCE)TII05.R22

End of assembly
;A   (SOURCE)TII05.F22


TYMNET-II Node Code, Version 5.22, ISIS Node

Node: 7165  Kernel Host: 2546

Ports:		Lines:		Links:
   128d Pthru	     0d Sync	     2d TIILNK
     3d Xray	     2d SIO	     0d XLNK
		     2d Total	     2d Total
   256d Disp
     3d Krnl

Maximum number of circuits =  431d 


Bufferlet storage space:

  5E48x bytes (  24d KB) for  431d circuit buffers ( 56d bytes per circuit)
 22652x bytes ( 138d KB) for  271d history buffers (519d bytes per termination)
 2849Ax bytes ( 162d KB) for  431d total circuits  (382d bytes per circuit)


Memory used by this configuration = 57800x, 350d KB.

Optimal amount of memory for this configuration =   227d  KB.

End of assembly
;A   (SOURCE)TII05.P22


PATCH added on 870811 at 0900 by JLADEN.
     Starts at ATTLI0+20 and is 10x bytes long
<<< FIX RESET VERSION COMPATIBILTY PROBLEM >>>

PATCH added on 870907 at 0138 by SDW.
     Starts at RTBFA2+4 and is 6x bytes long
<<< PATCH TO FIX REGISTER USAGE BY IMPROVED REBUILD ROUTINE >>>

PATCH added on 870211 at 1800 by SDW.
     Starts at HSTDI4+0C and is 4x bytes long
<<< Patch to have XRAY HS U command display up hosts that have no ports >>>

PATCH added on 880121 at 1301 by sdw.RESET1.
     Starts at ATTL05-8 and is 6x bytes long
	Continues at PATCH1+0 and is 5Cx bytes long
<<< Make old style reset packet always have old style reset data >>>

PATCH added on 880122 at 2028 by sdw.RESET2.
     Starts at ATTLIN+8 and is 6x bytes long
	Continues at PATCH1+5C and is 38x bytes long
<<< Handle neighbor switching between old and expanded resets >>>

PATCH added on 880126 at 1756 by sdw.RES4M1.
     Starts at G04MIN and is 6x bytes long
	Continues at PATCH0+0 and is 0Ex bytes long
	Continues at PATCH1+94 and is 0D8x bytes long
<<< Send a old style reset every four minutes to help lines to come up >>>

PATCH added on 880126 at 1845 by sdw.RES4M2.
     Starts at G01SE3 and is 6x bytes long
	Continues at PATCH1+16C and is 8Ax bytes long
<<< Part 2 of patch to occasionally send old style resets. >>>

PATCH added on 880218 at 1600 by sdw.SIOCHN.
     Starts at siopt4+8 and is 2x bytes long
<<< Allow SIO to send more than 40 packets per second >>>

PATCH added on 880218 at 2330 by sdw.SIORSPC.
     Starts at SIORS and is 10x bytes long
	Continues at SIORR and is 6x bytes long
	Continues at PATCH0+12 and is 4x bytes long
	Continues at PATCH1+1F6 and is 28x bytes long
<<< Part 1 of patch to send only 1 SIO reset per second >>>

PATCH added on 880218 at 2356 by sdw.SIORSP2.
     Starts at G01PER and is 6x bytes long
	Continues at PATCH1+21C and is 1Ex bytes long
<<< Part 2 of patch to send only 1 SIO reset per second >>>

PATCH added on 880306 at 109 by sdw.FIX DB.
     Starts at DBEGIN and is 6x bytes long
	Continues at PATCH1+23A and is 1Cx bytes long
<<< Disable DB command from local Xray to prevent crash or corrupted data >>>

PATCH added on 880305 at 123 by sdw.FIX WB.
     Starts at XWRBUF and is 6x bytes long
	Continues at PATCH1+256 and is 1Ax bytes long
<<< Disable WB command from local Xray to prevent crash or corrupted data >>>

PATCH added on 880305 at 134 by sdw.REMZAP.
     Starts at REMZA6+2 and is 6x bytes long
	Continues at PATCH1+270 and is 10x bytes long
<<< Fix potential crash when Xray user zaps before clearing delay circuits >>>

PATCH added on 880307 at 0934 by sdw.NETIDBG.
     Starts at ATTNID and is 12x bytes long
	Continues at PATCH0+16 and is 8x bytes long
<<< Do not put neighbor with bad NETID on node's bad guy list >>>

PATCH added on 880317 at 1523 by sdw.XRAYIN.
     Starts at XRYIN7 and is 4x bytes long
<<< Fix local XRAY to have a dismiss when waiting for character >>>

PATCH added on 880408 at 1500 by SLN.FNDLNK.
     Starts at CRQZOG+6 and is 0Ex bytes long
	Continues at LEP9V2-20 and is 0Ex bytes long
	Continues at PATCH1+280 and is 4Cx bytes long
<<< Fix crash 0007 from Qexec corruption >>>

PATCH added on 880410 at 1525 by sdw.ATT.R2.
     Starts at ATTLDW and is 6x bytes long
	Continues at PATCH1+2CC and is 14x bytes long
<<< Fix crash in line attach logic due to corrupted register >>>

PATCH added on 880405 at 2334 by sdw.WSZDWN.
     Starts at MCHD04+4 and is 6x bytes long
	Continues at TRLINZ and is 6x bytes long
	Continues at PATCH1+2E0 and is 66x bytes long
	Continues at PATCH0+1E and is 10x bytes long
<<< Fix windowsize matchdown to restore to original when link goes down >>>

PATCH added on 880425 at 1713 by sdw.HSecNS.
     Starts at XSTMS0 and is 4Cx bytes long
<<< Fix NS to show proper time spent in H-SEC process >>>

PATCH added on 880426 at 2214 by sdw.KDCMTS.
     Starts at XNEI7B and is 6x bytes long
	Continues at PATCH1+346 and is 1Ax bytes long
<<< Fix Xray KD command to correctly count number of command circuits >>>

PATCH added on 880408 at 1000 by pk.siocopy.
     Starts at sioi5+8 and is 36x bytes long
<<< Remove SIO input problems with foreground/background collisions >>>

PATCH added on 880628 at 1500 by sdw.SIOCH2.
     Starts at siosnd-4 and is 4x bytes long
	Continues at sion4-6 and is 6x bytes long
	Continues at PATCH1+360 and is 12x bytes long
<<< Correct logic which flagged an unloaded line as saturated >>>

PATCH added on 880623 at 1330 by sdw.OOPS.
     Starts at SFAIL-0a and is 6x bytes long
	Continues at PATCH1+372 and is 10x bytes long
<<< Save R0 and R1 when doing software crashes >>>

PATCH added on 880706 at 1301 by CMR.XRDBRM.
     Starts at DBEGI8 and is 6x bytes long
	Continues at PATCH1+382 and is 20x bytes long
<<< Reset INTXRF flag when entering 'DB' command >>>

PATCH added on 880725 at 1500 by sdw.DBFILL.
     Starts at DBEGI5 and is 6x bytes long
	Continues at PATCH1+392 and is 1Ex bytes long
<<< Prevent crash caused by delay circuits using all bufferlets >>>
End of assembly
1;F   NW7165.N00

;X   (SOURCE)TIII05.WRT

SEG0,RSEG0;P
SEG1,S1SIZE;P
SEGD,SDSIZE;P
SEGF,SFSIZE;P
CTA,CTASIZ;P
%P
%Q
EXIT

!
!; Create the Engine code that runs in Slot 1 from NDxxxx.T01
!R (SYS)NAD
1.5
;X   NW7165.C01

;;      EBUS INTERFACE COMMAND FILE - SYSTEM #: 25  
;@   (SOURCE)EBUS02.I00

End of assembly
;@   NW7165.T01

End of assembly
;@   (SOURCE)EBUS02.R00

Start.Lib Version 0.05
SEG 2 SIZE = 1100

RING 0E0000 101BA 
CRASH.LIB    11-15-84 AWT
THIS VERSION HAS AN OPTION FOR EXTENDED CRASH PROCESSING.
CRASH 101BA 103D4
STATUS 103D4 1060A
EBUS 1060A 10CC0
DEFAULT AREA PROTECTIONS ASSUMED.

SEGMENT 0-length 404d, requires 200x bytes of core.
SEGMENT 1-length 3392d, requires 0E00x bytes of core.
SEGMENT 2-length 4480d, requires 1200x bytes of core.
SEGMENT 3-length 65536d, requires 10000x bytes of core.
SEGMENT 4-length 65536d, requires 10000x bytes of core.
SEGMENT 5-length 65536d, requires 10000x bytes of core.
SEGMENT 6-length 65536d, requires 10000x bytes of core.
SEGMENT 0E-length 476d, requires 200x bytes of core.
       265d K-bytes of core
End of assembly
1;F   NW7165.N01

CTA,CTASIZ;P
SEG0,S0SIZE;P
SEG1,S1SIZE;P
SEG2,S2SIZE;P
%P
%Q
EXIT

!
!; Build BND file.  Note that the 68K code is the same in all bases.
!R (SYS)MERLIN
MERGE AND LINK ISIS SLOTS
VERSION  2.10
* NW7165.BND=NW7165.NIB,NW7165.N00,NW7165.N01,(EBUS)EBUS02.O02/S




         SLOT MAP

SLOT BEGINS ENDS
 0   16400  6DBFF
 1   6DC00  B03FF
 2   B0400  C93FF




    MAP OF SLOT  0

SEG  BEGINS ENDS
 0   17400  1E1FF
 1   1E200  2A8FF
 2   2A900  3A8FF
 3   3A900  4A8FF
 4   4A900  5A8FF
 5   5A900  65EFF
13   65F00  6DBFF
14   16400  173FF




    MAP OF SLOT  1

SEG  BEGINS ENDS
 0   6DE00  6DF93
 1   6E000  6ED3F
 2   6EE00  6FF7F
 3   70000  7FFFF
 4   80000  8FFFF
 5   90000  9FFFF
 6   A0000  AFFFF
14   6DC00  6DDDB




    MAP OF SLOT  2   (S-RECORD)

BEGINS ENDS
B0400  B26AC

EXIT

!
!;The NIB files are not needed and can be deleted.
!DELETE NW7165.NIB,NW7165.N00,NW7165.N01


!DIRECT NW7165.BND

NW7165  BND      69  23-AUG-88    0    ALL RD  NO     34816

!LOGOUT
1450.95 tru
terminal time: 0:16:20
   