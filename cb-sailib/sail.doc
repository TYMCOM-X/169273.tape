







                                      THE
                          SAIL USER ROUTINES LIBRARY
                               REFERENCE MANUAL














                        Department of Computer Science
                          Carnegie-Mellon University
                           Pittsburgh, Pennsylvania
                               19 December 1978





                              ------------------
                       This document was compiled by the
               Shepherd File Managment and Documentation System


19 December 1978                                     SAIL User Routines Library

SAIL User Routines Library
  The system Abstract is not available at this time
19 December 1978                                               Module Abstracts

Module Abstracts
  This chapter gives the abstracts for all of the modules that make up the SAIL
User Routines Library system.
19 December 1978                                                  FileUtilities

FileUtilities Abstract
  Module Abstracts are not available at this time
19 December 1978                                              Memory Management

Memory Management Abstract
  Module Abstracts are not available at this time
19 December 1978                                               String Utilities

String Utilities Abstract
  Module Abstracts are not available at this time
19 December 1978                                                     TTYHandler

TTYHandler Abstract
  Module Abstracts are not available at this time
19 December 1978                                                     TTYHandler

FileUtilities
19 December 1978                                          FileUtilities-CCL.SAI

CCL.SAI
  The CCL module provides simple functions which may be called at the entry and
exit  points of a SAIL program.  These functions provide the local standard CCL
linkage for SAIL programs.
19 December 1978                                          FileUtilities-CCL.SAI


CCLENTRY
Abstract:

CCLEntry  determines whether the program was invoked through a CCL linkage from
another program.  The parameter string is  filled  with  the  contents  of  the
TMPCore file with the given 'name'.
INTERNAL SIMPLE BOOLEAN PROCEDURE CCLEntry(STRING TMPFileID;
 REFERENCE STRING TMPData);
Parameters:

     TMPFileID -- Identifier for TMPCorefile.

     TMPData -- String to receive contents of TMPCore file
Results:

Returns  True  if  program  was  entered  through  CCL  linkage.  Returns false
otherwise.
Side effects:

None.
Errors:

None.
19 December 1978                                          FileUtilities-CCL.SAI


CCLEXIT
Abstract:

CCLExit  leaves  the current program and attempts to run the given program.  If
the specified Temp!File string has a suffixed "/D" switch, the  given  file  is
deleted.
INTERNAL SIMPLE PROCEDURE CCLExit(STRING Temp!File,Program;
 INTEGER Offset(1); Boolean DoSRUN(false));
Parameters:

     Temp!File -- String containing name of file.

     Program -- String containing file name for a program.

     Offset -- Offset at which to start the program.  (Default is 1).

     DoSRUN  --  Boolean  specifying  whether to do a DEC RUN or a Stanford RUN
     (default is false meaning DEC).
Results:

None.
Side effects:

If the Temp!File string has a "/D" suffix, the file  is  deleted  if  possible.
The  specified  program is then run via RunProg with at the offset specified by
the parameter.
Errors:

A message is given if the Temp!File cannot be deleted as requested.
19 December 1978                                         FileUtilities-CHAN.SAI

CHAN.SAI
  Given  a  channel, these routines will return information about the file that
the channel is pointing to.
19 December 1978                                         FileUtilities-CHAN.SAI


CHANPPN
Abstract:  ChanPPN finds the PPN on which the file open on Channel exists.
internal simple integer procedure ChanPPN(integer Channel);
Parameters:  Channel: Integer that is channel number that was used in OPEN.
Results:  ChanPPN returns the PPN associated with Channel.
Side effects: None.
Errors:  If the PATH. UUO fails, ChanPPN will use the current job's PPN.
19 December 1978                                         FileUtilities-CHAN.SAI


CHANSTR
Abstract:  ChanStr returns the structure associated with Channel.
internal simple integer procedure ChanStr(integer Channel);
Parameters:  Channel: Integer that is a channel number used in an OPEN.
Results:    If the PATH. UUO fails, ChanStr returns 0.  Otherwise, if no LOOKUP
or ENTER has been performed on Channel, then ChanStr will return  cvsix("DSK").
If  a  LOOKUP  or  ENTER has been performed on Channel, ChanStr will return the
integer that is the SIXBIT of the file structure on which the file that Channel
points to resides.
Side effects: None.
Errors: None.
19 December 1978                                       FileUtilities-CMUPPN.SAI

CMUPPN.SAI
  A package for performing simple CMU PPN manipulation.
19 December 1978                                       FileUtilities-CMUPPN.SAI


CVCMUDEC
Abstract:  CVCMUDEC returns an integer PPN given a string one.
internal simple integer procedure CVCMUDEC(string CMUPPN);
Parameters:    CMUPPN:  String PPN (i.e. CMU format) to be translated.  The PPN
     may be enclosed within "[" and "]".
Results:  CVCMUDEC translates the string PPN into an integer and returns it.
Side effects: None.
Errors: None.
19 December 1978                                       FileUtilities-CMUPPN.SAI


CVDECCMU
Abstract:  CVDECCMU returns a string PPN given an integer one.
internal simple string procedure CVDECCMU(integer DECPPN);
Parameters:  DECPPN: An integer (i.e. DEC format) PPN.
Results:    CVDECCMU  translates  DECPPN  into a string and returns it.  If the
DECPPN does not map to a CMU PPN then CVDECCMU will return a string  containing
a  ","  separating  the  two halves.  Note that "[" and "]" are NOT returned as
part of the string PPN.
Side effects: None.
Errors:  If the DECCMU UUO fails, CVDECCMU will simply change the  integer  PPN
into the corresponding octal string and separate the halves by a ",".
19 December 1978                                       FileUtilities-DSKPPN.SAI

DSKPPN.SAI
  Find the PPN that is the default directory.
19 December 1978                                       FileUtilities-DSKPPN.SAI


DISK!PPN
Abstract:  Disk!PPN finds the PPN that is the default directory path.
internal simple integer procedure Disk!PPN;
Parameters: None.
Results:    Disk!PPN  returns the integer that is the DEC format PPN associated
with the default directory path.
Side effects: None.
Errors:  If the PATH UUO fails, the GETPPN UUO result will be returned  as  the
value of Disk!PPN.
19 December 1978                                        FileUtilities-EFILE.SAI

EFILE.SAI
  Procedures to set up very easy file I/O.
19 December 1978                                        FileUtilities-EFILE.SAI


EASYREAD
Abstract:  Opens a file for input.
internal simple boolean procedure EasyRead(
 reference integer Channel;
 reference string HisFile);
Parameters:    Channel:  A reference integer used to return the channel number.
     HisFile: A reference string that is the file specification of the file  to
     be  opened  for  input.   If it initially has null value, the user will be
     requested to supply a file specification.  Also see SIDE EFFECTS.
Result:  EasyRead is FALSE if the file can be opened, TRUE otherwise.
Side effects:  1) When EasyRead gets a free channel, Channel will be set to the
new channel number.  2) EasyBrkchr[Channel] will be used as the break character
parameter to the open call (see the SAIL manual).  3) EasyEOF[Channel] will  be
used  as  the end of file parameter to the open call (see the SAIL manual).  4)
HisFile will be set to the file specification of the file that is  successfully
opened  (or  the last file that was tried, which will be null if user input was
requested and the user did not want to give a  file  spec.).    Note  that  the
string  "DSK:" will be added to the start of a file specification that does not
contain an explicit device if the file is successfully opened.
Errors:  All errors associated with OPEN and LOOKUP UUO's may  occur,  and  are
handled by the procedure, not SAIL.
19 December 1978                                        FileUtilities-EFILE.SAI


EASYWRITE
Abstract:  Opens a file for output.
internal simple boolean procedure EasyWrite(
 reference integer Channel;
 reference string HisFile);
Parameters:    Channel:  A  reference  integer which will be used to return the
     channel  number.    HisFile:  A  reference  string  that   is   the   file
     specification  of  the  file  to be opened for input.  If it initially has
     null value, the user will be requested to  supply  a  file  specification.
     Also see SIDE EFFECTS.
Result:  EasyWrite is FALSE if the file can be opened, TRUE otherwise.
Side  effects:  1) When EasyWrite gets a free channel, then Channel will be set
to the new channel number.  2) HisFile will be set to the file specification of
the file that is successfully opened (or the last file that  was  tried,  which
will  be  null  if user input was requested and the user did not want to give a
file spec.).  Note that the string "DSK:" will be added to the start of a  file
specification  that  does  not  contain  an  explicit  device  if  the  file is
successfully opened.
Errors:  All errors associated with OPEN, ENTER, and LOOKUP  UUO's  may  occur,
and are handled by the procedure, not SAIL.
19 December 1978                                       FileUtilities-FILDEF.SAI

FILDEF.SAI
  Routines  for  tearing file names apart, putting them back together and doing
various kinds of defaulting.
19 December 1978                                       FileUtilities-FILDEF.SAI


FILEDEFAULT
Abstract:   FileDefault takes a file specification and a default file spec. and
fills in omitted fields in the file spec. with the fields from the default file
spec.
internal simple string procedure FileDefault(
 string AFileSpec, DefaultFileSpec; integer ForceMask(0));
Parameters:  AFileSpec: String that is the main file  spec.    DefaultFileSpec:
     String  that is the file spec. providing the defaulted fields.  ForceMask:
     Integer that specifies which default fields should be used even if present
     in AFileSpec.  The bits in ForceMask are allocated as follows:
                     1 - Force use of device
                     2 - Force use of file
                     4 - Force use of extension
                     8 - Force use of PPN
     The default ForceMask is 0.
Results:  FileDefault returns the defaulted filled-in file spec. as a string.
Side effects: None.
Errors: None.
19 December 1978                                       FileUtilities-FILDEF.SAI


PUTFILETOGETHER
Abstract:    PutFileTogether takes the components of a file spec. and puts them
together with the appropriate delimiters.
internal simple string procedure PutFileTogether(
 string Device, File, Ext, PPN);
Parameters:  Device: String that is the device portion of a file spec.    File:
     String that is the file portion.  Ext: String that is the extension.  PPN:
     String that is the PPN.
Results:  PutFileTogether returns the combined file spec. as a string.
Side effects: None.
Errors: None.
19 December 1978                                       FileUtilities-FILDEF.SAI


TEARFILEAPART
Abstract:   TearFileApart takes a file specification and returns by side-effect
the components of the file spec.
internal simple integer procedure TearFileApart(string AFileSpec;
 reference string Device, File, Ext, PPN);
Parameters:  AFileSpec: String that is the file specification to be torn apart.
     Device: Reference string used to return the device  portion  of  the  file
     spec.    A  null  string  will  be returned if there was no device portion
     explicitly mentioned (i.e. ":" did not  explicitly  occur  in  AFileSpec).
     File:  Same  as Device but used for returning the file name.  Ext: Same as
     Device but used for returning the extension.  PPN: Same as Device but used
     for returning the PPN.
Results:  TearFileApart returns 0 if the file spec. appeared to be of the right
form, non-zero if there was an anomaly (like the PPN coming before  the  device
and  or  file, or multiple devices, etc.).  If there is a decodable file spec.,
all effort will be made to decode it.  1 will be returned to alert  the  caller
if  there  does  not  appear  to  be  any  attempt  at  multiple definitions or
overlapping definitions of fields, and if a field is specified but then given a
null value.  2 will be returned  if  the  file.  spec.  appears  to  simply  be
invalid,  but  the first value decoded for each field will still be returned by
side-effect.
side-effect the components of the file spec.

parameters:  AFileSpec: String that is the file specification to be torn apart.
Device: Reference string used to return the device portion of the file spec.  A
null string will  be  returned  if  there  was  no  device  portion  explicitly
mentioned  (i.e. ":"  did  not  explicitly  occur in AFileSpec).  File: Same as
Device but used for returning the file name.  Ext: Same as Device but used  for
returning the extension.  PPN: Same as Device but used for returning the PPN.

RESULTS:  TearFileApart returns 0 if the file spec. appeared to be of the right
form,  non-zero  if there was an anomaly (like the PPN coming before the device
and or file, or multiple devices, etc.).  If there is a decodable  file  spec.,
all  effort  will be made to decode it.  1 will be returned to alert the caller
if there does  not  appear  to  be  any  attempt  at  multiple  definitions  or
overlapping definitions of fields, and if a field is specified but then given a
null  value.    2  will  be  returned  if  the file. spec. appears to simply be
invalid, but the first value decoded for each field will still be  returned  by
side-effect.

SIDE EFFECTS:  See PARAMETERS.
Errors: None.
19 December 1978                                         FileUtilities-FILE.SAI

FILE.SAI
  Procedures to set up simple file I/O.
19 December 1978                                         FileUtilities-FILE.SAI


MUSTREAD
Abstract:  Opens a file for input.  Many of the parameters are defaulted.
internal simple boolean procedure MustRead(
 reference integer Channel, Count, Brkchr, EOF;
 reference string HisFile;
 integer Mode(ASCII); string UserPrompt("Input File: ");
 string DefaultExtList("");
 integer NumInBufs(2));
Parameters:    Channel:  A reference integer that should be a channel number in
     the range 0 through 15.  If it is  not  in  this  range,  the  first  free
     channel  (if  there  is one) will be used.  Also see SIDE EFFECTS.  Count:
     Either an integer constant or  a  reference  integer  that  specifies  the
     maximum  number of characters to be read by a single INPUT call.  300 is a
     good value to use generally.  Brkchr:  A  reference  integer.    See  SIDE
     EFFECTS.    EOF:  A  reference  integer.    See  SIDE EFFECTS.  HisFile: A
     reference string that is the file specification of the file to  be  opened
     for  input.  If it initially has null value, the user will be requested to
     supply a file specification.   Also  see  SIDE  EFFECTS.    Mode:  Integer
     specifying  the  mode  in  which  to open the file.  It defaults to Ascii.
     UserPrompt: String that will typed to the  user  as  a  prompt  if  it  is
     necessary   to   ask   for   a  file  specification.    It  is  defaulted.
     DefaultExtList:  String  of  default  extensions  to  try  if   the   file
     specification does not contain an explicit extension.  This list should be
     separated  by  either  ","  or "/", and may contain spaces and tabs (which
     will be ignored).  It is defaulted to  nothing.    NumInBufs:  An  integer
     specifying the number of input buffers to use.  It defaults to 2.
Result:  MustRead is FALSE if the file can be opened, TRUE otherwise.
Side  effects:   1) If MustRead needs to get a free channel because Channel was
out of range, then Channel will be set to the new channel number.    2)  Brkchr
will  be  used  as the break character parameter to the open call (see the SAIL
manual).  3) EOF will be used as the end of file parameter  to  the  open  call
(see the SAIL manual).  4) HisFile will be set to the file specification of the
file  that  is successfully opened (or the last file that was tried, which will
be null if user input was requested and the user did not want to  give  a  file
spec.).    Note  that  the  string  "DSK:" will be added to the start of a file
specification that  does  not  contain  an  explicit  device  if  the  file  is
successfully opened.
Errors:    All  errors associated with OPEN and LOOKUP UUO's may occur, and are
handled by the procedure, not SAIL,  except  for  those  using  the  Mode  left
halfword bits other than '20000.
19 December 1978                                         FileUtilities-FILE.SAI


MUSTWRITE
Abstract:  Opens a file for output.  Many of the parameters are defaulted.
internal simple boolean procedure MustWrite(
 reference integer Channel, EOF;
 reference string HisFile;
 boolean Warn(true);
 integer Mode(ASCII); string UserPrompt("Output File: ");
 string DefaultExt(null); integer NumOutBufs(2));
Parameters:    Channel:  A reference integer that should be a channel number in
     the range 0 through 15.  If it is  not  in  this  range,  the  first  free
     channel  (if  there  is one) will be used.  Also see SIDE EFFECTS.  EOF: A
     reference integer that will be used as  specified  in  the  SAIL  Manual's
     description  for  the  EOF  argument to OPEN.  HisFile: A reference string
     that is the file specification of the file to be opened for input.  If  it
     initially  has  null  value,  the  user wi requested to supply a file
     specification.  Also see SIDE EFFECTS.  Warn: Boolean that  if  true  (the
     default)  causes  the  user  to  be queried as to whether an existing file
     should be overwritten.  Mode: Integer specifying the mode in which to open
     the file.  This is defaulted to ASCII.  UserPrompt: String that will typed
     to  the  user  as  a  prompt  if  it  is  necessary  to  ask  for  a  file
     specification.    DefaultExt:  String  that is the extension to use if the
     file name  has  neither  an  extension  nor  a  "."  (defaults  to  null).
     NumOutBufs: An integer specifying the number of output buffers to use.
Result:  MustWrite is FALSE if the file can be opened, TRUE otherwise.
Side  effects:  1) If MustWrite needs to get a free channel because Channel was
out of range, then Channel will be set to the new channel number.   2)  HisFile
will  be  set to the file specification of the file that is successfully opened
(or the last file that was  tried,  which  will  be  null  if  user  input  was
requested  and  the  user  did  not  want to give a file spec.).  Note that the
string "DSK:" will be added to the start of a file specification that does  not
contain  an  explicit device if the file is successfully opened.  3) EOF may be
modified both during the procedure's execution and later  due  to  side-effects
generated  by the SAIL runtimes.  In general EOF will be used as a global error
condition flag.  See the SAIL manual's description  of  TOPS-10  file  I/O  for
further details.
Errors:    All  errors associated with OPEN, ENTER, and LOOKUP UUO's may occur,
and are handled by the procedure, not SAIL, except for  those  using  the  Mode
left halfword bits.
19 December 1978                                         FileUtilities-FILE.SAI


WANTREAD
Abstract:  Opens a file for input.  Many of the parameters are defaulted.
internal simple boolean procedure WantRead(
 reference integer Channel, Count, Brkchr, EOF;
 reference string HisFile;
 integer Mode(ASCII); string UserPrompt("Input File: ");
 string DefaultExtList("SAI,BLI,B11,MAC,FAI,M11,P11,MIC,"&
 "SNO,PAS,LSP,SIM,MSS,PUB,XOF,RNO,TXT,DOC,HLP");
 integer NumInBufs(2));
Parameters:    Channel:  A reference integer that should be a channel number in
     the range 0 through 15.  If it is  not  in  this  range,  the  first  free
     channel  (if  there  is one) will be used.  Also see SIDE EFFECTS.  Count:
     Either an integer constant or  a  reference  integer  that  specifies  the
     maximum  number of characters to be read by a single INPUT call.  300 is a
     good value to use generally.  Brkchr:  A  reference  integer.    See  SIDE
     EFFECTS.    EOF:  A  reference  integer.    See  SIDE EFFECTS.  HisFile: A
     reference string that is the file specification of the file to  be  opened
     for  input.  If it initially has null value, the user will be requested to
     supply a file specification.   Also  see  SIDE  EFFECTS.    Mode:  Integer
     specifying  the  mode  in  which  to open the file.  It defaults to Ascii.
     UserPrompt: String that will typed to the  user  as  a  prompt  if  it  is
     necessary   to   ask   for   a  file  specification.    It  is  defaulted.
     DefaultExtList:  String  of  default  extensions  to  try  if   the   file
     specification does not contain an explicit extension.  This list should be
     separated  by  either  ","  or "/", and may contain spaces and tabs (which
     will be ignored).  It is defaulted to the SOS search sequence.  NumInBufs:
     An integer specifying the number of input buffers to use.  It defaults  to
     2.
Result:  WantRead is FALSE if the file can be opened, TRUE otherwise.
Side  effects:   1) If WantRead needs to get a free channel because Channel was
out of range, then Channel will be set to the new channel number.    2)  Brkchr
will  be  used  as the break character parameter to the open call (see the SAIL
manual).  3) EOF will be used as the end of file parameter  to  the  open  call
(see the SAIL manual).  4) HisFile will be set to the file specification of the
file  that  is successfully opened (or the last file that was tried, which will
be null if user input was requested and the user did not want to  give  a  file
spec.).    Note  that  the  string  "DSK:" will be added to the start of a file
specification that  does  not  contain  an  explicit  device  if  the  file  is
successfully opened.
Errors:    All  errors associated with OPEN and LOOKUP UUO's may occur, and are
handled by the procedure, not SAIL,  except  for  those  using  the  Mode  left
halfword bits other than '20000.
19 December 1978                                         FileUtilities-FILE.SAI


WANTWRITE
Abstract:  Opens a file for output.  Many of the parameters are defaulted.
internal simple boolean procedure WantWrite(
 reference integer Channel, EOF;
 reference string HisFile;
 boolean Warn(true);
 integer Mode(ASCII); string UserPrompt("Output File: ");
 string DefaultExt(null); integer NumOutBufs(2));
Parameters:    Channel:  A reference integer that should be a channel number in
     the range 0 through 15.  If it is  not  in  this  range,  the  first  free
     channel  (if  there  is one) will be used.  Also see SIDE EFFECTS.  EOF: A
     reference integer that will be used as  specified  in  the  SAIL  Manual's
     description  for  the  EOF  argument to OPEN.  HisFile: A reference string
     that is the file specification of the file to be opened for input.  If  it
     initially  has  null  value,  the  user will be requested to supply a file
     specification.  Also see SIDE EFFECTS.  Warn: Boolean that if true  causes
     the  user  to  be  queried  as  to  whether  an  existing  file  should be
     overwritten.  Mode: Integer specifying the mode in which to open the file.
     UserPrompt: String that will typed to the  user  as  a  prompt  if  it  is
     necessary to ask for a file specification.  DefaultExt: String that is the
     extension  to  use  if  the  file  name has neither an extension nor a "."
     (defaults to null).  NumOutBufs:  An  integer  specifying  the  number  of
     output buffers to use.
Result:  WantWrite is FALSE if the file can be opened, TRUE otherwise.
Side  effects:  1) If WantWrite needs to get a free channel because Channel was
out of range, then Channel will be set to the new channel number.   2)  HisFile
will  be  set to the file specification of the file that is successfully opened
(or the last file that was  tried,  which  will  be  null  if  user  input  was
requested  and  the  user  did  not  want to give a file spec.).  Note that the
string "DSK:" will be added to the start of a file specification that does  not
contain  an  explicit device if the file is successfully opened.  3) EOF may be
modified both during the procedure's execution and later  due  to  side-effects
generated  by the SAIL runtimes.  In general EOF will be used as a global error
condition flag.  See the SAIL manual's description  of  TOPS-10  file  I/O  for
further details.
Errors:    All  errors associated with OPEN, ENTER, and LOOKUP UUO's may occur,
and are handled by the procedure, not SAIL, except for  those  using  the  Mode
left halfword bits.
19 December 1978                                        FileUtilities-FILE2.SAI

FILE2.SAI
  Some simple file I/O utilities.
19 December 1978                                        FileUtilities-FILE2.SAI


FILERR
Abstract:    FilErr  converts  LOOKUP  and ENTER error codes into English error
messages.
internal simple string procedure FilErr(integer FLAG!);
Parameters:  FLAG!: Integer that is returned by LOOKUP/ENTER.
Results:  The appropriate error message is returned as FilErr's string value.
Side effects: None.
Errors: None.
19 December 1978                                        FileUtilities-FILE2.SAI


GETDEV
Abstract:   Strips the device, if any, off the front of the file specification.
If there is no device, it returns DefaultDev.
internal simple string procedure GetDev(reference String Str;
 string DefaultDev("DSK"));
Parameters:  Str: Reference string which is the  complete  file  specification.
     DefaultDev: String that is the default device (defaults to "DSK").
Result:  GetDev will return the string that represents the device name (without
a trailing colon).
Side  effects:  The device portion of Str will be removed (if it exists).  This
includes the ":".
Errors: None.
19 December 1978                                        FileUtilities-GRIPE.SAI

GRIPE.SAI
  The  Gripe Sub-module provides a simple function that will take text from the
user's terminal and mail it (via QNET) to a pre-determined destination.
19 December 1978                                        FileUtilities-GRIPE.SAI


GRIPE
Abstract:    The  Gripe  function  permits  a user to type in a message that is
subsequently mailed off to the Maintainer.
internal simple procedure Gripe(string Maintainer, HisSystem;
 reference string Subject;
 string UserMsgPrompt ("Please enter your Gripe and terminate"&
 " with an <Escape>.  Thank you."&crlf);
 string UserSubPrompt ("Subject: "));
Parameters:  Maintainer: String that should be a valid ARPANET address  at  the
     site  specified by HisSystem.  HisSystem: String that specifies an ARPANET
     site.  Subject: Reference string that will be used as the subject  of  the
     message.    If  it is null, the user will be asked for it.  UserMsgPrompt:
     String to type out to the user when asking  for  the  message.    See  the
     routine  header for the default.  UserSubPrompt: String to type out to the
     user when asking for the subject.  See the routine header for the default.
Results: None.
Side effects:  A file with the name <nnn>RDM.QED is created that  contains  the
message  that  will  be sent.  A request is queued in the user's FTP.Q file and
QNET notified.
Errors:  The user is notified if the Gripe  message  file  cannot  be  created.
(The user is instructed to mail the message him/herself.)
19 December 1978                                       FileUtilities-HOMFIL.SAI

HOMFIL.SAI
  HomFil provides a function that will determine which file the calling program
came from.
19 December 1978                                       FileUtilities-HOMFIL.SAI


HOMEFILENAME
Abstract:    HomeFileName looks at the register save area and computes the disk
file name for the program.
internal simple string procedure HomeFileName;
Parameters: None.
Results:  HomeFileName will return as a string a full file  specification  that
is the file from which the current program was run.
Side effects: None.
Errors: None.
19 December 1978                                         FileUtilities-QNET.SAI

QNET.SAI
  Routines to submit a request to QNET to send mail files.
19 December 1978                                         FileUtilities-QNET.SAI


QNETEND
Abstract:    QnetEnd  makes  the  file on [3,3] that notifies Qnet of a service
request.
internal simple procedure QnetEnd;
Parameters: None.
Results: None.
Side effects:  The file <QnetChan  PPN>.QED[3,3]  is  created.    Additionally,
QnetChan is released.
Errors: None.
19 December 1978                                         FileUtilities-QNET.SAI


QNETINIT
Abstract:  QnetInit opens the FTP.Q files in append mode.
internal simple boolean procedure QnetInit(string QPPN(null);
 integer Tries(5));
Parameters:    QPPN:  String  PPN on which to open the FTP.Q files (defaults to
     null).  This need not be enclosed in "[]".  Tries: Integer that is  number
     of  times to try opening the FTP.Q files before going to sleep (default is
     5).
Results:  QnetInit returns true if it could get the FTP.Q or FTP.Q1 file  open,
false otherwise.  Note that QnetInit tries FTP.Q and FTP.Q1 alternatively.
Side  effects:   QnetChan will be the channel on which the FTP.Q or FTP.Q1 file
is open if QnetInit succeeds.
Errors: None.
19 December 1978                                         FileUtilities-QNET.SAI


QNETOUT
Abstract:    QnetOut  writes the entry in the FTP.Q(1) file that specifies what
file is being sent.
internal simple procedure QnetOut(string Fname,Who,Host);
Parameters:  Fname: String that is name of file to  mail.    Who:  String  that
     identifies  who  the  file is being sent to.  Host: String that is name of
     ARPANET host site for Who.
Results: None.
Side effects:  QnetOut dumps a SMLFL entry into the file open on  QnetChan  and
informs the user that mail has been sent.
Errors: None.
19 December 1978                                        FileUtilities-SWINI.SAI

SWINI.SAI
  The  SwIni sub-module provides a function that will look for all the switches
specified in SWITCH.INI for an arbitrary program.
19 December 1978                                        FileUtilities-SWINI.SAI


GETSWITCHINI
Abstract:    GetSwitchIni  finds  all  entries  in  SWITCH.INI  for the program
specified by CuspName.
internal simple string procedure GetSwitchIni(
 string CuspName, OptionName (null));
Parameters:  CuspName: String that is the  name  of  the  CUSP  for  which  the
     switches are specified.  OptionName: String that is the name of the option
     for CuspName that is to be used.  The default is null, which implies using
     the normal entries for CuspName in SWITCH.INI.
Results:    GetSwitchIni  returns  all the switches found in SWITCH.INI for the
program specified by CuspName as a single string.  This  will  be  null  if  no
switches  were  found, otherwise it will be an image of the lines in SWITCH.INI
with the program name removed.  If there are multiple lines in SWITCH.INI, they
will be concatenated together.  Note that spaces and tabs will be stripped.
Side effects: None.
Errors: None.
19 December 1978                                       FileUtilities-TMPFIL.SAI

TMPFIL.SAI
  These  procedures  read  and write temporary files either in TMPCOR or on DSK
for use by another program.  The procedures return TRUE for success  and  FALSE
for  failure.   In the two read file procedures, the reference string FILE will
contain the contents of the temporary file if found.
19 December 1978                                       FileUtilities-TMPFIL.SAI


JOBNUM
Abstract:  JobNum returns the current job's job number.
internal SIMPLE STRING PROCEDURE JobNum;
Parameters: None.
Results:   JobNum returns as a three character string the current job number in
decimal, with zero padding on the left.
Side effects: None.
Errors: None.
19 December 1978                                       FileUtilities-TMPFIL.SAI


RTMPCOR
Abstract:  Procedure for reading (and optionally deleting) a TMPCOR file.
internal BOOLEAN PROCEDURE RTMPCOR(STRING NAME; REFERENCE STRING FILE;
 BOOLEAN DELETE(True));
Parameters:  Name: String whose first three characters will be used as the name
     of  the  TMPCOR  file  to read.  File: Reference string used to return the
     entire contents of the file read.  Note that there will  NOT  be  trailing
     nulls.   Delete: Boolean that if true (the default) causes the TMPCOR file
     to be deleted after it has been read.
Results:  RTMPCOR returns  true  if  it  could  read  the  TMPCOR  file,  false
otherwise.
Side effects:  File gets set to the contents of the TMPCOR file.
Errors: None.
19 December 1978                                       FileUtilities-TMPFIL.SAI


RTMPFILE
Abstract:    Procedure  for  reading (and optionally deleting) a temporary file
(either TMPCOR or DSK:<nnn><fff>.TMP).
internal BOOLEAN SIMPLE PROCEDURE RTMPFile(STRING NAME;
 REFERENCE STRING FILE; BOOLEAN DELETE(True),TMPCOR(True));
Parameters:  Name: String whose first three characters will be used as the name
     of the temporary file to read.  File: Reference string used to return  the
     entire  contents  of  the file read.  Note that there will NOT be trailing
     nulls.  Delete: Boolean that if true (the default)  causes  the  temporary
     file  to  be deleted after it has been read.  TMPCOR: Boolean that if true
     (the default) causes the read to be tried on TMPCOR before DSK:.
Results:  RTMPFile returns true if it could  read  the  temporary  file,  false
otherwise.
Side effects:  File gets set to the contents of the TMPCOR file.
Errors: None.
19 December 1978                                       FileUtilities-TMPFIL.SAI


RUNPROG
Abstract:    RUNPROG  takes  a  string  program name and an offset and runs the
specified program if possible.  If it ever returns there was an error.
internal PROCEDURE RunProg(STRING NAME; INTEGER OFFSET(1);
 Boolean DoSRUN(false));
Parameters:  Name: String that is file specification for  program  to  be  run.
     Device  is  defaulted  to  SYS:  if  none  is given.  Offset: Integer that
     specifies run uuo offset (defaults to 1).  DoSRUN: Boolean  that  if  true
     (default  is  false)  will cause RunProg to do a "Stanford RUN" instead of
     the standard DEC RUN UUO.
Results: None.
Side effects:  If RunProg is successful, the specified  program  will  be  run,
thus  destroying  the  current  core image.  If RunProg fails, it will print an
error message directly to the terminal and exit, closing the channels.
Errors:  If the file name is  invalid,  RunProg  will  return  print  an  error
message and return to its caller.
19 December 1978                                       FileUtilities-TMPFIL.SAI


WTMPCOR
Abstract:  Procedure for writing a TMPCOR file.
internal BOOLEAN PROCEDURE WTMPCOR(STRING NAME,FILE);
Parameters:  Name: String whose first three characters will be used as the name
     of  the  TMPCOR  file  to  read.    File: String that will be written into
     TMPCOR.
Results:  WTMPCOR returns true  if  it  could  write  the  TMPCOR  file,  false
otherwise.
Side effects: None.
Errors: None.
19 December 1978                                       FileUtilities-TMPFIL.SAI


WTMPFILE
Abstract:      Procedure  for  writing  a  temporary  file  (either  TMPCOR  or
DSK:<nnn><fff>.TMP).
internal BOOLEAN SIMPLE PROCEDURE WTMPFile(STRING NAME,FILE;
 BOOLEAN TMPCOR(True));
Parameters:  Name: String whose first three characters will be used as the name
     of the temporary file to  read.    File:  String  that  will  be  written.
     TMPCOR: Boolean that if true (the default) causes the write to be tried on
     TMPCOR before DSK:.
Results:    WTMPFile  returns  true if it could write the temporary file, false
otherwise.
Side effects: None.
Errors: None.
19 December 1978                                         FileUtilities-WILD.SAI

WILD.SAI
  Package to do wild card file searching.
19 December 1978                                         FileUtilities-WILD.SAI


DIRECT
Abstract:    DIRECT  is a directory searching routine used to search the system
for arbitrary files, especially those which are partially  specified  with  PIP
wild     card     symbols.     The     SAIL     program     simply     calls...
DIRECT("DSK:FILE.EXT[ProjProg]",Call!me);
internal procedure DIRECT(string FILE!SPEC; Boolean procedure UserProc;
 Boolean MFDWarn(False), UFDWarn(False));
Parameters:  File!Spec: String that is a full or  partial  file  specification.
     Valid  in  the  device  part  are:    1)  Null (meaning "DSK", or "use the
     structures in my search list") 2)  A  file  structure,  e.g. DSKC  3)  Any
     system  ersatz  device,  such  as SYS: or HLP: or REL:, meaning to use the
     correct search list and PPN 4) ALL, meaning "use all structures  currently
     in  the  system" 5) An asterisk ("*"), a synonym for ALL:  6) LIB, if your
     job has a library Valid in the file name, extension and PPN parts are:  1)
     Any filename, such as FOO.BAZ Any CMU PPN, such as [A640KG0K] Any DEC PPN,
     such as [1027,76442] 2) Null PPN will use the  logged  in  PPN.    3)  Any
     filename  and  CMU  PPN  with PIP wild card specifications "?" and/or "*".
     The question mark in any  location  will  match  all  characters  at  that
     location.    An  asterisk fills the remainder of the filename or extension
     with "?"s.  An asterisk in the PPN  part  will  match  with  all  projects
     ([*KG0K])  or  all programmer numbers ([A610*]), or both ([**]).  DEC ppns
     may not include wild-cards.  4) Note that ".ext" is equivalent to  "*.ext"
     and  "file"  is equivalent to "file.*".  UserProc: Boolean procedure which
     will be called for each file found.  It must have  four  reference  string
     parameters.  It should return TRUE to abort the search (i.e you have found
     the  file  you  wanted),  or  return  FALSE  to  continue  the search.  An
     example...  Boolean procedure Call!me(string Dev, File, Ext,  PPN);  Begin
     Print("I    found:    ",EACH!NAME,Crlf&"Want    to    search   more?   ");
     return(inchwl="Y"); end; DIRECT("ALL:FOO???.SAI[*KG??]",CALL!ME);

     The parameters passed to UserProc are the device, file, extension and  PPN
     portions  of  the  file specification (without ":", ".", "[" or "]").  All
     parameters will be provided if available, i.e. "DSK" for device, ""  means
     a  null extension, etc.  MFDWarn: Boolean that if true (defaults to false)
     will cause an error message to be printed if an attempt  to  open  an  MFD
     fails.    UFDWarn: Boolean that behaves identically to MFDWarn but is used
     for UFD errors (also defaults to false).
Result: None.
Side effects:  See PARAMETERS (UserProc).
Errors:  Any OPEN or LOOKUP error is possible.  If they occur,  the  user  will
get  a  message  if  so indicated by MFDWarn and UFDWarn.  Exception errors may
cause SAIL to complain directly.
19 December 1978                                       FileUtilities-WILDGF.SAI

WILDGF.SAI
  Package to do wild card file searching.
19 December 1978                                       FileUtilities-WILDGF.SAI


NEXTWFILE
Abstract:  NextWFile is a directory searching routine used to search the system
for  arbitrary  files,  especially those which are partially specified with PIP
wild card symbols.  It differs from the Direct procedure in  WILD.SAI  in  that
each time it is called it will return the next matching file (if there is one).
Thus it is a file generator.
internal boolean procedure NextWFile(string FILE!SPEC;
 reference boolean FirstCall;
 reference string RDev, RFile, RExt, RPPN;
 Boolean MFDWarn(False), UFDWarn(False));
Parameters:    File!Spec:  String that is a full or partial file specification.
     Valid in the device part are:    1)  Null  (meaning  "DSK",  or  "use  the
     structures  in  my  search  list")  2)  A file structure, e.g. DSKC 3) Any
     system ersatz device, such as SYS: or HLP: or REL:,  meaning  to  use  the
     correct  search list and PPN 4) ALL, meaning "use all structures currently
     in the system" 5) An asterisk ("*"), a synonym for ALL:  6) LIB,  if  your
     job has a library Valid in the file name, extension and PPN parts are:  1)
     Any filename, such as FOO.BAZ Any CMU PPN, such as [A640KG0K] Any DEC PPN,
     such  as  [1027,76442]  2)  Null  PPN  will use the logged in PPN.  3) Any
     filename and CMU PPN with PIP wild card  specifications  "?"  and/or  "*".
     The  question  mark  in  any  location  will  match all characters at that
     location.  An asterisk fills the remainder of the  filename  or  extension
     with  "?"s.    An  asterisk  in  the PPN part will match with all projects
     ([*KG0K]) or all programmer numbers ([A610*]), or both ([**]).   DEC  ppns
     may  not include wild-cards.  4) Note that ".ext" is equivalent to "*.ext"
     and "file" is equivalent to "file.*".  FirstCall: Reference  boolean  that
     should  be  set  to  True  by  the  caller  just  before the first call on
     NextWFile with a particular File!Spec.  RDev:  Reference  string  used  to
     return  device  portion  of matching file.  RFile: Ditto for file portion.
     RExt: Ditto for extension portion.  RPPN: Ditto for PPN portion.  MFDWarn:
     Boolean that if true (defaults to false) will cause an error message to be
     printed if an attempt to open an MFD fails.  UFDWarn: Boolean that behaves
     identically to MFDWarn but is  used  for  UFD  errors  (also  defaults  to
     false).
Result:    NextWFile  returns  True  iff  it  could  find another match for the
File!Spec.
Side effects:  See PARAMETERS.
Errors:  Any OPEN or LOOKUP error is possible.  If they occur,  the  user  will
get  a  message  if  so indicated by MFDWarn and UFDWarn.  Exception errors may
cause SAIL to complain directly.
19 December 1978                                        FileUtilities-XLOOK.SAI

XLOOK.SAI
  Procedures    and    macros   to   provide   convenient   use   of   extended
lookup/enter/rename.
19 December 1978                                        FileUtilities-XLOOK.SAI


XENTER
Abstract:  Calls XUUO to perform an extended enter.
internal simple integer procedure XEnter(integer Chan;
 string FileName;
 boolean ParseFile(true));
Parameters: None.
Result: None.
Side effects: None.
Errors: None.
19 December 1978                                        FileUtilities-XLOOK.SAI


XLOOKUP
Abstract:  Calls XUUO to perform an extended lookup.
internal simple integer procedure XLookup(integer Chan;
 string FileName;
 boolean ParseFile(true));
Parameters: None.
Result: None.
Side effects: None.
Errors: None.
19 December 1978                                        FileUtilities-XLOOK.SAI


XRENAME
Abstract:  Calls XUUO to perform an extended enter.
internal simple integer procedure XRename(integer Chan;
 string FileName;
 boolean ParseFile(true));
Parameters: None.
Result: None.
Side effects: None.
Errors: None.
19 December 1978                                        FileUtilities-XLOOK.SAI

Memory Management
19 December 1978                                   Memory Management-CORSER.SAI

CORSER.SAI
  Routines to do dynamic core allocation that cooperate with the SAIL runtimes.
19 December 1978                                   Memory Management-CORSER.SAI


BLIT
Abstract:    Blit  copies  a section of core to another section of core using a
BLT.
internal SIMPLE PROCEDURE Blit(INTEGER TOO,FROM,LENG);
Parameters:  Too: The first address of the destination section of core.   From:
     The  first  address  of  the  source section of core.  Leng: The number of
     words to copy (must be greater than 0).
Results: None.
Side effects:  Core in the region starting at From and ending at From+Leng-1 is
copied to the region starting at Too and ending at Too+Leng-1.
Errors: None.
19 December 1978                                   Memory Management-CORSER.SAI


BUFPUT
Abstract:  Equivalent to memory(Addres) _ Val.
internal INTEGER SIMPLE PROCEDURE BufPut(INTEGER ADDRES,VAL);
Parameters:  Addres: An integer specifying an address.  Val: An integer.
Results:  BufPut returns Val.
Side effects:  The memory location specified by Addres is set to Val.
Errors: None.
19 December 1978                                   Memory Management-CORSER.SAI


BUFSIZ
Abstract:  BufSiz returns the size of a block of allocated core.
internal INTEGER SIMPLE PROCEDURE BufSiz(INTEGER ADDRES);
Parameters:  Addres: Integer address of a block of allocated core.
Results:  BufSiz returns the size of the block of allocated core that starts at
Addres.
Side effects: None.
Errors: None.
19 December 1978                                   Memory Management-CORSER.SAI


BUFVAL
Abstract:  Equivalent to return(memory(Addres)).
internal INTEGER SIMPLE PROCEDURE BufVal(INTEGER ADDRES);
Parameters:  Addres: Integer that is address of a word in primary memory.
Results:  BufVal returns the contents of the address Addres.
Side effects: None.
Errors: None.
19 December 1978                                   Memory Management-CORSER.SAI


COREHANDLE
Abstract:    CoreHandle allocates and releases sections of core.  It also tells
the SAIL runtimes what it is doing so that there  are  no  conflicts  with  the
string and record processing.
internal INTEGER SIMPLE PROCEDURE CoreHandle(Boolean Get;
 Integer Arg; Boolean Warn(True));
Parameters:    Get:  Boolean  that  is True if CoreHandle should get new space,
     False if CoreHandle should release old space.  Arg: The number of words of
     space to get, or the head of a block of core to release.   Warn:  If  True
     (the default), if CoreHandle cannot get requested space it will inform the
     user.
Results:    CoreHandle  returns  either 0 or the address of the allocated block
after a request for new space.  CoreHandle does not return a  meaningful  value
after a request to release old space.
Side  effects:    Certain  SAIL  runtime  internal  variables  are  modified by
CoreHandle's actions.  See your local SAIL runtime code if you are curious.
Errors:  Inability to get requested space and Warn true will cause  a  USERERR.
An attempt to free a bad block will cause a USERERR.
19 December 1978                                   Memory Management-CORSER.SAI


GETCORE
Abstract:  GetCore gets a block of free core.
internal INTEGER SIMPLE PROCEDURE GetCore(INTEGER AMT);
Parameters:  Amt: Number of words to get.
Results:    GetCore  returns  the address of the block of core if successful, 0
otherwise.
Side effects:  See CoreHandle.
Errors:  See CoreHandle.
19 December 1978                                   Memory Management-CORSER.SAI


GETZCORE
Abstract:  GetZCore allocates and zeros a block of core.
internal INTEGER SIMPLE PROCEDURE GetZCore(INTEGER AMT);
Parameters:  Amt: The number of words to allocate.
Results:    GetZCore  returns  the  address  of  the requested block of core if
successful, 0 otherwise.
Side effects:  See CoreHandle.
Errors:  See CoreHandle.
19 December 1978                                   Memory Management-CORSER.SAI


RELCORE
Abstract:  RelCore releases a block of allocated core.
internal SIMPLE PROCEDURE RelCore(INTEGER WHR);
Parameters:  Whr: The address of the block of core to release.
Results: None.
Side effects:  See CoreHandle.
Errors:  See CoreHandle.
19 December 1978                                   Memory Management-CORSER.SAI


SMEAR
Abstract:    This smears Val over the area of core beginning at Strt and ending
at Strt+Leng-1 (i.e. the area has length Leng).
internal SIMPLE PROCEDURE Smear(INTEGER Strt,Leng,Val);
Parameters:  Strt: The address to start the smear at.    Leng:  The  number  of
     words  to  smear.  Val: Integer value to set each word in the smeared area
     to.
Results: None.
Side effects: None.
Errors: None.
19 December 1978                                   Memory Management-CORSER.SAI

String Utilities
19 December 1978                                      String Utilities-DATE.SAI

DATE.SAI
  SAIL procedures dealing with date and time.
19 December 1978                                      String Utilities-DATE.SAI


DATE!DECODE
Abstract:    DATE!DECODE  takes  a  DEC  format  date  and  returns through the
reference parameters the corresponding day, month and year.
internal simple procedure DATE!DECODE(reference integer M,D,Y;
 integer Val(-1));
Parameters:  M: Reference integer used  to  return  the  month.    D: Reference
     integer  used  to return the day.  Y: Reference integer used to return the
     year.  Val: Integer that is date in DEC format.  If -1 (the  default),  it
     will be initialized to the current date by DATE!DECODE.
Results: None.
Side effects:  See PARAMETERS.
Errors: None.
19 December 1978                                      String Utilities-DATE.SAI


DATESTR
Abstract:    DATESTR  returns  a  date  in string form according to a specified
format.  Passing a date of -1 to be decoded requests the  current  date.    The
formats are:
                0       nothing
                1       2/24/75
                2       24-Feb-75
                3       24 February 1975
                4       February 24, 1975
                5       24 Feb 1975

In  addition  the  day  of  the  week  may be added before the date in a format
specified in the left half of Fmt.  The left half formats are:  0 nothing 1 Mon
2 Monday
internal simple string procedure DATESTR(integer VAL(-1),Fmt(2));
Parameters:  Val: Integer that is a DEC format date (defaults  to  -1).    Fmt:
     Integer specifying how to format the date (defaults to 2).
Results:  DATESTR returns a string that is the formatted date.
Side effects: None.
Errors: None.
19 December 1978                                      String Utilities-DATE.SAI


DAYOFWEEK
Abstract:    DAYOFWEEK  takes  a  date  and returns the day of the week that it
corresponds to.
internal simple integer procedure DAYOFWEEK(integer M,D,Y);
Parameters:  M: Integer specifying the month.  D: Integer specifying  the  day.
     Y: Integer specifying the year.
Results:   DAYOFWEEK returns an integer in the range 0 to 6 that represents the
day of the week (0 is Sunday).
Side effects: None.
Errors: None.
19 December 1978                                      String Utilities-DATE.SAI


DAYTIME
Abstract:  DayTime returns the current date and time.
internal simple string procedure DayTime;
Parameters: None.
Results:    Daytime  passes back the current date and time as a string with the
format "dd-mmm-yy hh:mm"
Side effects: None.
Errors: None.
19 December 1978                                      String Utilities-DATE.SAI


FDATE
Abstract:  FDATE returns the date from a file block.
internal simple string procedure FDATE(safe integer array BLK;
 integer Fmt(2));
Parameters:    BLK:  Integer  array  that  is  the  file  block.   Fmt: Integer
     specifying how to format the date (defaults to 2).
Results:  FDATE returns a string that is the date from the file block.
Side effects: None.
Errors: None.
19 December 1978                                      String Utilities-DATE.SAI


FTIME
Abstract:  FTIME returns the time from a file block.
internal simple string procedure FTIME(safe integer array BLK;
 integer Fmt(1));
Parameters:    BLK:  Integer  array  that  is  the  file  block.   Fmt: Integer
     specifying how to format the time (defaults to 1).
Results:  FTIME returns a string that is the time from the file block.
Side effects: None.
Errors: None.
19 December 1978                                      String Utilities-DATE.SAI


TIMESTR
Abstract:    TIMESTR  returns  a  time  in string form.  The default time is -1
meaning current.  The time value may be in jiffies or  milliseconds.    To  use
milliseconds, negate the format parameter.  The output formats are:
                0       17:35:21        12:00:00        00:00:00
                1       17:35           12:00           00:00
                2       5:35 PM         12:00 N         12:00 M
                3       1735 EST        1200 EDT        0000 EDT
                        EDT or EST depends on value for today
                4       1735-EST        1200-EDT        0000-EDT
internal simple string procedure TIMESTR(integer VAL(-1),Fmt(1));
Parameters:    Val:  Integer  that  is  DEC format time (defaults to -1).  Fmt:
     Integer specifying how to format the time (defaults to 1).
Results:  Returns a string that is the formatted time.
Side effects: None.
Errors: None.
19 December 1978                                    String Utilities-STRFIL.SAI

STRFIL.SAI
  These procedures perform specialized string functions.
19 December 1978                                    String Utilities-STRFIL.SAI


CVUP
Abstract:  CVUp is used to force all alphabetics in a string to upper case.
internal simple string procedure CVUp(string S);
Parameters:  S: String
Results:    CVUp  returns  S  with  every  occurrence of a lower case character
replaced by upper case.
Side effects: None.
Errors: None.
19 December 1978                                    String Utilities-STRFIL.SAI


INDEX1
Abstract:    Returns the location of the first occurance of character C in S, 0
if none.
internal INTEGER SIMPLE PROCEDURE INDEX1(STRING S; INTEGER C);
Parameters:  S: String in which to try to find character  C. C: Integer  (ASCII
     code of character) to find in S.
Results:  Returns the location of the first occurance of character C in S, 0 if
none.
Side effects: None.
Errors: None.
19 December 1978                                    String Utilities-STRFIL.SAI


INDEX2
Abstract:   Returns the location of the first occurance of the string B in A, 0
if none.  If B is null string, then it is defined to match at 1.
internal INTEGER SIMPLE PROCEDURE INDEX2(STRING A,B);
Parameters:  A: String in which to look for B. B: String which is substring  to
     find in A.
Results:    Returns the location of the first occurance of the string B in A, 0
if none.  If B is null string, then it is defined to match at 1.
Side effects: None.
Errors: None.
19 December 1978                                    String Utilities-STRFIL.SAI


INITIAL
Abstract:  Returns TRUE iff B is an initial string of A.
internal BOOLEAN SIMPLE PROCEDURE INITIAL(STRING A,B);
Parameters:    A: String B: String that will be tested to see if it is a prefix
     of A.
Results:  Returns TRUE iff B is an initial string of A.
Side effects: None.
Errors: None.
19 December 1978                                    String Utilities-STRFIL.SAI


LESTR
Abstract:  Returns TRUE iff ST1 is lexically less than ST2;
internal BOOLEAN SIMPLE PROCEDURE LESTR(STRING ST1,ST2);
Parameters:  ST1: String ST2: String
Results:  Returns TRUE iff ST1 is lexically less than ST2;
Side effects: None.
Errors: None.
19 December 1978                                    String Utilities-STRFIL.SAI


ONECHAR
Abstract:  Returns the Bth character of A, 0 if B > LENGTH(A).
internal INTEGER SIMPLE PROCEDURE ONECHAR(STRING A;INTEGER B);
Parameters:   A: String from which Bth character will be extracted.  B: Integer
     defining position of character to be returned.
Results:  Returns the Bth character of A, 0 if B > LENGTH(A).
Side effects: None.
Errors: None.
19 December 1978                                    String Utilities-STRFIL.SAI


STABLOOK
Abstract:  StabLook does unique command lookup with default case conversion.
internal simple integer procedure StabLook(string Command;
 string Array Table; boolean PrintMsg(True);
 boolean CaseFold(True); integer LineWidth(-1));
Parameters:    Command : String that is being looked for.  Table : String array
     of all possible commands.  PrintMsg : Boolean that  indicates  whether  or
     not  to  print  messages  to the user in case of an error.  Default (true)
     means give messages.  CaseFold : Boolean that specifies whether  automatic
     case  folding  should  be  done while looking for Command.  Default (true)
     means fold.  LineWidth: Integer that is the width of  the  terminal,  used
     when listing Table in multiple columns.  Default (-1) implies use a single
     column.
Results:    StabLook  returns  the index into Table at which a unique match for
Command is found, if there is such an index  and  Command  is  not  null.    If
Command  is  the null string, it returns the lowerbound of Table (call it LofT)
minus 2.  If the match was ambiguous, it returns LofT - 3.   If  there  was  no
match at all, it returns LofT - 1.
Side effects: None.
Errors:  The multiple column output is not yet implemented.
19 December 1978                                    String Utilities-STRFIL.SAI


UPEQU
Abstract:    UpEqu returns true iff the strings A and B are identical, ignoring
case differences.
internal simple boolean procedure UpEqu(string A,B);
Parameters:  A: String B: String
Results:  UpEqu returns true iff the strings A and B  are  identical,  ignoring
case   differences.     Note  that  only  alphabetics  are  case  folded,  thus
UpEqu("[","{") is false.
Side effects: None.
Errors: None.
19 December 1978                                     String Utilities-UDATE.SAI

UDATE.SAI
  SAIL procedures for converting between DEC and universal date/time formats.
19 December 1978                                     String Utilities-UDATE.SAI


CVDATIME
Abstract:    CvDATIME  takes  a  universal  date-time  and  returns through its
reference parameters the corresponding DEC-format date and time.
internal simple procedure CvDATIME(reference integer Dat,Tim;
 integer Val(-1));
Parameters:  Dat: Reference  integer  used  to  return  the  DEC  date.    Tim:
     Reference   integer  used  to  return  the  corresponding  time-of-day  in
     milliseconds.  Val: Integer that is date  in  DEC  format.    If  -1  (the
     default), it will be initialized to the current date/time by CvDATIME.
Results: None.
Side effects:  See PARAMETERS.
Errors: None.
19 December 1978                                     String Utilities-UDATE.SAI


CVUDT
Abstract:  CvUDT takes a DEC date and a time-of-day in milliseconds and returns
the corresponding universal date/time word.
internal simple integer procedure CvUDT(integer Dat,Tim);
Parameters:    Dat: DEC date to be used.  Tim: Time of day (in milliseconds) to
     be used.
Results:  The corresponding universal date/time word.
Side effects: None.
Errors: None.
19 December 1978                                     String Utilities-UDATE.SAI

TTYHandler
19 December 1978                                          TTYHandler-CURSOR.SAI

CURSOR.SAI
  CURSOR  provides a package of routines to do cursor control on Beehives, ADMs
and Infotons.  Warning:  Not all functions are implemented for ADMs.
19 December 1978                                          TTYHandler-CURSOR.SAI


CLEARSCREEN
Abstract:  ClearScreen will clear the terminal's screen.
internal simple procedure ClearScreen;
Parameters: None.
Results: None.
Side  effects:    The  global  variables  CurX and CurY which keep track of the
cursor position are set to 0.
Errors: None.
19 December 1978                                          TTYHandler-CURSOR.SAI


HOMECURSOR
Abstract:  HomeCursor will send the terminal's cursor to the home position.
internal simple procedure HomeCursor;
Parameters: None.
Results: None.
Side effects:  The global variables CurX and CurY are set to 0.
Errors: None.
19 December 1978                                          TTYHandler-CURSOR.SAI


KILLLINE
Abstract:  KillLine will kill the line that the cursor is currently on.
internal simple procedure KillLine;
Parameters: None.
Results: None.
Side effects: None.
Errors: None.
19 December 1978                                          TTYHandler-CURSOR.SAI


MOVECURSOR
Abstract:    MoveCursor  moves  the  cursor  in  direction Direction a distance
specified by HowFar.
internal simple procedure MoveCursor(integer Direction,HowFar);
Parameters:  Direction: Integer specifying the  direction  to  move.    HowFar:
     Integer specifying how many spaces to move.
Results: None.
Side effects:  CurX and CurY are updated to reflect the cursor movement.
Errors: None.
19 December 1978                                          TTYHandler-CURSOR.SAI


SETCURSOR
Abstract:    SetCursor  sets  the termina's cursor to the specified (NewX,NewY)
coordinates (home being (0,0)).
internal simple procedure SetCursor(integer NewX,NewY);
Parameters:  NewX: Integer specifying new X-axis  (horizontal  axis)  position.
     NewY: Integer specifying new Y-axis (vertical axis) position.
Results: None.
Side effects:  (CurX,CurY) := (NewX,NewY).
Errors: None.
19 December 1978                                          TTYHandler-TTYSER.SAI

TTYSER.SAI
  SAIL  procedures  to  do  simple terminal handling including TRMOP.  UUOs and
turning echoing on and off.
19 December 1978                                          TTYHandler-TTYSER.SAI


ECHOFF
Abstract:  ECHOFF turns off echoing for the job's controlling terminal.
internal SIMPLE PROCEDURE ECHOFF;
Parameters: None.
Results: None.
Side effects: None.
Errors: None.
19 December 1978                                          TTYHandler-TTYSER.SAI


ECHON
Abstract:  ECHON turns on echoing for the job's controlling terminal.
internal SIMPLE PROCEDURE ECHON;
Parameters: None.
Results: None.
Side effects: None.
Errors: None.
19 December 1978                                          TTYHandler-TTYSER.SAI


TTY!READ
Abstract:  TTY!READ is used to read information associated with a terminal.  It
provides the facilities of the TRMOP. UUO to the SAIL user.
internal INTEGER SIMPLE PROCEDURE TTY!READ(INTEGER CODE,TERM);
Parameters:    CODE:  Integer  which specifies the desired TRMOP. UUO function.
     TERM: Integer which is the universal I/O index for the terminal.
Results:  TTY!READ returns -1 if the TRMOP. UUO failed.  Otherwise  it  returns
the value returned by the UUO.
Side effects: None.
Errors:  See above.
19 December 1978                                          TTYHandler-TTYSER.SAI


TTY!SET
Abstract:    TTY!SET is used to set information associated with a terminal.  It
provides the facilities of the TRMOP. UUO to the SAIL user.
internal BOOLEAN SIMPLE PROCEDURE TTY!SET(INTEGER CODE,ARG,TERM);
Parameters:  CODE: Integer which specifies the  desired  TRMOP.  UUO  function.
     ARG:    Integer  value  to set the terminal information to.  TERM: Integer
     which is the universal I/O index for the terminal.
Results:  TTY!SET returns FALSE if the TRMOP. UUO failed, TRUE otherwise.
Side effects:  !SKIP! is set to 0 if TTY!SET returns FALSE, -1 otherwise.
Errors:  See above.
19 December 1978                                          TTYHandler-TTYSER.SAI


TTYREAD
Abstract:    TTYREAD  is  used to read information associated with the terminal
currently controlling the user's job.
internal INTEGER SIMPLE PROCEDURE TTYREAD(INTEGER CODE);
Parameters:  CODE: Integer which specifies the  desired  TRMOP.  UUO  function.
     The  global  variable  TERM!NUM  is  an  implicit  parameter  which is the
     universal I/O index of the terminal currently controlling the user's job.
Results:  TTYREAD returns -1 if the TRMOP. UUO failed.   Otherwise  it  returns
the value returned by the UUO.
Side effects: None.
Errors:  See above.
19 December 1978                                          TTYHandler-TTYSER.SAI


TTYSET
Abstract:    TTYSET  is  used  to  set information associated with the terminal
currently controlling the user's job.
internal BOOLEAN SIMPLE PROCEDURE TTYSET(INTEGER CODE,ARG);
Parameters:  CODE: Integer which specifies the  desired  TRMOP.  UUO  function.
     ARG:    Integer  value  to  set  the  terminal information to.  The global
     variable TERM!NUM is an implicit parameter  which  is  the  universal  I/O
     index of the terminal currently controlling the user's job.
Results:  TTYSET returns FALSE if the TRMOP. UUO failed, TRUE otherwise.
Side effects:  !SKIP! is set to 0 if TTYSET returns FALSE, -1 otherwise.
Errors:  See above.
19 December 1978                                          TTYHandler-TTYSER.SAI


TTYTERMNO
Abstract:    TTYTERMNO  is  used to obtain the number of the terminal currently
controlling a specified job.
internal SIMPLE PROCEDURE TTYTERMNO;
Parameters:  The global variable JOB!NUM is an implicit parameter which is  the
     job number of the specified job.
Results: None.
Side  effects:   The universal I/O index for the terminal will be placed in the
global variable TERM!NUM.
Errors:  If the UUO fails TERM!NUM will be set to zero.
19 December 1978                                                          Index

Index

          BLIT   Memory Management-CORSER.SAI
          BUFPUT   Memory Management-CORSER.SAI
          BUFSIZ   Memory Management-CORSER.SAI
          BUFVAL   Memory Management-CORSER.SAI

          CCLENTRY   FileUtilities-CCL.SAI
          CCLEXIT   FileUtilities-CCL.SAI
          CHANPPN   FileUtilities-CHAN.SAI
          CHANSTR   FileUtilities-CHAN.SAI
          CLEARSCREEN   TTYHandler-CURSOR.SAI
          COREHANDLE   Memory Management-CORSER.SAI
          CVCMUDEC   FileUtilities-CMUPPN.SAI
          CVDATIME   String Utilities-UDATE.SAI
          CVDECCMU   FileUtilities-CMUPPN.SAI
          CVUDT   String Utilities-UDATE.SAI
          CVUP   String Utilities-STRFIL.SAI

          DATE!DECODE   String Utilities-DATE.SAI
          DATESTR   String Utilities-DATE.SAI
          DAYOFWEEK   String Utilities-DATE.SAI
          DAYTIME   String Utilities-DATE.SAI
          DIRECT   FileUtilities-WILD.SAI
          DISK!PPN   FileUtilities-DSKPPN.SAI

          EASYREAD   FileUtilities-EFILE.SAI
          EASYWRITE   FileUtilities-EFILE.SAI
          ECHOFF   TTYHandler-TTYSER.SAI
          ECHON   TTYHandler-TTYSER.SAI

          FDATE   String Utilities-DATE.SAI
          FILEDEFAULT   FileUtilities-FILDEF.SAI
          FILERR   FileUtilities-FILE2.SAI
          FTIME   String Utilities-DATE.SAI

          GETCORE   Memory Management-CORSER.SAI
          GETDEV   FileUtilities-FILE2.SAI
          GETSWITCHINI   FileUtilities-SWINI.SAI
          GETZCORE   Memory Management-CORSER.SAI
          GRIPE   FileUtilities-GRIPE.SAI

          HOMECURSOR   TTYHandler-CURSOR.SAI
          HOMEFILENAME   FileUtilities-HOMFIL.SAI
19 December 1978                                                          Index


          INDEX1   String Utilities-STRFIL.SAI
          INDEX2   String Utilities-STRFIL.SAI
          INITIAL   String Utilities-STRFIL.SAI

          JOBNUM   FileUtilities-TMPFIL.SAI

          KILLLINE   TTYHandler-CURSOR.SAI

          LESTR   String Utilities-STRFIL.SAI

          MOVECURSOR   TTYHandler-CURSOR.SAI
          MUSTREAD   FileUtilities-FILE.SAI
          MUSTWRITE   FileUtilities-FILE.SAI

          NEXTWFILE   FileUtilities-WILDGF.SAI

          ONECHAR   String Utilities-STRFIL.SAI

          PUTFILETOGETHER   FileUtilities-FILDEF.SAI

          QNETEND   FileUtilities-QNET.SAI
          QNETINIT   FileUtilities-QNET.SAI
          QNETOUT   FileUtilities-QNET.SAI

          RELCORE   Memory Management-CORSER.SAI
          RTMPCOR   FileUtilities-TMPFIL.SAI
          RTMPFILE   FileUtilities-TMPFIL.SAI
          RUNPROG   FileUtilities-TMPFIL.SAI

          SETCURSOR   TTYHandler-CURSOR.SAI
          SMEAR   Memory Management-CORSER.SAI
          STABLOOK   String Utilities-STRFIL.SAI

          TEARFILEAPART   FileUtilities-FILDEF.SAI
          TIMESTR   String Utilities-DATE.SAI
          TTY!READ   TTYHandler-TTYSER.SAI
          TTY!SET   TTYHandler-TTYSER.SAI
          TTYREAD   TTYHandler-TTYSER.SAI
          TTYSET   TTYHandler-TTYSER.SAI
          TTYTERMNO   TTYHandler-TTYSER.SAI

          UPEQU   String Utilities-STRFIL.SAI

19 December 1978                                                          Index

          WANTREAD   FileUtilities-FILE.SAI
          WANTWRITE   FileUtilities-FILE.SAI
          WTMPCOR   FileUtilities-TMPFIL.SAI
          WTMPFILE   FileUtilities-TMPFIL.SAI

          XENTER   FileUtilities-XLOOK.SAI
          XLOOKUP   FileUtilities-XLOOK.SAI
          XRENAME   FileUtilities-XLOOK.SAI
19 December 1978                                                          Index

                               Table of Contents

SAIL User Routines Library                                                    1

Module Abstracts                                                              2

FileUtilities Abstract                                                        3
Memory Management Abstract                                                    4
String Utilities Abstract                                                     5
TTYHandler Abstract                                                           6

FileUtilities                                                                 7

CCL.SAI                                                                       8
     CCLENTRY                                                                 9
     CCLEXIT                                                                 10
CHAN.SAI                                                                     11
     CHANPPN                                                                 12
     CHANSTR                                                                 13
CMUPPN.SAI                                                                   14
     CVCMUDEC                                                                15
     CVDECCMU                                                                16
DSKPPN.SAI                                                                   17
     DISK!PPN                                                                18
EFILE.SAI                                                                    19
     EASYREAD                                                                20
     EASYWRITE                                                               21
FILDEF.SAI                                                                   22
     FILEDEFAULT                                                             23
     PUTFILETOGETHER                                                         24
     TEARFILEAPART                                                           25
FILE.SAI                                                                     26
     MUSTREAD                                                                27
     MUSTWRITE                                                               28
     WANTREAD                                                                29
     WANTWRITE                                                               30
FILE2.SAI                                                                    31
     FILERR                                                                  32
     GETDEV                                                                  33
GRIPE.SAI                                                                    34
     GRIPE                                                                   35
HOMFIL.SAI                                                                   36
     HOMEFILENAME                                                            37
QNET.SAI                                                                     38
19 December 1978                                                          Index

     QNETEND                                                                 39
     QNETINIT                                                                40
     QNETOUT                                                                 41
SWINI.SAI                                                                    42
     GETSWITCHINI                                                            43
TMPFIL.SAI                                                                   44
     JOBNUM                                                                  45
     RTMPCOR                                                                 46
     RTMPFILE                                                                47
     RUNPROG                                                                 48
     WTMPCOR                                                                 49
     WTMPFILE                                                                50
WILD.SAI                                                                     51
     DIRECT                                                                  52
WILDGF.SAI                                                                   53
     NEXTWFILE                                                               54
XLOOK.SAI                                                                    55
     XENTER                                                                  56
     XLOOKUP                                                                 57
     XRENAME                                                                 58

Memory Management                                                            59

CORSER.SAI                                                                   60
     BLIT                                                                    61
     BUFPUT                                                                  62
     BUFSIZ                                                                  63
     BUFVAL                                                                  64
     COREHANDLE                                                              65
     GETCORE                                                                 66
     GETZCORE                                                                67
     RELCORE                                                                 68
     SMEAR                                                                   69

String Utilities                                                             70

DATE.SAI                                                                     71
     DATE!DECODE                                                             72
     DATESTR                                                                 73
     DAYOFWEEK                                                               74
     DAYTIME                                                                 75
     FDATE                                                                   76
     FTIME                                                                   77
     TIMESTR                                                                 78
19 December 1978                                                          Index

STRFIL.SAI                                                                   79
     CVUP                                                                    80
     INDEX1                                                                  81
     INDEX2                                                                  82
     INITIAL                                                                 83
     LESTR                                                                   84
     ONECHAR                                                                 85
     STABLOOK                                                                86
     UPEQU                                                                   87
UDATE.SAI                                                                    88
     CVDATIME                                                                89
     CVUDT                                                                   90

TTYHandler                                                                   91

CURSOR.SAI                                                                   92
     CLEARSCREEN                                                             93
     HOMECURSOR                                                              94
     KILLLINE                                                                95
     MOVECURSOR                                                              96
     SETCURSOR                                                               97
TTYSER.SAI                                                                   98
     ECHOFF                                                                  99
     ECHON                                                                  100
     TTY!READ                                                               101
     TTY!SET                                                                102
     TTYREAD                                                                103
     TTYSET                                                                 104
     TTYTERMNO                                                              105

Index                                                                       106
 
z@