DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1
TPARAM	23-DEC-86 12:29	

     1				;PROGRAM CAPABILITIES
     2			000100	ACRCAP==:100                 ;I MAY RECEIVE RANK COMPRESSED DATA RECORD
     3			000040	KATCAP==:40                  ;I MAY RECEIVE KATAKANA DATA
     4			000020	BINCAP==:20                  ;I MAY RECEIVE BINARY DATA
     5			000010	UPDCAP==:10                  ;I MAY RECEIVE BINARY UPDATE MODE DATA
     6				;ASSEMBLY AND TEST SWITCHES
     7			000001	TESTNG== 1                   ;PRINT LOGIN MESSAGES FROM SLAVE HOST
     8				;PROTOCOL VERSION
     9			000001	VERNUM==:1
    10				;MESSAGE TYPES
    11			000100	MBOT== 100      ;LOWER BOUND FOR MESSAGE TYPES
    12			000101	DNRCOD== 101 ;REQUEST SLAVE TO BE DONOR.  NO RESPONSE.
    13			000102	RCVCOD== 102 ;REQUEST SLAVE TO BE RECEIVER.  NO RESPONSE.
    14			000103	FLKCOD== 103 ;ASCII FILE NAME FOLLOWS AFTER 1 BYTE GIVING COUNT.
    15				;              (RETURNS FAILCD IF FILE NOT FOUND OR FLKSCD IF FILE FOUND.
    16				;              (IF THE SLAVE & CONTROLLER ARE BOTH 940 THEN THE USUAL
    17				;              (SECURITY RULES ARE RELAXEED AND THE LOOKUP SUCCEEDS
    18				;              (IF THE FILE IS PRESENT, RETURNING 9 BYTES CONTAINING
    19				;              (INFORMATION FROM THE FIRST 3 WORDS OF THE FD ENTRY.
    20			000104	SUCCOD== 104 ;OPTION ACCEPTED
    21			000105	ULKCOD== 105 ;ASCII USERNAME FOLLOWS AFTER 1 BYTE GIVING COUNT.
    22				;              (LOOKS UP THE USER NAME IN THE LUD AND RETURNS A ULKSCD IF
    23				;              (FOUND AND A ULKRCD IF NOT FOUND.  IF THE SLAVE & CONTROLLER
    24				;              (ARE BOTH 940 THEN A SUPER GFD IS PERFORMED TO REACH THE
    25				;              (FILE DIRECTORY OF THE SPECIFIED USER, AND GAN, FDPT, AND UUN
    26				;              (FROM THE LUD ENTRY ARE RETURNED AS 9 BYTES.
    27			000106	FLKFCD== 106 ;FILE NOT FOUND--NOT CONSIDERED AN ERROR
    28			000107	ABTCOD==: 107 ;STOP WHAT YOU ARE DOING, ABORT
    29			000110	BCMCOD== 110 ;START DATA RECORD, BINARY COMPRESSION METHOD
    30			000111	ACMCOD== 111 ;START DATA RECORD, ASCII COMPRESSION METHOD
    31			000112	ACKCOD== 112 ;ACKNOWLEDGEE RECORD CHECKSUM AND BYTECOUNT MATCH
    32			000113	NAKCOD== 113 ;CHECKSUM AND/OR BYTECOUNT DO NOT MATCH
    33			000114	FINCD1== 114 ;DONOR HAS SENT ALL RECORDS IN FILE AND IS HAPPY.  FOLLOWED
    34				;              (BY 1 BYTE COUNT OF BYTES FOLLOWING  TOTAL FILE BYTES SENT
    35				;              (BY DONOR.  USED BY UPDATE MODE CLOSE TO TRUNCATE FILE TO
    36				;              (THE CORRECT DATA LENGTH.  WHEN DONOR AND RECEIVER
    37				;              (ARE BOTH 940 THIS WILL BE 3 BYTES CONTAINING CPTOP.
    38			000115	FINCD2== 115 ;RECEIVER HAS WRITTEN AND CLOSED FILE SUCCESSFULLY
    39			000116	FPFCOD== 116 ;FILE PROTECTION FAILURE
    40			000117	OPFCOD== 117 ;OPEN FAILURE
    41			000120	BZCOD==  120 ;BUFFER ZAPPED
    42				; OPTION TYPES 121-130 RESPOND 104 OR 133 IF NOT IMPLEMENTED
    43			000121	CPACOD== 121 ;SPECIFY COMPRESSION.  FOLLOWED BY 1 BYTE
    44				;              (0= NONE
    45				;              (1= BINARY
    46				;              (2= ASCII
    47				;              (3= ASCII AUTO
    48			000122	ONLCOD== 122 ;ON LOWER CASE.  FOLLOWED BY A BYTE OF ALL 1'S TO PERMIT
    49				;              (LOWER CASE, ALL 0'S TO CONVERT LOWER TO UPPER CASE
    50				;              (DEFAULT IS TO PERMIT LOWER CASE
    51			000124	TRUCOD== 124 ;FOLLOWED BY 1 BYTE INDICATING COLUMN TO BEGIN
    52				;              (TRUNCATION.  IF 0 THEN TURN OFF TRUNCATION.
    53			000125	TRICOD== 125 ;REMOVE TRAILING BLANKS.  FOLLOWED BY A BYTE OF ALL 1'S
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-2
TPARAM	23-DEC-86 12:29	

    54				;              (TO SUPPRESS TRAILING BLANKS OR A BYTE OF ALL 0'S TO KEEP
    55				;              (TRAILING BLANKS  (DEFAULT)
    56			000127	VARCOD== 127 ;PRODUCE VARIABLE LENGTH RECORDS (DEFAULT)
    57				;              (FOLLOWED BY 4 BYTES GIVING MAXIMUM RECORD SIZE
    58			000130	FIXCOD== 130 ;PAD WITH BLANKS TO MAKE FIXED LENGTH RECORDS.
    59				;              (FOLLOWED BY 4 BYES OF RECORD LENGTH.
    60			000131	LOGCOD==:131 ;TELL SLAVE TO LOG OFF
    61			000132	CHKCOD== 132 ;START DATA CHECKSUM RECORD
    62			000133	NICOD==  133 ;REQUESTED OPERATION IS NOT IMPLEMENTED
    63			000134	EORCOD== 134 ;END OF TRANSMISSION RECORD
    64			000135	EOTCOD== 135 ;TRANSMISSION RECORD IS LAST IN FILE
    65			000136	QUICOD==:136 ;ABORT THE CURRENT OPERATION, QUIT SLAVE, AND RETURN
    66				;              (TO OPERATING SYSTEM COMMAND LEVEL.
    67			000137	OPNCOD== 137 ;REQUEST SLAVE OPEN FILE FOR DATA TRANSFER (DIRECTION
    68				;              (DETERMINED BY PREVIOUS 101 OR 102 CODE.  FOLLOWED BY 1 BYTE
    69				;              (TRANSMISSION TYPE, AND POSSIBLY, OTHER BYTES
    70				;              (TYPE = 1 ASCII MODE TRANSFER.  NO BYTES FOLLOW
    71				;              (TYPE = 2 EBCDIC MODE TRANSFER.  NO BYTES FOLLOW
    72				;              (TYPE = 3 BINARY MODE TRANSFER.  THE RECEIVE FILE, IF
    73				;              (PRESENT, IS TO BE ERASED.  FOLLOWED BY 1 BYTE OF BINARY
    74				;              (PARAMETERS.
    75				;              (TYPE = 4 BINARY UPDATE MODE TRANSFER.  DONOR AND RECEIVER
    76				;              (WILL EXCHANGE CHECK RECORDS.  FOLLOWED BY 1 BYTE OF BINARY
    77				;              (PARAMETERS AND 2 BYTES OF UPDATE MODE BLOCKSIZE.
    78				;              (TYPE = 5 KATAKANA MODE TRANSFER.  NO BYTES FOLLOW
    79				;              (TYPE = 6 IMAGE MODE TRANSFER.  NO BYTES FOLLOW
    80				;              (POSSIBLE RESPONSES ARE  133 (UPDATE MODE NOT IMPLEMENTED
    81				;              (OR PARAMETERS NOT ACCEPTABLE), 104 (FILE OPENED), 116
    82				;              (FILE PROTECTION FAILURE), OR 117 (FILE OPEN FAILURE).
    83			000140	FENQCD== 140 ;REQUEST SLAVE DONOR TO SEND FILE ATTRIBUTES.  RETURNS 104
    84				;              (PLUS 1 BYTE COUNT OF BYTES FOLLOWING.
    85			000141	FATTCD== 141 ;PREPARE SLAVE RECEIVER TO OPEN FILE.  FOLLOWED BY 1 BYTE
    86				;              (COUNT OF BYTES FOLLOWING.  WHEN DONOR AND RECEIVER ARE BOTH
    87				;              (940 SEND 9 BYTES  3 BYTES FFDPT, 3 BYTES FDWD0, AND
    88				;              (3 BYTES FDWD2.  NO RESPONSE IS GIVEN.
    89			000142	INSCOD== 142 ;SET INSTALLER LICENSE.  FOLLOWED BY 6 BYTE CIPHER.
    90			000143	WHYCOD==: 143 ;SOLICIT EXPLANATION OF LATEST ERROR
    91			000144	RSPCOD==: 144 ;CODE FOLLOWED BY ASCII STRING TO BE PRINTED AT TERMINAL
    92				;              (STRING TERMINATED BY A NUL BYTE OR ANY CONTROL CODE.
    93			000145	BADCOD== 145 ;UNEXPECTED CONTROL CODE RECEIVED
    94			000146	ERRCOD== 146 ;FILE SYSTEM ERROR WRITING OR READING FILE
    95			000147	PERCOD== 147 ;FILE SYSTEM ERROR POSITIONING FILE
    96			000150	ERASCD== 150 ;FILE SYSTEM ERROR ERASING RECEIVE FILE
    97			000152	TRPCOD== 152 ;PROGRAM TRAP
    98			000153	FLKRCD== 153 ;LOOKUP FAILURE--PROBABLY SYNTAX
    99			000154	ULKFCD== 154 ;GFD FAILURE
   100			000160	ULKSCD== 160 ;GFD SUCCESS
   101			000161	FLKSCD== 161 ;FILE LOOKUP SUCCESS
   102			000177	MTOP== 177      ;UPPER BOUND FOR MESSAGE TYPES
   103				;TRANSMISSION PARAMETERS
   104			050000	MAXRS== ^D512*^D40             ;MAXIMUM RECORD SIZE--40 PAGES
   105			010000	MINRS== ^D512*^D8            ;MININUM RECORD SIZE--8 PAGES
   106			014000	TSTRS== ^D6144                 ;SAMPLE SIZE FOR STATISTICS (CONSTANT)
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-3
TPARAM	23-DEC-86 12:29	

   107				;                               WILL BE 2 PAGES FOR BF=6
   108				;BINARY PARAMETERS FOR ASCII, KATAKANA, AND IMAGE MODE
   109			000407	KMODE==:  407                   ;1000+0011+1=BYTESIZE=9,BLOCKING=4,FILL=LEFT
   110			001000	SMODE==: 1000                   ;000+0000+0  INDICATES SERIAL MODE
   111			000345	IXMODE==: 345            ;111+0010+1==BYTESIZE=8,BLOCKING=3,FILL=LEFT
   112			000351	XMODE==: 351            ;111+0100+1==BYTESIZE=8,BLOCKING=5,FILL=LEFT
   113			000311	AMODE==: 311            ;110+0100+1==BYTESIZE=7,BLOCKING=5,FILL=LEFT
   114				;ASCII CHARACTER VALUES
   115			000010	TABSIZ== 10
   116			000003	ETX==: 3        ;CONTROL-C
   117			000011	HT== 11
   118			000012	LF== 12
   119			000015	CR== 15
   120			000030	CAN==: 30
   121			000031	EM==: 31
   122			000033	ESC==: 33
   123			000036	RS== 36
   124			000037	US==: 37
   125			000040	BL== 40
   126			000050	LPAREN== 50
   127			000051	RPAREN== 51
   128			000072	COLON== 72
   129				;COMPRESSION OPTIONS
   130			000001	AUTO==:1
   131			000002	ASCII==:2
   132			000400	NONE==: 400  ;NO OPTIONS, SET TO KEEP COPT NON-ZERO
   133				;REPEATED CHAR COMPRESSION PARAMETERS
   134			000200	BIASP== 200                ;BIAS FOR PREFERRED CHARACTER COMPRESSION CODE
   135			000202	MAXP== ^D130                 ;MAXIMUM COUNT FOR PREFERRED CHARACTER
   136			000003	MINP== 3                   ;MININUM COUNT FOR PREFERRED CHARACTER
   137			000010	BIASC== 10                 ;BIAS FOR REPEATED CHARACTER COMPRESSION CODE
   138			000073	MAXC== ^D59                  ;MAXIMUM COUNT FOR REPEATED CHARACTER
   139			000004	MINC== 4                   ;MININUM COUNT FOR REPEATED CHARACTER
   140				;RANK COMPRESSION PARAMETERS
   141			000010	BIASPA== 10                  ;BIAS FOR PREFERRED BYTE COMPRESSION CODE
   142			000021	MAXPA== ^D17                  ;MAXIMUM COUNT FOR PREFERRED BYTE
   143			000002	MINPA== 2                   ;MININUM COUNT FOR PREFERRED BYTE
   144			000032	BIASA== 32                 ;BIAS FOR ALL TRANSLATING CHARACTERS
   145			000010	NM== ^D8                   ;MASTER CHARACTERS-- 32 THRU 41
   146			000007	LM== NM-1
   147			000025	NC== ^D21                  ;COMBINING CHARACTERS-- 32 THRU 56
   148			000024	LC== NC-1
   149			000076	NT== ^D62                    ;TRANSLATING CHARACTERS-- 32 THRU 127
   150			000075	LT== NT-1
   151				; CHECK BLOCK LAYOUT
   152			000000	FCK1== 0
   153			000400	FCK2== ^D256
   154			001000	FCK3== ^D512
   155				; DONOR AND RECEIVER FILENAME INDEXES
   156		777777	777777	FSIZE== -1
   157			000003	FEXT== 3
   158			000015	UNAME== 15
   159			000017	SYS== 17
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-4
TPARAM	23-DEC-86 12:29	

   160			000020	FNAME== 20
   161				; AUXCAL DEFINITIONS
   162			000000	IICHW== 0       ;INPUT IMAGE CHAR, WAIT
   163			000001	IICHS== 1       ;INPUT IMAGE CHAR, SKIP
   164			000003	OICH== 3        ;OUTPUT IMAGE CHAR
   165			000004	OICHI== 4       ;OUTPUT IMAGE CHAR IMMEDIATE
   166			000007	CLRBO==:7       ;CLEAR OUTPUT BUFFER
   167			000012	YELLOW==: 12     ;SEND YELLOW BALL
   168			000032	SDVIOS== 32     ;SET DEVIOS
   169			000034	IBIO== 34       ;INITIATE BLOCK I/O MODE
   170			000035	INBW== 35       ;INPUT A BLOCK (WAIT)
   171			000036	INBS== 36       ;INPUT A BLOCK (SKIP)
   172			000037	OB== 37         ;OUTPUT A BLOCK
   173			000040	TBI== 40        ;TERMINATE BLOCK INPUT
   174			000041	TBO== 41        ;TERMINATE BLOCK OUTPUT
   175			000042	LBIO== 42       ;LEAVE BLOCK I/O MODE
   176			000043	SLVPRT== 43     ;SLAVE COMMAND PORT
   177			000052	ASCSTG== 52     ;OUTPUT ASCII STRING
   178				; DEVIOS BITS
   179			000014	IOMOD==14       ;BINARY MODE
   180			020000	IODEND==20000   ;MASK FOR IODEND BIT (BIT 22)
   181			000200	NOECHO==200     ;NO ECHO BIT (AFFECTS COMMAND PORT)
   182				; UUO DEFINITIONS
   183				IFDEF UUOFLG<UUOTAB: BLOCK 0>
   184				DEFINE  OPD     (A,B) <U==U+1
   185				OPDEF A [U*1000000000]
   186				IFDEF UUOFLG<JRST B>>
   187			000000	U==0
   188			000001	 OPD OUTSTR,OSTRUU^U==U+1
   189			000002	 OPD INCHWL,INCHUU^U==U+1
   190			000003	 OPD OUTCHR,OCHRUU^U==U+1
   191			000004	 OPD OUTCHI,OCHIUU^U==U+1
   192			000005	 OPD CLRBFO,CLROUU^U==U+1
   193			000006	 OPD CLRBFI,CLRIUU^U==U+1
   194				;***  WARNING *** FLAGS IN MASTER ARE NOT PRESERVED FROM ONE FILE TO NEXT
   195				;***    SEE "SAVREG" IN TELECO.MAC WHICH ZEROES ALL ACCUMULATORS
   196				;FLAGS IN LH OF ACCUMULATOR F
   197			000001	LUDFLG== 1      ;LUD HAS BEEN OPENED IF 1
   198				;FLAGS IN RH OF ACCUMULATOR F
   199			000001	SORTFG== 1     ;SORT HAS BEEN PERFORMED IF 1
   200			000002	HSW== 2        ;RECORD HEADER HAS BEEN CREATED IF 1
   201			000004	LCO== 4        ;PERMIT LOWER CASE OUTPUT IF 1
   202			000010	LEFTFG== 10    ;LEFT FILL IF 1
   203			000020	SERFLG== 20    ;SERIAL MODE IF 1
   204			000040	UPDMOD== 40    ;READ CONTENTS FROM FILE BEFORE WRITING IF 1
   205			000100	IGNEOF== 100   ;IGNORE END OF BLOCK IF 1
   206			000200	CHGFLG== 200   ;PAGE CHANGED BY MASKING OPERATION IF 1
   207			000400	MASKFG== 400   ;PAGE MUST BE MASKED PRIOR TO USE
   208			001000	DEFFLG== 1000   ;IINIT TO CALL ROUTINE "DEFER" WHEN BLOCK INPUT DONE
   209			002000	MSGSW==  2000   ;ONCE-ONLY FLAG FOR COPYST
   210			004000	BI==     4000   ;INDICATES BLOCK INPUT STARTED IF 1
   211			010000	TI==    10000   ;INDICATES BLOCK INPUT TERMINATED IF 1
   212			020000	SWB==   20000   ;ONCE-ONLY SWITCH FOR SWBAC
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1
FLAGS	23-DEC-86 12:29	

   213			040000	FILFND==  40000  ;FILE FOUND BY SLAVE IF 1.
   214			100000	EDIT10== 100000 ;EDIT-10 FILE BEING TRANSMITTED IN ASCII MODE IF 1
   215			200000	ILLCHR== 200000 ;DISALLOWED CHAR IN FILENAME (SEE GET10)
   216				; GENERAL-PURPOSE REGISTERS  (TOUCHED BY EVERYONE)
   217			000000	R0=0
   218			000001	R1=1
   219			000002	R2=2
   220				;REGISTERS TOUCHED ONLY BY A,ACTRANS,BCTRANS
   221				;R3-R5 USED IN CHECKSUMMING FILE (BEFORE TRANSMISSION)
   222			000003	R3=3            ;HOLDING REGISTER FOR C.  PRESERVE IN CW AND W MACROS
   223			000004	R4=4
   224			000004	RC=4          ;HOLDING REGISTER.  PRESERVE IN CW AND W MACROS.
   225			000005	R5=5
   226			000005	PREFER=5        ;PREFERRED COMPRESSION CHAR.
   227			000006	RCC=6            ;REGISTER USED FOR REPEAT COUNT
   228				; SPECIAL PURPOSE REGISTERS
   229			000007	C=7             ;CHARACTER BEING READ(WRITTEN) FROM(TO) FILE OR BEING
   230				;               WRITTEN(READ) TO(FROM) OUTPUT(INPUT) BUFFER.
   231			000010	RANK=10         ;RANK OF FIRST(SECOND) CHAR OF A MASTER-COMBINING
   232				;               PAIR.  **MUST** FOLLOW C.
   233			000011	AS=11           ;STATE FOR ROUTINE A.
   234			000012	GS=12           ;STATE FOR ROUTINE GB.
   235			000013	GX=13           ;INDEX FOR ROUTINE GB.
   236			000014	PS=14           ;STATE FOR ROUTINE PB.
   237			000015	PX=15           ;INDEX FOR ROUTINE PB.
   238			000016	F=16            ;FLAGS
   239			000017	P=17            ;PUSHDOWN LIST POINTER
   240				;CHANNEL ASSIGNMENTS
   241			000001	FIL== 1
   242			000002	TRPDSK== 2
   243			000003	LUD== 3
   244				TITLE DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES
   245				;       INCLUDES CODE TO FORMAT ALL TRANSMISSION MODES
   246
   247				ENTRY IRF,ITF,SIZE,UPA,SPA,GB,GA,PB,PA,WRBLK,TRUNCATE
   248				; EXTERNAL ROUTINES
   249				EXTERN RINIT,SINIT,UIO,IOERR,IOERW,BGC,PEW,AC1,AAR1,ERASE
   250				; CELLS CONTAINING EXECUTABLE INSTRUCTIONS:
   251				EXTERN GA1X,PA1X,AAR1X,ACR1X,BCR1X
   252				; EXTERNAL STORAGE:
   253				EXTERN ST,BF,N,PMSK,BYTESIZ,BP,BP0,BLKNO,POS,BPARAM,TMODE
   254				EXTERN BPG,GWCNT,PWCNT,MBC,COUNTB,LRECL,TMP1,CCR
   255				EXTERN CPTOP1,CPTOP2,CPTOP3,CPTOP4,CPTOP5
   256				EXTERN ORBSIZ,RBSIZ,RBCNT,RBALC,RBEST,RBPRV
   257				; GET ASCII OR KATAKANA BYTE FROM FILE
   258				;       SECOND HALF OF ASCTAB IS REFERENCED ONLY IN KATAKANA MODE
   259				; GA1X SHOULD BE INITIALIZED TO "PUSHJ P,GB"
   260				; BPARAM SHOULD BE INITIALIZED TO 311 FOR ASCII OR 407 FOR KATAKANA.
   261				; POS SHOULD BE INITIALIZED TO ZERO.
   262				; GL94BX CODE SHOULD TRAP TO ILL9 FOR ILLEGAL 9-BIT CHARS.
   263
   264				; SKIP RETURN FOR END OF BLOCK OR FILE.
   265	000000'	370007	000000*	IGNR: SOS ST(C)         ;DON'T COUNT IGNORED CHARS
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1
DSKIO.MAC	23-DEC-86 12:29	

   266	000001'	256000	000000*	GA: XCT GA1X
   267	000002'	254027	000005'	 JRST @ASCTAB(C)
   268	000003'	350017	000000	 AOS (P)
   269	000004'	263740	000000	 POPJ P,
   270
   271	000005'	000000	000000'	ASCTAB: EXP IGNR        ;IGNORE NULL
   272				 REPEAT ^D8,<EXP CONT>  ;SOH THRU BS
   273	000006'	000000	000407'	EXP CONT
   274	000007'	000000	000407'	EXP CONT
   275	000010'	000000	000407'	EXP CONT
   276	000011'	000000	000407'	EXP CONT
   277	000012'	000000	000407'	EXP CONT
   278	000013'	000000	000407'	EXP CONT
   279	000014'	000000	000407'	EXP CONT
   280	000015'	000000	000407'	EXP CONT
   281	000016'	000000	000434'	 EXP HT1                ;TAB
   282				 REPEAT 3,<EXP CONT>    ;LF,VT,FF
   283	000017'	000000	000407'	EXP CONT
   284	000020'	000000	000407'	EXP CONT
   285	000021'	000000	000407'	EXP CONT
   286	000022'	000000	000455'	 EXP CR1                ;CARRIAGE RETURN
   287				 REPEAT ^D13,<EXP CONT> ;SO THRU SUB
   288	000023'	000000	000407'	EXP CONT
   289	000024'	000000	000407'	EXP CONT
   290	000025'	000000	000407'	EXP CONT
   291	000026'	000000	000407'	EXP CONT
   292	000027'	000000	000407'	EXP CONT
   293	000030'	000000	000407'	EXP CONT
   294	000031'	000000	000407'	EXP CONT
   295	000032'	000000	000407'	EXP CONT
   296	000033'	000000	000407'	EXP CONT
   297	000034'	000000	000407'	EXP CONT
   298	000035'	000000	000407'	EXP CONT
   299	000036'	000000	000407'	EXP CONT
   300	000037'	000000	000407'	EXP CONT
   301	000040'	000000	000411'	 EXP ESC1               ;ESCAPE
   302				 REPEAT 2,<EXP CONT>    ;FS,GS
   303	000041'	000000	000407'	EXP CONT
   304	000042'	000000	000407'	EXP CONT
   305	000043'	000000	000422'	 EXP RS1                ;RS
   306	000044'	000000	000407'	 EXP CONT               ;US
   307				 REPEAT ^D32,<EXP DATA> ;PUNCTUATION
   308	000045'	000000	000407'	EXP DATA
   309	000046'	000000	000407'	EXP DATA
   310	000000000	000407'	EXP DATA
   311	000050'	000000	000407'	EXP DATA
   312	000051'	000000	000407'	EXP DATA
   313	000052'	000000	000407'	EXP DATA
   314	000053'	000000	000407'	EXP DATA
   315	000054'	000000	000407'	EXP DATA
   316	000055'	000000	000407'	EXP DATA
   317	000056'	000000	000407'	EXP DATA
   318	000057'	000000	000407'	EXP DATA
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-2
DSKIO.MAC	23-DEC-86 12:29	

   319	000060'	000000	000407'	EXP DATA
   320	000061'	000000	000407'	EXP DATA
   321	000062'	000000	000407'	EXP DATA
   322	000063'	000000	000407'	EXP DATA
   323	000064'	000000	000407'	EXP DATA
   324	000065'	000000	000407'	EXP DATA
   325	000066'	000000	000407'	EXP DATA
   326	000067'	000000	000407'	EXP DATA
   327	000070'	000000	000407'	EXP DATA
   328	000071'	000000	000407'	EXP DATA
   329	000072'	000000	000407'	EXP DATA
   330	000073'	000000	000407'	EXP DATA
   331	000074'	000000	000407'	EXP DATA
   332	000075'	000000	000407'	EXP DATA
   333	000076'	000000	000407'	EXP DATA
   334	000077'	000000	000407'	EXP DATA
   335	000100'	000000	000407'	EXP DATA
   336	000101'	000000	000407'	EXP DATA
   337	000102'	000000	000407'	EXP DATA
   338	000103'	000000	000407'	EXP DATA
   339	000104'	000000	000407'	EXP DATA
   340	000105'	000000	000407'	 EXP DATA               ;@
   341				 REPEAT ^D31,<EXP DATA> ;A-Z,PUNCTUATION
   342	000106'	000000	000407'	EXP DATA
   343	000107'	000000	000407'	EXP DATA
   344	000110'	000000	000407'	EXP DATA
   345	000111'	000000	000407'	EXP DATA
   346	000112'	000000	000407'	EXP DATA
   347	000113'	000000	000407'	EXP DATA
   348	000114'	000000	000407'	EXP DATA
   349	000115'	000000	000407'	EXP DATA
   350	000116'	000000	000407'	EXP DATA
   351	000117'	000000	000407'	EXP DATA
   352	000120'	000000	000407'	EXP DATA
   353	000121'	000000	000407'	EXP DATA
   354	000122'	000000	000407'	EXP DATA
   355	000123'	000000	000407'	EXP DATA
   356	000124'	000000	000407'	EXP DATA
   357	000125'	000000	000407'	EXP DATA
   358	000126'	000000	000407'	EXP DATA
   359	000127'	000000	000407'	EXP DATA
   360	000130'	000000	000407'	EXP DATA
   361	000131'	000000	000407'	EXP DATA
   362	000132'	000000	000407'	EXP DATA
   363	000133'	000000	000407'	EXP DATA
   364	000134'	000000	000407'	EXP DATA
   365	000135'	000000	000407'	EXP DATA
   366	000136'	000000	000407'	EXP DATA
   367	000137'	000000	000407'	EXP DATA
   368	000140'	000000	000407'	EXP DATA
   369	000141'	000000	000407'	EXP DATA
   370	000142'	000000	000407'	EXP DATA
   371	000143'	000000	000407'	EXP DATA
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-3
DSKIO.MAC	23-DEC-86 12:29	

   372	000144'	000000	000407'	EXP DATA
   373				 REPEAT ^D31,<EXP LC1>  ;GRAVE, LOWER CASE THRU TILDA
   374	000145'	000000	000405'	EXP LC1
   375	000146'	000000	000405'	EXP LC1
   376	000147'	000000	000405'	EXP LC1
   377	000150'	000000	000405'	EXP LC1
   378	000151'	000000	000405'	EXP LC1
   379	000152'	000000	000405'	EXP LC1
   380	000153'	000000	000405'	EXP LC1
   381	000154'	000000	000405'	EXP LC1
   382	000155'	000000	000405'	EXP LC1
   383	000156'	000000	000405'	EXP LC1
   384	000157'	000000	000405'	EXP LC1
   385	000160'	000000	000405'	EXP LC1
   386	000161'	000000	000405'	EXP LC1
   387	000162'	000000	000405'	EXP LC1
   388	000163'	000000	000405'	EXP LC1
   389	000164'	000000	000405'	EXP LC1
   390	000165'	000000	000405'	EXP LC1
   391	000166'	000000	000405'	EXP LC1
   392	000167'	000000	000405'	EXP LC1
   393	000170'	000000	000405'	EXP LC1
   394	000171'	000000	000405'	EXP LC1
   395	000172'	000000	000405'	EXP LC1
   396	000173'	000000	000405'	EXP LC1
   397	000174'	000000	000405'	EXP LC1
   398	000175'	000000	000405'	EXP LC1
   399	000176'	000000	000405'	EXP LC1
   400	000177'	000000	000405'	EXP LC1
   401	000200'	000000	000405'	EXP LC1
   402	000201'	000000	000405'	EXP LC1
   403	000202'	000000	000405'	EXP LC1
   404	000203'	000000	000405'	EXP LC1
   405	000204'	000000	000000'	 EXP IGNR               ;IGNORE DEL
   406				 REPEAT ^D32,<EXP ILL8> ;ILLEGAL 8-BIT  200-237
   407	000205'	000000	000502'	EXP ILL8
   408	000206'	000000	000502'	EXP ILL8
   409	000207'	000000	000502'	EXP ILL8
   410	000210'	000000	000502'	EXP ILL8
   411	000211'	000000	000502'	EXP ILL8
   412	000212'	000000	000502'	EXP ILL8
   413	000213'	000000	000502'	EXP ILL8
   414	000214'	000000	000502'	EXP ILL8
   415	000215'	000000	000502'	EXP ILL8
   416	000216'	000000	000502'	EXP ILL8
   417	000217'	000000	000502'	EXP ILL8
   418	000220'	000000	000502'	EXP ILL8
   419	000221'	000000	000502'	EXP ILL8
   420	000222'	000000	000502'	EXP ILL8
   421	000223'	000000	000502'	EXP ILL8
   422	000224'	000000	000502'	EXP ILL8
   423	000225'	000000	000502'	EXP ILL8
   424	000226'	000000	000502'	EXP ILL8
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-4
DSKIO.MAC	23-DEC-86 12:29	

   425	000227'	000000	000502'	EXP ILL8
   426	000230'	000000	000502'	EXP ILL8
   427	000231'	000000	000502'	EXP ILL8
   428	000232'	000000	000502'	EXP ILL8
   429	000233'	000000	000502'	EXP ILL8
   430	000234'	000000	000502'	EXP ILL8
   431	000235'	000000	000502'	EXP ILL8
   432	000236'	000000	000502'	EXP ILL8
   433	000237'	000000	000502'	EXP ILL8
   434	000240'	000000	000502'	EXP ILL8
   435	000241'	000000	000502'	EXP ILL8
   436	000242'	000000	000502'	EXP ILL8
   437	000243'	000000	000502'	EXP ILL8
   438	000244'	000000	000502'	EXP ILL8
   439				 REPEAT ^D64,<EXP DATA> ;KATAKANA CHARS 240-337
   440	000245'	000000	000407'	EXP DATA
   441	000246'	000000	000407'	EXP DATA
   442	000247'	000000	000407'	EXP DATA
   443	000250'	000000	000407'	EXP DATA
   444	000251'	000000	000407'	EXP DATA
   445	000252'	000000	000407'	EXP DATA
   446	000253'	000000	000407'	EXP DATA
   447	000254'	000000	000407'	EXP DATA
   448	000255'	000000	000407'	EXP DATA
   449	000256'	000000	000407'	EXP DATA
   450	000257'	000000	000407'	EXP DATA
   451	000260'	000000	000407'	EXP DATA
   452	000261'	000000	000407'	EXP DATA
   453	000262'	000000	000407'	EXP DATA
   454	000263'	000000	000407'	EXP DATA
   455	000264'	000000	000407'	EXP DATA
   456	000265'	000000	000407'	EXP DATA
   457	000266'	000000	000407'	EXP DATA
   458	000267'	000000	000407'	EXP DATA
   459	000270'	000000	000407'	EXP DATA
   460	000271'	000000	000407'	EXP DATA
   461	000272'	000000	000407'	EXP DATA
   462	000273'	000000	000407'	EXP DATA
   463	000274'	000000	000407'	EXP DATA
   464	000275'	000000	000407'	EXP DATA
   465	000276'	000000	000407'	EXP DATA
   466	000277'	000000	000407'	EXP DATA
   467	000300'	000000	000407'	EXP DATA
   468	000301'	000000	000407'	EXP DATA
   469	000302'	000000	000407'	EXP DATA
   470	000303'	000000	000407'	EXP DATA
   471	000304'	000000	000407'	EXP DATA
   472	000305'	000000	000407'	EXP DATA
   473	000306'	000000	000407'	EXP DATA
   474	000307'	000000	000407'	EXP DATA
   475	000310'	000000	000407'	EXP DATA
   476	000311'	000000	000407'	EXP DATA
   477	000312'	000000	000407'	EXP DATA
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-5
DSKIO.MAC	23-DEC-86 12:29	

   478	000313'	000000	000407'	EXP DATA
   479	000314'	000000	000407'	EXP DATA
   480	000315'	000000	000407'	EXP DATA
   481	000316'	000000	000407'	EXP DATA
   482	000317'	000000	000407'	EXP DATA
   483	000320'	000000	000407'	EXP DATA
   484	000321'	000000	000407'	EXP DATA
   485	000322'	000000	000407'	EXP DATA
   486	000323'	000000	000407'	EXP DATA
   487	000324'	000000	000407'	EXP DATA
   488	000325'	000000	000407'	EXP DATA
   489	000326'	000000	000407'	EXP DATA
   490	000327'	000000	000407'	EXP DATA
   491	000330'	000000	000407'	EXP DATA
   492	000331'	000000	000407'	EXP DATA
   493	000332'	000000	000407'	EXP DATA
   494	000333'	000000	000407'	EXP DATA
   495	000334'	000000	000407'	EXP DATA
   496	000335'	000000	000407'	EXP DATA
   497	000336'	000000	000407'	EXP DATA
   498	000337'	000000	000407'	EXP DATA
   499	000340'	000000	000407'	EXP DATA
   500	000341'	000000	000407'	EXP DATA
   501	000342'	000000	000407'	EXP DATA
   502	000343'	000000	000407'	EXP DATA
   503	000344'	000000	000407'	EXP DATA
   504				 REPEAT ^D32,<EXP ILL8> ;ILLEGAL 8-BIT 340-377
   505	000345'	000000	000502'	EXP ILL8
   506	000346'	000000	000502'	EXP ILL8
   507	000347'	000000	000502'	EXP ILL8
   508	000350'	000000	000502'	EXP ILL8
   509	000351'	000000	000502'	EXP ILL8
   510	000352'	000000	000502'	EXP ILL8
   511	000353'	000000	000502'	EXP ILL8
   512	000354'	000000	000502'	EXP ILL8
   513	000355'	000000	000502'	EXP ILL8
   514	000356'	000000	000502'	EXP ILL8
   515	000357'	000000	000502'	EXP ILL8
   516	000360'	000000	000502'	EXP ILL8
   517	000361'	000000	000502'	EXP ILL8
   518	000362'	000000	000502'	EXP ILL8
   519	000363'	000000	000502'	EXP ILL8
   520	000364'	000000	000502'	EXP ILL8
   521	000365'	000000	000502'	EXP ILL8
   522	000366'	000000	000502'	EXP ILL8
   523	000367'	000000	000502'	EXP ILL8
   524	000370'	000000	000502'	EXP ILL8
   525	000371'	000000	000502'	EXP ILL8
   526	000372'	000000	000502'	EXP ILL8
   527	000373'	000000	000502'	EXP ILL8
   528	000374'	000000	000502'	EXP ILL8
   529	000375'	000000	000502'	EXP ILL8
   530	000376'	000000	000502'	EXP ILL8
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-6
DSKIO.MAC	23-DEC-86 12:29	

   531	000377'	000000	000502'	EXP ILL8
   532	000400'	000000	000502'	EXP ILL8
   533	000401'	000000	000502'	EXP ILL8
   534	000402'	000000	000502'	EXP ILL8
   535	000403'	000000	000502'	EXP ILL8
   536	000404'	000000	000502'	EXP ILL8
   537
   538				;LOWER CASE
   539	000405'	606700	000004	LC1: TRNN F,LCO         ;IS LOWER CASE PERMITTED
   540				 JRST   [ SOS ST(C)     ;NO, CONVERT TO UPPER
   541				        SUBI C,40
   542				        AOS ST(C)
   543	000406'	254000	003273'	        JRST DATA]
   544	000407'			CONT:
   545	000407'	350000	000000*	DATA: AOS POS           ;ADVANCE POSITION
   546	000410'	263740	000000	 POPJ P,                ;RETURN
   547
   548	000411'	200000	003277'	ESC1: MOVE [JRST ESC2]
   549	000412'	202000	000001*	 MOVEM GA1X
   550	000413'	263740	000000	 POPJ P,                ;ESC ALREADY COUNTED BY GB
   551	000414'	200000	003300'	ESC2: MOVE [PUSHJ P,GB]
   552	000415'	202000	000412*	 MOVEM GA1X
   553	000416'	201340	000033	 MOVEI C,ESC
   554	000417'	350000	000033*	 AOS ST+ESC             ;THIS ONE NOT COUNTED
   555	000420'	350000	000407*	 AOS POS                ;ADVANCE POSITION
   556	000421'	263740	000000	 POPJ P,
   557
   558	000422'	200000	003301'	RS1: MOVE [JRST RS2]
   559	000423'	202000	000415*	 MOVEM GA1X
   560	000424'	350000	000033*	 AOS ST+ESC             ;COUNT ESCAPE.  RS ALREADY COUNTED.
   561	000425'	201340	000033	 MOVEI C,ESC
   562	000426'	263740	000000	 POPJ P,
   563	000427'	200000	003300'	RS2: MOVE [PUSHJ P,GB]
   564	000430'	202000	000423*	 MOVEM GA1X
   565	000431'	201340	000036	 MOVEI C,RS
   566	000432'	350000	000420*	 AOS POS                ;ADVANCE POSITION
   567	000433'	263740	000000	 POPJ P,
   568
   569				; TAB EXPAND.
   570
   571	000434'	370000	000011*	HT1: SOS ST+HT          ;DON'T COUNT TAB
   572	000435'	200000	000432*	 MOVE POS
   573	000436'	231000	000010	 IDIVI TABSIZ
   574	000437'	201000	000010	 MOVEI TABSIZ
   575	000440'	274000	000001	 SUB R0,R1
   576	000441'	202000	000000*	 MOVEM MBC              ;MULTIPLE BLANK COUNT
   577	000442'	200000	003302'	 MOVE [JRST HT2]
   578	000443'	202000	000430*	 MOVEM GA1X
   579	000444'	375000	000441*	HT2: SOSGE MBC
   580	000445'	254000	000452'	 JRST HT3
   581	000446'	201340	000040	 MOVEI C,BL
   582	000447'	350000	000040*	 AOS ST+BL
   583	000450'	350000	000435*	 AOS POS
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-7
DSKIO.MAC	23-DEC-86 12:29	

   584	000451'	263740	000000	 POPJ P,
   585	000452'	200000	003300'	HT3: MOVE [PUSHJ P,GB]
   586	000453'	202000	000443*	 MOVEM GA1X
   587	000454'	254000	000001'	 JRST GA
   588
   589				; CARRIAGE RETURN RESET LINE POSITION.
   590	000455'	402000	000450*	CR1: SETZM POS
   591				; TEST FOR END OF BLOCK
   592	000456'	332000	000000*	 SKIPE COUNTB
   593	000457'	254000	000462'	 JRST .+3               ;END NOT REACHED
   594	000460'	350000	000456*	 AOS COUNTB             ;IF AT END, INCREASE LRECL AND COUNTB
   595	000461'	350000	000000*	 AOS LRECL
   596	000462'	260740	000504'	 PUSHJ P,GB             ;NEVER SKIPS
   597	000463'	306340	000012	 CAIN C,LF              ;END OF RECORD
   598	000464'	254000	000476'	 JRST CRLF              ;YES
   599	000465'	202340	003271'	 MOVEM C,ACHAR#         ;SAVE CHAR FOLLOWING CR
   600	000466'	200000	003303'	 MOVE [JRST CR2]
   601	000467'	202000	000453*	 MOVEM GA1X
   602	000470'	201340	000015	 MOVEI C,CR
   603	000471'	263740	000000	 POPJ P,                ;CR ALREADY COUNTED
   604	000472'	200000	003300'	CR2: MOVE [PUSHJ P,GB]
   605	000473'	202000	000467*	 MOVEM GA1X
   606	000474'	200340	003271'	 MOVE C,ACHAR#          ;RETRIEVE CHAR FOR REPLAY
   607	000475'	254027	000005'	 JRST @ASCTAB(C)        ;REPLAY CHAR (ALREADY COUNTED BY GB)
   608
   609	000476'	370000	000015*	CRLF: SOS ST+CR         ;DON'T COUNT CR
   610	000477'	350000	000036*	 AOS ST+RS              ;COUNT RS INSTEAD.
   611	000500'	201340	000036	 MOVEI C,RS
   612	000501'	263740	000000	 POPJ P,
   613
   614	000502'	264000	000000*	ILL8: JSR IOERR         ;ILLEGAL 8-BIT CHAR ENCOUNTERED IN KATAKANA FILE
   615	000503'	264000	000502*	ILL9: JSR IOERR         ;ILLEGAL 9-BIT CHAR ENCOUNTERED IN KATAKANA FILE
   616
   617				DEFINE GBY9(A,B),< LDB C,A
   618				 MOVEI GS,B
   619				 JRST GEX9
   620				 >
   621
   622				DEFINE GBY1(A,B),< LDB C,A
   623				 MOVEI GS,B
   624				 JRST GEX1
   625				 >
   626
   627				DEFINE GBY(A,B),< LDB C,A
   628				 MOVEI GS,B
   629				 JRST GEX
   630				 >
   631				; GET BINARY BYTE
   632
   633	000504'	375000	000460*	GB: SOSGE COUNTB
   634	000505'	254000	000507'	 JRST EOB               ;END OF BLOCK OR FILE
   635	000506'	254012	000000	 JRST 0(GS)             ;DISPATCH TO APPROPRIATE CODE
   636	000507'	201500	001027'	EOB: MOVEI GS,GBINIT
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-8
DSKIO.MAC	23-DEC-86 12:29	

   637	000510'	350017	000000	 AOS (P)
   638	000511'	263740	000000	 POPJ P,
   639
   640	000512'	350713	000000	L7G0: POINT 7,0(GX),6
   641	000513'	260713	000000	L7G1: POINT 7,0(GX),13
   642	000514'	170713	000000	L7G2: POINT 7,0(GX),20
   643	000515'	100713	000000	L7G3: POINT 7,0(GX),27
   644	000516'	010713	000000	L7G4: POINT 7,0(GX),34
   645
   646				; BLOCKING = 5 BYTESIZE = 7 LEFT FILL
   647	000517'	377000	000000*	GL75B0: SOSG GWCNT
   648	000520'	260740	001201'	 PUSHJ P,NSBI
   649	000521'	135340	000512'	 LDB C,L7G0
   650	000522'	201500	000547'	 MOVEI GS,GL75B1
   651	000523'	606700	100000	 TRNN F,EDIT10          ;IS THIS AN EDIT-10 FILE?
   652	000524'	254000	000701'	 JRST GEX               ;NO, EXIT NORMALLY
   653	000525'	200013	000000	 MOVE (GX)
   654	000526'	606000	000001	 TRNN 1                 ;LOOK FOR BIT 35
   655	000527'	254000	000701'	 JRST GEX               ;THIS WORD DOES NOT CONTAIN A LINE NO.
   656	000530'	200000	000504*	 MOVE COUNTB            ;ADJUST COUNTB TO CONSUME 5 CHARS
   657	000531'	275000	000005	 SUBI 5
   658	000532'	301000	000000	 CAIL 0
   659	000533'	254000	000537'	 JRST .+4
   660	000534'	210000	000000	 MOVN R0,R0
   661	000535'	272000	000461*	 ADDM LRECL
   662	000536'	400000	000000	 SETZ R0,
   663	000537'	202000	000530*	 MOVEM COUNTB
   664	000540'	350000	000013	 AOS GX
   665	000541'	377000	000517*	 SOSG GWCNT
   666	000542'	260740	001201'	 PUSHJ P,NSBI
   667	000543'	135340	001403'	 LDB C,L7B0             ;WE HAVE NOW PASSED OVER THE LINE NO.
   668	000544'	302340	000011	 CAIE C,HT              ;IS LINE NO. FOLLOWED BY A TAB
   669	000545'	254000	000701'	 JRST GEX               ;NO, EXIT
   670	000546'	254000	000504'	 JRST GB                ;SKIP OVER THE TAB TOO
   671	000547'	135340	000513'	GL75B1: GBY L7G1,GL75B2^ LDB C,L7G1
   672	000550'	201500	000552'	 MOVEI GS,GL75B2
   673	000551'	254000	000701'	 JRST GEX
   674	000552'	135340	000514'	GL75B2: GBY L7G2,GL75B3^ LDB C,L7G2
   675	000553'	201500	000555'	 MOVEI GS,GL75B3
   676	000554'	254000	000701'	 JRST GEX
   677	000555'	135340	000515'	GL75B3: GBY L7G3,GL75B4^ LDB C,L7G3
   678	000556'	201500	000560'	 MOVEI GS,GL75B4
   679	000557'	254000	000701'	 JRST GEX
   680	000560'	135340	000516'	GL75B4: GBY1 L7G4,GL75B0^ LDB C,L7G4
   681	000561'	201500	000517'	 MOVEI GS,GL75B0
   682	000562'	254000	000700'	 JRST GEX1
   683
   684				; BLOCKING = 9 BYTESIZE = 8 LEFT FILL SERIAL
   685	000563'	377000	000541*	GL89B0: SOSG GWCNT
   686	000564'	260740	001201'	 PUSHJ P,NSBI
   687	000565'	135340	000703'	 GBY L8G0,GL89B1^ LDB C,L8G0
   688	000566'	201500	000570'	 MOVEI GS,GL89B1
   689	000567'	254000	000701'	 JRST GEX
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-9
DSKIO.MAC	23-DEC-86 12:29	

   690	000570'	135340	000704'	GL89B1: GBY L8G1,GL89B2^ LDB C,L8G1
   691	000571'	201500	000573'	 MOVEI GS,GL89B2
   692	000572'	254000	000701'	 JRST GEX
   693	000573'	135340	000705'	GL89B2: GBY L8G2,GL89B3^ LDB C,L8G2
   694	000574'	201500	000576'	 MOVEI GS,GL89B3
   695	000575'	254000	000701'	 JRST GEX
   696	000576'	135340	000706'	GL89B3: GBY L8G3,GL89B4^ LDB C,L8G3
   697	000577'	201500	000601'	 MOVEI GS,GL89B4
   698	000600'	254000	000701'	 JRST GEX
   699	000601'	135340	000707'	GL89B4: LDB C,L8G4A
   700	000602'	242340	000004	 LSH C,4
   701	000603'	202340	003272'	 MOVEM C,TMP#
   702	000604'	350000	000013	 AOS GX
   703	000605'	377000	000563*	 SOSG GWCNT
   704	000606'	260740	001201'	 PUSHJ P,NSBI
   705	000607'	135340	000710'	 LDB C,L8G4B
   706	000610'	434340	003272'	 IOR C,TMP
   707	000611'	201500	000613'	 MOVEI GS,GL89B5
   708	000612'	254000	000701'	 JRST GEX
   709	000613'	135340	000727'	GL89B5: GBY R8G0,GL89B6^ LDB C,R8G0
   710	000614'	201500	000616'	 MOVEI GS,GL89B6
   711	000615'	254000	000701'	 JRST GEX
   712	000616'	135340	000730'	GL89B6: GBY R8G1,GL89B7^ LDB C,R8G1
   713	000617'	201500	000621'	 MOVEI GS,GL89B7
   714	000620'	254000	000701'	 JRST GEX
   715	000621'	135340	000731'	GL89B7: GBY R8G2,GL89B8^ LDB C,R8G2
   716	000622'	201500	000624'	 MOVEI GS,GL89B8
   717	000623'	254000	000701'	 JRST GEX
   718	000624'	135340	000732'	GL89B8: GBY1 R8G3,GL89B0^ LDB C,R8G3
   719	000625'	201500	000563'	 MOVEI GS,GL89B0
   720	000626'	254000	000700'	 JRST GEX1
   721
   722				; BLOCKING = 4 BYTESIZE = 9 LEFT FILL KATAKANA
   723	000627'	331113	000000	L9G0: POINT 9,0(GX),8
   724	000630'	221113	000000	L9G1: POINT 9,0(GX),17
   725	000631'	111113	000000	L9G2: POINT 9,0(GX),26
   726	000632'	001113	000000	L9G3: POINT 9,0(GX),35
   727	000633'	377000	000605*	GL94B0: SOSG GWCNT
   728	000634'	260740	001201'	 PUSHJ P,NSBI
   729	000635'	135340	000627'	 GBY9 L9G0,GL94B1^ LDB C,L9G0
   730	000636'	201500	000640'	 MOVEI GS,GL94B1
   731	000637'	254000	000651'	 JRST GEX9
   732	000640'	135340	000630'	GL94B1: GBY9 L9G1,GL94B2^ LDB C,L9G1
   733	000641'	201500	000643'	 MOVEI GS,GL94B2
   734	000642'	254000	000651'	 JRST GEX9
   735	000643'	135340	000631'	GL94B2: GBY9 L9G2,GL94B3^ LDB C,L9G2
   736	000644'	201500	000646'	 MOVEI GS,GL94B3
   737	000645'	254000	000651'	 JRST GEX9
   738	000646'	135340	000632'	GL94B3: LDB C,L9G3
   739	000647'	350000	000013	 AOS GX
   740	000650'	201500	000633'	 MOVEI GS,GL94B0
   741	000651'	602340	000400	GEX9: TRNE C,400
   742	000652'	254000	000503'	 JRST ILL9
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-10
DSKIO.MAC	23-DEC-86 12:29	

   743	000653'	350007	000000*	 AOS ST(C)
   744	000654'	263740	000000	 POPJ P,
   745
   746				; BLOCKING = 5 BYTESIZE = 8 LEFT FILL
   747				;       NOTE BYTESIZE IS ACTUALLY 7 EXCEPT ON BYTE 4, AND
   748				;       THAT BYTE IS ROTATED 1 BIT TO FAVOR COMPRESSION
   749	000655'	377000	000633*	GL85B0: SOSG GWCNT
   750	000656'	260740	001201'	 PUSHJ P,NSBI
   751	000657'	135340	000512'	 GBY L7G0,GL85B1^ LDB C,L7G0
   752	000660'	201500	000662'	 MOVEI GS,GL85B1
   753	000661'	254000	000701'	 JRST GEX
   754	000662'	135340	000513'	GL85B1: GBY L7G1,GL85B2^ LDB C,L7G1
   755	000663'	201500	000665'	 MOVEI GS,GL85B2
   756	000664'	254000	000701'	 JRST GEX
   757	000665'	135340	000514'	GL85B2: GBY L7G2,GL85B3^ LDB C,L7G2
   758	000666'	201500	000670'	 MOVEI GS,GL85B3
   759	000667'	254000	000701'	 JRST GEX
   760	000670'	135340	000515'	GL85B3: GBY L7G3,GL85B4^ LDB C,L7G3
   761	000671'	201500	000673'	 MOVEI GS,GL85B4
   762	000672'	254000	000701'	 JRST GEX
   763	000673'	135340	000732'	GL85B4: LDB C,R8G3
   764	000674'	602340	000001	 TRNE C,1
   765	000675'	431340	000401	 XORI C,401     ;MOVE BIT 35 TO BIT 27
   766	000676'	242340	777777	 LSH C,-1       ;REJUSTIFY
   767	000677'	201500	000655'	 MOVEI GS,GL85B0
   768	000700'	350000	000013	GEX1: AOS GX
   769	000701'	350007	000653*	GEX: AOS ST(C)
   770	000702'	263740	000000	 POPJ P,
   771
   772				; BLOCKING = 4 BYTESIZE = 8 LEFT FILL
   773	000703'	341013	000000	L8G0: POINT 8,0(GX),7
   774	000704'	241013	000000	L8G1: POINT 8,0(GX),15
   775	000705'	141013	000000	L8G2: POINT 8,0(GX),23
   776	000706'	041013	000000	L8G3: POINT 8,0(GX),31
   777	000707'	000413	000000	L8G4A: POINT 4,0(GX),35
   778	000710'	400413	000000	L8G4B: POINT 4,0(GX),3
   779	000711'	377000	000655*	GL8B0: SOSG GWCNT
   780	000712'	260740	001201'	 PUSHJ P,NSBI
   781	000713'	135340	000703'	 GBY L8G0,GL8B1^ LDB C,L8G0
   782	000714'	201500	000716'	 MOVEI GS,GL8B1
   783	000715'	254000	000701'	 JRST GEX
   784	000716'	135340	000704'	GL8B1: GBY L8G1,GL8B2^ LDB C,L8G1
   785	000717'	201500	000721'	 MOVEI GS,GL8B2
   786	000720'	254000	000701'	 JRST GEX
   787	000721'	135340	000705'	GL8B2: GBY L8G2,GL8B3^ LDB C,L8G2
   788	000722'	201500	000724'	 MOVEI GS,GL8B3
   789	000723'	254000	000701'	 JRST GEX
   790	000724'	135340	000706'	GL8B3: GBY1 L8G3,GL8B0^ LDB C,L8G3
   791	000725'	201500	000711'	 MOVEI GS,GL8B0
   792	000726'	254000	000700'	 JRST GEX1
   793
   794				; BLOCKING = 4 BYTESIZE = 8 RIGHT FILL
   795	000727'	301013	000000	R8G0: POINT 8,0(GX),11
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-11
DSKIO.MAC	23-DEC-86 12:29	

   796	000730'	201013	000000	R8G1: POINT 8,0(GX),19
   797	000731'	101013	000000	R8G2: POINT 8,0(GX),27
   798	000732'	001013	000000	R8G3: POINT 8,0(GX),35
   799	000733'	377000	000711*	GR8B0: SOSG GWCNT
   800	000734'	260740	001201'	 PUSHJ P,NSBI
   801	000735'	135340	000727'	 GBY R8G0,GR8B1^ LDB C,R8G0
   802	000736'	201500	000740'	 MOVEI GS,GR8B1
   803	000737'	254000	000701'	 JRST GEX
   804	000740'	135340	000730'	GR8B1: GBY R8G1,GR8B2^ LDB C,R8G1
   805	000741'	201500	000743'	 MOVEI GS,GR8B2
   806	000742'	254000	000701'	 JRST GEX
   807	000743'	135340	000731'	GR8B2: GBY R8G2,GR8B3^ LDB C,R8G2
   808	000744'	201500	000746'	 MOVEI GS,GR8B3
   809	000745'	254000	000701'	 JRST GEX
   810	000746'	135340	000732'	GR8B3: GBY1 R8G3,GR8B0^ LDB C,R8G3
   811	000747'	201500	000733'	 MOVEI GS,GR8B0
   812	000750'	254000	000700'	 JRST GEX1
   813
   814				; BLOCKING = 3 BYTESIZE = 8 LEFT FILL
   815	000751'	377000	000733*	GL83B0: SOSG GWCNT
   816	000752'	260740	001201'	 PUSHJ P,NSBI
   817	000753'	135340	000703'	 GBY L8G0,GL83B1^ LDB C,L8G0
   818	000754'	201500	000756'	 MOVEI GS,GL83B1
   819	000755'	254000	000701'	 JRST GEX
   820	000756'	135340	000704'	GL83B1: GBY L8G1,GL83B2^ LDB C,L8G1
   821	000757'	201500	000761'	 MOVEI GS,GL83B2
   822	000760'	254000	000701'	 JRST GEX
   823	000761'	135340	000705'	GL83B2: GBY1 L8G2,GL83B0^ LDB C,L8G2
   824	000762'	201500	000751'	 MOVEI GS,GL83B0
   825	000763'	254000	000700'	 JRST GEX1
   826
   827				; BLOCKING = 3 BYTESIZE = 8 RIGHT FILL
   828	000764'	377000	000751*	GR83B0: SOSG GWCNT
   829	000765'	260740	001201'	 PUSHJ P,NSBI
   830	000766'	135340	000730'	 GBY R8G1,GR83B1^ LDB C,R8G1
   831	000767'	201500	000771'	 MOVEI GS,GR83B1
   832	000770'	254000	000701'	 JRST GEX
   833	000771'	135340	000731'	GR83B1: GBY R8G2,GR83B2^ LDB C,R8G2
   834	000772'	201500	000774'	 MOVEI GS,GR83B2
   835	000773'	254000	000701'	 JRST GEX
   836	000774'	135340	000732'	GR83B2: GBY1 R8G3,GR83B0^ LDB C,R8G3
   837	000775'	201500	000764'	 MOVEI GS,GR83B0
   838	000776'	254000	000700'	 JRST GEX1
   839
   840				; BLOCKING = 2 BYTESIZE = 8 LEFT FILL
   841	000777'	377000	000764*	GL82B0: SOSG GWCNT
   842	001000'	260740	001201'	 PUSHJ P,NSBI
   843	001001'	135340	000703'	 GBY L8G0,GL82B1^ LDB C,L8G0
   844	001002'	201500	001004'	 MOVEI GS,GL82B1
   845	001003'	254000	000701'	 JRST GEX
   846	001004'	135340	000704'	GL82B1: GBY1 L8G1,GL82B0^ LDB C,L8G1
   847	001005'	201500	000777'	 MOVEI GS,GL82B0
   848	001006'	254000	000700'	 JRST GEX1
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-12
DSKIO.MAC	23-DEC-86 12:29	

   849
   850				; BLOCKING = 2 BYTESIZE = 8 RIGHT FILL
   851	001007'	377000	000777*	GR82B0: SOSG GWCNT
   852	001010'	260740	001201'	 PUSHJ P,NSBI
   853	001011'	135340	000731'	 GBY R8G2,GR82B1^ LDB C,R8G2
   854	001012'	201500	001014'	 MOVEI GS,GR82B1
   855	001013'	254000	000701'	 JRST GEX
   856	001014'	135340	000732'	GR82B1: GBY1 R8G3,GR82B0^ LDB C,R8G3
   857	001015'	201500	001007'	 MOVEI GS,GR82B0
   858	001016'	254000	000700'	 JRST GEX1
   859
   860				; BLOCKING = 1 BYTESIZE = 8 LEFT FILL
   861	001017'	377000	001007*	GL81B0: SOSG GWCNT
   862	001020'	260740	001201'	 PUSHJ P,NSBI
   863	001021'	135340	000703'	 LDB C,L8G0
   864	001022'	254000	000700'	 JRST GEX1
   865
   866				; BLOCKING = 1 BYTESIZE = 8 RIGHT FILL
   867	001023'	377000	001017*	GR81B0: SOSG GWCNT
   868	001024'	260740	001201'	 PUSHJ P,NSBI
   869	001025'	135340	000732'	 LDB C,R8G3
   870	001026'	254000	000700'	 JRST GEX1
   871
   872				; POSITION TO BYTE POSITION BP.
   873	001027'	260740	001260'	GBINIT: PUSHJ P,UPA     ;UNPACK BINARY PARAMETERS.  RETURNS R0=PAGE NO.
   874	001030'	260740	001210'	 PUSHJ P,RDBLK          ;READ PAGE.  WRITE OUT OLD FIRST IF CHANGED.
   875				;                       SETS GX=BUFFER
   876				;       SKIP FIRST WORD OF EDIT-10 FILES
   877	001031'	332000	000000*	 SKIPE BP               ;ARE WE AT BEGINNING OF FILE
   878	001032'	254000	001042'	 JRST GBI2              ;NO
   879	001033'	402000	000455*	 SETZM POS              ;ZERO POS (MUST BE DONE WHENEVER BP=0)
   880	001034'	200000	002122'	 MOVE BUFFER            ;EXAMINE FIRST WORD IN THE FILE
   881	001035'	200040	000000*	 MOVE R1,TMODE          ;BUT ONLY WHEN MODE=1 (ASCII)
   882	001036'	306040	000001	 CAIN R1,1
   883	001037'	606000	000001	 TRNN 1
   884	001040'	254000	001042'	 JRST GBI2              ;FILE DOES NOT QUALIFY FOR EDIT-10 TREATMENT
   885	001041'	660700	100000	 TRO F,EDIT10           ;TURN ON FLAG FOR GL7B0
   886				; END EDIT10 INITIALIZATION
   887	001042'	200000	000000*	GBI2: MOVE N
   888	001043'	602700	000020	 TRNE F,SERFLG          ;SERIAL MODE
   889				 JRST [ LSH R0,3        ;CALCULATE BIT POSITION IN PAGE
   890				        IDIVI 44
   891				        ADDM GX
   892				        SUBI 1000
   893				        MOVNM GWCNT
   894				        MOVE N
   895				        IDIVI 11        ;MOD 9
   896				        MOVE GS,GSETAB(R1)
   897	001044'	254000	003304'	        JRST GBI1]
   898	001045'	230000	000000*	 IDIV BF
   899	001046'	272000	000013	 ADDM GX
   900	001047'	275000	001000	 SUBI 1000
   901	001050'	212000	001023*	 MOVNM GWCNT
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-13
DSKIO.MAC	23-DEC-86 12:29	

   902	001051'	200100	000000*	 MOVE R2,BPARAM
   903	001052'	602100	000400	 TRNE R2,400
   904				 JRST [ MOVE GS,GKTAB(R1)
   905	001053'	254000	003315'	        JRST GBI1]
   906	001054'	405100	000041	 ANDI R2,41             ;EXTRACT FILL AND LOW ORDER BIT OF BYTESIZE
   907	001055'	622100	000040	 TRZE R2,40             ;IF LOW ORDER BIT IS ON THEN BYTESIZE=8
   908	001056'	660100	000002	 TRO R2,2
   909	001057'	242100	000003	 LSH R2,3
   910	001060'	270100	001045*	 ADD R2,BF
   911	001061'	270042	001066'	 ADD R1,GBTAB(R2)       ;INDEX INTO APPROPRIATE TABLE
   912	001062'	200501	000000	 MOVE GS,0(R1)          ;INITIAL STATE
   913	001063'	603500	400000	GBI1: TLNE GS,IW             ;SHOULD WE INCREMENT GWCNT
   914	001064'	350000	001050*	 AOS GWCNT              ;YES
   915	001065'	254012	000000	 JRST 0(GS)             ;COUNTB ALREADY DECREMENTED
   916
   917			400000	IW=400000               ;INCREMENT GWCNT FIRST
   918				; INDEX INTO THIS TABLE IS XYZZZ
   919				;       X= BYTESIZE 8
   920				;       Y= LEFT FILL
   921				;       ZZZ= BLOCKING
   922	001066'	000000	001126'	GBTAB: EXP G7L5,G7L5,G7L5,G7L5,G7L5,G7L5,G7L5,G7L5
	001067'	000000	001126'
	001070'	000000	001126'
	001071'	000000	001126'
	001072'	000000	001126'
	001073'	000000	001126'
	001074'	000000	001126'
	001075'	000000	001126'
   923	001076'	000000	001126'	       EXP G7L5,G7L5,G7L5,G7L5,G7L5,G7L5,G7L5,G7L5
	001077'	000000	001126'
	001100'	000000	001126'
	001101'	000000	001126'
	001102'	000000	001126'
	001103'	000000	001126'
	001104'	000000	001126'
	001105'	000000	001126'
   924	001106'	000000	001140'	       EXP G8R4,G8R1,G8R2,G8R3,G8R4,G8R4,G8R4,G8R4
	001107'	000000	001162'
	001110'	000000	001156'
	001111'	000000	001150'
	001112'	000000	001140'
	001113'	000000	001140'
	001114'	000000	001140'
	001115'	000000	001140'
   925	001116'	000000	001144'	       EXP G8L4,G8L1,G8L2,G8L3,G8L4,G8L5,G8L4,G8L4
	001117'	000000	001163'
	001120'	000000	001160'
	001121'	000000	001153'
	001122'	000000	001144'
	001123'	000000	001133'
	001124'	000000	001144'
	001125'	000000	001144'
   926	001126'	400000	000517'	G7L5: XWD IW,GL75B0
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-14
DSKIO.MAC	23-DEC-86 12:29	

   927	001127'	000000	000547'	 EXP GL75B1,GL75B2,GL75B3,GL75B4
	001130'	000000	000552'
	001131'	000000	000555'
	001132'	000000	000560'
   928	001133'	400000	000655'	G8L5: XWD IW,GL85B0
   929	001134'	000000	000662'	 EXP GL85B1,GL85B2,GL85B3,GL85B4
	001135'	000000	000665'
	001136'	000000	000670'
	001137'	000000	000673'
   930	001140'	400000	000733'	G8R4: XWD IW,GR8B0
   931	001141'	000000	000740'	 EXP GR8B1,GR8B2,GR8B3
	001142'	000000	000743'
	001143'	000000	000746'
   932	001144'	400000	000711'	G8L4: XWD IW,GL8B0
   933	001145'	000000	000716'	 EXP GL8B1,GL8B2,GL8B3
	001146'	000000	000721'
	001147'	000000	000724'
   934	001150'	400000	000764'	G8R3: XWD IW,GR83B0
   935	001151'	000000	000771'	 EXP GR83B1,GR83B2
	001152'	000000	000774'
   936	001153'	400000	000751'	G8L3: XWD IW,GL83B0
   937	001154'	000000	000756'	 EXP GL83B1,GL83B2
	001155'	000000	000761'
   938	001156'	400000	001007'	G8R2: XWD IW,GR82B0
   939	001157'	000000	001014'	 EXP GR82B1
   940	001160'	400000	000777'	G8L2: XWD IW,GL82B0
   941	001161'	000000	001004'	 EXP GL82B1
   942	001162'	400000	001023'	G8R1: XWD IW,GR81B0
   943	001163'	400000	001017'	G8L1: XWD IW,GL81B0
   944
   945				;KATAKANA MODE
   946	001164'	400000	000633'	GKTAB: XWD IX,GL94B0
   947	001165'	000000	000640'	 EXP GL94B1,GL94B2,GL94B3
	001166'	000000	000643'
	001167'	000000	000646'
   948
   949				;SERIAL MODE
   950	001170'	400000	000563'	GSETAB: XWD IW,GL89B0
   951	001171'	000000	000570'	 EXP GL89B1,GL89B2,GL89B3,GL89B4,GL89B5,GL89B6,GL89B7,GL89B8
	001172'	000000	000573'
	001173'	000000	000576'
	001174'	000000	000601'
	001175'	000000	000613'
	001176'	000000	000616'
	001177'	000000	000621'
	001200'	000000	000624'
   952
   953				; READ NEXT SEQUENTIAL INPUT PAGE
   954	001201'	200000	000000*	NSBI: MOVE BLKNO
   955	001202'	271000	000001	 ADDI 1
   956	001203'	260740	001210'	 PUSHJ P,RDBLK
   957	001204'	201000	001000	 MOVEI 1000
   958	001205'	202000	001064*	 MOVEM GWCNT
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-15
DSKIO.MAC	23-DEC-86 12:29	

   959	001206'	201540	002122'	 MOVEI GX,BUFFER
   960	001207'	263740	000000	 POPJ P,
   961
   962				; READ PAGE NO. IN R0 FROM INPUT FILE
   963	001210'	202000	000000*	RDBLK: MOVEM TMP1       ;SAVE DESIRED PAGE NO.
   964	001211'	260740	003125'	 PUSHJ P,WRBLK          ;WRITE OUT OLD PAGE IF CHANGED
   965	001212'	201540	002122'	 MOVEI GX,BUFFER
   966	001213'	200000	001210*	 MOVE TMP1
   967	001214'	250000	001201*	 EXCH BLKNO
   968	001215'	316000	001213*	 CAMN TMP1
   969	001216'	263740	000000	 POPJ P,                ;SAME PAGE
   970	001217'	260740	002046'	 PUSHJ P,RBZ            ;READ CONTENTS
   971	001220'	263740	000000	 POPJ P,                ;FINISHED
   972
   973
   974				; INITIALIZE TRANSMITTERS AND FILE READERS
   975
   976	001221'	260740	000000*	ITF: PUSHJ P,RINIT
   977	001222'	200000	003317'	 MOVE [-1]
   978	001223'	202000	001214*	 MOVEM BLKNO
   979	001224'	402000	001031*	 SETZM BP
   980	001225'	402000	000000*	 SETZM BP0
   981	001226'	201500	001027'	 MOVEI GS,GBINIT
   982	001227'	200000	003300'	 MOVE [PUSHJ P,GB]
   983	001230'	202000	000473*	 MOVEM GA1X
   984	001231'	402000	001033*	 SETZM POS
   985	001232'	620700	100240	 TRZ F,CHGFLG+UPDMOD+EDIT10
   986	001233'	201440	000000*	 MOVEI AS,AC1
   987	001234'	263740	000000	 POPJ P,
   988
   989				; CALCULATE NO. OF FILE BYTES TO SEND
   990	001235'	200000	000000*	SIZE: MOVE RBSIZ
   991	001236'	400040	000000	 SETZ R1,               ;REMAINDER=0
   992	001237'	602700	000020	 TRNE F,SERFLG          ;SERIAL MODE
   993				 JRST [ MULI 44         ;CALCULATE NO. OF BITS
   994				        DIVI 10         ;NO OF BYTES
   995	001240'	254000	003320'	        JRST SIZ1]
   996	001241'	220000	001060*	 IMUL BF
   997	001242'	202000	000000*	SIZ1: MOVEM CPTOP1      ;WHOLE NO. OF FILE BYTES
   998	001243'	202040	000000*	 MOVEM R1,CPTOP2        ;REMAINDER BITS
   999	001244'	602040	777777	 TRNE R1,777777         ;ANY REMAINDER
  1000	001245'	271000	000001	 ADDI 1                 ;YES
  1001	001246'	202000	000000*	 MOVEM CCR              ;NO. OF BYTES TO TRANSMIT
  1002	001247'	263740	000000	 POPJ P,
  1003
  1004				; ADJUST BINARY PARAMETERS FOR SPECIAL MODES
  1005				;       R0=MODE R1=RPARAM OR TPARAM
  1006	001250'	306000	000006	SPA: CAIN 6     ;IMAGE MODE
  1007	001251'	201040	001000	 MOVEI R1,SMODE ;YES, TREAT LIKE SERIAL MODE
  1008	001252'	306000	000005	 CAIN 5         ;KATAKANA MODE
  1009	001253'	201040	000407	 MOVEI R1,KMODE ;YES, SET BYTESIZE=9 BLOCKING=4 LEFT FILL
  1010	001254'	306000	000001	 CAIN 1         ;ASCII MODE
  1011	001255'	201040	000311	 MOVEI R1,AMODE ;YES, SET BYTESIZE=7 BLOCKING=5 LEFT FILL
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-16
DSKIO.MAC	23-DEC-86 12:29	

  1012	001256'	202040	001051*	 MOVEM R1,BPARAM ;SET BPARAM
  1013	001257'	263740	000000	 POPJ P,        ;EXIT WITH R1 TO BE STORED INTO RPARAM OR TPARAM
  1014
  1015				; UNPACK AND DECIPHER BINARY PARAMETERS
  1016
  1017	001260'	620700	000430	UPA: TRZ F,SERFLG+LEFTFG+MASKFG
  1018	001261'	200040	001256*	 MOVE R1,BPARAM
  1019	001262'	302040	000361	 CAIE R1,361            ;111+1000+1 BYTESIZE=8 BLOCKING 9 FILL=LEFT
  1020	001263'	606040	000777	 TRNN R1,777            ;TEST FOR SERIAL MODE
  1021				 JRST [ TRO F,SERFLG
  1022				        MOVEI R1,361
  1023	001264'	254000	003323'	        JRST UPA1]
  1024	001265'	306040	000360	 CAIN R1,360    ;111+1000+0 BYTESIZE=8 BLOCKING 9 FILL=RIGHT
  1025	001266'	264000	000000*	 JSR UIO
  1026	001267'	202040	001261*	UPA1: MOVEM R1,BPARAM
  1027	001270'	602040	000001	 TRNE R1,1
  1028	001271'	660700	000010	 TRO F,LEFTFG   ;LEFT FILL
  1029	001272'	135000	003326'	 LDB R0,[POINT 4,R1,34]
  1030	001273'	271000	000001	 ADDI 1
  1031	001274'	202000	001241*	 MOVEM BF       ;BLOCKING FACTOR
  1032	001275'	135000	003327'	 LDB R0,[POINT 4,R1,30]
  1033	001276'	271000	000001	 ADDI 1
  1034	001277'	202000	000000*	 MOVEM BYTESIZ
  1035	001300'	306000	000011	 CAIN 11
  1036	001301'	254000	001347'	 JRST UPA11     ;BYTESIZE 9 BETTER BE KATAKANA
  1037	001302'	306000	000010	 CAIN 10
  1038	001303'	254000	001323'	 JRST UPA10     ;BYTESIZE=8
  1039	001304'	602700	000010	 TRNE F,LEFTFG
  1040	001305'	302000	000007	 CAIE 7
  1041	001306'	264000	001266*	 JSR UIO        ;NOT LEFT FILL OR BYTESIZE=7
  1042				; BYTESIZE=7
  1043	001307'	200000	001274*	 MOVE BF
  1044	001310'	302000	000005	 CAIE 5
  1045	001311'	264000	001306*	 JSR UIO
  1046	001312'	200040	003330'	 MOVE R1,[777777,,777776]
  1047	001313'	202040	000000*	UPA2: MOVEM R1,PMSK     ;SAVE MASK
  1048	001314'	660700	000400	 TRO F,MASKFG           ;PAGE MAY BE MASKED
  1049	001315'	242000	000011	UPA3: LSH R0,11         ;CALCULATE BYTES/PAGE
  1050	001316'	202000	000000*	UPA4: MOVEM BPG         ;AND SAVE
  1051	001317'	200000	001224*	 MOVE BP                ;CALCULATE PAGE AND BYTE WITHIN PAGE
  1052	001320'	230000	001316*	 IDIV BPG
  1053	001321'	202040	001042*	 MOVEM R1,N             ;SAVE BYTE WITHIN PAGE
  1054	001322'	263740	000000	 POPJ P,                ;RETURN WITH R0=PAGE NO.
  1055	001323'	200000	001307*	UPA10: MOVE BF
  1056	001324'	306000	000005	 CAIN 5
  1057	001325'	254000	001315'	 JRST UPA3
  1058	001326'	306000	000011	 CAIN 11
  1059				 JRST [MOVEI ^D256*^D9
  1060	001327'	254000	003331'	        JRST UPA4]
  1061	001330'	301000	000005	 CAIL 5
  1062	001331'	264000	001311*	 JSR UIO
  1063	001332'	202000	000001	 MOVEM R1               ;USE BF FOR INDEXING
  1064	001333'	200041	001336'	 MOVE R1,RMSK-1(R1)
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-17
DSKIO.MAC	23-DEC-86 12:29	

  1065	001334'	602700	000010	 TRNE F,LEFTFG
  1066	001335'	200041	001342'	 MOVE R1,LMSK-1(R1)
  1067	001336'	254000	001313'	 JRST UPA2
  1068
  1069	001337'	000000	000377	RMSK: XWD 0,377         ;BLOCKING=1
  1070	001340'	000000	177777	 XWD 0,177777           ;BLOCKING=2
  1071	001341'	000077	777777	 XWD 77,777777          ;BLOCKING=3
  1072	001342'	037777	777777	 XWD 37777,777777       ;BLOCKING=4
  1073
  1074	001343'	776000	000000	LMSK: XWD 776000,0      ;BLOCKING=1
  1075	001344'	777774	000000	 XWD 777774,0           ;BLOCKING=2
  1076	001345'	777777	770000	 XWD 777777,770000      ;BLOCKING=3
  1077	001346'	777777	777760	 XWD 777777,777760      ;BLOCKING=4
  1078
  1079	001347'	200000	001323*	UPA11: MOVE BF
  1080	001350'	602700	000010	 TRNE F,LEFTFG
  1081	001351'	302000	000004	 CAIE 4
  1082	001352'	264000	001331*	 JSR UIO        ;NOT LEFT FILL OR BLOCKING = 4
  1083	001353'	254000	001315'	 JRST UPA3
  1084				DEFINE PBY(A,B),<DPB C,A
  1085				 MOVEI PS,B
  1086				 JRST PBEX
  1087				 >
  1088
  1089				; PUT ASCII OR KATAKANA BYTE
  1090	001354'	256000	000000*	PA: XCT PA1X            ;USUALLY CONTAINS CAIG C,RS
  1091	001355'	254000	001362'	 JRST PA3
  1092	001356'	260740	001402'	PA2A: PUSHJ P,PB
  1093	001357'	263740	000000	 POPJ P,
  1094	001360'	350017	000000	 AOS (P)
  1095	001361'	263740	000000	 POPJ P,
  1096	001362'	302340	000036	PA3: CAIE C,RS
  1097	001363'	254000	001372'	 JRST PA5
  1098	001364'	201340	000015	 MOVEI C,CR
  1099	001365'	660700	000100	 TRO F,IGNEOF           ;IGNORE DEPLETION OF COUNTB QUANTUM
  1100	001366'	260740	001402'	 PUSHJ P,PB             ;CANNOT SKIP
  1101	001367'	620700	000100	 TRZ F,IGNEOF
  1102	001370'	201340	000012	 MOVEI C,LF
  1103	001371'	254000	001356'	 JRST PA2A
  1104	001372'	302340	000033	PA5: CAIE C,ESC
  1105	001373'	254000	001356'	 JRST PA2A
  1106	001374'	200000	003333'	 MOVE [JRST PA6]
  1107	001375'	202000	001354*	 MOVEM PA1X
  1108	001376'	263740	000000	 POPJ P,
  1109	001377'	200000	003334'	PA6: MOVE [CAIG C,RS]
  1110	001400'	202000	001375*	 MOVEM PA1X
  1111	001401'	254000	001356'	 JRST PA2A
  1112 
  1113				; PUT BINARY BYTE
  1114	001402'	254014	000000	PB: JRST 0(PS)          ;DISPATCH TO APPROPRIATE CODE
  1115
  1116	001403'	350715	000000	L7B0: POINT 7,0(PX),6
  1117	001404'	260715	000000	L7B1: POINT 7,0(PX),13
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-18
DSKIO.MAC	23-DEC-86 12:29	

  1118	001405'	170715	000000	L7B2: POINT 7,0(PX),20
  1119	001406'	100715	000000	L7B3: POINT 7,0(PX),27
  1120	001407'	010715	000000	L7B4: POINT 7,0(PX),34
  1121
  1122				; BLOCKING = 5 BYTESIZE = 7 LEFT FILL
  1123	001410'	350000	000015	PL75B0: AOS PX
  1124	001411'	137340	001403'	 PBY L7B0,PL75B1^DPB C,L7B0
  1125	001412'	201600	001414'	 MOVEI PS,PL75B1
  1126	001413'	254000	001540'	 JRST PBEX
  1127	001414'	137340	001404'	PL75B1: PBY L7B1,PL75B2^DPB C,L7B1
  1128	001415'	201600	001417'	 MOVEI PS,PL75B2
  1129	001416'	254000	001540'	 JRST PBEX
  1130	001417'	137340	001405'	PL75B2: PBY L7B2,PL75B3^DPB C,L7B2
  1131	001420'	201600	001422'	 MOVEI PS,PL75B3
  1132	001421'	254000	001540'	 JRST PBEX
  1133	001422'	137340	001406'	PL75B3: PBY L7B3,PL75B4^DPB C,L7B3
  1134	001423'	201600	001425'	 MOVEI PS,PL75B4
  1135	001424'	254000	001540'	 JRST PBEX
  1136	001425'	137340	001407'	PL75B4: DPB C,L7B4
  1137	001426'	201600	001410'	 MOVEI PS,PL75B0
  1138	001427'	254000	001536'	 JRST PBEX1
  1139
  1140				; BLOCKING = 9 BYTESIZE = 8 LEFT FILL SERIAL
  1141	001430'	350000	000015	PL89B0: AOS PX
  1142	001431'	137340	001547'	 PBY L8B0,PL89B1^DPB C,L8B0
  1143	001432'	201600	001434'	 MOVEI PS,PL89B1
  1144	001433'	254000	001540'	 JRST PBEX
  1145	001434'	137340	001550'	PL89B1: PBY L8B1,PL89B2^DPB C,L8B1
  1146	001435'	201600	001437'	 MOVEI PS,PL89B2
  1147	001436'	254000	001540'	 JRST PBEX
  1148	001437'	137340	001551'	PL89B2: PBY L8B2,PL89B3^DPB C,L8B2
  1149	001440'	201600	001442'	 MOVEI PS,PL89B3
  1150	001441'	254000	001540'	 JRST PBEX
  1151	001442'	137340	001552'	PL89B3: PBY L8B3,PL89B4^DPB C,L8B3
  1152	001443'	201600	001445'	 MOVEI PS,PL89B4
  1153	001444'	254000	001540'	 JRST PBEX
  1154	001445'	200000	000007	PL89B4: MOVE C
  1155	001446'	242340	777774	 LSH C,-4
  1156	001447'	137340	001553'	 DPB C,L8B4A
  1157	001450'	202000	000007	 MOVEM C
  1158	001451'	377000	000000*	 SOSG PWCNT
  1159	001452'	260740	002025'	 PUSHJ P,NSBO
  1160	001453'	350000	000015	 AOS PX
  1161	001454'	137340	001554'	 PBY L8B4B,PL89B5^DPB C,L8B4B
  1162	001455'	201600	001457'	 MOVEI PS,PL89B5
  1163	001456'	254000	001540'	 JRST PBEX
  1164	001457'	137340	001572'	PL89B5: PBY R8B0,PL89B6^DPB C,R8B0
  1165	001460'	201600	001462'	 MOVEI PS,PL89B6
  1166	001461'	254000	001540'	 JRST PBEX
  1167	001462'	137340	001573'	PL89B6: PBY R8B1,PL89B7^DPB C,R8B1
  1168	001463'	201600	001465'	 MOVEI PS,PL89B7
  1169	001464'	254000	001540'	 JRST PBEX
  1170	001465'	137340	001574'	PL89B7: PBY R8B2,PL89B8^DPB C,R8B2
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-19
DSKIO.MAC	23-DEC-86 12:29	

  1171	001466'	201600	001470'	 MOVEI PS,PL89B8
  1172	001467'	254000	001540'	 JRST PBEX
  1173	001470'	137340	001575'	PL89B8: DPB C,R8B3
  1174	001471'	201600	001430'	 MOVEI PS,PL89B0
  1175	001472'	254000	001536'	 JRST PBEX1
  1176
  1177				; BLOCKING = 4 BYTESIZE = 9 LEFT FILL KATAKANA
  1178	001473'	331115	000000	L9B0: POINT 9,0(PX),8
  1179	001474'	221115	000000	L9B1: POINT 9,0(PX),17
  1180	001475'	111115	000000	L9B2: POINT 9,0(PX),26
  1181	001476'	001115	000000	L9B3: POINT 9,0(PX),35
  1182	001477'	350000	000015	PL94B0: AOS PX
  1183	001500'	137340	001473'	 PBY L9B0,PL94B1^DPB C,L9B0
  1184	001501'	201600	001503'	 MOVEI PS,PL94B1
  1185	001502'	254000	001540'	 JRST PBEX
  1186	001503'	137340	001474'	PL94B1: PBY L9B1,PL94B2^DPB C,L9B1
  1187	001504'	201600	001506'	 MOVEI PS,PL94B2
  1188	001505'	254000	001540'	 JRST PBEX
  1189	001506'	137340	001475'	PL94B2: PBY L9B2,PL94B3^DPB C,L9B2
  1190	001507'	201600	001511'	 MOVEI PS,PL94B3
  1191	001510'	254000	001540'	 JRST PBEX
  1192	001511'	137340	001476'	PL94B3: DPB C,L9B3
  1193	001512'	201600	001477'	 MOVEI PS,PL94B0
  1194	001513'	254000	001536'	 JRST PBEX1
  1195
  1196				; BLOCKING = 5 BYTESIZE = 8 LEFT FILL
  1197				;       NOTE BYTESIZE IS ACTUALLY 7 EXCEPT ON BYTE 4, AND
  1198				;       THAT BYTE IS ROTATED 1 BIT TO FAVOR COMPRESSION
  1199	001514'	350000	000015	PL85B0: AOS PX
  1200	001515'	137340	001403'	 PBY L7B0,PL85B1^DPB C,L7B0
  1201	001516'	201600	001520'	 MOVEI PS,PL85B1
  1202	001517'	254000	001540'	 JRST PBEX
  1203	001520'	137340	001404'	PL85B1: PBY L7B1,PL85B2^DPB C,L7B1
  1204	001521'	201600	001523'	 MOVEI PS,PL85B2
  1205	001522'	254000	001540'	 JRST PBEX
  1206	001523'	137340	001405'	PL85B2: PBY L7B2,PL85B3^DPB C,L7B2
  1207	001524'	201600	001526'	 MOVEI PS,PL85B3
  1208	001525'	254000	001540'	 JRST PBEX
  1209	001526'	137340	001406'	PL85B3: PBY L7B3,PL85B4^DPB C,L7B3
  1210	001527'	201600	001531'	 MOVEI PS,PL85B4
  1211	001530'	254000	001540'	 JRST PBEX
  1212	001531'	242340	000001	PL85B4: LSH C,1
  1213	001532'	602340	000400	 TRNE C,400
  1214	001533'	431340	000401	 XORI C,401
  1215	001534'	137340	001575'	 DPB C,R8B3
  1216	001535'	201600	001514'	 MOVEI PS,PL85B0
  1217	001536'	377000	001451*	PBEX1: SOSG PWCNT
  1218	001537'	260740	002025'	 PUSHJ P,NSBO           ;NEXT SEQUENTIAL BLOCK OUT
  1219	001540'	373000	000537*	PBEX: SOSLE COUNTB           ;IS QUANTUM EXHAUSTED
  1220	001541'	263740	000000	 POPJ P,                ;NO, NON-SKIP RETURN FROM PB
  1221	001542'	602700	000100	 TRNE F,IGNEOF          ;ARE WE IGNORING QUANTUM
  1222	001543'	263740	000000	 POPJ P,                ;YES
  1223	001544'	350017	000000	 AOS (P)                ;NO
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-20
DSKIO.MAC	23-DEC-86 12:29	

  1224	001545'	201600	001663'	 MOVEI PS,PBINIT
  1225	001546'	263740	000000	 POPJ P,
  1226
  1227				; BLOCKING = 4 BYTESIZE = 8 LEFT FILL
  1228	001547'	341015	000000	L8B0: POINT 8,0(PX),7
  1229	001550'	241015	000000	L8B1: POINT 8,0(PX),15
  1230	001551'	141015	000000	L8B2: POINT 8,0(PX),23
  1231	001552'	041015	000000	L8B3: POINT 8,0(PX),31
  1232	001553'	000415	000000	L8B4A: POINT 4,0(PX),35
  1233	001554'	400415	000000	L8B4B: POINT 4,0(PX),3
  1234	001555'	350000	000015	PL8B0: AOS PX
  1235	001556'	137340	001547'	 PBY L8B0,PL8B1^DPB C,L8B0
  1236	001557'	201600	001561'	 MOVEI PS,PL8B1
  1237	001560'	254000	001540'	 JRST PBEX
  1238	001561'	137340	001550'	PL8B1: PBY L8B1,PL8B2^DPB C,L8B1
  1239	001562'	201600	001564'	 MOVEI PS,PL8B2
  1240	001563'	254000	001540'	 JRST PBEX
  1241	001564'	137340	001551'	PL8B2: PBY L8B2,PL8B3^DPB C,L8B2
  1242	001565'	201600	001567'	 MOVEI PS,PL8B3
  1243	001566'	254000	001540'	 JRST PBEX
  1244	001567'	137340	001552'	PL8B3: DPB C,L8B3
  1245	001570'	201600	001555'	 MOVEI PS,PL8B0
  1246	001571'	254000	001536'	 JRST PBEX1
  1247
  1248				; BLOCKING = 4 BYTESIZE = 8 RIGHT FILL
  1249	001572'	301015	000000	R8B0: POINT 8,0(PX),11
  1250	001573'	201015	000000	R8B1: POINT 8,0(PX),19
  1251	001574'	101015	000000	R8B2: POINT 8,0(PX),27
  1252	001575'	001015	000000	R8B3: POINT 8,0(PX),35
  1253	001576'	350000	000015	PR8B0: AOS PX
  1254	001577'	137340	001572'	 PBY R8B0,PR8B1^DPB C,R8B0
  1255	001600'	201600	001602'	 MOVEI PS,PR8B1
  1256	001601'	254000	001540'	 JRST PBEX
  1257	001602'	137340	001573'	PR8B1: PBY R8B1,PR8B2^DPB C,R8B1
  1258	001603'	201600	001605'	 MOVEI PS,PR8B2
  1259	001604'	254000	001540'	 JRST PBEX
  1260	001605'	137340	001574'	PR8B2: PBY R8B2,PR8B3^DPB C,R8B2
  1261	001606'	201600	001610'	 MOVEI PS,PR8B3
  1262	001607'	254000	001540'	 JRST PBEX
  1263	001610'	137340	001575'	PR8B3: DPB C,R8B3
  1264	001611'	201600	001576'	 MOVEI PS,PR8B0
  1265	001612'	254000	001536'	 JRST PBEX1
  1266
  1267				; BLOCKING = 3 BYTESIZE = 8 LEFT FILL
  1268	001613'	350000	000015	PL83B0: AOS PX
  1269	001614'	137340	001547'	 PBY L8B0,PL83B1^DPB C,L8B0
  1270	001615'	201600	001617'	 MOVEI PS,PL83B1
  1271	001616'	254000	001540'	 JRST PBEX
  1272	001617'	137340	001550'	PL83B1: PBY L8B1,PL83B2^DPB C,L8B1
  1273	001620'	201600	001622'	 MOVEI PS,PL83B2
  1274	001621'	254000	001540'	 JRST PBEX
  1275	001622'	137340	001551'	PL83B2: DPB C,L8B2
  1276	001623'	201600	001613'	 MOVEI PS,PL83B0
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-21
DSKIO.MAC	23-DEC-86 12:29	

  1277	001624'	254000	001536'	 JRST PBEX1
  1278
  1279				; BLOCKING = 3 BYTESIZE = 8 RIGHT FILL
  1280	001625'	350000	000015	PR83B0: AOS PX
  1281	001626'	137340	001573'	 PBY R8B1,PR83B1^DPB C,R8B1
  1282	001627'	201600	001631'	 MOVEI PS,PR83B1
  1283	001630'	254000	001540'	 JRST PBEX
  1284	001631'	137340	001574'	PR83B1: PBY R8B2,PR83B2^DPB C,R8B2
  1285	001632'	201600	001634'	 MOVEI PS,PR83B2
  1286	001633'	254000	001540'	 JRST PBEX
  1287	001634'	137340	001575'	PR83B2: DPB C,R8B3
  1288	001635'	201600	001625'	 MOVEI PS,PR83B0
  1289	001636'	254000	001536'	 JRST PBEX1
  1290
  1291				; BLOCKING = 2 BYTESIZE = 8 LEFT FILL
  1292	001637'	350000	000015	PL82B0: AOS PX
  1293	001640'	137340	001547'	 PBY L8B0,PL82B1^DPB C,L8B0
  1294	001641'	201600	001643'	 MOVEI PS,PL82B1
  1295	001642'	254000	001540'	 JRST PBEX
  1296	001643'	137340	001550'	PL82B1: DPB C,L8B1
  1297	001644'	201600	001637'	 MOVEI PS,PL82B0
  1298	001645'	254000	001536'	 JRST PBEX1
  1299
  1300				; BLOCKING = 2 BYTESIZE = 8 RIGHT FILL
  1301	001646'	350000	000015	PR82B0: AOS PX
  1302	001647'	137340	001574'	 PBY R8B2,PR82B1^DPB C,R8B2
  1303	001650'	201600	001652'	 MOVEI PS,PR82B1
  1304	001651'	254000	001540'	 JRST PBEX
  1305	001652'	137340	001575'	PR82B1: DPB C,R8B3
  1306	001653'	201600	001646'	 MOVEI PS,PR82B0
  1307	001654'	254000	001536'	 JRST PBEX1
  1308
  1309				; BLOCKING = 1 BYTESIZE = 8 LEFT FILL
  1310	001655'	350000	000015	PL81B0: AOS PX
  1311	001656'	137340	001547'	 DPB C,L8B0
  1312	001657'	254000	001536'	 JRST PBEX1
  1313
  1314				; BLOCKING = 1 BYTESIZE = 8 RIGHT FILL
  1315	001660'	350000	000015	PR81B0: AOS PX
  1316	001661'	137340	001575'	 DPB C,R8B3
  1317	001662'	254000	001536'	 JRST PBEX1
  1318
  1319	001663'	260740	001260'	PBINIT: PUSHJ P,UPA     ;GET BLOCK NO.
  1320	001664'	260740	002034'	 PUSHJ P,NEWBLK         ;WRITE OUT OLD BLOCK, GET NEW
  1321	001665'	201640	002121'	 MOVEI PX,BUFFER-1      ;NEWBLK WILL NOT WRITE PAGE IF IT IS THE SAME.
  1322				;                       MARK THE PAGE CLEAN ANYWAY AS IT WILL BE MARKED
  1323				;                       DIRTY BY THE TIME WE GET THROUGH PBINIT.
  1324	001666'	200000	001321*	 MOVE N                 ;N= NO. OF BYTES INTO PAGE
  1325	001667'	602700	000020	 TRNE F,SERFLG
  1326				 JRST [ LSH R0,3        ;CALCLULATE BIT POSITION IN PAGE
  1327				        IDIVI 44
  1328				        ADDM PX
  1329				        SUBI 1000
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-22
DSKIO.MAC	23-DEC-86 12:29	

  1330				        MOVNM PWCNT
  1331				        MOVE N
  1332				        IDIVI 11        ;MOD 9
  1333				        MOVE PS,SERTAB(R1)
  1334	001670'	254000	003335'	        JRST PBI1]
  1335	001671'	230000	001347*	 IDIV BF                ;DIVIDE BY BLOCKING FACTOR
  1336	001672'	272000	000015	 ADDM PX                ;POINT TO CORRECT WORD IN PAGE
  1337	001673'	275000	001000	 SUBI 1000              ;CALCULATE WORDS REMAINING (-)
  1338	001674'	212000	001536*	 MOVNM PWCNT            ;AND SAVE (+)
  1339	001675'	200100	001267*	 MOVE R2,BPARAM
  1340	001676'	602100	000400	 TRNE R2,400            ;CHECK FOR BYTESIZE=9 (KATAKANA)
  1341				 JRST [MOVE PS,PKTAB(R1)
  1342	001677'	254000	003346'	        JRST PBI1]
  1343	001700'	405100	000041	 ANDI R2,41             ;EXTRACT FILL AND LOW ORDER BIT OF BYTESIZE
  1344	001701'	622100	000040	 TRZE R2,40             ;IF LOW ORDER BIT IS ON BYTESIZE=8
  1345	001702'	660100	000002	 TRO R2,2
  1346	001703'	242100	000003	 LSH R2,3
  1347	001704'	270100	001671*	 ADD R2,BF
  1348	001705'	270042	001712'	 ADD R1,PBTAB(R2)       ;INDEX INTO APPROPRIATE TABLE
  1349	001706'	200601	000000	 MOVE PS,0(R1)          ;INITIAL STATE
  1350	001707'	603600	400000	PBI1: TLNE PS,IX             ;SHOULD WE INCREMENT PX
  1351	001710'	350000	000015	 AOS PX                 ;YES
  1352	001711'	254014	000000	 JRST 0(PS)
  1353
  1354			400000	IX=400000       ;INCREMENT PX FIRST
  1355				; INDEX INTO THIS TABLE IS XYZZZ
  1356				;       X= BYTESIZE 8
  1357				;       Y= LEFT FILL
  1358				;       ZZZ= BLOCKING
  1359	001712'	000000	001752'	PBTAB: EXP P7L5,P7L5,P7L5,P7L5,P7L5,P7L5,P7L5,P7L5
	001713'	000000	001752'
	001714'	000000	001752'
	001715'	000000	001752'
	001716'	000000	001752'
	001717'	000000	001752'
	001720'	000000	001752'
	001721'	000000	001752'
  1360	001722'	000000	001752'	 EXP P7L5,P7L5,P7L5,P7L5,P7L5,P7L5,P7L5,P7L5
	001723'	000000	001752'
	001724'	000000	001752'
	001725'	000000	001752'
	001726'	000000	001752'
	001727'	000000	001752'
	001730'	000000	001752'
	001731'	000000	001752'
  1361	001732'	000000	001764'	 EXP P8R4,P8R1,P8R2,P8R3,P8R4,P8R4,P8R4,P8R4
	001733'	000000	002006'
	001734'	000000	002002'
	001735'	000000	001774'
	001736'	000000	001764'
	001737'	000000	001764'
	001740'	000000	001764'
	001741'	000000	001764'
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-23
DSKIO.MAC	23-DEC-86 12:29	

  1362	001742'	000000	001770'	 EXP P8L4,P8L1,P8L2,P8L3,P8L4,P8L5,P8L4,P8L4
	001743'	000000	002007'
	001744'	000000	002004'
	001745'	000000	001777'
	001746'	000000	001770'
	001747'	000000	001757'
	001750'	000000	001770'
	001751'	000000	001770'
  1363	001752'	000000	001410'	P7L5: EXP PL75B0
  1364	001753'	400007	001414'	 XWD IX+7,PL75B1
  1365	001754'	400016	001417'	 XWD IX+16,PL75B2
  1366	001755'	400025	001422'	 XWD IX+25,PL75B3
  1367	001756'	400034	001425'	 XWD IX+34,PL75B4
  1368	001757'	000000	001514'	P8L5: EXP PL85B0
  1369	001760'	400007	001520'	 XWD IX+7,PL85B1
  1370	001761'	400016	001523'	 XWD IX+16,PL85B2
  1371	001762'	400025	001526'	 XWD IX+25,PL85B3
  1372	001763'	400034	001531'	 XWD IX+34,PL85B4
  1373	001764'	000000	001576'	P8R4: EXP PR8B0
  1374	001765'	400014	001602'	 XWD IX+14,PR8B1
  1375	001766'	400024	001605'	 XWD IX+24,PR8B2
  1376	001767'	400034	001610'	 XWD IX+34,PR8B3
  1377	001770'	000000	001555'	P8L4: EXP PL8B0
  1378	001771'	400010	001561'	 XWD IX+10,PL8B1
  1379	001772'	400020	001564'	 XWD IX+20,PL8B2
  1380	001773'	400030	001567'	 XWD IX+30,PL8B3
  1381	001774'	000000	001625'	P8R3: EXP PR83B0
  1382	001775'	400024	001631'	 XWD IX+24,PR83B1
  1383	001776'	400034	001634'	 XWD IX+34,PR83B2
  1384	001777'	000000	001613'	P8L3: EXP PL83B0
  1385	002000'	400010	001617'	 XWD IX+10,PL83B1
  1386	002001'	400020	001622'	 XWD IX+20,PL83B2
  1387	002002'	000000	001646'	P8R2: EXP PR82B0
  1388	002003'	400034	001652'	 XWD IX+34,PR82B1
  1389	002004'	000000	001637'	P8L2: EXP PL82B0
  1390	002005'	400010	001643'	 XWD IX+10,PL82B1
  1391	002006'	000000	001660'	P8R1: EXP PR81B0
  1392	002007'	000000	001655'	P8L1: EXP PL81B0
  1393
  1394				;KATAKANA MODE
  1395	002010'	000000	001477'	PKTAB: EXP PL94B0
  1396	002011'	400011	001503'	 XWD IX+11,PL94B1
  1397	002012'	400022	001506'	 XWD IX+22,PL94B2
  1398	002013'	400033	001511'	 XWD IX+33,PL94B3
  1399
  1400				;SERIAL MODE
  1401	002014'	000000	001430'	SERTAB: EXP PL89B0
  1402	002015'	400000	001434'	 XWD IX,PL89B1
  1403	002016'	400000	001437'	 XWD IX,PL89B2
  1404	002017'	400000	001442'	 XWD IX,PL89B3
  1405	002020'	400000	001445'	 XWD IX,PL89B4
  1406	002021'	400000	001457'	 XWD IX,PL89B5
  1407	002022'	400000	001462'	 XWD IX,PL89B6
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-24
DSKIO.MAC	23-DEC-86 12:29	

  1408	002023'	400000	001465'	 XWD IX,PL89B7
  1409	002024'	400000	001470'	 XWD IX,PL89B8
  1410
  1411				; ADVANCE TO NEXT SEQUENTIAL BLOCK NO.
  1412	002025'	200000	001223*	NSBO: MOVE BLKNO
  1413	002026'	271000	000001	 ADDI 1
  1414	002027'	260740	002034'	 PUSHJ P,NEWBLK
  1415	002030'	201000	001000	 MOVEI 1000
  1416	002031'	202000	001674*	 MOVEM PWCNT
  1417	002032'	201640	002121'	 MOVEI PX,BUFFER-1
  1418	002033'	263740	000000	 POPJ P,
  1419
  1420				; READ BLOCK IN R0.  WRITE OUT OLD BLOCK FIRST, IF CHANGED.
  1421	002034'	202000	001215*	NEWBLK: MOVEM TMP1      ;SAVE DESIRED BLOCK NO.
  1422	002035'	312000	002025*	 CAME BLKNO             ;SKIP WRITE IF SAME PAGE (LEAVE PAGE DIRTY)
  1423	002036'	260740	003125'	 PUSHJ P,WRBLK          ;WRITE OUT OLD BLOCK, IF CHANGED
  1424	002037'	200000	002034*	 MOVE TMP1
  1425	002040'	250000	002035*	 EXCH BLKNO
  1426	002041'	316000	002037*	 CAMN TMP1
  1427	002042'	263740	000000	 POPJ P,                ;SAME BLOCK
  1428	002043'	602700	000040	 TRNE F,UPDMOD          ;ARE WE UPDATING AN OLD FILE
  1429	002044'	260740	002046'	 PUSHJ P,RBZ            ;YES, READ FORMER CONTENTS
  1430	002045'	263740	000000	 POPJ P,
  1431
  1432				; READ PAGE NO. IN "BLKNO".  NOTE PAGE 0= BLOCKS 1 THRU 4
  1433	002046'	200040	002040*	RBZ: MOVE R1,BLKNO
  1434	002047'	242040	000002	 LSH R1,2
  1435	002050'	074041	000001	 USETI FIL,1(R1)
  1436	002051'	066040	003123'	 INPUT FIL,RPAGE
  1437	002052'	062040	000001	 GETSTS FIL,R1
  1438	002053'	606040	760000	 TRNN R1,760000
  1439	002054'	254000	002075'	 JRST EOF3
  1440	002055'	602040	740000	 TRNE R1,740000
  1441	002056'	264000	000503*	 JSR IOERR
  1442	002057'	421040	760000	 ANDCMI R1,760000 ;RESET ERROR BITS
  1443	002060'	060041	000000	 SETSTS FIL,(R1)
  1444	002061'	200040	001235*	 MOVE R1,RBSIZ
  1445				; DIVIDE BY NO. OF WORDS/PAGE = 2^9
  1446	002062'	242040	777767	 LSH R1,-11
  1447	002063'	312040	002046*	 CAME R1,BLKNO
  1448	002064'	254000	002116'	 JRST EOF2
  1449	002065'	242040	000011	 LSH R1,11
  1450	002066'	274040	002061*	 SUB R1,RBSIZ
  1451	002067'	210040	000001	 MOVN R1,R1
  1452	002070'	271040	002122'	EOF1: ADDI R1,BUFFER
  1453	002071'	402001	000000	 SETZM 0(R1)
  1454	002072'	504040	000001	 HRL R1,R1
  1455	002073'	350000	000001	 AOS R1         ;FORM BLT TABLE
  1456	002074'	251040	003121'	 BLT R1,BUFFER+777
  1457				; IN UPDATE MODE READ MASK UNWANTED BITS
  1458	002075'	602700	000400	EOF3: TRNE F,MASKFG     ;DO WE NEED MASK
  1459	002076'	606700	000040	 TRNN F,UPDMOD  ;YES, ARE WE IN UPDATE MODE
  1460	002077'	263740	000000	 POPJ P,        ;NO TO EITHER
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-25
DSKIO.MAC	23-DEC-86 12:29	

  1461	002100'	261740	000002	 PUSH P,R2      ;SAVE R2 ON THE STACK
  1462	002101'	200040	001313*	 MOVE R1,PMSK   ;LOAD MASK
  1463	002102'	200000	000001	 MOVE R1
  1464	002103'	430000	003317'	 XOR [-1]
  1465	002104'	200100	003350'	 MOVE R2,[-1000,,BUFFER]
  1466	002105'	612002	000000	EOF4: TDNE R0,0(R2)  ;TEST SPECIFIED BITS
  1467	002106'	254000	002112'	 JRST EOF6
  1468	002107'	253100	002105'	 AOBJN R2,EOF4
  1469	002110'	262740	000002	EOF5: POP P,R2
  1470	002111'	263740	000000	 POPJ P,
  1471	002112'	660700	000200	EOF6: TRO F,CHGFLG
  1472	002113'	406042	000000	 ANDM R1,0(R2)  ;TURN OFF UNWANTED BITS
  1473	002114'	253100	002105'	 AOBJN R2,EOF4
  1474	002115'	254000	002110'	 JRST EOF5
  1475	002116'	311040	002063*	EOF2: CAML R1,BLKNO
  1476	002117'	264000	000000*	 JSR PEW
  1477	002120'	400040	000000	 SETZ R1,
  1478	002121'	254000	002070'	 JRST EOF1
  1479	002122'			BUFFER: BLOCK 1000
  1480	003122'	000000	000000	 0      ;SOMETIMES OVERWRITTEN BY BLT
  1481	003123'	777000	002121'	RPAGE: IOWD 1000,BUFFER
  1482	003124'	000000	000000	 0
  1483
  1484				; WRITE OUT OLD BLOCK IF CHANGED
  1485	003125'	550040	000015	WRBLK: HRRZ R1,PX
  1486	003126'	307040	002121'	 CAIG R1,BUFFER-1       ;WAS PAGE WRITTEN INTO
  1487	003127'	602700	000200	 TRNE F,CHGFLG          ;OR ALTERED BY RBZ
  1488	003130'	254000	003132'	 JRST .+2               ;YES TO EITHER OF ABOVE
  1489	003131'	263740	000000	 POPJ P,                ;PAGE NOT CHANGED
  1490	003132'	200040	002116*	 MOVE R1,BLKNO
  1491	003133'	242040	000002	 LSH R1,2
  1492	003134'	075041	000001	 USETO FIL,1(R1)
  1493	003135'	067040	003123'	 OUTPUT FIL,RPAGE
  1494	003136'	201640	002121'	 MOVEI PX,BUFFER-1
  1495	003137'	620700	000200	 TRZ F,CHGFLG
  1496	003140'	200040	003132*	 MOVE R1,BLKNO
  1497	003141'	271040	000001	 ADDI R1,1
  1498	003142'	242040	000011	 LSH R1,11
  1499	003143'	313040	000000*	 CAMLE R1,ORBSIZ
  1500	003144'	202040	003143*	 MOVEM R1,ORBSIZ        ;UPDATE ORBSIZ - MAXIMUM FILE LENGTH (WORDS)
  1501	003145'	063040	740000	 STATZ FIL,740000
  1502	003146'	264000	000000*	 JSR IOERW
  1503	003147'	263740	000000	 POPJ P,
  1504
  1505				; INITIALIZE RECEIVERS AND FILE ROUTINES
  1506
  1507	003150'	260740	000000*	IRF: PUSHJ P,SINIT
  1508	003151'	200000	003351'	 MOVE [PUSHJ P,BGC]
  1509	003152'	202000	000000*	 MOVEM AAR1X
  1510	003153'	200000	003352'	 MOVE [JRST AAR1]
  1511	003154'	202000	000000*	 MOVEM ACR1X
  1512	003155'	200000	003351'	 MOVE [PUSHJ P,BGC]
  1513	003156'	202000	000000*	 MOVEM BCR1X
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-26
DSKIO.MAC	23-DEC-86 12:29	

  1514	003157'	200000	003317'	 MOVE [-1]
  1515	003160'	202000	003140*	 MOVEM BLKNO
  1516	003161'	402000	001317*	 SETZM BP
  1517	003162'	402000	001225*	 SETZM BP0
  1518	003163'	201600	001663'	 MOVEI PS,PBINIT
  1519	003164'	200000	003334'	 MOVE [CAIG C,RS]
  1520	003165'	202000	001400*	 MOVEM PA1X
  1521	003166'	620700	000340	 TRZ F,IGNEOF+CHGFLG+UPDMOD
  1522	003167'	263740	000000	 POPJ P,
  1523
  1524
  1525				COMMENT ;
  1526				TOTAL FILE BITS = CPTOP1*10+CPTOP2
  1527				CPTOP1 - FILE SIZE IN 8-BIT BYTES
  1528				CPTOP2 - RESIDUAL BITS WHEN FILE SIZE EXPRESSED IN 8-BIT BYTES
  1529				TOTAL FILE BITS = CPTOP3*44000+CPTOP4+44+CPTOP5
  1530				RBSIZ - FILE SIZE IN 36-BIT WORDS
  1531				CPTOP3 - FILE SIZE IN PAGES
  1532				CPTOP4 - RESIDUAL WORDS WHEN FILE SIZE EXPRESSED IN PAGES
  1533				CPTOP5 - RESIDUAL BITS WHEN FILE SIZE EXPRESSED IN 36-BIT WORDS
  1534				;
  1535	003170'	200000	001242*	TRUNCATE: MOVE CPTOP1
  1536	003171'	602700	000020	 TRNE F,SERFLG          ;SERIAL MODE
  1537				 JRST [LSH R0,3         ;YES, CALCULATE TOTAL BITS SENT
  1538				        ADD CPTOP2
  1539				        IDIVI 44        ;GET WORDS AND BITS
  1540				        MOVEM RBSIZ
  1541	003172'	254000	003353'	        JRST TRUNC1]
  1542	003173'	230000	001704*	 IDIV R0,BF
  1543	003174'	202000	002066*	 MOVEM RBSIZ           ;LENGTH OF FILE IN WORDS
  1544	003175'	200100	001675*	 MOVE R2,BPARAM
  1545	003176'	602100	000400	 TRNE R2,400            ;TEST FOR KATAKANA
  1546				 JRST [LDB R1,[POINT 6,PKTAB(R1),17]
  1547	003177'	254000	003361'	        JRST TRUNC1]
  1548	003200'	405100	000041	 ANDI R2,41             ;EXTRACT FILL AND LOW ORDER BIT OF BYTESIZE
  1549	003201'	622100	000040	 TRZE R2,40             ;IF LOW ORDER BIT IS ON, BYTESIZE=8
  1550	003202'	660100	000002	 TRO R2,2
  1551	003203'	242100	000003	 LSH R2,3
  1552	003204'	270100	003173*	 ADD R2,BF
  1553	003205'	270042	001712'	 ADD R1,PBTAB(R2)       ;MAKE POINTER TO APPROPRIATE TABLE ENTRY
  1554	003206'	135040	003363'	 LDB R1,[POINT 6,0(R1),17]
  1555	003207'	202040	000000*	TRUNC1: MOVEM R1,CPTOP5 ;REMAINING BITS
  1556	003210'	200000	003174*	 MOVE RBSIZ
  1557	003211'	405000	000777	 ANDI 777
  1558	003212'	202000	000000*	 MOVEM CPTOP4   ;WORDS
  1559	003213'	200000	003210*	 MOVE RBSIZ
  1560	003214'	242000	777767	 LSH R0,-11
  1561	003215'	202000	000000*	 MOVEM CPTOP3   ;PAGES
  1562
  1563				;BEGINNING OF TRUNCATE CODE.  TEST FOR FILE END ON PAGE BOUNDARY FIRST.
  1564
  1565	003216'	336000	003212*	 SKIPN CPTOP4
  1566	003217'	332000	003207*	 SKIPE CPTOP5
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 1-27
DSKIO.MAC	23-DEC-86 12:29	

  1567	003220'	254000	003240'	 JRST TRUNC6
  1568	003221'	254000	003222'	 JRST TRUNC3
  1569
  1570				;FILE ENDS ON PAGE BOUNDARY
  1571	003222'	260740	003125'	TRUNC3: PUSHJ P,WRBLK   ;FLUSH BUFFER (ADVANCE ORBSIZ, POSSIBLY)
  1572	003223'	070040	000000	 CLOSE FIL,
  1573	003224'	201000	200000	 MOVEI R0,200000        ;BIT 19 - TAKE RBALC IN WORDS
  1574	003225'	436000	000000*	 IORM R0,RBCNT          ;SET BIT FOR EXTENDED RENAME
  1575	003226'	200000	003213*	 MOVE RBSIZ
  1576	003227'	202000	000000*	 MOVEM RBALC
  1577	003230'	402000	000000*	 SETZM RBEST
  1578	003231'	204000	000000*	 MOVS RBPRV
  1579	003232'	421000	777000	 ANDCMI 777000
  1580	003233'	435000	047000	 IORI 047000    ;ALL RD NO
  1581	003234'	206000	003231*	 MOVSM RBPRV
  1582	003235'	055040	003225*	 RENAME FIL,RBCNT       ;TRUNCATE TO RBSIZ WORDS
  1583	003236'	264000	000000*	 JSR ERASE
  1584	003237'	254000	003264'	 JRST TRUFIN
  1585
  1586				;POSITION FILE TO LAST PAGE.
  1587
  1588	003240'	200000	003215*	TRUNC6: MOVE CPTOP3
  1589	003241'	260740	002034'	 PUSHJ P,NEWBLK         ;POSITION TO LAST PAGE IN FILE
  1590	003242'	200100	003217*	 MOVE R2,CPTOP5
  1591	003243'	200040	003216*	        MOVE R1,CPTOP4
  1592	003244'	307100	000000	        CAIG R2,0
  1593	003245'	254000	003255'	        JRST TRUNC7     ;NO RESIDUAL BITS
  1594	003246'	350000	003226*	        AOS RBSIZ       ;ADVANCE RBSIZ TO CONTAIN LAST FEW BITS
  1595	003247'	350000	003243*	        AOS CPTOP4      ;ADVANCE CPTOP4 TO WRITE 1 EXTRA WORD
  1596	003250'	210100	000002	        MOVN R2,R2      ;NEGATE NO. OF BITS
  1597	003251'	515000	400000	        HRLZI R0,400000
  1598	003252'	240002	000001	        ASH R0,1(R2)    ;CREATE MASK
  1599	003253'	406001	002122'	        ANDM R0,BUFFER(R1)
  1600	003254'	200040	003247*	        MOVE R1,CPTOP4
  1601	003255'	660700	000200	TRUNC7: TRO F,CHGFLG    ;MARK PAGE CHANGED
  1602	003256'	271040	002122'	        ADDI R1,BUFFER
  1603	003257'	402001	000000	        SETZM (R1)      ;ZERO REMAINDER OF PAGE
  1604	003260'	504040	000001	        HRL R1,R1
  1605	003261'	350000	000001	        AOS R1
  1606	003262'	251040	003121'	        BLT R1,BUFFER+777
  1607	003263'	254000	003222'	        JRST TRUNC3
  1608	003264'	620700	000200	TRUFIN: TRZ F,CHGFLG
  1609	003265'	201640	002121'	 MOVEI PX,BUFFER-1
  1610	003266'	063040	740000	 STATZ FIL,740000
  1611	003267'	264000	003146*	 JSR IOERW
  1612	003270'	263740	000000	 POPJ P,
  1613
  1614				 END
  1615
NO ERRORS DETECTED
PROGRAM BREAK IS 003364
3K CORE USED
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 2
DSKIO.MAC	23-DEC-86 12:29		SYMBOL TABLE

AAR1		003352'	EXT	CR1		000455'		GA		000001'	ENT	GR8B3		000746'	
AAR1X		003152'	EXT	CR2		000472'		GA1X		001230'	EXT	GS		000012	
ABTCOD		000107	SIN	CRLF		000476'		GB		000504'	ENT	GSETAB		001170'	
AC1		001233'	EXT	DATA		000407'		GBI1		001063'		GWCNT		003310'	EXT
ACHAR		003271'		DEFFLG		001000	SPD	GBI2		001042'		GX		000013	
ACKCOD		000112	SPD	DNRCOD		000101	SPD	GBINIT		001027'		HSW		000002	SPD
ACMCOD		000111	SPD	EDIT10		100000	SPD	GBTAB		001066'		HT		000011	SPD
ACR1X		003154'	EXT	EM		000031	SIN	GEX		000701'		HT1		000434'	
ACRCAP		000100	SIN	EOB		000507'		GEX1		000700'		HT2		000444'	
AMODE		000311	SIN	EOF1		002070'		GEX9		000651'		HT3		000452'	
AS		000011		EOF2		002116'		GKTAB		001164'		IBIO		000034	SPD
ASCII		000002	SIN	EOF3		002075'		GL75B0		000517'		IGNEOF		000100	SPD
ASCSTG		000052	SPD	EOF4		002105'		GL75B1		000547'		IGNR		000000'	
ASCTAB		000005'		EOF5		002110'		GL75B2		000552'		IICHS		000001	SPD
AUTO		000001	SIN	EOF6		002112'		GL75B3		000555'		IICHW		000000	SPD
BADCOD		000145	SPD	EORCOD		000134	SPD	GL75B4		000560'		ILL8		000502'	
BCMCOD		000110	SPD	EOTCOD		000135	SPD	GL81B0		001017'		ILL9		000503'	
BCR1X		003156'	EXT	ERASCD		000150	SPD	GL82B0		000777'		ILLCHR		200000	SPD
BF		003204'	EXT	ERASE		003236'	EXT	GL82B1		001004'		INBS		000036	SPD
BGC		003351'	EXT	ERRCOD		000146	SPD	GL83B0		000751'		INBW		000035	SPD
BI		004000	SPD	ESC		000033	SIN	GL83B1		000756'		INCHWL	002000	000000	
BIASA		000032	SPD	ESC1		000411'		GL83B2		000761'		INSCOD		000142	SPD
BIASC		000010	SPD	ESC2		000414'		GL85B0		000655'		IODEND		020000	SPD
BIASP		000200	SPD	ETX		000003	SIN	GL85B1		000662'		IOERR		002056'	EXT
BIASPA		000010	SPD	F		000016		GL85B2		000665'		IOERW		003267'	EXT
BINCAP		000020	SIN	FATTCD		000141	SPD	GL85B3		000670'		IOMOD		000014	SPD
BL		000040	SPD	FCK1		000000	SPD	GL85B4		000673'		IRF		003150'	ENT
BLKNO		003160'	EXT	FCK2		000400	SPD	GL89B0		000563'		ITF		001221'	ENT
BP		003161'	EXT	FCK3		001000	SPD	GL89B1		000570'		IW		400000	
BP0		003162'	EXT	FENQCD		000140	SPD	GL89B2		000573'		IX		400000	
BPARAM		003175'	EXT	FEXT		000003	SPD	GL89B3		000576'		IXMODE		000345	SIN
BPG		001320'	EXT	FIL		000001	SPD	GL89B4		000601'		KATCAP		000040	SIN
BUFFER		002122'		FILFND		040000	SPD	GL89B5		000613'		KMODE		000407	SIN
BYTESI		001277'	EXT	FINCD1		000114	SPD	GL89B6		000616'		L7B0		001403'	
BZCOD		000120	SPD	FINCD2		000115	SPD	GL89B7		000621'		L7B1		001404'	
C		000007		FIXCOD		000130	SPD	GL89B8		000624'		L7B2		001405'	
CAN		000030	SIN	FLKCOD		000103	SPD	GL8B0		000711'		L7B3		001406'	
CCR		001246'	EXT	FLKFCD		000106	SPD	GL8B1		000716'		L7B4		001407'	
CHGFLG		000200	SPD	FLKRCD		000153	SPD	GL8B2		000721'		L7G0		000512'	
CHKCOD		000132	SPD	FLKSCD		000161	SPD	GL8B3		000724'		L7G1		000513'	
CLRBFI	006000	000000		FNAME		000020	SPD	GL94B0		000633'		L7G2		000514'	
CLRBFO	005000	000000		FPFCOD		000116	SPD	GL94B1		000640'		L7G3		000515'	
CLRBO		000007	SIN	FSIZE	777777	777777	SPD	GL94B2		000643'		L7G4		000516'	
COLON		000072	SPD	G7L5		001126'		GL94B3		000646'		L8B0		001547'	
CONT		000407'		G8L1		001163'		GR81B0		001023'		L8B1		001550'	
COUNTB		001540'	EXT	G8L2		001160'		GR82B0		001007'		L8B2		001551'	
CPACOD		000121	SPD	G8L3		001153'		GR82B1		001014'		L8B3		001552'	
CPTOP1		003170'	EXT	G8L4		001144'		GR83B0		000764'		L8B4A		001553'	
CPTOP2		003354'	EXT	G8L5		001133'		GR83B1		000771'		L8B4B		001554'	
CPTOP3		003240'	EXT	G8R1		001162'		GR83B2		000774'		L8G0		000703'	
CPTOP4		003254'	EXT	G8R2		001156'		GR8B0		000733'		L8G1		000704'	
CPTOP5		003242'	EXT	G8R3		001150'		GR8B1		000740'		L8G2		000705'	
CR		000015	SPD	G8R4		001140'		GR8B2		000743'		L8G3		000706'	
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 2-2
DSKIO.MAC	23-DEC-86 12:29		SYMBOL TABLE

L8G4A		000707'		OPFCOD		000117	SPD	PL89B6		001462'		RINIT		001221'	EXT
L8G4B		000710'		OPNCOD		000137	SPD	PL89B7		001465'		RMSK		001337'	
L9B0		001473'		ORBSIZ		003144'	EXT	PL89B8		001470'		RPAGE		003123'	
L9B1		001474'		OUTCHI	004000	000000		PL8B0		001555'		RPAREN		000051	SPD
L9B2		001475'		OUTCHR	003000	000000		PL8B1		001561'		RS		000036	SPD
L9B3		001476'		OUTSTR	001000	000000		PL8B2		001564'		RS1		000422'	
L9G0		000627'		P		000017		PL8B3		001567'		RS2		000427'	
L9G1		000630'		P7L5		001752'		PL94B0		001477'		RSPCOD		000144	SIN
L9G2		000631'		P8L1		002007'		PL94B1		001503'		SDVIOS		000032	SPD
L9G3		000632'		P8L2		002004'		PL94B2		001506'		SERFLG		000020	SPD
LBIO		000042	SPD	P8L3		001777'		PL94B3		001511'		SERTAB		002014'	
LC		000024	SPD	P8L4		001770'		PMSK		002101'	EXT	SINIT		003150'	EXT
LC1		000405'		P8L5		001757'		POS		001231'	EXT	SIZ1		001242'	
LCO		000004	SPD	P8R1		002006'		PR81B0		001660'		SIZE		001235'	ENT
LEFTFG		000010	SPD	P8R2		002002'		PR82B0		001646'		SLVPRT		000043	SPD
LF		000012	SPD	P8R3		001774'		PR82B1		001652'		SMODE		001000	SIN
LM		000007	SPD	P8R4		001764'		PR83B0		001625'		SORTFG		000001	SPD
LMSK		001343'		PA		001354'	ENT	PR83B1		001631'		SPA		001250'	ENT
LOGCOD		000131	SIN	PA1X		003165'	EXT	PR83B2		001634'		ST		003275'	EXT
LPAREN		000050	SPD	PA2A		001356'		PR8B0		001576'		SUCCOD		000104	SPD
LRECL		000535'	EXT	PA3		001362'		PR8B1		001602'		SWB		020000	SPD
LT		000075	SPD	PA5		001372'		PR8B2		001605'		SYS		000017	SPD
LUD		000003	SPD	PA6		001377'		PR8B3		001610'		TABSIZ		000010	SPD
LUDFLG		000001	SPD	PB		001402'	ENT	PREFER		000005		TBI		000040	SPD
MASKFG		000400	SPD	PBEX		001540'		PS		000014		TBO		000041	SPD
MAXC		000073	SPD	PBEX1		001536'		PWCNT		003341'	EXT	TESTNG		000001	SPD
MAXP		000202	SPD	PBI1		001707'		PX		000015		TI		010000	SPD
MAXPA		000021	SPD	PBINIT		001663'		QUICOD		000136	SIN	TMODE		001035'	EXT
MAXRS		050000	SPD	PBTAB		001712'		R0		000000		TMP		003272'	
MBC		000444'	EXT	PERCOD		000147	SPD	R1		000001		TMP1		002041'	EXT
MBOT		000100	SPD	PEW		002117'	EXT	R2		000002		TRICOD		000125	SPD
MINC		000004	SPD	PKTAB		002010'		R3		000003		TRPCOD		000152	SPD
MINP		000003	SPD	PL75B0		001410'		R4		000004		TRPDSK		000002	SPD
MINPA		000002	SPD	PL75B1		001414'		R5		000005		TRUCOD		000124	SPD
MINRS		010000	SPD	PL75B2		001417'		R8B0		001572'		TRUFIN		003264'	
MSGSW		002000	SPD	PL75B3		001422'		R8B1		001573'		TRUNC1		003207'	
MTOP		000177	SPD	PL75B4		001425'		R8B2		001574'		TRUNC3		003222'	
N		003342'	EXT	PL81B0		001655'		R8B3		001575'		TRUNC6		003240'	
NAKCOD		000113	SPD	PL82B0		001637'		R8G0		000727'		TRUNC7		003255'	
NC		000025	SPD	PL82B1		001643'		R8G1		000730'		TRUNCA		003170'	ENT
NEWBLK		002034'		PL83B0		001613'		R8G2		000731'		TSTRS		014000	SPD
NICOD		000133	SPD	PL83B1		001617'		R8G3		000732'		U		000006	SPD
NM		000010	SPD	PL83B2		001622'		RANK		000010		UIO		001352'	EXT
NOECHO		000200	SPD	PL85B0		001514'		RBALC		003227'	EXT	ULKCOD		000105	SPD
NONE		000400	SIN	PL85B1		001520'		RBCNT		003235'	EXT	ULKFCD		000154	SPD
NSBI		001201'		PL85B2		001523'		RBEST		003230'	EXT	ULKSCD		000160	SPD
NSBO		002025'		PL85B3		001526'		RBPRV		003234'	EXT	UNAME		000015	SPD
NT		000076	SPD	PL85B4		001531'		RBSIZ		003356'	EXT	UPA		001260'	ENT
OB		000037	SPD	PL89B0		001430'		RBZ		002046'		UPA1		001267'	
OICH		000003	SPD	PL89B1		001434'		RC		000004		UPA10		001323'	
OICHI		000004	SPD	PL89B2		001437'		RCC		000006		UPA11		001347'	
ONLCOD		000122	SPD	PL89B3		001442'		RCVCOD		000102	SPD	UPA2		001313'	
OPFCOD		000117	SPD	PL89B4		001445'		RDBLK		001210'		UPA3		001315'	
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87 PAGE 2-3
DSKIO.MAC	23-DEC-86 12:29		SYMBOL TABLE

UPA4		001316'		
UPDCAP		000010	SIN	
UPDMOD		000040	SPD	
US		000037	SIN	
VARCOD		000127	SPD	
VERNUM		000001	SIN	
WHYCOD		000143	SIN	
WRBLK		003125'	ENT	

DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Symbol cross reference

AAR1	   249%	  1510
AAR1X	   251%	  1509
ABTCOD	    28#
AC1	   249%	   986
ACHAR	   599#	   599	   606#	   606
ACKCOD	    31#
ACMCOD	    30#
ACR1X	   251%	  1511
ACRCAP	     2#
AMODE	   113#	  1011
AS	   233#	   986
ASCII	   131#
ASCSTG	   177#
ASCTAB	   267	   271#	   607
AUTO	   130#
BADCOD	    93#
BCMCOD	    29#
BCR1X	   251%	  1513
BF	   253%	   898	   910	   996	  1031	  1043	  1055	  1079	  1335	  1347	  1542	  1552
BGC	   249%	  1508	  1512
BI	   210#
BIASA	   144#
BIASC	   137#
BIASP	   134#
BIASPA	   141#
BINCAP	     4#
BL	   125#	   581	   582
BLKNO	   253%	   954	   967	   978	  1412	  1422	  1425	  1433	  1447	  1475	  1490	  1496	  1515
BP	   253%	   877	   979	  1051	  1516
BP0	   253%	   980	  1517
BPARAM	   253%	   902	  1012	  1018	  1026	  1339	  1544
BPG	   254%	  1050	  1052
BUFFER	   880	   959	   965	  1321	  1417	  1452	  1456	  1465	  1479#	  1481	  1486	  1494	  1599	  1602
	  1606	  1609
BYTESI	   253%	  1034
BZCOD	    41#
C	   229#	   265	   267	   540	   541	   542	   553	   561	   565	   581	   597	   599	   602	   606
	   607	   611	   649	   667	   668	   671	   674	   677	   680	   687	   690	   693	   696	   699
	   700	   701	   705	   706	   709	   712	   715	   718	   729	   732	   735	   738	   741	   743
	   751	   754	   757	   760	   763	   764	   765	   766	   769	   781	   784	   787	   790	   801
	   804	   807	   810	   817	   820	   823	   830	   833	   836	   843	   846	   853	   856	   863
	   869	  1096	  1098	  1102	  1104	  1109	  1124	  1127	  1130	  1133	  1136	  1142	  1145	  1148
	  1151	  1154	  1155	  1156	  1157	  1161	  1164	  1167	  1170	  1173	  1183	  1186	  1189	  1192
	  1200	  1203	  1206	  1209	  1212	  1213	  1214	  1215	  1235	  1238	  1241	  1244	  1254	  1257
	  1260	  1263	  1269	  1272	  1275	  1281	  1284	  1287	  1293	  1296	  1302	  1305	  1311	  1316
	  1519
CAN	   120#
CCR	   254%	  1001
CHGFLG	   206#	   985	  1471	  1487	  1495	  1521	  1601	  1608
CHKCOD	    61#
CLRBO	   166#
COLON	   128#
CONT	   273	   274	   275	   276	   277	   278	   279	   280	   283	   284	   285	   288	   289	   290
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Symbol cross reference

	   291	   292	   293	   294	   295	   296	   297	   298	   299	   300	   303	   304	   306	   544#
COUNTB	   254%	   592	   594	   633	   656	   663	  1219
CPACOD	    43#
CPTOP1	   255%	   997	  1535
CPTOP2	   255%	   998	  1538
CPTOP3	   255%	  1561	  1588
CPTOP4	   255%	  1558	  1565	  1591	  1595	  1600
CPTOP5	   255%	  1555	  1566	  1590
CR	   119#	   602	   609	  1098
CR1	   286	   590#
CR2	   600	   604#
CRLF	   598	   609#
DATA	   308	   309	   310	   311	   312	   313	   314	   315	   316	   317	   318	   319	   320	   321
	   322	   323	   324	   325	   326	   327	   328	   329	   330	   331	   332	   333	   334	   335
	   336	   337	   338	   339	   340	   342	   343	   344	   345	   346	   347	   348	   349	   350
	   351	   352	   353	   354	   355	   356	   357	   358	   359	   360	   361	   362	   363	   364
	   365	   366	   367	   368	   369	   370	   371	   372	   440	   441	   442	   443	   444	   445
	   446	   447	   448	   449	   450	   451	   452	   453	   454	   455	   456	   457	   458	   459
	   460	   461	   462	   463	   464	   465	   466	   467	   468	   469	   470	   471	   472	   473
	   474	   475	   476	   477	   478	   479	   480	   481	   482	   483	   484	   485	   486	   487
	   488	   489	   490	   491	   492	   493	   494	   495	   496	   497	   498	   499	   500	   501
	   502	   503	   543	   545#
DEFFLG	   208#
DNRCOD	    12#
EDIT10	   214#	   651	   885	   985
EM	   121#
EOB	   634	   636#
EOF1	  1452#	  1478
EOF2	  1448	  1475#
EOF3	  1439	  1458#
EOF4	  1466#	  1468	  1473
EOF5	  1469#	  1474
EOF6	  1467	  1471#
EORCOD	    63#
EOTCOD	    64#
ERASCD	    96#
ERASE	   249%	  1583
ERRCOD	    94#
ESC	   122#	   553	   554	   560	   561	  1104
ESC1	   301	   548#
ESC2	   548	   551#
ETX	   116#
F	   238#	   539	   651	   885	   888	   985	   992	  1017	  1021	  1028	  1039	  1048	  1065	  1080
	  1099	  1101	  1221	  1325	  1428	  1458	  1459	  1471	  1487	  1495	  1521	  1536	  1601	  1608
FATTCD	    85#
FCK1	   152#
FCK2	   153#
FCK3	   154#
FENQCD	    83#
FEXT	   157#
FIL	   241#	  1435	  1436	  1437	  1443	  1492	  1493	  1501	  1572	  1582	  1610
FILFND	   213#
FINCD1	    33#
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Symbol cross reference

FINCD2	    38#
FIXCOD	    58#
FLKCOD	    14#
FLKFCD	    27#
FLKRCD	    98#
FLKSCD	   101#
FNAME	   160#
FPFCOD	    39#
FSIZE	   156#
G7L5	   922	   923	   926#
G8L1	   925	   943#
G8L2	   925	   940#
G8L3	   925	   936#
G8L4	   925	   932#
G8L5	   925	   928#
G8R1	   924	   942#
G8R2	   924	   938#
G8R3	   924	   934#
G8R4	   924	   930#
GA	   247	   266#	   587
GA1X	   251%	   266	   549	   552	   559	   564	   578	   586	   601	   605	   983
GB	   247	   551	   563	   585	   596	   604	   633#	   670	   982
GBI1	   897	   905	   913#
GBI2	   878	   884	   887#
GBINIT	   636	   873#	   981
GBTAB	   911	   922#
GEX	   652	   655	   669	   673	   676	   679	   689	   692	   695	   698	   708	   711	   714	   717
	   753	   756	   759	   762	   769#	   783	   786	   789	   803	   806	   809	   819	   822	   832
	   835	   845	   855
GEX1	   682	   720	   768#	   792	   812	   825	   838	   848	   858	   864	   870
GEX9	   731	   734	   737	   741#
GKTAB	   904	   946#
GL75B0	   647#	   681	   926
GL75B1	   650	   671#	   927
GL75B2	   672	   674#	   927
GL75B3	   675	   677#	   927
GL75B4	   678	   680#	   927
GL81B0	   861#	   943
GL82B0	   841#	   847	   940
GL82B1	   844	   846#	   941
GL83B0	   815#	   824	   936
GL83B1	   818	   820#	   937
GL83B2	   821	   823#	   937
GL85B0	   749#	   767	   928
GL85B1	   752	   754#	   929
GL85B2	   755	   757#	   929
GL85B3	   758	   760#	   929
GL85B4	   761	   763#	   929
GL89B0	   685#	   719	   950
GL89B1	   688	   690#	   951
GL89B2	   691	   693#	   951
GL89B3	   694	   696#	   951
GL89B4	   697	   699#	   951
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Symbol cross reference

GL89B5	   707	   709#	   951
GL89B6	   710	   712#	   951
GL89B7	   713	   715#	   951
GL89B8	   716	   718#	   951
GL8B0	   779#	   791	   932
GL8B1	   782	   784#	   933
GL8B2	   785	   787#	   933
GL8B3	   788	   790#	   933
GL94B0	   727#	   740	   946
GL94B1	   730	   732#	   947
GL94B2	   733	   735#	   947
GL94B3	   736	   738#	   947
GR81B0	   867#	   942
GR82B0	   851#	   857	   938
GR82B1	   854	   856#	   939
GR83B0	   828#	   837	   934
GR83B1	   831	   833#	   935
GR83B2	   834	   836#	   935
GR8B0	   799#	   811	   930
GR8B1	   802	   804#	   931
GR8B2	   805	   807#	   931
GR8B3	   808	   810#	   931
GS	   234#	   635	   636	   650	   672	   675	   678	   681	   688	   691	   694	   697	   707	   710
	   713	   716	   719	   730	   733	   736	   740	   752	   755	   758	   761	   767	   782	   785
	   788	   791	   802	   805	   808	   811	   818	   821	   824	   831	   834	   837	   844	   847
	   854	   857	   896	   904	   912	   913	   915	   981
GSETAB	   896	   950#
GWCNT	   254%	   647	   665	   685	   703	   727	   749	   779	   799	   815	   828	   841	   851	   861
	   867	   893	   901	   914	   958
GX	   235#	   640	   641	   642	   643	   644	   653	   664	   702	   723	   724	   725	   726	   739
	   768	   773	   774	   775	   776	   777	   778	   795	   796	   797	   798	   891	   899	   959
	   965
HSW	   200#
HT	   117#	   571	   668
HT1	   281	   571#
HT2	   577	   579#
HT3	   580	   585#
IBIO	   169#
IGNEOF	   205#	  1099	  1101	  1221	  1521
IGNR	   265#	   271	   405
IICHS	   163#
IICHW	   162#
ILL8	   407	   408	   409	   410	   411	   412	   413	   414	   415	   416	   417	   418	   419	   420
	   421	   422	   423	   424	   425	   426	   427	   428	   429	   430	   431	   432	   433	   434
	   435	   436	   437	   438	   505	   506	   507	   508	   509	   510	   511	   512	   513	   514
	   515	   516	   517	   518	   519	   520	   521	   522	   523	   524	   525	   526	   527	   528
	   529	   530	   531	   532	   533	   534	   535	   536	   614#
ILL9	   615#	   742
ILLCHR	   215#
INBS	   171#
INBW	   170#
INSCOD	    89#
IODEND	   180#
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Symbol cross reference

IOERR	   249%	   614	   615	  1441
IOERW	   249%	  1502	  1611
IOMOD	   179#
IRF	   247	  1507#
ITF	   247	   976#
IW	   913	   917#	   926	   928	   930	   932	   934	   936	   938	   940	   942	   943	   950
IX	   946	  1350	  1354#	  1364	  1365	  1366	  1367	  1369	  1370	  1371	  1372	  1374	  1375	  1376
	  1378	  1379	  1380	  1382	  1383	  1385	  1386	  1388	  1390	  1396	  1397	  1398	  1402	  1403
	  1404	  1405	  1406	  1407	  1408	  1409
IXMODE	   111#
KATCAP	     3#
KMODE	   109#	  1009
L7B0	   667	  1116#	  1124	  1200
L7B1	  1117#	  1127	  1203
L7B2	  1118#	  1130	  1206
L7B3	  1119#	  1133	  1209
L7B4	  1120#	  1136
L7G0	   640#	   649	   751
L7G1	   641#	   671	   754
L7G2	   642#	   674	   757
L7G3	   643#	   677	   760
L7G4	   644#	   680
L8B0	  1142	  1228#	  1235	  1269	  1293	  1311
L8B1	  1145	  1229#	  1238	  1272	  1296
L8B2	  1148	  1230#	  1241	  1275
L8B3	  1151	  1231#	  1244
L8B4A	  1156	  1232#
L8B4B	  1161	  1233#
L8G0	   687	   773#	   781	   817	   843	   863
L8G1	   690	   774#	   784	   820	   846
L8G2	   693	   775#	   787	   823
L8G3	   696	   776#	   790
L8G4A	   699	   777#
L8G4B	   705	   778#
L9B0	  1178#	  1183
L9B1	  1179#	  1186
L9B2	  1180#	  1189
L9B3	  1181#	  1192
L9G0	   723#	   729
L9G1	   724#	   732
L9G2	   725#	   735
L9G3	   726#	   738
LBIO	   175#
LC	   148#
LC1	   374	   375	   376	   377	   378	   379	   380	   381	   382	   383	   384	   385	   386	   387
	   388	   389	   390	   391	   392	   393	   394	   395	   396	   397	   398	   399	   400	   401
	   402	   403	   404	   539#
LCO	   201#	   539
LEFTFG	   202#	  1017	  1028	  1039	  1065	  1080
LF	   118#	   597	  1102
LM	   146#
LMSK	  1066	  1074#
LOGCOD	    60#
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Symbol cross reference

LPAREN	   126#
LRECL	   254%	   595	   661
LT	   150#
LUD	   243#
LUDFLG	   197#
MASKFG	   207#	  1017	  1048	  1458
MAXC	   138#
MAXP	   135#
MAXPA	   142#
MAXRS	   104#
MBC	   254%	   576	   579
MBOT	    11#
MINC	   139#
MINP	   136#
MINPA	   143#
MINRS	   105#
MSGSW	   209#
MTOP	   102#
N	   253%	   887	   894	  1053	  1324	  1331
NAKCOD	    32#
NC	   147#	   148
NEWBLK	  1320	  1414	  1421#	  1589
NICOD	    62#
NM	   145#	   146
NOECHO	   181#
NONE	   132#
NSBI	   648	   666	   686	   704	   728	   750	   780	   800	   816	   829	   842	   852	   862	   868
	   954#
NSBO	  1159	  1218	  1412#
NT	   149#	   150
OB	   172#
OICH	   164#
OICHI	   165#
ONLCOD	    48#
OPFCOD	    40#
OPNCOD	    67#
ORBSIZ	   256%	  1499	  1500
P	   239#	   268	   269	   546	   550	   551	   556	   562	   563	   567	   584	   585	   596	   603
	   604	   612	   637	   638	   648	   666	   686	   704	   728	   744	   750	   770	   780	   800
	   816	   829	   842	   852	   862	   868	   873	   874	   956	   960	   964	   969	   970	   971
	   976	   982	   987	  1002	  1013	  1054	  1092	  1093	  1094	  1095	  1100	  1108	  1159	  1218
	  1220	  1222	  1223	  1225	  1319	  1320	  1414	  1418	  1423	  1427	  1429	  1430	  1460	  1461
	  1469	  1470	  1489	  1503	  1507	  1508	  1512	  1522	  1571	  1589	  1612
P7L5	  1359	  1360	  1363#
P8L1	  1362	  1392#
P8L2	  1362	  1389#
P8L3	  1362	  1384#
P8L4	  1362	  1377#
P8L5	  1362	  1368#
P8R1	  1361	  1391#
P8R2	  1361	  1387#
P8R3	  1361	  1381#
P8R4	  1361	  1373#
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Symbol cross reference

PA	   247	  1090#
PA1X	   251%	  1090	  1107	  1110	  1520
PA2A	  1092#	  1103	  1105	  1111
PA3	  1091	  1096#
PA5	  1097	  1104#
PA6	  1106	  1109#
PB	   247	  1092	  1100	  1114#
PBEX	  1126	  1129	  1132	  1135	  1144	  1147	  1150	  1153	  1163	  1166	  1169	  1172	  1185	  1188
	  1191	  1202	  1205	  1208	  1211	  1219#	  1237	  1240	  1243	  1256	  1259	  1262	  1271	  1274
	  1283	  1286	  1295	  1304
PBEX1	  1138	  1175	  1194	  1217#	  1246	  1265	  1277	  1289	  1298	  1307	  1312	  1317
PBI1	  1334	  1342	  1350#
PBINIT	  1224	  1319#	  1518
PBTAB	  1348	  1359#	  1553
PERCOD	    95#
PEW	   249%	  1476
PKTAB	  1341	  1395#	  1546
PL75B0	  1123#	  1137	  1363
PL75B1	  1125	  1127#	  1364
PL75B2	  1128	  1130#	  1365
PL75B3	  1131	  1133#	  1366
PL75B4	  1134	  1136#	  1367
PL81B0	  1310#	  1392
PL82B0	  1292#	  1297	  1389
PL82B1	  1294	  1296#	  1390
PL83B0	  1268#	  1276	  1384
PL83B1	  1270	  1272#	  1385
PL83B2	  1273	  1275#	  1386
PL85B0	  1199#	  1216	  1368
PL85B1	  1201	  1203#	  1369
PL85B2	  1204	  1206#	  1370
PL85B3	  1207	  1209#	  1371
PL85B4	  1210	  1212#	  1372
PL89B0	  1141#	  1174	  1401
PL89B1	  1143	  1145#	  1402
PL89B2	  1146	  1148#	  1403
PL89B3	  1149	  1151#	  1404
PL89B4	  1152	  1154#	  1405
PL89B5	  1162	  1164#	  1406
PL89B6	  1165	  1167#	  1407
PL89B7	  1168	  1170#	  1408
PL89B8	  1171	  1173#	  1409
PL8B0	  1234#	  1245	  1377
PL8B1	  1236	  1238#	  1378
PL8B2	  1239	  1241#	  1379
PL8B3	  1242	  1244#	  1380
PL94B0	  1182#	  1193	  1395
PL94B1	  1184	  1186#	  1396
PL94B2	  1187	  1189#	  1397
PL94B3	  1190	  1192#	  1398
PMSK	   253%	  1047	  1462
POS	   253%	   545	   555	   566	   572	   583	   590	   879	   984
PR81B0	  1315#	  1391
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Symbol cross reference

PR82B0	  1301#	  1306	  1387
PR82B1	  1303	  1305#	  1388
PR83B0	  1280#	  1288	  1381
PR83B1	  1282	  1284#	  1382
PR83B2	  1285	  1287#	  1383
PR8B0	  1253#	  1264	  1373
PR8B1	  1255	  1257#	  1374
PR8B2	  1258	  1260#	  1375
PR8B3	  1261	  1263#	  1376
PREFER	   226#
PS	   236#	  1114	  1125	  1128	  1131	  1134	  1137	  1143	  1146	  1149	  1152	  1162	  1165	  1168
	  1171	  1174	  1184	  1187	  1190	  1193	  1201	  1204	  1207	  1210	  1216	  1224	  1236	  1239
	  1242	  1245	  1255	  1258	  1261	  1264	  1270	  1273	  1276	  1282	  1285	  1288	  1294	  1297
	  1303	  1306	  1333	  1341	  1349	  1350	  1352	  1518
PWCNT	   254%	  1158	  1217	  1330	  1338	  1416
PX	   237#	  1116	  1117	  1118	  1119	  1120	  1123	  1141	  1160	  1178	  1179	  1180	  1181	  1182
	  1199	  1228	  1229	  1230	  1231	  1232	  1233	  1234	  1249	  1250	  1251	  1252	  1253	  1268
	  1280	  1292	  1301	  1310	  1315	  1321	  1328	  1336	  1351	  1417	  1485	  1494	  1609
QUICOD	    65#
R0	   217#	   575	   660	   662	   889	  1029	  1032	  1049	  1326	  1466	  1537	  1542	  1560	  1573
	  1574	  1597	  1598	  1599
R1	   218#	   575	   881	   882	   896	   904	   911	   912	   991	   998	   999	  1007	  1009	  1011
	  1012	  1018	  1019	  1020	  1022	  1024	  1026	  1027	  1029	  1032	  1046	  1047	  1053	  1063
	  1064	  1066	  1333	  1341	  1348	  1349	  1433	  1434	  1435	  1437	  1438	  1440	  1442	  1443
	  1444	  1446	  1447	  1449	  1450	  1451	  1452	  1453	  1454	  1455	  1456	  1462	  1463	  1472
	  1475	  1477	  1485	  1486	  1490	  1491	  1492	  1496	  1497	  1498	  1499	  1500	  1546	  1553
	  1554	  1555	  1591	  1599	  1600	  1602	  1603	  1604	  1605	  1606
R2	   219#	   902	   903	   906	   907	   908	   909	   910	   911	  1339	  1340	  1343	  1344	  1345
	  1346	  1347	  1348	  1461	  1465	  1466	  1468	  1469	  1472	  1473	  1544	  1545	  1548	  1549
	  1550	  1551	  1552	  1553	  1590	  1592	  1596	  1598
R3	   222#
R4	   223#
R5	   225#
R8B0	  1164	  1249#	  1254
R8B1	  1167	  1250#	  1257	  1281
R8B2	  1170	  1251#	  1260	  1284	  1302
R8B3	  1173	  1215	  1252#	  1263	  1287	  1305	  1316
R8G0	   709	   795#	   801
R8G1	   712	   796#	   804	   830
R8G2	   715	   797#	   807	   833	   853
R8G3	   718	   763	   798#	   810	   836	   856	   869
RANK	   231#
RBALC	   256%	  1576
RBCNT	   256%	  1574	  1582
RBEST	   256%	  1577
RBPRV	   256%	  1578	  1581
RBSIZ	   256%	   990	  1444	  1450	  1540	  1543	  1556	  1559	  1575	  1594
RBZ	   970	  1429	  1433#
RC	   224#
RCC	   227#
RCVCOD	    13#
RDBLK	   874	   956	   963#
RINIT	   249%	   976
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Symbol cross reference

RMSK	  1064	  1069#
RPAGE	  1436	  1481#	  1493
RPAREN	   127#
RS	   123#	   565	   610	   611	  1096	  1109	  1519
RS1	   305	   558#
RS2	   558	   563#
RSPCOD	    91#
SDVIOS	   168#
SERFLG	   203#	   888	   992	  1017	  1021	  1325	  1536
SERTAB	  1333	  1401#
SINIT	   249%	  1507
SIZ1	   995	   997#
SIZE	   247	   990#
SLVPRT	   176#
SMODE	   110#	  1007
SORTFG	   199#
SPA	   247	  1006#
ST	   253%	   265	   540	   542	   554	   560	   571	   582	   609	   610	   743	   769
SUCCOD	    20#
SWB	   212#
SYS	   159#
TABSIZ	   115#	   573	   574
TBI	   173#
TBO	   174#
TESTNG	     7#
TI	   211#
TMODE	   253%	   881
TMP	   701#	   701	   706
TMP1	   254%	   963	   966	   968	  1421	  1424	  1426
TRICOD	    53#
TRPCOD	    97#
TRPDSK	   242#
TRUCOD	    51#
TRUFIN	  1584	  1608#
TRUNC1	  1541	  1547	  1555#
TRUNC3	  1568	  1571#	  1607
TRUNC6	  1567	  1588#
TRUNC7	  1593	  1601#
TRUNCA	   247	  1535#
TSTRS	   106#
U	   187#	   188	   188#	   189	   189#	   190	   190#	   191	   191#	   192	   192#	   193	   193#	   194
UIO	   249%	  1025	  1041	  1045	  1062	  1082
ULKCOD	    21#
ULKFCD	    99#
ULKSCD	   100#
UNAME	   158#
UPA	   247	   873	  1017#	  1319
UPA1	  1023	  1026#
UPA10	  1038	  1055#
UPA11	  1036	  1079#
UPA2	  1047#	  1067
UPA3	  1049#	  1057	  1083
UPA4	  1050#	  1060
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Symbol cross reference

UPDCAP	     5#
UPDMOD	   204#	   985	  1428	  1459	  1521
US	   124#
UUOFLG	   183	   189	   190	   191	   192	   193	   194
VARCOD	    56#
VERNUM	     9#
WHYCOD	    90#
WRBLK	   247	   964	  1423	  1485#	  1571
XMODE	   112#
YELLOW	   167#
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Macro/Opdef cross reference

CLRBFI	   194#
CLRBFO	   193#
GBY	   627#	   671	   674	   677	   687	   690	   693	   696	   709	   712	   715	   751	   754	   757
	   760	   781	   784	   787	   801	   804	   807	   817	   820	   830	   833	   843	   853
GBY1	   622#	   680	   718	   790	   810	   823	   836	   846	   856
GBY9	   617#	   729	   732	   735
INCHWL	   190#
OPD	   184#	   188	   189	   190	   191	   192	   193
OUTCHI	   192#
OUTCHR	   191#
OUTSTR	   189#
PBY	  1084#	  1124	  1127	  1130	  1133	  1142	  1145	  1148	  1151	  1161	  1164	  1167	  1170	  1183
	  1186	  1189	  1200	  1203	  1206	  1209	  1235	  1238	  1241	  1254	  1257	  1260	  1269	  1272
	  1281	  1284	  1293	  1302
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Opcode cross reference

ADD	   910	   911	  1347	  1348	  1538	  1552	  1553
ADDI	   955	  1000	  1030	  1033	  1413	  1452	  1497	  1602
ADDM	   661	   891	   899	  1328	  1336
ANDCMI	  1442	  1579
ANDI	   906	  1343	  1548	  1557
ANDM	  1472	  1599
AOBJN	  1468	  1473
AOS	   268	   542	   545	   554	   555	   560	   566	   582	   583	   594	   595	   610	   637	   664
	   702	   739	   743	   768	   769	   914	  1094	  1123	  1141	  1160	  1182	  1199	  1223	  1234
	  1253	  1268	  1280	  1292	  1301	  1310	  1315	  1351	  1455	  1594	  1595	  1605
ASH	  1598
BLOCK	  1479
BLT	  1456	  1606
CAIE	   668	  1019	  1040	  1044	  1081	  1096	  1104
CAIG	  1109	  1486	  1519	  1592
CAIL	   658	  1061
CAIN	   597	   882	  1006	  1008	  1010	  1024	  1035	  1037	  1056	  1058
CAME	  1422	  1447
CAML	  1475
CAMLE	  1499
CAMN	   968	  1426
CLOSE	  1572
COMMEN	  1525
DEFINE	   184	   617	   622	   627	  1084
DIVI	   994
DPB	  1124	  1127	  1130	  1133	  1136	  1142	  1145	  1148	  1151	  1156	  1161	  1164	  1167	  1170
	  1173	  1183	  1186	  1189	  1192	  1200	  1203	  1206	  1209	  1215	  1235	  1238	  1241	  1244
	  1254	  1257	  1260	  1263	  1269	  1272	  1275	  1281	  1284	  1287	  1293	  1296	  1302	  1305
	  1311	  1316
END	  1614
ENTRY	   247
EXCH	   967	  1425
EXP	   271	   273	   274	   275	   276	   277	   278	   279	   280	   281	   283	   284	   285	   286
	   288	   289	   290	   291	   292	   293	   294	   295	   296	   297	   298	   299	   300	   301
	   303	   304	   305	   306	   308	   309	   310	   311	   312	   313	   314	   315	   316	   317
	   318	   319	   320	   321	   322	   323	   324	   325	   326	   327	   328	   329	   330	   331
	   332	   333	   334	   335	   336	   337	   338	   339	   340	   342	   343	   344	   345	   346
	   347	   348	   349	   350	   351	   352	   353	   354	   355	   356	   357	   358	   359	   360
	   361	   362	   363	   364	   365	   366	   367	   368	   369	   370	   371	   372	   374	   375
	   376	   377	   378	   379	   380	   381	   382	   383	   384	   385	   386	   387	   388	   389
	   390	   391	   392	   393	   394	   395	   396	   397	   398	   399	   400	   401	   402	   403
	   404	   405	   407	   408	   409	   410	   411	   412	   413	   414	   415	   416	   417	   418
	   419	   420	   421	   422	   423	   424	   425	   426	   427	   428	   429	   430	   431	   432
	   433	   434	   435	   436	   437	   438	   440	   441	   442	   443	   444	   445	   446	   447
	   448	   449	   450	   451	   452	   453	   454	   455	   456	   457	   458	   459	   460	   461
	   462	   463	   464	   465	   466	   467	   468	   469	   470	   471	   472	   473	   474	   475
	   476	   477	   478	   479	   480	   481	   482	   483	   484	   485	   486	   487	   488	   489
	   490	   491	   492	   493	   494	   495	   496	   497	   498	   499	   500	   501	   502	   503
	   505	   506	   507	   508	   509	   510	   511	   512	   513	   514	   515	   516	   517	   518
	   519	   520	   521	   522	   523	   524	   525	   526	   527	   528	   529	   530	   531	   532
	   533	   534	   535	   536	   922	   923	   924	   925	   927	   929	   931	   933	   935	   937
	   939	   941	   947	   951	  1359	  1360	  1361	  1362	  1363	  1368	  1373	  1377	  1381	  1384
	  1387	  1389	  1391	  1392	  1395	  1401
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Opcode cross reference

EXTERN	   249	   251	   253	   254	   255	   256
GETSTS	  1437
HRL	  1454	  1604
HRLZI	  1597
HRRZ	  1485
IDIV	   898	  1052	  1335	  1542
IDIVI	   573	   890	   895	  1327	  1332	  1539
IFDEF	   183	   189	   190	   191	   192	   193	   194
IMUL	   996
INPUT	  1436
IOR	   706
IORI	  1580
IORM	  1574
IOWD	  1481
JRST	   267	   540	   543	   548	   558	   577	   580	   587	   593	   598	   600	   607	   634	   635
	   652	   655	   659	   669	   670	   673	   676	   679	   682	   689	   692	   695	   698	   708
	   711	   714	   717	   720	   731	   734	   737	   742	   753	   756	   759	   762	   783	   786
	   789	   792	   803	   806	   809	   812	   819	   822	   825	   832	   835	   838	   845	   848
	   855	   858	   864	   870	   878	   884	   889	   897	   904	   905	   915	   993	   995	  1021
	  1023	  1036	  1038	  1057	  1059	  1060	  1067	  1083	  1091	  1097	  1103	  1105	  1106	  1111
	  1114	  1126	  1129	  1132	  1135	  1138	  1144	  1147	  1150	  1153	  1163	  1166	  1169	  1172
	  1175	  1185	  1188	  1191	  1194	  1202	  1205	  1208	  1211	  1237	  1240	  1243	  1246	  1256
	  1259	  1262	  1265	  1271	  1274	  1277	  1283	  1286	  1289	  1295	  1298	  1304	  1307	  1312
	  1317	  1326	  1334	  1341	  1342	  1352	  1439	  1448	  1467	  1474	  1478	  1488	  1510	  1537
	  1541	  1546	  1547	  1567	  1568	  1584	  1593	  1607
JSR	   614	   615	  1025	  1041	  1045	  1062	  1082	  1441	  1476	  1502	  1583	  1611
LDB	   649	   667	   671	   674	   677	   680	   687	   690	   693	   696	   699	   705	   709	   712
	   715	   718	   729	   732	   735	   738	   751	   754	   757	   760	   763	   781	   784	   787
	   790	   801	   804	   807	   810	   817	   820	   823	   830	   833	   836	   843	   846	   853
	   856	   863	   869	  1029	  1032	  1546	  1554
LSH	   700	   766	   889	   909	  1049	  1155	  1212	  1326	  1346	  1434	  1446	  1449	  1491	  1498
	  1537	  1551	  1560
MOVE	   548	   551	   558	   563	   572	   577	   585	   600	   604	   606	   653	   656	   880	   881
	   887	   894	   896	   902	   904	   912	   954	   966	   977	   982	   990	  1018	  1043	  1046
	  1051	  1055	  1064	  1066	  1079	  1106	  1109	  1154	  1324	  1331	  1333	  1339	  1341	  1349
	  1412	  1424	  1433	  1444	  1462	  1463	  1465	  1490	  1496	  1508	  1510	  1512	  1514	  1519
	  1535	  1544	  1556	  1559	  1575	  1588	  1590	  1591	  1600
MOVEI	   553	   561	   565	   574	   581	   602	   611	   636	   650	   672	   675	   678	   681	   688
	   691	   694	   697	   707	   710	   713	   716	   719	   730	   733	   736	   740	   752	   755
	   758	   761	   767	   782	   785	   788	   791	   802	   805	   808	   811	   818	   821	   824
	   831	   834	   837	   844	   847	   854	   857	   957	   959	   965	   981	   986	  1007	  1009
	  1011	  1022	  1059	  1098	  1102	  1125	  1128	  1131	  1134	  1137	  1143	  1146	  1149	  1152
	  1162	  1165	  1168	  1171	  1174	  1184	  1187	  1190	  1193	  1201	  1204	  1207	  1210	  1216
	  1224	  1236	  1239	  1242	  1245	  1255	  1258	  1261	  1264	  1270	  1273	  1276	  1282	  1285
	  1288	  1294	  1297	  1303	  1306	  1321	  1415	  1417	  1494	  1518	  1573	  1609
MOVEM	   549	   552	   559	   564	   576	   578	   586	   599	   601	   605	   663	   701	   958	   963
	   978	   983	   997	   998	  1001	  1012	  1026	  1031	  1034	  1047	  1050	  1053	  1063	  1107
	  1110	  1157	  1416	  1421	  1500	  1509	  1511	  1513	  1515	  1520	  1540	  1543	  1555	  1558
	  1561	  1576
MOVN	   660	  1451	  1596
MOVNM	   893	   901	  1330	  1338
MOVS	  1578
MOVSM	  1581
DSKIO -- ROUTINES FOR WRITING AND READING DISK FILES	MACRO 12.5-46.0 08:13 25-OCT-87
DSKIO.MAC	23-DEC-86 12:29		Opcode cross reference

MULI	   993
OPDEF	   189	   190	   191	   192	   193	   194
OUTPUT	  1493
POINT	   640	   641	   642	   643	   644	   723	   724	   725	   726	   773	   774	   775	   776	   777
	   778	   795	   796	   797	   798	  1029	  1032	  1116	  1117	  1118	  1119	  1120	  1178	  1179
	  1180	  1181	  1228	  1229	  1230	  1231	  1232	  1233	  1249	  1250	  1251	  1252	  1546	  1554
POP	  1469
POPJ	   269	   546	   550	   556	   562	   567	   584	   603	   612	   638	   744	   770	   960	   969
	   971	   987	  1002	  1013	  1054	  1093	  1095	  1108	  1220	  1222	  1225	  1418	  1427	  1430
	  1460	  1470	  1489	  1503	  1522	  1612
PUSH	  1461
PUSHJ	   551	   563	   585	   596	   604	   648	   666	   686	   704	   728	   750	   780	   800	   816
	   829	   842	   852	   862	   868	   873	   874	   956	   964	   970	   976	   982	  1092	  1100
	  1159	  1218	  1319	  1320	  1414	  1423	  1429	  1507	  1508	  1512	  1571	  1589
RENAME	  1582
REPEAT	   272	   282	   287	   302	   307	   341	   373	   406	   439	   504
SETSTS	  1443
SETZ	   662	   991	  1477
SETZM	   590	   879	   979	   980	   984	  1453	  1516	  1517	  1577	  1603
SKIPE	   592	   877	  1566
SKIPN	  1565
SOS	   265	   540	   571	   609
SOSG	   647	   665	   685	   703	   727	   749	   779	   799	   815	   828	   841	   851	   861	   867
	  1158	  1217
SOSGE	   579	   633
SOSLE	  1219
STATZ	  1501	  1610
SUB	   575	  1450
SUBI	   541	   657	   892	   900	  1329	  1337
TDNE	  1466
TITLE	   244
TLNE	   913	  1350
TRNE	   741	   764	   888	   903	   992	   999	  1027	  1039	  1065	  1080	  1213	  1221	  1325	  1340
	  1428	  1440	  1458	  1487	  1536	  1545
TRNN	   539	   651	   654	   883	  1020	  1438	  1459
TRO	   885	   908	  1021	  1028	  1048	  1099	  1345	  1471	  1550	  1601
TRZ	   985	  1017	  1101	  1495	  1521	  1608
TRZE	   907	  1344	  1549
USETI	  1435
USETO	  1492
XCT	   266	  1090
XOR	  1464
XORI	   765	  1214
XWD	   926	   928	   930	   932	   934	   936	   938	   940	   942	   943	   946	   950	  1069	  1070
	  1071	  1072	  1074	  1075	  1076	  1077	  1364	  1365	  1366	  1367	  1369	  1370	  1371	  1372
	  1374	  1375	  1376	  1378	  1379	  1380	  1382	  1383	  1385	  1386	  1388	  1390	  1396	  1397
	  1398	  1402	  1403	  1404	  1405	  1406	  1407	  1408	  1409 dT])