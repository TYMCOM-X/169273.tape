MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1
TPARAM	23-DEC-86 12:29	

     1				;PROGRAM CAPABILITIES
     2			000100	ACRCAP==:100                 ;I MAY RECEIVE RANK COMPRESSED DATA RECORD
     3			000040	KATCAP==:40                  ;I MAY RECEIVE KATAKANA DATA
     4			000020	BINCAP==:20                  ;I MAY RECEIVE BINARY DATA
     5			000010	UPDCAP==:10                  ;I MAY RECEIVE BINARY UPDATE MODE DATA
     6				;ASSEMBLY AND TEST SWITCHES
     7			000001	TESTNG== 1                   ;PRINT LOGIN MESSAGES FROM SLAVE HOST
     8				;PROTOCOL VERSION
     9			000001	VERNUM==:1
    10				;MESSAGE TYPES
    11			000100	MBOT== 100      ;LOWER BOUND FOR MESSAGE TYPES
    12			000101	DNRCOD== 101 ;REQUEST SLAVE TO BE DONOR.  NO RESPONSE.
    13			000102	RCVCOD== 102 ;REQUEST SLAVE TO BE RECEIVER.  NO RESPONSE.
    14			000103	FLKCOD== 103 ;ASCII FILE NAME FOLLOWS AFTER 1 BYTE GIVING COUNT.
    15				;              (RETURNS FAILCD IF FILE NOT FOUND OR FLKSCD IF FILE FOUND.
    16				;              (IF THE SLAVE & CONTROLLER ARE BOTH 940 THEN THE USUAL
    17				;              (SECURITY RULES ARE RELAXEED AND THE LOOKUP SUCCEEDS
    18				;              (IF THE FILE IS PRESENT, RETURNING 9 BYTES CONTAINING
    19				;              (INFORMATION FROM THE FIRST 3 WORDS OF THE FD ENTRY.
    20			000104	SUCCOD== 104 ;OPTION ACCEPTED
    21			000105	ULKCOD== 105 ;ASCII USERNAME FOLLOWS AFTER 1 BYTE GIVING COUNT.
    22				;              (LOOKS UP THE USER NAME IN THE LUD AND RETURNS A ULKSCD IF
    23				;              (FOUND AND A ULKRCD IF NOT FOUND.  IF THE SLAVE & CONTROLLER
    24				;              (ARE BOTH 940 THEN A SUPER GFD IS PERFORMED TO REACH THE
    25				;              (FILE DIRECTORY OF THE SPECIFIED USER, AND GAN, FDPT, AND UUN
    26				;              (FROM THE LUD ENTRY ARE RETURNED AS 9 BYTES.
    27			000106	FLKFCD== 106 ;FILE NOT FOUND--NOT CONSIDERED AN ERROR
    28			000107	ABTCOD==: 107 ;STOP WHAT YOU ARE DOING, ABORT
    29			000110	BCMCOD== 110 ;START DATA RECORD, BINARY COMPRESSION METHOD
    30			000111	ACMCOD== 111 ;START DATA RECORD, ASCII COMPRESSION METHOD
    31			000112	ACKCOD== 112 ;ACKNOWLEDGEE RECORD CHECKSUM AND BYTECOUNT MATCH
    32			000113	NAKCOD== 113 ;CHECKSUM AND/OR BYTECOUNT DO NOT MATCH
    33			000114	FINCD1== 114 ;DONOR HAS SENT ALL RECORDS IN FILE AND IS HAPPY.  FOLLOWED
    34				;              (BY 1 BYTE COUNT OF BYTES FOLLOWING  TOTAL FILE BYTES SENT
    35				;              (BY DONOR.  USED BY UPDATE MODE CLOSE TO TRUNCATE FILE TO
    36				;              (THE CORRECT DATA LENGTH.  WHEN DONOR AND RECEIVER
    37				;              (ARE BOTH 940 THIS WILL BE 3 BYTES CONTAINING CPTOP.
    38			000115	FINCD2== 115 ;RECEIVER HAS WRITTEN AND CLOSED FILE SUCCESSFULLY
    39			000116	FPFCOD== 116 ;FILE PROTECTION FAILURE
    40			000117	OPFCOD== 117 ;OPEN FAILURE
    41			000120	BZCOD==  120 ;BUFFER ZAPPED
    42				; OPTION TYPES 121-130 RESPOND 104 OR 133 IF NOT IMPLEMENTED
    43			000121	CPACOD== 121 ;SPECIFY COMPRESSION.  FOLLOWED BY 1 BYTE
    44				;              (0= NONE
    45				;              (1= BINARY
    46				;              (2= ASCII
    47				;              (3= ASCII AUTO
    48			000122	ONLCOD== 122 ;ON LOWER CASE.  FOLLOWED BY A BYTE OF ALL 1'S TO PERMIT
    49				;              (LOWER CASE, ALL 0'S TO CONVERT LOWER TO UPPER CASE
    50				;              (DEFAULT IS TO PERMIT LOWER CASE
    51			000124	TRUCOD== 124 ;FOLLOWED BY 1 BYTE INDICATING COLUMN TO BEGIN
    52				;              (TRUNCATION.  IF 0 THEN TURN OFF TRUNCATION.
    53			000125	TRICOD== 125 ;REMOVE TRAILING BLANKS.  FOLLOWED BY A BYTE OF ALL 1'S
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-2
TPARAM	23-DEC-86 12:29	

    54				;              (TO SUPPRESS TRAILING BLANKS OR A BYTE OF ALL 0'S TO KEEP
    55				;              (TRAILING BLANKS  (DEFAULT)
    56			000127	VARCOD== 127 ;PRODUCE VARIABLE LENGTH RECORDS (DEFAULT)
    57				;              (FOLLOWED BY 4 BYTES GIVING MAXIMUM RECORD SIZE
    58			000130	FIXCOD== 130 ;PAD WITH BLANKS TO MAKE FIXED LENGTH RECORDS.
    59				;              (FOLLOWED BY 4 BYES OF RECORD LENGTH.
    60			000131	LOGCOD==:131 ;TELL SLAVE TO LOG OFF
    61			000132	CHKCOD== 132 ;START DATA CHECKSUM RECORD
    62			000133	NICOD==  133 ;REQUESTED OPERATION IS NOT IMPLEMENTED
    63			000134	EORCOD== 134 ;END OF TRANSMISSION RECORD
    64			000135	EOTCOD== 135 ;TRANSMISSION RECORD IS LAST IN FILE
    65			000136	QUICOD==:136 ;ABORT THE CURRENT OPERATION, QUIT SLAVE, AND RETURN
    66				;              (TO OPERATING SYSTEM COMMAND LEVEL.
    67			000137	OPNCOD== 137 ;REQUEST SLAVE OPEN FILE FOR DATA TRANSFER (DIRECTION
    68				;              (DETERMINED BY PREVIOUS 101 OR 102 CODE.  FOLLOWED BY 1 BYTE
    69				;              (TRANSMISSION TYPE, AND POSSIBLY, OTHER BYTES
    70				;              (TYPE = 1 ASCII MODE TRANSFER.  NO BYTES FOLLOW
    71				;              (TYPE = 2 EBCDIC MODE TRANSFER.  NO BYTES FOLLOW
    72				;              (TYPE = 3 BINARY MODE TRANSFER.  THE RECEIVE FILE, IF
    73				;              (PRESENT, IS TO BE ERASED.  FOLLOWED BY 1 BYTE OF BINARY
    74				;              (PARAMETERS.
    75				;              (TYPE = 4 BINARY UPDATE MODE TRANSFER.  DONOR AND RECEIVER
    76				;              (WILL EXCHANGE CHECK RECORDS.  FOLLOWED BY 1 BYTE OF BINARY
    77				;              (PARAMETERS AND 2 BYTES OF UPDATE MODE BLOCKSIZE.
    78				;              (TYPE = 5 KATAKANA MODE TRANSFER.  NO BYTES FOLLOW
    79				;              (TYPE = 6 IMAGE MODE TRANSFER.  NO BYTES FOLLOW
    80				;              (POSSIBLE RESPONSES ARE  133 (UPDATE MODE NOT IMPLEMENTED
    81				;              (OR PARAMETERS NOT ACCEPTABLE), 104 (FILE OPENED), 116
    82				;              (FILE PROTECTION FAILURE), OR 117 (FILE OPEN FAILURE).
    83			000140	FENQCD== 140 ;REQUEST SLAVE DONOR TO SEND FILE ATTRIBUTES.  RETURNS 104
    84				;              (PLUS 1 BYTE COUNT OF BYTES FOLLOWING.
    85			000141	FATTCD== 141 ;PREPARE SLAVE RECEIVER TO OPEN FILE.  FOLLOWED BY 1 BYTE
    86				;              (COUNT OF BYTES FOLLOWING.  WHEN DONOR AND RECEIVER ARE BOTH
    87				;              (940 SEND 9 BYTES  3 BYTES FFDPT, 3 BYTES FDWD0, AND
    88				;              (3 BYTES FDWD2.  NO RESPONSE IS GIVEN.
    89			000142	INSCOD== 142 ;SET INSTALLER LICENSE.  FOLLOWED BY 6 BYTE CIPHER.
    90			000143	WHYCOD==: 143 ;SOLICIT EXPLANATION OF LATEST ERROR
    91			000144	RSPCOD==: 144 ;CODE FOLLOWED BY ASCII STRING TO BE PRINTED AT TERMINAL
    92				;              (STRING TERMINATED BY A NUL BYTE OR ANY CONTROL CODE.
    93			000145	BADCOD== 145 ;UNEXPECTED CONTROL CODE RECEIVED
    94			000146	ERRCOD== 146 ;FILE SYSTEM ERROR WRITING OR READING FILE
    95			000147	PERCOD== 147 ;FILE SYSTEM ERROR POSITIONING FILE
    96			000150	ERASCD== 150 ;FILE SYSTEM ERROR ERASING RECEIVE FILE
    97			000152	TRPCOD== 152 ;PROGRAM TRAP
    98			000153	FLKRCD== 153 ;LOOKUP FAILURE--PROBABLY SYNTAX
    99			000154	ULKFCD== 154 ;GFD FAILURE
   100			000160	ULKSCD== 160 ;GFD SUCCESS
   101			000161	FLKSCD== 161 ;FILE LOOKUP SUCCESS
   102			000177	MTOP== 177      ;UPPER BOUND FOR MESSAGE TYPES
   103				;TRANSMISSION PARAMETERS
   104			050000	MAXRS== ^D512*^D40             ;MAXIMUM RECORD SIZE--40 PAGES
   105			010000	MINRS== ^D512*^D8            ;MININUM RECORD SIZE--8 PAGES
   106			014000	TSTRS== ^D6144                 ;SAMPLE SIZE FOR STATISTICS (CONSTANT)
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-3
TPARAM	23-DEC-86 12:29	

   107				;                               WILL BE 2 PAGES FOR BF=6
   108				;BINARY PARAMETERS FOR ASCII, KATAKANA, AND IMAGE MODE
   109			000407	KMODE==:  407                   ;1000+0011+1=BYTESIZE=9,BLOCKING=4,FILL=LEFT
   110			001000	SMODE==: 1000                   ;000+0000+0  INDICATES SERIAL MODE
   111			000345	IXMODE==: 345            ;111+0010+1==BYTESIZE=8,BLOCKING=3,FILL=LEFT
   112			000351	XMODE==: 351            ;111+0100+1==BYTESIZE=8,BLOCKING=5,FILL=LEFT
   113			000311	AMODE==: 311            ;110+0100+1==BYTESIZE=7,BLOCKING=5,FILL=LEFT
   114				;ASCII CHARACTER VALUES
   115			000010	TABSIZ== 10
   116			000003	ETX==: 3        ;CONTROL-C
   117			000011	HT== 11
   118			000012	LF== 12
   119			000015	CR== 15
   120			000030	CAN==: 30
   121			000031	EM==: 31
   122			000033	ESC==: 33
   123			000036	RS== 36
   124			000037	US==: 37
   125			000040	BL== 40
   126			000050	LPAREN== 50
   127			000051	RPAREN== 51
   128			000072	COLON== 72
   129				;COMPRESSION OPTIONS
   130			000001	AUTO==:1
   131			000002	ASCII==:2
   132			000400	NONE==: 400  ;NO OPTIONS, SET TO KEEP COPT NON-ZERO
   133				;REPEATED CHAR COMPRESSION PARAMETERS
   134			000200	BIASP== 200                ;BIAS FOR PREFERRED CHARACTER COMPRESSION CODE
   135			000202	MAXP== ^D130                 ;MAXIMUM COUNT FOR PREFERRED CHARACTER
   136			000003	MINP== 3                   ;MININUM COUNT FOR PREFERRED CHARACTER
   137			000010	BIASC== 10                 ;BIAS FOR REPEATED CHARACTER COMPRESSION CODE
   138			000073	MAXC== ^D59                  ;MAXIMUM COUNT FOR REPEATED CHARACTER
   139			000004	MINC== 4                   ;MININUM COUNT FOR REPEATED CHARACTER
   140				;RANK COMPRESSION PARAMETERS
   141			000010	BIASPA== 10                  ;BIAS FOR PREFERRED BYTE COMPRESSION CODE
   142			000021	MAXPA== ^D17                  ;MAXIMUM COUNT FOR PREFERRED BYTE
   143			000002	MINPA== 2                   ;MININUM COUNT FOR PREFERRED BYTE
   144			000032	BIASA== 32                 ;BIAS FOR ALL TRANSLATING CHARACTERS
   145			000010	NM== ^D8                   ;MASTER CHARACTERS-- 32 THRU 41
   146			000007	LM== NM-1
   147			000025	NC== ^D21                  ;COMBINING CHARACTERS-- 32 THRU 56
   148			000024	LC== NC-1
   149			000076	NT== ^D62                    ;TRANSLATING CHARACTERS-- 32 THRU 127
   150			000075	LT== NT-1
   151				; CHECK BLOCK LAYOUT
   152			000000	FCK1== 0
   153			000400	FCK2== ^D256
   154			001000	FCK3== ^D512
   155				; DONOR AND RECEIVER FILENAME INDEXES
   156		777777	777777	FSIZE== -1
   157			000003	FEXT== 3
   158			000015	UNAME== 15
   159			000017	SYS== 17
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-4
TPARAM	23-DEC-86 12:29	

   160			000020	FNAME== 20
   161				; AUXCAL DEFINITIONS
   162			000000	IICHW== 0       ;INPUT IMAGE CHAR, WAIT
   163			000001	IICHS== 1       ;INPUT IMAGE CHAR, SKIP
   164			000003	OICH== 3        ;OUTPUT IMAGE CHAR
   165			000004	OICHI== 4       ;OUTPUT IMAGE CHAR IMMEDIATE
   166			000007	CLRBO==:7       ;CLEAR OUTPUT BUFFER
   167			000012	YELLOW==: 12     ;SEND YELLOW BALL
   168			000032	SDVIOS== 32     ;SET DEVIOS
   169			000034	IBIO== 34       ;INITIATE BLOCK I/O MODE
   170			000035	INBW== 35       ;INPUT A BLOCK (WAIT)
   171			000036	INBS== 36       ;INPUT A BLOCK (SKIP)
   172			000037	OB== 37         ;OUTPUT A BLOCK
   173			000040	TBI== 40        ;TERMINATE BLOCK INPUT
   174			000041	TBO== 41        ;TERMINATE BLOCK OUTPUT
   175			000042	LBIO== 42       ;LEAVE BLOCK I/O MODE
   176			000043	SLVPRT== 43     ;SLAVE COMMAND PORT
   177			000052	ASCSTG== 52     ;OUTPUT ASCII STRING
   178				; DEVIOS BITS
   179			000014	IOMOD==14       ;BINARY MODE
   180			020000	IODEND==20000   ;MASK FOR IODEND BIT (BIT 22)
   181			000200	NOECHO==200     ;NO ECHO BIT (AFFECTS COMMAND PORT)
   182				; UUO DEFINITIONS
   183				IFDEF UUOFLG<UUOTAB: BLOCK 0>
   184				DEFINE  OPD     (A,B) <U==U+1
   185				OPDEF A [U*1000000000]
   186				IFDEF UUOFLG<JRST B>>
   187			000000	U==0
   188			000001	 OPD OUTSTR,OSTRUU^U==U+1
   189			000002	 OPD INCHWL,INCHUU^U==U+1
   190			000003	 OPD OUTCHR,OCHRUU^U==U+1
   191			000004	 OPD OUTCHI,OCHIUU^U==U+1
   192			000005	 OPD CLRBFO,CLROUU^U==U+1
   193			000006	 OPD CLRBFI,CLRIUU^U==U+1
   194				;***  WARNING *** FLAGS IN MASTER ARE NOT PRESERVED FROM ONE FILE TO NEXT
   195				;***    SEE "SAVREG" IN TELECO.MAC WHICH ZEROES ALL ACCUMULATORS
   196				;FLAGS IN LH OF ACCUMULATOR F
   197			000001	LUDFLG== 1      ;LUD HAS BEEN OPENED IF 1
   198				;FLAGS IN RH OF ACCUMULATOR F
   199			000001	SORTFG== 1     ;SORT HAS BEEN PERFORMED IF 1
   200			000002	HSW== 2        ;RECORD HEADER HAS BEEN CREATED IF 1
   201			000004	LCO== 4        ;PERMIT LOWER CASE OUTPUT IF 1
   202			000010	LEFTFG== 10    ;LEFT FILL IF 1
   203			000020	SERFLG== 20    ;SERIAL MODE IF 1
   204			000040	UPDMOD== 40    ;READ CONTENTS FROM FILE BEFORE WRITING IF 1
   205			000100	IGNEOF== 100   ;IGNORE END OF BLOCK IF 1
   206			000200	CHGFLG== 200   ;PAGE CHANGED BY MASKING OPERATION IF 1
   207			000400	MASKFG== 400   ;PAGE MUST BE MASKED PRIOR TO USE
   208			001000	DEFFLG== 1000   ;IINIT TO CALL ROUTINE "DEFER" WHEN BLOCK INPUT DONE
   209			002000	MSGSW==  2000   ;ONCE-ONLY FLAG FOR COPYST
   210			004000	BI==     4000   ;INDICATES BLOCK INPUT STARTED IF 1
   211			010000	TI==    10000   ;INDICATES BLOCK INPUT TERMINATED IF 1
   212			020000	SWB==   20000   ;ONCE-ONLY SWITCH FOR SWBAC
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1
FLAGS	23-DEC-86 12:29	

   213			040000	FILFND==  40000  ;FILE FOUND BY SLAVE IF 1.
   214			100000	EDIT10== 100000 ;EDIT-10 FILE BEING TRANSMITTED IN ASCII MODE IF 1
   215			200000	ILLCHR== 200000 ;DISALLOWED CHAR IN FILENAME (SEE GET10)
   216				; GENERAL-PURPOSE REGISTERS  (TOUCHED BY EVERYONE)
   217			000000	R0=0
   218			000001	R1=1
   219			000002	R2=2
   220				;REGISTERS TOUCHED ONLY BY A,ACTRANS,BCTRANS
   221				;R3-R5 USED IN CHECKSUMMING FILE (BEFORE TRANSMISSION)
   222			000003	R3=3            ;HOLDING REGISTER FOR C.  PRESERVE IN CW AND W MACROS
   223			000004	R4=4
   224			000004	RC=4          ;HOLDING REGISTER.  PRESERVE IN CW AND W MACROS.
   225			000005	R5=5
   226			000005	PREFER=5        ;PREFERRED COMPRESSION CHAR.
   227			000006	RCC=6            ;REGISTER USED FOR REPEAT COUNT
   228				; SPECIAL PURPOSE REGISTERS
   229			000007	C=7             ;CHARACTER BEING READ(WRITTEN) FROM(TO) FILE OR BEING
   230				;               WRITTEN(READ) TO(FROM) OUTPUT(INPUT) BUFFER.
   231			000010	RANK=10         ;RANK OF FIRST(SECOND) CHAR OF A MASTER-COMBINING
   232				;               PAIR.  **MUST** FOLLOW C.
   233			000011	AS=11           ;STATE FOR ROUTINE A.
   234			000012	GS=12           ;STATE FOR ROUTINE GB.
   235			000013	GX=13           ;INDEX FOR ROUTINE GB.
   236			000014	PS=14           ;STATE FOR ROUTINE PB.
   237			000015	PX=15           ;INDEX FOR ROUTINE PB.
   238			000016	F=16            ;FLAGS
   239			000017	P=17            ;PUSHDOWN LIST POINTER
   240				;CHANNEL ASSIGNMENTS
   241			000001	FIL== 1
   242			000002	TRPDSK== 2
   243			000003	LUD== 3
   244				DEFINE W(A),<
   245				 MOVE C,A
   246				 PUSHJ P,CW
   247				 >
   248				DEFINE W1(A,%B),<
   249				 MOVE C,A
   250				 CAIG C,EM
   251				 CAIG C,CAN-1
   252				 JRST %B
   253				 W [CAN]
   254				 MOVE C,A
   255				%B: PUSHJ P,CW
   256				 >
   257				DEFINE W2(A,%B,%C),<
   258				 MOVE C,A
   259				 CAIG C,EM
   260				 CAIG C,CAN-1
   261				 JRST %B
   262				REPEAT 2,<
   263				 W [CAN]
   264				 W A
   265				>
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1
W	23-DEC-86 12:29	

   266				 JRST %C
   267				%B: REPEAT 2,<PUSHJ P,CW>
   268				%C:
   269				 >
   270				DEFINE W3(A,%B,%C),<
   271				 MOVE C,A
   272				 CAIG C,EM
   273				 CAIG C,CAN-1
   274				 JRST %B
   275				REPEAT 3,<
   276				 W [CAN]
   277				 W A
   278				>
   279				 JRST %C
   280				%B: REPEAT 3,<PUSHJ P,CW>
   281				%C:
   282				 >
   283				DEFINE LNKMSG(A),<
   284				 MOVEI C,A
   285				 PUSHJ P,SCOD
   286				 PUSHJ P,SNDYEL
   287				 >
   288				DEFINE DI(A,%B,%C),<
   289				 HRLZ R0,C
   290				 MOVE R1,[%C,,%B]
   291				 HRR (R1)
   292				 CAME (R1)
   293				 AOBJN R1,.-2
   294				 TLNN R1,400000
   295				 JSR BAD
   296				 HRRZ R1,(R1)
   297				 JRST @R1
   298				%B:
   299				 IRP A,<
   300				 DIS A
   301				 >
   302				%C==%B-.
   303				 >
   304				DEFINE DIS(A),<
   305				 XWD A
   306				 >
   307			000000	OFF==0
   308				DEFINE TIMER(A),<
   309				 IFG A,<PUSHJ P,STARTT
   310				 EXP A>
   311				 IFE A,<SETOM TIMFLG>
   312				 >
   313				TITLE MASTER -- TELECOPY CONTROLLER
   314
   315				;STORAGE REFERENCED ELSEWHERE
   316				INTERN VAROPT,FIXOPT,OPT2,OPTSZ1
   317				;ROUTINES REFERENCED ELSEWHERE
   318				 ENTRY ADIAG,BDIAG
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1
MASTER.MAC	23-DEC-86 12:29	

   319				 ENTRY CKTIM,COPYST,NEWSEN,NEWREC
   320				;EXTERNAL STORAGE REFERENCED
   321				EXTERN VERBOSE,UPDNO,JFYHR,JFYMIN,JFYSEC,CNVDAT,CNVTIM,CNVFMT
   322				EXTERN TT,T1,T2
   323				EXTERN COPT,LOWSW,TRU,BLNKSW,VRECL,FRECL,SUP,LCOPT
   324				EXTERN FCOPT,FRPARAM,FTPARAM
   325				EXTERN UCOPT,DCOPT,OPTLEN,UTMODE,URMODE
   326				EXTERN TPARAM,RPARAM,RMODE,TMODE,DONOR,MASTER
   327				EXTERN BPARAM,BYTESIZ,RLCCNT
   328				EXTERN RBCNT,RBLIC,FDLIC,OFDLIC,UPDSW
   329				EXTERN SYSTYP,TIMFLG
   330				EXTERN STIME,ETIME,TRTOT,TMP,CCNT,TYPTIM
   331				EXTERN RBLK,DBLK,UNCT,FNCT,SW10,SW370
   332				EXTERN CIN,ASK
   333				;EXTERNAL ROUTINES REFERENCED
   334				EXTERN ABORT,RESET,SAVREG,INVU,FPF,FLKR,YESN2
   335				EXTERN DECOUT,EROFN,EROUN,CPOPJ1,RF,TF
   336				EXTERN GC,GCOD,SCOD,SBYTE,SNDYEL,BAD
   337
   338				;       OPTION PROCESSING
   339
   340				;       SEND SELECTED OPTIONS.  DO NOT SEND IF UNCHANGED
   341	000000'	476000	000000*	SNDOPT: SETOM BLNKSW    ;SUPPRESS TRAILING BLANKS
   342	000001'	476000	000000*	        SETOM LOWSW     ;PERMIT LOWER CASE OUTPUT
   343	000002'	660700	000004	        TRO F,LCO       ;PERMIT LOWER CASE OUTPUT
   344	000003'	200000	000000*	        MOVE LCOPT
   345	000004'	302000	000123	        CAIE 123
   346	000005'	254000	000010'	        JRST .+3
   347	000006'	350000	000001*	        AOS LOWSW       ;CONVERT LOWER TO UPPER CASE
   348	000020700	000004	        TRZ F,LCO               ;DITTO
   349	000010'	200000	000000*	        MOVE SUP
   350	000011'	306000	000126	        CAIN 126
   351	000012'	350000	000000*	        AOS BLNKSW      ;TRANSMIT TRAILING BLANKS
   352	000013'	200040	001160'	        MOVE R1,[-OPTSZ2,,0]
   353	000014'	200021	000035'	SNO1:   MOVE @OPT1(R1)
   354	000015'	331001	000035'	        SKIPL OPT1(R1)  ;IS THIS OPTION DESTINED FOR 370
   355	000016'	332000	000000*	        SKIPE SW370     ;YES, ARE WE TALKING TO ONE
   356	000017'	316001	000043'	        CAMN OPT2(R1)
   357	000020'	254000	000022'	        JRST .+2        ;DO NOT SEND
   358	000021'	256001	000051'	        XCT  OPT3(R1)
   359	000022'	253040	000014'	        AOBJN R1,SNO1
   360	000023'	263740	000000	        POPJ P,
   361
   362				; RECEIVE RESPONSES
   363	000024'	200040	001160'	RCVOPT: MOVE R1,[-OPTSZ2,,0]
   364	000025'	200021	000035'	SNO2:   MOVE @OPT1(R1)
   365	000026'	331001	000035'	        SKIPL OPT1(R1)  ;IS THIS OPTION DESTINED FOR 370
   366	000027'	332000	000016*	        SKIPE SW370     ;YES, ARE WE TALKING TO ONE
   367	000030'	316001	000043'	        CAMN OPT2(R1)
   368	000031'	254000	000033'	        JRST .+2        ;DO NOT RECEIVE
   369	000032'	260740	000166'	        PUSHJ P,GACK
   370	000033'	253040	000025'	        AOBJN R1,SNO2
   371	000034'	263740	000000	        POPJ P,
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-2
MASTER.MAC	23-DEC-86 12:29	

   372
   373				;       OPTION TABLES
   374				;ADDR OF OPTION CELL
   375	000035'	400000	000000*	OPT1: XWD 400000,COPT
   376	000036'	400000	000006*	 XWD 400000,LOWSW
   377	000037'	000000	000000*	 EXP TRU,BLNKSW,VRECL,FRECL
	000040'	000000	000012*
	000041'	000000	000000*
	000042'	000000	000000*
   378				;OLD VALUES
   379	000043'	777777	777673	OPT2: EXP -^D69,-^D69,-^D69,-^D69
	000044'	777777	777673
	000045'	777777	777673
	000046'	777777	777673
   380			000004	OPTSZ1==.-OPT2
   381	000047'	000000	200000	VAROPT: ^D65536
   382	000050'	000000	200000	FIXOPT: ^D65536
   383			000006	OPTSZ2==.-OPT2
   384				;SEND ROUTINES
   385	000051'			OPT3: REPEAT 4,<PUSHJ P,STDOPT>
   386	000051'	260740	000137'	PUSHJ P,STDOPT
   387	000052'	260740	000137'	PUSHJ P,STDOPT
   388	000053'	260740	000137'	PUSHJ P,STDOPT
   389	000054'	260740	000137'	PUSHJ P,STDOPT
   390				 REPEAT 2,<PUSHJ P,FX>
   391	000055'	260740	000146'	PUSHJ P,FX
   392	000056'	260740	000146'	PUSHJ P,FX
   393				;CODES TO SEND
   394	000057'	000000	000121	OPT4: EXP CPACOD,ONLCOD,TRUCOD,TRICOD,VARCOD,FIXCOD
	000060'	000000	000122
	000061'	000000	000124
	000062'	000000	000125
	000063'	000000	000127
	000064'	000000	000130
   395				;ERROR MESSAGES
   396	000065'	000000	000105'	OPT5: EXP ERR42,ERR43,ERR44,ERR45,ERR46,ERR47
	000066'	000000	000110'
	000067'	000000	000114'
	000070'	000000	000117'
	000071'	000000	000125'
	000072'	000000	000132'
   397
   398	000073'			ERR40: ASCIZ"
   399	000073'	064252	451202	TRANSFER ABORTED
	000074'	472470	642644
	000075'	202030	247644
   400	000076'	522130	406424	"
	000077'	000000	000000
   401	000100'	202372	052222	ERR41: ASCIZ" OPTION NOT IMPLEMENTED"
	000101'	476344	047236
	000102'	521011	146640
	000103'	462131	542634
	000104'	522130	400000
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-3
MASTER.MAC	23-DEC-86 12:29	

   402	000105'			ERR42: ASCIZ"
   403	000105'	064250	347632	COMPRESSION"
	000106'	502450	551646
	000107'	446371	600000
   404	000110'			ERR43: ASCIZ"
   405	000110'	064252	550240	UPPER-LOWER CASE"
	000111'	426445	546236
	000112'	536132	220206
	000113'	406470	500000
   406	000114'			ERR44: ASCIZ"
   407	000114'	064252	451252	TRUNCATION"
	000115'	472070	152222
	000116'	476340	000000
   408	000117'			ERR45: ASCIZ"
   409	000117'	064252	352640	SUPPRESS TRAILING BLANKS"
	000120'	502450	551646
	000121'	202512	240622
	000122'	462231	643500
	000123'	412310	147226
	000124'	514000	000000
   410	000125'			ERR46: ASCIZ"
   411	000125'	064252	640644	VARIABLE RECORD LENGTH"
	000126'	446030	246212
	000127'	202450	541636
	000130'	512104	046212
	000131'	472172	444000
   412	000132'			ERR47: ASCIZ"
   413	000132'	064250	644660	FIXED RECORD LENGTH"
	000133'	426104	051212
	000134'	416372	242100
	000135'	462131	643650
	000136'	440000	000000
   414
   415				;       SEND STANDARD OPTIONS
   416	000137'	202000	000000*	STDOPT: MOVEM T1
   417	000140'	261740	000001	 PUSH P,R1      ;SAVE R1 ON THE STACK
   418	000141'	200341	000057'	 MOVE C,OPT4(R1)
   419	000142'	260740	000000*	 PUSHJ P,SCOD
   420	000143'	200340	000137*	 MOVE C,T1
   421	000144'	260740	000000*	 PUSHJ P,SBYTE
   422	000145'	254000	000163'	 JRST FXEXIT
   423
   424				;       SEND FIXCOD OR VARCOD
   425	000146'	202000	000143*	FX: MOVEM T1
   426	000147'	261740	000001	 PUSH P,R1      ;SAVE R1 ON THE STACK
   427	000150'	200341	000057'	 MOVE C,OPT4(R1)
   428	000151'	260740	000142*	 PUSHJ P,SCOD
   429	000152'	200100	001161'	 MOVE R2,[POINT 8,T1,3]
   430				 REPEAT 4,<ILDB C,R2
   431				 PUSHJ P,SBYTE>
   432	000153'	134340	000002	ILDB C,R2
   433	000154'	260740	000144*	 PUSHJ P,SBYTE
   434	000155'	134340	000002	ILDB C,R2
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-4
MASTER.MAC	23-DEC-86 12:29	

   435	000156'	260740	000154*	 PUSHJ P,SBYTE
   436	000157'	134340	000002	ILDB C,R2
   437	000160'	260740	000156*	 PUSHJ P,SBYTE
   438	000161'	134340	000002	ILDB C,R2
   439	000162'	260740	000160*	 PUSHJ P,SBYTE
   440	000163'	260740	000000*	FXEXIT: PUSHJ P,SNDYEL
   441	000164'	262740	000001	 POP P,R1       ;RETRIEVE R1
   442	000165'	263740	000000	 POPJ P,
   443
   444	000166'	124000	000146*	GACK: DMOVEM T1 ;SAVE VALUE IN T1, INDEX IN T2
   445	000167'	260740	000000*	 PUSHJ P,GCOD
   446				 DI <<NICOD,GACK1>,<SUCCOD,GACK2>>^
   447	000170'	514000	000007	 HRLZ R0,C
   448	000171'	200040	001162'	 MOVE R1,[..0001,,..0002]
   449	000172'	540001	000000	 HRR (R1)
   450	000173'	312001	000000	 CAME (R1)
   451	000174'	253040	000172'	 AOBJN R1,.-2
   452	000175'	607040	400000	 TLNN R1,400000
   453	000176'	264000	000000*	 JSR BAD
   454	000177'	550041	000000	 HRRZ R1,(R1)
   455	000200'	254020	000001	 JRST @R1
   456	000201'	000133	000203'	 XWD NICOD,GACK1
   457	000202'	000104	000211'	 XWD SUCCOD,GACK2
   458	000203'	200040	000000*	GACK1: MOVE R1,T2
   459	000204'	001021	000065'	 OUTSTR @OPT5(R1)
   460	000205'	001000	000100'	 OUTSTR ERR41   ;NOT IMPLEMENTED
   461	000206'	201000	000000*	 MOVEI ABORT
   462	000207'	260740	000214'	 PUSHJ P,SETTT
   463	000210'	263740	000000	 POPJ P,
   464	000211'	120000	000166*	GACK2: DMOVE T1
   465	000212'	202001	000043'	 MOVEM OPT2(R1)
   466	000213'	263740	000000	 POPJ P,
   467
   468	000214'	335000	000000*	SETTT: SKIPGE TT
   469	000215'	202000	000214*	 MOVEM TT
   470	000216'	263740	000000	 POPJ P,
   471
   472				;MOVE USER-SPECIFIED OPTIONS TO ACTIVE SET.  USE DEFAULT OPTIONS IF
   473				;       NO USER-SPECIFIED OPTIONS ARE SUPPLIED.
   474	000217'	400000	000000	ACT: SETZ R0,
   475	000220'	336000	000000*	 SKIPN SW10     ;ARE WE TALKING TO A 10?  IF SO, DEFAULT MODE IS BINARY
   476	000221'	254000	000227'	 JRST ACT2      ;NO
   477				; CHOOSE XMODE OR SMODE DEPENDING ON FILE EXTENSION
   478	000222'	510040	000003*	 HLLZ R1,DBLK+FEXT
   479	000223'	200100	001163'	 MOVE R2,[-EXTLEN,,EXTTAB]
   480	000224'	312042	000000	ACT1: CAME R1,0(R2)
   481	000225'	254000	000247'	 JRST ACT4
   482	000226'	201000	001000	 MOVEI SMODE    ;SERIAL MODE
   483	000227'	202000	000000*	ACT2: MOVEM FTPARAM
   484	000230'	202000	000000*	 MOVEM FRPARAM
   485	000231'	515040	000000*	 HRLZI R1,-OPTLEN
   486	000232'	571100	777777	 HRREI R2,-1
   487	000233'	200001	000000*	ACT3: MOVE DCOPT(R1)
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-5
MASTER.MAC	23-DEC-86 12:29	

   488	000234'	612101	000000*	 TDNE R2,FCOPT(R1)
   489	000235'	200001	000234*	 MOVE FCOPT(R1)
   490	000236'	612101	000000*	 TDNE R2,UCOPT(R1)      ;USER OVERRIDE ALWAYS WINS THIS RACE
   491	000237'	200001	000236*	 MOVE UCOPT(R1)
   492	000240'	202001	000035*	 MOVEM COPT(R1)
   493	000241'	253040	000233'	 AOBJN R1,ACT3
   494	000242'	200000	000000*	 MOVE TMODE
   495	000243'	316000	000000*	 CAMN RMODE
   496	000244'	263740	000000	 POPJ P,
   497				 OUTSTR [ASCIZ"
   498				TRANSMISSION ABORTED DUE TO MIXED TRANSMISSION MODES
   499	000245'	001000	001164'	"]
   500	000246'	254000	000206*	 JRST ABORT
   501	000247'	253100	000224'	ACT4: AOBJN R2,ACT1
   502	000250'	254000	000227'	 JRST ACT2
   503
   504	000251'	424143	000000	EXTTAB: SIXBIT /BAC/
   505	000252'	425156	000000	 SIXBIT /BIN/
   506	000253'	426547	000000	 SIXBIT /BUG/
   507	000254'	434154	000000	 SIXBIT /CAL/
   508	000255'	435056	000000	 SIXBIT /CHN/
   509	000256'	444145	000000	 SIXBIT /DAE/
   510	000257'	444362	000000	 SIXBIT /DCR/
   511	000260'	445560	000000	 SIXBIT /DMP/
   512	000261'	504750	000000	 SIXBIT /HGH/
   513	000262'	545767	000000	 SIXBIT /LOW/
   514	000263'	556342	000000	 SIXBIT /MSB/
   515	000264'	576662	000000	 SIXBIT /OVR/
   516	000265'	616545	000000	 SIXBIT /QUE/
   517	000266'	616546	000000	 SIXBIT /QUF/
   518	000267'	624554	000000	 SIXBIT /REL/
   519	000270'	625155	000000	 SIXBIT /RIM/
   520	000271'	625564	000000	 SIXBIT /RMT/
   521	000272'	626442	000000	 SIXBIT /RTB/
   522	000273'	634166	000000	 SIXBIT /SAV/
   523	000274'	634644	000000	 SIXBIT /SFD/
   524	000275'	635062	000000	 SIXBIT /SHR/
   525	000276'	636645	000000	 SIXBIT /SVE/
   526	000277'	637163	000000	 SIXBIT /SYS/
   527	000300'	654644	000000	 SIXBIT /UFD/
   528	000301'	706056	000000	 SIXBIT /XPN/
   529			000031	EXTLEN==.-EXTTAB
   530
   531				; SEND FILE NAME
   532	000302'	201340	000103	NEWSFN: MOVEI C,FLKCOD
   533	000303'	260740	000151*	        PUSHJ P,SCOD
   534	000304'	201040	000000*	        MOVEI R1,RBLK
   535	000305'	336000	000000*	        SKIPN DONOR
   536	000306'	201040	000000*	        MOVEI R1,DBLK
   537	000307'	332000	000027*	        SKIPE SW370     ;ARE WE TALKING TO 370
   538				        JRST [ MOVE C,FNCT      ;YES, SEND FILENAME ONLY
   539				                PUSHJ P,SBYTE   ;PRESERVES R1
   540	000310'	254000	001200'	                JRST NEWSF1]
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-6
MASTER.MAC	23-DEC-86 12:29	

   541	000311'	200340	000000*	        MOVE C,FNCT
   542	000312'	270340	000000*	        ADD C,UNCT
   543	000313'	271340	000002	        ADDI C,2
   544	000314'	260740	000162*	        PUSHJ P,SBYTE   ;PRESERVES R1
   545	000315'	201340	000050	        MOVEI C,LPAREN
   546	000316'	260740	000314*	        PUSHJ P,SBYTE
   547	000317'	200100	001203'	        MOVE R2,[POINT 6,UNAME(R1)]
   548	000320'	200140	000312*	        MOVE R3,UNCT
   549	000321'	260740	000331'	        PUSHJ P,SNDSTR  ;SEND USERNAME STRING
   550	000322'	201340	000051	        MOVEI C,RPAREN
   551	000323'	260740	000316*	        PUSHJ P,SBYTE
   552	000324'	200100	001204'	NEWSF1: MOVE R2,[POINT 6,FNAME(R1)]
   553	000325'	200140	000311*	        MOVE R3,FNCT
   554	000326'	260740	000331'	        PUSHJ P,SNDSTR  ;SEND FILENAME STRING
   555	000327'	260740	000163*	        PUSHJ P,SNDYEL
   556	000330'	263740	000000	        POPJ P,
   557
   558	000331'	134340	000002	SNDSTR: ILDB C,R2
   559	000332'	271340	000040	        ADDI C,40
   560	000333'	260740	000323*	        PUSHJ P,SBYTE   ;SBYTE DESTROYS R0
   561	000334'	367140	000331'	        SOJG R3,SNDSTR
   562	000335'	263740	000000	        POPJ P,
   563
   564				;       SEND PATH NAME (USERNAME, FILENAME, + OPTIONS) AS MULTIPLE
   565				;       MESSAGES.  THEN READ THE REPLIES.
   566				;
   567	000336'	260740	000217'	SPATH: PUSHJ P,ACT
   568	000337'	476000	000215*	 SETOM TT       ;ERROR SWITCH
   569	000340'	660700	040000	 TRO F,FILFND    ;ASSUME FILE WILL BE FOUND
   570	000341'	260740	000302'	 PUSHJ P,NEWSFN
   571	000342'	260740	000000'	 PUSHJ P,SNDOPT
   572	000343'	260740	000167*	 PUSHJ P,GCOD
   573	000344'	332000	000307*	 SKIPE SW370
   574	000345'	254000	000364'	 JRST LK370     ;ONE LESS RESPONSE REQUIRED FROM 370
   575				 DI <<ULKFCD,ULKF>,<ULKSCD,ULKS>>^
   576	000346'	514000	000007	 HRLZ R0,C
   577	000347'	200040	001205'	 MOVE R1,[..0003,,..0004]
   578	000350'	540001	000000	 HRR (R1)
   579	000351'	312001	000000	 CAME (R1)
   580	000352'	253040	000350'	 AOBJN R1,.-2
   581	000353'	607040	400000	 TLNN R1,400000
   582	000354'	264000	000176*	 JSR BAD
   583	000355'	550041	000000	 HRRZ R1,(R1)
   584	000356'	254020	000001	 JRST @R1
   585	000357'	000154	000361'	 XWD ULKFCD,ULKF
   586	000360'	000160	000363'	 XWD ULKSCD,ULKS
   587	000361'	201000	000000*	ULKF: MOVEI INVU        ;INVALID USER ON REMOTE SYSTEM
   588	000362'	260740	000214'	 PUSHJ P,SETTT          ;SET ERROR SWITCH POS.
   589	000363'	260740	000343*	ULKS: PUSHJ P,GCOD      ;READ RESPONSE FOR FILENAME
   590	000364'			LK370: DI <<FLKFCD,FLKF>,<FLKSCD,FLKS>,<FPFCOD,FPFSET>,<FLKRCD,FLKRSET>>^
   591	000364'	514000	000007	 HRLZ R0,C
   592	000365'	200040	001206'	 MOVE R1,[..0005,,..0006]
   593	000366'	540001	000000	 HRR (R1)
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-7
MASTER.MAC	23-DEC-86 12:29	

   594	000367'	312001	000000	 CAME (R1)
   595	000370'	253040	000366'	 AOBJN R1,.-2
   596	000371'	607040	400000	 TLNN R1,400000
   597	000372'	264000	000354*	 JSR BAD
   598	000373'	550041	000000	 HRRZ R1,(R1)
   599	000374'	254020	000001	 JRST @R1
   600	000375'	000106	000407'	 XWD FLKFCD,FLKF
   601	000376'	000161	000411'	 XWD FLKSCD,FLKS
   602	000377'	000116	000401'	 XWD FPFCOD,FPFSET
   603	000400'	000153	000404'	 XWD FLKRCD,FLKRSET
   604	000401'	201000	000000*	FPFSET: MOVEI FPF
   605	000402'	260740	000214'	 PUSHJ P,SETTT
   606	000403'	254000	000422'	 JRST OPTRD
   607	000404'	201000	000000*	FLKRSET: MOVEI FLKR
   608	000405'	260740	000214'	 PUSHJ P,SETTT
   609	000406'	254000	000422'	 JRST OPTRD
   610	000407'	620700	040000	FLKF: TRZ F,FILFND       ;MUST BE NEW FILE
   611	000410'	254000	000422'	 JRST OPTRD
   612	000411'	336000	000220*	FLKS: SKIPN SW10        ;ARE WE TALKING TO 10?
   613	000412'	254000	000422'	 JRST OPTRD             ;NO
   614				; READ FILE ATTRIBUTES OF REMOTE FILE
   615	000413'	200100	001207'	 MOVE R2,[POINT 6,OFDLIC] ;ATTRIBUTES OF RECEIVE FILE
   616	000414'	336000	000305*	 SKIPN DONOR            ;ARE WE DONOR
   617	000415'	200100	001210'	 MOVE R2,[POINT 6,FDLIC] ;NO, GET ATTRIBUTES OF DONOR FILE
   618	000416'	201040	000006	 MOVEI R1,6
   619	000417'	260740	000000*	 PUSHJ P,GC
   620	000420'	136340	000002	 IDPB C,R2
   621	000421'	367040	000417'	 SOJG R1,.-2
   622	000422'	260740	000024'	OPTRD: PUSHJ P,RCVOPT   ;WILL SET TT FOR FAILURES
   623	000423'	331000	000337*	 SKIPL TT               ;DID WE HAVE ANY ERRORS
   624	000424'	254020	000423*	 JRST @TT               ;YES, JUMP TO APPROPRIATE CODE
   625	000425'	263740	000000	 POPJ P,
   626
   627				ADIAG: MOVEI R2,[ASCIZ"
   628	000426'	201100	001211'	BEGIN RANK"]
   629	000427'	254000	000431'	 JRST .+2
   630				BDIAG: MOVEI R2,[ASCIZ"
   631	000430'	201100	001214'	BEGIN DUPLICATE"]
   632	000431'	336000	000000*	 SKIPN VERBOSE
   633	000432'	263740	000000	 POPJ P,
   634	000433'	001002	000000	 OUTSTR (R2)
   635	000434'	001000	001220'	 OUTSTR [ASCIZ" COMPRESSED DATA RECORD, "]
   636	000435'	200040	000242*	 MOVE R1,TMODE
   637	000436'	307040	000004	 CAIG R1,4
   638	000437'	307040	000002	 CAIG R1,2
   639	000440'	254000	000453'	 JRST BDIAG1
   640	000441'	200000	000000*	 MOVE TPARAM
   641	000442'	312000	000000*	 CAME RPARAM
   642	000443'	254000	000457'	 JRST BDIAG3    ;PARAMETERS UNEQUAL, PRINT "BINARY" OR "BINARY UPDATE"
   643	000444'	302000	000361	 CAIE 361
   644	000445'	306000	001000	 CAIN SMODE
   645	000446'	271040	000004	 ADDI R1,4
   646	000447'	306000	000351	 CAIN XMODE
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-8
MASTER.MAC	23-DEC-86 12:29	

   647	000450'	271040	000006	 ADDI R1,6
   648	000451'	307040	000004	 CAIG R1,4
   649	000452'	254000	000457'	 JRST BDIAG3
   650	000453'	001021	000503'	BDIAG1: OUTSTR @DIAGT(R1)
   651	000454'	001000	001226'	 OUTSTR [ASCIZ" MODE"]
   652				BDIAG2: OUTSTR [ASCIZ"
   653	000455'	001000	001230'	"]
   654	000456'	263740	000000	 POPJ P,
   655	000457'	001021	000503'	BDIAG3: OUTSTR @DIAGT(R1)
   656				 OUTSTR [ASCIZ" MODE
   657				  BLOCKING FILL BYTESIZE
   658	000460'	001000	001231'	TRANS.   "]
   659	000461'	201100	000441*	 MOVEI R2,TPARAM
   660	000462'	260740	000467'	 PUSHJ P,BDIAG4
   661	000463'	001000	001242'	 OUTSTR [ASCIZ"REC.     "]
   662	000464'	201100	000442*	 MOVEI R2,RPARAM
   663	000465'	260740	000467'	 PUSHJ P,BDIAG4
   664	000466'	254000	000455'	 JRST BDIAG2
   665	000467'	135000	001244'	BDIAG4: LDB R0,[POINT 4,0(R2),34] ;BLOCKING
   666	000470'	271000	000001	 ADDI 1
   667	000471'	260740	000000*	 PUSHJ P,DECOUT
   668	000472'	200002	000000	 MOVE (R2)
   669	000473'	201040	001245'	 MOVEI R1,[ASCIZ"    R        "]
   670	000474'	602000	000001	 TRNE 1
   671	000475'	201040	001250'	 MOVEI R1,[ASCIZ"    L        "]
   672	000476'	001001	000000	 OUTSTR (R1)
   673	000477'	135000	001253'	 LDB R0,[POINT 4,0(R2),30] ;BYTESIZE
   674	000500'	271000	000001	 ADDI 1
   675	000501'	260740	000471*	 PUSHJ P,DECOUT
   676				 OUTSTR [ASCIZ"
   677	000502'	001000	001230'	"]
   678	000503'	263740	000000	 POPJ P,
   679
   680			000503'	DIAGT=.-1
   681	000504'	000000	000516'	 EXP DIAG1,DIAG2,DIAG3,DIAG4,DIAG5,DIAG6,DIAG7,DIAG8,DIAG9,DIAG10
	000505'	000000	000520'
	000506'	000000	000522'
	000507'	000000	000524'
	000510'	000000	000527'
	000511'	000000	000531'
	000512'	000000	000533'
	000513'	000000	000535'
	000514'	000000	000540'
	000515'	000000	000542'
   682
   683	000516'	406470	344622	DIAG1: ASCIZ"ASCII"
	000517'	000000	000000
   684	000520'	426050	342222	DIAG2: ASCIZ"EBCDIC"
	000521'	414000	000000
   685	000522'	412231	640644	DIAG3: ASCIZ"BINARY"
	000523'	544000	000000
   686	000524'	412231	640644	DIAG4: ASCIZ"BINARY UPDATE"
	000525'	545012	550210
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-9
MASTER.MAC	23-DEC-86 12:29	

	000526'	406510	500000
   687	000527'	456032	440626	DIAG5: ASCIZ"KATAKANA"
	000530'	406350	100000
   688	000531'	446330	143612	DIAG6: ASCIZ"IMAGE"
	000532'	000000	000000
   689	000533'	516132	244602	DIAG7: ASCIZ"SERIAL"
	000534'	460000	000000
   690	000535'	516132	244602	DIAG8: ASCIZ"SERIAL UPDATE"
	000536'	461012	550210
	000537'	406510	500000
   691	000540'	472032	444654	DIAG9: ASCIZ"NATIVE"
	000541'	424000	000000
   692	000542'	472032	444654	DIAG10: ASCIZ"NATIVE UPDATE"
	000543'	425012	550210
	000544'	406510	500000
   693
   694				; PRINT "COPY STARTED" MESSAGE
   695	000545'	662700	002000	COPYST: TROE F,MSGSW    ;SET SWITCH TO AVOID PRINTING AGAIN
   696	000546'	263740	000000	 POPJ P,
   697				 MOVEI R1,[ASCIZ"
   698	000547'	201040	001254'	UPDATING"]
   699	000550'	200000	000435*	 MOVE TMODE
   700	000551'	302000	000004	 CAIE 4
   701				 MOVEI R1,[ASCIZ"
   702	000552'	201040	001257'	COPY"]
   703	000553'	001001	000000	 OUTSTR (R1)
   704	000554'	001000	001261'	 OUTSTR [ASCIZ" STARTING"]
   705	000555'	332000	000431*	 SKIPE VERBOSE
   706	000556'	260740	000604'	 PUSHJ P,PRDAT
   707				 OUTSTR [ASCIZ"
   708	000557'	001000	001230'	"]
   709	000560'	402000	000000*	 SETZM TRTOT    ;ZERO TOTAL TRANSMISSION TIME
   710	000561'	047000	000023	 MSTIME R0,
   711	000562'	202000	000000*	 MOVEM STIME    ;TIME COPY STARTED (MILISECONDS)
   712	000563'	263740	000000	 POPJ P,
   713
   714				; PRINT "COPIED TO" OR "UPDATED TO" MESSAGES
   715	000564'			COPFIN: TIMER OFF^
   716	000564'	476000	000000*	 IFE OFF,<SETOM TIMFLG>
   717				 OUTSTR [ASCIZ"
   718	000565'	001000	001230'	"]
   719	000566'	201040	000306*	 MOVEI R1,DBLK
   720	000567'	260740	000000*	 PUSHJ P,EROUN
   721	000570'	260740	000000*	 PUSHJ P,EROFN
   722	000571'	200000	000550*	 MOVE TMODE
   723	000572'	201040	001263'	 MOVEI R1,[ASCIZ" UPDATED TO "]
   724	000573'	302000	000004	 CAIE 4
   725	000574'	201040	001266'	 MOVEI R1,[ASCIZ" COPIED TO "]
   726	000575'	001001	000000	 OUTSTR (R1)
   727	000576'	201040	000304*	 MOVEI R1,RBLK
   728	000577'	260740	000567*	 PUSHJ P,EROUN
   729	000600'	260740	000570*	 PUSHJ P,EROFN
   730				 OUTSTR [ASCIZ"
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-10
MASTER.MAC	23-DEC-86 12:29	

   731	000601'	001000	001230'	"]
   732	000602'	260740	000642'	 PUSHJ P,PRLIC
   733	000603'	263740	000000	 POPJ P,
   734
   735	000604'	001000	001271'	PRDAT: OUTSTR [ASCIZ" AT "]
   736	000605'	200040	001272'	 MOVE R1,[10,,11]
   737	000606'	047040	000041	 GETTAB R1,
   738	000607'	400040	000000	 SETZ R1,
   739	000610'	202040	000000*	 MOVEM R1,CNVTIM
   740	000611'	200040	001273'	 MOVE R1,[11,,11]
   741	000612'	047040	000041	 GETTAB R1,
   742	000613'	400040	000000	 SETZ R1,
   743	000614'	202040	000000*	 MOVEM R1,CNVDAT
   744	000615'	201040	000614*	 MOVEI R1,CNVDAT
   745	000616'	047040	777723	 DATUUO R1,
   746	000617'	255000	000000	 JFCL
   747	000620'	200000	000610*	 MOVE R0,CNVTIM
   748	000621'	230000	000000*	 IDIV R0,JFYHR
   749	000622'	260740	000632'	 PUSHJ P,PR2D   ;PRINT TWO DIGITS
   750	000623'	004000	000072	 OUTCHI 72
   751	000624'	230000	000000*	 IDIV R0,JFYMIN
   752	000625'	260740	000632'	 PUSHJ P,PR2D
   753	000626'	004000	000072	 OUTCHI 72
   754	000627'	230000	000000*	 IDIV R0,JFYSEC
   755	000630'	260740	000632'	 PUSHJ P,PR2D
   756	000631'	263740	000000	 POPJ P,
   757	000632'	261740	000001	PR2D: PUSH P,R1 ;SAVE R1
   758	000633'	231000	000012	 IDIVI R0,12
   759	000634'	271000	000060	 ADDI R0,60
   760	000635'	003000	000000	 OUTCHR R0
   761	000636'	271040	000060	 ADDI R1,60
   762	000637'	003000	000001	 OUTCHR R1
   763	000640'	262740	000000	 POP P,R0       ;RETURN R1 IN R0
   764	000641'	263740	000000	 POPJ P,
   765
   766				; PRINT LICENSES FROM FDLIC
   767	000642'	200000	000000*	PRLIC: MOVE FDLIC
   768	000643'	332000	000411*	        SKIPE SW10      ;NOT APPLICABLE FOR 940 OR 370
   769	000644'	606000	777777	        TRNN 777777
   770	000645'	263740	000000	        POPJ P,
   771				        OUTSTR [ASCIZ"
   772	000646'	001000	001274'	**** LICENSE "]
   773	000647'	200000	001300'	        MOVE [POINT 12,LIC-1,35]
   774	000650'	202000	001157'	        MOVEM TLIC#
   775	000651'	200140	001301'	        MOVE R3,[-12,,0] ;BITS 18-27 INDICATE 10 UNIQUE LICENSES
   776	000652'	200100	000642*	        MOVE R2,FDLIC
   777	000653'	134000	001157'	        ILDB R0,TLIC
   778	000654'	602100	400000	        TRNE R2,400000
   779	000655'	260740	000672'	        PUSHJ P,PLIC
   780	000656'	242100	000001	        LSH R2,1
   781	000657'	253140	000653'	        AOBJN R3,.-4
   782	000660'	135040	001302'	        LDB R1,[POINT 2,FDLIC,33]
   783	000661'	200000	000716'	        MOVE READL
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-11
MASTER.MAC	23-DEC-86 12:29	

   784	000662'	256001	000712'	        XCT ILIC(R1)
   785	000663'	260740	000672'	        PUSHJ P,PLIC
   786	000664'	135040	001303'	        LDB R1,[POINT 2,FDLIC,35]
   787	000665'	200000	000717'	        MOVE WRITL
   788	000666'	256001	000712'	        XCT ILIC(R1)
   789	000667'	260740	000672'	        PUSHJ P,PLIC
   790				        OUTSTR [ASCIZ"IS NOT PORTABLE.
   791	000670'	001000	001304'	"]
   792	000671'	263740	000000	        POPJ P,
   793	000672'	405000	007777	PLIC:   ANDI 7777
   794	000673'	606000	007777	        TRNN 7777
   795	000674'	263740	000000	        POPJ P,
   796	000675'	246000	777772	        LSHC R0,-6
   797	000676'	271000	000040	        ADDI 40
   798	000677'	003000	000000	        OUTCHR R0
   799	000700'	246000	000006	        LSHC R0,6
   800	000701'	405000	000077	        ANDI 77
   801	000702'	271000	000040	        ADDI 40
   802	000703'	003000	000000	        OUTCHR R0
   803	000704'	004000	000040	        OUTCHI BL
   804	000705'	263740	000000	        POPJ P,
   805	000706'	674362	435760	LIC: SIXBIT /WCRCOPSYGDTDSTHFJLAC/
	000707'	637147	446444
	000710'	636450	465254
	000711'	414300	000000
   806	000712'	400000	000000	ILIC:   SETZ R0,
   807	000713'	242000	777750	        LSH -30
   808	000714'	242000	777764	        LSH -14
   809	000715'	600000	000000	        TRN
   810	000716'	626062	466241	READL: SIXBIT /RPRFRA/
   811	000717'	676067	466741	WRITL: SIXBIT /WPWFWA/
   812
   813
   814	000720'	201040	000001	PRTIME: MOVEI R1,1
   815	000721'	201100	000001	 MOVEI R2,1
   816	000722'	200000	000000*	 MOVE BPARAM
   817	000723'	306000	000351	 CAIN XMODE
   818				 JRST [ MOVEI R1,^D9            ;TEN "BYTES"= 72 BITS = 9 BYTES
   819				        MOVEI R2,^D10
   820	000724'	254000	001310'	        JRST PRTIM1]
   821	000725'	200000	000000*	 MOVE BYTESIZE
   822	000726'	306000	000007	 CAIN 7
   823				 JRST [ MOVEI R1,7              ;EIGHT "BYTES"= 56 BITS = 7 BYTES
   824				        MOVEI R2,^D8
   825	000727'	254000	001313'	        JRST PRTIM1]
   826	000730'	306000	000011	 CAIN 11
   827				 JRST [ MOVEI R1,^D94812        ;BYTESIZE = LOG 192/LOG 2 = 7.5849625 BITS
   828				        MOVEI R2,^D100000       ;SINCE THERE ARE 192 CHARS IN KATAKANA SET
   829	000731'	254000	001316'	        JRST PRTIM1]
   830	000732'	200000	000000*	PRTIM1: MOVE CCNT
   831	000733'	224000	000001	 MUL R1                         ;PRODUCT TO R0-R1
   832	000734'	234000	000002	 DIV R2
   833	000735'	301040	000004	 CAIL R1,4
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-12
MASTER.MAC	23-DEC-86 12:29	

   834	000736'	350000	000000	 AOS R0
   835	000737'	202000	000000*	 MOVEM RLCCNT                   ;REAL BYTE COUNT
   836				 OUTSTR [ASCIZ"
   837	000740'	001000	001230'	"]
   838	000741'	200000	000737*	 MOVE RLCCNT
   839	000742'	260740	000501*	 PUSHJ P,DECOUT ;PRINT NO. OF CHARS TRANSMITTED
   840	000743'	004000	000040	 OUTCHI BL
   841	000744'	004000	000050	 OUTCHI LPAREN
   842	000745'	200000	000560*	 MOVE TRTOT
   843	000746'	260740	000742*	 PUSHJ P,DECOUT ;PRINT NETWORK CHARS TRANSMITTED
   844				 OUTSTR [ASCIZ") CHARS. TRANSMITTED
   845	000747'	001000	001321'	"]
   846	000750'	200000	000571*	 MOVE TMODE
   847	000751'	302000	000004	 CAIE 4
   848	000752'	336000	000000*	 SKIPN TYPTIM
   849	000753'	263740	000000	 POPJ P,      ;NO RATES FOR UPDATE MODE
   850	000754'	200000	000000*	 MOVE ETIME
   851	000755'	274000	000562*	 SUB STIME
   852	000756'	231000	001750	 IDIVI ^D1000   ;CONVERT MILISECOND TIME TO SECONDS
   853	000757'	301040	000500	 CAIL R1,500
   854	000760'	271000	000001	 ADDI 1         ;ROUND UP
   855	000761'	307000	000000	 CAIG 0
   856	000762'	263740	000000	 POPJ P,      ;NO DIVISION BY ZERO
   857	000763'	202000	000000*	 MOVEM TMP      ;SAVE TRANSMISSION TIME, SECONDS
   858	000764'	200000	000741*	 MOVE RLCCNT
   859	000765'	230000	000763*	 IDIV TMP
   860	000766'	307000	000077	 CAIG 77        ;DON'T PRINT RATE IF LESS THAN 64
   861	000767'	263740	000000	 POPJ P,      ;DON'T BOTHER PRINTING
   862	000770'	260740	000746*	 PUSHJ P,DECOUT
   863	000771'	004000	000040	 OUTCHI BL
   864	000772'	004000	000050	 OUTCHI LPAREN
   865	000773'	200000	000745*	 MOVE TRTOT
   866	000774'	230000	000765*	 IDIV TMP
   867	000775'	260740	000770*	 PUSHJ P,DECOUT
   868				 OUTSTR [ASCIZ ") CHARS. PER SEC
   869	000776'	001000	001326'	"]
   870	000777'	263740	000000	 POPJ P,
   871
   872				; PRINT CHARS. TRANSMITTED AND RATE
   873	001000'	336000	000555*	CKTIM: SKIPN VERBOSE
   874				 JRST [ SKIPN TYPTIM
   875				        POPJ P,
   876	001001'	254000	001332'	        JRST CKTIM1]
   877				 OUTSTR [ASCIZ"
   878	001002'	001000	001335'	CHECKPOINT"]
   879	001003'	260740	000604'	 PUSHJ P,PRDAT
   880	001004'	047040	000023	CKTIM1: MSTIME R1,
   881	001005'	202040	000754*	 MOVEM R1,ETIME
   882	001006'	260740	000720'	 PUSHJ P,PRTIME
   883	001007'	263740	000000	 POPJ P,
   884
   885				; CHANGE FROM ASCII TO KATAKANA MODES FOR KANA FILES.
   886	001010'	336000	000000*	KKM: SKIPN URMODE       ;IS USER OVERRIDING
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-13
MASTER.MAC	23-DEC-86 12:29	

   887	001011'	332000	000000*	 SKIPE UTMODE       ;IS USER OVERRIDING
   888	001012'	263740	000000	 POPJ P,                ;YES
   889	001013'	200000	000750*	 MOVE TMODE
   890	001014'	200040	000000*	 MOVE R1,SYSTYP
   891	001015'	602040	000040	 TRNE R1,KATCAP
   892	001016'	302000	000001	 CAIE 1
   893	001017'	263740	000000	 POPJ P,        ;CANNOT DO IT
   894	001020'	200040	000652*	 MOVE R1,FDLIC  ;COPIED FROM RBLIC WHEN CONTROLLER IS DONOR
   895				;                OR SENT BY PDP-10 DONOR  (SEE SPATH)
   896	001021'	336000	000414*	 SKIPN DONOR    ;ARE WE DONOR.
   897	001022'	332000	000643*	 SKIPE SW10     ;NO, IS SLAVE A PDP-10?
   898	001023'	254000	001025'	 JRST .+2
   899	001024'	263740	000000	 POPJ P,        ;CANNOT SWITCH TO KATAKANA MODE
   900	001025'	607040	000200	 TLNN R1,200    ;TEST KATAKANA BIT
   901	001026'	263740	000000	 POPJ P,
   902	001027'	201000	000005	 MOVEI 5
   903	001030'	202000	001013*	 MOVEM TMODE
   904	001031'	202000	000243*	 MOVEM RMODE
   905	001032'	263740	000000	 POPJ P,
   906
   907				; CHANGE FROM BINARY TO BINARY UPDATE MODE.
   908	001033'	200000	001030*	UUM: MOVE TMODE
   909	001034'	200040	001014*	 MOVE R1,SYSTYP ;CHECK IF SLAVE CAN DO IT
   910	001035'	602040	000010	 TRNE R1,UPDCAP
   911	001036'	302000	000003	 CAIE 3
   912	001037'	263740	000000	 POPJ P,
   913	001040'	332000	000000*	 SKIPE UPDNO    ;IS USER FORBIDDING IT
   914	001041'	263740	000000	 POPJ P,        ;YES
   915	001042'	350000	001033*	 AOS TMODE
   916	001043'	350000	001031*	 AOS RMODE
   917	001044'	263740	000000	 POPJ P,
   918
   919	001045'			YESNO:  TIMER OFF^
   920	001045'	476000	000564*	 IFE OFF,<SETOM TIMFLG>
   921	001046'	002000	000000	        INCHWL R0
   922	001047'	261740	000000	        PUSH P,R0               ;SAVE FIRST CHAR INPUT
   923	001050'	002000	000000	        INCHWL R0
   924	001051'	302000	000012	        CAIE R0,LF              ;LOOP TIL LINE FEED FOUND
   925	001052'	254000	001050'	        JRST .-2
   926	001053'	262740	000000	        POP P,R0                ;GET FIRST CHAR INPUT
   927	001054'	302000	000156	        CAIE R0,"N"+40
   928	001055'	306000	000116	        CAIN R0,"N"
   929	001056'	263740	000000	        POPJ P,0
   930	001057'	302000	000171	        CAIE R0,"Y"+40
   931	001060'	306000	000131	        CAIN R0,"Y"
   932	001061'	254000	000000*	        JRST CPOPJ1
   933	001062'	332000	000000*	        SKIPE CIN
   934	001063'	254000	000000*	        JRST YESN2
   935				        OUTSTR [ASCIZ /
   936	001064'	001000	001340'	PLEASE TYPE 'Y' OR 'N': /]
   937	001065'	006000	000000	        CLRBFI
   938	001066'	254000	001045'	        JRST YESNO
   939
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-14
MASTER.MAC	23-DEC-86 12:29	

   940				; NEW FILE SEND CODE.
   941	001067'	476000	001021*	NEWSEN: SETOM DONOR     ;WE ARE THE DONOR
   942	001070'	476000	000000*	 SETOM MASTER   ;AS WELL AS THE CONTROLLER
   943	001071'	260740	000000*	 PUSHJ P,SAVREG  ;SAVE PARSER REGISTER SET
   944	001072'	200040	001346'	 MOVE R1,[DBLK,,RBCNT]
   945	001073'	251040	000000*	 BLT R1,RBLIC
   946	001074'	200000	001073*	 MOVE RBLIC
   947	001075'	202000	001020*	 MOVEM FDLIC
   948				 LNKMSG RCVCOD^
   949	001076'	201340	000102	 MOVEI C,RCVCOD
   950	001077'	260740	000303*	 PUSHJ P,SCOD
   951	001100'	260740	000327*	 PUSHJ P,SNDYEL
   952	001101'	260740	000336'	 PUSHJ P,SPATH
   953	001102'	606700	040000	 TRNN F,FILFND  ;ARE WE WRITING ON AN OLD FILE
   954	001103'	254000	001116'	 JRST NEWFILE   ;NO
   955				;ASK IF O.K.
   956	001104'	336000	001062*	 SKIPN CIN      ;DON'T PRINT MESSAGE IF RUNNING FROM COMMANDS FILE
   957	001105'	332000	000000*	 SKIPE ASK
   958	001106'	254000	001110'	 JRST .+2
   959				 OUTSTR [ASCIZ"
   960	001107'	001000	001347'	OKAY TO WRITE ON OLD FILE? "]
   961	001110'	332000	001105*	 SKIPE ASK
   962	001111'	254000	001121'	 JRST CHKO
   963	001112'	260740	001045'	 PUSHJ P,YESNO
   964	001113'	254000	000246*	 JRST ABORT
   965	001114'	402000	001045*	 SETZM TIMFLG   ;START HONORING TIMEOUTS
   966	001115'	260740	001033'	NEWF1: PUSHJ P,UUM    ;CHANGE TO UPDATE MODE
   967	001116'	260740	001010'	NEWFILE: PUSHJ P,KKM     ;CHANGE TO KATAKANA MODE
   968	001117'	260740	000000*	 PUSHJ P,TF     ;TRANSMIT FILE DATA
   969	001120'	254000	001154'	 JRST NEWR2     ;COPY FINISHED
   970	001121'	337000	001110*	CHKO: SKIPG ASK
   971				 OUTSTR [ASCIZ"
   972	001122'	001000	001355'	REPLACING FILE "]
   973	001123'	331000	001121*	 SKIPL ASK
   974				 OUTSTR [ASCIZ"
   975	001124'	001000	001361'	KEEPING FILE "]
   976	001125'	201040	000576*	 MOVEI R1,RBLK
   977	001126'	260740	000577*	 PUSHJ P,EROUN
   978	001127'	260740	000600*	 PUSHJ P,EROFN
   979				 OUTSTR [ASCIZ"
   980	001130'	001000	001230'	"]
   981	001131'	331000	001123*	 SKIPL ASK
   982	001132'	254000	001113*	 JRST ABORT
   983	001133'	254000	001115'	 JRST NEWF1     ;REPLACE FILE
   984
   985				; NEW FILE RECEIVE CODE
   986	001134'	402000	001067*	NEWREC: SETZM DONOR     ;WE ARE THE RECEIVER
   987	001135'	476000	001070*	 SETOM MASTER   ;AS WELL AS THE CONTROLLER
   988	001136'	260740	001071*	 PUSHJ P,SAVREG ;SAVE PARSER REGISTER SET
   989	001137'	200040	001365'	 MOVE R1,[RBLK,,RBCNT]
   990	001140'	251040	001074*	 BLT R1,RBLIC
   991				 LNKMSG DNRCOD^
   992	001141'	201340	000101	 MOVEI C,DNRCOD
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 1-15
MASTER.MAC	23-DEC-86 12:29	

   993	001142'	260740	001077*	 PUSHJ P,SCOD
   994	001143'	260740	001100*	 PUSHJ P,SNDYEL
   995	001144'	260740	000336'	 PUSHJ P,SPATH
   996	001145'	606700	040000	 TRNN F,FILFND   ;DID WE LOCATE THE FILE
   997	001146'	254000	000404*	 JRST FLKR      ;FILE NOT FOUND.  **CHANGE THIS IF ERROR MESSAGE
   998				;               AT FLKR (ERR5) GETS TOO SCARY.
   999	001147'	336000	000000*	 SKIPN UPDSW    ;ARE WE REPLACING A FILE AT THIS END
  1000	001150'	254000	001152'	 JRST NEWR1     ;NO, NEW FILE
  1001				; OLD FILE-- USE UPDATE MODE IF SLAVE CAN SEND IT
  1002	001151'	260740	001033'	 PUSHJ P,UUM
  1003	001152'	260740	001010'	NEWR1: PUSHJ P,KKM      ;SWITCH TO KATAKANA MODE WHEN POSSIBLE
  1004	001153'	260740	000000*	 PUSHJ P,RF
  1005	001154'	260740	000564'	NEWR2: PUSHJ P,COPFIN
  1006	001155'	260740	000720'	 PUSHJ P,PRTIME
  1007	001156'	254000	000000*	 JRST RESET             ;RETURN TO COMMAND PARSER.
  1008
  1009				 END
  1010
NO ERRORS DETECTED
PROGRAM BREAK IS 001366
4K CORE USED
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 2
MASTER.MAC	23-DEC-86 12:29		SYMBOL TABLE

ABORT		001132'	EXT	COPT		000240'	EXT	FIL		000001	SPD	KKM		001010'	
ABTCOD		000107	SIN	COPYST		000545'	ENT	FILFND		040000	SPD	KMODE		000407	SIN
ACKCOD		000112	SPD	CPACOD		000121	SPD	FINCD1		000114	SPD	LBIO		000042	SPD
ACMCOD		000111	SPD	CPOPJ1		001061'	EXT	FINCD2		000115	SPD	LC		000024	SPD
ACRCAP		000100	SIN	CR		000015	SPD	FIXCOD		000130	SPD	LCO		000004	SPD
ACT		000217'		DATUUO	047000	777723		FIXOPT		000050'	INT	LCOPT		000003'	EXT
ACT1		000224'		DBLK		000566'	EXT	FLKCOD		000103	SPD	LEFTFG		000010	SPD
ACT2		000227'		DCOPT		000233'	EXT	FLKF		000407'		LF		000012	SPD
ACT3		000233'		DECOUT		000775'	EXT	FLKFCD		000106	SPD	LIC		000706'	
ACT4		000247'		DEFFLG		001000	SPD	FLKR		001146'	EXT	LK370		000364'	
ADIAG		000426'	ENT	DIAG1		000516'		FLKRCD		000153	SPD	LM		000007	SPD
AMODE		000311	SIN	DIAG10		000542'		FLKRSE		000404'		LOGCOD		000131	SIN
AS		000011		DIAG2		000520'		FLKS		000411'		LOWSW		000036'	EXT
ASCII		000002	SIN	DIAG3		000522'		FLKSCD		000161	SPD	LPAREN		000050	SPD
ASCSTG		000052	SPD	DIAG4		000524'		FNAME		000020	SPD	LT		000075	SPD
ASK		001131'	EXT	DIAG5		000527'		FNCT		001200'	EXT	LUD		000003	SPD
AUTO		000001	SIN	DIAG6		000531'		FPF		000401'	EXT	LUDFLG		000001	SPD
BAD		000372'	EXT	DIAG7		000533'		FPFCOD		000116	SPD	MASKFG		000400	SPD
BADCOD		000145	SPD	DIAG8		000535'		FPFSET		000401'		MASTER		001135'	EXT
BCMCOD		000110	SPD	DIAG9		000540'		FRECL		000042'	EXT	MAXC		000073	SPD
BDIAG		000430'	ENT	DIAGT		000503'		FRPARA		000230'	EXT	MAXP		000202	SPD
BDIAG1		000453'		DNRCOD		000101	SPD	FSIZE	777777	777777	SPD	MAXPA		000021	SPD
BDIAG2		000455'		DONOR		001134'	EXT	FTPARA		000227'	EXT	MAXRS		050000	SPD
BDIAG3		000457'		EDIT10		100000	SPD	FX		000146'		MBOT		000100	SPD
BDIAG4		000467'		EM		000031	SIN	FXEXIT		000163'		MINC		000004	SPD
BI		004000	SPD	EORCOD		000134	SPD	GACK		000166'		MINP		000003	SPD
BIASA		000032	SPD	EOTCOD		000135	SPD	GACK1		000203'		MINPA		000002	SPD
BIASC		000010	SPD	ERASCD		000150	SPD	GACK2		000211'		MINRS		010000	SPD
BIASP		000200	SPD	EROFN		001127'	EXT	GC		000417'	EXT	MSGSW		002000	SPD
BIASPA		000010	SPD	EROUN		001126'	EXT	GCOD		000363'	EXT	MSTIME	047000	000023	
BINCAP		000020	SIN	ERR40		000073'		GETTAB	047000	000041		MTOP		000177	SPD
BL		000040	SPD	ERR41		000100'		GS		000012		NAKCOD		000113	SPD
BLNKSW		000040'	EXT	ERR42		000105'		GX		000013		NC		000025	SPD
BPARAM		000722'	EXT	ERR43		000110'		HSW		000002	SPD	NEWF1		001115'	
BYTESI		000725'	EXT	ERR44		000114'		HT		000011	SPD	NEWFIL		001116'	
BZCOD		000120	SPD	ERR45		000117'		IBIO		000034	SPD	NEWR1		001152'	
C		000007		ERR46		000125'		IGNEOF		000100	SPD	NEWR2		001154'	
CAN		000030	SIN	ERR47		000132'		IICHS		000001	SPD	NEWREC		001134'	ENT
CCNT		000732'	EXT	ERRCOD		000146	SPD	IICHW		000000	SPD	NEWSEN		001067'	ENT
CHGFLG		000200	SPD	ESC		000033	SIN	ILIC		000712'		NEWSF1		000324'	
CHKCOD		000132	SPD	ETIME		001005'	EXT	ILLCHR		200000	SPD	NEWSFN		000302'	
CHKO		001121'		ETX		000003	SIN	INBS		000036	SPD	NICOD		000133	SPD
CIN		001104'	EXT	EXTLEN		000031	SPD	INBW		000035	SPD	NM		000010	SPD
CKTIM		001000'	ENT	EXTTAB		000251'		INCHWL	002000	000000		NOECHO		000200	SPD
CKTIM1		001004'		F		000016		INSCOD		000142	SPD	NONE		000400	SIN
CLRBFI	006000	000000		FATTCD		000141	SPD	INVU		000361'	EXT	NT		000076	SPD
CLRBFO	005000	000000		FCK1		000000	SPD	IODEND		020000	SPD	OB		000037	SPD
CLRBO		000007	SIN	FCK2		000400	SPD	IOMOD		000014	SPD	OFDLIC		001207'	EXT
CNVDAT		000615'	EXT	FCK3		001000	SPD	IXMODE		000345	SIN	OFF		000000	SPD
CNVFMT		000000	EXT	FCOPT		000235'	EXT	JFYHR		000621'	EXT	OICH		000003	SPD
CNVTIM		000620'	EXT	FDLIC		001303'	EXT	JFYMIN		000624'	EXT	OICHI		000004	SPD
COLON		000072	SPD	FENQCD		000140	SPD	JFYSEC		000627'	EXT	ONLCOD		000122	SPD
COPFIN		000564'		FEXT		000003	SPD	KATCAP		000040	SIN	OPFCOD		000117	SPD
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87 PAGE 2-2
MASTER.MAC	23-DEC-86 12:29		SYMBOL TABLE

OPNCOD		000137	SPD	SETTT		000214'		UPDSW		001147'	EXT	
OPT1		000035'		SLVPRT		000043	SPD	URMODE		001010'	EXT	
OPT2		000043'	INT	SMODE		001000	SIN	US		000037	SIN	
OPT3		000051'		SNDOPT		000000'		UTMODE		001011'	EXT	
OPT4		000057'		SNDSTR		000331'		UUM		001033'		
OPT5		000065'		SNDYEL		001143'	EXT	VARCOD		000127	SPD	
OPTLEN		000000	EXT	SNO1		000014'		VAROPT		000047'	INT	
OPTRD		000422'		SNO2		000025'		VERBOS		001000'	EXT	
OPTSZ1		000004	SIN	SORTFG		000001	SPD	VERNUM		000001	SIN	
OPTSZ2		000006	SPD	SPATH		000336'		VRECL		000041'	EXT	
OUTCHI	004000	000000		STDOPT		000137'		WHYCOD		000143	SIN	
OUTCHR	003000	000000		STIME		000755'	EXT	WRITL		000717'		
OUTSTR	001000	000000		SUCCOD		000104	SPD	XMODE		000351	SIN	
P		000017		SUP		000010'	EXT	YELLOW		000012	SIN	
PERCOD		000147	SPD	SW10		001022'	EXT	YESN2		001063'	EXT	
PLIC		000672'		SW370		000344'	EXT	YESNO		001045'		
PR2D		000632'		SWB		020000	SPD	..0001	777777	777776	SPD	
PRDAT		000604'		SYS		000017	SPD	..0002		000201'		
PREFER		000005		SYSTYP		001034'	EXT	..0003	777777	777776	SPD	
PRLIC		000642'		T1		001161'	EXT	..0004		000357'		
PRTIM1		000732'		T2		000203'	EXT	..0005	777777	777774	SPD	
PRTIME		000720'		TABSIZ		000010	SPD	..0006		000375'		
PS		000014		TBI		000040	SPD	
PX		000015		TBO		000041	SPD	
QUICOD		000136	SIN	TESTNG		000001	SPD	
R0		000000		TF		001117'	EXT	
R1		000001		TI		010000	SPD	
R2		000002		TIMFLG		001114'	EXT	
R3		000003		TLIC		001157'		
R4		000004		TMODE		001042'	EXT	
R5		000005		TMP		000774'	EXT	
RANK		000010		TPARAM		000461'	EXT	
RBCNT		001365'	EXT	TRICOD		000125	SPD	
RBLIC		001140'	EXT	TRPCOD		000152	SPD	
RBLK		001125'	EXT	TRPDSK		000002	SPD	
RC		000004		TRTOT		000773'	EXT	
RCC		000006		TRU		000037'	EXT	
RCVCOD		000102	SPD	TRUCOD		000124	SPD	
RCVOPT		000024'		TSTRS		014000	SPD	
READL		000716'		TT		000424'	EXT	
RESET		001156'	EXT	TYPTIM		001332'	EXT	
RF		001153'	EXT	U		000006	SPD	
RLCCNT		000764'	EXT	UCOPT		000237'	EXT	
RMODE		001043'	EXT	ULKCOD		000105	SPD	
RPARAM		000464'	EXT	ULKF		000361'		
RPAREN		000051	SPD	ULKFCD		000154	SPD	
RS		000036	SPD	ULKS		000363'		
RSPCOD		000144	SIN	ULKSCD		000160	SPD	
SAVREG		001136'	EXT	UNAME		000015	SPD	
SBYTE		001201'	EXT	UNCT		000320'	EXT	
SCOD		001142'	EXT	UPDCAP		000010	SIN	
SDVIOS		000032	SPD	UPDMOD		000040	SPD	

MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87
MASTER.MAC	23-DEC-86 12:29		Symbol cross reference

ABORT	   334%	   461	   500	   964	   982
ABTCOD	    28#
ACKCOD	    31#
ACMCOD	    30#
ACRCAP	     2#
ACT	   474#	   567
ACT1	   480#	   501
ACT2	   476	   483#	   502
ACT3	   487#	   493
ACT4	   481	   501#
ADIAG	   318	   627#
AMODE	   113#
AS	   233#
ASCII	   131#
ASCSTG	   177#
ASK	   332%	   957	   961	   970	   973	   981
AUTO	   130#
BAD	   336%	   453	   582	   597
BADCOD	    93#
BCMCOD	    29#
BDIAG	   318	   630#
BDIAG1	   639	   650#
BDIAG2	   652#	   664
BDIAG3	   642	   649	   655#
BDIAG4	   660	   663	   665#
BI	   210#
BIASA	   144#
BIASC	   137#
BIASP	   134#
BIASPA	   141#
BINCAP	     4#
BL	   125#	   803	   840	   863
BLNKSW	   323%	   341	   351	   377
BPARAM	   327%	   816
BYTESI	   327%	   821
BZCOD	    41#
C	   229#	   418	   420	   427	   432	   434	   436	   438	   447	   532	   538	   541	   542	   543
	   545	   550	   558	   559	   576	   591	   620	   949	   992
CAN	   120#
CCNT	   330%	   830
CHGFLG	   206#
CHKCOD	    61#
CHKO	   962	   970#
CIN	   332%	   933	   956
CKTIM	   319	   873#
CKTIM1	   876	   880#
CLRBO	   166#
CNVDAT	   321%	   743	   744
CNVFMT	   321%
CNVTIM	   321%	   739	   747
COLON	   128#
COPFIN	   715#	  1005
COPT	   323%	   375	   492
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87
MASTER.MAC	23-DEC-86 12:29		Symbol cross reference

COPYST	   319	   695#
CPACOD	    43#	   394
CPOPJ1	   335%	   932
CR	   119#
DBLK	   331%	   478	   536	   719	   944
DCOPT	   325%	   487
DECOUT	   335%	   667	   675	   839	   843	   862	   867
DEFFLG	   208#
DIAG1	   681	   683#
DIAG10	   681	   692#
DIAG2	   681	   684#
DIAG3	   681	   685#
DIAG4	   681	   686#
DIAG5	   681	   687#
DIAG6	   681	   688#
DIAG7	   681	   689#
DIAG8	   681	   690#
DIAG9	   681	   691#
DIAGT	   650	   655	   680#
DNRCOD	    12#	   992
DONOR	   326%	   535	   616	   896	   941	   986
EDIT10	   214#
EM	   121#
EORCOD	    63#
EOTCOD	    64#
ERASCD	    96#
EROFN	   335%	   721	   729	   978
EROUN	   335%	   720	   728	   977
ERR40	   398#
ERR41	   401#	   460
ERR42	   396	   402#
ERR43	   396	   404#
ERR44	   396	   406#
ERR45	   396	   408#
ERR46	   396	   410#
ERR47	   396	   412#
ERRCOD	    94#
ESC	   122#
ETIME	   330%	   850	   881
ETX	   116#
EXTLEN	   479	   529#
EXTTAB	   479	   504#	   529
F	   238#	   343	   348	   569	   610	   695	   953	   996
FATTCD	    85#
FCK1	   152#
FCK2	   153#
FCK3	   154#
FCOPT	   324%	   488	   489
FDLIC	   328%	   617	   767	   776	   782	   786	   894	   947
FENQCD	    83#
FEXT	   157#	   478
FIL	   241#
FILFND	   213#	   569	   610	   953	   996
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87
MASTER.MAC	23-DEC-86 12:29		Symbol cross reference

FINCD1	    33#
FINCD2	    38#
FIXCOD	    58#	   394
FIXOPT	   316	   382#
FLKCOD	    14#	   532
FLKF	   600	   610#
FLKFCD	    27#	   600
FLKR	   334%	   607	   997
FLKRCD	    98#	   603
FLKRSE	   603	   607#
FLKS	   601	   612#
FLKSCD	   101#	   601
FNAME	   160#	   552
FNCT	   331%	   538	   541	   553
FPF	   334%	   604
FPFCOD	    39#	   602
FPFSET	   602	   604#
FRECL	   323%	   377
FRPARA	   324%	   484
FSIZE	   156#
FTPARA	   324%	   483
FX	   391	   392	   425#
FXEXIT	   422	   440#
GACK	   369	   444#
GACK1	   456	   458#
GACK2	   457	   464#
GC	   336%	   619
GCOD	   336%	   445	   572	   589
GS	   234#
GX	   235#
HSW	   200#
HT	   117#
IBIO	   169#
IGNEOF	   205#
IICHS	   163#
IICHW	   162#
ILIC	   784	   788	   806#
ILLCHR	   215#
INBS	   171#
INBW	   170#
INSCOD	    89#
INVU	   334%	   587
IODEND	   180#
IOMOD	   179#
IXMODE	   111#
JFYHR	   321%	   748
JFYMIN	   321%	   751
JFYSEC	   321%	   754
KATCAP	     3#	   891
KKM	   886#	   967	  1003
KMODE	   109#
LBIO	   175#
LC	   148#
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87
MASTER.MAC	23-DEC-86 12:29		Symbol cross reference

LCO	   201#	   343	   348
LCOPT	   323%	   344
LEFTFG	   202#
LF	   118#	   924
LIC	   773	   805#
LK370	   574	   590#
LM	   146#
LOGCOD	    60#
LOWSW	   323%	   342	   347	   376
LPAREN	   126#	   545	   841	   864
LT	   150#
LUD	   243#
LUDFLG	   197#
MASKFG	   207#
MASTER	   326%	   942	   987
MAXC	   138#
MAXP	   135#
MAXPA	   142#
MAXRS	   104#
MBOT	    11#
MINC	   139#
MINP	   136#
MINPA	   143#
MINRS	   105#
MSGSW	   209#	   695
MTOP	   102#
NAKCOD	    32#
NC	   147#	   148
NEWF1	   966#	   983
NEWFIL	   954	   967#
NEWR1	  1000	  1003#
NEWR2	   969	  1005#
NEWREC	   319	   986#
NEWSEN	   319	   941#
NEWSF1	   540	   552#
NEWSFN	   532#	   570
NICOD	    62#	   456
NM	   145#	   146
NOECHO	   181#
NONE	   132#
NT	   149#	   150
OB	   172#
OFDLIC	   328%	   615
OFF	   307#	   716	   920
OICH	   164#
OICHI	   165#
ONLCOD	    48#	   394
OPFCOD	    40#
OPNCOD	    67#
OPT1	   353	   354	   364	   365	   375#
OPT2	   316	   356	   367	   379#	   380	   383	   465
OPT3	   358	   385#
OPT4	   394#	   418	   427
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87
MASTER.MAC	23-DEC-86 12:29		Symbol cross reference

OPT5	   396#	   459
OPTLEN	   325%	   485
OPTRD	   606	   609	   611	   613	   622#
OPTSZ1	   316	   380#
OPTSZ2	   352	   363	   383#
P	   239#	   360	   369	   371	   386	   387	   388	   389	   391	   392	   417	   419	   421	   426
	   428	   433	   435	   437	   439	   440	   441	   442	   445	   462	   463	   466	   470	   496
	   533	   539	   544	   546	   549	   551	   554	   555	   556	   560	   562	   567	   570	   571
	   572	   588	   589	   605	   608	   619	   622	   625	   633	   654	   660	   663	   667	   675
	   678	   696	   706	   712	   720	   721	   728	   729	   732	   733	   749	   752	   755	   756
	   757	   763	   764	   770	   779	   785	   789	   792	   795	   804	   839	   843	   849	   856
	   861	   862	   867	   870	   875	   879	   882	   883	   888	   893	   899	   901	   905	   912
	   914	   917	   922	   926	   929	   943	   950	   951	   952	   963	   966	   967	   968	   977
	   978	   988	   993	   994	   995	  1002	  1003	  1004	  1005	  1006
PERCOD	    95#
PLIC	   779	   785	   789	   793#
PR2D	   749	   752	   755	   757#
PRDAT	   706	   735#	   879
PREFER	   226#
PRLIC	   732	   767#
PRTIM1	   820	   825	   829	   830#
PRTIME	   814#	   882	  1006
PS	   236#
PX	   237#
QUICOD	    65#
R0	   217#	   447	   474	   576	   591	   665	   673	   710	   747	   748	   751	   754	   758	   759
	   760	   763	   777	   796	   798	   799	   802	   806	   834	   921	   922	   923	   924	   926
	   927	   928	   930	   931
R1	   218#	   352	   353	   354	   356	   358	   359	   363	   364	   365	   367	   370	   417	   418
	   426	   427	   441	   448	   449	   450	   451	   452	   454	   455	   458	   459	   465	   478
	   480	   485	   487	   488	   489	   490	   491	   492	   493	   534	   536	   547	   552	   577
	   578	   579	   580	   581	   583	   584	   592	   593	   594	   595	   596	   598	   599	   618
	   621	   636	   637	   638	   645	   647	   648	   650	   655	   669	   671	   672	   697	   701
	   703	   719	   723	   725	   726	   727	   736	   737	   738	   739	   740	   741	   742	   743
	   744	   745	   757	   761	   762	   782	   784	   786	   788	   814	   818	   823	   827	   831
	   833	   853	   880	   881	   890	   891	   894	   900	   909	   910	   944	   945	   976	   989
	   990
R2	   219#	   429	   432	   434	   436	   438	   479	   480	   486	   488	   490	   501	   547	   552
	   558	   615	   617	   620	   627	   630	   634	   659	   662	   665	   668	   673	   776	   778
	   780	   815	   819	   824	   828	   832
R3	   222#	   548	   553	   561	   775	   781
R4	   223#
R5	   225#
RANK	   231#
RBCNT	   328%	   944	   989
RBLIC	   328%	   945	   946	   990
RBLK	   331%	   534	   727	   976	   989
RC	   224#
RCC	   227#
RCVCOD	    13#	   949
RCVOPT	   363#	   622
READL	   783	   810#
RESET	   334%	  1007
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87
MASTER.MAC	23-DEC-86 12:29		Symbol cross reference

RF	   335%	  1004
RLCCNT	   327%	   835	   838	   858
RMODE	   326%	   495	   904	   916
RPARAM	   326%	   641	   662
RPAREN	   127#	   550
RS	   123#
RSPCOD	    91#
SAVREG	   334%	   943	   988
SBYTE	   336%	   421	   433	   435	   437	   439	   539	   544	   546	   551	   560
SCOD	   336%	   419	   428	   533	   950	   993
SDVIOS	   168#
SERFLG	   203#
SETTT	   462	   468#	   588	   605	   608
SLVPRT	   176#
SMODE	   110#	   482	   644
SNDOPT	   341#	   571
SNDSTR	   549	   554	   558#	   561
SNDYEL	   336%	   440	   555	   951	   994
SNO1	   353#	   359
SNO2	   364#	   370
SORTFG	   199#
SPATH	   567#	   952	   995
STDOPT	   386	   387	   388	   389	   416#
STIME	   330%	   711	   851
SUCCOD	    20#	   457
SUP	   323%	   349
SW10	   331%	   475	   612	   768	   897
SW370	   331%	   355	   366	   537	   573
SWB	   212#
SYS	   159#
SYSTYP	   329%	   890	   909
T1	   322%	   416	   420	   425	   429	   444	   464
T2	   322%	   458
TABSIZ	   115#
TBI	   173#
TBO	   174#
TESTNG	     7#
TF	   335%	   968
TI	   211#
TIMFLG	   329%	   716	   920	   965
TLIC	   774#	   774	   777
TMODE	   326%	   494	   636	   699	   722	   846	   889	   903	   908	   915
TMP	   330%	   857	   859	   866
TPARAM	   326%	   640	   659
TRICOD	    53#	   394
TRPCOD	    97#
TRPDSK	   242#
TRTOT	   330%	   709	   842	   865
TRU	   323%	   377
TRUCOD	    51#	   394
TSTRS	   106#
TT	   322%	   468	   469	   568	   623	   624
TYPTIM	   330%	   848	   874
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87
MASTER.MAC	23-DEC-86 12:29		Symbol cross reference

U	   187#	   188	   188#	   189	   189#	   190	   190#	   191	   191#	   192	   192#	   193	   193#	   194
UCOPT	   325%	   490	   491
ULKCOD	    21#
ULKF	   585	   587#
ULKFCD	    99#	   585
ULKS	   586	   589#
ULKSCD	   100#	   586
UNAME	   158#	   547
UNCT	   331%	   542	   548
UPDCAP	     5#	   910
UPDMOD	   204#
UPDNO	   321%	   913
UPDSW	   328%	   999
URMODE	   325%	   886
US	   124#
UTMODE	   325%	   887
UUM	   908#	   966	  1002
UUOFLG	   183	   189	   190	   191	   192	   193	   194
VARCOD	    56#	   394
VAROPT	   316	   381#
VERBOS	   321%	   632	   705	   873
VERNUM	     9#
VRECL	   323%	   377
WHYCOD	    90#
WRITL	   787	   811#
XMODE	   112#	   646	   817
YELLOW	   167#
YESN2	   334%	   934
YESNO	   919#	   938	   963
..0001	   448	   458#
..0002	   448	   456#	   458
..0003	   577	   587#
..0004	   577	   585#	   587
..0005	   592	   604#
..0006	   592	   600#	   604
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87
MASTER.MAC	23-DEC-86 12:29		Macro/Opdef cross reference

CLRBFI	   194#	   937
CLRBFO	   193#
DATUUO	   745
DI	   288#	   446	   575	   590
DIS	   304#	   456	   457	   585	   586	   600	   601	   602	   603
GETTAB	   737	   741
INCHWL	   190#	   921	   923
LNKMSG	   283#	   948	   991
MSTIME	   710	   880
OPD	   184#	   188	   189	   190	   191	   192	   193
OUTCHI	   192#	   750	   753	   803	   840	   841	   863	   864
OUTCHR	   191#	   760	   762	   798	   802
OUTSTR	   189#	   459	   460	   497	   634	   635	   650	   651	   652	   655	   656	   661	   672	   676
	   703	   704	   707	   717	   726	   730	   735	   771	   790	   836	   844	   868	   877	   935
	   959	   971	   974	   979
TIMER	   308#	   715	   919
W	   244#
W1	   248#
W2	   257#
W3	   270#
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87
MASTER.MAC	23-DEC-86 12:29		Opcode cross reference

ADD	   542
ADDI	   543	   559	   645	   647	   666	   674	   759	   761	   797	   801	   854
ANDI	   793	   800
AOBJN	   359	   370	   451	   493	   501	   580	   595	   781
AOS	   347	   351	   834	   915	   916
ASCIZ	   398	   401	   402	   404	   406	   408	   410	   412	   497	   627	   630	   635	   651	   652
	   656	   661	   669	   671	   676	   683	   684	   685	   686	   687	   688	   689	   690	   691
	   692	   697	   701	   704	   707	   717	   723	   725	   730	   735	   771	   790	   836	   844
	   868	   877	   935	   959	   971	   974	   979
BLT	   945	   990
CAIE	   345	   643	   700	   724	   847	   892	   911	   924	   927	   930
CAIG	   637	   638	   648	   855	   860
CAIL	   833	   853
CAIN	   350	   644	   646	   817	   822	   826	   928	   931
CAME	   450	   480	   579	   594	   641
CAMN	   356	   367	   495
DEFINE	   184	   244	   248	   257	   270	   283	   288	   304	   308
DIV	   832
DMOVE	   464
DMOVEM	   444
END	  1009
ENTRY	   318	   319
EXP	   377	   379	   394	   396	   681
EXTERN	   321	   322	   323	   324	   325	   326	   327	   328	   329	   330	   331	   332	   334	   335
	   336
HLLZ	   478
HRLZ	   447	   576	   591
HRLZI	   485
HRR	   449	   578	   593
HRREI	   486
HRRZ	   454	   583	   598
IDIV	   748	   751	   754	   859	   866
IDIVI	   758	   852
IDPB	   620
IFDEF	   183	   189	   190	   191	   192	   193	   194
IFE	   716	   920
IFG	   716	   920
ILDB	   432	   434	   436	   438	   558	   777
INTERN	   316
IRP	   456	   585	   600
JFCL	   746
JRST	   346	   357	   368	   422	   455	   476	   481	   500	   502	   538	   540	   574	   584	   599
	   606	   609	   611	   613	   624	   629	   639	   642	   649	   664	   818	   820	   823	   825
	   827	   829	   874	   876	   898	   925	   932	   934	   938	   954	   958	   962	   964	   969
	   982	   983	   997	  1000	  1007
JSR	   453	   582	   597
LDB	   665	   673	   782	   786
LSH	   780	   807	   808
LSHC	   796	   799
MOVE	   344	   349	   352	   353	   363	   364	   418	   420	   427	   429	   448	   458	   479	   487
	   489	   491	   494	   538	   541	   547	   548	   552	   553	   577	   592	   615	   617	   636
	   640	   668	   699	   722	   736	   740	   747	   767	   773	   775	   776	   783	   787	   816
	   821	   830	   838	   842	   846	   850	   858	   865	   889	   890	   894	   908	   909	   944
MASTER -- TELECOPY CONTROLLER	MACRO 12.5-46.0 08:12 25-OCT-87
MASTER.MAC	23-DEC-86 12:29		Opcode cross reference

	   946	   989
MOVEI	   461	   482	   532	   534	   536	   545	   550	   587	   604	   607	   618	   627	   630	   659
	   662	   669	   671	   697	   701	   719	   723	   725	   727	   744	   814	   815	   818	   819
	   823	   824	   827	   828	   902	   949	   976	   992
MOVEM	   416	   425	   465	   469	   483	   484	   492	   711	   739	   743	   774	   835	   857	   881
	   903	   904	   947
MUL	   831
OPDEF	   189	   190	   191	   192	   193	   194
POINT	   429	   547	   552	   615	   617	   665	   673	   773	   782	   786
POP	   441	   763	   926
POPJ	   360	   371	   442	   463	   466	   470	   496	   556	   562	   625	   633	   654	   678	   696
	   712	   733	   756	   764	   770	   792	   795	   804	   849	   856	   861	   870	   875	   883
	   888	   893	   899	   901	   905	   912	   914	   917	   929
PUSH	   417	   426	   757	   922
PUSHJ	   369	   386	   387	   388	   389	   391	   392	   419	   421	   428	   433	   435	   437	   439
	   440	   445	   462	   533	   539	   544	   546	   549	   551	   554	   555	   560	   567	   570
	   571	   572	   588	   589	   605	   608	   619	   622	   660	   663	   667	   675	   706	   720
	   721	   728	   729	   732	   749	   752	   755	   779	   785	   789	   839	   843	   862	   867
	   879	   882	   943	   950	   951	   952	   963	   966	   967	   968	   977	   978	   988	   993
	   994	   995	  1002	  1003	  1004	  1005	  1006
REPEAT	   385	   390	   430
SETOM	   341	   342	   568	   716	   920	   941	   942	   987
SETZ	   474	   738	   742	   806
SETZM	   709	   965	   986
SIXBIT	   504	   505	   506	   507	   508	   509	   510	   511	   512	   513	   514	   515	   516	   517
	   518	   519	   520	   521	   522	   523	   524	   525	   526	   527	   528	   805	   810	   811
SKIPE	   355	   366	   537	   573	   705	   768	   887	   897	   913	   933	   957	   961
SKIPG	   970
SKIPGE	   468
SKIPL	   354	   365	   623	   973	   981
SKIPN	   475	   535	   612	   616	   632	   848	   873	   874	   886	   896	   956	   999
SOJG	   561	   621
SUB	   851
TDNE	   488	   490
TITLE	   313
TLNN	   452	   581	   596	   900
TRN	   809
TRNE	   670	   778	   891	   910
TRNN	   769	   794	   953	   996
TRO	   343	   569
TROE	   695
TRZ	   348	   610
XCT	   358	   784	   788
XWD	   375	   376	   456	   457	   585	   586	   600	   601	   602	   603e$