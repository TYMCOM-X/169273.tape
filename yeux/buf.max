
TITLE	BUF.. - TRANSLATED BY BLISS-10

EXTERN	.ENT.0,MYAUN,MYUSER,CLOSE,.EXT.0,SETOPN
EXTERN	OPEN,TMPNAM,SETLKB,LOOKUP,ENTER,ALCPAG
EXTERN	MAPP,UNMAPP,DLCPAG,RELEAS,ERROR

INTERN	BUF.O,BUF.P,BUF.L,BUF.C,ENVINI,XCTCHN
INTERN	MACCHN,TXTCHN,ALTCHN,ENVCHN,MODCHN,USECHN
INTERN	.SREG,BUF.0

;ACS

BDIR=0
PMAP=1
GMAP=2
WINBUF=3
STSBUF=4
ECHBUF=5
TXTBUF=6
KILBUF=7
CMDBUF=10
TMPBUF=11
ENVRNG=12
TXTRNG=13
KILRNG=14
CMDRNG=15
TMPRNG=16
EDIR=17


	TWOSEG


 	RELOC	400000

ENVCRE:
BUF.0:	JSP	ENVRNG,.ENT.0	;400000	265500,0
	PUSH			;400001	261000,0
	PUSH			;400002	261000,0
	PUSHJ			;400003	260000,0
	SUB	PMAP		;400004	274000,1
	TRNE	WINBUF,1	;400005	602140,1
	JRST	BUF.0+11	;400006	254000,400011
	PUSH	PMAP		;400007	261000,1
	JRST	BUF.0+116	;400010	254000,400116
	PUSH			;400011	261000,0
	PUSH	GMAP		;400012	261000,2
	PUSHJ			;400013	260000,0
	SUB	PMAP		;400014	274000,1
	TRNE	WINBUF,1	;400015	602140,1
	JRST	BUF.0+24	;400016	254000,400024
	PUSH			;400017	261000,0
	PUSHJ			;400020	260000,0
	SUB	GMAP		;400021	274000,2
	PUSH	WINBUF		;400022	261000,3
	JRST	BUF.0+116	;400023	254000,400116
	PUSH	WINBUF		;400024	261000,3
	PUSHJ			;400025	260000,0
	SUB	GMAP		;400026	274000,2
	MOVEM	WINBUF,EDIR	;400027	202140,17
	MOVEI	PMAP,1		;400030	201040,1
	CAIE	WINBUF,		;400031	302140,0
	SETZ	PMAP,		;400032	400040,0
	TRNE	PMAP,1		;400033	602040,1
	JRST	BUF.0+50	;400034	254000,400050
	PUSH	STSBUF		;400035	261000,4
	PUSH	STSBUF		;400036	261000,4
	PUSH	WINBUF		;400037	261000,3
	PUSHJ			;400040	260000,0
	SUB	ECHBUF		;400041	274000,5
	TRNE	WINBUF,1	;400042	602140,1
	JRST	BUF.0+55	;400043	254000,400055
	PUSH	EDIR		;400044	261000,17
	PUSH	WINBUF		;400045	261000,3
	PUSHJ			;400046	260000,0
	SUB	PMAP		;400047	274000,1
	PUSH			;400050	261000,0
	PUSHJ	BUF.0+20	;400051	260000,400020
	SUB	GMAP		;400052	274000,2
	PUSH	ECHBUF		;400053	261000,5
	JRST	BUF.0+116	;400054	254000,400116
	MOVE	STSBUF,EDIR	;400055	200200,17
	MOVE	ECHBUF,TXTBUF	;400056	200240,6
	MOVEM	ECHBUF,(STSBUF)	;400057	202244,0	SIXBIT	02D   
	MOVE	TXTBUF,KILBUF	;400060	200300,7
	MOVEM	TXTBUF,GMAP(STSBUF);400061	202304,2
	MOVE	KILBUF,CMDBUF	;400062	200340,10
	MOVEM	KILBUF,WINBUF(STSBUF);400063	202344,3	SIXBIT	03D  #
	MOVE	CMDBUF,MYAUN	;400064	200400,0
	MOVEM	CMDBUF,ECHBUF(STSBUF);400065	202404,5
	MOVE	TMPBUF,MYUSER	;400066	200440,0
	MOVEM	TMPBUF,TXTBUF(STSBUF);400067	202444,6
	MOVE	ENVRNG,PMAP	;400070	200500,1
	MOVEM	ENVRNG,KILBUF(STSBUF);400071	202504,7
	MOVE	PMAP,TMPBUF	;400072	200040,11
	MOVEM	PMAP,776(STSBUF);400073	202044,776
	SETOM	777(STSBUF)	;400074	476004,777
	MOVEI	ECHBUF,3	;400075	201240,3
	MOVEM	ECHBUF,1000(STSBUF);400076	202244,1000
	PUSH	STSBUF		;400077	261000,4
	PUSH	TXTBUF		;400100	261000,6
	PUSH	WINBUF		;400101	261000,3
	PUSHJ			;400102	260000,0
	SUB	ECHBUF		;400103	274000,5
	TRNE	WINBUF,1	;400104	602140,1
	JRST	BUF.0+121	;400105	254000,400121
	PUSH	EDIR		;400106	261000,17
	PUSH	WINBUF		;400107	261000,3
	PUSHJ	BUF.0+46	;400110	260000,400046
	SUB	PMAP		;400111	274000,1
	PUSH			;400112	261000,0
	PUSHJ	BUF.0+51	;400113	260000,400051
	SUB	GMAP		;400114	274000,2
	PUSH	KILBUF		;400115	261000,7
	PUSHJ			;400116	260000,0
	SUB	GMAP		;400117	274000,2
	JRST			;400120	254000,0
	PUSH	EDIR		;400121	261000,17
	PUSH	WINBUF		;400122	261000,3
	PUSHJ	BUF.0+110	;400123	260000,400110
	SUB	PMAP		;400124	274000,1
	PUSH			;400125	261000,0
	PUSH	STSBUF		;400126	261000,4
	PUSHJ	CLOSE		;400127	260000,0
	SUB	PMAP		;400130	274000,1
	MOVEI	WINBUF,1	;400131	201140,1
	JRST	.EXT.0		;400132	254000,400120
ENVINI:	PUSH			;400133	261000,0
	PUSH	ENVRNG		;400134	261000,12
	PUSH	TXTRNG		;400135	261000,13
	PUSH	STSBUF		;400136	261000,4
	PUSHJ	SETOPN		;400137	260000,0
	SUB	KILRNG		;400140	274000,14
	PUSH	CMDRNG		;400141	261000,15
	PUSH			;400142	261000,0
	PUSHJ	OPEN		;400143	260000,400003
	SUB	PMAP		;400144	274000,1
	TRNE	WINBUF,1	;400145	602140,1
	JRST	ENVINI+16	;400146	254000,400151
	PUSH	PMAP		;400147	261000,1
	JRST	ENVINI+147	;400150	254000,400302
	PUSH	GMAP		;400151	261000,2
	PUSH	TMPRNG		;400152	261000,16
	PUSHJ	TMPNAM		;400153	260000,0
	SUB	GMAP		;400154	274000,2
	PUSH	WINBUF		;400155	261000,3
	PUSH	EDIR		;400156	261000,17
	PUSH	STSBUF		;400157	261000,4
	PUSHJ	SETLKB		;400160	260000,0
	SUB	KILRNG		;400161	274000,14
	PUSH	CMDRNG		;400162	261000,15
	PUSH	GMAP		;400163	261000,2
	PUSHJ			;400164	260000,0
	SUB	PMAP		;400165	274000,1
	TRNE	WINBUF,1	;400166	602140,1
	JRST	ENVINI+54	;400167	254000,400207
	PUSH	GMAP		;400170	261000,2
	PUSHJ	ENVCRE		;400171	260000,400000
	SUB	GMAP		;400172	274000,2
	TRNE	WINBUF,1	;400173	602140,1
	JRST	ENVINI+44	;400174	254000,400177
	SETZ	WINBUF,		;400175	400140,0
	POPJ			;400176	263000,0
	PUSH	CMDRNG		;400177	261000,15
	PUSH	GMAP		;400200	261000,2
	PUSHJ	LOOKUP		;400201	260000,400164
	SUB	PMAP		;400202	274000,1
	TRNE	WINBUF,1	;400203	602140,1
	JRST	ENVINI+54	;400204	254000,400207
	PUSH	CMDBUF		;400205	261000,10
	JRST	ENVINI+147	;400206	254000,400302
	PUSH	CMDRNG		;400207	261000,15
	PUSH	GMAP		;400210	261000,2
	PUSHJ	ENTER		;400211	260000,400013
	SUB	PMAP		;400212	274000,1
	TRNE	WINBUF,1	;400213	602140,1
	JRST	ENVINI+67	;400214	254000,400222
	PUSH	CMDRNG		;400215	261000,15
	PUSHJ	BUF.0+113	;400216	260000,400113
	SUB	GMAP		;400217	274000,2
	PUSH	WINBUF		;400220	261000,3
	JRST	ENVINI+147	;400221	254000,400302
	PUSH	WINBUF		;400222	261000,3
	PUSHJ	ALCPAG		;400223	260000,400025
	SUB	GMAP		;400224	274000,2
	MOVEM	WINBUF,EDIR	;400225	202140,17
	MOVEI	PMAP,1		;400226	201040,1
	CAIE	WINBUF,		;400227	302140,0
	SETZ	PMAP,		;400230	400040,0
	TRNN	PMAP,1		;400231	606040,1
	JRST	ENVINI+105	;400232	254000,400240
	PUSH	CMDRNG		;400233	261000,15
	PUSHJ	ENVINI+63	;400234	260000,400216
	SUB	GMAP		;400235	274000,2
	PUSH	ECHBUF		;400236	261000,5
	JRST	ENVINI+147	;400237	254000,400302
	PUSH	TMPBUF		;400240	261000,11
	PUSH	STSBUF		;400241	261000,4
	PUSH	WINBUF		;400242	261000,3
	PUSHJ	MAPP		;400243	260000,400040
	SUB	ECHBUF		;400244	274000,5
	TRNE	WINBUF,1	;400245	602140,1
	JRST	ENVINI+125	;400246	254000,400260
	PUSH	EDIR		;400247	261000,17
	PUSH	WINBUF		;400250	261000,3
	PUSHJ	BUF.0+123	;400251	260000,400123
	SUB	PMAP		;400252	274000,1
	PUSH	CMDRNG		;400253	261000,15
	PUSHJ	ENVINI+101	;400254	260000,400234
	SUB	GMAP		;400255	274000,2
	PUSH	KILBUF		;400256	261000,7
	JRST	ENVINI+147	;400257	254000,400302
	MOVE	STSBUF,EDIR	;400260	200200,17
	HRRZI	ECHBUF,776(STSBUF);400261	551244,776
	HRLI	ECHBUF,4400	;400262	505240,4400
	CAMN	ECHBUF,TMPBUF	;400263	316240,11
	JRST	ENVINI+152	;400264	254000,400305
	PUSH	STSBUF		;400265	261000,4
	PUSH	STSBUF		;400266	261000,4
	PUSH	WINBUF		;400267	261000,3
	PUSHJ	UNMAPP		;400270	260000,400102
	SUB	ECHBUF		;400271	274000,5
	PUSH	EDIR		;400272	261000,17
	PUSH	WINBUF		;400273	261000,3
	PUSHJ	DLCPAG		;400274	260000,400251
	SUB	PMAP		;400275	274000,1
	PUSH	CMDRNG		;400276	261000,15
	PUSHJ	RELEAS		;400277	260000,400254
	SUB	GMAP		;400300	274000,2
	PUSH	ENVRNG		;400301	261000,12
	PUSHJ	ERROR		;400302	260000,400116
	SUB	GMAP		;400303	274000,2
	POPJ			;400304	263000,0
	MOVE	KILBUF,EDIR	;400305	200340,17
	ADDI	KILBUF,1000	;400306	271340,1000
	MOVEM	KILBUF,20	;400307	202340,20
	MOVEI	WINBUF,1	;400310	201140,1
	POPJ			;400311	263000,0
	SETZ	WINBUF,		;400312	400140,0
	CALLI	12		;400313	47000,12
BUF.C:	XWD	4400,27		;400314	
	XWD	4400,1		;400315	
	XWD	4400,35		;400316	
	XWD	4400,12		;400317	
	XWD	4400,17		;400320	
	XWD	4400,60		;400321	
	XWD	4400,71		;400322	
	XWD	4400,46		;400323	
	XWD	4400,35		;400324	
	XWD	4400,74		;400325	
	XWD	4400,24		;400326	
BUF.L:	1			;400327	
	XWD	2,2		;400330	
	XWD	1,1		;400331	
	2			;400332	
	0			;400333	
	XWD	3,3		;400334	
	XWD	1,14		;400335	
	XWD	35541,515603	;400336			SIXBIT	#MAIN#
	XWD	1000,2		;400337	
	XWD	34544,516203	;400340			SIXBIT	#EDIR#
	EQVM	KILBUF,(TXTRNG)	;400341	446353,0	ASCII	INX
	17			;400342	
	XWD	4,4		;400343	
	3			;400344	
	ORCAI	CMDRNG,@(TXTBUF);400345	455666,0	SIXBIT	ENV   
	TLCA	TXTRNG,@	;400346	645560,0	SIXBIT	TMP   
BUF.P:	10			;400347	
	HRLES	GMAP,@463712(KILRNG);400350	537134,463712	ASCII	Wedge
	TLZ	464746(CMDBUF)	;400351	621010,464746	ASCII	d Dis
	TSCA	520234(ECHBUF)	;400352	655005,520234	ASCII	k - N
	SETOI	364302(CMDBUF)	;400353	475010,364302	ASCII	O Cha
	TSOE	KILBUF,566346(KILRNG);400354	673354,566346	ASCII	nnels
	MOVEM	@660722(TMPRNG)	;400355	202036,660722	ASCII	 Avai
	TLOE	@266312(KILRNG)	;400356	663034,266312	ASCII	lable
	ADD			;400357	270000,0
	11			;400360	
	HRLES	GMAP,@463712(KILRNG);400361	537134,463712	ASCII	Wedge
	TLZ	567350(CMDBUF)	;400362	621010,567350	ASCII	d Ent
	TLZN	TMPBUF,26500(STSBUF);400363	627444,26500
	SETMB	@667336(CMDRNG)	;400364	417035,667336	ASCII	Canno
	XWD	721012,771322	;400365			ASCII	t Wri
	XWD	723124,42734	;400366			ASCII	te En
	XWD	733236,267734	;400367			ASCII	viron
	TLON	GMAP,@672134(CMDRNG);400370	667135,672134	ASCII	ment.
	0			;400371	
	10			;400372	
	HRLES	GMAP,@463712(KILRNG);400373	537134,463712	ASCII	Wedge
	TLZ	567354(CMDBUF)	;400374	621010,567354	ASCII	d Env
	TLCN	TMPBUF,767332(CMDRNG);400375	647455,767332	ASCII	ironm
	TLZN	KILBUF,420214(TMPRNG);400376	627356,420214	ASCII	ent F
	TLCN	TXTBUF,520132(KILRNG);400377	647314,520132	ASCII	ile -
	MOVEM	PMAP,162100(KILRNG);400400	202054,162100	ASCII	 Bad 
	XORB	KILBUF,@266702(TMPRNG);400401	433376,266702	ASCII	Forma
	XWD	721340,0	;400402	
	10			;400403	
	HRLES	GMAP,@463712(KILRNG);400404	537134,463712	ASCII	Wedge
	TLZ	664730(CMDBUF)	;400405	621010,664730	ASCII	d Fil
	TLZA	520206(ECHBUF)	;400406	625005,520206	ASCII	e - C
	TLNN	KILBUF,667750(CMDRNG);400407	607355,667750	ASCII	annot
	MOVEM	WINBUF,167310(CMDRNG);400410	202155,167310	ASCII	 Find
	MOVEM	PMAP,@262702(TMPRNG);400411	202076,262702	ASCII	 Crea
	XWD	723134,420214	;400412			ASCII	ted F
	TLCN	TXTBUF,527000(KILRNG);400413	647314,527000
	11			;400414	
	HRLES	GMAP,@463712(KILRNG);400415	537134,463712	ASCII	Wedge
	TLZ	560740(TMPBUF)	;400416	621011,560740	ASCII	d Map
	MOVEI	TXTBUF,@41702(STSBUF);400417	201324,41702	ASCII	 - Ca
	TSOE	KILBUF,-5700(CMDRNG);400420	673355,772100	ASCII	nnot 
	ANDCMB	KILBUF,@46702(STSBUF);400421	423364,46702	ASCII	Do Ma
	XWD	703415,167316	;400422			ASCII	pping
	MOVEM	WINBUF,567306(TMPRNG);400423	202156,567306	ASCII	 Func
	XWD	723235,767134	;400424			ASCII	tion.
	0			;400425	
	10			;400426	
	HRLES	GMAP,@463712(KILRNG);400427	537134,463712	ASCII	Wedge
	TLZ	562732(TMPBUF)	;400430	621011,562732	ASCII	d Mem
	TSON	TMPBUF,120132(EDIR);400431	677457,120132	ASCII	ory -
	MOVEM	PMAP,@167334(KILRNG);400432	202074,167334	ASCII	 Cann
	TSON	ENVRNG,40730(STSBUF);400433	677504,40730	ASCII	ot Al
	TLOE	KILBUF,@360750(KILRNG);400434	663374,360750	ASCII	locat
	TLZA	562732(TMPBUF)	;400435	625011,562732	ASCII	e Mem
	TSON	TMPBUF,127000(EDIR);400436	677457,127000
	2			;400437	
	1			;400440	
	1			;400441	
	2			;400442	
	3			;400443	
	1			;400444	

 	RELOC

BUF.O:	BLOCK	137

 	END	
