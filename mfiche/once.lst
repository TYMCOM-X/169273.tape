ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 1
S.MAC	13-JAN-88 11:55		S.MAC - with system parameter file for P035/D, January 1988

     1				SUBTTL	S.MAC - with system parameter file for P035/D, January 1988
     2
     3				IF2,<IFNDEF LISTSN,<TAPE>>	;Skip to PASS2 in all but COMMON.LST
     4				;THIS MODULE ASSEMBLED WITH KL-10 PARAMETER FILE - KLSYM.MAC
     5
     6					IF2,<IFNDEF LISTSN,<		;LIST KLSYM.MAC IN COMMON ONLY
     7								TAPE>>
     8				TITLE ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE
     9
    10				;*;	STOPCD(,ENTRY,ONCE)	;Macro is expanded after the PHASE statement
    11
    12				EXTERN	REYDCA,DCNYUR,REYDCM,DCNYMN,RESTRT,REONCE,RESCOD,REPSID
    13				EXTERN	RE.OND,RECOMP,RE.ONA,ONCMOD,DCFULL,DCNYOP,DCN.OP,DCN
    14
    15				;GENERAL PARAMETERS
    16
    17				EXTERNAL MEMSZP,SYSSZP,JBTUPM,UPSJOB
    18				EXTERNAL PMEMSZ,PJOBN,GETWDS
    19				IFCPU (KI)^
    20				IFNCPU(KI)^
    21				EXTERNAL SYSBEG,SYSEND,DEVLST,CRSHWD,NMRBPC,NMSTPC
    22				EXTERN %SAT.C,%RIB.C,%RB2.C,%CTLRU,%CTMRU,%CTLST
    23				EXTERN %UPT,%UPS,EPYPSN,USYPTN
    24				EXTERN M2REQ,M2SWT,PSREQ,PSSWT,PRREQ,PRSWT,M2HAV,SIREQ,SISWT,RIREQ,RISWT
    25
    26				;ROUTINES IN OTHER PLACES
    27
    28				EXTERNAL PEVEN8,CTEXT,COMTYI,CONMES,CPOPJ1,CRLF,FILMAN
    29				EXTERNAL FILOPT,INLMES,LNGMES,DECLOP,ASKQMM,TYPONL,ONCTIM
    30				EXTERNAL LINKDB,NULJOB
    31
    32				;FOR SETTING UP UPT
    33
    34				EXTERNAL CURUPT,EPT,EPT.PN,INTNUM,INTTAB
    35				IFCPU (KL)^
    36				EXTERNAL SERIAL,STATES,UPT,UPT.PN,UPTACP,UPTAC0,UPTPC
    37				EXTERNAL CH1,CH2,CH3,CH4,CH5,CH6,CH7,USRMPE
    38				EXTERNAL ERRPOV,UUOKNT,UUOKTR,UUOSNT,UUOSTR,UUOCNT,UUOCTR
    39				EXTERNAL UUOPNT,UUOPTR,EXCMPE,EXCPDL
    40				IFNCPU (KI)^
    41				IFNCPU (KI)^
    42
    43				;FOR TTY CONTROL AND USE DURING ONCE ONLY CODE
    44
    45				EXTERNAL COMTIA,COMTOA,TTCMCH,MAX,MIN,COMTYO
    46
    47				;VARIOUS SYSTEM PARAMETERS PRINTED AND MODIFIED
    48
    49				EXTERNAL CONFIG,SYSDAT,THSDAT,TIME,USRLIM
    50
    51				;STUFF FOR PAGE TABLE
    52
    53				EXTERN PGYUNU,PGYPGO,PGYFPL,PGYLMA,PGYLMJ,PGYLMV,PGYBPL
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 1
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

    54				EXTERN PGYDIO,PGYADR,PGYUNI,PGYPNO,PGYSPT,PGYSPB,PGYSPO,PGYCHT,PGYSIO
    55				EXTERN PGYSIP,PGYSOP,PGYERR,PGYNXM,PGYDRT,PGYATB,PGYUSE,PGYCSH
    56				EXTERN PGYSTS
    57				EXTERN PGYLST,CFRLST,MAXPCB,CFR.N,USELST,USE.N,MINPCB
    58				EXTERN SNDPGY,CNTPGY,IOPQTA,CHTPTR,CHTMSK
    59				EXTERN SIDLST,SODLST
    60				EXTERN USRMAX,MWSLIM
    61
    62				;STUFF FOR CORE CONTROL
    63
    64				EXTERNAL CORMXK
    65
    66				;INITIALIZE ROUTINES
    67
    68				EXTERNAL DDBLEN
    69
    70
    71	000000'	476000	000000*	ONCGO::	SETOM	DINITF##	;Set disk initialization in progress flag
    72	000001'	264000	000331'		JSR	APRINI		;MAKE SURE APR IS SETUP RIGHT
    73	000002'	135300	000000*		LDB	T1,REYDCA	;COPY USER SELECTED
    74	000003'	137300	000000*		DPB	T1,DCNYUR+ONCMOD-%OND; DSKCLN TYPE
    75	000004'	135300	000000*		LDB	T1,REYDCM	;COPY MONITOR SELECTED
    76	000005'	137300	000000*		DPB	T1,DCNYMN+ONCMOD-%OND; DSKCLN TYPE
    77	000006'	200300	000000*		MOVE	T1,RESTRT	;COPY RESTRT WORD TO PRESERVE
    78	000007'	202300	000000*		MOVEM	T1,REONCE+ONCMOD-%OND; FLAGS AND VALIDATOR
    79	000010'	402000	000006*		SETZM	RESTRT		;CLEAR JUST IN CASE
    80	000011'	402000	000000*		SETZM	CRSHWD		;CLEAR HERE IN CASE CLOCK GOES OFF
    81								; (ON NON-F3 MACHINES WE MADE IT THROUGH FOR SOME REASON)
    82	000012'	201040	000000*		MOVEI P,SYSPDL##	;GET A PDL SETUP
    83				IFCPU (KL)^
    84	000013'	264000	000000*	REPEAT CPZZ^,<JSR SPCINI##>	;ENTER SECONDARY PROTOCOL IF HAVEN'T ALREADY
    85	000014'	264000	000310'		JSR MOVSTP		;MAKE SURE SYMBOL TABLE PTR MOVED
    86
    87				;DETERMINE CTY SPEED
    88
    89	000015'	201400	000000		MOVEI T3,0	;THIS WILL COUNT THE NUMBER OF CLOCK TICS
    90				IFCPU (<KI,F3>)^
    91				IFCPU (KL)^
    92	000016'	702200	400000		CONO	TIM,TO.CIT	;CLEAR TIMER
    93	000017'	702200	043202		CONO	TIM,TO.SIT!^D1666	;START TIMER
    94	000020'	201400	004000		MOVEI	T3,.DTCTO		;SEND NULL CHAR
    95	000021'	202400	000451*		MOVEM	T3,EPT+SPCCMW
    96	000022'	402000	000455*		SETZM	EPT+SPCMTD
    97	000023'	720200	020000		CONO	DTE,TO11DB
    98	000024'	332000	000455*	CTYSP1:	SKIPE	EPT+SPCMTD		;CHECK FOR OUTPUT DONE
    99	000025'	254000	000032'		 JRST	CTYSP2			;DONE
   100	000026'	702340	020000		CONSO	TIM,TI.ITD		;TIMER TICKED YET?
   101	000027'	254000	000024'		 JRST	CTYSP1			;NO, KEEP WAITING
   102	000030'	702200	063202		CONO	TIM,TO.CTD!TO.SIT!^D1666 ;RESTART TIMER FOR NEXT TICK
   103				>;END IFCPU (KL)
   104				IFCPU (KS)^
   105	000031'	344400	000024'		AOJA	T3,CTYSP1	;AND COUNT
   106
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 1-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   107	000032'	201300	000000	CTYSP2:	MOVEI	T1,0		;New 1200 baud terminals don't need fills
   108	000033'	305400	000005		CAIGE	T3,5
   109	000034'	201300	000002		 MOVEI	T1,2		;2 FILLS FOR 150 baud
   110	000035'	305400	000003		CAIGE	T3,3
   111	000036'	201300	000005		 MOVEI	T1,5		;5 FILLS FOR 300 baud
   112	000037'	202300	000000*		MOVEM	T1,CTYFIL##	;SAVE IN FILL NUMBER (IN SCNSER)
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   113				COMMENT # DESCRIPTION OF MONITOR PHYSICAL LAYOUT DYNAMICS (ONCE.MAC)
   114
   115				IT IS ASSUMED THAT THE MONITOR TAKES UP LESS THAN 256K OF MEMORY
   116				TOTAL (INCLUDING ALL DYNAMICALLY ALLOCATED SPACE). IF THE MONITOR
   117				TOOK UP MORE THAN THIS, IT WOULD HAVE TO SHARE SOME OF ITS VIRTUAL
   118				PAGES TO ACCESS PHYSICAL PAGES IN MEMORY, WHICH IS NOT PRESENTLY
   119				DONE.
   120				IT IS ALSO ASSUMED THAT THE TOP OF THE SYMBOL TABLE IS LESS THAN
   121				340000. IN THE FUTURE, THIS RESTRICTION COULD BE LIFTED
   122				IF THE EXEC PER PROCESS PAGES WERE USED TO ACCESS THE SYMBOL TABLE
   123				UNTIL IT COULD BE MOVED DOWN UNDERNEATH 340000 (IF THAT WAS
   124				POSSIBLE.)
   125
   126				WHEN THE MONITOR IS FIRST LOADED INTO CORE BY THE BOOTSTRAP PROGRAM,
   127				THE LAYOUT OF PHYSICAL MEMORY IS:
   128
   129					SYMBOLS			(HIGH CORE, MUST BE BELOW 340000)
   130					ONCE CODE		(APPROX 240000 IN P034/P MONITOR)
   131					DDT
   132					DEBUG
   133					PATCH			<--- SYSSIZ
   134					MONITOR CODE + ASSEMBLED TABLES, STARTING AT PHYSICAL PAGE 0
   135
   136				THE ONCE ONLY CODE MUST APPEAR LAST IN PHYSICAL MEMORY SO THAT IT
   137				CAN BE REUSED AFTER THE SYSTEM IS INITIALIZED. THEREFORE,
   138				THE MONITOR SCANS MEMORY UP TO 256K FOR THE FIRST NON-EXISTENT
   139				LOCATION. THE ONCE CODE IS THEN LOCATED DIRECTLY UNDERNEATH
   140				THIS LOCATION TO ALLOW THE MAXIMUM AMOUNT OF SPACE UNDER ITSELF
   141				FOR THE MONITOR. THE ENTIRE MONITOR MUST FIT WITHIN THE
   142				FIRST CONTIGUOUS BLOCK OF MEMORY.
   143
   144				THE ONCE CODE THEN CHECKS TO SEE IF IT CAN BLT ITSELF UP
   145				TO THE TOP OF THE FIRST CONTIGUOUS BLOCK OF MEMORY WITHOUT
   146				OVERWRITING THE SYMBOL TABLE. (IF IT CANNOT, A MESSAGE IS
   147				PRINTED ON THE CONSOLE AND THE MONITOR CRASHES.)
   148				THE ADDRESS SPACE THEN LOOKS LIKE THIS:
   149
   150					ONCE TEMP. PGY, PCB, DDB
   151					ONCE CODE
   152					<BLANK AREA>
   153					SYMBOLS
   154					ONCE CODE
   155					DDT
   156					DEBUG
   157					PATCH			<--- SYSSIZ
   158					MONITOR CODE (IN LOW CORE)
   159
   160				THE ONCE CODE IS PHASED TO USE HIGH EXEC VIRTUAL LOCATIONS.
   161				AFTER ONCE IS BLTTED TO ITS NEW LOCATION, MAP SLOTS ARE SET
   162				UP FOR THE PROPER EXEC VIRTUAL PAGES, AND ONCE IS EXECUTED FROM THERE.
   163
   164				THEN ONCE CODE BLTS THE SYMBOLS DOWN TO THE TOP OF DDT.
   165				(IT IS ASSUMED THAT DDT IS THE LAST MODULE IN THE MONITOR
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 2-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   166				BEFORE THE ONCE CODE).
   167
   168					ONCE TEMP. PGY, PCB, DDB
   169					ONCE CODE
   170					<BLANK AREA>		<--- SYSSIZ IF DDT LOADED
   171					SYMBOLS
   172					DDT
   173					DEBUG
   174					PATCH			<--- SYSSIZ IF DDT NOT LOADED
   175					MONITOR CODE (IN LOW CORE)
   176
   177				ONCE THEN ALLOCATES SPACE FOR THE PGY TABLES, CHT, CALLS LINKDB
   178				TO ALLOCATE THE MISCELLANEOUS DYNAMIC SPACE, THEN ALLOCATES
   179				THE PCB TABLES AND PCB CORE PAGES.
   180
   181					ONCE PCB, PGY, DDB
   182					ONCE CODE
   183					<POSSIBLY BLANK>		<--- SYSSIZ
   184					PCB PAGES
   185					PCB TABLES
   186					FREE CORE
   187					FREE CORE BIT TABLE
   188					FILSER CORE
   189					<SNOOP HISTOGRAM TABLE IF INCLUDED>
   190					LDB
   191					TTY CHUNKS
   192					TMPCOR
   193					DDBS
   194					CHT
   195					PGY TABLES	(LOWEST TABLES ACCESSED THRU EXEC VIRTUAL SPACE)
   196					STT TABLES	(ACCESSED THROUGH UNMAPPED AREA)
   197					<SYMBOLS IF LOADED>
   198					<DDT IF LOADED>
   199					<DEBUG IF DDT LOADED>
   200					<PATCH IF DDT LOADED OR PATSIZ UPDATED>
   201					MONITOR (IN LOW CORE)
   202				# ;END COMMENT
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 3
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   203				;FIND OUT WHERE THE END OF THE FIRST CONTIGUOUS BLOCK OF MEMORY IS.
   204				IFNCPU (F3)^
   205	000040'	700200	027400		WRAPR	CLRNXM		;CLEAR NXM FLAG
   206	000041'	211400	020000		MOVNI	T3,1000*^D16	;TEST REGISTER, ADDED TO BEFORE TEST
   207	000042'	201300	000040		MOVEI	T1,1000/^D16	;NUMBER OF 8K MODULES TO TEST
   208	000043'	271400	020000	PTLP1:	ADDI	T3,1000*^D16	;CHECK EVERY 16 PAGES (8K)
   209	000044'	200350	000020		MOVE	T2,20(T3)	;TEST LOC 20 (AVOID ACS)
   210	000045'	700300	007000		CONSZ	APR,APRNXM	;END OF MEM?
   211	000046'	254000	000056'		 JRST	PTLPD		;DONE, STORE MEMSIZ AND HGHBLK FOR NOW.
   212	000047'	200350	000021		MOVE	T2,21(T3)
   213	000050'	200350	000022		MOVE	T2,22(T3)
   214	000051'	200350	000023		MOVE	T2,23(T3)	;IN CASE BAD INTERLEAVE
   215	000052'	700300	007000		CONSZ	APR,APRNXM	;IS IT?
   216	000053'	254000	000237'		 JRST	PTINTR		;YES, INTERLEAVE AND BOX OFF-LINE
   217	000054'	367300	000043'		SOJG	T1,PTLP1	;TEST FOR 1000 PAGES
   218	000055'	271400	020000		ADDI	T3,1000*^D16
   219				>;END IFNCPU (F3)
   220				IFCPU (F3)^
   221	000056'	202400	000000*	PTLPD:	MOVEM	T3,MEMSIZ##	;STORE SIZE OF CORE IN WORDS (UPDATED LATER)
   222	000057'	242400	777767		LSH	T3,-9		;
   223	000060'	202400	000000*		MOVEM	T3,HGHBLK	;
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 4
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   224				;NOW BLT ONCE, ONCDSK, AND REFSTR (FIRST MAKE SURE THEY FIT.)
   225				;AND THEN SET UP AN AREA OF THE MAP TO POINT TO THEM.
   226
   227				COMMENT # LAYOUT OF EXEC VIRTUAL ADDRESS SPACE AFTER ALL THIS IS DONE:
   228
   229
   230				VIRTUAL ADDRESS SYMBOLS AND LOCATIONS
   231				(LISTED IN ORDER OF DECREASING VIRTUAL ADDRESSES)
   232
   233						START				LENGTH
   234
   235				ONCE CODE	%ONC
   236				ONCE PCB PAGES	BOTTM				NMOCPC*1000
   237				ONCE DDB	BOTTM-ONCDDS+CNTPGY*NMOCPC	DDBLEN
   238				PGY TABLES	BOTTM-ONCDDS			CNTPGY*NMOCPC
   239
   240				PHYSICAL ADDRESS LOCATIONS
   241				(LISTED IN ORDER OF DECREASING PHYSICAL ADDRESS)
   242
   243						START				END
   244
   245				ONCE PCB PAGES	C(MEMSIZ)-NMOCPC*1000		C(MEMSIZ)-1
   246				<EMPTY SPACE>
   247				ONCE DDB	END OF PGY + 1			BEG + DDBLEN
   248				ONCE PGY	BEG OF PCB PAGES - ONCDDS	BEG + CNTPGY-NMOCPC
   249				ONCE CODE
   250
   251				NOTE THAT THE ONCE CODE OCCUPIES THE HIGHEST VIRTUAL ADDRESS
   252				LOCATIONS, BUT THE LOWEST PHYSICAL ONES.
   253				#;END COMMENT.
   254			014442	ONCPYP==<<CNTPGY*NMOCPC>+DDBLEN+777>/1000
   255			001000	ONCDDS==1000			;[cab] This is the resolution!
   256				;ONCDDS==ONCPYP*1000		;EXTRA SPACE AT TOP OF CORE TO ALLOCATE
   257								; ONCE ONLY PGY TABLES AND DDB.
   258
   259	000061'	564300	000000*		HLRO	T1,DDTSYM##	;GET SIZE OF SYMBOL TABLE
   260	000062'	550340	000061*		HRRZ	T2,DDTSYM##	;AND START LOC.
   261	000063'	315340	000000*		CAMGE	T2,PATSIZ##	;IS PATSIZ BIGGER?
   262	000064'	200340	000063*		 MOVE	T2,PATSIZ##	;YES, USE THAT AS BASE
   263	000065'	274340	000006		SUB	T2,T1		;T2=1ST UNUSED LOC.
   264	000066'	275340	000001		SUBI	T2,1		;T2=LAST USED LOC.
   265	000067'	660340	000777		TRO	T2,777		;GET TO A PAGE BOUNDARY.
   266	000070'	303340	337777		CAILE	T2,337777	;HAD BETTER FIT IN UNPAGED MEMORY
   267	000071'	254000	000257'		 JRST	PDDTNF		;DOES NOT.
   268	000072'	270340	000205'		ADD	T2,TBLLNP	;ADD IN SIZE OF REFSTR,
   269	000073'	270340	000206'		ADD	T2,TBLLNP+1	;ONCDSK, AND
   270	000074'	270340	000207'		ADD	T2,TBLLNP+2	;ONCE.
   271	000075'	271340	010000		ADDI	T2,<NMOCPC*1000>+ONCDDS
   272	000076'	311340	000056*		CAML	T2,MEMSIZ##	;DOES ONCE + ONCE PCB, PGY, DDB FIT?
   273	000077'	254000	000221'		 JRST	PTSML		;NO, GO TYPE OUT THE PROBLEM.
   274	000100'	201340	000001		MOVEI	T2,1		;YES,  DO THEY FIT IN THE MAP?
   275	000101'	200307	000205'	BLTCK:	MOVE	T1,TBLLNP(T2)	;GET SIZE, ROUNDED UP TO A PAGE.
   276	000102'	270307	000216'		ADD	T1,TBL%%%(T2)	;ADD IN ORIGIN.
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 4-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   277	000103'	313307	000217'		CAMLE	T1,TBL%%%+1(T2)	;PAST NEXT ORIGIN?
   278	000104'	254000	000254'		 JRST	BLTBAD		;YES, DIE.
   279	000105'	365340	000101'		SOJGE	T2,BLTCK	;NO, GO TO NEXT CHECK.
   280
   281				;EVERYTHING FITS. NOW BLT AND SETUP MAP SLOTS.
   282
   283	000106'	201300	000003		MOVEI	T1,3		;LENGTH OF BLT TABLE.
   284	000107'	200340	000076*		MOVE	T2,MEMSIZ##	;FIRST NON-EXIST LOCATION
   285	000110'	275340	010000		SUBI	T2,NMOCPC*1000+ONCDDS ;GET LAST LOCATION OF ONCE CODE
   286								; ITSELF + 1
   287	000111'	274346	000204'	BLTLP:	SUB	T2,TBLLNP-1(T1)	;T2=NEW START LOC.
   288	000112'	200600	000007		MOVE	P1,T2		;SAVE IT.
   289	000113'	504346	000212'		HRL	T2,TBLSTT-1(T1)	;T2/OLD START,,NEW START.
   290	000114'	554406	000212'		HLRZ	T3,TBLLNR-1(T1)	;SET UP T3 AS
   291	000115'	271407	777777		ADDI	T3,-1(T2)	;THE REAL END.
   292	000116'	251350	000000		BLT	T2,(T3)		;BLT.
   293
   294				    ;MAKE MAP ENTRIES FOR THIS MODULE.
   295	000117'	200246	000204'		MOVE	U,TBLLNP-1(T1)	;GET U=
   296	000120'	242240	777767		LSH	U,-9		;THE NO. OF MAP ENTRIES.
   297	000121'	200406	000207'		MOVE	T3,TBLNEW-1(T1)	;T3/BYTE POINTER.
   298	000122'	200340	000014		MOVE	T2,P1		;T2=
   299	000123'	242340	777767		LSH	T2,-9		;1ST REAL PAGE NO.
   300	000124'	660340	520000	MAPLP:	TRO	T2,PGE.A!PGE.W!PGE.C ;MAKE IT A MAP ENTRY.
   301	000125'	136340	000010		IDPB	T2,T3		;INTO THE MAP WITH IT.
   302	000126'	620340	520000		TRZ	T2,PGE.A!PGE.W!PGE.C	;T2=
   303	000127'	340340	000130'		AOJ	T2,.+1		;NEXT REAL PAGE NO.
   304	000130'	367240	000124'		SOJG	U,MAPLP		;CONTINUE TO MAP.
   305
   306	000131'	200340	000014		MOVE	T2,P1		;T2=CURRENT TOP.
   307	000132'	367300	000111'		SOJG	T1,BLTLP	;GO TO NEXT BLT.
   308								;FALL THRU TO NEXT PAGE
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 5
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   309				;SETUP EPT LOCATIONS, AND ON KL THE MAP FOR "UNMAPPED" REGION.
   310
   311	000133'	205300	255000		MOVSI	T1,(JFCL)	;SET
   312				IFCPU (KI)^
   313	000134'	202300	000421*		MOVEM	T1,EPT+421	;IN
   314	000135'	202300	000422*		MOVEM	T1,EPT+422	;THE
   315	000136'	202300	000423*		MOVEM	T1,EPT+423	;EPT.
   316				IFNCPU (KI)^
   317	000137'	201300	520000	REPEAT CPZZ^,<MOVEI	T1,PGE.A+PGE.W+PGE.C+0
   318	000140'	200340	000441'		MOVE	T2,[POINT 18,EPT+EPTMP0]	;BUILD A POINTER
   319	000141'	136300	000007	EPTMAP:	IDPB	T1,T2		;MAP 0 TO 337
   320	000142'	302300	520337		CAIE	T1,PGE.A+PGE.W+PGE.C+337
   321	000143'	344300	000141'		 AOJA	T1,EPTMAP
   322
   323				DEFINE X(A,B)<
   324					MOVE	T1,['B,,'A]
   325					PUSHJ	P,CSHCLR
   326				>;END X MACRO DEFINITION
   327
   328				;HERE IS THE LIST OF REGIONS THAT MUST BE UNCACHED.
   329
   330				>;END IFNCPU (KI)
   331
   332				IFCPU (KL)^
   333				DEFINE UNCACHE<
   334				EXTERNAL IRING,SIZIRG,ORING,SIZORG,SAXBAS,SAXN,CHNUNC,CHNUNE
   335				X	IRING,<1_SIZIRG>
   336				X	ORING,<1_SIZORG>
   337				X	150,165-150+1	;BASE VECTOR
   338				X	30,1		;BASE DEPOSITS IN PHYSICAL LOC 30
   339				X	SAXBAS,SAXN+^D16 ;SA-10 VECTORS
   340				X	CHNUNC,CHNUNE-CHNUNC+1 ;CHANNEL, UNIT DATA BLOCKS.
   341				>;END UNCACHE MACRO DEFINITION
   342
   343				>;END IFCPU (KL)
   344				IFCPU (KS)^
   345
   346				IFCPU (<KL,KS>)^
   347					UNCACHE	^
   348	000144'	200300	000442'		MOVE	T1,[1_SIZIRG,,IRING]
   349	000145'	260040	000405'		PUSHJ	P,CSHCLR
   350	000146'	200300	000443'		MOVE	T1,[1_SIZORG,,ORING]
   351	000147'	260040	000405'		PUSHJ	P,CSHCLR
   352	000150'	200300	000444'		MOVE	T1,[165-150+1	,,150]
   353	000151'	260040	000405'		PUSHJ	P,CSHCLR
   354	000152'	200300	000445'		MOVE	T1,[1		,,30]
   355	000153'	260040	000405'		PUSHJ	P,CSHCLR
   356	000154'	200300	000446'		MOVE	T1,[SAXN+^D16 ,,SAXBAS]
   357	000155'	260040	000405'		PUSHJ	P,CSHCLR
   358	000156'	200300	000447'		MOVE	T1,[CHNUNE-CHNUNC+1 ,,CHNUNC]
   359	000157'	260040	000405'		PUSHJ	P,CSHCLR
   360				>;END IFCPU (<KL,KS>)
   361				IFCPU (KL)^
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR GUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 5-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   362
   363	000160'	200340	000441'		MOVE	T2,[POINT 18,EPT+EPTMP0]
   364	000161'	205400	777774		MOVSI	T3,-4		;NEED 4 CACHED PAGES.
   365	000162'	134300	000007	FNDCSP:	ILDB	T1,T2		;GET SLOT
   366	000163'	606300	020000		TRNN	T1,PGE.C	;THIS ONE CACHED?
   367	000164'	344400	000162'		 AOJA	T3,FNDCSP	;NO, LOOK FOR 1 THAT IS.
   368	000165'	201300	001000		MOVEI	T1,1000		;GET ADDRESS
   369	000166'	221310	000000		IMULI	T1,(T3)		;FROM PAGE NUMBER
   370	000167'	574440	000010		HLRE	T4,T3		;GET NUMBER
   371	000170'	217000	000011		MOVMS	T4		;POSITIVE VERSION
   372	000171'	542311	777777*		HRRM	T1,CSRTAB-1(T4)	;DONT WIPE OUT (T1).
   373	000172'	253400	000162'		AOBJN	T3,FNDCSP
   374				>;END IFCPU (KL)
   375				IFCPU (KI)^
   376				IFNCPU (KI)^
   377	000173'	200300	000450'	REPEAT CPZZ^,<MOVE T1,[UPT.PN]>		;GET CURUPT UP SO CAN DO CLRPTA
   378	000174'	202300	000000*		MOVEM	T1,CURUPT
   379				IFCPU (KI)^
   380				IFNCPU (KI)^
   381	000175'	200300	000404'	REPEAT CPZZ^,<MOVE	T1,EBRSET
   382	000176'	202300	000000*		MOVEM	T1,EPT+EPTEBR
   383					CLRPTA	^SALL
   384	000177'	701220	000000*	^	;SETUP EBR, TURN ON PAGING
   385				>;END IFNCPU (KI)
   386
   387	000200'	265440	756034		JSP	T4,OPCBST	;Set up special ONCE PCB's
   388	000201'	701220	000000*		CLRPTA			;CLEAR PAGING MEMORY, MAP HAS CHANGED
   389	000202'	201300	754112		MOVEI	T1,ONCGOP	;STORE IN
   390	000203'	542300	000000*		HRRM	T1,SYSDSP##	;CASE OF RESTART
   391	000204'	254000	754112	ONCBUG::JRST	ONCGOP		;AND GO (GOOD PLACE FOR BREAKPOINT)
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 6
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   392				IFLE <<%REF-%OND>*<%OND-%ONC>>,<
   393				PRINTX ONCE'S TBLS DEF MUST BE ARRANGED LOWEST TO HIGHEST.>
   394
   395				EXTERN REFLNR,REFLNP,ONDLNR,ONDLNP,REFSTT,ONDSTT,SYSDRB
   396
   397				DEFINE TBLS
   398				< X ONC
   399				  X OND
   400				  X REF>
   401
   402				;SIZE ROUNDED UP TO A PAGE.
   403				DEFINE X(A)
   404				< A'LNP>
   405	000205'	000000	005000	TBLLNP: TBLS
   406	000206'	000000	000000*
   407	000207'	000000	000000*
   408
   409				DEFINE X(A)
   410				<EPTPGP (%'A'.N-1)>
   411	000210'	002200	000365*	TBLNEW: TBLS
   412	000211'	222200	000370*
   413	000212'	002200	000373*
   414
   415				;REAL SIZE,, OLD STARTING LOC.
   416				DEFINE X(A)
   417				<A'LNR,,A'STT>
   418	000213'			TBLSTT:
   419	000213'	004230	000576'	TBLLNR: TBLS
   420	000214'	000000*	000000*
   421	000215'	000000*	000000*
   422
   423				DEFINE X(A)
   424				<%'A>
   425	000216'	000000	754000	TBL%%%: TBLS
   426	000217'	000000	761000
   427	000220'	000000	770000
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 7
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   428				;HERE ARE THE ERROR ROUTINES
   429
   430	000221'	261040	000007	PTSML:	PUSH	P,T2	;SAVE AMOUNT NEEDED
   431					MOVEI T1,[ASCIZ /
   432	000222'	201300	000451'	MUST HAVE /]
   433	000223'	260040	000262'		PUSHJ	P,PAGTYP	;TYPE INFORMATION ON ERROR
   434	000224'	262040	000006		POP	P,T1
   435	000225'	242300	777767		LSH	T1,W2PLSH	;CONVERT TO PAGES
   436	000226'	260040	000271'		PUSHJ	P,PAGDEC
   437					MOVEI	T1,[ASCIZ / CONTIGUOUS MEMORY PAGES ON LINE
   438	000227'	201300	000454'	TO LOAD THIS MONITOR, ONLY /]
   439	000230'	260040	000262'		PUSHJ	P,PAGTYP
   440	000231'	200300	000107*		MOVE	T1,MEMSIZ##
   441	000232'	242300	777767		LSH	T1,W2PLSH	;CONVERT TO PAGES
   442	000233'	260040	000271'		PUSHJ	P,PAGDEC
   443					MOVEI	T1,[ASCIZ / PAGES ON LINE BEFORE FIRST HOLE.
   444	000234'	201300	000471'	/]
   445	000235'	260040	000262'		PUSHJ	P,PAGTYP
   446	000236'	254200	000221'		HALT	PTSML	;PAGES TOO SMALL TO BRING UP MONITOR
   447
   448				PTINTR:	MOVEI T1,[ASCIZ /
   449				INTERLEAVE SET INCORRECTLY OR MEMORY BOX OFF-LINE
   450	000237'	201300	000501'	ADDRESS /]
   451	000240'	260040	000262'		PUSHJ P,PAGTYP
   452	000241'	201300	000003		MOVEI T1,3
   453	000242'	700200	027400	INTLP:	WRAPR CLRNXM
   454	000243'	271400	000001		ADDI T3,1
   455	000244'	200350	000020		MOVE T2,20(T3)
   456	000245'	700340	007000		CONSO APR,APRNXM
   457	000246'	367300	000242'		SOJG T1,INTLP
   458	000247'	200300	000010		MOVE T1,T3
   459	000250'	260040	000267'		PUSHJ P,PAGOCT
   460					MOVEI T1,[ASCIZ / (OCTAL)
   461	000251'	201300	000516'	/]
   462	000252'	260040	000262'		PUSHJ P,PAGTYP
   463	000253'	254200	000237'		HALT	PTINTR		;PT INTERLEAVING INCORRECT
   464
   465				BLTBAD:	MOVEI T1,[ASCIZ /
   466				ONCE CODE BLT BAD, NOTIFY OPERATING SYSTEMS
   467	000254'	201300	000521'	/]
   468	000255'	260040	000262'		PUSHJ	P,PAGTYP
   469	000256'	254200	000254'		HALT	BLTBAD		;ONCE CODE BLT BAD
   470
   471				PDDTNF:	MOVEI	T1,[ASCIZ/
   472				VIRGIN MONITOR DOES NOT FIT WITHIN 340000(8) LOCATIONS.
   473				NOTIFY OPERATING SYSTEMS GROUP.
   474	000257'	201300	000533'	/]
   475	000260'	260040	000262'		PUSHJ	P,PAGTYP
   476	000261'	254200	000257'		HALT	PDDTNF		;MONITOR BIGGER THAN 340000
   477
   478	000262'	505300	440700	PAGTYP:	HRLI	T1,(POINT 7,0)
   479	000263'	134340	000006	PAGTY2:	ILDB	T2,T1
   480	000264'	322340	000305'		JUMPE	T2,PAGPOP
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 7-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   481	000265'	260040	000300'		PUSHJ	P,PAGTYO
   482	000266'	254000	000263'		JRST	PAGTY2
   483
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 8
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   484				;TTY output routines
   485
   486	000267'	201440	000010	PAGOCT:	MOVEI	T4,10
   487	000270'	254000	000272'		JRST	PAGDC1
   488	000271'	201440	000012	PAGDEC:	MOVEI	T4,^D10
   489	000272'	231311	000000	PAGDC1:	IDIVI	T1,(T4)
   490	000273'	506341	000000		HRLM	T2,(P)
   491	000274'	332000	000006		SKIPE	T1
   492	000275'	260040	000272'		PUSHJ	P,PAGDC1
   493	000276'	554341	000000		HLRZ	T2,(P)
   494	000277'	271340	000060		ADDI	T2,"0"
   495	000300'	261040	000006	PAGTYO:	PUSH	P,T1
   496	000301'	250340	000010		EXCH	T2,T3
   497	000302'	260040	000000*		PUSHJ	P,CTYTYO##	;Output character in T3
   498	000303'	262040	000006		POP	P,T1
   499	000304'	250340	000010		EXCH	T2,T3
   500	000305'	263040	000000	PAGPOP:	POPJ	P,
   501
   502	000306'	264000	000310'	PATSYM::JSR	MOVSTP		;MOVE SYMBOL TABLE POINTER
   503	000307'	254000	000000*		JRST	DDT##		;AND START EXEC DDT
   504
   505	000310'	000000	000000	MOVSTP:	0			;ROUTINE TO MOVE SYMBOL TABLE POINTER
   506	000311'	200300	000000*		MOVE	T1,JOBSYM##
   507	000312'	202300	000062*		MOVEM	T1,DDTSYM##	;MOVE THE SYMBOL TABLE POINTER
   508	000313'	201300	000307*		MOVEI	T1,DDT
   509	000314'	542300	000000*		HRRM	T1,SYSDDT##	;MAKE FOR ANOTHER RESTART
   510	000315'	200300	000556'		MOVE	T1,[JRST @MOVSTP]
   511	000316'	202300	000311'		MOVEM	T1,MOVSTP+1	;DO THIS ONLY ONCE
   512	000317'	254020	000310'		JRST	@MOVSTP		;AND RETURN
   513
   514	000320'	402000	000313*	SYSZRO::SETZM	DDT		;ZERO OUT DDT
   515	000321'	200300	000557'		MOVE	T1,[DDT,,DDT+1]
   516	000322'	251300	777777*		BLT	T1,DDTEND##-1
   517	000323'	200300	000311*		MOVE	T1,JOBSYM##
   518	000324'	402006	000000		SETZM	(T1)		;ZERO OUT THE SYMBOL TABLE
   519	000325'	253300	000324'		AOBJN	T1,.-1
   520	000326'	200300	000560'		MOVE	T1,[HALT 142]	;CANNOT RESTART
   521	000327'	202300	000142		MOVEM	T1,142
   522	000330'	047000	000012		EXIT
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 9
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   523				;PROCESSOR AND CLOCK INITIALIZATION
   524
   525	000331'	000000	000000	APRINI:	0
   526				IFCPU (KI),<JRST @APRINI>
   527				IFCPU (<KL,F3>),<
   528	000332'	700200	267760		WRAPR	LP.IOR+LP.CSF+LP.DSF+APRMSK+0B35   ;CLEAR ALL FLAGS
   529	000333'	700600	031577		WRPI	LI.CPP+LI.CPS+LI.COF+LI.PIF+LI.ACO ;AND PI SYSTEM
   530				IFCPU (KL),<
   531	000334'	701440	000000		SWPIA			;THROW AWAY BAD CACHE DATA
   532	000335'	700300	200000		CONSZ	APR,LP.CSB	;WAIT FOR SWEEP BUSY TO CLEAR
   533	000336'	254000	000335'		 JRST	.-1
   534	000337'	700200	020020		WRAPR	LP.CSF+LP.CSD	;AND NOW CLEAR SWEEP DONE.
   535				>;END IFCPU (KL)
   536	000340'	700140	000500'		WRADB	[0]		;TURN OFF ADDRESS BREAK
   537	000341'	200300	000561'		MOVE	T1,[EPT,,EPT+1]
   538	000342'	402000	000000*		SETZM	EPT
   539	000343'	251300	000777*		BLT	T1,EPT+777	;CLEAR ENTIRE EPT OUT
   540				IFCPU (F3),<
   541					MOVEI	T1,EPT+EPTACB##
   542					MOVEM	T1,EPT+EPTACP
   543				>;END IFCPU F3
   544	000344'	701200	000000*		WREBR	EPT.PN		;SET EPT UP FOR CTY ROUTINES
   545	000345'	701140	000562'		WRUBR	[LG.LUB+UPT.PN]	;SET UPT UP TO NULL JOB'S UPT
   546	000346'	201300	000000*		MOVEI	T1,UUOKNT
   547	000347'	202300	000430*		MOVEM	T1,UPT+UPTKNT	;IN CASE OF UUO ERROR
   548	000350'	201300	000000*		MOVEI	T1,PGFAIL	;IN CASE OF PAGE FAIL
   549	000351'	202300	000502*		MOVEM	T1,UPT+UPTNPP
   550	000352'	201300	000000*		MOVEI	T1,UUOKTR	;IN CASE OF PDL OVERFLOW OR SOMETHING
   551	000353'	202300	000431*		MOVEM	T1,UPT+UPTKTR
   552	000354'	201300	000000*		MOVEI	T1,EXCPDL	;PDL OVERFLOW INSTRUCTION
   553	000355'	202300	000422*		MOVEM	T1,EPT+EPTPOV	;AN MUUO THAT GOES TO UUOKTR.
   554	000356'	701140	000563'		EXECAC			;USE EXEC MODE ACS
   555				IFCPU (KL),<
   556	000357'	702200	420000		CONO	TIM,TO.CIT+TO.CTD	;CLEAR INTERVAL TIMER
   557	000360'	702600	405000		CONO	MTR,MO.LAC+MO.TOF+MO.CTB ;CLEAR TIME BASE, TURN ACCOUNTING OFF
   558				>;END IFCPU (KL)
   559	000361'	201300	000005		MOVEI	T1,NUMACB-1	;HIGHEST AC BLOCK NUMBER TO START WITH
   560	000362'	306300	000001	APRIN1:	CAIN	T1,EX0ACB	;SKIP OVER ONE WE'RE USING
   561	000363'	254000	000372'		 JRST	APRIN2		;DON'T TOUCH
   562	000364'	205340	401000		MOVSI	T2,(LG.LAB+<EX0ACB>B8)
   563	000365'	137300	000564'		DPB	T1,[POINT 3,T2,11] ;PUT INTO PREVIOUS AC FIELD
   564	000366'	701140	000007		WRUBR	T2		;SET PREVIOUS ACS
   565	000367'	201340	000001		MOVEI	T2,1		;0,,1
   566	000370'	256200	000565'		XCTBU	<SETZM 0>	;CLEAR OUT 0
   567	000371'	256240	000566'		XCTBU	<BLT T2,17>	;AND THE REST
   568	000372'	365300	000362'	APRIN2:	SOJGE	T1,APRIN1	;AND GO FOR ALL AC BLOCKS
   569
   570	000373'	701140	000563'		EXECAC			;BACK TO EXEC ACS
   571				IFCPU (KL),<
   572	000374'	200300	000567'		MOVE	T1,[POINT 3,CSATAB]
   573	000375'	205340	777600		MOVSI	T2,-200		;HOW BIG CACHE REFILL TABLE IS.
   574	000376'	134400	000006	CSALUP:	ILDB	T3,T1		;GET NEXT 3 BIT DATA
   575	000377'	242400	000017		LSH	T3,^D35-^D20	;GET IT TO BIT 20
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 9-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   576	000400'	137340	000570'		DPB	T2,[POINT 7,T3,33]
   577	000401'	700110	000000		WRFIL	(T3)
   578	000402'	253340	000376'		AOBJN	T2,CSALUP	;GO FOR MORE.
   579				>;END IFCPU (KL)
   580	000403'	254020	000331'		JRST	@APRINI
   581				> ;END IFCPU (<KL,F3>).
   582
   583				IFCPU (KS),<
   584					WRAPR	LP.IOR+LP.CSF+APRMSK	;CLEAR ALL FLAGS
   585					WRAPR	LP.DSF+LP.TIM		;DISABLE TIMER
   586					WRPI	LI.CPP+LI.CPS+LI.COF+LI.PIF+LI.ACO ;AND PI SYSTEM
   587					WRHSB	[HLTSTS##]	;SET THE ADDRESS FOR HALT STATUS BLOCK
   588					EXECAC			;USE EXEC MODE AC
   589					WREBR	EPT.PN		;SET UP EPT
   590					SETZM	RLWORD##	;BE SURE KEEP ALIVE FLAG OFF
   591					MOVEI	T1,6		;AVOID AC BLOCK 7, MICROCODE USES IT.
   592				APRIN1:	CAIN	T1,EX0ACB	;SKIP OVER ONE WE'RE USING
   593					 JRST	APRIN2		;DON'T TOUCH
   594					MOVSI	T2,(LG.LAB+<EX0ACB>B8)
   595					DPB	T1,[POINT 3,T2,11] ;PUT INTO PREVIOUS AC FIELD
   596					WRUBR	T2		;SET PREVIOUS ACS
   597					MOVEI	T2,1		;0,,1
   598					XCTTU	<SETZ 0,>	;CLEAR ALL THE ACS
   599					XCTTU	<BLT T2,17>	;
   600				APRIN2:	SOJGE	T1,APRIN1	;AND GO FOR ALL AC BLOCKS
   601				
   602					EXECAC			;BACK TO EXEC ACS
   603					MOVEI	T1,EPT+1
   604					HRLI	T1,EPT
   605					SETZM	EPT
   606					BLT	T1,EPT+777	;CLEAR ENTIRE EPT OUT
   607					JRST	@APRINI
   608				>;END IFCPU (KS)
   609
   610				IFCPU (<KL,F3>),<
   611	000404'	000000	620000*	EBRSET:	LG.CSL+LG.CSW+LG.TEN+EPT.PN> ;LOCATION TO SET EPTEBR FROM - MUST BE IN UNPAGED AREA.
   612				IFCPU (KS),<EBRSET: LG.TEN+EPT.PN>
   613
   614				IFNCPU (<KI,F3>),<
   615				;ROUTINE TO CLEAR CACHE BITS FOR EXEC MAP WHICH STARTS AT
   616				; EPTMP0. CALL WITH SIZE,,START ADDRESS IN T1.
   617
   618	000405'	554340	000006	CSHCLR::HLRZ	T2,T1		;GET SIZE IN T2
   619	000406'	271346	777777		ADDI	T2,-1(T1)	;GET LAST ADDRESS
   620	000407'	135300	000571'		LDB	T1,[POINT 9,T1,26] ;GET START PAGE NUMBER
   621	000410'	135340	000572'		LDB	T2,[POINT 9,T2,26] ;GET END PAGE NUMBER
   622	000411'	307300	000337		CAIG	T1,337		;PROTECT AGAINST STUPID CALLERS
   623	000412'	303340	000337		CAILE	T2,337
   624	000413'	256000	000573'		 STOPCD (.,STOP,ONCCSH,,<Bad data in ONCE:CSHCLR>);;CHSCLR+6
   625	000414'	275346	777777		SUBI	T2,-1(T1)	;OK, GET NUMBER OF PAGES TO DO
   626	000415'	241300	777777		ROT	T1,-1		;GET PLACE IN EPTMP0 TO START, EVEN/ODD IN 1B0
   627	000416'	201400	020000		MOVEI	T3,PGE.C	;ASSUME ODD
   628	000417'	331000	000006		SKIPL	T1		;SKIP IF ASSUMPTION CORRECT
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 9-3
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   629	000420'	207000	000010	CSHCL1:	MOVSS	T3		;SWITCH SIDES
   630	000421'	412406	000600*		ANDCAM	T3,EPT+EPTMP0(T1) ;CLEAR CACHE BIT
   631	000422'	643300	400000		TLCE	T1,(1B0)	;IF NEXT ONE IS EVEN,
   632	000423'	350000	000006		 AOS	T1		;GO TO NEXT WORD
   633	000424'	367340	000420'		SOJG	T2,CSHCL1	;IF ANY LEFT, GO.
   634	000425'	263040	000000		POPJ	P,		;DONE, RETURN.
   635
   636				;DATA FOR LOADING 4 CACHE REFILL ALGORITHM
   637
   638	000426'	012345	673123	CSATAB:	012345673123
   639	000427'	212371	271127		212371271127
   640	000430'	656755	670323		656755670323
   641	000431'	022301	234567		022301234567
   642	000432'	077700	074666		077700074666
   643	000433'	446431	331113		446431331113
   644	000434'	077700	070123		077700070123
   645	000435'	456745	574547		456745574547
   646	000436'	012201	210566		012201210566
   647	000437'	056045	654564		056045654564
   648	000440'	012345	670000		012345670000
   649				> ;END IFNCPU (<KI,F3>).
   650	000441'				LIT
   651	000441'	442200	000600*
   652	000442'	000000*	000000*
   653	000443'	000000*	000000*
   654	000444'	000016	000150
   655	000445'	000001	000030
   656	000446'	000020*	000000*
   657	000447'	000000*	000000*
   658	000450'	000000	000000*
   659	000451'	064251	552646
   660	000452'	521011	040654
   661	000453'	425000	000000
   662	000454'	202071	747250
   663	000455'	446172	547652
   664	000456'	515011	542632
   665	000457'	476453	120240
   666	000460'	406170	551500
   667	000461'	476344	046222
   668	000462'	472121	505250
   669	000463'	475011	447602
   670	000464'	421012	444222
   671	000465'	515011	547634
   672	000466'	446511	751130
   673	000467'	202371	646262
   674	000470'	200000	000000
   675	000471'	202410	143612
   676	000472'	515011	747100
   677	000473'	462231	642500
   678	000474'	412130	647644
   679	000475'	425010	644644
   680	000476'	516504	044236
   681	000477'	462125	606424
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 9-4
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   682	000500'	000000	000000
   683	000501'	064251	147250
   684	000502'	426451	442602
   685	000503'	532124	051612
   686	000504'	521011	147206
   687	000505'	476452	242606
   688	000506'	522313	120236
   689	000507'	511011	542632
   690	000510'	476453	120204
   691	000511'	476604	047614
   692	000512'	431331	444634
   693	000513'	424321	240610
   694	000514'	422450	551646
   695	000515'	200000	000000
   696	000516'	201211	741650
   697	000517'	406305	106424
   698	000520'	000000	000000
   699	000521'	064251	747206
   700	000522'	425010	347610
   701	000523'	425010	246250
   702	000524'	202050	142130
   703	000525'	202351	752222
   704	000526'	432624	047640
   705	000527'	426450	152222
   706	000530'	472164	051662
   707	000531'	516510	546646
   708	000532'	064240	000000
   709	000533'	064252	644644
   710	000534'	436231	620232
   711	000535'	476351	152236
   712	000536'	511010	447612
   713	000537'	515011	647650
   714	000540'	202151	152100
   715	000541'	536232	444222
   716	000542'	471006	332140
   717	000543'	301406	024160
   718	000544'	245011	447606
   719	000545'	406511	147634
   720	000546'	515341	505234
   721	000547'	476511	143262
   722	000550'	202372	042644
   723	000551'	406511	147216
   724	000552'	202473	151650
   725	000553'	426332	320216
   726	000554'	512372	550134
   727	000555'	064240	000000
   728	000556'	254020	000310'
   729	000557'	000000*	000001*
   730	000560'	254200	000142
   731	000561'	000000*	000001*
   732	000562'	100000	000450*
   733	000563'	401000	000000
   734	000564'	300300	000007
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 9-5
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   735	000565'	402000	000000
   736	000566'	251340	000017
   737	000567'	440300	000426'
   738	000570'	020700	000010
   739	000571'	111100	000006
   740	000572'	111100	000007
   741	000573'	260040	000000*
   742	000574'	575643	436350
   743	000575'	000001	000000
   744	000576'				VAR
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 10
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   745				;HERE IS THE CODE WHICH GETS MOVED TO THE TOP OF CORE.
   746
   747	000576'			ONCSTT:				;DEFINE "OLD" STARTING LOC.
   748
   749	754000				PHASE	%ONC
   750					STOPCD(,ENTRY,ONCE)   751					ENTRY	ONCE		;For library searches
   752	000576'	260040	000573*	ONCE::PUSHJ	P,DIE		;**** Default stopcode for "ONCE" ****
   753	000577'	575643	450000		SIXBIT	/ONCE/  	;Title of module
   754	000600'	000000	000000		S$NONAME,,0		;?NONAME stopcode "ONCE+nnn(nnnnnn)"
   755			754000	S$NAME==ONCE			;For STOPCDs with no arguments
   756					SALL>
   757					;Default for NONAME stopcodes
   758
   759		777777	024576'	%O==:ONCSTT-%ONC	;Offset for phased code
   760							;To patch SYSTEM.SAV, use LABEL+%O/
   761
   762				;HERE ARE THE TEMPORARY "PCBS" FOR ONCDSK AND REFSTR.
   763				; PAGE NUMBERS GET FILLED IN AFTER IT IS DETERMINED WHERE ONCE CODE WILL
   764				; LIVE IN PHYSICAL MEMORY.
   765
   766	754003			ONCPCB::
   767
   768			000007	CCOUNT==NMOCPC
   769
   770				DEFINE X (A)
   771				<INTERNAL %'A'.P
   772				%'A'.P:	Z
   773				Z
   774				Z
   775				CCOUNT==CCOUNT-1
   776				IFE CCOUNT,<Z>
   777				IFN CCOUNT,<EXP %'A'.P+4>
   778				>
   779
   780	000601'	000000	000000	OPCNAM
   781	000602'	000000	000000
   782	000603'	000000	000000
   783	000604'	000000	754007
   784	000605'	000000	000000
   785	000606'	000000	000000
   786	000607'	000000	000000
   787	000610'	000000	754013
   788	000611'	000000	000000
   789	000612'	000000	000000
   790	000613'	000000	000000
   791	000614'	000000	754017
   792	000615'	000000	000000
   793	000616'	000000	000000
   794	000617'	000000	000000
   795	000620'	000000	754023
   796	000621'	000000	000000
   797	000622'	000000	000000
   798	000623'	000000	000000
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 10-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   799	000624'	000000	754027
   800	000625'	000000	000000
   801	000626'	000000	000000
   802	000627'	000000	000000
   803	000630'	000000	754033
   804	000631'	000000	000000
   805	000632'	000000	000000
   806	000633'	000000	000000
   807	000634'	000000	000000
   808
   809
   810
   811				;HERE IS THE TABLE OF PCB ADDRESSES.
   812
   813				DEFINE X (A)
   814				<XWD 0,%'A'.P
   815				>
   816
   817	754037			OPCBTB:
   818	000635'	000000	754003	OPCBTB:	OPCNAM
   819	000636'	000000	754007
   820	000637'	000000	754013
   821	000640'	000000	754017
   822	000641'	000000	754023
   823	000642'	000000	754027
   824	000643'	000000	754033
   825	000644'	000000	000000	Z
   826				;HERE IS A LIST OF VIRTUAL ADDRESSES WHICH CORRESPOND TO
   827				; THE INDEX INTO OPCBTB, FOR USE IN CONVERTING PCB ADDRESS
   828				; INTO VIRTUAL ADDRESS TO LOOK IN FOR DATA.
   829
   830				DEFINE X (A)
   831				<EXP %'A'
   832				>;END MACRO DEFINITION
   833	000645'	000000	753000	OPCADR:	OPCNAM
   834	000646'	000000	752000
   835	000647'	000000	751000
   836	000650'	000000	750000
   837	000651'	000000	747000
   838	000652'	000000	746000
   839	000653'	000000	745000
   840
   841
   842
   843				;HERE IS THE TABLE OF MAP SLOT POINTERS FOR THE PCBS.
   844
   845				DEFINE X (A)
   846				<EPTPGS(%'A'.N,EPT)>
   847
   848	754056			MPSLOT:
   849	000654'	002200	000365*	OPCNAM
   850	000655'	222200	000365*
   851	000656'	002200	000364*
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 10-3
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   852	000657'	222200	000364*
   853	000660'	002200	000363*
   854	000661'	222200	000363*
   855	000662'	002200	000362*
   856
   857
   858
   859	000663'	000000	000000	ONCDDB::0			;LOCATION OF ONCE ONLY DDB THAT ONCDSK USES.
   860	000664'	000000	000000	OPCLOW:	0			;LOWEST PHYSICAL PAGE USED FOR ONCE PCB PAGES.
   861
   862				IFCPU (KS),<
   863				EUBRBT:	EPT+EPTUB0,,EPT+EPTUB1	;BLT WORD TO SETUP VECTOR INTERRUPT TBLS
   864				    >; END IFCPU (KS)
   865	000665'	757345	000420*	EPGTBT:	EPTSET,,EPT+EPTPGT	; BLT pointer to EPT trap vectors
   866	000666'	757325	000420*	UPGTBT:	UPTSET,,UPT+UPTPGT	; BLT pointer to UPT trap vectors
   867	000667'	757325	000420	UPGTB0:	UPTSET,,0+UPTPGT	; BLT pointer to UPT trap vectors for page 0
   868	000670'	757307	000042*	EPIBLT:	LOC42,,EPT+42		;BLT WORD TO SETUP PI LOCS 40-61
   869	000671'	000000*	000001*	CNCLBT:	CONFIG,,CONFIG+1	;BLT POINTER TO CLEAR CONFIG AREA
   870	000672'	000000*	756012	CNFCPY:	CONFIG,,CPYFIG		;BLT POINTER TO COPY CONFIG NAME/DATE
   871	000673'	440700	756012	CPYBPT:	POINT 7,CPYFIG		;BYTE POINTER TO COPY OF CONFIG AREA
   872	000674'	440700	000000*	CNFBPT:	POINT 7,CONFIG		;BYTE POINTER TO CONFIG NAME/DATE
   873
   874	754077			ONCWBR:
   875				    IFCPU (KI),<XWD IG.LLH+NULACB_^D15+UPT.PN,IG.LRH+IG.TEN+EPT.PN>
   876	000675'	100000	000562*	    IFNCPU (KI),<EXP LG.LUB+UPT.PN>
   877	754100			ONCACB:
   878				    IFCPU (KI),<XWD <UPTAC0-20>_9,%UPT+UPTAC0+17>
   879	000676'	000000	000000*	    IFNCPU (KI),<EXP LG.LAB+<EX0ACB>B8+<USRACB>B11+%UPT+UPTAC0+16>
   880
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 11
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   881				;ROUTINE WHICH TAKES A PCB ADDRESS IN PG AND RETURNS THE VIRTUAL ADDRESS
   882				; OF THE PCB'S DATA IN T2.
   883				;CALLED BY ONCDSK. PRESERVES ALL ACS.
   884
   885	000677'	261040	000011	GETPEV::PUSH	P,T4		;PRESERVES ALL ACS
   886	000700'	400440	000000		SETZ	T4,
   887	000701'	336351	754037	GETPE1:	SKIPN	T2,OPCBTB(T4)	;GET PCB ADDRESS
   888	000702'	256000	754000		 STOPCD                         ;;GETPE1+1
   889	000703'	312140	000007		CAME	PG,T2		;SAME?
   890	000704'	344440	754103		AOJA	T4,GETPE1	;NO, LOOK AT NEXT.
   891	000705'	200351	754047		MOVE	T2,OPCADR(T4)	;YES, GET ADDRESS
   892	000706'	262040	000011		POP	P,T4		;RESTORE T4 AND
   893	000707'	263040	000000		POPJ	P,		;RETURN.
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 12
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   894				;NOW MOVE THE SYMBOL TABLE DOWN
   895
   896	000710'	201040	000012*	ONCGOP:	MOVEI	P,SYSPDL##
   897	000711'	201300	000100*		MOVEI	T1,DDTEND##+100	;LEAVE SOME EXTRA SPACE
   898	000712'	315300	000064*		CAMGE	T1,PATSIZ##	;MAKE SURE SOMEONE NOT TRYING TO RESERVE SPACE
   899	000713'	550300	000712*		 HRRZ	T1,PATSIZ##	;THEY ARE, USE THAT AS PLACE TO BLT SYMBOLS TO
   900	000714'	504300	000312*		HRL	T1,DDTSYM##	;PLACE TO BLT SYMBOLS FROM
   901	000715'	542300	000714*		HRRM	T1,DDTSYM##	;STORE NEW HOME ADDRESS FOR SYMBOL TABLE
   902	000716'	574340	000715*		HLRE	T2,DDTSYM##
   903	000717'	213000	000007		MOVNS	T2		;GET SIZE OF SYMBOL TABLE
   904	000720'	271346	777777		ADDI	T2,-1(T1)	;GET LAST ADDRESS IN T2
   905	000721'	554400	000006		HLRZ	T3,T1		;GET SOURCE ADDRESS
   906	000722'	303406	000000		CAILE	T3,(T1)		;MAKE SURE ITS BEING BLTTED DOWN
   907	000723'	254000	754136		 JRST	ONCG1A		;YES, JUST NORMAL BLT
   908	000724'	271407	000000		ADDI	T3,(T2)		;1ST SOURCE + LAST DEST - FIRST DEST
   909	000725'	275406	000000		SUBI	T3,(T1)		;GIVES LAST SOURCE.
   910	000726'	200450	000000	SYMBK0:	MOVE	T4,(T3)		;MOVE SOURCE TO DEST
   911	000727'	202447	000000		MOVEM	T4,(T2)
   912	000730'	275400	000001		SUBI	T3,1		;SUBTRACT ONE FROM SOURCE ADDRESS
   913	000731'	302346	000000		CAIE	T2,(T1)		;DID JUST MOVE ONE TO FIRST DEST?
   914	000732'	364340	754130		 SOJA	T2,SYMBK0 	;NO, KEEP GOING
   915	000733'	254000	754137		JRST	ONCGP0		;OK, DONE.
   916	000734'	251307	000000	ONCG1A:	BLT	T1,(T2)		;HERE IS WHERE END GOES
   917	000735'	201300	754141	ONCGP0:	MOVEI	T1,ONCGP1	;DO NOT EXECUTE MORE THAN ONCE
   918	000736'	542300	000203*		HRRM	T1,SYSDSP##	;SET FOR 140 RESTART
   919
   920				;RETURN HERE FROM DDT VIA 140$G
   921
   922	000737'	201040	000710*	ONCGP1:	MOVEI	P,SYSPDL##
   923	000740'	700200	200000		WRAPR	APRIOB		;DO AN IOB RESET
   924				IFCPU (KI),<WRPI  PIPOW>	;AND RESET PI POWER FAILURE INTERUPT
   925	000741'	700200	020040	IFNCPU(KI),<WRAPR LP.CSF+LP.PWF>
   926	000742'	200300	754070		MOVE	T1,UPGTBT
   927	000743'	251300	000437*	IFNCPU(KS),<BLT  T1,UPT+UPTPTR>	;SET UP TRAPS LOCS
   928				IFCPU (KS),<BLT  T1,UPT+UPTCTR+2>
   929	000744'	200300	754071		MOVE	T1,UPGTB0
   930	000745'	251300	000437		BLT	T1,0+UPTPTR	;SET UP TRAP LOCS in PAGE 0
   931				IFNCPU(KI),<
   932	000746'	200300	000000*		MOVE	T1,PGFUIO	;PAGE FAIL NEW PC
   933	000747'	202300	000502*		MOVEM	T1,UPT+UPTNPP	;PAGE FAIL NEW PC WORD.
   934	000750'	202300	000502		MOVEM	T1,0+UPTNPP	;PAGE FAIL NEW PC WORD for page 0.
   935				>;END IFNCPU (KI)
   936	000751'	200300	754067		MOVE	T1,EPGTBT	; EPT-PGT BLT WORD
   937	000752'	251300	000423*		BLT	T1,EPT+EPTTR3	;BLT
   938	000753'	200300	757770		MOVE	T1,[JSR LUUOPC##];Error routine in ERRCON (calls S..EUE)
   939				IFCPU (KI),<MOVEM T1,EPT+41>	;NO LUUOS
   940	000754'	202300	000041	IFNCPU(KI),<MOVEM T1,41>	;KL,KS use Exec virtual address 40 and 41
   941	000755'	201300	720000*		MOVEI	T1,UPT.PN+PGE.A+PGE.W+PGE.P+PGE.C
   942	000756'	137300	000000*		DPB	T1,EPYPSN	;SET POINTER [EPTPTR(%UPS.N)]
   943	000757'	402000	000000*		SETZM	UPSJOB		;NO ONE IS MAPPED THRU HERE.
   944	000760'	701140	754077	IFNCPU(KI),<WRUBR     ONCWBR>
   945				IFCPU (KI),<DATAO PAG,ONCWBR>
   946	000761'	137300	000000*		DPB	T1,USYPTN	;AND SET IN UPT [UPSPTR(%UPT.N)]
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 12-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   947	000762'	701220	000000*		CLRPTA			;MAPPING GOES INTO EFFECT.
   948	000763'	200300	754100		MOVE	T1,ONCACB
   949	000764'	202300	000000*		MOVEM	T1,UPT+UPTACP
   950	000765'	254120	757771		JRSTF	@[PC.UIO,,.+1]	;MAKE SURE USER I/O IS ON
   951				IFCPU (KI),<
   952					MOVSI	17,NULACS
   953					XCTTU	<BLT 17,17>	;LOAD NULL JOB ACS
   954					MOVSI	T1,PC.UIO!PC.USR!PC.PUB	;SET NULL PC (LOC 0)
   955					MOVEM	T1,UPT+UPTPC
   956				>;END IFCPU (KI)
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 13
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

   957				IFCPU (KI),<
   958					CONI	PAG,T1		;READ PAGER TO GET REAL SERIAL NUMBER
   959					LDB	T1,[POINT 10,T1,9]
   960				>;END IFCPU (KI)
   961				IFNCPU (KI),<
   962	000766'	700000	000006		APRID	T1		;GET SERIAL NUMBER, UCODE VERSION, ETC.
   963	000767'	405300	007777		ANDI	T1,APRSER	;JUST SERIAL NUMBER
   964				>;END IFNCPU (KI)
   965	000770'	332000	000006		SKIPE	T1		;Don't wipe out previous value on F3
   966	000771'	202300	000000*		 MOVEM	T1,SERIAL
   967	000772'	201300	000074		MOVEI	T1,^D60
   968				IFCPU (KI),<;NON-KI10 MACHINES ALWAYS 60HZ
   969					RDAPR	T2
   970					TLNE	T2,(1B6)		;CHECK FOR 50 HZ
   971					 MOVEI	T1,^D50
   972				>;END IFCPU (KI)
   973	000773'	202300	000000*		MOVEM	T1,JFYSEC##
   974	000774'	202300	000000*		MOVEM	T1,TICSEC##
   975	000775'	221300	000074		IMULI	T1,^D60
   976	000776'	202300	000000*		MOVEM	T1,JFYMIN##
   977	000777'	221300	000074		IMULI	T1,^D60
   978	001000'	202300	000000*		MOVEM	T1,JFYHR##
   979	001001'	221300	000030		IMULI	T1,^D24
   980	001002'	202300	000000*		MOVEM	T1,MIDNIT##
   981	001003'	200300	000773*		MOVE	T1,JFYSEC##
   982	001004'	205340	004000		MOVSI	T2,(1B6)
   983	001005'	302300	000074		CAIE	T1,^D60
   984	001006'	436340	000000*		 IORM	T2,STATES##	;SET STATES BIT IF 50 CYCLE
   985	001007'	221300	000002		IMULI	T1,2
   986	001010'	202300	000000*		MOVEM	T1,JFY2SC##	;Jiffies per 2 seconds
   987	001011'	231300	000030		IDIVI	T1,^D24
   988	001012'	202300	000000*		MOVEM	T1,JFYS12##	;Jiffies per 1/12 second
   989	001013'	200300	001003*		MOVE	T1,JFYSEC##
   990	001014'	231300	000002		IDIVI	T1,2
   991	001015'	202300	000000*		MOVEM	T1,JFYSC2##	;Jiffies per 1/2 second
   992	001016'	202300	000000*		MOVEM	T1,QQYTTY##
   993	001017'	231300	000005		IDIVI	T1,5
   994	001020'	202300	000000*		MOVEM	T1,QQYSD##	;Jiffies per 1/10 second
   995
   996				;SETUP LOCATIONS 40 THRU 61
   997
   998	001021'	200300	754072		MOVE	T1,EPIBLT	;SETUP LOWER CORE PI LOCATIONS
   999	001022'	251300	000057*		BLT	T1,EPT+57
  1000				IFCPU (KL),<
  1001	001023'	205300	254200		MOVSI	T1,(HALT)
  1002	001024'	202300	000514*		MOVEM	T1,EPT+EPTITI
  1003	001025'	202300	000142*		MOVEM	T1,EPT+EPTDT0+DTEDII
  1004				>;END IFCPU (KL)
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 14
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1005				;LINK DEVICE SERVICE ROUTINES TOGETHER (INTERUPT CHAIN)
  1006
  1007	001026'	205300	000000*		MOVSI	T1,INTNUM	;NO, NEGATIVE NUMBER OF SERVICE ROUTINES*2
  1008	001027'	554246	000000*	INTLOP:	HLRZ	U,INTTAB(T1)	;GET NEXT PI NUMBER
  1009	001030'	405240	000007		ANDI	U,7		;MASK OUT NUMBER OF DDB'S
  1010
  1011	001031'	242240	000001		LSH	U,1		;SHIFT LEFT ONE SO MATCH PI LOCATIONS
  1012	001032'	322240	754246		JUMPE	U,NOPICH	;DOES THIS DEVICE HAVE A PI CHANNEL (PTY) ?
  1013	001033'	200105	000040*		MOVE	J,EPT+40(U)	;YES, PICK UP JSR CH'N FROM LOWER CORE
  1014	001034'	200240	000002	INTLP1:	MOVE	U,J		;SAVE IT IN U (EITHER A JRST DEV'NT OR
  1015								; JEN @CH'N
  1016	001035'	200105	000001		MOVE	J,1(U)		;PICK UP INSTR. FOLLOWING INTERRUPT CONSO
  1017	001036'	607100	000740		TLNN	J,000740	;IS IT A JEN ?
  1018	001037'	254000	754236		 JRST	INTLP1		;NO, KEEP LOOKING
  1019	001040'	200346	001027*		MOVE	T2,INTTAB(T1)	;YES, LAST DEVICE SO FAR, GET DEV'NT
  1020	001041'	505340	254000		HRLI	T2,(JRST)	;MAKE JRST INSTR.
  1021	001042'	202345	000001		MOVEM	T2,1(U)		;CHANGE JEN @CH'N TO JRST DEV'NT
  1022	001043'	202107	000001		MOVEM	J,1(T2)		;MAKE DEV'NT+1 BE JEN @CH'N
  1023	001044'	253300	754247	NOPICH:	AOBJN	T1,.+1		;PICKUP EVERY OTHER WORD
  1024	001045'	253300	754231		AOBJN	T1,INTLOP	;ANY MORE INTERRUPT SERVICE ROUTINES ?
  1025
  1026				IFCPU (KS),<
  1027				
  1028				EXTERN TBISAV,TBISIZ
  1029				    ;SET UP TBLUBA FOR THE KS.
  1030					MOVSI	T1,-TBISIZ	;Number of vectors in table
  1031				SETUBT:	HRRZ	T2,TBISAV(T1)	;GET VECTOR/4.
  1032					MOVSI	T3,(JSR)	;BUILD JSR DEVINT.
  1033					HLR	T3,TBISAV(T1)	;GET INTERRUPT ROUTINE ADDRESS.
  1034					SKIPE	EPT+EPTVIT(T2)	;BETTER NOT BE ANOTHER WITH
  1035					 STOPCD                         ;;SETUBT+4
  1036					MOVEM	T3,EPT+EPTVIT(T2) ;SAME DISPATCH LOCATION.
  1037					AOBJN	T1,SETUBT	;Loop TBISIZ times
  1038				
  1039				    ;SET UP THE EPT SLOTS FOR THE VECTOR INTERRUPT TABLE PNTRS.
  1040					SETZM	EPT+EPTUB0	;HOPE STRANGE ONES DIE IN LOW CORE.
  1041					MOVE	T1,EUBRBT
  1042					BLT	T1,EPT+EPUB17
  1043					MOVEI	T1,EPT+EPTVIT	;ONLY UBA1 AND
  1044					MOVEM	T1,EPT+EPTUB1	;UBA3
  1045					MOVEM	T1,EPT+EPTUB3	;PRESENTLY EXIST.
  1046				
  1047				;NOW SET THE UBA1'S PIA
  1048				
  1049				EXTERNAL PIHIGH,PILOW
  1050				
  1051					MOVEI	T1,PIHIGH*10+PIHIGH
  1052					WRIO	T1,@[UA1,,UBAADR]
  1053				
  1054				;NEED TO PUT IN UBA3'S AT SOME TIME
  1055				
  1056				
  1057				> ;END IFCPU (KS).
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 14-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1058
  1059
  1060	001046'	201300	754252		MOVEI	T1,ONCGP2
  1061	001047'	542300	000736*		HRRM	T1,SYSDSP##	;ONLY DO THIS ONCE
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 15
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1062
  1063	001050'	201040	000737*	ONCGP2:	MOVEI	P,SYSPDL##
  1064	001051'	260040	757525		PUSHJ	P,ONCTOS	;SET UP TTY
  1065	001052'	260040	000000*		PUSHJ	P,OHTINI##	;INIT THIS HERE SO OUTPUT ERROS
  1066								; ARE CLEARED ON RESTART.
  1067	001053'	260040	000000*		PUSHJ	P,PRTSYS##	;Output SYSNO and monitor version
  1068	001054'	260040	757566		PUSHJ	P,OPOUT
  1069	001055'	260040	755756		PUSHJ	P,GETSYN	;SETUP serial FOR TTYINI, EVERYONE ELSE.
  1070	001056'	564300	000716*		HLRO	T1,DDTSYM##	;GET SIZE TO USE FOR SYSSIZ
  1071	001057'	213000	000006		MOVNS	T1
  1072	001060'	270300	001056*		ADD	T1,DDTSYM##
  1073	001061'	435300	000777		IORI	T1,777		;START WITH A FRESH PAGE
  1074	001062'	271300	000001		ADDI	T1,1
  1075	001063'	552300	000000*		HRRZM	T1,SYSSIZ	;THIS IS IT, TOP OF SYMBOLS
  1076				IFCPU (KI),<;ONLY KI HAS DK10 UCYCLE CLOCK
  1077				CHKCLK:	CONSZ	CLK,1B26
  1078					 JRST	ONCTST		;ON EXTERNAL
  1079					PUSHJ	P,INLMES
  1080					 ASCIZ	/
  1081				CLOCK ON INTERNAL - RESET AND TYPE <RETURN>
  1082				/
  1083					PUSHJ	P,OPOUT
  1084					PUSHJ	P,GETLIN
  1085					 JRST	CHKCLK
  1086					 JRST	CHKCLK
  1087				>;END IFCPU (KI)
  1088					PFALL	ONCTST
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 16
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1089				;THIS IS THE MAIN SCAN DISPATCH ROUTINE.
  1090				;NOTE *** This is different than the macro copied from ONCDSK!!!
  1091
  1092					DEFINE SCAN (A) <
  1093					MOVEI	P1,SCN'A		; Get address of Scan Table
  1094					SETZM	CMDSCF##		; Specify NO STR/UNIT stuff
  1095					PUSHJ	P,CMDSCN##		; Call Scanning routine
  1096					  JRST	HLP'A			; No good!
  1097					XCT DSP'A'(P3)			; Yes?
  1098					JRST	A'CMD			; Return as if cr typed.
  1099				
  1100				A'HLP:	MOVE	P3,-2(P1)		; Setup AOBJN pointer for messages
  1101				A'HL1:	HRRZ	T1,(P3)			; Get address of message
  1102					PUSHJ	P,LNGMES		; Print a long message
  1103					AOBJN	P3,A'HL1		; Next?
  1104					JRST	A'CMD			; Return.
  1105				>
  1106
  1107					DEFINE SCNTB (NAM) <
  1108					DEFINE X(SYM,INS,BIT,TEXT,TEXT1,TEXT2,TEXT3) <
  1109					INS>	;INSTRUCTION TO EXECUTE
  1110				
  1111					JRST NUL'NAM		;FOR -1 RETURN
  1112				DSP'NAM: MK'NAM			;GENERATE DISPATCH TABLE
  1113					SIZ'NAM==.-DSP'NAM
  1114					-SIZ'NAM,,TXT'NAM	;AOBJN POINTER TO HELP
  1115					-SIZ'NAM,,SCN'NAM	;AOBJN POINTER TO NAMES
  1116					DEFINE X (SYM,INS,BIT,TEXT,TEXT1,TEXT2,TEXT3)
  1117				<	<SIXBIT /SYM/>>
  1118					LALL
  1119				SCN'NAM: MK'NAM			; Define Table to read
  1120					SALL
  1121					$XZ==0			; Need a counter
  1122					DEFINE XZ$(ARGH)<LIT$'ARGH==.>
  1123					DEFINE X (SYM,INS,BIT,TEXT,TEXT1,TEXT2,TEXT3)
  1124				<	xz$(\$XZ)
  1125					ASCII \TEXT'TEXT1'TEXT2'TEXT3\
  1126					Z
  1127					$XZ==$XZ+1>
  1128					MK'NAM
  1129					$XZ==0
  1130					DEFINE XZ$(ARGH)<LIT$'ARGH>
  1131					DEFINE X (SYM,INS,BIT,TEXT,TEXT1,TEXT2,TEXT3) <
  1132					XWD	BIT,XZ$(\$XZ)
  1133					$XZ==$XZ+1>
  1134					LALL
  1135				TXT'NAM: MK'NAM
  1136				>
  1137
  1138			000000		AB.ACK==:0B18		; OK (ACKnowledged) for ABbreviations.
  1139			400000		AB.NAK==:1B18		; OK (Not AcKnowledged) for ABbreviations.
  1140			200000		AB.VER==:1B19		; VERIFICATION required for Command.
  1141			100000		AB.TCV==:1B20		; Verify if TYPE or CHANGE (TYPONL) [ONCDSK]
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 16-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1142			040000		AB.CVR==:1B21		; No verify if at CONSOLE level
  1143
  1144				;NOW THE ACTUAL CODE
  1145
  1146	754266			ONCTST:			;PFALL here from above
  1147				IFCPU (<KL,F3>),<
  1148					WRAPR	LP.ESF+APRMSK+APRCHN	;ENABLE FOR SAKE OF PARITY ERRORS AND CACHE SWEEP DONE.
  1149	001064'	700200	107760*
  1150	001065'	700600	000000*		WRPI	LI.PIN+LI.CON+<1_<7-APRCHN>> ;ALLOW APR TO INTERRUPT.
  1151				>;END IFCPU (KL)
  1152				IFCPU (KS),<
  1153					WRAPR	LP.ESF+APFMSK+LP.HPE+APRCHN	;ENABLE FOR ERRORS
  1154					WRPI	LI.PIN+LI.CON+<1_<7-APRCHN>>	;ALLOW APR TO INTERRUPT
  1155				>;END IFCPU (KS)
  1156	001066'	205300	400000		MOVSI	T1,400000
  1157	001067'	202300	000000*		MOVEM	T1,THSDAT
  1158	001070'	202300	000000*		MOVEM	T1,TIME		;TIME AND DATE NOT RECEIVED FROM SUP
  1159	001071'	200340	000000*		MOVE	T2,REONCE	;GET ONCE COPY OF RESTRT WORD
  1160	001072'	554300	000007		HLRZ	T1,T2		;POSITION VALIDATOR FOR TESTING
  1161	001073'	302300	000000*		CAIE	T1,RESCOD	;IS RESTRT VALID?
  1162	001074'	403340	000000*		 SETZB	T2,REPSID	;No, clear for RECOMP and ONCDSK
  1163	001075'	201400	000000*		MOVEI	T3,RE.OND	;COMPUTE ACTION FOR
  1164	001076'	260040	000001*		PUSHJ	P,RECOMP+1	; ONCE RESTART
  1165				IFCPU(<KI,KL>),<;Can't trust serial # on KS or F3
  1166	001077'	550300	000000*		HRRZ	T1,.CPCPU##	;Get CPU number monitor was built for
  1167	001100'	316300	000771*		CAMN	T1,SERIAL##	;Match APR serial number?
  1168	001101'	254000	754316		 JRST	ONCTS1		;OK (check bits in T2)
  1169					MOVEI	T1,[ASCIZ /
  1170	001102'	201300	757772	%% CPU serial number is /]
  1171	001103'	260040	757523		PUSHJ	P,OCONM
  1172	001104'	200300	001100*		MOVE	T1,SERIAL##
  1173	001105'	260040	000000*		PUSHJ	P,PRTDEC##
  1174	001106'	260040	757566		PUSHJ	P,OPOUT
  1175					MOVEI	T1,[ASCIZ /.  This monitor was built for a different system.
  1176	001107'	201300	760000	Are you SURE you want to proceed? /]
  1177	001110'	260040	757541		PUSHJ	P,YESNO		;Skip if "Y"
  1178	001111'	254000	000000*		  JRST	SYSBTS##	;Go get BOOTS if "N"
  1179					MOVEI	T1,[ASCIZ /
  1180				Please notify TYMCOM-X Support Group if this is a permanent change.
  1181	001112'	201300	760022	/]
  1182	001113'	254000	754323		JRST	HLPCM1		;Do NOT go into auto restart
  1183				>  ;END IFNCPU(KS)
  1184	001114'	606340	000000*	ONCTS1:	TRNN	T2,RE.ONA	;MANUAL ONCE DESIRED?
  1185	001115'	254000	756637		 JRST	AUTORS		;NO: DO AUTO RESTART
  1186					MOVEI	T1,[ASCIZ /
  1187	001116'	201300	760041	/]				; Type a free CRLF
  1188	001117'	254000	754323		JRST	HLPCM1		;   on entry.
  1189
  1190				HLPCMD:	MOVEI	T1,[ASCIZ /
  1191				?Unrecognized command - Please type HELP for help.
  1192	001120'	201300	760042	/]
  1193	001121'	260040	757523	HLPCM1:	PUSHJ P,OCONM
  1194	001122'	260040	757566		PUSHJ P,OPOUT
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 16-3
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1195	754325			TYPCMD:				; ** return from SCAN macro **
  1196	754325			CHGCMD:				; ** return from SCAN macro **
  1197	754325			CMDCMD:				; ** return from SCAN macro **
  1198	754325			NULCMD:				; ** LABEL FOR NULL RETURN **
  1199				ONCCMD:	MOVEI T1,[ASCIZ /
  1200	001123'	201300	760055	ONCE>/]				;COMMAND PROMPT
  1201	001124'	260040	757523		PUSHJ P,OCONM
  1202	001125'	260040	757566		PUSHJ P,OPOUT
  1203	001126'	260040	757401		PUSHJ P,GETLIN
  1204	001127'	254000	754325		 JRST ONCCMD
  1205	001130'	201600	754367		SCAN (CMD)
  1206	001131'	402000	000000*
  1207	001132'	260040	000000*
  1208	001133'	254000	754322
  1209	001134'	256016	754346
  1210	001135'	254000	754325
  1211	001136'	200714	777776
  1212	001137'	550316	000000
  1213	001140'	260040	000000*
  1214	001141'	253700	754341
  1215	001142'	254000	754325
  1216						;SCAN FOR A COMMAND
  1217
  1218
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1219					DEFINE MKCMD	<
  1220				
  1221				X	TYPE,<JRST TYPIT>,AB.ACK,<
  1222				TYPE     Report information about the system.
  1223				         TYPE CORE   - the default minimum core available to users.
  1224				         TYPE SYSTEM - reports the system number.>
  1225				X	CHANGE,<JRST CHGIT>,AB.ACK,<
  1226				CHANGE   Change information about the system.
  1227				         CHANGE CORE   - changes the default minimum user core.
  1228				         CHANGE SYSTEM - changes the system number.>
  1229				X	FULL,<JRST FULLRS>,AB.NAK,<
  1230				FULL     Bring up the system with a FULL DSKCLN.  If there is any
  1231				         question about the integrity of the file system, then this>,<
  1232				         command should be used in place of GO.  Unless authorized,
  1233				         DO NOT enter the FILES dialogue to set the DSKCLN type.>
  1234				X	GO,<JRST AUTORS>,AB.ACK,<
  1235				GO       Bring up the system with the default settings and starts
  1236				         the auto-restart process.>
  1237				X	FILES,<PUSHJ P,FILES>,AB.NAK!AB.VER,<
  1238				FILES    Enter the FILES dialogue.  This is the subsystem of ONCE
  1239				         which is normally used ONLY for restructuring or repairing>,<
  1240				         the disk file system.  The commands in this subsystem could
  1241				         damage the file system if they are used incorrectly.  If you>,<
  1242				         are NOT sure of what you are doing, DO NOT enter this section.>
  1243				X	READONLY,<JRST REDOLY>,AB.ACK!AB.VER!AB.CVR,<
  1244				READONLY Bring up the system SHUT for emergency examination.
  1245				         Writing on the disk is prevented until DSKCLN has been run.>,<
  1246				         Note: The system cannot be UNSHUT until DSKCLN has been run.>
  1247				X	INITIA,<PUSHJ P,FLGINI>,AB.ACK,<
  1248				INITIA   Run DSKCLN, then CHKPNT, COPYCRASH, and XEXEC (auto restart).>
  1249				X	NOINITIA,<PUSHJ P,FLGNOI>,AB.ACK,<
  1250				NOINITIA Run DSKCLN but not XEXEC (when doing an all-files restore.)>
  1251				X	CONSOLE,<PUSHJ P,FLGCTY>,AB.ACK,<
  1252				CONSOLE  Allow the system to be brought up on the CONSOLE terminal ONLY.
  1253				         The system MUST be reloaded before it can be brought up on the>,<
  1254				         network.  This command should be followed by a command to bring
  1255				         up the system (one of: GO, FULL, MANUAL or READONLY).>
  1256				X	NETWORK,<PUSHJ P,FLGNET>,AB.ACK,<
  1257				NETWORK  Allow the system to be brought up on the NETWORK (default).
  1258				         This allows normal access to the system and overrides any>,<
  1259				         previous CONSOLE or NETWORK commands.  This command should be
  1260				         followed by a command to bring up the system. (see CONSOLE.)>
  1261				X	DEBUG,<PUSHJ P,ODEBUG##>,AB.NAK,<
  1262				DEBUG    Set the DEBUGFLAG to output more information on the console at
  1263				         startup and when a stopcode occurs.>
  1264				X	DDT,<PUSHJ P,DDT>,AB.NAK,<
  1265				DDT      Enter executive DDT.  To be used ONLY by software wizards
  1266				         for emergency patching and examination of the monitor.>,<
  1267				         UNDER NO CIRCUMSTANCES SHOULD YOU NORMALLY USE THIS COMMAND!>
  1268				X	MANUAL,<JRST MANRS>,AB.ACK!AB.VER!AB.CVR,<
  1269				MANUAL   Bring up the system in the SHUT state for DEBUGGING ONLY!
  1270				         The auto-restart process is not performed.>,<
  1271				         Note: You may not UNSHUT the system until DSKCLN has been run.>
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1272				X	BOOTS,<JRST SYSBTS##>,AB.NAK!AB.VER,<
  1273				BOOTS    Bring in BOOTS (to load a different monitor).>
  1274				IFKMC<
  1275				X	KMC,<JRST KMCMAN>,AB.ACK,<
  1276				KMC      Bring the system up loading the KMC-11 but without the>,<
  1277				         rest of the automatic restart procedure.  This must NEVER>,<
  1278				         be used for a restart after a system CRASH.  ONLY to be
  1279				         used when the system has been taken down gracefully and>,<
  1280				         DSKCLN has already been run.>
  1281				>;END IFKMC
  1282				X	HELP,<JRST CMDHLP>,AB.ACK,<
  1283				HELP     Type out this message.
  1284				>
  1285				>
  1286
  1287	001143'	254000	754325		SCNTB (CMD)
  1288	001144'	254000	755454
  1289	001145'	254000	755546
  1290	001146'	254000	756633
  1291	001147'	254000	756637
  1292	001150'	260040	756477
  1293	001151'	254000	756626
  1294	001152'	260040	756513
  1295	001153'	260040	756514
  1296	001154'	260040	756502
  1297	001155'	260040	756501
  1298	001156'	260040	000000*
  1299	001157'	260040	000320*
  1300	001160'	254000	756622
  1301	001161'	254000	001111*
  1302	001162'	254000	754340
  1303	001163'	777761	755435
  1304	001164'	777761	754367
  1305	754367			SCNCMD: MKCMD	^
  1306
  1307				X	TYPE,<JRST TYPIT>,AB.ACK,<
  1308				TYPE     Report information about the system.
  1309				         TYPE CORE   - the default minimum core available to users.
  1310	001165'	647160	450000	         TYPE SYSTEM - reports the system number.>^	<SIXBIT /TYPE/>^
  1311				X	CHANGE,<JRST CHGIT>,AB.ACK,<
  1312				CHANGE   Change information about the system.
  1313				         CHANGE CORE   - changes the default minimum user core.
  1314	001166'	435041	564745	         CHANGE SYSTEM - changes the system number.>^	<SIXBIT /CHANGE/>^
  1315				X	FULL,<JRST FULLRS>,AB.NAK,<
  1316				FULL     Bring up the system with a FULL DSKCLN.  If there is any
  1317				         question about the integrity of the file system, then this>,<
  1318				         command should be used in place of GO.  Unless authorized,
  1319	001167'	466554	540000	         DO NOT enter the FILES dialogue to set the DSKCLN type.>^	<SIXBIT /FULL/>^
  1320				X	GO,<JRST AUTORS>,AB.ACK,<
  1321				GO       Bring up the system with the default settings and starts
  1322	001170'	475700	000000	         the auto-restart process.>^	<SIXBIT /GO/>^
  1323				X	FILES,<PUSHJ P,FILES>,AB.NAK!AB.VER,<
  1324				FILES    Enter the FILES dialogue.  This is the subsystem of ONCE
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-3
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1325				         which is normally used ONLY for restructuring or repairing>,<
  1326				         the disk file system.  The commands in this subsystem could
  1327				         damage the file system if they are used incorrectly.  If you>,<
  1328				         are NOT sure of what you are doing, DO NOT enter this section.>^	<SIXBIT /FILES/
  1329	001171'	465154	456300	>^
  1330				X	READONLY,<JRST REDOLY>,AB.ACK!AB.VER!AB.CVR,<
  1331				READONLY Bring up the system SHUT for emergency examination.
  1332				         Writing on the disk is prevented until DSKCLN has been run.>,<
  1333	001172'	624541	445756	         Note: The system cannot be UNSHUT until DSKCLN has been run.>^	<SIXBIT /READONLY/>^
  1334				X	INITIA,<PUSHJ P,FLGINI>,AB.ACK,<
  1335				INITIA   Run DSKCLN, then CHKPNT, COPYCRASH, and XEXEC (auto restart).>^	<SIXBIT /INITIA
  1336	001173'	515651	645141	/>^
  1337				X	NOINITIA,<PUSHJ P,FLGNOI>,AB.ACK,<
  1338	001174'	565751	565164	NOINITIA Run DSKCLN but not XEXEC (when doing an all-files restore.)>^	<SIXBIT /NOINITIA/>^
  1339				X	CONSOLE,<PUSHJ P,FLGCTY>,AB.ACK,<
  1340				CONSOLE  Allow the system to be brought up on the CONSOLE terminal ONLY.
  1341				         The system MUST be reloaded before it can be brought up on the>,<
  1342				         network.  This command should be followed by a command to bring
  1343	001175'	435756	635754	         up the system (one of: GO, FULL, MANUAL or READONLY).>^	<SIXBIT /CONSOLE/>^
  1344				X	NETWORK,<PUSHJ P,FLGNET>,AB.ACK,<
  1345				NETWORK  Allow the system to be brought up on the NETWORK (default).
  1346				         This allows normal access to the system and overrides any>,<
  1347				         previous CONSOLE or NETWORK commands.  This command should be
  1348	001176'	564564	675762	         followed by a command to bring up the system. (see CONSOLE.)>^	<SIXBIT /NETWORK/>^
  1349				X	DEBUG,<PUSHJ P,ODEBUG##>,AB.NAK,<
  1350				DEBUG    Set the DEBUGFLAG to output more information on the console at
  1351	001177'	444542	654700	         startup and when a stopcode occurs.>^	<SIXBIT /DEBUG/>^
  1352				X	DDT,<PUSHJ P,DDT>,AB.NAK,<
  1353				DDT      Enter executive DDT.  To be used ONLY by software wizards
  1354				         for emergency patching and examination of the monitor.>,<
  1355	001200'	444464	000000	         UNDER NO CIRCUMSTANCES SHOULD YOU NORMALLY USE THIS COMMAND!>^	<SIXBIT /DDT/>^
  1356				X	MANUAL,<JRST MANRS>,AB.ACK!AB.VER!AB.CVR,<
  1357				MANUAL   Bring up the system in the SHUT state for DEBUGGING ONLY!
  1358				         The auto-restart process is not performed.>,<
  1359				         Note: You may not UNSHUT the system until DSKCLN has been run.>^	<SIXBIT /MANUAL
  1360	001201'	554156	654154	/>^
  1361				X	BOOTS,<JRST SYSBTS##>,AB.NAK!AB.VER,<
  1362	001202'	425757	646300	BOOTS    Bring in BOOTS (to load a different monitor).>^	<SIXBIT /BOOTS/>^
  1363				IFKMC^REPEAT 0,^<
  1364				X	KMC,<JRST KMCMAN>,AB.ACK,<
  1365				KMC      Bring the system up loading the KMC-11 but without the>,<
  1366				         rest of the automatic restart procedure.  This must NEVER>,<
  1367				         be used for a restart after a system CRASH.  ONLY to be
  1368				         used when the system has been taken down gracefully and>,<
  1369				         DSKCLN has already been run.>
  1370				>;END IFKMC
  1371				X	HELP,<JRST CMDHLP>,AB.ACK,<
  1372				HELP     Type out this message.
  1373	001203'	504554	600000	>^	<SIXBIT /HELP/>^
  1374				^		; Define Table to read
  1375					SALL
  1376	001204'	064252	454640
	001205'	425004	020100
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-4
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

	001206'	202454	570336
	001207'	713504	064734
	001210'	633376	266702
	001211'	723235	767100
	001212'	607055	772750
	001213'	203515	062500
	001214'	717636	372312
  1377	001215'	665341	505100
	001216'	201004	020100
	001217'	201004	052262
	001220'	502124	041636
	001221'	512124	020100
	001222'	265016	464312
	001223'	203114	563302
	001224'	727316	420332
	001225'	647355	166752
	001226'	665014	367744
	001227'	625014	173302
	001230'	647314	161330
	001231'	625016	467500
	001232'	727474	571346
  1378	001233'	270321	220100
	001234'	201004	020100
	001235'	201012	454640
	001236'	425012	354646
	001237'	522131	520132
	001240'	203454	570336
	001241'	713516	320350
	001242'	643124	071762
	001243'	717514	566500
	001244'	673535	561312
	001245'	711340	000000
  1379	001246'	000000	000000
  1380	001247'	064250	344202
	001250'	472170	520100
	001251'	202075	060734
	001252'	637124	064734
	001253'	633376	266702
	001254'	723235	767100
	001255'	607055	772750
	001256'	203515	062500
	001257'	717636	372312
  1381	001260'	665341	505100
	001261'	201004	020100
	001262'	201004	041620
	001263'	406350	742500
	001264'	416372	242500
	001265'	201005	520306
	001266'	643035	663712
	001267'	715016	464312
	001270'	203114	563302
	001271'	727316	420332
	001272'	647355	166752
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-5
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

	001273'	665016	571712
	001274'	711014	367744
  1382	001275'	625341	505100
	001276'	201004	020100
	001277'	201004	041620
	001300'	406350	742500
	001301'	516632	352212
	001302'	465005	520306
	001303'	643035	663712
	001304'	715016	464312
	001305'	203477	171750
	001306'	627324	067352
	001307'	667054	571134
  1383	001310'	000000	000000
  1384	001311'	064250	652630
	001312'	461004	020100
	001313'	202056	264734
	001314'	635016	570100
	001315'	723214	520346
	001316'	747476	462732
	001317'	203575	172320
	001320'	203024	043252
	001321'	462304	042246
	001322'	456071	447134
	001323'	201011	163100
	001324'	723214	571312
	001325'	203236	320302
  1385	001326'	673621	505100
	001327'	201004	020100
	001330'	201004	070752
	001331'	627476	464736
	001332'	671014	161336
	001333'	727504	072320
	001334'	625015	167350
	001335'	627176	264750
	001336'	745015	763100
	001337'	723214	520314
	001340'	647314	520346
	001341'	747476	462732
	001342'	261016	464312
	001343'	671016	464322
  1386	001344'	714321	220100
	001345'	201004	020100
	001346'	201014	367732
	001347'	667035	662100
	001350'	717215	772730
	001351'	621014	262500
	001352'	727474	562100
	001353'	647344	070330
	001354'	607074	520336
	001355'	631010	747534
	001356'	201012	567330
	001357'	627476	320302
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-6
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

	001360'	727515	067744
	001361'	647654	562130
  1387	001362'	064244	020100
	001363'	201004	020100
	001364'	202111	720234
	001365'	476504	062734
	001366'	723136	220350
	001367'	643124	043222
	001370'	462132	320310
	001371'	647035	467716
	001372'	727124	072336
	001373'	203474	572100
	001374'	723214	520210
	001375'	516270	346234
	001376'	203517	170312
	001377'	270000	000000
  1388	001400'	000000	000000
  1389	001401'	064250	747500
	001402'	201004	020100
	001403'	202056	264734
	001404'	635016	570100
	001405'	723214	520346
	001406'	747476	462732
	001407'	203575	172320
	001410'	203515	062500
	001411'	623134	660752
	001412'	663504	071712
	001413'	723515	167316
	001414'	715014	167310
	001415'	203476	460744
  1390	001416'	723461	505100
	001417'	201004	020100
	001420'	201004	072320
	001421'	625014	172750
	001422'	675336	262746
	001423'	723036	272100
	001424'	703455	761712
	001425'	717465	600000
  1391	001426'	000000	000000
  1392	001427'	064250	644630
	001430'	426464	020100
	001431'	202135	672312
	001432'	711016	464312
	001433'	202151	146212
	001434'	515014	464702
	001435'	663374	772712
	001436'	271004	052320
	001437'	647464	064746
	001440'	203515	062500
	001441'	717534	271762
	001442'	717514	566500
	001443'	677144	047634
  1393	001444'	416121	505100
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-7
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

	001445'	201004	020100
	001446'	201004	073720
	001447'	647075	020322
	001450'	715015	667744
	001451'	667035	466362
	001452'	203536	362710
	001453'	202371	646262
	001454'	203155	771100
	001455'	713136	372344
	001456'	727076	472744
	001457'	647354	720336
	001460'	711016	262740
	001461'	607236	264734
  1394	001462'	634321	220100
	001463'	201004	020100
	001464'	201016	464312
	001465'	203115	171726
	001466'	203155	166312
	001467'	203477	171750
	001470'	627325	620100
	001471'	523214	520306
	001472'	677335	560734
	001473'	623464	064734
	001474'	203515	064746
	001475'	203476	561346
	001476'	747476	462732
	001477'	203075	772730
  1395	001500'	620321	220100
	001501'	201004	020100
	001502'	201014	460732
	001503'	607174	520350
	001504'	643124	063322
	001505'	663124	071762
	001506'	717514	566500
	001507'	647144	072320
	001510'	627624	060744
	001511'	625016	571712
	001512'	621015	167306
	001513'	677456	262706
	001514'	723317	127100
	001515'	202234	620362
  1396	001516'	677521	505100
	001517'	201004	020100
	001520'	201004	060744
	001521'	625011	647650
	001522'	203476	571312
	001523'	203374	620356
	001524'	643036	420362
	001525'	677524	060744
	001526'	625014	467722
	001527'	673165	420210
	001530'	475011	647650
	001531'	203135	672312
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-8
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

	001532'	711016	464322
	001533'	715016	362706
	001534'	723235	767134
  1397	001535'	000000	000000
  1398	001536'	064252	242602
	001537'	422371	646262
	001540'	202056	264734
	001541'	635016	570100
	001542'	723214	520346
	001543'	747476	462732
	001544'	202471	052650
	001545'	203155	771100
	001546'	627334	571316
	001547'	627354	374500
	001550'	627614	166722
	001551'	673036	464736
  1399	001552'	671341	505100
	001553'	201004	020100
	001554'	201004	053744
	001555'	647515	167316
	001556'	203375	620350
	001557'	643124	062322
	001560'	717264	064746
	001561'	203416	262754
	001562'	627356	462710
	001563'	203535	672322
	001564'	661010	451626
	001565'	416311	620320
	001566'	607464	061312
	001567'	627344	071352
  1400	001570'	671341	505100
	001571'	201004	020100
	001572'	201004	047336
	001573'	723127	220250
	001574'	643124	071762
	001575'	717514	566500
	001576'	617035	667336
	001577'	721014	262500
	001600'	526352	344252
	001601'	521016	567350
	001602'	647304	042246
	001603'	456071	447100
	001604'	643036	320304
	001605'	627135	620344
	001606'	727345	600000
  1401	001607'	000000	000000
  1402	001610'	064251	147222
	001611'	522230	120100
	001612'	202456	567100
	001613'	422471	341630
	001614'	471304	072320
	001615'	627344	041620
	001616'	456411	652130
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-9
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

	001617'	202071	750262
	001620'	416450	151620
	001621'	261014	167310
	001622'	202610	554212
	001623'	415005	060752
	001624'	723364	071312
	001625'	717514	171350
	001626'	245340	000000
  1403	001627'	000000	000000
  1404	001630'	064251	647622
	001631'	472232	444602
	001632'	202456	567100
	001633'	422471	341630
	001634'	471014	272750
	001635'	203355	772100
	001636'	542133	042606
	001637'	201216	764312
	001640'	671014	467722
	001641'	673164	060734
	001642'	203035	466132
	001643'	633235	462746
	001644'	203454	571750
	001645'	677454	527122
  1405	001646'	000000	000000
  1406	001647'	064250	347634
	001650'	516371	442500
	001651'	202035	466336
	001652'	735016	464312
	001653'	203477	171750
	001654'	627324	072336
	001655'	203054	520304
	001656'	713376	563720
	001657'	721016	570100
	001660'	677344	072320
	001661'	625010	347634
	001662'	516371	442500
	001663'	723136	266722
	001664'	673035	420236
	001665'	472313	127032
  1407	001666'	051004	020100
	001667'	201004	020100
	001670'	523214	520346
	001671'	747476	462732
	001672'	202332	551650
	001673'	203054	520344
	001674'	627315	760710
	001675'	627104	061312
	001676'	633376	262500
	001677'	647504	061702
	001700'	671014	262500
	001701'	613455	772716
	001702'	643504	072740
	001703'	203375	620350
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-10
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1408	001704'	643121	505100
	001705'	201004	020100
	001706'	201004	067312
	001707'	723575	771326
	001710'	271004	052320
	001711'	647464	061736
	001712'	667334	167310
	001713'	203475	067752
	001714'	663104	061312
	001715'	203155	766330
	001716'	677574	562100
	001717'	613624	060500
	001720'	617375	566702
	001721'	673104	072336
	001722'	203056	264734
  1409	001723'	634321	220100
	001724'	201004	020100
	001725'	201016	570100
	001726'	723214	520346
	001727'	747476	462732
	001730'	201215	767312
	001731'	203374	635100
	001732'	436365	420214
	001733'	526311	426100
	001734'	466031	652602
	001735'	461015	771100
	001736'	512130	142236
	001737'	472313	124534
  1410	001740'	000000	000000
  1411	001741'	064251	642650
	001742'	536372	245500
	001743'	202035	466336
	001744'	735016	464312
	001745'	203477	171750
	001746'	627324	072336
	001747'	203054	520304
	001750'	713376	563720
	001751'	721016	570100
	001752'	677344	072320
	001753'	625011	642650
	001754'	536372	245500
	001755'	243114	563302
	001756'	727316	424534
  1412	001757'	064244	020100
	001760'	201004	020100
	001761'	202515	064746
	001762'	203035	466336
	001763'	737464	067336
	001764'	713334	166100
	001765'	607074	362746
	001766'	715016	467500
	001767'	723214	520346
	001770'	747476	462732
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-11
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

	001771'	203035	662100
	001772'	677554	571344
	001773'	647114	571500
  1413	001774'	607357	106424
	001775'	201004	020100
	001776'	201004	020340
	001777'	713136	664736
	002000'	727464	041636
	002001'	472471	746212
	002002'	203376	220234
	002003'	426512	747644
	002004'	455014	367732
	002005'	667035	662346
	002006'	271004	052320
	002007'	647464	061736
	002010'	667334	167310
	002011'	203475	067752
	002012'	663104	061312
  1414	002013'	064244	020100
	002014'	201004	020100
	002015'	203155	766330
	002016'	677574	562100
	002017'	613624	060500
	002020'	617375	566702
	002021'	673104	072336
	002022'	203056	264734
	002023'	635016	570100
	002024'	723214	520346
	002025'	747476	462732
	002026'	271005	071712
	002027'	625010	347634
	002030'	516371	442534
	002031'	244000	000000
  1415	002032'	000000	000000
  1416	002033'	064250	442604
	002034'	526164	020100
	002035'	202474	572100
	002036'	723214	520210
	002037'	426052	543614
	002040'	462030	720350
	002041'	675015	772750
	002042'	703536	420332
	002043'	677454	520322
	002044'	673155	771332
	002045'	607515	167734
	002046'	203375	620350
	002047'	643124	061736
	002050'	673475	766312
  1417	002051'	203036	406424
	002052'	201004	020100
	002053'	201004	020346
	002054'	723036	272352
	002055'	701014	167310
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-12
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

	002056'	203575	062734
	002057'	203024	071750
	002060'	677414	367710
	002061'	625015	761706
	002062'	727456	327000
  1418	002063'	000000	000000
  1419	002064'	064250	442250
	002065'	201004	020100
	002066'	202135	672312
	002067'	711014	574312
	002070'	617536	464754
	002071'	625010	442250
	002072'	271004	052336
	002073'	203054	520352
	002074'	717134	420236
	002075'	472313	120304
	002076'	745016	367714
	002077'	723574	171312
	002100'	203575	175302
  1420	002101'	713116	306424
	002102'	201004	020100
	002103'	201004	020314
	002104'	677444	062732
	002105'	627454	762734
	002106'	617624	070302
	002107'	723075	064734
	002110'	635014	167310
	002111'	203137	060732
	002112'	647354	172322
	002113'	677344	067714
	002114'	203515	062500
	002115'	667375	664750
  1421	002116'	677445	606424
	002117'	201004	020100
	002120'	201004	020252
	002121'	472110	551100
	002122'	472364	041622
	002123'	512072	546646
	002124'	522031	641612
	002125'	515012	344236
	002126'	526310	420262
	002127'	476524	047236
	002130'	512330	146230
	002131'	545012	551612
	002132'	202511	044646
	002133'	202071	746632
	002134'	406350	420400
  1422	002135'	000000	000000
  1423	002136'	064251	540634
	002137'	526031	420100
	002140'	202056	264734
	002141'	635016	570100
	002142'	723214	520346
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-13
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

	002143'	747476	462732
	002144'	203235	620350
	002145'	643124	051620
	002146'	526504	071750
	002147'	607514	520314
	002150'	677444	042212
	002151'	412530	743622
	002152'	472164	047634
  1424	002153'	462624	106424
	002154'	201004	020100
	002155'	201004	020250
	002156'	643124	060752
	002157'	723365	571312
	002160'	717514	171350
	002161'	203416	267706
	002162'	627476	320322
	002163'	715015	667750
	002164'	203414	571314
	002165'	677455	562710
  1425	002166'	270321	220100
	002167'	201004	020100
	002170'	201011	667750
	002171'	625644	054736
	002172'	725015	560762
	002173'	203355	772100
	002174'	526352	344252
	002175'	521016	464312
	002176'	203477	171750
	002177'	627324	072734
	002200'	723235	420210
	002201'	516270	346234
	002202'	203214	171500
	002203'	613134	567100
	002204'	713535	627000
  1426	002205'	000000	000000
  1427	002206'	064250	247636
	002207'	522464	020100
	002210'	202056	264734
	002211'	635015	167100
	002212'	412371	752246
	002213'	201216	467500
	002214'	663374	162100
	002215'	605014	464714
	002216'	633136	262734
	002217'	721015	567734
	002220'	647515	771122
	002221'	270000	000000
  1428	002222'	000000	000000
  1429	002223'	064251	042630
	002224'	501004	020100
	002225'	202517	170312
	002226'	203376	572100
	002227'	723215	171500
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-14
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

	002230'	667136	371702
  1430	002231'	637125	606424
  1431	002232'	000000	000000
  1432	755435			TXTCMD: MKCMD^
  1433
  1434				X	TYPE,<JRST TYPIT>,AB.ACK,<
  1435				TYPE     Report information about the system.
  1436				         TYPE CORE   - the default minimum core available to users.
  1437				         TYPE SYSTEM - reports the system number.>^
  1438	002233'	000000	754406		XWD	AB.ACK,XZ$(\$XZ)^LIT$0^
  1439			000001		$XZ==$XZ+1^
  1440				X	CHANGE,<JRST CHGIT>,AB.ACK,<
  1441				CHANGE   Change information about the system.
  1442				         CHANGE CORE   - changes the default minimum user core.
  1443				         CHANGE SYSTEM - changes the system number.>^
  1444	002234'	000000	754451		XWD	AB.ACK,XZ$(\$XZ)^LIT$1^
  1445			000002		$XZ==$XZ+1^
  1446				X	FULL,<JRST FULLRS>,AB.NAK,<
  1447				FULL     Bring up the system with a FULL DSKCLN.  If there is any
  1448				         question about the integrity of the file system, then this>,<
  1449				         command should be used in place of GO.  Unless authorized,
  1450				         DO NOT enter the FILES dialogue to set the DSKCLN type.>^
  1451	002235'	400000	754513		XWD	AB.NAK,XZ$(\$XZ)^LIT$2^
  1452			000003		$XZ==$XZ+1^
  1453				X	GO,<JRST AUTORS>,AB.ACK,<
  1454				GO       Bring up the system with the default settings and starts
  1455				         the auto-restart process.>^
  1456	002236'	000000	754603		XWD	AB.ACK,XZ$(\$XZ)^LIT$3^
  1457			000004		$XZ==$XZ+1^
  1458				X	FILES,<PUSHJ P,FILES>,AB.NAK!AB.VER,<
  1459				FILES    Enter the FILES dialogue.  This is the subsystem of ONCE
  1460				         which is normally used ONLY for restructuring or repairing>,<
  1461				         the disk file system.  The commands in this subsystem could
  1462				         damage the file system if they are used incorrectly.  If you>,<
  1463				         are NOT sure of what you are doing, DO NOT enter this section.>^
  1464	002237'	600000	754631		XWD	AB.NAK!AB.VER,XZ$(\$XZ)^LIT$4^
  1465			000005		$XZ==$XZ+1^
  1466				X	READONLY,<JRST REDOLY>,AB.ACK!AB.VER!AB.CVR,<
  1467				READONLY Bring up the system SHUT for emergency examination.
  1468				         Writing on the disk is prevented until DSKCLN has been run.>,<
  1469				         Note: The system cannot be UNSHUT until DSKCLN has been run.>^
  1470	002240'	240000	754740		XWD	AB.ACK!AB.VER!AB.CVR,XZ$(\$XZ)^LIT$5^
  1471			000006		$XZ==$XZ+1^
  1472				X	INITIA,<PUSHJ P,FLGINI>,AB.ACK,<
  1473				INITIA   Run DSKCLN, then CHKPNT, COPYCRASH, and XEXEC (auto restart).>^
  1474	002241'	000000	755012		XWD	AB.ACK,XZ$(\$XZ)^LIT$6^
  1475			000007		$XZ==$XZ+1^
  1476				X	NOINITIA,<PUSHJ P,FLGNOI>,AB.ACK,<
  1477				NOINITIA Run DSKCLN but not XEXEC (when doing an all-files restore.)>^
  1478	002242'	000000	755032		XWD	AB.ACK,XZ$(\$XZ)^LIT$7^
  1479			000010		$XZ==$XZ+1^
  1480				X	CONSOLE,<PUSHJ P,FLGCTY>,AB.ACK,<
  1481				CONSOLE  Allow the system to be brought up on the CONSOLE terminal ONLY.
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 17-15
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1482				         The system MUST be reloaded before it can be brought up on the>,<
  1483				         network.  This command should be followed by a command to bring
  1484				         up the system (one of: GO, FULL, MANUAL or READONLY).>^
  1485	002243'	000000	755051		XWD	AB.ACK,XZ$(\$XZ)^LIT$10^
  1486			000011		$XZ==$XZ+1^
  1487				X	NETWORK,<PUSHJ P,FLGNET>,AB.ACK,<
  1488				NETWORK  Allow the system to be brought up on the NETWORK (default).
  1489				         This allows normal access to the system and overrides any>,<
  1490				         previous CONSOLE or NETWORK commands.  This command should be
  1491				         followed by a command to bring up the system. (see CONSOLE.)>^
  1492	002244'	000000	755143		XWD	AB.ACK,XZ$(\$XZ)^LIT$11^
  1493			000012		$XZ==$XZ+1^
  1494				X	DEBUG,<PUSHJ P,ODEBUG##>,AB.NAK,<
  1495				DEBUG    Set the DEBUGFLAG to output more information on the console at
  1496				         startup and when a stopcode occurs.>^
  1497	002245'	400000	755235		XWD	AB.NAK,XZ$(\$XZ)^LIT$12^
  1498			000013		$XZ==$XZ+1^
  1499				X	DDT,<PUSHJ P,DDT>,AB.NAK,<
  1500				DDT      Enter executive DDT.  To be used ONLY by software wizards
  1501				         for emergency patching and examination of the monitor.>,<
  1502				         UNDER NO CIRCUMSTANCES SHOULD YOU NORMALLY USE THIS COMMAND!>^
  1503	002246'	400000	755266		XWD	AB.NAK,XZ$(\$XZ)^LIT$13^
  1504			000014		$XZ==$XZ+1^
  1505				X	MANUAL,<JRST MANRS>,AB.ACK!AB.VER!AB.CVR,<
  1506				MANUAL   Bring up the system in the SHUT state for DEBUGGING ONLY!
  1507				         The auto-restart process is not performed.>,<
  1508				         Note: You may not UNSHUT the system until DSKCLN has been run.>^
  1509	002247'	240000	755340		XWD	AB.ACK!AB.VER!AB.CVR,XZ$(\$XZ)^LIT$14^
  1510			000015		$XZ==$XZ+1^
  1511				X	BOOTS,<JRST SYSBTS##>,AB.NAK!AB.VER,<
  1512				BOOTS    Bring in BOOTS (to load a different monitor).>^
  1513	002250'	600000	755410		XWD	AB.NAK!AB.VER,XZ$(\$XZ)^LIT$15^
  1514			000016		$XZ==$XZ+1^
  1515				IFKMC^REPEAT 0,^<
  1516				X	KMC,<JRST KMCMAN>,AB.ACK,<
  1517				KMC      Bring the system up loading the KMC-11 but without the>,<
  1518				         rest of the automatic restart procedure.  This must NEVER>,<
  1519				         be used for a restart after a system CRASH.  ONLY to be
  1520				         used when the system has been taken down gracefully and>,<
  1521				         DSKCLN has already been run.>
  1522				>;END IFKMC
  1523				X	HELP,<JRST CMDHLP>,AB.ACK,<
  1524				HELP     Type out this message.
  1525				>^
  1526	002251'	000000	755425		XWD	AB.ACK,XZ$(\$XZ)^LIT$16^
  1527			000017		$XZ==$XZ+1^
  1528				^
  1529
  1530
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 18
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1531	002252'	476000	000000*	TYPIT:	SETOM TYPONL	;ONLY TYPOUT
  1532					SCAN (TYP)^
  1533	002253'	201600	755476		MOVEI	P1,SCNTYP		; Get address of Scan Table
  1534	002254'	402000	001131*		SETZM	CMDSCF##		; Specify NO STR/UNIT stuff
  1535	002255'	260040	001132*		PUSHJ	P,CMDSCN##		; Call Scanning routine
  1536	002256'	254000	755544		  JRST	HLPTYP			; No good!
  1537	002257'	256016	755471		XCT DSPTYP(P3)			; Yes?
  1538	002260'	254000	754325		JRST	TYPCMD			; Return as if cr typed.
  1539
  1540	002261'	200714	777776	TYPHLP:	MOVE	P3,-2(P1)		; Setup AOBJN pointer for messages
  1541	002262'	550316	000000	TYPHL1:	HRRZ	T1,(P3)			; Get address of message
  1542	002263'	260040	001140*		PUSHJ	P,LNGMES		; Print TYP long message
  1543	002264'	253700	755464		AOBJN	P3,TYPHL1		; Next?
  1544	002265'	254000	754325		JRST	TYPCMD			; Return.
  1545				^
  1546
  1547					DEFINE MKTYP <
  1548					X CORE,<PUSHJ P,TYPCOR>,AB.ACK,<
  1549				TYPE CORE   - Type the default minimum core available to users.>
  1550					X SYSTEM,<PUSHJ P,TYPSYS>,AB.ACK,<
  1551				TYPE SYSTEM - Type the system number.>
  1552					X HELP,<JRST TYPHLP>,AB.ACK,<
  1553				TYPE HELP   - Type out this message.
  1554				>
  1555				>
  1556					SCNTB (TYP)^
  1557					DEFINE X(SYM,INS,BIT,TEXT,TEXT1,TEXT2,TEXT3) <
  1558					INS>	;INSTRUCTION TO EXECUTE
  1559
  1560	002266'	254000	755544		JRST NULTYP		;FOR -1 RETURN
  1561	755471			DSPTYP: MKTYP	^
  1562					X CORE,<PUSHJ P,TYPCOR>,AB.ACK,<
  1563				TYPE CORE   - Type the default minimum core available to users.>^
  1564	002267'	260040	755700		PUSHJ P,TYPCOR^
  1565					X SYSTEM,<PUSHJ P,TYPSYS>,AB.ACK,<
  1566				TYPE SYSTEM - Type the system number.>^
  1567	002270'	260040	755703		PUSHJ P,TYPSYS^
  1568					X HELP,<JRST TYPHLP>,AB.ACK,<
  1569				TYPE HELP   - Type out this message.
  1570				>^
  1571	002271'	254000	755463		JRST TYPHLP^
  1572				^		;GENERATE DISPATCH TABLE
  1573			000003		SIZTYP==.-DSPTYP
  1574	002272'	777775	755541		-SIZTYP,,TXTTYP	;AOBJN POINTER TO HELP
  1575	002273'	777775	755476		-SIZTYP,,SCNTYP	;AOBJN POINTER TO NAMES
  1576					DEFINE X (SYM,INS,BIT,TEXT,TEXT1,TEXT2,TEXT3)
  1577				<	<SIXBIT /SYM/>>
  1578					LALL
  1579	755476			SCNTYP: MKTYP	^
  1580					X CORE,<PUSHJ P,TYPCOR>,AB.ACK,<
  1581	002274'	435762	450000	TYPE CORE   - Type the default minimum core available to users.>^	<SIXBIT /CORE/>^
  1582					X SYSTEM,<PUSHJ P,TYPSYS>,AB.ACK,<
  1583	002275'	637163	644555	TYPE SYSTEM - Type the system number.>^	<SIXBIT /SYSTEM/>^
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 18-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1584					X HELP,<JRST TYPHLP>,AB.ACK,<
  1585				TYPE HELP   - Type out this message.
  1586	002276'	504554	600000	>^	<SIXBIT /HELP/>^
  1587				^		; Define Table to read
  1588					SALL
  1589	002277'	064252	454640
	002300'	425010	347644
	002301'	425004	020132
	002302'	202517	170312
	002303'	203515	062500
	002304'	623134	660752
	002305'	663504	066722
	002306'	673235	572732
	002307'	203075	771312
	002310'	203036	660722
	002311'	663034	266312
	002312'	203515	720352
	002313'	717136	271534
  1590	002314'	000000	000000
  1591	002315'	064252	454640
	002316'	425012	354646
	002317'	522131	520132
	002320'	202517	170312
	002321'	203515	062500
	002322'	717636	372312
	002323'	665015	672732
	002324'	613136	227000
  1592	002325'	000000	000000
  1593	002326'	064252	454640
	002327'	425011	042630
	002330'	501004	020132
	002331'	202517	170312
	002332'	203376	572100
	002333'	723215	171500
	002334'	667136	371702
  1594	002335'	637125	606424
  1595	002336'	000000	000000
  1596	755541			TXTTYP: MKTYP^
  1597					X CORE,<PUSHJ P,TYPCOR>,AB.ACK,<
  1598				TYPE CORE   - Type the default minimum core available to users.>^
  1599	002337'	000000	755501		XWD	AB.ACK,XZ$(\$XZ)^LIT$0^
  1600			000001		$XZ==$XZ+1^
  1601					X SYSTEM,<PUSHJ P,TYPSYS>,AB.ACK,<
  1602				TYPE SYSTEM - Type the system number.>^
  1603	002340'	000000	755517		XWD	AB.ACK,XZ$(\$XZ)^LIT$1^
  1604			000002		$XZ==$XZ+1^
  1605					X HELP,<JRST TYPHLP>,AB.ACK,<
  1606				TYPE HELP   - Type out this message.
  1607				>^
  1608	002341'	000000	755530		XWD	AB.ACK,XZ$(\$XZ)^LIT$2^
  1609			000003		$XZ==$XZ+1^
  1610				^
  1611				^
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 18-3
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1612	755544			NULTYP:
  1613				HLPTYP:	MOVEI T1,[ASCIZ /
  1614				Type  "TYPE HELP"  for a list of options.
  1615	002342'	201300	760057	/]
  1616	002343'	254000	754323		JRST	HLPCM1
  1617
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 19
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1618
  1619	002344'	402000	002252*	CHGIT:	SETZM TYPONL	;NEED ANSWER
  1620					SCAN (CHG)^
  1621	002345'	201600	755570		MOVEI	P1,SCNCHG		; Get address of Scan Table
  1622	002346'	402000	002254*		SETZM	CMDSCF##		; Specify NO STR/UNIT stuff
  1623	002347'	260040	002255*		PUSHJ	P,CMDSCN##		; Call Scanning routine
  1624	002350'	254000	755676		  JRST	HLPCHG			; No good!
  1625	002351'	256016	755563		XCT DSPCHG(P3)			; Yes?
  1626	002352'	254000	754325		JRST	CHGCMD			; Return as if cr typed.
  1627
  1628	002353'	200714	777776	CHGHLP:	MOVE	P3,-2(P1)		; Setup AOBJN pointer for messages
  1629	002354'	550316	000000	CHGHL1:	HRRZ	T1,(P3)			; Get address of message
  1630	002355'	260040	002263*		PUSHJ	P,LNGMES		; Print CHG long message
  1631	002356'	253700	755556		AOBJN	P3,CHGHL1		; Next?
  1632	002357'	254000	754325		JRST	CHGCMD			; Return.
  1633				^
  1634
  1635					DEFINE MKCHG <
  1636					X CORE,<PUSHJ P,CHGCOR>,ab.nak!ab.ver,<
  1637				CHANGE CORE   - Change the default minimum core available to users.>
  1638					X SYSTEM,<PUSHJ P,CHGSYS>,ab.nak!ab.ver,<
  1639				CHANGE SYSTEM - Change the system number.  (This should ONLY be
  1640				                done when bringing up a system on hardware other>,<
  1641				                than what it was originally built for).>
  1642					X HELP,<JRST CHGHLP>,ab.ack,<
  1643				CHANGE HELP   - Type out this message.
  1644				>
  1645				>
  1646					SCNTB (CHG)^
  1647					DEFINE X(SYM,INS,BIT,TEXT,TEXT1,TEXT2,TEXT3) <
  1648					INS>	;INSTRUCTION TO EXECUTE
  1649
  1650	002360'	254000	755676		JRST NULCHG		;FOR -1 RETURN
  1651	755563			DSPCHG: MKCHG	^
  1652					X CORE,<PUSHJ P,CHGCOR>,ab.nak!ab.ver,<
  1653				CHANGE CORE   - Change the default minimum core available to users.>^
  1654	002361'	260040	755706		PUSHJ P,CHGCOR^
  1655					X SYSTEM,<PUSHJ P,CHGSYS>,ab.nak!ab.ver,<
  1656				CHANGE SYSTEM - Change the system number.  (This should ONLY be
  1657				                done when bringing up a system on hardware other>,<
  1658				                than what it was originally built for).>^
  1659	002362'	260040	755720		PUSHJ P,CHGSYS^
  1660					X HELP,<JRST CHGHLP>,ab.ack,<
  1661				CHANGE HELP   - Type out this message.
  1662				>^
  1663	002363'	254000	755555		JRST CHGHLP^
  1664				^		;GENERATE DISPATCH TABLE
  1665			000003		SIZCHG==.-DSPCHG
  1666	002364'	777775	755673		-SIZCHG,,TXTCHG	;AOBJN POINTER TO HELP
  1667	002365'	777775	755570		-SIZCHG,,SCNCHG	;AOBJN POINTER TO NAMES
  1668					DEFINE X (SYM,INS,BIT,TEXT,TEXT1,TEXT2,TEXT3)
  1669				<	<SIXBIT /SYM/>>
  1670					LALL
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 19-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1671	755570			SCNCHG: MKCHG	^
  1672					X CORE,<PUSHJ P,CHGCOR>,ab.nak!ab.ver,<
  1673	002366'	435762	450000	CHANGE CORE   - Change the default minimum core available to users.>^	<SIXBIT /CORE/>^
  1674					X SYSTEM,<PUSHJ P,CHGSYS>,ab.nak!ab.ver,<
  1675				CHANGE SYSTEM - Change the system number.  (This should ONLY be
  1676				                done when bringing up a system on hardware other>,<
  1677	002367'	637163	644555	                than what it was originally built for).>^	<SIXBIT /SYSTEM/>^
  1678					X HELP,<JRST CHGHLP>,ab.ack,<
  1679				CHANGE HELP   - Type out this message.
  1680	002370'	504554	600000	>^	<SIXBIT /HELP/>^
  1681				^		; Define Table to read
  1682					SALL
  1683	002371'	064250	344202
	002372'	472170	520206
	002373'	476450	520100
	002374'	201324	041720
	002375'	607354	762500
	002376'	723214	520310
	002377'	627154	172730
	002400'	721015	564734
	002401'	647336	566500
	002402'	617376	262500
	002403'	607554	164730
	002404'	607055	462500
	002405'	723364	072746
	002406'	627456	327000
  1684	002407'	000000	000000
  1685	002410'	064250	344202
	002411'	472170	520246
	002412'	546472	442632
	002413'	201324	041720
	002414'	607354	762500
	002415'	723214	520346
	002416'	747476	462732
	002417'	203356	566704
	002420'	627445	620100
	002421'	242515	064746
	002422'	203475	067752
	002423'	663104	047634
	002424'	462624	061312
  1686	002425'	064244	020100
	002426'	201004	020100
	002427'	201004	020100
	002430'	201004	062336
	002431'	673124	073720
	002432'	627344	061344
	002433'	647354	764734
	002434'	635016	570100
	002435'	605016	374746
	002436'	723135	520336
	002437'	671015	060744
	002440'	623574	171312
	002441'	203376	464312
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 19-3
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1687	002442'	710321	220100
	002443'	201004	020100
	002444'	201004	020100
	002445'	201004	020350
	002446'	643035	620356
	002447'	643036	420322
	002450'	721016	760746
	002451'	203376	264716
	002452'	647354	166330
	002453'	745014	272722
	002454'	663504	063336
	002455'	711225	600000
  1688	002456'	000000	000000
  1689	002457'	064250	344202
	002460'	472170	520220
	002461'	426312	020100
	002462'	201324	052362
	002463'	703124	067752
	002464'	721016	464322
	002465'	715015	562746
	002466'	717034	762534
  1690	002467'	064240	000000
  1691	002470'	000000	000000
  1692	755673			TXTCHG: MKCHG^
  1693					X CORE,<PUSHJ P,CHGCOR>,ab.nak!ab.ver,<
  1694				CHANGE CORE   - Change the default minimum core available to users.>^
  1695	002471'	600000	755573		XWD	ab.nak!ab.ver,XZ$(\$XZ)^LIT$0^
  1696			000001		$XZ==$XZ+1^
  1697					X SYSTEM,<PUSHJ P,CHGSYS>,ab.nak!ab.ver,<
  1698				CHANGE SYSTEM - Change the system number.  (This should ONLY be
  1699				                done when bringing up a system on hardware other>,<
  1700				                than what it was originally built for).>^
  1701	002472'	600000	755612		XWD	ab.nak!ab.ver,XZ$(\$XZ)^LIT$1^
  1702			000002		$XZ==$XZ+1^
  1703					X HELP,<JRST CHGHLP>,ab.ack,<
  1704				CHANGE HELP   - Type out this message.
  1705				>^
  1706	002473'	000000	755661		XWD	ab.ack,XZ$(\$XZ)^LIT$2^
  1707			000003		$XZ==$XZ+1^
  1708				^
  1709				^
  1710	755676			NULCHG:
  1711				HLPCHG:	MOVEI T1,[ASCIZ /
  1712				Type  "CHANGE HELP"  for a list of options.
  1713	002474'	201300	760071	/]
  1714	002475'	254000	754323		JRST	HLPCM1
  1715
  1716					XALL
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 20
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1717				;CHANGE AND TYPE ROUTINES
  1718
  1719	002476'	550600	757710	TYPCOR:	HRRZ P1,CORLIM
  1720	002477'	201300	760103		MOVEI T1,[ASCIZ /Default minimum user core = /]
  1721	002500'	324740	000000*		PJRST DECLOP
  1722
  1723	002501'	200600	000000*	TYPSYS:	MOVE	P1,SYSNUM	;GET SYSTEM NUMBER.
  1724	002502'	201300	760111		MOVEI T1,[ASCIZ /System number = /]
  1725	002503'	324740	002500*		PJRST DECLOP
  1726
  1727	002504'	550600	757710	CHGCOR:	HRRZ P1,CORLIM
  1728	002505'	201300	000006		MOVEI T1,6
  1729	002506'	202300	000000*		MOVEM T1,MIN
  1730	002507'	201300	000400		MOVEI T1,^D256
  1731	002510'	202300	000000*		MOVEM T1,MAX
  1732	002511'	201300	760103		MOVEI T1,[ASCIZ /Default minimum user core = /]
  1733	002512'	260040	000000*		PUSHJ P,ASKQMM
  1734	002513'	263040	000000		 POPJ P,
  1735	002514'	542340	757710		HRRM T2,CORLIM
  1736	002515'	263040	000000		POPJ P,
  1737
  1738	002516'	200600	002501*	CHGSYS:	MOVE	P1,SYSNUM	;Get current system number
  1739	002517'	201300	000001		MOVEI	T1,^D1
  1740	002520'	202300	002506*		MOVEM	T1,MIN
  1741				IFCPU (<KI,KL>)^
  1742	002521'	201300	000377		MOVEI	T1,^D256-1>	; PDP-10, it must fit in one 8-bit byte
  1743				IFNCPU(<KI,KL>)^
  1744	002522'	202300	002510*		MOVEM	T1,MAX
  1745	002523'	201300	760111		MOVEI	T1,[ASCIZ /System number = /]
  1746	002524'	260040	002512*		PUSHJ	P,ASKQMM
  1747	002525'	263040	000000		 POPJ	P,
  1748	002526'	202340	002516*		MOVEM	T2,SYSNUM	;STORE INTO GETTAB TABLE.
  1749	002527'	200300	754074		MOVE	T1,CNFCPY	;BLT POINTER TO COPY CONFIG NAME/DATE
  1750	002530'	251300	756016		BLT	T1,CPYFIG+4	;COPY
  1751	002531'	402000	000674*		SETZM	CONFIG
  1752	002532'	200300	754073		MOVE	T1,CNCLBT
  1753	002533'	251300	777777*		BLT	T1,SYSDAT-1	;CLEAR OUT IN CASE NEW STRING SHORTER
  1754	002534'	200400	754075		MOVE	T3,CPYBPT	;GET POINTER TO COPY AREA
  1755	002535'	200440	754076		MOVE	T4,CNFBPT	;GET POINTER TO CONFIG AREA
  1756	002536'	134300	000010	CHGSY1:	ILDB	T1,T3		;FIRST CHAR ALWAYS COPY
  1757	002537'	301300	000060		CAIL	T1,"0"
  1758	002540'	303300	000071		CAILE	T1,"9"
  1759					 JRST	[IDPB	T1,T4	;Leading non-numeric
  1760	002541'	254000	760115			 JRST	CHGSY1]
  1761	002542'	260040	756001		PUSHJ	P,CPYSYN	;TURN T2 INTO STRING, DEPOSIT THRU T4.
  1762	002543'	134300	000010	CHGSY2:	ILDB	T1,T3		;SKIP OVER OLD NUMBER
  1763	002544'	301300	000060		CAIL	T1,"0"
  1764	002545'	303300	000071		CAILE	T1,"9"
  1765	002546'	334000	000000		 SKIPA			;FINISHED SKIPPING OLD SYSTEM NUMBER
  1766	002547'	254000	755745		JRST	CHGSY2		;CONTINUE TO EAT SYSTEM NUMBER
  1767	002550'	136300	000011	CHGSY3:	IDPB	T1,T4		;FIRST TIME, PUT IN FIRST NON-SYSNUM CHAR
  1768	002551'	134300	000010		ILDB	T1,T3		;GET NEXT SOURCE CHAR
  1769	002552'	326300	755752		JUMPN	T1,CHGSY3	;IF NON-ZERO, COPY.
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 20-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1770	002553'	263040	000000		POPJ	P,		;ZERO MEANS DONE.
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 21
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1771				;ROUTINE TO GET SYSTEM NUMBER INTO T2 FROM CONFIG.
  1772				; CALLED ONCE, AT TIME SYSTEM NAME IS PRINTED OUT ON CONSOLE.
  1773				; ALL OTHERS INTERESTED IN WHAT SYSTEM NUMBER IS SHOULD
  1774				; LOOK AT SYSNUM.
  1775
  1776				EXTERNAL SYSNUM
  1777
  1778	002554'	200440	754076	GETSYN:	MOVE	T4,CNFBPT	;GET BYTE POINTER INTO CONFIG
  1779	002555'	400340	000000		SETZ	T2,		;WILL GET SYSTEM NUMBER
  1780	002556'	134300	000011	GETSY0:	ILDB	T1,T4		;GO TILL FIRST NUMBER
  1781	002557'	301300	000060		CAIL	T1,"0"
  1782	002560'	303300	000071		CAILE	T1,"9"
  1783	002561'	254000	755760		 JRST	GETSY0		;BETTER BE AT LEAST ONE.
  1784	002562'	221340	000012	GETSY1:	IMULI	T2,^D10
  1785	002563'	271346	777720		ADDI	T2,-"0"(T1)
  1786	002564'	134300	000011		ILDB	T1,T4
  1787	002565'	301300	000060		CAIL	T1,"0"
  1788	002566'	303300	000071		CAILE	T1,"9"
  1789	002567'	334000	000000		 SKIPA
  1790	002570'	254000	755764		  JRST	GETSY1
  1791	002571'	202340	002526*		MOVEM	T2,SYSNUM
  1792	002572'	326340	000000*		JUMPN	T2,CPOPJ	;Done if system number is nonzero
  1793				IFCPU (KI)^
  1794				IFNCPU(KI)^
  1795	002573'	700000	000006		APRID	T1		;GET SERIAL NUMBER, UCODE VERSION, ETC.
  1796	002574'	405300	007777		ANDI	T1,APRSER	;JUST SERIAL NUMBER
  1797				>;END IFNCPU (KI)
  1798	002575'	542300	001077*		HRRM	T1,.CPCPU##	;Fake out the CAMN T1,SERIAL test
  1799	002576'	324740	755720		PJRST	CHGSYS		;Demand a new system number
  1800
  1801	002577'	200300	000007	CPYSYN:	MOVE	T1,T2		;GET INTO T1
  1802	002600'	231300	000012	CPYSY1:	IDIVI	T1,^D10
  1803	002601'	506341	000000		HRLM	T2,(P)		;SAVE ON STACK
  1804	002602'	332000	000006		SKIPE	T1		;IF NO MORE DIGITS, START DEPOSITING.
  1805	002603'	260040	756002		PUSHJ	P,CPYSY1	;CURSE, AND RECURSE.
  1806	002604'	554301	000000		HLRZ	T1,(P)		;GET NEXT DIGIT
  1807	002605'	271300	000060		ADDI	T1,"0"
  1808	002606'	136300	000011		IDPB	T1,T4		;PUT INTO CONFIG
  1809	002607'	263040	000000		POPJ	P,		;RETURN.
  1810
  1811	756012			CPYFIG:	BLOCK	5+1		;5 WORDS FOR CONFIG, 1 FOR GOOD MEASURE.
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 22
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1812				COMMENT #
  1813				@@SUBROUTINE OPCBST/OPCBCL
  1814				@@PURPOSE
  1815				DEPENDING ON THE ENTRY POINT USED, EITHER (OPCBST)SETS UP OR
  1816				(OPCBCL)CLEARS THE TEMPORARY ONCE-TIME PCBS' MAP SLOTS
  1817				OPCBST ALSO SETS PCBTAB AND PGYXXX POINTERS.
  1818				CALLED WITH A JSP T4.
  1819				@@ENTRY
  1820				SEE PURPOSE.
  1821				@@ACCUM
  1822				DESTROYS T1, T2, AND T3.
  1823				@@ #
  1824
  1825				EXTERN PCBPAG,PCBTAB,PCBLNK
  1826
  1827	002616'	261040	000003	OPCBCL:	PUSH	P,PG		;
  1828
  1829				    ;HERE TO CLEAR THE USE AND SWAP DONE LISTS.  NO NEED TO CLEAR FPL/BPL/LST.
  1830	002617'	403340	000000*		SETZB	T2,USELST	;
  1831	002620'	402000	000000*		SETZM	SODLST		;
  1832	002621'	402000	000000*		SETZM	SIDLST		;
  1833	002622'	201300	000007		MOVEI	T1,NMOCPC	;
  1834	002623'	200140	754066		MOVE	PG,OPCLOW	;GET CP# OF LOWEST ONCE PCB
  1835	002624'	137340	000000*	OPCBN1:	DPB	T2,PGYUSE	;
  1836	002625'	137340	000000*		DPB	T2,PGYERR	;
  1837	002626'	137340	000000*		DPB	T2,PGYDRT	;
  1838	002627'	373000	000006		SOSLE	T1		;SKIP OVER AOJA IF DONE.
  1839	002630'	344140	756026		AOJA	PG,OPCBN1	;
  1840	002631'	254000	756166		JRST	OPCOUT
  1841
  1842	002632'	261040	000003	OPCBST:	PUSH	P,PG		;
  1843	002633'	402000	000000*		SETZM	ONCTIM		;FLAG FOR FINPCB.
  1844	002634'	201300	754037		MOVEI	T1,OPCBTB	;SET UP POINTER TO LIST OF
  1845	002635'	202300	000000*		MOVEM	T1,PCBTAB	;PRIMARY PCBS.
  1846	002636'	400300	000000		SETZ	T1,		;T1/ INDX TO TABLE OF PCB ADDRS.
  1847	002637'	200140	000231*		MOVE	PG,MEMSIZ##	;FIRST NON-EX LOCATION
  1848	002640'	275140	001000		SUBI	PG,1000		;1ST LOC OF LAST PAGE
  1849	002641'	242140	777767		LSH	PG,W2PLSH	;CONVERT TO PAGE NUMBER
  1850	002642'	336346	754037	OPCBS4:	SKIPN	T2,OPCBTB(T1)	;ANOTHER PCB?
  1851	002643'	344140	756053		AOJA	PG,OPCBN0	;DONE. SET PG TO LOWEST PCB PAGE AND JUMP.
  1852	002644'	506147	000000*		HRLM	PG,PCBPAG(T2)	;YES, SET PAGE NUMBER IN PCB
  1853	002645'	201403	520000		MOVEI	T3,PGE.A!PGE.W!PGE.C(PG)	;ITS
  1854	002646'	137406	754056		DPB	T3,MPSLOT(T1)	;MAP ENTRY.
  1855	002647'	275140	000001		SUBI	PG,1		;NEXT PAGE FOR ONCE PCBS.
  1856	002650'	344300	756044		AOJA	T1,OPCBS4	;CONTINUE.
  1857				    ;SET BYTE PNTRS.
  1858	002651'	202140	754066	OPCBN0:	MOVEM	PG,OPCLOW	;REMEMBER LOWEST PHYSICAL PAGE USED FOR ONCE PCBS.
  1859	002652'	201340	744000		MOVEI	T2,BOTTM-ONCDDS	;GET START OF ONCE ONLY PGY TABLES.
  1860	002653'	274340	000003		SUB	T2,PG		;PGY IS INDEXED BY THAT MINIMUM INDEX.
  1861	002654'	542340	000000*		HRRM	T2,PGYUNU	;
  1862	002655'	542340	000000*		HRRM	T2,PGYPGO	;
  1863	002656'	542340	000000*		HRRM	T2,PGYFPL	;
  1864
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 22-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1865	002657'	271340	000007		ADDI	T2,NMOCPC	;SECOND WORD.
  1866	002660'	542340	000000*		HRRM	T2,PGYLMA	;
  1867	002661'	542340	000000*		HRRM	T2,PGYLMV	;
  1868	002662'	542340	000000*		HRRM	T2,PGYLMJ	;
  1869	002663'	542340	000000*		HRRM	T2,PGYBPL	;
  1870
  1871	002664'	271340	000007		ADDI	T2,NMOCPC	;THIRD WORD.
  1872	002665'	542340	000000*		HRRM	T2,PGYLST	;
  1873	002666'	542340	000000*		HRRM	T2,PGYDIO	;
  1874	002667'	542340	000000*		HRRM	T2,PGYADR	;
  1875	002670'	542340	000000*		HRRM	T2,PGYUNI	;
  1876	002671'	542340	000000*		HRRM	T2,PGYPNO	;
  1877
  1878	002672'	271340	000007		ADDI	T2,NMOCPC	;FOURTH WORD.
  1879	002673'	542340	000000*		HRRM	T2,PGYSPT	;
  1880	002674'	542340	000000*		HRRM	T2,PGYSPB	;
  1881	002675'	542340	000000*		HRRM	T2,PGYSPO	;
  1882	002676'	542340	000000*		HRRM	T2,PGYCHT	;
  1883
  1884	002677'	271340	000007		ADDI	T2,NMOCPC	;FIFTH WORD.
  1885	002700'	542340	000000*		HRRM	T2,PGYSTS
  1886	002701'	542340	000000*		HRRM	T2,PGYSIO	;
  1887	002702'	542340	000000*		HRRM	T2,PGYSIP	;
  1888	002703'	542340	000000*		HRRM	T2,PGYSOP	;
  1889	002704'	542340	002625*		HRRM	T2,PGYERR	;
  1890	002705'	542340	000000*		HRRM	T2,PGYNXM	;
  1891	002706'	542340	002626*		HRRM	T2,PGYDRT	;
  1892	002707'	542340	000000*		HRRM	T2,PGYATB	;
  1893	002710'	542340	002624*		HRRM	T2,PGYUSE	;
  1894
  1895	002711'	271340	000007		ADDI	T2,NMOCPC	;SIXTH WORD
  1896	002712'	542340	000000*		HRRM	T2,PGYCSH
  1897
  1898	002713'	201300	000000*	OPCBND:	MOVEI	T1,ONCPYP	;NUMBER OF PAGES FOR PGY AND DDB
  1899	002714'	201340	000000*		MOVEI	T2,EPT*2+<<BOTTM-ONCDDS>/1000>-1
  1900	002715'	241340	777777		ROT	T2,-1
  1901	002716'	607340	400000		TLNN	T2,(1B0)	;CAN'T USE EPTPTR, ONCPYP MADE OF EXTERNALS
  1902					JRST	[HRLI T2,(POINT 18,0,17)
  1903	002717'	254000	760117			 JRST .+2]	;IS EVEN USE RIGHT HAND SLOT
  1904	002720'	505340	002200		HRLI	T2,(POINT 18,0,35) ;ODD, USE LEFT HAND SLOT
  1905								;NOW HAVE PTR TO PAGE BEFORE ONE FOR PGY AND DDB.
  1906	002721'	336140	000010		SKIPN	PG,T3		;IF T3 IS ZERO, CLEAR PG AND GO CLEAR MAP SLOTS
  1907	002722'	254000	756130		JRST	OPCBNL
  1908	002723'	200140	754066		MOVE	PG,OPCLOW	;GET LOWEST PAGE NUMBER OF ONCE PCBS
  1909	002724'	275140	000000*		SUBI	PG,ONCPYP	;GET FIRST PHYS PAGE OF PGY AND DDB
  1910	002725'	660140	520000		TRO	PG,PGE.A!PGE.W!PGE.C ;MAKE INTO MAP SLOT POINTER
  1911	002726'	136140	000007	OPCBNL:	IDPB	PG,T2		;SET OR CLEAR SLOT
  1912	002727'	271140	000001		ADDI	PG,1		;NEXT CP
  1913	002730'	367300	756130		SOJG	T1,OPCBNL	;AND LOOP TILL DONE.
  1914					CLRPTA	^SALL
  1915	002731'	701220	000000*	^		;GET MAPPING INTO EFFECT SO CAN USE IT BELOW.
  1916	002732'	322400	756166		JUMPE	T3,OPCOUT	;IF CLEARING, JUST RETURN.
  1917	002733'	201300	000000*		MOVEI	T1,BOTTM-ONCDDS+CNTPGY*NMOCPC ;DDB LOCATION IN VIRTUAL SPACE
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 22-3
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1918	002734'	202300	754065		MOVEM	T1,ONCDDB	;STORE IT FOR ONCDSK.
  1919
  1920				    ;HERE TO SET THE USE LIST.
  1921	002735'	201300	000007	OPCBN2:	MOVEI	T1,NMOCPC	;T1/ LOOP COUNTER.
  1922	002736'	261040	000011		PUSH	P,T4		;T4/ PGYLST,
  1923	002737'	201340	000001		MOVEI	T2,1		;T2/ PGYUSE.
  1924	002740'	201440	000000*		MOVEI	T4,USE.N	;
  1925	002741'	400400	000000		SETZ	T3,		;BPL.
  1926	002742'	200140	754066		MOVE	PG,OPCLOW	;PG/FIRST PAGE
  1927	002743'	542140	002617*		HRRM	PG,USELST	;
  1928	002744'	552140	000000*		HRRZM	PG,MINPCB	;
  1929	002745'	137400	002663*	OPCBN3:	DPB	T3,PGYBPL	;
  1930	002746'	137340	002710*		DPB	T2,PGYUSE	;
  1931	002747'	137440	002665*		DPB	T4,PGYLST	;
  1932	002750'	363300	756157		SOJLE	T1,OPCBN4	;
  1933	002751'	201403	000001		MOVEI	T3,1(PG)	;
  1934	002752'	137400	002656*		DPB	T3,PGYFPL	;
  1935	002753'	250400	000003		EXCH	T3,PG		;
  1936	002754'	254000	756147		JRST	OPCBN3		;
  1937	002755'	400400	000000	OPCBN4:	SETZ	T3,		;
  1938	002756'	137400	002752*		DPB	T3,PGYFPL	;
  1939	002757'	262040	000011		POP	P,T4		;
  1940	002760'	506140	002743*		HRLM	PG,USELST	;
  1941	002761'	552140	000000*		HRRZM	PG,MAXPCB	;STORE NO. OF HIGHEST PCB PAGE.
  1942	002762'	201303	000001		MOVEI	T1,1(PG)	;FAKE
  1943	002763'	552300	000000*		HRRZM	T1,MEMSZP	;OUT SWPENQ AT ONCE TIME.
  1944	002764'	262040	000003	OPCOUT:	POP	P,PG		;RESTORE PG.
  1945	002765'	254011	000000		JRST	(T4)		;
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 23
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1946				COMMENT ;@@SUBROUTINE EVASET
  1947				@@PURPOSE: Set up page map slots for mappable exec virtual
  1948				  address space (i.e., high seg)
  1949				@@ACCUM T1-T4
  1950				@@EXIT	EVAMAX/SETUP TO MAXIMUM VALUE EVASIZ CAN BE (ALWAYS %ONC FOR NOW).
  1951				@@;
  1952
  1953	002766'	201400	754000	EVASET:	MOVEI	T3,%ONC		;*****
  1954	002767'	202400	756242		MOVEM	T3,EVAMAX	;*****FOR NOW EVAMAX IS ALWAYS %ONC
  1955	002770'	201440	354000		MOVEI	T4,%ONC-%MIN	;GET NUMBER OF WORDS AVAILABLE
  1956	002771'	242440	777767		LSH	T4,W2PLSH	;NUMBER OF AVAILABLE PAGES
  1957	002772'	200340	756206		MOVE	T2,EVAMIN	;SETUP EPT HIGH SEG
  1958	002773'	133000	000007		IBP	T2		;DECREMENT THE POINTER
  1959	002774'	370000	000007		SOS	T2		;BECAUSE EPTPTR WON'T WORK RIGHT FOR 377.
  1960	002775'	201400	520340		MOVEI	T3,PGE.A+PGE.C+PGE.W+340 ;MAP SLOT POINTER
  1961
  1962	002776'	136400	000007	EVASE1:	IDPB	T3,T2		;SET MAP SLOT POINTER
  1963	002777'	271400	000001		ADDI	T3,1		;NEXT PAGE
  1964	003000'	367440	756200		SOJG	T4,EVASE1	;AND LOOP SETTING UP MAP SLOTS
  1965	003001'	701220	000000*		CLRPTA			;DONE, MAKE MAP SETTINGS HAPPEN.
  1966	003002'	263040	000000		POPJ	P,		;RETURN.
  1967
  1968	003003'	222200	000366*	EVAONC:	EPTPTR(%ONC.N)
  1969	003004'	222200	000200*	EVAMIN:	EPTPTR(<%MIN/^O1000>)
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 24
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  1970				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  1971				;;								;;
  1972				;;	EVMINI - Routine to set the lower bound for dynamic	;;
  1973				;;	exec virtual memory allocation.  May be called more	;;
  1974				;;	than once if the FILES dialogue is used, but it		;;
  1975				;;	doesn't matter since it will allocate again in the	;;
  1976				;;	normal sequence.					;;
  1977				;;								;;
  1978				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  1979
  1980	003005'	200300	001063*	EVMINI:	MOVE	T1,SYSSIZ	;GET CURRENT SYSTEM SIZE
  1981	003006'	202300	756241		MOVEM	T1,EVASIZ	;INITIALIZE FOR EVMALC
  1982	003007'	263040	000000		POPJ	P,
  1983
  1984				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  1985				;;								;;
  1986				;;	EVMALC - Routine to allocate EVM for ONCE.  Called	;;
  1987				;;	with # of words requested in T2, returns address in	;;
  1988				;;	T1.  Adjusts across the per-process area.  Zeroes out	;;
  1989				;;	storage before returning to caller.			;;
  1990				;;	Returns at call+1 always, T2 preserved.			;;
  1991				;;								;;
  1992				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  1993
  1994	003010'	336300	756241	EVMALC::SKIPN	T1,EVASIZ	;Current highest allocated EVM address
  1995	003011'	260040	756207		  PUSHJ	P,EVMINI	;This can happen if called from FILES
  1996	003012'	301300	400000		CAIL	T1,%MIN		;Already allocating in high-seg?
  1997	003013'	254000	756223		  JRST	EVMAL1		;If so, no problem
  1998	003014'	270300	000007		ADD	T1,T2		;See where this request puts us
  1999	003015'	307300	340000		CAIG	T1,340000	;Into the per-process area, maybe?
  2000	003016'	254000	756226		  JRST	EVMAL2		;No, how nice
  2001	003017'	201300	400000		MOVEI	T1,%MIN		;Time to start high-seg allocation
  2002	003020'	202300	756241		MOVEM	T1,EVASIZ
  2003	003021'	270300	000007	EVMAL1:	ADD	T1,T2		;Bump old high address up
  2004	003022'	313300	756242		CAMLE	T1,EVAMAX	;Encroaching on ONCE?
  2005	003023'	256000	754000		 STOPCD			;If so, monitor too big ;;EVMAL1+2
  2006	003024'	250300	756241	EVMAL2:	EXCH	T1,EVASIZ	;Return start address for request
  2007	003025'	261040	000006		PUSH	P,T1
  2008	003026'	261040	000007		PUSH	P,T2
  2009	003027'	402006	000000		SETZM	(T1)		;Clear first word for BLT
  2010	003030'	271346	777777		ADDI	T2,-1(T1)	;Start address+length-1=last address
  2011	003031'	271300	000001		ADDI	T1,1		;0,,start address + 1
  2012	003032'	505306	777777		HRLI	T1,-1(T1)	;Start address,,start address + 1
  2013	003033'	251307	000000		BLT	T1,(T2)		;Zero it all out
  2014	003034'	262040	000007		POP	P,T2
  2015	003035'	262040	000006		POP	P,T1
  2016	003036'	263040	000000		POPJ	P,
  2017
  2018	003037'	000000	000000	EVASIZ::0			;UPDATED BY ALLOCATERS TO CONTAIN
  2019								; LOCATION TO ALLOCATE AT.
  2020	003040'	000000	000000	EVAMAX::0			;HIGHEST LEGAL VALUE OF EVASIZ.
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 25
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  2021				COMMENT ;@@SUBROUTINE EVACLR
  2022				@@PURPOSE CALLED BY ONCE TO CLEAR OUT THE UNUSED EXEC VIRTUAL
  2023				MAP SLOTS AFTER ALL THE DYNAMIC STORAGE IS ALLOCATED IN
  2024				EXEC VIRTUAL ADDRESS SPACE.
  2025				@@ENTRY	EVASIZ/	UPDATED LAST LOCATION USED + 1 OF DYNAMIC SPACE
  2026				@@ACCUM T1-T4
  2027				@@EXIT  EPT MAP SLOTS ZEROED TO STARTING PAGE OF ONCE
  2028				@@;
  2029
  2030	003041'	200440	756241	EVACLR:	MOVE	T4,EVASIZ	;GET FIRST UNUSED LOCATION
  2031	003042'	435440	000777	        IORI	T4,777		;MAKE SURE LAST LOC LOOKS LIKE IS
  2032								; LAST LOC OF A PAGE
  2033	003043'	271440	000001		ADDI	T4,1		;T4 GETS FIRST UNUSED LOCATION
  2034	003044'	313440	756242		CAMLE 	T4,EVAMAX	;MAKE SURE ONCE NOT OVERWRITTEN.
  2035	003045'	256000	754000		 STOPCD                         ;;EVACLR+4
  2036	003046'	200300	000011		MOVE	T1,T4
  2037	003047'	274300	756242		SUB	T1,EVAMAX	;GET -VE NUMBER OF UNUSED WORDS
  2038	003050'	240300	777767		ASH	T1,W2PLSH	;MAKE IT -VE NUMBER OF UNUSED PAGES
  2039	003051'	242440	777767		LSH	T4,W2PLSH	;CONVERT TO FIRST UNUSED VIRTUAL PAGE NUMBER
  2040	003052'	201411	000000*		MOVEI	T3,EPT*2-1(T4)
  2041	003053'	242400	777777		LSH	T3,-1		;WORD IN EPT OF SLOT BEFORE ONE TO CLEAR
  2042	003054'	505400	002200		HRLI	T3,(POINT 18,0,35) ;ASSUME ODD
  2043	003055'	602440	000001		TRNE	T4,1		;IS IT? (TEST BACKWARDS BECAUSE ITS PAGE - 1)
  2044	003056'	505400	222200		HRLI	T3,(POINT 18,0,17) ;NO, EVEN
  2045	003057'	322300	002572*		JUMPE	T1,CPOPJ##	;IF NO USED AREA, JUST RETURN.
  2046	003060'	400440	000000		SETZ	T4,		;TO CLEAR MAP SLOT WITH
  2047	003061'	136440	000010	EVACL1:	IDPB	T4,T3		;CLEAR MAP SLOT
  2048	003062'	341300	756263		AOJL	T1,EVACL1	;AND LOOP
  2049	003063'	701220	000000*		CLRPTA			;MAPPINGS GO INTO EFFECT WITH THIS
  2050	003064'	263040	000000		POPJ	P,		;RETURN.
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 26
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  2051				COMMENT #
  2052				@@SUBROUTINE FINALC
  2053				@@PURPOSE
  2054				  SUBROUTINE TO
  2055				     1) SET UP THE SYSTEM PCBS AT INITIALIZATION TIME AND
  2056				        TO LINK THEM TO THEIR PAGES AND EACH OTHER.  SETS UP
  2057				        TABLE OF ADDRS AND POINTS PCBTAB TO IT.  SETS UP LRU/MRU
  2058				        TABLES FOR SAT PCBS AND RIB PCBS.  ALSO SETS %CTLST'S.
  2059				     2) ALLOCATE FREE CORE.  WILL USE REMAINING EXECUTIVE
  2060				        VIRTUAL MEMORY UP TO THE BEGINNING OF ONCE UNLESS
  2061				        RESTRICTED BY SPECIFYING FCWDS.
  2062				@@ACCUM
  2063				  DESTROYS T1 TO T4 AND P1 TO P4 AND PG.
  2064				@@CALLS
  2065				  EVMALC
  2066				@@ #
  2067
  2068				;FIRST GET CORE FOR BOTH THE PCBS AND THE THREE TABLES
  2069				;OF PCB ADDRS.
  2070
  2071	003065'	476000	002633*	FINALC:	SETOM	ONCTIM		;FLAG FOR FINPCB.
  2072
  2073	003066'	200340	000000*		MOVE	T2,NMSTPC	;COUNT THE NO. OF
  2074	003067'	270340	000000*		ADD	T2,NMRBPC	;SYSTEM PCBS.
  2075	003070'	200600	000007		MOVE	P1,T2		;SAVE COUNT IN P1, FOR BELOW.
  2076	003071'	221340	000006		IMULI	T2,6		;GET ROOM FOR PCBS (@4 WORDS) +
  2077	003072'	271340	000003		ADDI	T2,3		;3 TBLS WITH 1 WORD PER TYPE OF
  2078								;PCB + A ZERO ENTRY AT END.
  2079	003073'	260040	756212		PUSHJ	P,EVMALC	;Allocate, returns base in T1
  2080	003074'	200340	000014		MOVE	T2,P1		;CALC T2/ LAST LOC OF PCBS +
  2081	003075'	242340	000002		LSH	T2,2		;T4/ STARTING LOC OF THE 1ST
  2082	003076'	271346	777777		ADDI	T2,-1(T1)	;TABLE, AND
  2083	003077'	201447	000001		MOVEI	T4,1(T2)	;STORE T4
  2084	003100'	202440	002635*		MOVEM	T4,PCBTAB	;IN PCBTAB.
  2085	003101'	200640	000006		MOVE	P2,T1		;SAVE THE PCBS' STARTING ADDR.
  2086
  2087	003102'	200300	756241	        MOVE    T1,EVASIZ       ;UPDATE SYSSIZ AND EVASIZ
  2088	003103'	305300	400000	        CAIGE   T1,%MIN         ;BEYOND THE PER PROCESS AREA?
  2089	003104'	201300	400000	         MOVEI  T1,%MIN         ;NO. SKIP OVER IT
  2090	003105'	202300	756241	        MOVEM   T1,EVASIZ
  2091	003106'	275300	040000	        SUBI    T1,%MIN-340000  ;ADJUST SYSSIZ BY PER PROCESS PAGES
  2092	003107'	202300	003005*	        MOVEM   T1,SYSSIZ
  2093
  2094				;;
  2095				;; Free-core consists of a block of bit-map words, followed by a block
  2096				;; of allocatable free storage.  Each bit in the bit-map corresponds to a
  2097				;; four-word core block, therefore, each bit-map word maps 144 (decimal)
  2098				;; words of core.  The size of the total (bit-map + 4-wd blocks) storage
  2099				;; is therefore an even multiple of ^D145 => ^D144 allocatable words +
  2100				;; 1 bit-map word.
  2101
  2102				        EXTERNAL FRECOR,FREPTR,LOCORE
  2103
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 26-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  2104	003110'	332340	000000*	        SKIPE   T2,FRECOR       ;FRECORE specified explicitly?
  2105	003111'	254000	756316	         JRST   FREAL1          ;Yes. Allocate it
  2106	003112'	200340	756242	        MOVE    T2,EVAMAX       ;No.  Allocate what's available
  2107	003113'	274340	756241	        SUB     T2,EVASIZ
  2108	003114'	231340	000221	FREAL1:	IDIVI	T2,^D145	;See above
  2109				; T2 now contains number of words which will be used for bit-map
  2110	003115'	210400	000007		MOVN	T3,T2		;Remember -N
  2111	003116'	221340	000221		IMULI	T2,^D145	;Re-calculate total allocation
  2112	003117'	260040	756212		PUSHJ	P,EVMALC	;Allocate storage, returns base in T1
  2113	003120'	272340	003107*	        ADDM    T2,SYSSIZ       ;DON'T FORGET PHYSICAL MEMORY
  2114	003121'	504300	000010		HRL	T1,T3		;Make AOBJN ptr for bit-map words
  2115	003122'	202300	000000*		MOVEM	T1,FREPTR	; for free-core allocation routines
  2116	003123'	402006	000000		SETZM (T1)		;Clear out bit-map words to indicate
  2117	003124'	253300	756325		AOBJN T1,.-1		; nothing allocated yet.
  2118	003125'	552300	000000*		HRRZM	T1,LOCORE	;Allocatable storage begins after bit-map
  2119
  2120	003126'	260040	756243	        PUSHJ   P,EVACLR        ;Clear out remaining exec page map slots.
  2121				    ;ADJUST SYSSIZ TO ACCOUNT FOR THE SYSTEM PCB PAGES.
  2122	003127'	200300	003120*		MOVE	T1,SYSSIZ	;GET INTO T1
  2123	003130'	271300	000777	        ADDI    T1,777          ;MAKE SURE 1ST PHYS PAGE CORRESPONDS
  2124	003131'	620300	000777	        TRZ     T1,777          ; TO 1ST PAGE RELEASED BY EVACLR
  2125	003132'	200140	000006		MOVE	PG,T1		;SET PG TO
  2126	003133'	242140	777767		LSH	PG,W2PLSH	;NEXT PAGE NO.
  2127	003134'	552140	002760*		HRRZM	PG,USELST	;
  2128	003135'	552140	002744*		HRRZM	PG,MINPCB	;
  2129	003136'	242600	000011		LSH	P1,P2WLSH	;
  2130	003137'	270300	000014		ADD	T1,P1		;
  2131	003140'	202300	003127*		MOVEM	T1,SYSSIZ	;
  2132
  2133				    ;NOW GET PAGES FOR THE PCBS AND BUILD THE THREE TABLES.
  2134	003141'	200340	003066*		MOVE	T2,NMSTPC	;
  2135	003142'	270340	003067*		ADD	T2,NMRBPC	;
  2136	003143'	200400	003100*		MOVE	T3,PCBTAB	;SET UP T3 AS START OF SAT
  2137	003144'	271407	000001		ADDI	T3,1(T2)	;PCB LRU/MRU TABLE, AS ARG
  2138	003145'	202400	000000*		MOVEM	T3,%CTLRU+%SAT.C ;FOR SPCBLN, ALONG WITH
  2139	003146'	200440	003143*	        MOVE    T4,PCBTAB       ;GET BACK PCB TABLE ADDRESS
  2140	003147'	200600	003141*		MOVE	P1,NMSTPC	;PG AND P1.
  2141	003150'	542640	000000*		HRRM	P2,%CTLST+%SAT.C ;
  2142	003151'	400700	000000		SETZ	P3,		;BPL.
  2143	003152'	260040	756377		PUSHJ	P,SPCBLN	;LINK/LINK.
  2144	003153'	551703	000000		HRRZI	P3,(PG)		;
  2145	003154'	551143	000001		HRRZI	PG,1(PG)	;
  2146	003155'	202400	000000*		MOVEM	T3,%CTMRU+%SAT.C ;
  2147	003156'	271400	000001		ADDI	T3,1		;
  2148	003157'	202400	000000*		MOVEM	T3,%CTLRU+%RIB.C ;
  2149	003160'	202400	000000*		MOVEM	T3,%CTLRU+%RB2.C ;
  2150	003161'	200600	003142*		MOVE	P1,NMRBPC	;SET UP AND CALL SPCBLN
  2151	003162'	542640	000000*		HRRM	P2,%CTLST+%RIB.C ;
  2152	003163'	542640	000000*		HRRM	P2,%CTLST+%RB2.C ;
  2153	003164'	260040	756377		PUSHJ	P,SPCBLN	;FOR RIB PCBS.
  2154	003165'	202400	000000*		MOVEM	T3,%CTMRU+%RIB.C ;
  2155	003166'	202400	000000*		MOVEM	T3,%CTMRU+%RB2.C ;
  2156	003167'	402011	000000		SETZM	(T4)		;MARK END OF PCBTAB TABLE.
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 26-3
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  2157	003170'	506140	003134*		HRLM	PG,USELST	;
  2158	003171'	552140	002761*		HRRZM	PG,MAXPCB	;
  2159	003172'	400300	000000		SETZ	T1,		;TERMINATEE THE LAST
  2160	003173'	137300	002756*		DPB	T1,PGYFPL	;PAGE ON THE LIST.
  2161	003174'	263040	000000		POPJ	P,
  2162
  2163				    ;A LITTLE SUBR TO LINK A SET OF PCBS.
  2164				    ;ENTER WITH P1/ # OF PCBS TO LINK, P2/ ADDR OF FIRST
  2165				    ;PCB, P3/BPL, PG/ 1ST PAGE NO., T4 AND T3/ ADDRS OF TABLE ENTRIES
  2166				    ;TO STORE PCB ADDRS IN.
  2167	003175'	201300	000001	SPCBLN:	MOVEI	T1,1		;
  2168	003176'	201740	002740*		MOVEI	P4,USE.N	;
  2169	003177'	516155	002644*	SPCBL1:	HRLZM	PG,PCBPAG(P2)	;SET PCBPAG.
  2170	003200'	137300	002746*		DPB	T1,PGYUSE	;
  2171	003201'	137740	002747*		DPB	P4,PGYLST	;
  2172	003202'	137700	002745*		DPB	P3,PGYBPL	;
  2173	003203'	202651	000000		MOVEM	P2,(T4)		;MAKE THE TBL ENTRIES
  2174	003204'	202650	000000		MOVEM	P2,(T3)		;AND
  2175	003205'	271440	000001		ADDI	T4,1		;ADJUST THE TBL
  2176	003206'	271400	000001		ADDI	T3,1		;PNTRS.
  2177	003207'	271640	000004		ADDI	P2,4		;NO, GET P2/ ADDR OF NEXT PCB
  2178	003210'	363600	756420		SOJLE	P1,SPCBL2	;DONE?
  2179	003211'	542655	777774*		HRRM	P2,-4+PCBLNK(P2) ;AND LINK CURRENT PCB TO IT.
  2180	003212'	201703	000001		MOVEI	P3,1(PG)		;
  2181	003213'	137700	003173*		DPB	P3,PGYFPL	;
  2182	003214'	250700	000003		EXCH	P3,PG		;
  2183	003215'	254000	756401		JRST	SPCBL1		;
  2184	003216'	402010	000000	SPCBL2:	SETZM	(T3)		;CLEAR LAST+1 ENTRY IN LRU/MRU.
  2185	003217'	263040	000000		POPJ	P,
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 27
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  2186				COMMENT #
  2187				@@SUBROUTINE SETM2P
  2188				@@PURPOSE
  2189				SUBROUTINE TO SET UP INFO FOR THE M2, PS, PR, SI, AND RI QUEUES.
  2190				@@ACCUM
  2191				DESTROYS
  2192				@@ #
  2193
  2194				    ;SET M2REQ, PSREQ, PRREQ, SIREQ, AND RIREQ TO MINUS THE NO. OF RESOURCES,
  2195				    ;AND SET OF THE LH'S OF THE AOBJN PNTRS IN M2SWT, M2HAV,
  2196				    ;PSSWT, PRSWT, SISWT, AND RISWT SIMILARLY.
  2197	003220'	210340	003147*	SETM2P:	MOVN	T2,NMSTPC	;
  2198	003221'	202340	000000*		MOVEM	T2,PSREQ	;
  2199	003222'	516340	000000*		HRLZM	T2,PSSWT	;
  2200	003223'	202340	000000*		MOVEM	T2,SIREQ	;
  2201	003224'	516340	000000*		HRLZM	T2,SISWT	;
  2202	003225'	210340	003161*		MOVN	T2,NMRBPC	;
  2203	003226'	202340	000000*		MOVEM	T2,PRREQ	;
  2204	003227'	516340	000000*		HRLZM	T2,PRSWT	;
  2205	003230'	202340	000000*		MOVEM	T2,RIREQ	;
  2206	003231'	516340	000000*		HRLZM	T2,RISWT	;
  2207	003232'	231340	000002		IDIVI	T2,2		;LSH ISN'T IDIV ON NEGATIVE NO.
  2208	003233'	202340	000000*		MOVEM	T2,M2REQ	;
  2209	003234'	516340	000000*		HRLZM	T2,M2SWT	;
  2210	003235'	516340	000000*		HRLZM	T2,M2HAV	;
  2211
  2212				    ;GET THE SPACE FOR THE THREE TABLES.
  2213	003236'	217000	000007		MOVMS	T2		;CALC
  2214	003237'	261040	000007		PUSH	P,T2		;AND
  2215	003240'	242340	000001		LSH	T2,1		;
  2216	003241'	270340	003220*		ADD	T2,NMSTPC	;SAVE THE
  2217	003242'	270340	003241*		ADD	T2,NMSTPC	;SAVE THE
  2218	003243'	270340	003225*		ADD	T2,NMRBPC	;TOTAL SPACE
  2219	003244'	270340	003243*		ADD	T2,NMRBPC	;TOTAL SPACE
  2220	003245'	261040	000007		PUSH	P,T2		;REQUIRED.
  2221	003246'	260040	000000*		PUSHJ	P,GETWDS	;
  2222	003247'	256000	754000		 STOPCD                         ;;SETM2P+many
  2223	003250'	262040	000007		POP	P,T2		;RESTORE TOTAL COUNT OF SPACE.
  2224	003251'	261040	000006		PUSH	P,T1		;SAVE STARTING ADDRESS.
  2225	003252'	271346	777777		ADDI	T2,-1(T1)	;CLEAR
  2226	003253'	402006	000000		SETZM	(T1)		;THE
  2227	003254'	271300	000001		ADDI	T1,1		;ACQUIRED
  2228	003255'	505306	777777		HRLI	T1,-1(T1)	;SPACE.
  2229	003256'	251307	000000		BLT	T1,(T2)		;
  2230
  2231				    ;BUILD THE RH OF THE AOBJN PNTRS IN M2SWT, PSSWT, AND PRSWT.
  2232	003257'	262040	000006		POP	P,T1		;RESTORE STARTING LOCATION.
  2233	003260'	542300	003222*		HRRM	T1,PSSWT	;
  2234	003261'	270300	003242*		ADD	T1,NMSTPC	;
  2235	003262'	542300	003227*		HRRM	T1,PRSWT	;
  2236	003263'	270300	003244*		ADD	T1,NMRBPC	;
  2237	003264'	542300	003234*		HRRM	T1,M2SWT	;
  2238	003265'	262040	000007		POP	P,T2		;
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 27-2
ONCE.MAC	11-NOV-87 13:48		S.MAC - with system parameter file for P035/D, January 1988

  2239	003266'	271307	000000		ADDI	T1,(T2)		;
  2240	003267'	542300	003235*		HRRM	T1,M2HAV	;
  2241	003270'	271307	000000		ADDI	T1,(T2)		;
  2242	003271'	542300	003224*		HRRM	T1,SISWT	;
  2243	003272'	270300	003261*		ADD	T1,NMSTPC	;
  2244	003273'	542300	003231*		HRRM	T1,RISWT	;
  2245	003274'	263040	000000		POPJ	P,		;
  2246
  2247				;Here on the FILES command
  2248
  2249	003275'	260040	756526	FILES:	PUSHJ	P,SIZMEM	;Determine memory size
  2250	003276'	324740	000000*		PJRST	FILOPT		;Go into optional FILES dialog
  2251
  2252				;Here to select CONSOLE versus NETWORK mode
  2253
  2254	003277'	634300	000006	FLGNET:	TDZA	T1,T1		; Zero flag for NET access
  2255	003300'	474300	000000	FLGCTY:	SETO	T1,		; Ones flag for CTY access
  2256	003301'	202300	000000*		MOVEM	T1,CTYDO##	; Set CTYDO flag
  2257				IFKMC<
  2258					SETCAM	T1,DRDO##	; Opposite for DR-11
  2259					SETCAM	T1,DZDO##	; Opposite for DZ-11
  2260					SETCAM	T1,KMCDO##	; Opposite for KMC-11
  2261				> ; End IFKMC
  2262					MOVE	T1,[Exp [ASCIZ\
  2263				  Console\],[ASCIZ\
  2264	003302'	200306	760130	  Network\]]+1(T1)		; Print selection.
  2265	003303'	260040	757523		PUSHJ	P,OCONM
  2266	003304'	260040	757566		PUSHJ	P,OPOUT
  2267					MOVEI	T1,[Asciz\ selected.
  2268				  Please type GO, FULL, MANUAL or READONLY to bring up the system.
  2269	003305'	201300	760131	\]				; Print something!
  2270	003306'	260040	757523		PUSHJ	P,OCONM
  2271	003307'	260040	757566		PUSHJ	P,OPOUT
  2272	003310'	263040	000000		POPJ	P,		; Return to command level
  2273
  2274				;Here to select INITIA versus NOINITIA mode
  2275
  2276	003311'	634300	000006	FLGINI:	TDZA	T1,T1		; Zero flag to allow INITIA
  2277	003312'	474300	000000	FLGNOI:	SETO	T1,		; Ones flag to disable INITIA
  2278	003313'	202300	000000*		MOVEM	T1,NOXEXE##	; Set NOXEXEC FLAG
  2279					MOVE	T1,[Exp [ASCIZ\
  2280				  NOINITIA\],[ASCIZ\
  2281	003314'	200306	760161	  INITAI\]]+1(T1)		; Print selection.
  2282	003315'	260040	757523		PUSHJ	P,OCONM
  2283	003316'	260040	757566		PUSHJ	P,OPOUT
  2284					MOVEI	T1,[Asciz\ selected.
  2285				  Please type GO, FULL, MANUAL or READONLY to bring up the system.
  2286	003317'	201300	760131	\]				; Print something!
  2287	003320'	260040	757523		PUSHJ	P,OCONM
  2288	003321'	260040	757566		PUSHJ	P,OPOUT
  2289	003322'	263040	000000		POPJ	P,		; Return to command level
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 28
ONCE.MAC	11-NOV-87 13:48		Size memory

  2290				SUBTTL	Size memory
  2291
  2292				IFCPU (F3),<MAXPAG==1777>	;F3 ALWAYS HAS  512K
  2293				IFCPU (KS),<MAXPAG==3777>	;FOR KS MAX IS 1024K (DEC only supports 512K)
  2294			017777		NDL MAXPAG,17777	;KI & KL GO TO 4096K
  2295	003323'	000000	000000	HIPAGE:	0			;Highest page number (22 bits)
  2296
  2297				DEFINE	NXM.OK,<	;NXM is expected - don't cause an interrupt
  2298				IFCPU (KL),<WRAPR LP.DSF+LP.NXM+LP.PAR+LP.IOF> ;THESE WILL COME UP.
  2299				IFCPU (KS),<WRAPR LP.DSF+LP.NXM+LP.HPE>	;THESE WILL COME UP.
  2300				>			;Nothing for KI or F3
  2301
  2302				DEFINE	NXM.NO,<	;Make NXM cause STOPCD(APRFAT)
  2303				IFCPU (F3),<WRAPR LP.ESF+LP.NXM+LP.PAR>	;Re-enable NXM and parity detection
  2304				IFCPU (KL),<WRAPR LP.ESF+LP.NXM+LP.PAR+LP.IOF+APRCHN>
  2305				IFCPU (KS),<WRAPR LP.ESF+LP.NXM+LP.HPE+APRCHN>
  2306				>			;Nothing for KI
  2307
  2308	003324'	700200	043400	SIZMEM:	NXM.OK	
  2309						;We expect NXM here
  2310	003325'	403140	756525		SETZB	PG,HIPAGE
  2311	003326'	201300	000340		MOVEI	T1,340		;Start with this physical page number
  2312	003327'	260040	756555	SIZME1:	PUSHJ	P,PGCHK		;Does page in T1 exist?
  2313	003330'	334000	000000		  SKIPA			;No
  2314	003331'	200140	000006		 MOVE	PG,T1		;Yes, remember highest physical page
  2315	003332'	271300	000001		ADDI	T1,1		;Try next
  2316	003333'	307300	017777		CAIG	T1,MAXPAG	;Past highest possible?
  2317	003334'	254000	756531		 JRST	SIZME1		;Not yet
  2318	003335'	202140	756525		MOVEM	PG,HIPAGE	;Yes, remember highest
  2319	003336'	700200	103400*		NXM.NO	
  2320						;No more NXM's expected
  2321	003337'	260040	000000*		PUSHJ	P,INLMES
  2322					 ASCIZ	/
  2323	003340'	064251	064716	Highest memory address is /
	003341'	643136	372100
	003342'	667135	567744
	003343'	745014	162310
	003344'	713136	371500
	003345'	647464	000000
  2324	003346'	200300	756525		MOVE	T1,HIPAGE	;Page number
  2325	003347'	242300	000011		LSH	T1,P2WLSH
  2326	003350'	435300	000777		IORI	T1,777		;Address of end of page
  2327	003351'	260040	000000*		PUSHJ	P,PRT22A##	;Print 22-bit address
  2328	003352'	324740	757565		PJRST	CRLFOP		;CRLF and output
  2329
  2330
  2331
  2332				; Routine to determine whether a particular physical page (number
  2333				; passed in T1) exists.  Non-skip return if not, skip return if so.
  2334
  2335	003353'	660300	400000	PGCHK:	TRO	T1,PGE.A	;Set access allowed
  2336	003354'	137300	760162		DPB	T1,[EPTPGP(%ERR.N)] ;Store in EPT for page 777
  2337	003355'	701100	777000		CLRPTO	%ERR		;Clear pager's memory for this one page
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 28-2
ONCE.MAC	11-NOV-87 13:48		Size memory

  2338	003356'	620300	400000		TRZ	T1,PGE.A	;Clean up after self
  2339				IFCPU (KI),<WRAPR CLRNXM>	;If KI, PI system isn't on.
  2340	003357'	700200	027400*	IFNCPU(KI),<WRAPR CLRNXM+APRCHN ;Clear NXM flags, keep PI channel assigned
  2341	003360'	201400	756570		MOVEI	T3,PGCHK1	;Jump to PGCHK1 on AR/ARX parity page fault
  2342	003361'	250400	000502*		EXCH	T3,UPT+UPTNPP>	;(KL and KS get page failures from NXM)
  2343	003362'	200340	777774		MOVE	T2,%ERR+774	;Verify interleaving by
  2344	003363'	200340	777775		MOVE	T2,%ERR+775	; trying to read
  2345	003364'	200340	777776		MOVE	T2,%ERR+776	; four consecutive
  2346	003365'	200340	777777		MOVE	T2,%ERR+777	; words
  2347				IFNCPU(KI),<			;Jump to here on page failure from NXM
  2348	003366'	202400	000502*	PGCHK1:	MOVEM	T3,UPT+UPTNPP>	;Restore page-fail new PC
  2349	003367'	700300	007000		CONSZ	APR,APRNXM
  2350					 JRST	[WRAPR	CLRNXM
  2351	003370'	254000	760163			 POPJ	P,]	;Page is missing, give non-skip return
  2352	003371'	324740	000000*		PJRST	CPOPJ1		;Good page
  2353
  2354				; Routine to type out message about dis-continuous core - highest
  2355				; previous physical page number is in PG and first page after hole
  2356				; is in T1.
  2357	003372'	661140	200000	HOLMSG:	TLO	PG,(1B1)	;MARK DISCONTINUOUS CORE
  2358	003373'	261040	000006		PUSH	P,T1
  2359	003374'	260040	757536		PUSHJ	P,CLRSND
  2360	003375'	260040	003337*		PUSHJ	P,INLMES
  2361					ASCIZ	/
  2362	003376'	064244	244336	"Hole" in core from /
	003377'	663124	220322
	003400'	671014	367744
	003401'	625014	671336
	003402'	665000	000000
  2363	003403'	201303	000001		MOVEI	T1,1(PG)
  2364	003404'	242300	000011		LSH	T1,9
  2365	003405'	260040	757555		PUSHJ	P,RADIX8
  2366	003406'	260040	003375*		PUSHJ	P,INLMES
  2367	003407'	203515	720000		ASCIZ	/ to /
  2368	003410'	200301	000000		MOVE	T1,(P)
  2369	003411'	405300	017777		ANDI	T1,17777
  2370	003412'	242300	000011		LSH	T1,9
  2371	003413'	275300	000001		SUBI	T1,1
  2372	003414'	260040	757555		PUSHJ	P,RADIX8
  2373	003415'	260040	000000*		PUSHJ	P,CRLF
  2374	003416'	260040	757566		PUSHJ	P,OPOUT
  2375	003417'	324740	757766		PJRST	TPOPJ
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 29
ONCE.MAC	11-NOV-87 13:48		Size memory

  2376				;HERE IS WHERE WE REALLY START THINGS
  2377
  2378	756622			MANRS:
  2379				IFKMC<	SKIPE	CTYDO
  2380					 JRST	MANRSN
  2381					MOVEI	T1,[ASCIZ /
  2382				WARNING: The KMC is not loaded when coming up manually.
  2383				         The 2020 host will not be able to talk to TYMNET.
  2384				/]
  2385					PUSHJ	P,OCONM
  2386					PUSHJ	P,OPOUT
  2387				MANRSN:>;IFKMC.END
  2388	003420'	201300	000000*		MOVEI	T1,SRPNDS##
  2389	003421'	412300	000000*		ANDCAM	T1,STRDDB##+STRBTS##
  2390	003422'	476000	000000*		SETOM	ADJMWS##	;TURN ON WORKING SET DIDDLER
  2391	003423'	254000	756630		JRST	MANRS0
  2392
  2393	003424'	201300	003420*	REDOLY:	MOVEI	T1,SRPNDS##	;Set the "DSKCLN not finished bit"
  2394	003425'	436300	000000*		IORM	T1,STRDDB##+STRBTS## ;which will prevent ENTER uuos from working
  2395	003426'	200300	760165	MANRS0:	MOVE	T1,[STAUTO!STSUPR] ;No autorestart, not super-shut
  2396	003427'	412300	001006*		ANDCAM	T1,STATES	;Set SCHED 400000
  2397	003430'	254000	756643		JRST	AUTOR0
  2398
  2399				IFKMC<
  2400				KMCMAN:	SKIPN	KMCDO
  2401					 JRST	KMCMER		;COMPLAIN KMC NOT ACTIVE
  2402					SETOM	KMCDO		;FLAG KMC MANUAL MODE
  2403					MOVEI	T1,SRPNDS##	;DONT LOCK DISK STRUCTURE
  2404					ANDCAM	T1,STRDDB##+STRBTS##
  2405					MOVEI	T1,STSUPR	;DONT SET SYSTEM AS SUPER SHUT
  2406					ANDCAM	T1,STATES
  2407					MOVEI	T1,STSHUT	;SET SYSTEM AS SHUT
  2408					IORM	T1,STATES
  2409					JRST AUTOR0
  2410				KMCMER:	MOVEI	T1,[ASCIZ/
  2411				KMC not set as active in system/]
  2412					JRST HLPCM1		;GO COMPLAIN
  2413				>;END IFKMC
  2414
  2415	003431'	201300	000000*	FULLRS:	MOVEI	T1,DCFULL	; SET FULL DSKCLN restart code
  2416	003432'	137300	000000*		DPB	T1,DCNYOP	; Save for override!
  2417	003433'	205300	000000*		MOVSI	T1,DCN.OP	; Specify that OPR
  2418	003434'	436300	000000*		IORM	T1,DCN		; Has set this in ONCE
  2419					PFALL	AUTORS		;** FALL INTO AUTO RESTART CODE "GO"
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 30
ONCE.MAC	11-NOV-87 13:48		Initial auto-restart proceedures

  2420				SUBTTL	Initial auto-restart proceedures
  2421
  2422	003435'	332000	000000*	AUTORS:	SKIPE	REFLAG##	;If OPER typed GO after doing a REFRESH,
  2423	003436'	254000	756622		 JRST	MANRS		; then do MANUAL because DSKCLN is not there
  2424	003437'	201300	003424*		MOVEI	T1,SRPNDS##	;FULL and GO both need DSKCLN.
  2425	003440'	436300	000000*		IORM	T1,STRDDB##+STRBTS##
  2426	003441'	336000	000000*	AUTOR0:	SKIPN	$1B##		;DO WE WANT TO KEEP DDT
  2427	003442'	254000	756651		 JRST	AUTOR1		;NO
  2428					MOVEI	T1,[ASCIZ /
  2429				EDDT breakpoints are set.
  2430	003443'	201300	760166	/]
  2431	003444'	260040	000000*		PUSHJ	P,CONMES
  2432	003445'	260040	757566		PUSHJ	P,OPOUT
  2433	003446'	254000	756665		JRST	COMLOD		;Don't remove DDT
  2434
  2435	003447'	331000	000000*	AUTOR1:	SKIPL	DEBUGF##	;Is debugging flag set?
  2436	003450'	254000	756657		 JRST	RMVDDT		;No, remove DDT
  2437					MOVEI	T1,[ASCIZ /
  2438				DEBUGFLAG is set.
  2439	003451'	201300	760174	/]
  2440	003452'	260040	003444*		PUSHJ	P,CONMES
  2441	003453'	260040	757566		PUSHJ	P,OPOUT
  2442	003454'	254000	756665		JRST	COMLOD		;Don't remove DDT
  2443
  2444	003455'	200300	000713*	RMVDDT:	MOVE	T1,PATSIZ##	;GET SIZE OF PATCH AREA
  2445	003456'	202300	003140*		MOVEM	T1,SYSSIZ##	;AND SAVE IT
  2446	003457'	201300	254200		MOVEI	T1,(HALT)
  2447	003460'	506300	000314*		HRLM	T1,SYSDDT##	;NO MORE 141 RESTART
  2448	003461'	201300	255000		MOVEI	T1,(JFCL)
  2449	003462'	506300	000000*		HRLM	T1,.CPDDT##	;Can't get to DDT from STOPCD
  2450
  2451	003463'	402000	756241	COMLOD:	SETZM	EVASIZ          ;INITIALIZE EXEC VIRTUAL MEMORY
  2452	003464'	260040	756526		PUSHJ	P,SIZMEM	;Determine size of memory
  2453	003465'	260040	000000*		PUSHJ	P,FILMAN	;DO MANDATORY FILE STUFF.
  2454	003466'	265440	756020		JSP	T4,OPCBCL	;CLEAR THE ONCE TIME PCBS.
  2455	003467'	260040	756170		PUSHJ	P,EVASET	;SET UP EXEC ADDRESS SPACE ABOVE 400000
  2456								; FOR DYNAMIC STORAGE ALLOCATION.
  2457	003470'	200140	756241		MOVE	PG,EVASIZ	;Current highest monitor address
  2458	003471'	242140	777767		LSH	PG,-9		;Highest page # before PGY table base
  2459	003472'	271140	000001		ADDI	PG,1		;First page referred to by PGY
  2460	003473'	202140	000000*		MOVEM	PG,SYSSZP	;Used to figure PGY displacement
  2461					PFALL	PAGALC
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 31
ONCE.MAC	11-NOV-87 13:48		Initial auto-restart proceedures

  2462				;HERE IS WHERE WE START BUILDING THE PAGE TABLE
  2463				; PGY IS A LITTLE BIGGER THAN IT HAS TO BE BECAUSE EVASIZ
  2464				; WILL BE MOVED UP SOME MORE, MAKING THE FIRST PAGE
  2465				; DESCRIBED BY PGY LARGER THAN IT IS HERE.
  2466				; SYSSZP and CAVPGN get overwritten later when the final size of
  2467				; the monitor is determined.
  2468
  2469	003474'	200140	756525	PAGALC:	MOVE	PG,HIPAGE	;Get page # of highest physical core page.
  2470	003475'	274140	003473*		SUB	PG,SYSSZP	;Don't count monitor pages
  2471	003476'	271140	000001		ADDI	PG,1		;Because SYSSZP is really first PGY page
  2472	003477'	200340	000003		MOVE	T2,PG		;Now allocate for free page table
  2473	003500'	260040	756212		PUSHJ	P,EVMALC	;Returns base in T1
  2474	003501'	200140	003475*		MOVE	PG,SYSSZP	;System size in pages
  2475	003502'	275303	000000		SUBI	T1,(PG)		;Because the zero'th entry is for the
  2476	003503'	542300	003213*		HRRM	T1,PGYFPL	; SYSSZP'th physical page
  2477	003504'	202140	000000*		MOVEM	PG,CFRLST	;First free page
  2478	003505'	402000	000000*		SETZM	CAVPGN##	;Available pages for users
  2479				; Now, repeat the physical page scan, and pay attention this time.
  2480	003506'	201303	000001		MOVEI	T1,1(PG)
  2481	003507'	700200	043400		NXM.OK	
  2482						;We expect NXM to occur
  2483	003510'	260040	756555	PGSLP:	PUSHJ	P,PGCHK		;Page exists?
  2484					  JRST	[TLO PG,(1B0)	;No, flag hole in memory
  2485	003511'	254000	760201			 JRST PGSLP1]
  2486	003512'	201340	000000*		MOVEI	T2,RSVDPG##	;Start of reserved pages list
  2487	003513'	316307	000000	PGSLP0:	CAMN	T1,(T2)		;Is this a special physical page?
  2488					 JRST	[AOS NRSVDP##	;Yes, count it
  2489	003514'	254000	760203			 JRST PGSLP1]	; and pretend that it does not exist
  2490	003515'	271340	000001		ADDI	T2,1		;Point to next entry in list
  2491	003516'	332007	000000		SKIPE	(T2)		;List terminates with a zero
  2492	003517'	254000	756715		 JRST	PGSLP0		;Check page in T1 with other entry on list
  2493	003520'	623140	400000		TLZE	PG,(1B0)	;This one exists, did a hole go by?
  2494	003521'	260040	756574		 PUSHJ	P,HOLMSG	;Yes, sound the trumpets
  2495	003522'	350000	003505*		AOS	CAVPGN##	;One more for the lucky user
  2496	003523'	550340	003503*		HRRZ	T2,PGYFPL	;Base address for free-page list
  2497	003524'	271343	000000		ADDI	T2,(PG)		;Address of entry for last known
  2498	003525'	202307	000000		MOVEM	T1,(T2)		; physical page - point to new page
  2499	003526'	540140	000006		HRR	PG,T1		;Greet the new highest physical page
  2500	003527'	271300	000001	PGSLP1:	ADDI	T1,1		;Loop until boredom sets in
  2501	003530'	307300	017777		CAIG	T1,MAXPAG	;Or until no more physically possible
  2502	003531'	254000	756712		 JRST	PGSLP
  2503	003532'	700200	103400*		NXM.NO	
  2504						;No more NXM's expected
  2505	003533'	350000	003522*		AOS	CAVPGN##	;This will get adjusted later to allow
  2506								; for space allocated above SYSSIZ.
  2507				; PG should (!) once again have highest physical page #
  2508
  2509	003534'	550300	003523*		HRRZ	T1,PGYFPL	;CLEAR ALL OF FIRST PGY
  2510	003535'	271303	000000		ADDI	T1,(PG)		;TABLE WORD, AND SET
  2511	003536'	402006	000000		SETZM	(T1)		;PGYFPL TO ZERO.
  2512	003537'	506140	003504*		HRLM	PG,CFRLST	;
  2513	003540'	201143	000001		MOVEI	PG,1(PG)
  2514	003541'	202140	002763*		MOVEM	PG,MEMSZP	;SIZE IN PAGES
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 31-2
ONCE.MAC	11-NOV-87 13:48		Initial auto-restart proceedures

  2515	003542'	200340	000003		MOVE	T2,PG		;To get allocated size of remaining PGY
  2516	003543'	274340	003501*		SUB	T2,SYSSZP	; tables, duplicate PGYFPL arithmetic.
  2517	003544'	242140	000011		LSH	PG,9
  2518	003545'	202140	002637*		MOVEM	PG,MEMSIZ##
  2519	003546'	550300	003534*		HRRZ	T1,PGYFPL
  2520	003547'	542300	002655*		HRRM	T1,PGYPGO	;
  2521	003550'	542300	002654*		HRRM	T1,PGYUNU	;
  2522	003551'	260040	756212		PUSHJ	P,EVMALC	;Size in T2, returns base in T1
  2523	003552'	274300	003543*		SUB	T1,SYSSZP	;Adjust base address
  2524	003553'	542300	002660*		HRRM	T1,PGYLMA	;
  2525	003554'	542300	002661*		HRRM	T1,PGYLMV	;
  2526	003555'	542300	002662*		HRRM	T1,PGYLMJ	;
  2527	003556'	542300	003202*		HRRM	T1,PGYBPL	;
  2528	003557'	260040	756212		PUSHJ	P,EVMALC	;Table size still in T2
  2529	003560'	274300	003552*		SUB	T1,SYSSZP
  2530	003561'	542300	003201*		HRRM	T1,PGYLST	;
  2531	003562'	542300	002666*		HRRM	T1,PGYDIO
  2532	003563'	542300	002667*		HRRM	T1,PGYADR
  2533	003564'	542300	002670*		HRRM	T1,PGYUNI
  2534	003565'	542300	002671*		HRRM	T1,PGYPNO
  2535	003566'	260040	756212		PUSHJ	P,EVMALC
  2536	003567'	274300	003560*		SUB	T1,SYSSZP
  2537	003570'	542300	002673*		HRRM	T1,PGYSPT
  2538	003571'	542300	002674*		HRRM	T1,PGYSPB
  2539	003572'	542300	002675*		HRRM	T1,PGYSPO
  2540	003573'	542300	002676*		HRRM	T1,PGYCHT
  2541	003574'	260040	756212		PUSHJ	P,EVMALC
  2542	003575'	274300	003567*		SUB	T1,SYSSZP
  2543	003576'	542300	002701*		HRRM	T1,PGYSIO
  2544	003577'	542300	002700*		HRRM	T1,PGYSTS
  2545	003600'	542300	002702*		HRRM	T1,PGYSIP
  2546	003601'	542300	002703*		HRRM	T1,PGYSOP
  2547	003602'	542300	002704*		HRRM	T1,PGYERR
  2548	003603'	542300	002705*		HRRM	T1,PGYNXM
  2549	003604'	542300	002706*		HRRM	T1,PGYDRT
  2550	003605'	542300	002707*		HRRM	T1,PGYATB
  2551	003606'	542300	003200*		HRRM	T1,PGYUSE
  2552	003607'	260040	756212		PUSHJ	P,EVMALC
  2553	003610'	274300	003575*		SUB	T1,SYSSZP
  2554	003611'	542300	002712*		HRRM	T1,PGYCSH
  2555					PFALL	CHTALC
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 32
ONCE.MAC	11-NOV-87 13:48		Initial auto-restart proceedures

  2556				;Allocate Core Hash Table
  2557	003612'	200300	003533*	CHTALC:	MOVE	T1,CAVPGN##	;GET NUMBER OF USER PAGES
  2558	003613'	243300	757017		JFFO	T1,.+2
  2559	003614'	256000	754000		 STOPCD
  2560	003615'	210300	000007		MOVN	T1,T2		;LSH IN RIGHT DIRECTION
  2561	003616'	205340	400000		MOVSI	T2,(1B0)
  2562	003617'	242346	777777		LSH	T2,-1(T1)	;GET NEXT HIGHEST POWER OF TWO - 2
  2563								;(CHT START TABLE HAS # OF USER CORE PAGES
  2564								; /2 HALFWORD ENTRIES).
  2565	003620'	260040	756212		PUSHJ	P,EVMALC	;Returns base address in T1
  2566	003621'	542300	000000*		HRRM	T1,CHTPTR	;THIS IS WHERE CHT STARTS
  2567	003622'	241340	000001		ROT	T2,1		;NOW GET MASK TO USE FOR GETTING BUCKET
  2568	003623'	275340	000001		SUBI	T2,1		; NUMBER FROM DISK PAGE
  2569	003624'	202340	000000*		MOVEM	T2,CHTMSK	;AND SAVE IT.
  2570
  2571	003625'	550300	003537*		HRRZ	T1,CFRLST	;
  2572	003626'	270300	003612*		ADD	T1,CAVPGN##	;PLUS FIRST PAGE (OLD SYSSIZ)
  2573	003627'	270300	000000*		ADD	T1,NRSVDP##	;Plus number of reserved pages
  2574	003630'	242300	777777		LSH	T1,-1		;CONVERT TO K
  2575	003631'	261040	000006		PUSH	P,T1
  2576	003632'	301300	000000*		CAIL	T1,PMEMSZ	;TOO SMALL?
  2577	003633'	254000	757053		 JRST	SIZOK		;NO
  2578	003634'	260040	757536		PUSHJ	P,CLRSND
  2579	003635'	260040	003406*		PUSHJ	P,INLMES
  2580					ASCIZ	/
  2581	003636'	064240	737416	?????Should have /
	003637'	374167	703576
	003640'	035772	364336
	003641'	727314	420320
	003642'	607554	520000
  2582	003643'	201300	003632*		MOVEI	T1,PMEMSZ
  2583	003644'	260040	001105*		PUSHJ	P,PRTDEC##
  2584	003645'	260040	003635*		PUSHJ	P,INLMES
  2585	003646'	455015	763100		ASCIZ	/K of memory.
	003647'	667135	567744
  2586	003650'	745341	505000	/
  2587	003651'	262040	000006	SIZOK:	POP	P,T1
  2588	003652'	260040	003644*		PUSHJ	P,PRTDEC##
  2589	003653'	260040	003645*		PUSHJ	P,INLMES
  2590	003654'	455015	763100		ASCIZ	/K of memory online.
	003655'	667135	567744
	003656'	745015	767330
	003657'	647354	527032
  2591	003660'	050000	000000	/
  2592	003661'	260040	757566		PUSHJ	P,OPOUT
  2593	003662'	336000	003435*		SKIPN	REFLAG##	;AUTOMATIC "LOGIN" WANTED?
  2594	003663'	254000	757103		 JRST	SYS0		;NO.
  2595	003664'	200300	000000*		MOVE	T1,OPRPPN##
  2596	003665'	202300	003662*		MOVEM	T1,REFLAG##	;Set to [1,21]
  2597	003666'	260040	003653*		PUSHJ	P,INLMES
  2598	003667'	523364	060752		ASCIZ	/To automatically login, login over shut.
	003670'	723375	560750
	003671'	647074	166330
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 32-2
ONCE.MAC	11-NOV-87 13:48		Initial auto-restart proceedures

	003672'	745015	467716
	003673'	647345	420330
	003674'	677175	167100
	003675'	677554	571100
	003676'	717216	572134
  2599	003677'	064240	000000	/
  2600	003700'	260040	757566		PUSHJ	P,OPOUT
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 33
ONCE.MAC	11-NOV-87 13:48		Initial auto-restart proceedures

  2601	003701'	264000	000000*	SYS0:	JSR	LINKDB		;AND LINK UP ALL DDB'S
  2602	003702'	505300	000000*		HRLI	T1,SYSBEG	;GET SET TO CLEAR LOW CORE
  2603	003703'	541300	000001*		HRRI	T1,SYSBEG+1	;CLEAR SYSTEM DATA STORAGE
  2604	003704'	402000	003702*		SETZM	SYSBEG
  2605	003705'	200200	003545*		MOVE	F,MEMSIZ##	;SAVE MEMSIZ(ALREADY SET UP)
  2606	003706'	251300	000000*		BLT	T1,SYSEND
  2607	003707'	202200	003705*		MOVEM	F,MEMSIZ##
  2608	003710'	260040	757372		PUSHJ	P,NZRINI	;Set up any other nonzero values as needed
  2609				IFCPU (KL),<			; FOR KL with SIMULATOR LOADED
  2610				;*;	SKIPE	KL$SIM##	;IF ITS LOADED,
  2611				;*;	  JRST	SYS0A		;DON'T CLEAR JOB DATA AREA
  2612				;*;	MOVE	T1,[XWD 62,63]	;CLEAR SYSTEM PDL'S ETC ABOVE TRAP LOCATIONS
  2613				;*;	SETZM	62		;AND
  2614				;*;	BLT	T1,136		;UP TO BASE OF COMMON
  2615				>; End IFCPU (KL)
  2616
  2617	003711'	205300	420000	SYS0A:	MOVSI	T1,DVDIRIN+TTYATC
  2618	003712'	541300	600000		HRRI	T1,ASSCON+ASSPRG
  2619	003713'	554200	000000*		HLRZ	F,DEVLST	;SCAN ALL DEVICES
  2620	003714'	412304	000004	SYS1:	ANDCAM	T1,DEVMOD(F)	;CLEAR DIRECTORY IN CORE BIT,
  2621								;ASSIGNED BY CONSOLE & PROGRAM
  2622	003715'	403344	000005		SETZB	T2,DEVLOG(F)	;CLEAR LOGICAL NAME AND T2
  2623								; FOR NXM LOOP BELOW(SYS2-SYS3)
  2624
  2625	003716'	200544	000004		MOVE	M,DEVMOD(F)
  2626	003717'	402004	000002		SETZM	DEVIOS(F)
  2627	003720'	402004	000006		SETZM	DEVBUF(F)
  2628	003721'	603540	200010		TLNE	M,DVDSK!DVTTY
  2629	003722'	254000	757130		  JRST	SYS2W		;DO NOT ASSIGN
  2630	003723'	660540	400000		TRO	M,ASSCON
  2631	003724'	202544	000004		MOVEM	M,DEVMOD(F)
  2632	003725'	137340	000000*		DPB	T2,PJOBN	;ASSIGNED TO JOB 0
  2633	003726'	554204	000003	SYS2W:	HLRZ	F, DEVSER(F)
  2634	003727'	326200	757116		JUMPN	F, SYS1
  2635				IFCPU (KI),<
  2636					MOVE	T1,ONCWBR
  2637					HLRZM	T1,JBTUPM
  2638				> ; End IFCPU (KI)
  2639				IFNCPU (KI),<
  2640	003730'	201300	000675*		MOVEI	T1,UPT.PN
  2641	003731'	202300	000000*		MOVEM	T1,JBTUPM
  2642				> ; End IFNCPU (KI)
  2643	003732'	202300	000174*		MOVEM	T1,CURUPT
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 34
ONCE.MAC	11-NOV-87 13:48		Initial auto-restart proceedures

  2644				;NOW SET UP CORE THINGS.
  2645
  2646	003733'	260040	756267		PUSHJ	P,FINALC	;SET UP THE SYSTEM TIME PCBS AND FREE CORE.
  2647	003734'	260040	756422		PUSHJ	P,SETM2P	;SET UP INFO FOR M2 AND MP QS.
  2648	003735'	200340	003456*		MOVE	T2,SYSSIZ
  2649	003736'	242340	777767		LSH	T2,-9	        ;CONVERT TO PAGES
  2650	003737'	202340	003610*		MOVEM	T2,SYSSZP
  2651	003740'	550300	003625*		HRRZ	T1,CFRLST	;
  2652	003741'	542340	003740*		HRRM	T2,CFRLST	;
  2653	003742'	275307	000000		SUBI	T1,(T2)		;THE AMOUNT WE LOST
  2654	003743'	274300	000000*		SUB	T1,IOPQTA	;TAKE AWAY FROM CAVPGN FOR I/O PAGES.
  2655	003744'	273300	003626*		ADDB	T1,CAVPGN##	;ADJUST FREE PAGES
  2656	003745'	202300	000000*		MOVEM	T1,USRMAX	;MAX VALUE FOR MWSLIM. PATCHERS NOTICE !!
  2657								; (MUST NOT INCLUDE I/O PAGES, OR ELSE
  2658								; MAY NOT BE ABLE TO SWAP JOBS IN)
  2659	003746'	550340	000006		HRRZ	T2,T1		;NOT LARGER THAN 18 BITS
  2660	003747'	303340	001034		CAILE	T2,VPMAX	;MWSLIM:=SMALLER OF USRMAX,VPMAX
  2661	003750'	201340	001034		 MOVEI	T2,VPMAX	;SO THAT HE GETS FULL LMAP
  2662	003751'	202340	000000*		MOVEM	T2,MWSLIM	;UNLESS NOT ENOUGH CORE FOR THAT.
  2663	003752'	550340	000006		HRRZ	T2,T1		;18 BITS OF PAGE COUNT
  2664	003753'	275340	000001		SUBI	T2,1
  2665	003754'	242340	777776		LSH	T2,-2
  2666	003755'	275340	000001		SUBI	T2,1
  2667	003756'	242300	777777		LSH	T1,-1		;CONVERT USRMAX TO K
  2668	003757'	315300	757710		CAMGE	T1,CORLIM	;MAKE SURE WE HAVE AT LEAST THIS MUCH CORE
  2669	003760'	256000	754000		 STOPCD			;WE HAVE LESS THAN MINIMUM CORE, DON'T COME UP.
  2670	003761'	200300	757710		MOVE	T1,CORLIM
  2671	003762'	242300	777777		LSH	T1,-1
  2672	003763'	275300	000001		SUBI	T1,1
  2673	003764'	202300	000000*		MOVEM	T1,CORMXK	;SET UP CORMXK.
  2674	003765'	200140	003737*		MOVE	PG,SYSSZP	;THE FIRST PAGE OF THE SYSTEM FOR USERS
  2675	003766'	400500	000000		SETZ	W,		;
  2676	003767'	474340	000000		SETO	T2,		;FOR SETTING PGYNXM AND PGYADR
  2677	003770'	551440	000000*		HRRZI	T4,CFR.N	;
  2678	003771'	550400	003741*		HRRZ	T3,CFRLST	;START OF FREE PAGE LIST.
  2679	003772'	316140	000010	NXPGLP:	CAMN	PG,T3		;IS NEXT FREE = NEXT PAGE
  2680	003773'	254000	757200		  JRST	PAGXM		;YES, MARK IT THERE
  2681	003774'	137340	003603*		DPB	T2,PGYNXM	;NO, NOT THERE
  2682	003775'	344140	757174		AOJA	PG,NXPGLP	;AND CONTINUE
  2683
  2684	003776'	137500	003556*	PAGXM:	DPB	W,PGYBPL	;
  2685	003777'	137440	003561*		DPB	T4,PGYLST	;
  2686	004000'	137340	003563*		DPB	T2,PGYADR	;SAY NO DP IN THIS CP YET.
  2687	004001'	305140	001000		CAIGE	PG,1000		;ARE WE ABOVE MAX ADDRESSABLE CORE?
  2688	004002'	202140	000060*		  MOVEM	PG,HGHBLK##	;NO. SAVE HIGH BLOCK ADDRESS.
  2689	004003'	135140	003546*		LDB	PG,PGYFPL	;NEXT FREE PAGE
  2690	004004'	322140	757212		JUMPE	PG,PAGXMD	;FINISHED
  2691	004005'	250140	000010		EXCH	PG,T3		;GET T3/ FPL, PG/ BPL.
  2692	004006'	551503	000000		HRRZI	W,(PG)		;SAVE BPL.
  2693	004007'	344140	757174		AOJA	PG,NXPGLP	;CONTINUE
  2694	004010'	201040	001050*	PAGXMD:	MOVEI	P,SYSPDL##
  2695	004011'	260040	000000*		PUSHJ	P,TTYINI##	;INITIALIZE THINGS
  2696	004012'	201300	254200		MOVEI	T1,(HALT)
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 34-2
ONCE.MAC	11-NOV-87 13:48		Initial auto-restart proceedures

  2697	004013'	506300	001047*		HRLM	T1,SYSDSP##	;NO MORE 140 RESTART
  2698					PFALL	IOGO
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 35
ONCE.MAC	11-NOV-87 13:48		IOGO - Enable I/O device interrupts and go

  2699				SUBTTL	IOGO - Enable I/O device interrupts and go
  2700
  2701	004014'	402000	000011*	IOGO:	SETZM	CRSHWD		;Clear location 30
  2702				IFCPU (KI),<
  2703					WRAPR	APRIOB!APRNXM!APRIOP!APRDST!APRDSR
  2704					WRAPR	APRCH2+APRENC	;APR RESET (IO RESET)
  2705					WRPI	211577		;CLEAR PI SYSTEM (AND MEM PARITY)
  2706				>;END IFCPU (KI)
  2707				IFCPU (<KL,F3>),<
  2708	004015'	700200	222400		WRAPR	LP.IOR+LP.CSF+LP.NXM+LP.PAR ;DON'T CLEAR STUFF THAT SHOULDN'T BE ON
  2709	004016'	700200	107760*		WRAPR	LP.ESF+APRMSK+APRCHN		    ;ENABLE FOR EVERYTHING
  2710	004017'	700600	031577		WRPI	LI.CPP+LI.CPS+LI.COF+LI.PIF+LI.ACO  ;CLEAR PI SYSTEM
  2711	004020'	260040	757351	IFCPU (KL),<PUSHJ P,ITMINI>	;START UP INTERVAL TIMER, INIT TIME BASE, ETC.
  2712				>;END IFCPU (<KL,F3>)
  2713				IFCPU (KS),<
  2714					WRAPR	LP.IOR+LP.CSF+LP.NXM+LP.HPE +LP.80C;DON'T CLEAR STUFF THAT SHOULDN'T BE ON
  2715					WRAPR	LP.ESF+APRMSK-<LP.TIM+LP.80C>+APRCHN	;ENABLE FOR EVERYTHING EXCEPT 8080 & TI
  2716				ME
  2717					WRPI	LI.CPP+LI.CPS+LI.COF+LI.PIF+LI.ACO ;CLEAR PI SYSTEM
  2718					PUSHJ	P,ITMINI	;START UP INTERVAL TIMER, INIT TIME BASE
  2719				>;END IFCPU (KS)
  2720								; DO NOT CLEAR POWER FAIL AS THIS DISABLES
  2721	004021'	201040	004010*		MOVEI	P,SYSPDL##	;REUSABLE SPACE(SEE IOINI1)
  2722	004022'	260040	000000*		PUSHJ	P,CTYSET##	;DO AFTER <WRAPR 200000> SO PI ASSIGNMENT STAYS.
  2723	004023'	260040	000000*		PUSHJ	P,NXTINI##	;ALWAYS INITILIZE SCHEDULER FIRST
  2724								;SO DEVICES MAY RESET QUEUES IF DESIRED
  2725	004024'	554700	003713*		HLRZ	P3,DEVLST	;ADDR OF FIRST DDB
  2726	004025'	402000	757711		SETZM	SAVITM
  2727	004026'	200200	000016	IOG01:	MOVE	F,P3		;SET UP F FOR INITIALIZATION CODE
  2728								; (NOT ALWAYS USED)
  2729	004027'	200716	000003		MOVE	P3,DEVSER(P3)
  2730	004030'	550300	000016		HRRZ	T1,P3
  2731	004031'	302320	757711		CAIE	T1,@SAVITM	;SAME DEVICE
  2732	004032'	260056	000004		 PUSHJ	P,DINI(P3)	;NO. INITIALIZE IT.
  2733	004033'	552700	757711		HRRZM	P3,SAVITM	;SKIP RETURN IF INITIALIZATION CODE IS TO BE CALLED
  2734								; FOR EACH DEVICE (I.E. MULTIPLE LINE PRINTERS)
  2735	004034'	557000	000016		HLRZS	P3
  2736	004035'	326700	757230		JUMPN	P3,IOG01	;LOOP FOR ALL DEVICES
  2737				IFKMC<
  2738					PUSHJ	P,DZINI##	;INITIALIZE DZ-11 DRIVER.
  2739					PUSHJ	P,DRINI##	;INITIALIZE DR-11C DRIVER
  2740					PUSHJ	P,KMCINI##	;INITIALIZE THE KMC COMMUNICATION
  2741				>; End IFKMC
  2742	004036'	260040	000000*		PUSHJ	P,CLKINI##	;INITIALIZE CLOCK QUEUE
  2743	004037'	260040	000000*		PUSHJ	P,TMPINI##	;TMPCOR
  2744	004040'	260040	000000*		PUSHJ	P,QINI##	;PUT ALL IN NULL QUE
  2745	004041'	402000	000000*		SETZM	SYSDRB
  2746				IFCPU (KI),<PUSHJ P,TIMINI##>	;DK-10
  2747				IFCPU (KI),<WRPI  52377>	;TURN ON PI SYSTEM
  2748	004042'	700600	002377	IFNCPU(KI),<WRPI LI.CON+LI.PIN+LI.ACO>
  2749	004043'	402000	000000*		SETZM	DINITF##	;End of ONCE code
  2750	004044'	205300	000001		MOVSI	T1,(STAUTO)	; See if we are in
  2751	004045'	616300	003427*		TDNN	T1,STATES	; "auto"-restart mode.
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 35-2
ONCE.MAC	11-NOV-87 13:48		IOGO - Enable I/O device interrupts and go

  2752	004046'	254000	757254		 JRST	IOGO2		; No!  So don't say anything.
  2753					MOVEI	T1,[ASCIZ \
  2754				
  2755				System in auto-restart, running INITIA
  2756	004047'	201300	760205	\]
  2757	004050'	201240	000000*		MOVEI	U,CTYLDB##	;ON CONSOLE
  2758	004051'	260040	003452*		PUSHJ	P,CONMES##	;LET OPERATOR KNOW WHAT IS GOING ON
  2759
  2760	004052'	201100	000000*	IOGO2:	MOVEI	J,NULJOB##	;GET WHERE TO MAKE CLRONC POPJ TO
  2761	004053'	261040	000002		PUSH	P,J		;SAVE ON STACK
  2762	004054'	400100	000000		SETZ	J,		;NEXT JOB IS NULL JOB
  2763	004055'	254120	757260		JRSTF	@.+1		;CLEAR OUT EXEC MAP ONCE-TIME ENTRIES,
  2764	004056'	004000	000000*		  PC.UIO,,CLRONC##	; SET PC.UIO AND POPJ TO NULJOB WHEN THRU.
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 36
ONCE.MAC	11-NOV-87 13:48		IOGO - Enable I/O device interrupts and go

  2765				;ERROR FOR NOW (DISCONTINUOUS CORE)
  2766
  2767	004057'	260040	757536	DSCCOR:	PUSHJ	P,CLRSND
  2768	004060'	260040	003666*		PUSHJ	P,INLMES
  2769					ASCIZ	/
  2770	004061'	064240	737416	????Core is not contiguous, correct before trying to bring up system
	004062'	374167	703576
	004063'	036075	771312
	004064'	203236	320334
	004065'	677504	061736
	004066'	673515	163752
	004067'	677536	326100
	004070'	617376	271312
	004071'	617504	061312
	004072'	633376	262500
	004073'	723457	164734
	004074'	635016	467500
	004075'	613455	167316
	004076'	203536	020346
	004077'	747476	462732
  2771	004100'	064240	000000	/
  2772	004101'	260040	757566		PUSHJ	P,OPOUT
  2773	004102'	254200	757261		HALT	DSCCOR		;ERROR IF DISCONTIGUOUS CORE
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 37
ONCE.MAC	11-NOV-87 13:48		IOGO - Enable I/O device interrupts and go

  2774				;RELOAD UPT AND EPT FROM THIS STUFF
  2775
  2776	004103'	000000	000000	LOC40:	0
  2777	004104'	256000	754000		STOPCD          ;;EPT+41
  2778	004105'	264000	000000*	LOC42:	JSR	CH1
  2779	004106'	256000	754000		STOPCD          ;;EPT+43
  2780	004107'	264000	000000*		JSR	CH2
  2781	004110'	256000	754000		STOPCD          ;;EPT+45
  2782	004111'	264000	000000*		JSR	CH3
  2783	004112'	256000	754000		STOPCD          ;;EPT+47
  2784	004113'	264000	000000*		JSR	CH4
  2785	004114'	256000	754000		STOPCD          ;;EPT+51
  2786	004115'	264000	000000*		JSR	CH5
  2787	004116'	256000	754000		STOPCD          ;;EPT+53
  2788	004117'	264000	000000*		JSR	CH6
  2789	004120'	256000	754000		STOPCD          ;;EPT+55
  2790	004121'	264000	000000*		JSR	CH7
  2791	004122'	256000	754000		STOPCD          ;;EPT+57
  2792
  2793	004123'	000000	000000*	UPTSET:	USRMPE		;420 USER PAGE TRAP (SOFTWARE FOR KS AND KL)
  2794	004124'	255000	000000		JFCL		;421 USER OVERFLOW
  2795	004125'	000000	000000*		ERRPOV		;422 USER PDL ERR
  2796	004126'	255000	000000		JFCL		;423 USER TRAP 3
  2797	004127'	000000	000000		0		;424 MUUO
  2798	004130'	000000	000000		0		;425 PC OF MUUO
  2799	004131'	000000	000000		0		;426 DATAI PAG, OF MUUO
  2800	004132'	000000	000000		0		;427 RESERVED
  2801	004133'	000000	000346*		    UUOKNT	;430 KERNAL NO TRAP UUO
  2802	004134'	000000	000352*		    UUOKTR	;431 KERNAL TRAP UUO
  2803	004135'	000000	000000*		    UUOSNT	;432 SUPERVISOR NO TRAP
  2804	004136'	000000	000000*		    UUOSTR	;433 SUPERVISOR TRAP
  2805	004137'	000000	000000*	IFNCPU(KS),<UUOCNT	;434 CONCEALED NO TRAP
  2806	004140'	000000	000000*		    UUOCTR	;435 CONCEALED TRAP
  2807	004141'	004000	000000*	    PC.UIO,,UUOPNT	;436 PUBLIC NO TRAP
  2808	004142'	004000	000000*	    PC.UIO,,UUOPTR>	;437 PUBLIC TRAP
  2809				IFCPU (KS),<
  2810				    PC.UIO,,UUOPNT	;434 NO TRAP, KS RUNS IN CONCEALED MODE
  2811				    PC.UIO,,UUOPTR	;435 TRAP, KS RUNS IN CONCEALED MODE
  2812					0		;436 NO PUBLIC MODE ON KS
  2813					0>		;437 NO PUBLIC TRAP ON KS
  2814
  2815	004143'	000000	000000*	EPTSET:	EXCMPE		;420 EXEC MEM TRAP
  2816	004144'	255000	000000		JFCL		;421 EXEC OVERFLOW
  2817	004145'	000000	000354*		EXCPDL		;422 EXEC PDLOV
  2818	004146'	255000	000000		JFCL		;423 EXEC TRAP3
  2819
  2820				IFCPU (KI),<
  2821				NULACS:
  2822					PHASE 0
  2823					MOVEI	16,64000
  2824					SOJG	16,.
  2825				NTS1:!	TLNE	17,400000
  2826				NTS2:!	TRNE	17,1
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 37-2
ONCE.MAC	11-NOV-87 13:48		IOGO - Enable I/O device interrupts and go

  2827					  JRST	NULSHF
  2828				NTS3:!	TRNN	17,2
  2829					  JRST	NULCMP
  2830					TLC	NTS1,004000	;CONVERT TXNE AND TXNN
  2831					TLC	NTS2,004000
  2832					TLCA	NTS3,004000
  2833				NULCMP:!TRCA	17,1
  2834				NULSHF:!ROT	17,1
  2835					DATAO	PI,17
  2836					JRST	0
  2837					0			;REG 16, SCRATCH
  2838					1			;REG 17, STARTS AT 1
  2839					DEPHASE
  2840					PHASE NULACS+20
  2841				>;END IFCPU (KI)
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 38
ONCE.MAC	11-NOV-87 13:48		IOGO - Enable I/O device interrupts and go

  2842				IFCPU (<KL>),<
  2843				;ROUTINE TO INITIALIZE TIME BASE, ACCOUNTING CLOCK,
  2844				; AND INTERVAL TIMER.
  2845
  2846	004147'	702200	420000	ITMINI:	CONO	TIM,TO.CIT+TO.CTD	;CLEAR TIMER, TIMER DONE
  2847	004150'	200300	760216		MOVE	T1,[JSR ITMINT##]
  2848	004151'	202300	000514*		MOVEM	T1,EPT+EPTITI	;THIS IS THE IRP INSTRUCTION
  2849	004152'	702600	002000*		CONO	MTR,MO.TON+ITMCHN##;START TIME BASE, GIVE INTERVAL PI ASSIGNMENT
  2850	004153'	402000	000510*		SETZM	EPT+EPTHTB
  2851	004154'	402000	000511*		SETZM	EPT+EPTLTB
  2852	004155'	402000	000512*		SETZM	EPT+EPTHPA
  2853	004156'	402000	000513*		SETZM	EPT+EPTLPA
  2854	004157'	702100	760217		WRPAE	[PE.CLR]	;CLEAR PERF METER
  2855	004160'	701140	760220		WRUBR	[LG.IAM]	;CLEAR OUT E AND M BOX COUNTS
  2856	004161'	402000	000504*		SETZM	UPT+UPTHEC
  2857	004162'	402000	000505*		SETZM	UPT+UPTLEC
  2858	004163'	402000	000506*		SETZM	UPT+UPTHMC
  2859	004164'	402000	000507*		SETZM	UPT+UPTLMC
  2860	004165'	702600	431000		CONO	MTR,MO.LAC+MO.AEN+MO.AO+MO.CTB
  2861								;TURN ON ACCT METERS
  2862	004166'	702200	063202		CONO	TIM,TO.SIT+TO.CTD+^D1666 ;GET INTERVAL TIMERSTARTED.
  2863	004167'	263040	000000		POPJ	P,		;EVERYTHING ALL SET.
  2864				>;END IFCPU (KL)
  2865
  2866				IFCPU (KS),<
  2867				;ROUTINE TO INITIALIZE TIME BASE, INTERVAL COUNTER
  2868				
  2869				ITMINI:	WRAPR	LP.CSF+LP.ITD	;CLEAR TIMER DONE
  2870					WRTIME	ITMCLR		;CLEAR TIME BASE
  2871					WRINT	ITMTIM		;SET INTERVAL UP
  2872					WRAPR	LP.ESF+LP.TIM+APRCHN	;START INTERVAL TIMER
  2873					HRLI	T1,(JRST 7,)	;SET UP 71 ,FOR CTY KEEP ALIVE FAILURE
  2874					HRRI	T1,KAFPC##	; ...
  2875					MOVEM	T1,KAFLOC##	; STORE IN LOW CORE
  2876					MOVSI	T1,(KPACT)	;INIT RELOAD WORD,ENABLE KEEP ALIVE COUNTER
  2877					JFCL	;**D*	MOVEM	T1,RLWORD##	;START KEEP ALIVE
  2878					JFCL
  2879					POPJ	P,
  2880				
  2881				ITMCLR:	EXP 0,0			; Values to clear time base.
  2882				ITMTIM:	^D16B23			; Interval time.
  2883				>;END IFCPU (KS)
  2884				SUBTTL	NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON
  2885
  2886	004170'	201300	000000*	NZRINI:	MOVEI	T1,INADFL##	;Setup default inactivity timeout
  2887	004171'	202300	000000*		MOVEM	T1,INADEF##	; (NSWTBL+7)
  2888	004172'	476000	000000*		SETOM	SYSUDT##	;No date/time yet (NSWTBL+5)
  2889	004173'	201300	000060*		MOVEI	T1,TIMZON##+20+40;PST+daylight = 50 = 20+40+^D<-8>
  2890	004174'	201100	000000		MOVEI	J,0		;PVYTIM uses J as an index register
  2891	004175'	137300	000000*		DPB	T1,PVYTIM##	;Job 0 has local TIMZON
  2892	004176'	263040	000000		POPJ	P,
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 39
ONCE.MAC	11-NOV-87 13:48		NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON

  2893				;TELTYPE ROUTINES
  2894
  2895				;ROUTINE TO READ A U FROM OPERATORS CONSOLE
  2896				;CALL:	PUSHJ P,GETLIN
  2897				;	JUST A CR TYPED IN
  2898				;	NORMAL RETURN (NOT A BLANK LINE)
  2899
  2900	004177'	200300	757707	GETLIN::MOVE T1,LINEPI
  2901	004200'	202300	757623		MOVEM T1,ONCTIP	;INITIAL STORAGE POINTER
  2902	004201'	402000	757443		SETZM BKSLS	;NOT IN BACKSLASHES
  2903	004202'	201400	000040		MOVEI T3,40		;PRIME COMMAND ROUTINES WITH A SPACE
  2904	004203'	202400	000000*		MOVEM T3,TTCMCH		; ..
  2905	004204'	201100	000000		MOVEI J,0		;FLAG NO ALTMODE SEEN
  2906				IFCPU(KS),<WRAPR LP.SSF!LP.I8C+APRCHN##>	;Tell the 8080 to pay attention
  2907	004205'	260040	757712	GET1:	PUSHJ P,XTYI		;WAIT FOR A CHARACTER
  2908				IFCPU (<KI,F3>),<DATAI	TTY,T3>		;GET IT
  2909	004206'	260040	757617	IFCPU (<KL,KS>),<PUSHJ	P,TYI1>
  2910	004207'	405400	000177		ANDI T3,177		;STRIP PARITY
  2911	004210'	306400	000177		CAIN T3,177		;RUBOUT?
  2912	004211'	254000	757444		 JRST DELETE		;YES
  2913	004212'	306400	000025		CAIN T3,"U"-100
  2914	004213'	254000	757471		 JRST DELLIN
  2915	004214'	302400	000003		CAIE T3,"C"-100
  2916	004215'	306400	000017		CAIN T3,"O"-100
  2917	004216'	254000	757407		 JRST GET1	;IGNORE ^C AND ^O
  2918	004217'	260040	757474		PUSHJ P,LEVBKS	;IN CAS IN BACKSLASHES
  2919	004220'	306400	000033		CAIN T3,33		;ALTMODE/ESCAPE?
  2920	004221'	254000	757464		 JRST GETLN1		;YES
  2921	004222'	302400	000175		CAIE T3,175		;OTHER ALTS?
  2922	004223'	306400	000176		CAIN T3,176		; ..
  2923	004224'	254000	757464		 JRST GETLN1		;YES
  2924	004225'	260040	757732	GET2:	PUSHJ P,XTYO		;ECHO
  2925	004226'	301400	000140		CAIL T3,140		;LOWER CASE?
  2926	004227'	620400	000040		TRZ T3,40		;YES. MAKE UPPER
  2927	004230'	136400	000006		IDPB T3,T1		;STORE IN INPUT BUFFER
  2928	004231'	302400	000015		CAIE T3,15		;CAR RET?
  2929	004232'	344100	757407		AOJA J,GET1		;NO. LOOP TILL BREAK
  2930	004233'	201400	000012		MOVEI T3,12		;YES. ADD LF
  2931	004234'	260040	757732		PUSHJ P,XTYO		;OUTPUT LF
  2932	004235'	201400	000000		MOVEI T3,0		;TERMINATE INPUT STRING IN BUFFER
  2933	004236'	136400	000006		IDPB T3,T1		; ..
  2934	004237'	326100	003371*		JUMPN J,CPOPJ1		;IF NON-NULL U, SKIP RET
  2935	004240'	263040	000000		POPJ P,0		;NULL. NON-SKIP RET
  2936
  2937	004241'	000000	000000	BKSLS:	0
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 40
ONCE.MAC	11-NOV-87 13:48		NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON

  2938	004242'	361100	757456	DELETE:	SOJL J,DELET1	;NOTHING THERE
  2939	004243'	260040	757504		PUSHJ P,ENTBKS	;SEND \ IF NEEDED
  2940	004244'	135400	000006		LDB T3,T1
  2941	004245'	260040	757732		PUSHJ P,XTYO
  2942	004246'	275300	000001		SUBI T1,1
  2943					REPEAT 4,<IBP T1>
  2944	004247'	133000	000006
  2945	004250'	133000	000006
  2946	004251'	133000	000006
  2947	004252'	133000	000006
  2948	004253'	254000	757407		JRST GET1	;BACK TO WORK
  2949
  2950	004254'	260040	757474	DELET1:	PUSHJ P,LEVBKS
  2951	004255'	201400	000015		MOVEI T3,15
  2952	004256'	260040	757732		PUSHJ P,XTYO
  2953	004257'	201400	000012		MOVEI T3,12
  2954	004260'	260040	757732		PUSHJ P,XTYO
  2955	004261'	254000	757401		JRST GETLIN
  2956
  2957	004262'	476000	000002	GETLN1:	SETOM J		;MECHANISM USED TO BY-PASS PART OF DIALOGUE
  2958	004263'	201400	000044		MOVEI T3,"$"
  2959	004264'	260040	757732		PUSHJ P,XTYO
  2960	004265'	201400	000015		MOVEI T3,15		; WHEN ALTMODE IS TYPED.
  2961	004266'	254000	757427		JRST GET2
  2962
  2963	004267'	260040	757474	DELLIN:	PUSHJ P,LEVBKS
  2964	004270'	260040	757507		PUSHJ P,ECHU		;ECHO THE ^U
  2965	004271'	254000	757401		JRST GETLIN
  2966
  2967	004272'	336000	757443	LEVBKS:	SKIPN BKSLS
  2968	004273'	263040	000000		POPJ P,		;NOT IN
  2969	004274'	261040	000010	COMBKS:	PUSH P,T3
  2970	004275'	201400	000134		MOVEI T3,"\"
  2971	004276'	260040	757732		PUSHJ P,XTYO
  2972	004277'	262040	000010		POP P,T3
  2973	004300'	462000	757443		SETCMM BKSLS	;COMPLIMENT
  2974	004301'	263040	000000		POPJ P,
  2975
  2976	004302'	332000	757443	ENTBKS:	SKIPE BKSLS
  2977	004303'	263040	000000		POPJ P,
  2978	004304'	254000	757476		JRST COMBKS
  2979
  2980	004305'	261040	000010	ECHU:	PUSH P,T3
  2981	004306'	201400	000136		MOVEI T3,"^"
  2982	004307'	260040	757732		PUSHJ P,XTYO
  2983	004310'	200401	000000		MOVE T3,(P)
  2984	004311'	271400	000100		ADDI T3,100
  2985	004312'	260040	757732		PUSHJ P,XTYO
  2986	004313'	201400	000015		MOVEI T3,15
  2987	004314'	260040	757732		PUSHJ P,XTYO
  2988	004315'	201400	000012		MOVEI T3,12
  2989	004316'	260040	757732		PUSHJ P,XTYO
  2990	004317'	262040	000010		POP P,T3
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 40-2
ONCE.MAC	11-NOV-87 13:48		NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON

  2991	004320'	263040	000000		POPJ P,
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 41
ONCE.MAC	11-NOV-87 13:48		NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON

  2992
  2993	004321'	260040	757536	OCONM::	PUSHJ P,CLRSND		;CLEAR OUTPUT SUPRESS FLAGS
  2994	004322'	254000	004051*		JRST CONMES		;OUTPUT MESSAGE
  2995
  2996	004323'	201400	000167	ONCTOS:	MOVEI T3,ONCTSZ		;SIZE OF BUFFER
  2997	004324'	202400	757625		MOVEM T3,ONCCNT		;SO CANT OVERFLOW
  2998	004325'	402000	757552		SETZM LINWID		;Force CRLF out before anything else
  2999	004326'	201400	757724		MOVEI T3,ONCTYI		;ADDRESS FOR READ ROUTINES TO GO TO
  3000	004327'	202400	000000*		MOVEM T3,COMTIA		; ..
  3001	004330'	201400	757715		MOVEI T3,ONCTYO		;ADDRESS FOR TYPEOUT ROUTINES TO GO TO
  3002	004331'	202400	000000*		MOVEM T3,COMTOA		; ..
  3003	004332'	200400	757626		MOVE T3,LINEP		;INITIAL OUTPUT POINTER
  3004	004333'	202400	757624		MOVEM T3,ONCTOP
  3005	004334'	402000	757553	CLRSND::SETZM SUPTYP
  3006	004335'	402000	757554		SETZM SUPTYC
  3007	004336'	263040	000000		POPJ P,0
  3008
  3009	004337'	260040	757523	YESNO::	PUSHJ P,OCONM		;FIRST OUTPUT THE QUESTION
  3010	004340'	260040	757566		PUSHJ P,OPOUT
  3011	004341'	260040	757401		PUSHJ P,GETLIN		;NOW GET RESPONSE
  3012	004342'	263040	000000		  POPJ P,0		;JUST C-R
  3013	004343'	260040	000000*		PUSHJ P,COMTYI
  3014	004344'	620400	000040		TRZ T3,40		;FIRST CHAR OF RESPONSE (U.C.)
  3015	004345'	306400	000131		CAIN T3,"Y"		;WAS IT A Y ?
  3016	004346'	350001	000000		 AOS 0(P)		;YES. SKIP
  3017	004347'	263040	000000		POPJ P,			;NO, MAYBE IT WAS "N". SO DON'T SKIP
  3018
  3019	004350'	000000	000000	LINWID:	0
  3020	004351'	000000	000000	SUPTYP:	0
  3021	004352'	000000	000000	SUPTYC:	0
  3022
  3023	004353'	231300	000010	RADIX8:	IDIVI T1,10
  3024	004354'	506341	000000		HRLM T2,(P)
  3025	004355'	332000	000006		SKIPE T1
  3026	004356'	260040	757555		PUSHJ P,RADIX8	;PRINT OCTAL
  3027	004357'	554401	000000		HLRZ T3,(P)
  3028	004360'	271400	000060		ADDI T3,"0"
  3029	004361'	254000	000000*		JRST COMTYO
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 42
ONCE.MAC	11-NOV-87 13:48		NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON

  3030				;ROUTINE TO TYPE A U ON OPERATOR CONSOLE
  3031				;ECHO CHECK STOPS U AND RETURNS
  3032				;CALL:	U SET TO END OF MESSAGE
  3033
  3034	004362'	260040	004322*	CONOUT:	PUSHJ	P,CONMES	;Output ASCIZ string in T1 + CRLF
  3035	004363'	260040	003415*	CRLFOP:	PUSHJ	P,CRLF		;Output CRLF and dump output buffer
  3036	004364'	201400	000000	OPOUT::	MOVEI T3,0		;MAKE SURE STRING ENDS
  3037	004365'	136400	757624		IDPB T3,ONCTOP		;WITH A NULL
  3038	004366'	200300	757626		MOVE T1,LINEP		;AND RESTART AT BEGINNING
  3039	004367'	202300	757624		MOVEM T1,ONCTOP	; ..
  3040				IFCPU (<KI,F3>),<CONO TTY,TT.CID>		;CLEAR INPUT FLAG
  3041	757572			OPOUT1:
  3042				IFCPU(<KI,F3>),<CONSZ TTY,TT.ID>		;MAKE SURE NOT BEING INTERRUPTED
  3043	004370'	332000	000456*	IFCPU(KL),<     SKIPE EPT+SPCMTI>
  3044				IFCPU(KS),<     SKIPE CTYIWD##>	;SKIP IF NO INPUT
  3045	004371'	254000	757600			 JRST OPOUT2	;INPUT FLAG
  3046	004372'	134400	757624	OPOUT3:	ILDB T3,ONCTOP		;GET CHAR TO TYPE
  3047	004373'	322400	757612		JUMPE T3,OTST3		;QUIT ON NULL, AND RESET OUTPUT
  3048	004374'	260040	757732		PUSHJ P,XTYO		;TYPE CHAR
  3049	004375'	254000	757572		JRST OPOUT1		;LOOP
  3050
  3051	757600			OPOUT2:	IFCPU (<KI,F3>),<DATAI TTY,T3>
  3052	004376'	260040	757617		IFCPU (<KL,KS>),<PUSHJ P,TYI1>
  3053	004377'	405400	000177		ANDI T3,177	;GET RID OF PARITY BIT
  3054	004400'	302400	000017		CAIE T3,"O"-100
  3055	004401'	306400	000003		CAIN T3,"C"-100
  3056	004402'	334000	000000		 SKIPA
  3057	004403'	254000	757572		JRST OPOUT1	;IGNORE ALL BUT ^O AND ^C
  3058	004404'	260040	757507		PUSHJ P,ECHU
  3059	004405'	306400	000003		CAIN T3,"C"-100
  3060	004406'	476000	757554		 SETOM SUPTYC	;IF ^C SET TO SUPRESS UNTIL QUESTION
  3061	004407'	476000	757553		SETOM SUPTYP	;IN ANY CASE UNTIL CRLF
  3062	004410'	200400	757626	OTST3:	MOVE T3,LINEP	;RESET OUTPUT
  3063	004411'	202400	757624		MOVEM T3,ONCTOP
  3064	004412'	201400	000167		MOVEI T3,ONCTSZ
  3065	004413'	202400	757625		MOVEM T3,ONCCNT
  3066	004414'	263040	000000		POPJ P,
  3067
  3068				IFCPU (KL),<
  3069	004415'	200400	000450*	TYI1:	MOVE	T3,EPT+SPCF11
  3070	004416'	720200	001000		CONO	DTE,CL11PT
  3071	004417'	402000	000456*		SETZM	EPT+SPCMTI
  3072	004420'	263040	000000		POPJ	P,
  3073				>;END IFCPU (KL)
  3074
  3075
  3076				IFCPU (KS),<
  3077				TYI1:	MOVE	T3,CTYIWD	;GET CHARACTER
  3078					TRNN	T3,CTYIVL	;CHEK VALID
  3079					JRST	OPOUT3		;JUMP IF CHAR. NOT YET VALID
  3080					SETZM	CTYIWD##	;CLEAR INPUT WORD
  3081					POPJ	P,
  3082				> ;END IFCPU (KS)
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 42-2
ONCE.MAC	11-NOV-87 13:48		NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON

  3083	004421'	000000	000000	ONCTIP:	0			;TYPE-IN POINTER
  3084	004422'	000000	000000	ONCTOP:	0			;TYPE-OUT POINTER
  3085	004423'	000000	000000	ONCCNT:	0			;COUNTER FOR TYO
  3086	004424'	440700	757627	LINEP:	POINT 7,LINBUF		;INPUT AND OUTPUT U BUFFER
  3087	757627			LINBUF:	BLOCK 30
  3088			000167	ONCTSZ==<30*5>-1		;CHARACTERS WHICH FIT IN OUTPUT BUFFER
  3089	757657			LINBFI:	BLOCK 30	;BUFFER FOR INPUT
  3090	004505'	440700	757657	LINEPI:	POINT 7,LINBFI
  3091	004506'	000000	000000*	CORLIM:	USRLIM			;PRSET CORE LIMIT, MAY CHANGE
  3092	004507'	000000	000000	SAVITM:	0		;TEMP FOR INITIALIZING DEVICES
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 43
ONCE.MAC	11-NOV-87 13:48		NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON

  3093				;WAIT TIL INPUT DONE ON BEFORE RETURNING WITH NEXT CHAR.
  3094
  3095	757712			XTYI:
  3096				IFCPU(<KI,F3>),<CONSO	TTY,TT.ID>
  3097	004510'	336000	000456*	IFCPU(KL),<	SKIPN	EPT+SPCMTI>
  3098				IFCPU(KS),<	SKIPN	CTYIWD##>
  3099	004511'	254000	757712			 JRST	XTYI
  3100	004512'	263040	000000		POPJ P,
  3101
  3102	004513'	332000	757554	ONCTYO:	SKIPE SUPTYC
  3103	004514'	263040	000000		POPJ P,		;WANT ALL SUPPRESSED
  3104	004515'	332000	757553		SKIPE SUPTYP
  3105	004516'	254000	757727		JRST ETYCHK	;CHECK FOR LINE FEED TO END SUP
  3106	004517'	373000	757625		SOSLE ONCCNT		;COUNT CHARACTERS
  3107	004520'	136400	757624		IDPB T3,ONCTOP		;PUT IN BUFFER
  3108	004521'	263040	000000		POPJ P,0		;AND RETURN
  3109
  3110	004522'	134400	757623	ONCTYI:	ILDB T3,ONCTIP		;GET INPUT CHARACTER
  3111	004523'	202400	004203*		MOVEM T3,TTCMCH		;STORE FOR RE-READS
  3112	004524'	263040	000000		POPJ P,0		;AND RETURN TO CALLING ROUTINE
  3113
  3114	004525'	306400	000012	ETYCHK:	CAIN T3,12
  3115	004526'	402000	757553		SETZM SUPTYP
  3116	004527'	263040	000000		POPJ P,
  3117
  3118	004530'	261040	000006	XTYO:	PUSH	P,T1		;Routine to output to the CTY, with wrap at 80
  3119	004531'	405400	000177		ANDI	T3,177		;Strip parity
  3120	004532'	302400	000012		CAIE	T3,12
  3121	004533'	306400	000177		CAIN	T3,177
  3122	004534'	254000	757751		 JRST	NOFCR		;DO NOT COUNT LINE FEED OR RUBOUT
  3123	004535'	306400	000015		CAIN	T3,15
  3124					 JRST	[MOVEI T1,^D<72+8>
  3125						 MOVEM T1,LINWID	;RESET COUNT BEFORE CR
  3126	004536'	254000	760221			 JRST  NOFCR]
  3127	004537'	371000	757552		SOSL	LINWID		;Check if line width exceeded
  3128	004540'	254000	757751		 JRST	NOFCR
  3129	004541'	261040	000010		PUSH	P,T3		;Time for free CRLF
  3130	004542'	201400	000015		MOVEI	T3,15
  3131	004543'	260040	757732		PUSHJ	P,XTYO		;Recursive call to set LINWID
  3132	004544'	201400	000012		MOVEI	T3,12
  3133	004545'	260040	757732		PUSHJ	P,XTYO
  3134	004546'	262040	000010		POP	P,T3
  3135	004547'	260040	000000*	NOFCR:	PUSHJ	P,CTYLOG##	;Log character in CTYBUF
  3136	004550'	260040	000000*		PUSHJ	P,PEVEN8##	;GET PARITY
  3137	004551'	260040	000000*		PUSHJ	P,CTYCHR##	;Output to the CTY
  3138	004552'	405400	000177		ANDI	T3,177
  3139	004553'	306400	000012		CAIN	T3,12		;Linefeed?
  3140					 JRST	[MOVEI T3,0	  ;Yes, pad with a null
  3141						 PUSHJ P,CTYCHR## ;So it won't get lost when DTE is reset
  3142	004554'	254000	760224			 JRST  TPOPJ]
  3143	004555'	306400	000015		CAIN	T3,15		;CHECK POSSIBLE RETURN
  3144	004556'	336300	000037*		SKIPN	T1,CTYFIL##	;YES, NEED FILLS?
  3145	004557'	254000	757766		 JRST	TPOPJ		;NO
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 43-2
ONCE.MAC	11-NOV-87 13:48		NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON

  3146	004560'	201400	000177		MOVEI	T3,177
  3147	004561'	260040	757732		PUSHJ	P,XTYO
  3148	004562'	367300	757763		SOJG	T1,.-1
  3149	004563'	201400	000015		MOVEI	T3,15
  3150	004564'	262040	000006	TPOPJ:	POP	P,T1
  3151	004565'	263040	000000		POPJ	P,
  3152				REPEAT 0,<;TYO1 has been replaced by CTYCHR in SCNSER
  3153				IFCPU (<KI,F3>),<
  3154				TYO1:	CONSZ	TTY,TT.OB	;Wait for output busy to go off
  3155					 JRST	TYO1
  3156					DATAO	TTY,T3
  3157					POPJ	P,
  3158				>
  3159				IFCPU (KL),<	;CHARACTER OUTPUT FOR CTY VIA DTE AND PDP-11
  3160				TYO1:	HRLM	T3,(P)
  3161					MOVEI	T3,.DTCTO(T3)
  3162					MOVEM	T3,EPT+SPCCMW
  3163					CONO	DTE,TO11DB
  3164					SETZ	T3,
  3165					EXCH	T3,EPT+SPCMTD	;Wait for MTD to become nonzero
  3166					JUMPE	T3,.-1
  3167					HLRZ	T3,(P)
  3168					POPJ	P,
  3169				>;END IFCPU (KL)
  3170				
  3171				
  3172				IFCPU (KS),<	;CHARACTER OUTPUT FOR CTY ON KS2020
  3173				TYO1:	SKIPE	CTYOWD##		;WAIT TIL EMPTY
  3174					 JRST	.-1
  3175					TRO	T3,CTYOVL		;SET THE VALID FLAG
  3176					MOVEM	T3,CTYOWD##		;MOVE TO OUTPUT WORD
  3177					WRAPR	LP.SSF!LP.I8C+APRCHN	;WHAP THE 8080
  3178					SKIPE	CTYOWD			;WAIT TIL CHAR TAKEN
  3179					 JRST	.-1
  3180					POPJ	P,
  3181				>;END IFCPU (KS)
  3182				>  ;End REPEAT 0
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 44
ONCE.MAC	11-NOV-87 13:48		NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON

  3183				;FINISH UP THINGS
  3184	757770			ONCLIT:	LIT
  3185	004566'	264000	000000*
  3186	004567'	004000	754170
  3187	004570'	064244	522500
  3188	004571'	416412	520346
  3189	004572'	627455	160730
  3190	004573'	203356	566704
  3191	004574'	627444	064746
  3192	004575'	200000	000000
  3193	004576'	271004	052320
  3194	004577'	647464	066736
  3195	004600'	673236	467744
  3196	004601'	203574	171500
  3197	004602'	613535	166350
  3198	004603'	203155	771100
  3199	004604'	605014	464714
  3200	004605'	633136	262734
  3201	004606'	721016	374746
  3202	004607'	723135	527032
  3203	004610'	052036	262500
  3204	004611'	747376	520246
  3205	004612'	526450	520362
  3206	004613'	677524	073702
  3207	004614'	673504	072336
  3208	004615'	203416	267706
  3209	004616'	627134	437500
  3210	004617'	000000	000000
  3211	004620'	064252	066312
  3212	004621'	607474	520334
  3213	004622'	677515	163362
  3214	004623'	202513	146606
  3215	004624'	476325	554100
  3216	004625'	517536	070336
  3217	004626'	713504	043744
  3218	004627'	677536	020322
  3219	004630'	631016	464322
  3220	004631'	715015	171500
  3221	004632'	605016	062744
  3222	004633'	667035	662734
  3223	004634'	721014	364302
  3224	004635'	673174	527032
  3225	004636'	050000	000000
  3226	004637'	064240	000000
  3227	004640'	064247	752734
  3228	004641'	713134	367716
  3229	004642'	673237	262710
  3230	004643'	203075	766732
  3231	004644'	607354	420132
  3232	004645'	202415	462702
  3233	004646'	717124	072362
  3234	004647'	703124	044212
  3235	004650'	462404	063336
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 44-2
ONCE.MAC	11-NOV-87 13:48		NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON

  3236	004651'	711015	062730
  3237	004652'	701341	505000
  3238	004653'	064251	747206
  3239	004654'	425740	000000
  3240	004655'	064252	474740
  3241	004656'	625004	021250
  3242	004657'	546410	520220
  3243	004660'	426312	021100
  3244	004661'	203155	771100
  3245	004662'	605015	464746
  3246	004663'	721015	763100
  3247	004664'	677416	464736
  3248	004665'	673465	606424
  3249	004666'	000000	000000
  3250	004667'	064252	474740
  3251	004670'	625004	021206
  3252	004671'	442031	643612
  3253	004672'	202210	546240
  3254	004673'	211004	063336
  3255	004674'	711014	120330
  3256	004675'	647476	420336
  3257	004676'	631015	770350
  3258	004677'	647375	671534
  3259	004700'	064240	000000
  3260	004701'	423134	660752
  3261	004702'	663504	066722
  3262	004703'	673235	572732
  3263	004704'	203536	362744
  3264	004705'	203075	771312
  3265	004706'	201724	000000
  3266	004707'	517636	372312
  3267	004710'	665015	672732
  3268	004711'	613136	220172
  3269	004712'	200000	000000
  3270	004713'	136300	000011
  3271	004714'	254000	755740
  3272	004715'	505340	222200
  3273	004716'	254000	756123
  3274	004717'	064244	020206
  3275	004720'	677356	367730
  3276	004721'	624000	000000
  3277	004722'	064244	020234
  3278	004723'	627516	767744
  3279	004724'	654000	000000
  3280	004725'	000000	760121
  3281	004726'	000000	760124
  3282	004727'	203474	566312
  3283	004730'	617514	562134
  3284	004731'	064244	020240
  3285	004732'	663134	171712
  3286	004733'	203517	170312
  3287	004734'	202171	726100
  3288	004735'	432531	446130
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 44-3
ONCE.MAC	11-NOV-87 13:48		NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON

  3289	004736'	202330	147252
  3290	004737'	406304	067744
  3291	004740'	202450	540610
  3292	004741'	476351	454500
  3293	004742'	723364	061344
  3294	004743'	647354	720352
  3295	004744'	701016	464312
  3296	004745'	203477	171750
  3297	004746'	627325	606424
  3298	004747'	000000	000000
  3299	004750'	064244	020234
  3300	004751'	476231	644650
  3301	004752'	446020	000000
  3302	004753'	064244	020222
  3303	004754'	472232	440622
  3304	004755'	000000	000000
  3305	004756'	000000	760152
  3306	004757'	000000	760155
  3307	004760'	002200	000377*
  3308	004761'	700200	027400
  3309	004762'	263040	000000
  3310	004763'	000001	200000
  3311	004764'	064250	542210
  3312	004765'	521014	271312
  3313	004766'	607276	067722
  3314	004767'	673516	320302
  3315	004770'	713124	071712
  3316	004771'	721341	505000
  3317	004772'	064250	442604
  3318	004773'	526170	646202
  3319	004774'	435015	171500
  3320	004775'	717136	427032
  3321	004776'	050000	000000
  3322	004777'	661140	400000
  3323	005000'	254000	756731
  3324	005001'	350000	003627*
  3325	005002'	254000	756731
  3326	005003'	064241	505246
  3327	005004'	747476	462732
  3328	005005'	203235	620302
  3329	005006'	727515	726744
  3330	005007'	627476	460744
  3331	005010'	721304	071352
  3332	005011'	673355	167316
  3333	005012'	202231	644650
  3334	005013'	446021	505000
  3335	005014'	264000	000000*
  3336	005015'	000000	000040
  3337	005016'	000000	400000
  3338	005017'	201300	000120
  3339	005020'	202300	757552
  3340	005021'	254000	757751
  3341	005022'	201400	000000
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 44-4
ONCE.MAC	11-NOV-87 13:48		NZRINI - Called after SYS0 zeros out SYSBEG-SYSEND in COMMON

  3342	005023'	260040	004551*
  3343	005024'	254000	757766
  3344	760227				VAR
  3345			004230	ONCLNR==.-%ONC+1
  3346			005000	ONCLNP==:<ONCLNR!777>+1
  3347
  3348				ONSZCK(ONCE,ONC)	;CHECK TO SEE IF ENOUGH PAGES ALLOCATED
  3349
  3350	005025'			DEPHASE
  3351
  3352			000000'	ONCEND:	END ONCGO	;Cannot use $END in PHASEd code
  3353
NO ERRORS DETECTED
PROGRAM BREAK IS 005025
10K CORE USED
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 45
ONCE.MAC	11-NOV-87 13:48		SYMBOL TABLE

AB.ACK		000000	SIN	CLKINI		004036'	EXT	CTYSP2		000032'		EPTPG0		000200	SIN
AB.CVR		040000	SIN	CLRNXM		027400	SIN	CTYTYO		000302'	EXT	EPTPGT		000420	SIN
AB.NAK		400000	SIN	CLRONC		004056'	EXT	CURUPT		003732'	EXT	EPTPOV		000422	SIN
AB.TCV		100000	SIN	CLRPT	701100	000000		DCFULL		003431'	EXT	EPTSET		757345	
AB.VER		200000	SIN	CLRSND		757536	INT	DCN		003434'	EXT	EPTTR3		000423	SIN
ADJMWS		003422'	EXT	CMDCMD		754325		DCN.OP		003433'	EXT	EPYPSN		000756'	EXT
APR		000000	SPD	CMDHL1		754341		DCNYMN		000000	EXT	ERRPOV		004125'	EXT
APRCHN		000000	EXT	CMDHLP		754340		DCNYOP		003432'	EXT	ETYCHK		757727	
APRID	700000	000000		CMDSCF		002346'	EXT	DCNYUR		000000	EXT	EVACL1		756263	
APRIN1		000362'		CMDSCN		002347'	EXT	DDBLEN		000000	EXT	EVACLR		756243	
APRIN2		000372'		CNCLBT		754073		DDT		001157'	EXT	EVAMAX		756242	INT
APRINI		000331'		CNFBPT		754076		DDTEND		000000	EXT	EVAMIN		756206	
APRIOB		200000	SIN	CNFCPY		754074		DDTSYM		001060'	EXT	EVAONC		756205	
APRMSK		007760	SIN	CNTPGY		000000	EXT	DEBUGF		003447'	EXT	EVASE1		756200	
APRNXM		007000	SIN	COMBKS		757476		DECLOP		002503'	EXT	EVASET		756170	
APRSER		007777	SPD	COMLOD		756665		DELET1		757456		EVASIZ		756241	INT
ASKQMM		002524'	EXT	COMTIA		004327'	EXT	DELETE		757444		EVMAL1		756223	
ASSCON		400000	SIN	COMTOA		004331'	EXT	DELLIN		757471		EVMAL2		756226	
ASSPRG		200000	SIN	COMTYI		004343'	EXT	DEVBUF		000006	SIN	EVMALC		756212	INT
AUTOR0		756643		COMTYO		004361'	EXT	DEVIOS		000002	SIN	EVMINI		756207	
AUTOR1		756651		CONFIG		002531'	EXT	DEVLOG		000005	SIN	EX0ACB		000001	SIN
AUTORS		756637		CONMES		004362'	EXT	DEVLST		004024'	EXT	EXCMPE		004143'	EXT
BKSLS		757443		CONOUT		757564		DEVMOD		000004	SIN	EXCPDL		004145'	EXT
BLTBAD		000254'		CORLIM		757710		DEVSER		000003	SIN	EXIT	047000	000012	
BLTCK		000101'		CORMXK		003764'	EXT	DIE		000576'	EXT	F		000004	INT
BLTLP		000111'		CPOPJ		003057'	EXT	DINI		000004	SIN	FILES		756477	
BOTTM		745000	SPD	CPOPJ1		004237'	EXT	DINITF		004043'	EXT	FILMAN		003465'	EXT
CAVPGN		003744'	EXT	CPUF3		000004	SPD	DSCCOR		757261		FILOPT		003276'	EXT
CCOUNT		000000	SPD	CPUKI		000001	SPD	DSPCHG		755563		FINALC		756267	
CFR.N		003770'	EXT	CPUKL		000002	SPD	DSPCMD		754346		FLGCTY		756502	
CFRLST		003771'	EXT	CPUKS		000003	SPD	DSPTYP		755471		FLGINI		756513	
CH1		004105'	EXT	CPUTYP		000002	SPD	DTE		000200	SPD	FLGNET		756501	
CH2		004107'	EXT	CPYBPT		754075		DTEDII		000002	SIN	FLGNOI		756514	
CH3		004111'	EXT	CPYFIG		756012		DVDIRI		400000	SIN	FNDCSP		000162'	
CH4		004113'	EXT	CPYSY1		756002		DVDSK		200000	SIN	FREAL1		756316	
CH5		004115'	EXT	CPYSYN		756001		DVTTY		000010	SIN	FRECOR		003110'	EXT
CH6		004117'	EXT	CPZZ		000000	SPD	EBRSET		000404'		FREPTR		003122'	EXT
CH7		004121'	EXT	CRLF		004363'	EXT	ECHU		757507		FULLRS		756633	
CHGCMD		754325		CRLFOP		757565		ENTBKS		757504		GET1		757407	
CHGCOR		755706		CRSHWD		004014'	EXT	EPGTBT		754067		GET2		757427	
CHGHL1		755556		CSALUP		000376'		EPIBLT		754072		GETLIN		757401	INT
CHGHLP		755555		CSATAB		000426'		EPT		000342'	EXT	GETLN1		757464	
CHGIT		755546		CSHCL1		000420'		EPT.PN		000344'	EXT	GETPE1		754103	
CHGSY1		755740		CSHCLR		000405'	INT	EPTDT0		000140	SIN	GETPEV		754101	INT
CHGSY2		755745		CSRTAB		000000	EXT	EPTEBR		000000	EXT	GETSY0		755760	
CHGSY3		755752		CTEXT		000000	EXT	EPTHPA		000512	SIN	GETSY1		755764	
CHGSYS		755720		CTYCHR		005023'	EXT	EPTHTB		000510	SIN	GETSYN		755756	
CHNUNC		000447'	EXT	CTYDO		003301'	EXT	EPTITI		000514	SIN	GETWDS		003246'	EXT
CHNUNE		000000	EXT	CTYFIL		004556'	EXT	EPTLPA		000513	SIN	HGHBLK		004002'	EXT
CHTALC		757014		CTYLDB		004050'	EXT	EPTLTB		000511	SIN	HIPAGE		756525	
CHTMSK		003624'	EXT	CTYLOG		004547'	EXT	EPTMAP		000141'		HLPCHG		755676	
CHTPTR		003621'	EXT	CTYSET		004022'	EXT	EPTMP0		000600	SIN	HLPCM1		754323	
CL11PT		001000	SPD	CTYSP1		000024'		EPTPG0		000200	SIN	HLPCMD		754322	
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 45-2
ONCE.MAC	11-NOV-87 13:48		SYMBOL TABLE

HLPTYP		755544		LIT$14		755340	SPD	NODIE		000000	EXT	OPCBN1		756026	
HOLMSG		756574		LIT$15		755410	SPD	NOFCR		757751		OPCBN2		756137	
INADEF		004171'	EXT	LIT$16		755425	SPD	NOPICH		754246		OPCBN3		756147	
INADFL		004170'	EXT	LIT$2		755661	SPD	NOXEXE		003313'	EXT	OPCBN4		756157	
INLMES		004060'	EXT	LIT$3		754603	SPD	NRSVDP		005001'	EXT	OPCBND		756115	
INTLOP		754231		LIT$4		754631	SPD	NULCHG		755676		OPCBNL		756130	
INTLP		000242'		LIT$5		754740	SPD	NULCMD		754325		OPCBS4		756044	
INTLP1		754236		LIT$6		755012	SPD	NULJOB		004052'	EXT	OPCBST		756034	
INTNUM		001026'	EXT	LIT$7		755032	SPD	NULTYP		755544		OPCBTB		754037	
INTTAB		001040'	EXT	LNGMES		002355'	EXT	NUMACB		000006	SIN	OPCLOW		754066	
IOG01		757230		LOC40		757305		NXPGLP		757174		OPCOUT		756166	
IOGO		757216		LOC42		757307		NXTINI		004023'	EXT	OPOUT		757566	INT
IOGO2		757254		LOCORE		003125'	EXT	NZRINI		757372		OPOUT1		757572	
IOPQTA		003743'	EXT	LP.CSB		200000	SPD	OCONM		757523	INT	OPOUT2		757600	
IRING		000442'	EXT	LP.CSD		000020	SPD	ODEBUG		001156'	EXT	OPOUT3		757574	
ITMCHN		000000	EXT	LP.CSF		020000	SPD	OHTINI		001052'	EXT	OPRPPN		003664'	EXT
ITMINI		757351		LP.DSF		040000	SPD	ONCACB		754100		ORING		000443'	EXT
ITMINT		005014'	EXT	LP.ESF		100000	SPD	ONCBUG		000204'	INT	OTST3		757612	
J		000002	INT	LP.IOF		001000	SPD	ONCCMD		754325		P		000001	INT
JBTUPM		003731'	EXT	LP.IOR		200000	SPD	ONCCNT		757625		P1		000014	INT
JFY2SC		001010'	EXT	LP.NXM		002000	SPD	ONCCSH		000413'	INT	P2		000015	INT
JFYHR		001000'	EXT	LP.PAR		000400	SPD	ONCDDB		754065	INT	P2WLSH		000011	SPD
JFYMIN		000776'	EXT	LP.PWF		000040	SPD	ONCDDS		001000	SPD	P3		000016	INT
JFYS12		001012'	EXT	LUUOPC		004566'	EXT	ONCE		754000	ENT	P4		000017	INT
JFYSC2		001015'	EXT	M		000013	INT	ONCEND		005025'		PAG		000010	SPD
JFYSEC		001013'	EXT	M2HAV		003267'	EXT	ONCG1A		754136		PAGALC		756676	
JOBSYM		000323'	EXT	M2REQ		003233'	EXT	ONCGO		000000'	INT	PAGDC1		000272'	
LEVBKS		757474		M2SWT		003264'	EXT	ONCGOP		754112		PAGDEC		000271'	
LG.CSL		400000	SPD	MANRS		756622		ONCGP0		754137		PAGOCT		000267'	
LG.CSW		200000	SPD	MANRS0		756630		ONCGP1		754141		PAGPOP		000305'	
LG.IAM		400000	SPD	MAPLP		000124'		ONCGP2		754252		PAGTY2		000263'	
LG.LAB	400000	000000	SPD	MAX		002522'	EXT	ONCLIT		757770		PAGTYO		000300'	
LG.LUB	100000	000000	SPD	MAXPAG		017777	SPD	ONCLNP		005000	SIN	PAGTYP		000262'	
LG.TEN		020000	SPD	MAXPCB		003171'	EXT	ONCLNR		004230	SPD	PAGXM		757200	
LI.ACO		000177	SPD	MEMSIZ		003707'	EXT	ONCMOD		000000	EXT	PAGXMD		757212	
LI.COF		001000	SPD	MEMSZP		003541'	EXT	ONCPCB		754003	INT	PATSIZ		003455'	EXT
LI.CON		002000	SPD	MIDNIT		001002'	EXT	ONCPYP		014442	SPD	PATSYM		000306'	INT
LI.CPP		020000	SPD	MIN		002520'	EXT	ONCSTT		000576'		PC.UIO		004000	SIN
LI.CPS		010000	SPD	MINPCB		003135'	EXT	ONCTIM		003065'	EXT	PCBLNK		000000	EXT
LI.PIF		000400	SPD	MO.AEN		020000	SPD	ONCTIP		757623		PCBPAG		003177'	EXT
LI.PIN		000200	SPD	MO.AO		010000	SPD	ONCTOP		757624		PCBTAB		003146'	EXT
LINBFI		757657		MO.CTB		001000	SPD	ONCTOS		757525		PDDTNF		000257'	
LINBUF		757627		MO.LAC		400000	SPD	ONCTS1		754316		PE.CLR		000040	SPD
LINEP		757626		MO.TOF		004000	SPD	ONCTST		754266		PEVEN8		004550'	EXT
LINEPI		757707		MO.TON		002000	SPD	ONCTSZ		000167	SPD	PG		000003	INT
LINKDB		003701'	EXT	MOVSTP		000310'		ONCTYI		757724		PGCHK		756555	
LINWID		757552		MPSLOT		754056		ONCTYO		757715		PGCHK1		756570	
LIT$0		755573	SPD	MTR		000024	SPD	ONCWBR		754077		PGE.A		400000	SIN
LIT$1		755612	SPD	MWSLIM		003751'	EXT	ONDLNP		000206'	EXT	PGE.C		020000	SIN
LIT$10		755051	SPD	NMOCPC		000007	SPD	ONDLNR		000000	EXT	PGE.P		200000	SIN
LIT$11		755143	SPD	NMRBPC		003263'	EXT	ONDSTT		000214'	EXT	PGE.W		100000	SIN
LIT$12		755235	SPD	NMSTPC		003272'	EXT	OPCADR		754047		PGFAIL		000350'	EXT
LIT$13		755266	SPD	NODIE		000000	EXT	OPCBCL		756020		PGFUIO		000746'	EXT
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 45-3
ONCE.MAC	11-NOV-87 13:48		SYMBOL TABLE

PGSLP		756712		RECOMP		000000	EXT	SPCF11		000450	SIN	TTYINI		004011'	EXT
PGSLP0		756715		REDOLY		756626		SPCINI		000013'	EXT	TXTCHG		755673	
PGSLP1		756731		REFLAG		003665'	EXT	SPCMTD		000455	SIN	TXTCMD		755435	
PGYADR		004000'	EXT	REFLNP		000207'	EXT	SPCMTI		000456	SIN	TXTTYP		755541	
PGYATB		003605'	EXT	REFLNR		000000	EXT	SRPNDS		003437'	EXT	TYI1		757617	
PGYBPL		003776'	EXT	REFSTT		000215'	EXT	STATES		004045'	EXT	TYPCMD		754325	
PGYCHT		003573'	EXT	REONCE		001071'	EXT	STAUTO	000001	000000	SIN	TYPCOR		755700	
PGYCSH		003611'	EXT	REPSID		001074'	EXT	STRBTS		000000	EXT	TYPHL1		755464	
PGYDIO		003562'	EXT	RESCOD		001073'	EXT	STRDDB		000000	EXT	TYPHLP		755463	
PGYDRT		003604'	EXT	RESTRT		000010'	EXT	STSUPR		200000	SIN	TYPIT		755454	
PGYERR		003602'	EXT	REYDCA		000002'	EXT	SUPTYC		757554		TYPONL		002344'	EXT
PGYFPL		004003'	EXT	REYDCM		000004'	EXT	SUPTYP		757553		TYPSYS		755703	
PGYLMA		003553'	EXT	RIREQ		003230'	EXT	SWPIA	701440	000000		U		000005	INT
PGYLMJ		003555'	EXT	RISWT		003273'	EXT	SYMBK0		754130		UPGTB0		754071	
PGYLMV		003554'	EXT	RMVDDT		756657		SYS0		757103		UPGTBT		754070	
PGYLST		003777'	EXT	RSVDPG		003512'	EXT	SYS0A		757113		UPSJOB		000757'	EXT
PGYNXM		003774'	EXT	S$ENTR	777777	777775	SIN	SYS1		757116		UPT		000000	EXT
PGYPGO		003547'	EXT	S$EVEN		000006	SIN	SYS2W		757130		UPT.PN		003730'	EXT
PGYPNO		003565'	EXT	S$HALT	777777	777777	SIN	SYSBEG		003704'	EXT	UPTAC0		000000	EXT
PGYSIO		003576'	EXT	S$INFO		000005	SIN	SYSBTS		001161'	EXT	UPTACP		000000	EXT
PGYSIP		003600'	EXT	S$NAME		754000	SPD	SYSDAT		000000	EXT	UPTHEC		000504	SIN
PGYSOP		003601'	EXT	S$NONA		000000	SIN	SYSDDT		003460'	EXT	UPTHMC		000506	SIN
PGYSPB		003571'	EXT	S$PATC		000007	SIN	SYSDRB		004041'	EXT	UPTKNT		000430	SIN
PGYSPO		003572'	EXT	S$STOP		000001	SIN	SYSDSP		004013'	EXT	UPTKTR		000431	SIN
PGYSPT		003570'	EXT	S$TEMP		000000	SPD	SYSEND		003706'	EXT	UPTLEC		000505	SIN
PGYSTS		003577'	EXT	S$XCT	777777	777776	SIN	SYSNUM		002571'	EXT	UPTLMC		000507	SIN
PGYUNI		003564'	EXT	SAVITM		757711		SYSPDL		004021'	EXT	UPTNPP		000502	SIN
PGYUNU		003550'	EXT	SAXBAS		000446'	EXT	SYSSIZ		003735'	EXT	UPTPC		000000	EXT
PGYUSE		003606'	EXT	SAXN		000000	EXT	SYSSZP		003765'	EXT	UPTPGT		000420	SIN
PJOBN		003725'	EXT	SCNCHG		755570		SYSUDT		004172'	EXT	UPTPTR		000437	SIN
PJRST	324740	000000		SCNCMD		754367		SYSZRO		000320'	INT	UPTSET		757325	
PMEMSZ		003643'	EXT	SCNTYP		755476		T1		000006	INT	USE.N		003176'	EXT
PRREQ		003226'	EXT	SERIAL		001104'	EXT	T2		000007	INT	USELST		003170'	EXT
PRSWT		003262'	EXT	SETM2P		756422		T3		000010	INT	USRACB		000000	SIN
PRT22A		003351'	EXT	SIDLST		002621'	EXT	T4		000011	INT	USRLIM		004506'	EXT
PRTDEC		003652'	EXT	SIREQ		003223'	EXT	TBL%%%		000216'		USRMAX		003745'	EXT
PRTSYS		001053'	EXT	SISWT		003271'	EXT	TBLLNP		000205'		USRMPE		004123'	EXT
PSREQ		003221'	EXT	SIZCHG		000003	SPD	TBLLNR		000213'		USYPTN		000761'	EXT
PSSWT		003260'	EXT	SIZCMD		000017	SPD	TBLNEW		000210'		UUOCNT		004137'	EXT
PTINTR		000237'		SIZIRG		000000	EXT	TBLSTT		000213'		UUOCTR		004140'	EXT
PTLP1		000043'		SIZME1		756531		THSDAT		001067'	EXT	UUOKNT		004133'	EXT
PTLPD		000056'		SIZMEM		756526		TI.ITD		020000	SPD	UUOKTR		004134'	EXT
PTSML		000221'		SIZOK		757053		TICSEC		000774'	EXT	UUOPNT		004141'	EXT
PVYTIM		004175'	EXT	SIZONC		000005	SIN	TIM		000020	SPD	UUOPTR		004142'	EXT
PX.MEM		000004	SPD	SIZORG		000000	EXT	TIME		001070'	EXT	UUOSNT		004135'	EXT
PX.SRC		000001	SPD	SIZTYP		000003	SPD	TIMZON		000000	EXT	UUOSTR		004136'	EXT
PXCT	256000	000000		SNDPGY		000000	EXT	TMPINI		004037'	EXT	VPMAX		001034	SIN
QINI		004040'	EXT	SODLST		002620'	EXT	TO.CIT		400000	SPD	W		000012	INT
QQYSD		001020'	EXT	SPCBL1		756401		TO.CTD		020000	SPD	W2PLSH	777777	777767	SPD
QQYTTY		001016'	EXT	SPCBL2		756420		TO.SIT		040000	SPD	WRADB	700140	000000	
RADIX8		757555		SPCBLN		756377		TO11DB		020000	SPD	WRAPR	700200	000000	
RE.ONA		001114'	EXT	SPCCMW		000451	SIN	TPOPJ		757766		WREBR	701200	000000	
RE.OND		001075'	EXT	SPCF11		000450	SIN	TTCMCH		004523'	EXT	WRFIL	700100	000000	
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88 PAGE 45-4
ONCE.MAC	11-NOV-87 13:48		SYMBOL TABLE

WRPAE	702100	000000		
WRPI	700600	000000		
WRUBR	701140	000000		
XTYI		757712		
XTYO		757732		
YESNO		757541	INT	
ZZ		425464	SPD	
$1B		003441'	EXT	
$XZ		000003	SPD	
%BAT		747000	SIN	
%BAT.N		000747	SIN	
%BAT.P		754023	INT	
%CTLRU		000000	EXT	
%CTLST		000000	EXT	
%CTMRU		000000	EXT	
%ERR		777000	SIN	
%ERR.N		000777	SIN	
%HMR		752000	SIN	
%HMR.N		000752	SIN	
%HMR.P		754007	INT	
%HOM		753000	SIN	
%HOM.N		000753	SIN	
%HOM.P		754003	INT	
%MIN		400000	SIN	
%O	777777	024576'	SIN	
%ONC		754000	SIN	
%ONC.N		000754	SIN	
%OND		761000	SIN	
%OND.N		000761	SIN	
%RB2.C		000000	EXT	
%REF		770000	SIN	
%REF.N		000770	SIN	
%RIB.C		000000	EXT	
%SAT.C		000000	EXT	
%STA		751000	SIN	
%STA.N		000751	SIN	
%STA.P		754013	INT	
%STR		750000	SIN	
%STR.N		000750	SIN	
%STR.P		754017	INT	
%T2P		745000	SIN	
%T2P.N		000745	SIN	
%T2P.P		754033	INT	
%TMP		746000	SIN	
%TMP.N		000746	SIN	
%TMP.P		754027	INT	
%UPS		000000	EXT	
%UPT		000000	EXT	
.CPCPU		002575'	EXT	
.CPDDT		003462'	EXT	
.DTCTO		004000	SIN	

ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

AB.ACK	  1138#	  1438	  1444	  1456	  1470	  1474	  1478	  1485	  1492	  1509	  1526	  1599	  1603	  1608
	  1706
AB.CVR	  1142#	  1470	  1509
AB.NAK	  1139#	  1451	  1464	  1497	  1503	  1513	  1695	  1701
AB.TCV	  1141#
AB.VER	  1140#	  1464	  1470	  1509	  1513	  1695	  1701
ADJMWS	  2390%	  2390
APR	   210	   215	   456	   532	  2349
APRCHN	    21%	  1148	  1150	  2319	  2340	  2503	  2709
APRIN1	   560#	   568
APRIN2	   561	   568#
APRINI	    72	   525#	   580
APRIOB	   923
APRMSK	   528	  1148	  2709
APRNXM	   210	   215	   456	  2349
APRSER	   963	  1796
ASKQMM	    29%	  1733	  1746
ASSCON	  2618	  2630
ASSPRG	  2618
AUTOR0	  2397	  2426#
AUTOR1	  2427	  2435#
AUTORS	  1185	  1291	  2419	  2422#
BKSLS	  2902	  2937#	  2967	  2973	  2976
BLTBAD	   278	   465#	   469
BLTCK	   275#	   279
BLTLP	   287#	   307
BOTTM	  1859	  1899	  1917
CAVPGN	  2478%	  2478	  2495%	  2495	  2505%	  2505	  2557%	  2557	  2572%	  2572	  2655%	  2655
CCOUNT	   768#	   783	   783#	   787	   787#	   791	   791#	   795	   795#	   799	   799#	   803	   803#	   807
	   807#	   808
CFR.N	    57%	  2677
CFRLST	    57%	  2477	  2512	  2571	  2651	  2652	  2678
CH1	    37%	  2778
CH2	    37%	  2780
CH3	    37%	  2782
CH4	    37%	  2784
CH5	    37%	  2786
CH6	    37%	  2788
CH7	    37%	  2790
CHGCMD	  1196#	  1626	  1632
CHGCOR	  1654	  1727#
CHGHL1	  1629#	  1631
CHGHLP	  1628#	  1663
CHGIT	  1289	  1619#
CHGSY1	  1756#	  1760
CHGSY2	  1762#	  1766
CHGSY3	  1767#	  1769
CHGSYS	  1659	  1738#	  1799
CHNUNC	   348%	   358
CHNUNE	   348%	   358
CHTALC	  2555	  2557#
CHTMSK	    58%	  2569
CHTPTR	    58%	  2566
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

CL11PT	  3070
CLKINI	  2742%	  2742
CLRNXM	   205	   453	  2340	  2350
CLRONC	  2764%	  2764
CLRSND	  2359	  2578	  2767	  2993	  3005#
CMDCMD	  1197#	  1210	  1215
CMDHL1	  1212#	  1214
CMDHLP	  1211#	  1302
CMDSCF	  1206%	  1206	  1534%	  1534	  1622%	  1622
CMDSCN	  1207%	  1207	  1535%	  1535	  1623%	  1623
CNCLBT	   869#	  1752
CNFBPT	   872#	  1755	  1778
CNFCPY	   870#	  1749
CNTPGY	    58%	   254	  1917
COMBKS	  2969#	  2978
COMLOD	  2433	  2442	  2451#
COMTIA	    45%	  3000
COMTOA	    45%	  3002
COMTYI	    28%	  3013
COMTYO	    45%	  3029
CONFIG	    49%	   869	   870	   872	  1751
CONMES	    28%	  2431	  2440	  2758%	  2758	  2994	  3034
CONOUT	  3034#
CORLIM	  1719	  1727	  1735	  2668	  2670	  3091#
CORMXK	    64%	  2673
CPOPJ	  1792	  2045%	  2045
CPOPJ1	    28%	  2352	  2934
CPUF3	    91	   205	   221	   527	   540	   610	   614	  1147	  2292	  2319	  2503	  2707	  2908	  3040
	  3042	  3051	  3096
CPUKI	    20	    21	    41	    42	    91	   313	   317	   376	   377	   380	   381	   526	   614	   875
	   876	   878	   879	   924	   925	   931	   939	   940	   944	   945	   951	   957	   961	   968
	  1076	  1165	  1742	  1744	  1794	  1795	  2339	  2340	  2347	  2635	  2639	  2702	  2746	  2747
	  2748	  2820	  2908	  3040	  3042	  3051	  3096
CPUKL	    36	    84	    92	   333	   347	   362	   527	   530	   555	   571	   610	  1000	  1147	  1165
	  1742	  1744	  2308	  2319	  2481	  2503	  2609	  2707	  2711	  2842	  2909	  3043	  3052	  3068
	  3097
CPUKS	   105	   345	   347	   583	   612	   862	   927	   928	  1026	  1152	  2293	  2309	  2320	  2482
	  2504	  2713	  2805	  2809	  2866	  2906	  2909	  3044	  3052	  3076	  3098
CPUTYP	    20	    21	    36	    41	    42	    84	    91	    92	   105	   205	   221	   313	   317	   333
	   345	   347	   362	   376	   377	   380	   381	   526	   527	   530	   540	   555	   571	   583
	   610	   612	   614	   862	   875	   876	   878	   879	   924	   925	   927	   928	   931	   939
	   940	   944	   945	   951	   957	   961	   968	  1000	  1026	  1076	  1147	  1152	  1165	  1742
	  1744	  1794	  1795	  2292	  2293	  2308	  2309	  2319	  2320	  2339	  2340	  2347	  2481	  2482
	  2503	  2504	  2609	  2635	  2639	  2702	  2707	  2711	  2713	  2746	  2747	  2748	  2805	  2809
	  2820	  2842	  2866	  2906	  2908	  2909	  3040	  3042	  3043	  3044	  3051	  3052	  3068	  3076
	  3096	  3097	  3098
CPYBPT	   871#	  1754
CPYFIG	   870	   871	  1750	  1811#
CPYSY1	  1802#	  1805
CPYSYN	  1761	  1801#
CPZZ	    20#	    20	    21#	    21	    36#	    36	    41#	    41	    42#	    42	    84#	    84	    91#	    91
	    92#	    92	   105#	   105	   205#	   205	   221#	   221	   313#	   313	   317#	   317	   333#	   333
	   345#	   345	   347#	   347	   362#	   362	   376#	   376	   377#	   377	   380#	   380	   381#	   381
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

	   526#	   526	   527#	   527	   530#	   530	   540#	   540	   555#	   555	   571#	   571	   583#	   583	   610#
	   610	   612#	   612	   614#	   614	   862#	   862	   875#	   875	   876#	   876	   878#	   878	   879#
	   879	   924#	   924	   925#	   925	   927#	   927	   928#	   928	   931#	   931	   939#	   939	   940#
	   940	   944#	   944	   945#	   945	   951#	   951	   957#	   957	   961#	   961	   968#	   968	  1000#
	  1000	  1026#	  1026	  1076#	  1076	  1147#	  1147	  1152#	  1152	  1165#	  1165	  1742#	  1742	  1744#
	  1744	  1794#	  1794	  1795#	  1795	  2292#	  2292	  2293#	  2293	  2308#	  2308	  2309#	  2309	  2319#
	  2319	  2320#	  2320	  2339#	  2339	  2340#	  2340	  2347#	  2347	  2481#	  2481	  2482#	  2482	  2503#
	  2503	  2504#	  2504	  2609#	  2609	  2635#	  2635	  2639#	  2639	  2702#	  2702	  2707#	  2707	  2711#
	  2711	  2713#	  2713	  2746#	  2746	  2747#	  2747	  2748#	  2748	  2805#	  2805	  2809#	  2809	  2820#
	  2820	  2842#	  2842	  2866#	  2866	  2906#	  2906	  2908#	  2908	  2909#	  2909	  3040#	  3040	  3042#
	  3042	  3043#	  3043	  3044#	  3044	  3051#	  3051	  3052#	  3052	  3068#	  3068	  3076#	  3076	  3096#
	  3096	  3097#	  3097	  3098#	  3098
CRLF	    28%	  2373	  3035
CRLFOP	  2328	  3035#
CRSHWD	    21%	    80	  2701
CSALUP	   574#	   578
CSATAB	   572	   638#
CSHCL1	   629#	   633
CSHCLR	   349	   351	   353	   355	   357	   359	   618#
CSRTAB	    36%	   372
CTEXT	    28%
CTYCHR	  3137%	  3137	  3141%	  3141
CTYDO	  2256%	  2256
CTYFIL	   112%	   112	  3144%	  3144
CTYLDB	  2757%	  2757
CTYLOG	  3135%	  3135
CTYSET	  2722%	  2722
CTYSP1	    98#	   101	   105
CTYSP2	    99	   107#
CTYTYO	   497%	   497
CURUPT	    34%	   378	  2643
DCFULL	    13%	  2415
DCN	    13%	  2418
DCN.OP	    13%	  2417
DCNYMN	    12%	    76
DCNYOP	    13%	  2416
DCNYUR	    12%	    74
DDBLEN	    68%	   254
DDT	   503%	   503	   508	   514	   515	  1299
DDTEND	   516%	   516	   897%	   897
DDTSYM	   259%	   259	   260%	   260	   507%	   507	   900%	   900	   901%	   901	   902%	   902	  1070%	  1070
	  1072%	  1072
DEBUGF	  2435%	  2435
DECLOP	    29%	  1721	  1725
DELET1	  2938	  2950#
DELETE	  2912	  2938#
DELLIN	  2914	  2963#
DEVBUF	  2627
DEVIOS	  2626
DEVLOG	  2622
DEVLST	    21%	  2619	  2725
DEVMOD	  2620	  2625	  2631
DEVSER	  2633	  2729
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

DIE	   624	   624%	   750	   752
DINI	  2732
DINITF	    71%	    71	  2749%	  2749
DSCCOR	  2767#	  2773
DSPCHG	  1625	  1651#	  1665
DSPCMD	  1209	  1288#	  1303
DSPTYP	  1537	  1561#	  1573
DTE	    97	  3070
DTEDII	  1003
DVDIRI	  2617
DVDSK	  2628
DVTTY	  2628
EBRSET	   381	   611#
ECHU	  2964	  2980#	  3058
ENTBKS	  2939	  2976#
EPGTBT	   865#	   936
EPIBLT	   868#	   998
EPT	    34%	    95	    96	    98	   313	   314	   315	   318	   363	   382	   384	   388	   411	   412
	   413	   537	   538	   539	   553	   630	   849	   850	   851	   852	   853	   854	   855	   865
	   868	   937	   947	   999	  1002	  1003	  1013	  1899	  1915	  1965	  1968	  1969	  2040	  2049
	  2336	  2848	  2850	  2851	  2852	  2853	  3043	  3069	  3071	  3097
EPT.PN	    34%	   544	   611
EPTDT0	  1003
EPTEBR	    42%	   382	   384	   388	   947	  1915	  1965	  2049
EPTHPA	  2852
EPTHTB	  2850
EPTITI	  1002	  2848
EPTLPA	  2853
EPTLTB	  2851
EPTMAP	   319#	   321
EPTMP0	   318	   363	   630
EPTPG0	   411	   412	   413	   849	   850	   851	   852	   853	   854	   855	  1968	  1969	  2336
EPTPGT	   865
EPTPOV	   553
EPTSET	   865	  2815#
EPTTR3	   937
EPYPSN	    23%	   942
ERRPOV	    38%	  2795
ETYCHK	  3105	  3114#
EVACL1	  2047#	  2048
EVACLR	  2030#	  2120
EVAMAX	  1954	  2004	  2020#	  2034	  2037	  2106
EVAMIN	  1957	  1969#
EVAONC	  1968#
EVASE1	  1962#	  1964
EVASET	  1953#	  2455
EVASIZ	  1981	  1994	  2002	  2006	  2018#	  2030	  2087	  2090	  2107	  2451	  2457
EVMAL1	  1997	  2003#
EVMAL2	  2000	  2006#
EVMALC	  1994#	  2079	  2112	  2473	  2522	  2528	  2535	  2541	  2552	  2565
EVMINI	  1980#	  1995
EX0ACB	   554	   560	   562	   570	   879
EXCMPE	    39%	  2815
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

EXCPDL	    39%	   552	  2817
F	  2605	  2607	  2619	  2620	  2622	  2625	  2626	  2627	  2631	  2633	  2634	  2727
FILES	  1292	  2249#
FILMAN	    28%	  2453
FILOPT	    29%	  2250
FINALC	  2071#	  2646
FLGCTY	  1296	  2255#
FLGINI	  1294	  2276#
FLGNET	  1297	  2254#
FLGNOI	  1295	  2277#
FNDCSP	   365#	   367	   373
FREAL1	  2105	  2108#
FRECOR	  2102%	  2104
FREPTR	  2102%	  2115
FULLRS	  1290	  2415#
GET1	  2907#	  2917	  2929	  2948
GET2	  2924#	  2961
GETLIN	  1203	  2900#	  2955	  2965	  3011
GETLN1	  2920	  2923	  2957#
GETPE1	   887#	   890
GETPEV	   885#
GETSY0	  1780#	  1783
GETSY1	  1784#	  1790
GETSYN	  1069	  1778#
GETWDS	    18%	  2221
GINST	   566#	   566	   567	   567#	   568
HGHBLK	   223	  2688%	  2688
HIPAGE	  2295#	  2310	  2318	  2324	  2469
HLPCHG	  1624	  1711#
HLPCM1	  1182	  1188	  1193#	  1616	  1714
HLPCMD	  1190#	  1208
HLPTYP	  1536	  1613#
HOLMSG	  2357#	  2494
INADEF	  2887%	  2887
INADFL	  2886%	  2886
INLMES	    29%	  2321	  2360	  2366	  2579	  2584	  2589	  2597	  2768
INTLOP	  1008#	  1024
INTLP	   453#	   457
INTLP1	  1014#	  1018
INTNUM	    34%	  1007
INTTAB	    34%	  1008	  1019
IOG01	  2727#	  2736
IOGO	  2698	  2701#
IOGO2	  2752	  2760#
IOPQTA	    58%	  2654
IRING	   348%	   348
ITMCHN	  2849%	  2849
ITMINI	  2711	  2846#
ITMINT	  2847%	  2847
J	  1013	  1014	  1016	  1017	  1022	  2760	  2761	  2762	  2890	  2905	  2929	  2934	  2938	  2957
JBTUPM	    17%	  2641
JFY2SC	   986%	   986
JFYHR	   978%	   978
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

JFYMIN	   976%	   976
JFYS12	   988%	   988
JFYSC2	   991%	   991
JFYSEC	   973%	   973	   981%	   981	   989%	   989
JOBSYM	   506%	   506	   517%	   517
LEVBKS	  2918	  2950	  2963	  2967#
LG.CSL	   611
LG.CSW	   611
LG.IAM	  2855
LG.LAB	   554	   562	   570	   879
LG.LUB	   545	   876
LG.TEN	   611
LI.ACO	   529	  2710	  2748
LI.COF	   529	  2710
LI.CON	  1150	  2748
LI.CPP	   529	  2710
LI.CPS	   529	  2710
LI.PIF	   529	  2710
LI.PIN	  1150	  2748
LINBFI	  3089#	  3090
LINBUF	  3086	  3087#
LINEP	  3003	  3038	  3062	  3086#
LINEPI	  2900	  3090#
LINKDB	    30%	  2601
LINWID	  2998	  3019#	  3125	  3127
LISTSN	     3	     6
LIT$0	  1376#	  1438	  1589#	  1599	  1683#	  1695
LIT$1	  1380#	  1444	  1591#	  1603	  1685#	  1701
LIT$10	  1406#	  1485
LIT$11	  1411#	  1492
LIT$12	  1416#	  1497
LIT$13	  1419#	  1503
LIT$14	  1423#	  1509
LIT$15	  1427#	  1513
LIT$16	  1429#	  1526
LIT$2	  1384#	  1451	  1593#	  1608	  1689#	  1706
LIT$3	  1389#	  1456
LIT$4	  1392#	  1464
LIT$5	  1398#	  1470
LIT$6	  1402#	  1474
LIT$7	  1404#	  1478
LNGMES	    29%	  1213	  1542	  1630
LOC40	  2776#
LOC42	   868	  2778#
LOCORE	  2102%	  2118
LP.CSB	   532
LP.CSD	   534
LP.CSF	   528	   534	   925	  2708
LP.DSF	   528	  2308	  2481
LP.ESF	  1148	  2319	  2503	  2709
LP.IOF	  2308	  2319	  2481	  2503
LP.IOR	   528	  2708
LP.NXM	  2308	  2319	  2481	  2503	  2708
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

LP.PAR	  2308	  2319	  2481	  2503	  2708
LP.PWF	   925
LUUOPC	   938%	   938
M	  2625	  2628	  2630	  2631
M2HAV	    24%	  2210	  2240
M2REQ	    24%	  2208
M2SWT	    24%	  2209	  2237
MANRS	  1300	  2378#	  2423
MANRS0	  2391	  2395#
MAPLP	   300#	   304
MAX	    45%	  1731	  1744
MAXPAG	  2294	  2294#	  2316	  2501
MAXPCB	    57%	  1941	  2158
MEMSIZ	   221%	   221	   272%	   272	   284%	   284	   440%	   440	  1847%	  1847	  2518%	  2518	  2605%	  2605
	  2607%	  2607
MEMSZP	    17%	  1943	  2514
MIDNIT	   980%	   980
MIN	    45%	  1729	  1740
MINPCB	    57%	  1928	  2128
MO.AEN	  2860
MO.AO	  2860
MO.CTB	   557	  2860
MO.LAC	   557	  2860
MO.TOF	   557
MO.TON	  2849
MOVSTP	    85	   502	   505#	   510	   511	   512
MPSLOT	   848#	  1854
MTR	   557	  2849	  2860
MWSLIM	    60%	  2662
NMOCPC	   254	   271	   285	   768	  1833	  1865	  1871	  1878	  1884	  1895	  1917	  1921
NMRBPC	    21%	  2074	  2135	  2150	  2202	  2218	  2219	  2236
NMSTPC	    21%	  2073	  2134	  2140	  2197	  2216	  2217	  2234	  2243
NODIE	   624%
NOFCR	  3122	  3126	  3128	  3135#
NOPICH	  1012	  1023#
NOXEXE	  2278%	  2278
NRSVDP	  2488%	  2488	  2573%	  2573
NULCHG	  1650	  1710#
NULCMD	  1198#	  1287
NULJOB	    30%	  2760%	  2760
NULTYP	  1560	  1612#
NUMACB	   559
NXPGLP	  2679#	  2682	  2693
NXTINI	  2723%	  2723
NZRINI	  2608	  2886#
OCONM	  1171	  1193	  1201	  2265	  2270	  2282	  2287	  2993#	  3009
ODEBUG	  1298%	  1298
OHTINI	  1065%	  1065
ONCACB	   877#	   948
ONCBUG	   391#
ONCCMD	  1199#	  1204
ONCCNT	  2997	  3065	  3085#	  3106
ONCCSH	   624#
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

ONCDDB	   859#	  1918
ONCDDS	   255#	   271	   285	  1859	  1899	  1917
ONCE	   751	   752#	   755
ONCEND	  3352#
ONCG1A	   907	   916#
ONCGO	    71#	  3352
ONCGOP	   389	   391	   896#
ONCGP0	   915	   917#
ONCGP1	   917	   922#
ONCGP2	  1060	  1063#
ONCLIT	  3184#
ONCLNP	   405	  3346#	  3348
ONCLNR	   419	  3345#	  3346
ONCMOD	    13%	    74	    76	    78
ONCPCB	   766#
ONCPYP	   254#	  1898	  1909
ONCSTT	   419	   747#	   759
ONCTIM	    29%	  1843	  2071
ONCTIP	  2901	  3083#	  3110
ONCTOP	  3004	  3037	  3039	  3046	  3063	  3084#	  3107
ONCTOS	  1064	  2996#
ONCTS1	  1168	  1184#
ONCTST	  1088	  1146#
ONCTSZ	  2996	  3064	  3088#
ONCTYI	  2999	  3110#
ONCTYO	  3001	  3102#
ONCWBR	   874#	   944
ONDLNP	   395%	   406
ONDLNR	   395%	   420
ONDSTT	   395%	   420
OPCADR	   833#	   891
OPCBCL	  1827#	  2454
OPCBN0	  1851	  1858#
OPCBN1	  1835#	  1839
OPCBN2	  1921#
OPCBN3	  1929#	  1936
OPCBN4	  1932	  1937#
OPCBND	  1898#
OPCBNL	  1907	  1911#	  1913
OPCBS4	  1850#	  1856
OPCBST	   387	  1842#
OPCBTB	   817#	   818#	   887	  1844	  1850
OPCLOW	   860#	  1834	  1858	  1908	  1926
OPCOUT	  1840	  1916	  1944#
OPOUT	  1068	  1174	  1194	  1202	  2266	  2271	  2283	  2288	  2374	  2432	  2441	  2592	  2600	  2772
	  3010	  3036#
OPOUT1	  3041#	  3049	  3057
OPOUT2	  3045	  3051#
OPOUT3	  3046#
OPRPPN	  2595%	  2595
ORING	   348%	   350
OTST3	  3047	  3062#
P	    82	   349	   351	   353	   355	   357	   359	   430	   433	   434	   436	   439	   442	   445
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

	   451	   459	   462	   468	   475	   481	   490	   492	   493	   495	   497	   498	   500	   624	   634
	   752	   885	   892	   893	   896	   922	  1063	  1064	  1065	  1067	  1068	  1069	  1164	  1171
	  1173	  1174	  1177	  1193	  1194	  1201	  1202	  1203	  1207	  1213	  1292	  1294	  1295	  1296
	  1297	  1298	  1299	  1535	  1542	  1564	  1567	  1623	  1630	  1654	  1659	  1733	  1734	  1736
	  1746	  1747	  1761	  1770	  1803	  1805	  1806	  1809	  1827	  1842	  1922	  1939	  1944	  1966
	  1982	  1995	  2007	  2008	  2014	  2015	  2016	  2050	  2079	  2112	  2120	  2143	  2153	  2161
	  2185	  2214	  2220	  2221	  2223	  2224	  2232	  2238	  2245	  2249	  2265	  2266	  2270	  2271
	  2272	  2282	  2283	  2287	  2288	  2289	  2312	  2321	  2327	  2351	  2358	  2359	  2360	  2365
	  2366	  2368	  2372	  2373	  2374	  2431	  2432	  2440	  2441	  2452	  2453	  2455	  2473	  2483
	  2494	  2522	  2528	  2535	  2541	  2552	  2565	  2575	  2578	  2579	  2583	  2584	  2587	  2588
	  2589	  2592	  2597	  2600	  2608	  2646	  2647	  2694	  2695	  2711	  2721	  2722	  2723	  2732
	  2742	  2743	  2744	  2758	  2761	  2767	  2768	  2772	  2863	  2892	  2907	  2909	  2918	  2924
	  2931	  2935	  2939	  2941	  2950	  2952	  2954	  2959	  2963	  2964	  2968	  2969	  2971	  2972
	  2974	  2977	  2980	  2982	  2983	  2985	  2987	  2989	  2990	  2991	  2993	  3007	  3009	  3010
	  3011	  3012	  3013	  3016	  3017	  3024	  3026	  3027	  3034	  3035	  3048	  3052	  3058	  3066
	  3072	  3100	  3103	  3108	  3112	  3116	  3118	  3129	  3131	  3133	  3134	  3135	  3136	  3137
	  3141	  3147	  3150	  3151
P1	   288	   298	   306	  1205	  1211	  1533	  1540	  1621	  1628	  1719	  1723	  1727	  1738	  2075
	  2080	  2129	  2130	  2140	  2150	  2178
P2	  2085	  2141	  2151	  2152	  2169	  2173	  2174	  2177	  2179
P2WLSH	  2129	  2325
P3	  1209	  1211	  1212	  1214	  1537	  1540	  1541	  1543	  1625	  1628	  1629	  1631	  2142	  2144
	  2172	  2180	  2181	  2182	  2725	  2727	  2729	  2730	  2732	  2733	  2735	  2736
P4	  2168	  2171
PAG	   384	   388	   554	   570	   947	  1915	  1965	  2049
PAGALC	  2461	  2469#
PAGDC1	   487	   489#	   492
PAGDEC	   436	   442	   488#
PAGOCT	   459	   486#
PAGPOP	   480	   500#
PAGTY2	   479#	   482
PAGTYO	   481	   495#
PAGTYP	   433	   439	   445	   451	   462	   468	   475	   478#
PAGXM	  2680	  2684#
PAGXMD	  2690	  2694#
PATSIZ	   261%	   261	   262%	   262	   898%	   898	   899%	   899	  2444%	  2444
PATSYM	   502#
PC.UIO	   950	  2764	  2807	  2808
PCBLNK	  1825%	  2179
PCBPAG	  1825%	  1852	  2169
PCBTAB	  1825%	  1845	  2084	  2136	  2139
PDDTNF	   267	   471#	   476
PE.CLR	  2854
PEVEN8	    28%	  3136%	  3136
PG	   889	  1827	  1834	  1839	  1842	  1847	  1848	  1849	  1851	  1852	  1853	  1855	  1858	  1860
	  1906	  1908	  1909	  1910	  1911	  1912	  1926	  1927	  1928	  1933	  1935	  1940	  1941	  1942
	  1944	  2125	  2126	  2127	  2128	  2144	  2145	  2157	  2158	  2169	  2180	  2182	  2310	  2314
	  2318	  2357	  2363	  2457	  2458	  2459	  2460	  2469	  2470	  2471	  2472	  2474	  2475	  2477
	  2480	  2484	  2493	  2497	  2499	  2510	  2512	  2513	  2514	  2515	  2517	  2518	  2674	  2679
	  2682	  2687	  2688	  2689	  2690	  2691	  2692	  2693
PGCHK	  2312	  2335#	  2483
PGCHK1	  2341	  2348#
PGE.A	   300	   302	   317	   320	   941	  1853	  1910	  1960	  2335	  2338
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

PGE.C	   300	   302	   317	   320	   366	   627	   941	  1853	  1910	  1960
PGE.P	   941
PGE.W	   300	   302	   317	   320	   941	  1853	  1910	  1960
PGFAIL	    41%	   548
PGFUIO	    41%	   932
PGSLP	  2483#	  2502
PGSLP0	  2487#	  2492
PGSLP1	  2485	  2489	  2500#
PGYADR	    54%	  1874	  2532	  2686
PGYATB	    55%	  1892	  2550
PGYBPL	    53%	  1869	  1929	  2172	  2527	  2684
PGYCHT	    54%	  1882	  2540
PGYCSH	    55%	  1896	  2554
PGYDIO	    54%	  1873	  2531
PGYDRT	    55%	  1837	  1891	  2549
PGYERR	    55%	  1836	  1889	  2547
PGYFPL	    53%	  1863	  1934	  1938	  2160	  2181	  2476	  2496	  2509	  2519	  2689
PGYLMA	    53%	  1866	  2524
PGYLMJ	    53%	  1868	  2526
PGYLMV	    53%	  1867	  2525
PGYLST	    57%	  1872	  1931	  2171	  2530	  2685
PGYNXM	    55%	  1890	  2548	  2681
PGYPGO	    53%	  1862	  2520
PGYPNO	    54%	  1876	  2534
PGYSIO	    54%	  1886	  2543
PGYSIP	    55%	  1887	  2545
PGYSOP	    55%	  1888	  2546
PGYSPB	    54%	  1880	  2538
PGYSPO	    54%	  1881	  2539
PGYSPT	    54%	  1879	  2537
PGYSTS	    56%	  1885	  2544
PGYUNI	    54%	  1875	  2533
PGYUNU	    53%	  1861	  2521
PGYUSE	    55%	  1835	  1893	  1930	  2170	  2551
PJOBN	    18%	  2632
PMEMSZ	    18%	  2576	  2582
PRREQ	    24%	  2203
PRSWT	    24%	  2204	  2235
PRT22A	  2327%	  2327
PRTDEC	  1173%	  1173	  2583%	  2583	  2588%	  2588
PRTSYS	  1067%	  1067
PSREQ	    24%	  2198
PSSWT	    24%	  2199	  2233
PTINTR	   216	   448#	   463
PTLP1	   208#	   217
PTLPD	   211	   221#
PTSML	   273	   430#	   446
PVYTIM	  2891%	  2891
PX.MEM	   566	   567
PX.SRC	   567
QINI	  2744%	  2744
QQYSD	   994%	   994
QQYTTY	   992%	   992
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

RADIX8	  2365	  2372	  3023#	  3026
RE.ONA	    13%	  1184
RE.OND	    13%	  1163
RECOMP	    13%	  1164
REDOLY	  1293	  2393#
REFLAG	  2422%	  2422	  2593%	  2593	  2596%	  2596
REFLNP	   395%	   407
REFLNR	   395%	   421
REFSTT	   395%	   421
REONCE	    12%	    78	  1159
REPSID	    12%	  1162
RESCOD	    12%	  1161
RESTRT	    12%	    77	    79
REYDCA	    12%	    73
REYDCM	    12%	    75
RIREQ	    24%	  2205
RISWT	    24%	  2206	  2244
RMVDDT	  2436	  2444#
RSVDPG	  2486%	  2486
S$ENTR	   625	   750	   757	   888	  2005	  2035	  2222	  2559	  2669	  2777	  2779	  2781	  2783	  2785
	  2787	  2789	  2791
S$EVEN	   624
S$HALT	   624	   750	   888	  2005	  2035	  2222	  2559	  2669	  2777	  2779	  2781	  2783	  2785	  2787
	  2789	  2791
S$INFO	   624
S$NAME	   755#	   888	  2005	  2035	  2222	  2559	  2669	  2777	  2779	  2781	  2783	  2785	  2787	  2789
	  2791
S$NONA	   625	   754	   757	   888	  2005	  2035	  2222	  2559	  2669	  2777	  2779	  2781	  2783	  2785
	  2787	  2789	  2791
S$PATC	   624
S$STOP	   624	   625
S$TEMP	   624#	   624	   750#	   750	   888#	   888	  2005#	  2005	  2035#	  2035	  2222#	  2222	  2559#	  2559
	  2669#	  2669	  2777#	  2777	  2779#	  2779	  2781#	  2781	  2783#	  2783	  2785#	  2785	  2787#	  2787
	  2789#	  2789	  2791#	  2791
S$XCT	   625	   757	   888	  2005	  2035	  2222	  2559	  2669	  2777	  2779	  2781	  2783	  2785	  2787
	  2789	  2791
SAVITM	  2726	  2731	  2733	  3092#
SAXBAS	   348%	   356
SAXN	   348%	   356
SCNCHG	  1621	  1667	  1671#
SCNCMD	  1205	  1304	  1305#
SCNTYP	  1533	  1575	  1579#
SERIAL	    36%	   966	  1167%	  1167	  1172%	  1172
SETM2P	  2197#	  2647
SIDLST	    59%	  1832
SIREQ	    24%	  2200
SISWT	    24%	  2201	  2242
SIZCHG	  1665#	  1666	  1667
SIZCMD	  1303#	  1303	  1304
SIZIRG	   348%	   348
SIZME1	  2312#	  2317
SIZMEM	  2249	  2308#	  2452
SIZOK	  2577	  2587#
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

SIZONC	  3348
SIZORG	   348%	   350
SIZTYP	  1573#	  1574	  1575
SNDPGY	    58%
SODLST	    59%	  1831
SPCBL1	  2169#	  2183
SPCBL2	  2178	  2184#
SPCBLN	  2143	  2153	  2167#
SPCCMW	    95
SPCF11	  3069
SPCINI	    84%	    84
SPCMTD	    96	    98
SPCMTI	  3043	  3071	  3097
SRPNDS	  2388%	  2388	  2393%	  2393	  2424%	  2424
STATES	    36%	   984%	   984	  2396	  2751
STAUTO	  2395	  2750
STRBTS	  2389%	  2389	  2394%	  2394	  2425%	  2425
STRDDB	  2389%	  2389	  2394%	  2394	  2425%	  2425
STSUPR	  2395
SUPTYC	  3006	  3021#	  3060	  3102
SUPTYP	  3005	  3020#	  3061	  3104	  3115
SYMBK0	   910#	   914
SYS0	  2594	  2601#
SYS0A	  2617#
SYS1	  2620#	  2634
SYS2W	  2629	  2633#
SYSBEG	    21%	  2602	  2603	  2604
SYSBTS	  1178%	  1178	  1301%	  1301
SYSDAT	    49%	  1753
SYSDDT	   509%	   509	  2447%	  2447
SYSDRB	   395%	  2745
SYSDSP	   390%	   390	   918%	   918	  1061%	  1061	  2697%	  2697
SYSEND	    21%	  2606
SYSNUM	  1723	  1738	  1748	  1776%	  1791
SYSPDL	    82%	    82	   896%	   896	   922%	   922	  1063%	  1063	  2694%	  2694	  2721%	  2721
SYSSIZ	  1075	  1980	  2092	  2113	  2122	  2131	  2445%	  2445	  2648
SYSSZP	    17%	  2460	  2470	  2474	  2516	  2523	  2529	  2536	  2542	  2553	  2650	  2674
SYSUDT	  2888%	  2888
SYSZRO	   514#
T1	    73	    74	    75	    76	    77	    78	   107	   109	   111	   112	   207	   217	   259	   263
	   275	   276	   277	   283	   287	   289	   290	   295	   297	   307	   311	   313	   314	   315
	   317	   319	   320	   321	   348	   350	   352	   354	   356	   358	   365	   366	   368	   369
	   372	   377	   378	   381	   382	   389	   390	   431	   434	   435	   437	   440	   441	   443
	   448	   452	   457	   458	   460	   465	   471	   478	   479	   489	   491	   495	   498	   506
	   507	   508	   509	   510	   511	   515	   516	   517	   518	   519	   520	   521	   537	   539
	   546	   547	   548	   549	   550	   551	   552	   553	   559	   560	   563	   568	   572	   574
	   618	   619	   620	   622	   625	   626	   628	   630	   631	   632	   897	   898	   899	   900
	   901	   904	   905	   906	   909	   913	   916	   917	   918	   926	   927	   929	   930	   932
	   933	   934	   936	   937	   938	   940	   941	   942	   946	   948	   949	   962	   963	   965
	   966	   967	   973	   974	   975	   976	   977	   978	   979	   980	   981	   983	   985	   986
	   987	   988	   989	   990	   991	   992	   993	   994	   998	   999	  1001	  1002	  1003	  1007
	  1008	  1019	  1023	  1024	  1060	  1061	  1070	  1071	  1072	  1073	  1074	  1075	  1156	  1157
	  1158	  1160	  1161	  1166	  1167	  1169	  1172	  1175	  1179	  1186	  1190	  1199	  1212	  1541
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

	  1613	  1629	  1711	  1720	  1724	  1728	  1729	  1730	  1731	  1732	  1739	  1740	  1742	  1744	  1745
	  1749	  1750	  1752	  1753	  1756	  1757	  1758	  1759	  1762	  1763	  1764	  1767	  1768	  1769
	  1780	  1781	  1782	  1785	  1786	  1787	  1788	  1795	  1796	  1798	  1801	  1802	  1804	  1806
	  1807	  1808	  1833	  1838	  1844	  1845	  1846	  1850	  1854	  1856	  1898	  1913	  1917	  1918
	  1921	  1932	  1942	  1943	  1980	  1981	  1994	  1996	  1998	  1999	  2001	  2002	  2003	  2004
	  2006	  2007	  2009	  2010	  2011	  2012	  2013	  2015	  2036	  2037	  2038	  2045	  2048	  2082
	  2085	  2087	  2088	  2089	  2090	  2091	  2092	  2114	  2115	  2116	  2117	  2118	  2122	  2123
	  2124	  2125	  2130	  2131	  2159	  2160	  2167	  2170	  2224	  2225	  2226	  2227	  2228	  2229
	  2232	  2233	  2234	  2235	  2236	  2237	  2239	  2240	  2241	  2242	  2243	  2244	  2254	  2255
	  2256	  2262	  2264	  2267	  2276	  2277	  2278	  2279	  2281	  2284	  2311	  2314	  2315	  2316
	  2324	  2325	  2326	  2335	  2336	  2338	  2358	  2363	  2364	  2368	  2369	  2370	  2371	  2388
	  2389	  2393	  2394	  2395	  2396	  2415	  2416	  2417	  2418	  2424	  2425	  2428	  2437	  2444
	  2445	  2446	  2447	  2448	  2449	  2475	  2476	  2480	  2487	  2498	  2499	  2500	  2501	  2509
	  2510	  2511	  2519	  2520	  2521	  2523	  2524	  2525	  2526	  2527	  2529	  2530	  2531	  2532
	  2533	  2534	  2536	  2537	  2538	  2539	  2540	  2542	  2543	  2544	  2545	  2546	  2547	  2548
	  2549	  2550	  2551	  2553	  2554	  2557	  2558	  2560	  2562	  2566	  2571	  2572	  2573	  2574
	  2575	  2576	  2582	  2587	  2595	  2596	  2602	  2603	  2606	  2617	  2618	  2620	  2640	  2641
	  2643	  2651	  2653	  2654	  2655	  2656	  2659	  2663	  2667	  2668	  2670	  2671	  2672	  2673
	  2696	  2697	  2730	  2731	  2750	  2751	  2753	  2847	  2848	  2886	  2887	  2889	  2891	  2900
	  2901	  2927	  2933	  2940	  2942	  2944	  2945	  2946	  2947	  3023	  3025	  3038	  3039	  3118
	  3124	  3125	  3144	  3148	  3150
T2	   209	   212	   213	   214	   260	   261	   262	   263	   264	   265	   266	   268	   269	   270
	   271	   272	   274	   275	   276	   277	   279	   284	   285	   287	   288	   289	   291	   292
	   298	   299	   300	   301	   302	   303	   306	   318	   319	   363	   365	   430	   455	   479
	   480	   490	   493	   494	   496	   499	   562	   563	   564	   565	   567	   573	   576	   578
	   618	   619	   621	   623	   625	   633	   887	   889	   891	   902	   903	   904	   908	   911
	   913	   914	   916	   982	   984	  1019	  1020	  1021	  1022	  1159	  1160	  1162	  1184	  1735
	  1748	  1779	  1784	  1785	  1791	  1792	  1801	  1803	  1830	  1835	  1836	  1837	  1850	  1852
	  1859	  1860	  1861	  1862	  1863	  1865	  1866	  1867	  1868	  1869	  1871	  1872	  1873	  1874
	  1875	  1876	  1878	  1879	  1880	  1881	  1882	  1884	  1885	  1886	  1887	  1888	  1889	  1890
	  1891	  1892	  1893	  1895	  1896	  1899	  1900	  1901	  1902	  1904	  1911	  1923	  1930	  1957
	  1958	  1959	  1962	  1998	  2003	  2008	  2010	  2013	  2014	  2073	  2074	  2075	  2076	  2077
	  2080	  2081	  2082	  2083	  2104	  2106	  2107	  2108	  2110	  2111	  2113	  2134	  2135	  2137
	  2197	  2198	  2199	  2200	  2201	  2202	  2203	  2204	  2205	  2206	  2207	  2208	  2209	  2210
	  2213	  2214	  2215	  2216	  2217	  2218	  2219	  2220	  2223	  2225	  2229	  2238	  2239	  2241
	  2343	  2344	  2345	  2346	  2472	  2486	  2487	  2490	  2491	  2496	  2497	  2498	  2515	  2516
	  2560	  2561	  2562	  2567	  2568	  2569	  2622	  2632	  2648	  2649	  2650	  2652	  2653	  2659
	  2660	  2661	  2662	  2663	  2664	  2665	  2666	  2676	  2681	  2686	  3024
T3	    89	    94	    95	   105	   108	   110	   206	   208	   209	   212	   213	   214	   218	   221
	   222	   223	   290	   291	   292	   297	   301	   364	   367	   369	   370	   373	   454	   455
	   458	   496	   499	   574	   575	   576	   577	   627	   629	   630	   905	   906	   908	   909
	   910	   912	  1163	  1754	  1756	  1762	  1768	  1853	  1854	  1906	  1916	  1925	  1929	  1933
	  1934	  1935	  1937	  1938	  1953	  1954	  1960	  1962	  1963	  2040	  2041	  2042	  2044	  2047
	  2110	  2114	  2136	  2137	  2138	  2146	  2147	  2148	  2149	  2154	  2155	  2174	  2176	  2184
	  2341	  2342	  2348	  2678	  2679	  2691	  2903	  2904	  2910	  2911	  2913	  2915	  2916	  2919
	  2921	  2922	  2925	  2926	  2927	  2928	  2930	  2932	  2933	  2940	  2951	  2953	  2958	  2960
	  2969	  2970	  2972	  2980	  2981	  2983	  2984	  2986	  2988	  2990	  2996	  2997	  2999	  3000
	  3001	  3002	  3003	  3004	  3014	  3015	  3027	  3028	  3036	  3037	  3046	  3047	  3053	  3054
	  3055	  3059	  3062	  3063	  3064	  3065	  3069	  3107	  3110	  3111	  3114	  3119	  3120	  3121
	  3123	  3129	  3130	  3132	  3134	  3138	  3139	  3140	  3143	  3146	  3149
T4	   370	   371	   372	   387	   486	   488	   489	   885	   886	   887	   890	   891	   892	   910
	   911	  1755	  1759	  1767	  1778	  1780	  1786	  1808	  1922	  1924	  1931	  1939	  1945	  1955
	  1956	  1964	  2030	  2031	  2033	  2034	  2036	  2039	  2040	  2043	  2046	  2047	  2083	  2084
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

	  2139	  2156	  2173	  2175	  2454	  2677	  2685
TBL%%%	   276	   277	   425#
TBLLNP	   268	   269	   270	   275	   287	   295	   405#
TBLLNR	   290	   419#
TBLNEW	   297	   411#
TBLSTT	   289	   418#
THSDAT	    49%	  1157
TI.ITD	   100
TICSEC	   974%	   974
TIM	    92	    93	   100	   102	   556	  2846	  2862
TIME	    49%	  1158
TIMZON	  2889%	  2889
TMPINI	  2743%	  2743
TO.CIT	    92	   556	  2846
TO.CTD	   102	   556	  2846	  2862
TO.SIT	    93	   102	  2862
TO11DB	    97
TPOPJ	  2375	  3142	  3145	  3150#
TTCMCH	    45%	  2904	  3111
TTYATC	  2617
TTYINI	  2695%	  2695
TXTCHG	  1666	  1692#
TXTCMD	  1303	  1432#
TXTTYP	  1574	  1596#
TYI1	  2909	  3052	  3069#
TYPCMD	  1195#	  1538	  1544
TYPCOR	  1564	  1719#
TYPHL1	  1541#	  1543
TYPHLP	  1540#	  1571
TYPIT	  1288	  1531#
TYPONL	    29%	  1531	  1619
TYPSYS	  1567	  1723#
U	   295	   296	   304	  1008	  1009	  1011	  1012	  1013	  1014	  1016	  1021	  2757
UPGTB0	   867#	   929
UPGTBT	   866#	   926
UPSJOB	    17%	   943
UPT	    36%	   547	   549	   551	   866	   927	   933	   949	  2342	  2348	  2856	  2857	  2858	  2859
UPT.PN	    36%	   377	   545	   876	   941	  2640
UPTAC0	    36%	   879
UPTACP	    36%	   949
UPTHEC	  2856
UPTHMC	  2858
UPTKNT	   547
UPTKTR	   551
UPTLEC	  2857
UPTLMC	  2859
UPTNPP	   549	   933	   934	  2342	  2348
UPTPC	    36%
UPTPGT	   866	   867
UPTPTR	   927	   930
UPTSET	   866	   867	  2793#
USE.N	    57%	  1924	  2168
USELST	    57%	  1830	  1927	  1940	  2127	  2157
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

USRACB	   554	   570	   879
USRLIM	    49%	  3091
USRMAX	    60%	  2656
USRMPE	    37%	  2793
USYPTN	    23%	   946
UUOCNT	    38%	  2805
UUOCTR	    38%	  2806
UUOKNT	    38%	   546	  2801
UUOKTR	    38%	   550	  2802
UUOPNT	    39%	  2807
UUOPTR	    39%	  2808
UUOSNT	    38%	  2803
UUOSTR	    38%	  2804
VPMAX	  2660	  2661
W	  2675	  2684	  2692
W2PLSH	   435	   441	  1849	  1956	  2038	  2039	  2126
XTYI	  2907	  3095#	  3099
XTYO	  2924	  2931	  2941	  2952	  2954	  2959	  2971	  2982	  2985	  2987	  2989	  3048	  3118#	  3131
	  3133	  3147
YESNO	  1177	  3009#
ZZ	   566#	   566	   567#	   567
ZZ1	   566#	   566	   567#	   567
$1B	  2426%	  2426
$XZ	  1376#	  1376	  1380	  1380#	  1384	  1384#	  1389	  1389#	  1392	  1392#	  1398	  1398#	  1402	  1402#
	  1404	  1404#	  1406	  1406#	  1411	  1411#	  1416	  1416#	  1419	  1419#	  1423	  1423#	  1427	  1427#
	  1429	  1429#	  1432	  1432#	  1438	  1439	  1439#	  1444	  1445	  1445#	  1451	  1452	  1452#	  1456
	  1457	  1457#	  1464	  1465	  1465#	  1470	  1471	  1471#	  1474	  1475	  1475#	  1478	  1479	  1479#
	  1485	  1486	  1486#	  1492	  1493	  1493#	  1497	  1498	  1498#	  1503	  1504	  1504#	  1509	  1510
	  1510#	  1513	  1514	  1514#	  1526	  1527	  1527#	  1589#	  1589	  1591	  1591#	  1593	  1593#	  1596
	  1596#	  1599	  1600	  1600#	  1603	  1604	  1604#	  1608	  1609	  1609#	  1683#	  1683	  1685	  1685#
	  1689	  1689#	  1692	  1692#	  1695	  1696	  1696#	  1701	  1702	  1702#	  1706	  1707	  1707#
%BAT	   837
%BAT.N	   853
%BAT.P	   796	   796#	   799	   822
%CTLRU	    22%	  2138	  2148	  2149
%CTLST	    22%	  2141	  2151	  2152
%CTMRU	    22%	  2146	  2154	  2155
%ERR	  2337	  2343	  2344	  2345	  2346
%ERR.N	  2336
%HMR	   834
%HMR.N	   850
%HMR.P	   784	   784#	   787	   819
%HOM	   833
%HOM.N	   849
%HOM.P	   780	   780#	   783	   818
%MIN	  1955	  1969	  1996	  2001	  2088	  2089	  2091
%O	   759#
%ONC	   392	   425	   749	   759	  1953	  1955	  3345
%ONC.N	   411	  1968
%OND	    74	    76	    78	   392	   426
%OND.N	   412
%RB2.C	    22%	  2149	  2152	  2155
%REF	   392	   427
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Symbol cross reference

%REF.N	   413
%RIB.C	    22%	  2148	  2151	  2154
%SAT.C	    22%	  2138	  2141	  2146
%STA	   835
%STA.N	   851
%STA.P	   788	   788#	   791	   820
%STR	   836
%STR.N	   852
%STR.P	   792	   792#	   795	   821
%T2P	   839
%T2P.N	   855
%T2P.P	   804	   804#	   824
%TMP	   838
%TMP.N	   854
%TMP.P	   800	   800#	   803	   823
%UPS	    23%
%UPT	    23%	   879
.CPCPU	  1166%	  1166	  1798%	  1798
.CPDDT	  2449%	  2449
.DTCTO	    94
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Macro/Opdef cross reference

APRID	   962	  1795
CLRPT	  2337
CLRPTA	   383	   388	   947	  1914	  1965	  2049
CLRPTO	  2337
EPTPGP	   411	   412	   413	  2336
EPTPGS	   411	   412	   413	   849	   850	   851	   852	   853	   854	   855	  2336
EPTPTR	  1968	  1969
EXECAC	   554	   570
EXIT	   522
IFCPU	    19	    35	    83	    90	    91	   104	   220	   312	   332	   344	   346	   361	   375	   379
	   526	   527	   530	   540	   555	   571	   583	   610	   612	   862	   875	   878	   924	   928
	   939	   945	   951	   957	   968	  1000	  1026	  1076	  1147	  1152	  1165	  1741	  1793	  2292
	  2293	  2308	  2309	  2319	  2320	  2339	  2481	  2482	  2503	  2504	  2609	  2635	  2702	  2707
	  2711	  2713	  2746	  2747	  2809	  2820	  2842	  2866	  2906	  2908	  2909	  3040	  3042	  3043
	  3044	  3051	  3052	  3068	  3076	  3096	  3097	  3098
IFKMC	  1302	  1363	  1429	  1515	  2257	  2379	  2399	  2737
IFNCPU	    20	    40	    41	   204	   316	   376	   380	   614	   876	   879	   925	   927	   931	   940
	   944	   961	  1743	  1794	  2340	  2347	  2639	  2748	  2805
MKCHG	  1635#	  1651	  1671	  1683	  1692
MKCMD	  1219#	  1288	  1305	  1376	  1432
MKTYP	  1547#	  1561	  1579	  1589	  1596
NDL	  2294
NXM.NO	  2302#	  2319	  2503
NXM.OK	  2297#	  2308	  2481
ONSZCK	  3348
OPCNAM	   780	   818	   833	   849
PFALL	  1088	  2419	  2461	  2555	  2698
PJRST	  1721	  1725	  1799	  2250	  2328	  2352	  2375
PXCT	   566	   567
PXGEN	   566	   567
SCAN	  1092#	  1205	  1532	  1620
SCNTB	  1107#	  1287	  1556	  1646
STOPCD	   624	   750	   888	  2005	  2035	  2222	  2559	  2669	  2777	  2779	  2781	  2783	  2785	  2787
	  2789	  2791
SWPIA	   531
TBLS	   398#	   405	   411	   419	   425
UNCACH	   333#	   347
WRADB	   536
WRAPR	   205	   453	   528	   534	   923	   925	  1148	  2308	  2319	  2340	  2350	  2481	  2503	  2708
	  2709
WREBR	   544
WRFIL	   577
WRPAE	  2854
WRPI	   529	  1150	  2710	  2748
WRUBR	   545	   564	   944	  2855
X	   323#	   348	   350	   352	   354	   356	   358	   404#	   405	   406	   407	   410#	   411	   412
	   413	   417#	   419	   420	   421	   424#	   425	   426	   427	   771#	   780	   784	   788	   792
	   796	   800	   804	   814#	   818	   819	   820	   821	   822	   823	   824	   831#	   833	   834
	   835	   836	   837	   838	   839	   846#	   849	   850	   851	   852	   853	   854	   855	  1287#
	  1288	  1289	  1290	  1291	  1292	  1293	  1294	  1295	  1296	  1297	  1298	  1299	  1300	  1301
	  1302	  1305#	  1307	  1311	  1315	  1320	  1323	  1330	  1334	  1337	  1339	  1344	  1349	  1352
	  1356	  1361	  1371	  1376#	  1376	  1380	  1384	  1389	  1392	  1398	  1402	  1404	  1406	  1411
	  1416	  1419	  1423	  1427	  1429	  1432#	  1434	  1440	  1446	  1453	  1458	  1466	  1472	  1476
ONCE - ONCE ONLY INITIALIZATION AND OPERATOR DIALOGUE	MACRO 12.5-46.0 14:41 13-JAN-88
ONCE.MAC	11-NOV-87 13:48		Macro/Opdef cross reference

	  1480	  1487	  1494	  1499	  1505	  1511	  1523	  1557#	  1562	  1565	  1568	  1577#	  1580	  1582	  1584
	  1589#	  1589	  1591	  1593	  1596#	  1597	  1601	  1605	  1647#	  1652	  1655	  1660	  1669#	  1672
	  1674	  1678	  1683#	  1683	  1685	  1689	  1692#	  1693	  1697	  1703	  3348#
XCTBU	   566	   567
XZ$	  1376#	  1376	  1380	  1384	  1389	  1392	  1398	  1402	  1404	  1406	  1411	  1416	  1419	  1423
	  1427	  1429	  1432#	  1438	  1444	  1451	  1456	  1464	  1470	  1474	  1478	  1485	  1492	  1497
	  1503	  1509	  1513	  1526	  1589#	  1589	  1591	  1593	  1596#	  1599	  1603	  1608	  1683#	  1683
	  1685	  1689	  1692#	  1695	  1701	  1706 |K?4