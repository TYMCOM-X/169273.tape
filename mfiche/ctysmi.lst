CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 1
S.MAC	13-JAN-88 11:55		S.MAC - with system parameter file for P035/D, January 1988

     1				SUBTTL	S.MAC - with system parameter file for P035/D, January 1988
     2
     3				IF2,<IFNDEF LISTSN,<TAPE>>	;Skip to PASS2 in all but COMMON.LST
     4				;THIS MODULE ASSEMBLED WITH KI-10 PARAMETER FILE - KISYM.MAC
     5
     6					IF2,<IFNDEF LISTSN,<		;LIST KISYM.MAC IN COMMON ONLY
     7								TAPE>>
     8				TITLE CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE
     9
    10					STOPCD(,ENTRY,CTYSIM)^
    11					ENTRY	CTYSIM		;For library searches
    12	000000'	260040	000000*	CTYSIM::PUSHJ	P,DIE		;**** Default stopcode for "CTYSIM" ****
    13	000001'	436471	635155		SIXBIT	/CTYSIM/  	;Title of module
    14	000002'	000000	000000		S$NONAME,,0		;?NONAME stopcode "CTYSIM+nnn(nnnnnn)"
    15			000000'	S$NAME==CTYSIM			;For STOPCDs with no arguments
    16					SALL>
    17				^
    18
    19				IFKMC<	BYP1==^D9	;RIGHTMOST BIT POSITION OF FIRST BYTE
    20					BYP2==^D17	;      SECOND BYTE OF A BUFFER RING WORD
    21					BYP3==^D27	;      THIRD BYTE
    22					BYP4==^D35	;      LAST BYTE POSITION IN A BUF RING WORD
    23					OPDEF	UUILDB	[101000,,0]	;KMC ILDB
    24					OPDEF	UUIDPB	[102000,,0]	;KMC IDPB
    25					DEFINE	TYPI(TYPE)		;FOR LOADING TYPES WITH A
    26					<TYPE_^D8>			;	MOVSI INSTR
    27				>;END IFKMC
    28			000007	IFNKMC<	BYP1==^D7	;RIGHTMOST BIT POSITION OF FIRST BYTE
    29			000017		BYP2==^D15	;      SECOND BYTE OF A BUFFER RING WORD
    30			000027		BYP3==^D23	;      THIRD BYTE
    31			000037		BYP4==^D31	;      LAST BYTE POSITION IN A BUF RING WD
    32					OPDEF	UUILDB	[ILDB 0]	;NORMAL ILDB
    33					OPDEF	UUIDPB	[IDPB 0]	;NORMAL IDPB
    34					DEFINE	TYPI(TYPE)		;FOR LOADING TYPES WITH A
    35					<TYPE_^D10>			;	MOVSI INSTR
    36				>;END IFNKMC
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 2
CTYSIM.MAC	20-SEP-87 13:00		S.MAC - with system parameter file for P035/D, January 1988

    37				;THIS ROUTINE IS LINKED INTO THE CHANNEL 7 CODE TO MAKE
    38				;SURE THAT THE CTY IS STARTED ON OUTPUT
    39
    40	000003'	332000	000767'	CH7LK::	SKIPE	CTYACT		;IS THE CTY ACTUALLY DOING OUTPUT
    41	000004'	254000	000004'		 JRST	.		;YES, CONTINUE DOWN CHAIN (FIXUP DONE LATER)
    42	000005'	202300	000770'		MOVEM	T1,CH7SVT	;A PLACE TO SAVE AN AC
    43	000006'	200300	000000*		MOVE	T1,ORPPDP
    44	000007'	312300	000000*		CAME	T1,ORP620
    45				IFCPU (<KS,KL>),<
    46					JRST	[SETOM CTYSTF	;SET SOFTWARE FLAG FOR "CONSO"
    47						 WRPI LI.REQ+<1B35>_<7-6> ;REQUEST IRP ON CH6
    48						 JRST .+1]
    49				>;KSKL
    50	000010'	712200	000016	IFCPU (<KI,F3>),<CONO TTY,TT.SOD+6>	;TTY INACTIVE AND OUTPUT RING NON-
    51								;EMPTY. START TTY. CAUSE INTERRUPT
    52	000011'	200300	000770'		MOVE	T1,CH7SVT
    53	000012'	254000	000004'		JRST	CH7LK+1		;AND CONTINUE
    54
    55				;THIS ROUTINE IS LINKED INTO CH6 TO HANDLE TTY INTERUPTS
    56
    57				IFCPU (<KI,F3>),<
    58	000013'	712340	000050	CH6LK::	CONSO	TTY,TT.OD!TT.ID	;IS EITHER OUTPUT OR INPUT DONE?
    59	000014'	254000	000014'		 JRST	.
    60	000015'	202440	001004'		MOVEM	T4,CTSV+T4	;Save S,P,T1-T4
    61	000016'	201440	000773'		MOVEI	T4,CTSV
    62	000017'	251440	001003'		BLT	T4,CTSV+T4-1	;SAVE ACS
    63	000020'	200040	001026'		MOVE	P,[-20,,RETCTP]	;AND SET PUSHDOWN POINTER
    64	000021'	712340	000040		CONSO	TTY,TT.ID	;IS IT INPUT
    65	000022'	254000	000201'		 JRST	CTYOUT		;NO, HANDLE OUTPUT
    66	000023'	712040	000006		DATAI	TTY,T1		;READ
    67					PFALL	CH6LK1
    68				>;END IFCPU (<KI,F3>)
    69
    70				IFCPU (KL),<
    71				CH6LK::	CONSO	DTE,TO10DB	;DOORBELL FROM -11?
    72					 JRST	.		;NO, NEXT  PLEASE.
    73					CONO	DTE,CL11PT	;CLEAR IT NOW SO DON'T MISS ANOTHER (KLDCP DOESNT WAIT FOR IT T
    74				O CLEAR)
    75					MOVEM	T4,CTSV+T4	;SAVE AC'S
    76					MOVEI	T4,CTSV
    77					BLT	T4,CTSV+T4-1
    78					MOVE	P,[-20,,RETCTP]
    79					SETZ	T1,		;NOW CHECK FOR INPUT
    80					EXCH	T1,EPT+SPCMTI
    81					JUMPE	T1,CH6LK0	;NO INPUT, TRY OUTPUT
    82					MOVE	T1,EPT+SPCF11	;PICK UP INPUT CHAR
    83					ANDI	T1,377
    84					PUSHJ	P,CH6LK1	;DO INPUT PROCESSING
    85				CH6LK0:	SKIPE	T1,EPT+SPCMTD	;OUTPUT DONE?
    86					 JRST	CTYOUT		;GO IF YES
    87					POPJ	P,		;ELSE RETURN.
    88				>;END IFCPU (KL)
    89
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 2-2
CTYSIM.MAC	20-SEP-87 13:00		S.MAC - with system parameter file for P035/D, January 1988

    90				IFCPU (KS),<
    91				CH6LK::	SKIPN	CTYINF		;DID FRONT END INTERRUPT?
    92					 JRST	.		;NO,NEXT PLEASE
    93					WRPI	LI.CPP+<1B35>_<7-6>	;CLEAR INTERRUPT ON CHANNEL 6
    94					MOVEM	T4,CTSV+T4	;SAVE ACS
    95					MOVEI	T4,CTSV
    96					BLT	T4,CTSV+T4-1
    97					MOVE	P,[-20,,RETCTP]	;AND SET PUSH DOWN POINTER
    98					SETZM	CTYINF		;CLEAR SOFTWARE FLAG
    99					SETZ	T1,
   100					EXCH	T1,CTYIWD##	;SEE IF ANY INPUT
   101					TRNN	T1,CTYIVL	;SKIP IF VALID CHAR
   102					 JRST	CH6LK0		;IF NOT GO CHECK FOR VALID OUTPUT
   103					ANDI	T1,CTYICH	;GET CHAR ONLY
   104					PUSHJ	P,CH6LK1	;DO INPUT PROCESSING
   105				CH6LK0:	SKIPN	T1,CTYOWD##	;CHECK IF OUTPUT DONE
   106					 JRST	CTYOUT		;YES,GO CHECK FOR MORE OUTPUT
   107					POPJ	P,
   108				
   109				CTYINF::0			;CTY INTERRUPT FLAG
   110				>;END IFCPU (KS)
   111
   112	000024'	332000	000762'	CH6LK1:	SKIPE	CTLZFL		;IS THIS THE CHR AFTER ^Z
   113	000025'	254000	000063'		 JRST	CTLZH		;YES, SPECIAL ACTION
   114	000026'	302300	000032		CAIE	T1,"Z"-100	;IS IT ^Z
   115	000027'	306300	000232		CAIN	T1,"Z"-100+200	;OTHER PARITY CONTROL Z
   116	000030'	254000	000111'		 JRST	CTLZN		;YES
   117	000031'	336000	000757'	NRMCH:	SKIPN	NOWIN		;IS THIS PORT LOGGED IN
   118	000032'	263040	000000		 POPJ	P,		;NO, RETURN
   119	000033'	201240	000000*		MOVEI	U,CTYLDB##	;ALWAYS PORT 0
   120	000034'	135340	000000*		LDB	T2,LDSRXE##	;ENABLED FOR REVERSE XON?
   121	000035'	322340	000044'		JUMPE	T2,NRMCH1	;JUMP IF NOT.
   122	000036'	200340	000006		MOVE	T2,T1		;YES, MUST CHECK FOR ^Q OR ^S
   123	000037'	405340	000177		ANDI	T2,177
   124	000040'	306340	000021		CAIN	T2,"Q"-100
   125	000041'	254000	000147'		 JRST	BKPOFF
   126	000042'	306340	000023		CAIN	T2,"S"-100
   127	000043'	254000	000156'		 JRST	BKPON
   128	000044'	205340	402040	NRMCH1:	MOVSI	T2,(BYTE (8)201,10)
   129	000045'	137300	001027'		DPB	T1,[POINT 8,T2,23]	;PUT IN THE CHR
   130	000046'	260040	000165'		PUSHJ	P,DEPO		;STORE IN INPUT RING
   131	000047'	263040	000000		  POPJ	P,		;COULD NOT STORE, IGNORE
   132	000050'	263040	000000		POPJ	P,		;FINISHED WITH INTERUPT
   133
   134				IFCPU (<KS,KL>),<
   135				CH6KST::SKIPN	CTYSTF		;CH7 WANT US TO LOOK AT OUTPUT RING?
   136					 JRST	.		;NO.
   137					WRPI	LI.CPP+<1B35>_<7-6> ;YES. CLEAR PROGRAM REQUEST
   138					SETZM	CTYSTF		;AND SOFTWARE FLAG
   139					MOVEM	T4,CTSV+T4	;SAVE T4
   140					MOVEI	T4,CTSV
   141					BLT	T4,CTSV+T4-1
   142					MOVE	P,[-20,,RETCTP]
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 2-3
CTYSIM.MAC	20-SEP-87 13:00		S.MAC - with system parameter file for P035/D, January 1988

   143					JRST	CTYOUT		;GO DO OUTPUT RING PROCESSING.
   144				
   145				CTYSTF:0
   146				>;END IFCPU (<KS,KL>)
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 3
CTYSIM.MAC	20-SEP-87 13:00		Special input from the CTY routines

   147				SUBTTL	Special input from the CTY routines
   148
   149	000051'	332000	000761'	CTYINP::SKIPE	CTYDO		;If CTY is a normal port
   150	000052'	263040	000000		 POPJ	P,		; then let CTLZH do the checking
   151				IFCPU (<KI,F3>),<
   152	000053'	712340	000040		CONSO	TTY,TT.ID	;KI,KA,F3 - test for input done
   153	000054'	263040	000000		 POPJ	P,		;Nothing there
   154	000055'	712040	000010		DATAI	TTY,T3
   155				>
   156				IFCPU (KL),<
   157					SETZ	T3,		;Check for secondary protocol input
   158					EXCH	T3,EPT+SPCMTI	;Get flag and zero it
   159					JUMPE	T3,CPOPJ	;Nothing there
   160					MOVE	T3,EPT+SPCF11	;Pick up input character
   161				>
   162				IFCPU (KS),<
   163					SETZ	T3,		;KS test for input
   164					EXCH	T3,CTYIWD	;Get character and zero it
   165					TRNN	T3,CTYIVL	;Check if input valid is set
   166					 POPJ	P,		;Nothing there
   167				>
   168	000056'	405400	000377		ANDI	T3,377		;8 bits of character
   169	000057'	302400	000032		CAIE	T3,"Z"-100	;Check for Control-Z when not in CONSOLE mode
   170	000060'	306400	000232		CAIN	T3,"Z"-100+200	;Either parity
   171	000061'	254000	000067'		 JRST	CTYBRK		;Go to the break point
   172	000062'	254000	000000*		JRST	CPOPJ1		;Got a character in T3
   173
   174				;Control-Z handler (when in CONSOLE mode)
   175
   176	000063'	405300	000177	CTLZH:	ANDI	T1,177		;Get the character that followed ^Z
   177	000064'	402000	000762'		SETZM	CTLZFL
   178	000065'	302300	000142		CAIE	T1,"b"		; accept upper and lower case!
   179	000066'	306300	000102		CAIN	T1,"B"
   180	000067'	263040	000000	CTYBRK::  POPJ	P,		;Use 1^B in EDDT to set breakpoint here
   181	000070'	306300	000077		CAIN	T1,"?"		; needs help?
   182					 JRST	[MOVE T1,[POINT 7,[ASCIZ /
   183				
   184				CTYSIM commands (prefix with CTRL-Z)
   185				
   186				    ?   This message
   187				    B   Break-point
   188				    H   Hangup
   189				    L   Login
   190				    O   Toggle ^O
   191				    1   Set fill
   192				
   193				/]]
   194						MOVEM	T1,STRFLG
   195	000071'	254000	001071'			PJRST	CTYOUT]
   196	000072'	302300	000157		CAIE	T1,"o"
   197	000073'	306300	000117		CAIN	T1,"O"
   198					 PJRST	[SETCMM CTLOFG
   199	000074'	324740	001074'			POPJ P,]
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 3-2
CTYSIM.MAC	20-SEP-87 13:00		Special input from the CTY routines

   200	000075'	302300	000154		CAIE	T1,"l"
   201	000076'	306300	000114		CAIN	T1,"L"
   202	000077'	324740	000116'		 PJRST	LOGIN		;SIMULATE A LOGIN
   203	000100'	302300	000150		CAIE	T1,"h"
   204	000101'	306300	000110		CAIN	T1,"H"
   205	000102'	324740	000142'		 PJRST	HNGUP		;SIMULATE A HANGUP
   206	000103'	301300	000060		CAIL	T1,"0"
   207	000104'	303300	000071		CAILE	T1,"9"
   208	000105'	324740	000031'		 PJRST	NRMCH		;JUST INPUT CHR
   209	000106'	275300	000060		SUBI	T1,"0"
   210	000107'	202300	000772'		MOVEM	T1,CTYFIL	;USE FOR FILL
   211	000110'	263040	000000		POPJ	P,
   212
   213	000111'	476000	000762'	CTLZN:	SETOM	CTLZFL		;JUST SET FLAG
   214	000112'	263040	000000		POPJ	P,
   215
   216	000113'	205440	000773'	RETCT:	MOVSI	T4,CTSV
   217	000114'	251440	000011		BLT	T4,T4
   218	000115'	254000	000014'		JRST	CH6LK+1		;THIS IS THE INTERUPT DISMISS
   219
   220	000116'	332000	000757'	LOGIN:	SKIPE	NOWIN		;IS IT ALREADY LOGGED IN?
   221	000117'	263040	000000		 POPJ	P,		;YES, IGNORE
   222	000120'	205340	014040		MOVSI	T2,(BYTE (8) 6,10)	; LOGIN TO PORT 10
   223	000121'	200300	000000*		MOVE	T1,SYSNUM##	;Our host number
   224	000122'	242300	000004		LSH	T1,4		;Put in 3rd and 4th byte position
   225	000123'	434340	000006		IOR	T2,T1
   226	000124'	260040	000165'		PUSHJ	P,DEPO
   227	000125'	256000	000000'		 STOPCD
   228	000126'	200340	001076'		MOVE	T2,[BYTE (8)204,10,14,00]	; TIC = 14
   229	000127'	550300	000000*		HRRZ	T1,.CPLOG##	;Get base node number
   230	000130'	242300	777776		LSH	T1,4-6		;High order 6 bits
   231	000131'	434340	000006		IOR	T2,T1
   232	000132'	260040	000165'		PUSHJ	P,DEPO
   233	000133'	256000	000000'		 STOPCD
   234	000134'	135340	001077'		LDB	T2,[POINT 6,.CPLOG##,35]
   235	000135'	242340	000034		LSH	T2,^D<3*8+4>	;Low 6 bits of node number, line 0
   236	000136'	260040	000165'		PUSHJ	P,DEPO
   237	000137'	256000	000000'		 STOPCD
   238	000140'	476000	000757'		SETOM	NOWIN		;NOW ITS IN
   239	000141'	263040	000000		POPJ	P,
   240
   241	000142'	205340	026040	HNGUP:	MOVSI	T2,(BYTE (8) 13,10)
   242	000143'	332000	000757'		SKIPE	NOWIN		;IGNORE IF NOT LOGGED IN
   243	000144'	260040	000165'		 PUSHJ	P,DEPO		;ELSE TRY TO PUT IN INPUT RING
   244	000145'	255000	000000		  JFCL
   245	000146'	263040	000000		POPJ	P,
   246
   247	000147'	336000	000760'	BKPOFF:	SKIPN	BKPFLG		;IF ALREADY OFF,
   248	000150'	254000	000044'		 JRST	NRMCH1		;TREAT AS NORMAL CHAR.
   249	000151'	205340	022040		MOVSI	T2,(BYTE (8)11,10)
   250	000152'	260040	000165'		PUSHJ	P,DEPO
   251	000153'	263040	000000		  POPJ	P,		;DIDN'T TAKE.
   252	000154'	402000	000760'		SETZM	BKPFLG		;OK, TELL OUTPUT ROUTINE OK TO START AGAIN.
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 3-3
CTYSIM.MAC	20-SEP-87 13:00		Special input from the CTY routines

   253	000155'	324740	000201'		PJRST	CTYOUT		;GET OUTPUT STARTED AGAIN IF IN PROGRESS.
   254
   255	000156'	332000	000760'	BKPON:	SKIPE	BKPFLG		;IF ALREADY ON,
   256	000157'	254000	000044'		 JRST	NRMCH1		;TREAT AS NORMAL CHAR.
   257	000160'	205340	020040		MOVSI	T2,(BYTE (8)10,10)
   258	000161'	260040	000165'		PUSHJ	P,DEPO
   259	000162'	263040	000000		  POPJ	P,		;DIDN'T WORK
   260	000163'	476000	000760'		SETOM	BKPFLG		;TELL OUTPUT ROUTINE TO STOP
   261	000164'	263040	000000		POPJ	P,		;OK.
   262
   263	000165'	200400	000000*	DEPO:	MOVE	T3,IRP620
   264	000166'	271400	000001	DEPOC:	ADDI	T3,1
   265	000167'	405400	000000*		ANDI	T3,MSKIRG	;WE ENTER AT DEPOC WITH T3 SET
   266	000170'	316400	000165*		CAMN	T3,IRP620	;RING IS FULL IF SAME
   267	000171'	263040	000000		 POPJ	P,		;NON-SKIP RETURN IF FULL
   268				IFKMC<
   269					LSH	T2,-2		;SHIFT RIGHT 2
   270					HRRZ	T3,T2		;T3 = RIGHT HALF
   271					LSH	T3,-2		;SHIFT RIGHT HALF RIGHT 2 MORE BITS
   272					HRR	T2,T3		;T2 GETS NEW RIGHT HALF
   273				>;END IFKMC
   274	000172'	200400	000170*		MOVE	T3,IRP620
   275	000173'	202350	000000*		MOVEM	T2,IRING(T3)
   276	000174'	271400	000001		ADDI	T3,1
   277	000175'	405400	000167*		ANDI	T3,MSKIRG
   278	000176'	202400	000172*		MOVEM	T3,IRP620
   279	000177'	350001	000000		AOS	(P)
   280	000200'	263040	000000		POPJ	P,
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 4
CTYSIM.MAC	20-SEP-87 13:00		Special input from the CTY routines

   281				;Read from SCNSER's ORING and send to the CTY
   282	000201'	332000	000764'	CTYOUT:	SKIPE	STRFLG		;In the middle of a string?
   283	000202'	254000	000264'		 JRST	STRFIL
   284	000203'	332000	000765'		SKIPE	CTOPNT		;ARE WE PROCESSING A STRING OF CHRS?
   285	000204'	254000	000231'		 JRST	OSTCNT		;YES
   286	000205'	200440	000007*		MOVE	T4,ORP620	;GET OUTPUT RING POINTER
   287	000206'	405440	000000*	CTOLP:	ANDI	T4,MSKORG	;THIS IS THE CONTINUE POINT
   288	000207'	316440	000006*		CAMN	T4,ORPPDP
   289	000210'	254000	000253'		 JRST	CTDNO		;OUTPUT IS DONE, RING EMPTY
   290	000211'	135300	001100'		LDB	T1,[POINT 8,ORING(T4),BYP1]	;GET TYPE
   291	000212'	307300	000043		CAIG	T1,SZODS	;SEE IF A DISPATCH TYPE
   292	000213'	256006	000302'		 XCT	CTOSPC(T1)	;YES, EXECUTE ON TYPE
   293	000214'	626300	000200		TRZN	T1,200		;SHOULD BE A DATA TYPE THEN
   294	000215'	256000	001101'	CTYBMT:: STOPCD (.,STOP,CTYBMT,PRTIRG##,<Bad message type to CTY>)
   295	000216'	135340	001105'		LDB	T2,[POINT 8,ORING(T4),BYP2]
   296	000217'	302340	000010		CAIE	T2,10
   297	000220'	254000	000555'		 JRST	SKPSTR		;NOT FOR US, SKIP THIS STRING
   298	000221'	332000	000763'		SKIPE	CTLOFG
   299	000222'	254000	000616'		 JRST	SKPST2		;IGNORE STRING
   300	000223'	202300	000766'		MOVEM	T1,CTOCNT
   301	000224'	201311	000000*		MOVEI	T1,ORING(T4)
   302	000225'	505300	241000		HRLI	T1,(POINT 8,0,BYP2)
   303	000226'	202300	000765'		MOVEM	T1,CTOPNT	;SET UP THE POINTER
   304	000227'	476000	000767'		SETOM	CTYACT		;SET ACTIVE
   305	000230'	254000	000237'		JRST	CTYSTR		;AND GO
   306
   307	000231'	332000	000760'	OSTCNT:	SKIPE	BKPFLG		;IF REVERSE BACKPRESSURE IS ON,
   308	000232'	263040	000000		 POPJ	P,		;JUST FORGET IT TILL ITS TAKEN OFF.
   309	000233'	332000	000771'		SKIPE	CTYRFL
   310	000234'	254000	000260'		 JRST	OSTFIL		;SEND FILL CHRS
   311	000235'	377000	000766'		SOSG	CTOCNT
   312	000236'	254000	000247'		 JRST	STRDON		;FINISHED IF OUT OF COUNT
   313	000237'	134300	000765'	CTYSTR:	UUILDB	T1,CTOPNT	;ENTER HERE TO START
   314	000240'	260040	000273'	CTYCH1:	PUSHJ	P,SPCOUT
   315	000241'	405300	000177		ANDI	T1,177
   316	000242'	306300	000015		CAIN	T1,15		;IS IT RETURN
   317	000243'	336300	000772'		SKIPN	T1,CTYFIL	;AND IS THERE A FILL NUMBER SET?
   318	000244'	263040	000000		 POPJ	P,		;FINISHED. (IGNORE CR DELAY)
   319	000245'	202300	000771'		MOVEM	T1,CTYRFL	;YES, SET UP
   320	000246'	263040	000000		POPJ	P,
   321
   322	000247'	550440	000765'	STRDON:	HRRZ	T4,CTOPNT
   323	000250'	275440	000224*		SUBI	T4,ORING
   324	000251'	402000	000765'		SETZM	CTOPNT		;CLEAR THE POINTER
   325	000252'	344440	000206'	SKT3:	AOJA	T4,CTOLP	;CONTINUE
   326
   327	000253'	202440	000205*	CTDNO:	MOVEM	T4,ORP620	;PUT IT BACK
   328	000254'	712200	000206	IFCPU (<KI,F3>),<CONO TTY,TT.COD+6>	;CLEAR OUTPUT DONE INTERUPT
   329	000255'	402000	000767'		SETZM	CTYACT
   330	000256'	402000	000763'		SETZM	CTLOFG
   331	000257'	263040	000000		POPJ	P,		;NOT ACTIVE AND DONE
   332
   333	000260'	370000	000771'	OSTFIL:	SOS	CTYRFL		;FOR NEXT TIME
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 4-2
CTYSIM.MAC	20-SEP-87 13:00		Special input from the CTY routines

   334	000261'	201300	000377		MOVEI	T1,377
   335	000262'	260040	000273'		PUSHJ	P,SPCOUT
   336	000263'	263040	000000		POPJ	P,
   337
   338	000264'	332000	000771'	STRFIL:	SKIPE	CTYRFL		;ARE THERE FILL CHRS TO DO
   339	000265'	254000	000260'		 JRST	OSTFIL		;YES
   340	000266'	134300	000764'		ILDB	T1,STRFLG	;GET CHR
   341	000267'	476000	000767'		SETOM	CTYACT
   342	000270'	326300	000240'		JUMPN	T1,CTYCH1	;AND GO
   343	000271'	402000	000764'		SETZM	STRFLG		;FINISHED
   344	000272'	324740	000201'		PJRST	CTYOUT
   345
   346	000273'	261040	000010	SPCOUSH	P,T3		;Routine to output character in T1 to CTY
   347	000274'	200400	000006		MOVE	T3,T1		;SCNSER wants char in T3
   348	000275'	260040	000000*		PUSHJ	P,CTYCHR##	;Output to the CTY
   349	000276'	200400	000000*		MOVE	T3,JFYSC2##	;Tell OPRCTY to not output messages
   350	000277'	202400	000000*		MOVEM	T3,OPRTIC##	; for 1/2 second after this char goes out
   351	000300'	262040	000010		POP	P,T3
   352	000301'	263040	000000		POPJ	P,
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 5
CTYSIM.MAC	20-SEP-87 13:00		CTYSIM Dispatch table for messages SCNSER put into the ORING

   353				SUBTTL	CTYSIM Dispatch table for messages SCNSER put into the ORING
   354	000302'	256000	000215'	CTOSPC:  STOPCD (,XCT,CTYBMT)
   355					; 0 Illegal
   356	000303'	344440	000206'		AOJA	T4,CTOLP	; 1 Open
   357	000304'	344440	000206'		AOJA	T4,CTOLP	; 2 Shut
   358	000305'	344440	000206'		AOJA	T4,CTOLP	; 3 Reset interface
   359	000306'	344440	000206'		AOJA	T4,CTOLP	; 4 Reset acknowlege
   360	000307'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   361					; 5 (supervisor takeover)
   362	000310'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   363					; 6 (login from network)
   364	000311'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   365					; 7 (aux circuit complete)
   366	000312'	254000	000623'		JRST	BAKTRN		;10 Backpressure on
   367	000313'	254000	000623'		JRST	BAKTRN		;11 Backpressure off
   368	000314'	254000	000661'		JRST	GOBTRN		;12 Character gobbler
   369	000315'	254000	000642'		JRST	ZAPTRN		;13 Circuit zapper
   370	000316'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   371					;14 Enter deferred echo mode
   372	000317'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   373					;15 Leave deferred echo mode
   374	000320'	344440	000206'		AOJA	T4,CTOLP	;16 Green ball
   375	000321'	344440	000206'		AOJA	T4,CTOLP	;17 Red ball
   376	000322'	254000	000636'		JRST	YELTRN		;20 Yellow ball
   377	000323'	254000	000665'		JRST	ORGTRN		;21 Orange ball
   378	000324'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   379					;22 Hang character
   380	000325'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   381					;23 (enter transparency mode)
   382	000326'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   383					;24 (leave transparency mode)
   384	000327'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   385					;25 (gray ball / black ball)
   386	000330'	254000	000367'		JRST	SUPINI		;26 Supervisor request
   387	000331'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   388					;27 (supervisor response)
   389	000332'	254000	000405'		JRST	SUPCHR		;30 Character to supervisor
   390	000333'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   391					;31 Test pattern to base
   392	000334'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   393					;32 (test pattern response)
   394	000335'	344440	000252'		AOJA	T4,SKT3		;33 Host sad (2 words)
   395	000336'	344440	000206'		AOJA	T4,CTOLP	;34 Echo on
   396	000337'	344440	000206'		AOJA	T4,CTOLP	;35 Echo off
   397	000340'	344440	000206'		AOJA	T4,CTOLP	;36 Set terminal characteristics
   398	000341'	344440	000206'		AOJA	T4,CTOLP	;37 Terminal characteristics probe
   399	000342'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   400					;40 (terminal characteristics response)
   401	000343'	344440	000206'		AOJA	T4,CTOLP	;41 Set host and number of ports
   402	000344'	344440	000206'		AOJA	T4,CTOLP	;42 Request clock from supervisor
   403	000345'	256000	000215'		 STOPCD (,XCT,CTYBMT)
   404					;43 (clock response from supervistor)
   405				REPEAT 0,<;Code not yet finished, in both CTYSIM and DZKON.
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 5-2
CTYSIM.MAC	20-SEP-87 13:00		CTYSIM Dispatch table for messages SCNSER put into the ORING

   406					JRST	P.IBMO	;44 Initiate block mode output
   407					STOPCD		;45 Block mode output complete
   408					JRST	P.IBMI	;46 Initiate block mode input
   409					STOPCD		;47 Block mode input terminated--out of buffer space
   410					STOPCD		;50 Block mode input terminated--end of transmission
   411					STOPCD		;51 Block mode input terminated--timeout by base
   412					JRST	P.RBIT	;52 Request block mode input termination
   413					STOPCD		;53 Block mode input terminated by host request
   414					JRST	P.RBOT	;54 Request block mode output termination
   415					STOPCD		;55 Block mode output terminated by host request
   416					JRST	P.NBIP	;56 Negotiate for number of block I/O ports
   417				>;REPEAT 0,
   418			000043	SZODS==.-CTOSPC-1
   419
   420	000346'	135300	001105'	ZAPCIR:	LDB	T1,[POINT 8,ORING(T4),BYP2]	;GET PORT
   421	000347'	302300	000010		CAIE	T1,10
   422	000350'	344440	000206'		 AOJA	T4,CTOLP	;FORGET IT
   423					MOVE	T1,[POINT 7,[ASCIZ /
   424	000351'	200300	001112'	please log in:  /]]
   425	000352'	202300	000764'		MOVEM	T1,STRFLG
   426	000353'	271440	000001		ADDI	T4,1		;TO SKIP THE ZAPPER
   427	000354'	405440	000206*		ANDI	T4,MSKORG
   428	000355'	202440	000253*		MOVEM	T4,ORP620
   429	000356'	402000	000757'		SETZM	NOWIN
   430	000357'	324740	000201'		PJRST	CTYOUT		;GO
   431
   432					;GET ORING WORD IN NON-KMC FORMAT TO T2
   433	000360'	200351	000250*	GORING:	MOVE	T2,ORING(T4)	;T2 <- NEXT WORD IN ORING
   434				IFKMC<
   435					LSH	T2,2		;SHIFT LEFT 2
   436					HLL	T2,ORING(T4)	;LAY IN THE LEFT HALF AGAIN
   437					LSH	T2,2		;NOW T2 LOOKS LIKE KL's ORING WORD
   438				>;END IFKMC
   439	000361'	263040	000000		POPJ	P,
   440
   441	000362'	260040	000360'	RSPORG:	PUSHJ	P,GORING	;[MOVE T2,ORING(T4) & KMC ADJ]
   442	000363'	661340	002000		TLO	T2,(BYTE (8) 1)
   443	000364'	260040	000165'	RSPOUT:	PUSHJ	P,DEPO		;CONVERT TO ORANGE AND RET
   444	000365'	344440	000206'		  AOJA	T4,CTOLP
   445	000366'	344440	000206'		AOJA	T4,CTOLP
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 6
CTYSIM.MAC	20-SEP-87 13:00		CTYSIM Dispatch table for messages SCNSER put into the ORING

   446				;Fake AUX circuit
   447	000367'	332000	000750'	SUPINI:	SKIPE	AXINP		;IS BUILDING ALREADY IN PROGRESS?
   448	000370'	254000	000402'		  JRST	SUPBAD		;YES, SEND ERROR
   449	000371'	476000	000750'		SETOM	AXINP		;YES, SET IT
   450	000372'	200300	001113'		MOVE	T1,[POINT 7,AXSTR]
   451	000373'	202300	000751'		MOVEM	T1,AXSTRP	;POINTER FOR STRING
   452	000374'	201300	000014		MOVEI	T1,^D12
   453	000375'	202300	000755'		MOVEM	T1,AXCNT	;COUNT FOR USER NAME
   454	000376'	476000	000756'		SETOM	AXNUM		;NOT GETTING SYSTEM NUMBER YET
   455	000377'	260040	000360'		PUSHJ	P,GORING	;[MOVE T2,ORING(T4) & KMC ADJ]
   456	000400'	661340	002000		TLO	T2,(BYTE (8) 1)	;TURN IT INTO GOOD RESPONSE
   457	000401'	254000	000364'		JRST	RSPOUT
   458
   459	000402'	260040	000360'	SUPBAD:	PUSHJ	P,GORING	;[MOVE T2,ORING(T4) & KMC ADJ]
   460	000403'	670340	001114'		TDO	T2,[BYTE (8) 1,0,1]
   461	000404'	254000	000364'		JRST	RSPOUT		;TURN IT INTO AN ERROR
   462
   463	000405'	135300	001115'	SUPCHR:	LDB	T1,[POINT 7,ORING(T4),BYP3]	;GET CHR
   464	000406'	302300	000015		CAIE	T1,15
   465	000407'	306300	000073		CAIN	T1,";"
   466	000410'	254000	000432'		 JRST	SUPFIN		;FINISH UP
   467	000411'	331000	000756'		SKIPL	AXNUM
   468	000412'	254000	000422'		 JRST	SUPNUM		;GETTING SYSEM NUMBER
   469	000413'	306300	000072		CAIN	T1,":"
   470	000414'	254000	000420'		 JRST	SUPSYS		;STARTING SYSTEM NUMBER
   471	000415'	371000	000755'		SOSL	AXCNT
   472	000416'	136300	000751'		IDPB	T1,AXSTRP	;SAVE PART OF USER NAME IF ROOM
   473	000417'	344440	000206'		AOJA	T4,CTOLP
   474
   475	000420'	402000	000756'	SUPSYS:	SETZM	AXNUM
   476	000421'	344440	000206'		AOJA	T4,CTOLP
   477
   478	000422'	307300	000071	SUPNUM:	CAIG	T1,"9"
   479	000423'	305300	000060		CAIGE	T1,"0"
   480	000424'	344440	000206'		 AOJA	T4,CTOLP	;IGNORE STRANGE CHR
   481	000425'	200340	000756'		MOVE	T2,AXNUM
   482	000426'	221340	000012		IMULI	T2,^D10
   483	000427'	271346	777720		ADDI	T2,-"0"(T1)
   484	000430'	202340	000756'		MOVEM	T2,AXNUM
   485	000431'	344440	000206'		AOJA	T4,CTOLP
   486
   487	000432'	135300	001116'	SUPFIN:	LDB	T1,[POINT 7,CONFIG##,13]
   488	000433'	135340	001117'		LDB	T2,[POINT 7,CONFIG##,20] ;GET THIS SYSTEM NUMBER
   489	000434'	275300	000060		SUBI	T1,"0"
   490	000435'	221300	000012		IMULI	T1,^D10
   491	000436'	271307	777720		ADDI	T1,-"0"(T2)
   492	000437'	312300	000756'		CAME	T1,AXNUM
   493	000440'	254000	000531'		 JRST	SUPSYW		;WRONG SYSTEM
   494	000441'	201300	000015		MOVEI	T1,^D13
   495	000442'	274300	000755'		SUB	T1,AXCNT
   496	000443'	242300	777777		LSH	T1,-1
   497	000444'	271300	000005		ADDI	T1,5		;GET SPACE IN INPUT RING REQUIRED
   498	000445'	260040	000545'		PUSHJ	P,ISZCK		;CHECK SIZE
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 6-2
CTYSIM.MAC	20-SEP-87 13:00		CTYSIM Dispatch table for messages SCNSER put into the ORING

   499	000446'	254000	000253'		 JRST	CTDNO		;NO, SAY FINISHED, WILL REENTER
   500	000447'	201300	000000		MOVEI	T1,0
   501	000450'	136300	000751'		IDPB	T1,AXSTRP
   502	000451'	260040	000540'		PUSHJ	P,GETPRT	;GET A PORT NUMBER
   503	000452'	254000	000531'		 JRST	SUPSYW		;CAN NOT, SAY SYSTEM UNAVAIL
   504	000453'	201406	000011		MOVEI	T3,11(T1)
   505	000454'	261040	000010		PUSH	P,T3
   506	000455'	260040	000543'		PUSHJ	P,GETPRC	;AND ANOTHER
   507	000456'	254000	000530'		 JRST	SUPSWP		;CAN NOT GET 2
   508	000457'	201306	000011		MOVEI	T1,11(T1)
   509	000460'	262040	000010		POP	P,T3
   510	000461'	202406	000677'		MOVEM	T3,PTRNTB-11(T1)
   511	000462'	202310	000677'		MOVEM	T1,PTRNTB-11(T3)
   512	000463'	205340	016000		MOVSI	T2,(BYTE (8) 7)
   513	000464'	137400	001120'		DPB	T3,[POINT 8,T2,15]
   514	000465'	135400	001105'		LDB	T3,[POINT 8,ORING(T4),BYP2]	;GET PORT OF REQUESTER
   515	000466'	137400	001027'		DPB	T3,[POINT 8,T2,23]	;AND PUT IN PORT REQUEST
   516	000467'	260040	000165'		PUSHJ	P,DEPO			;SAY WHICH PORT
   517	000470'	256000	000000'		  STOPCD
   518	000471'	205340	056000		MOVSI	T2,(BYTE (8) 27)
   519	000472'	135400	001105'		LDB	T3,[POINT 8,ORING(T4),BYP2]
   520	000473'	137400	001120'		DPB	T3,[POINT 8,T2,15]
   521	000474'	260040	000165'		PUSHJ	P,DEPO			;AND NO ERROR
   522	000475'	256000	000000'		  STOPCD
   523	000476'	205340	014000		MOVSI	T2,(BYTE (8) 6)
   524	000477'	137300	001120'		DPB	T1,[POINT 8,T2,15]	;NOW LOG IN NEW PORT
   525	000500'	260040	000165'		PUSHJ	P,DEPO
   526	000501'	256000	000000'		  STOPCD
   527	000502'	205340	404000		MOVSI	T2,(BYTE (8) 202)
   528	000503'	137300	001120'		DPB	T1,[POINT 8,T2,15]
   529	000504'	260040	000165'		PUSHJ	P,DEPO
   530	000505'	256000	000000'		  STOPCD
   531	000506'	260040	000165'		PUSHJ	P,DEPO
   532	000507'	256000	000000'		  STOPCD
   533	000510'	200400	001113'		MOVE	T3,[POINT 7,AXSTR]
   534	000511'	202400	000751'		MOVEM	T3,AXSTRP
   535	000512'	134400	000751'	STRLP:	ILDB	T3,AXSTRP
   536	000513'	322400	000526'		JUMPE	T3,STRLP2
   537	000514'	137400	001027'		DPB	T3,[POINT 8,T2,23]
   538	000515'	134400	000751'		ILDB	T3,AXSTRP
   539	000516'	322400	000523'		JUMPE	T3,STRLP3
   540	000517'	137400	001121'		DPB	T3,[POINT 8,T2,31]
   541	000520'	260040	000165'		PUSHJ	P,DEPO
   542	000521'	256000	000000'		  STOPCD
   543	000522'	254000	000512'		JRST	STRLP
   544
   545	000523'	641340	006000	STRLP3:	TLC	T2,(BYTE (8) 3)	;CHANGE TO 1 CHR
   546	000524'	260040	000165'		PUSHJ	P,DEPO
   547	000525'	256000	000000'		  STOPCD
   548	000526'	402000	000750'	STRLP2:	SETZM	AXINP
   549	000527'	344440	000206'		AOJA	T4,CTOLP
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 7
CTYSIM.MAC	20-SEP-87 13:00		CTYSIM Dispatch table for messages SCNSER put into the ORING

   550	000530'	262040	000010	SUPSWP:	POP	P,T3
   551	000531'	135300	001105'	SUPSYW:	LDB	T1,[POINT 8,ORING(T4),BYP2]
   552	000532'	200340	001122'		MOVE	T2,[BYTE (8) 27,0,4]
   553	000533'	137300	001120'		DPB	T1,[POINT 8,T2,15]
   554	000534'	260040	000165'		PUSHJ	P,DEPO
   555	000535'	254000	000253'		  JRST	CTDNO
   556	000536'	402000	000750'		SETZM	AXINP
   557	000537'	344440	000206'		AOJA	T4,CTOLP
   558
   559	000540'	205300	777740	GETPRT:	MOVSI	T1,-40
   560	000541'	336006	000710'		SKIPN	PTRNTB(T1)
   561	000542'	254000	000062*		 JRST	CPOPJ1
   562	000543'	253300	000541'	GETPRC:	AOBJN	T1,.-2
   563	000544'	263040	000000		POPJ	P,
   564
   565	000545'	200340	000000*	ISZCK:	MOVE	T2,IRPPDP
   566	000546'	274340	000176*		SUB	T2,IRP620
   567	000547'	362340	000000*		SOJE	T2,CPOPJ	;NOT ENOUGH ROOM (0)
   568	000550'	335000	000007		SKIPGE	T2
   569	000551'	271340	000001*		 ADDI	T2,MSKIRG+1
   570	000552'	311340	000006		CAML	T2,T1
   571	000553'	350001	000000		 AOS	(P)
   572	000554'	263040	000000		POPJ	P,
   573
   574	000555'	301340	000010	SKPSTR:	CAIL	T2,10
   575	000556'	303340	000050		CAILE	T2,50
   576	000557'	254000	000616'		 JRST	SKPST2		;REALLY SKIP IT
   577	000560'	336007	000677'		SKIPN	PTRNTB-11(T2)
   578	000561'	254000	000616'		 JRST	SKPST2		;PORT NOT IN USE
   579
   580	000562'	202300	000766'		MOVEM	T1,CTOCNT
   581	000563'	201311	000360*		MOVEI	T1,ORING(T4)
   582	000564'	505300	241000		HRLI	T1,(POINT 8,0,BYP2)
   583	000565'	202300	000765'		MOVEM	T1,CTOPNT
   584	000566'	200300	000766'		MOVE	T1,CTOCNT
   585	000567'	271300	000001		ADDI	T1,1
   586	000570'	242300	777777		LSH	T1,-1
   587	000571'	260040	000545'		PUSHJ	P,ISZCK
   588	000572'	254000	000253'		  JRST	CTDNO
   589	000573'	135300	001105'		LDB	T1,[POINT 8,ORING(T4),BYP2]
   590	000574'	200306	000677'		MOVE	T1,PTRNTB-11(T1)
   591	000575'	205340	404000		MOVSI	T2,(BYTE (8) 202)
   592	000576'	137300	001120'		DPB	T1,[POINT 8,T2,15]
   593	000577'	375000	000766'	ATRLP:	SOSGE	CTOCNT
   594	000600'	254000	000615'		 JRST	ATRLP1
   595	000601'	134300	000765'		UUILDB	T1,CTOPNT
   596	000602'	137300	001027'		DPB	T1,[POINT 8,T2,23]
   597	000603'	375000	000766'		SOSGE	CTOCNT
   598	000604'	254000	000612'		 JRST	ATRLP2
   599	000605'	134300	000765'		UUILDB	T1,CTOPNT
   600	000606'	137300	001121'		DPB	T1,[POINT 8,T2,31]
   601	000607'	260040	000165'		PUSHJ	P,DEPO
   602	000610'	256000	000000'		  STOPCD
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 7-2
CTYSIM.MAC	20-SEP-87 13:00		CTYSIM Dispatch table for messages SCNSER put into the ORING

   603	000611'	254000	000577'		JRST	ATRLP
   604
   605	000612'	641340	006000	ATRLP2:	TLC	T2,(BYTE (8) 3)
   606	000613'	260040	000165'		PUSHJ	P,DEPO
   607	000614'	256000	000000'		  STOPCD
   608	000615'	254000	000247'	ATRLP1:	JRST	STRDON
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 8
CTYSIM.MAC	20-SEP-87 13:00		CTYSIM Dispatch table for messages SCNSER put into the ORING

   609	000616'	275300	000002	SKPST2:	SUBI	T1,2
   610	000617'	361300	000252'		SOJL	T1,SKT3
   611	000620'	242300	777776		LSH	T1,-2
   612	000621'	270440	000006		ADD	T4,T1
   613	000622'	344440	000252'		AOJA	T4,SKT3
   614
   615	000623'	260040	000360'	BAKTRN:	PUSHJ	P,GORING	;[MOVE T2,ORING(T4) & KMC ADJ]
   616	000624'	135300	001120'		LDB	T1,[POINT 8,T2,15]
   617	000625'	303300	000010		CAILE	T1,10
   618	000626'	303300	000050		CAILE	T1,50
   619	000627'	344440	000206'		 AOJA	T4,CTOLP
   620	000630'	336306	000677'		SKIPN	T1,PTRNTB-11(T1)
   621	000631'	344440	000206'		 AOJA	T4,CTOLP
   622	000632'	137300	001120'		DPB	T1,[POINT 8,T2,15]
   623	000633'	260040	000165'		PUSHJ	P,DEPO
   624	000634'	254000	000253'		  JRST	CTDNO
   625	000635'	344440	000206'		AOJA	T4,CTOLP
   626
   627	000636'	135300	001105'	YELTRN:	LDB	T1,[POINT 8,ORING(T4),BYP2]
   628	000637'	302300	000010		CAIE	T1,10
   629	000640'	254000	000623'		 JRST	BAKTRN
   630	000641'	254000	000362'		JRST	RSPORG
   631
   632	000642'	135300	001105'	ZAPTRN:	LDB	T1,[POINT 8,ORING(T4),BYP2]
   633	000643'	306300	000010		CAIN	T1,10
   634	000644'	254000	000346'		 JRST	ZAPCIR
   635	000645'	301300	000010		CAIL	T1,10
   636	000646'	303300	000050		CAILE	T1,50
   637	000647'	344440	000206'		 AOJA	T4,CTOLP
   638	000650'	336346	000677'		SKIPN	T2,PTRNTB-11(T1)
   639	000651'	344440	000206'		 AOJA	T4,CTOLP
   640	000652'	200400	000007		MOVE	T3,T2
   641	000653'	260040	000360'		PUSHJ	P,GORING	;[MOVE T2,ORING(T4) & KMC ADJ]
   642	000654'	137400	001120'		DPB	T3,[POINT 8,T2,15]
   643	000655'	260040	000165'		PUSHJ	P,DEPO
   644	000656'	254000	000253'		  JRST	CTDNO
   645	000657'	402006	000677'		SETZM	PTRNTB-11(T1)
   646	000660'	344440	000206'		AOJA	T4,CTOLP
   647
   648	000661'	135340	001105'	GOBTRN:	LDB	T2,[POINT 8,ORING(T4),BYP2]
   649	000662'	306340	000010		CAIN	T2,10
   650	000663'	402000	000763'		 SETZM	CTLOFG
   651	000664'	254000	000623'		JRST	BAKTRN
   652
   653	000665'	254000	000623'	ORGTRN:	JRST	BAKTRN
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 9
CTYSIM.MAC	20-SEP-87 13:00		CTYSIM Dispatch table for messages SCNSER put into the ORING

   654				;Called from ONCE to set up CTY
   655	000666'	336000	000761'	CTYSET::SKIPN	CTYDO
   656	000667'	263040	000000		 POPJ	P,		;DO NOT SET UP
   657				IFCPU (<KI,KL>),<
   658	000670'	205300	334000		MOVSI	T1,(SKIPA)
   659	000671'	202300	000000*		MOVEM	T1,CRSCHK##	;Disable check for nonzero in 30
   660				>; END IFCPU (<KI,KL>)
   661	000672'	205300	255000		MOVSI	T1,(JFCL)
   662	000673'	202300	000000*		MOVEM	T1,KEYSET##	;Disable updating the key
   663	000674'	200300	001123'		MOVE	T1,[JEN @CH6]
   664	000675'	202300	000014'		MOVEM	T1,CH6LK+1
   665	000676'	200300	001124'		MOVE	T1,[JRST CH6LK]
   666				IFCPU (<KS,KL>),<
   667					MOVEM	T1,CH6KST+1	;IF KL OR KS MAKE OUTPUT RING STARTER FIRST
   668					MOVE	T1,[JRST CH6KST]
   669				>;END IFCPU (<KS,KL>)
   670	000677'	202300	000001*		MOVEM	T1,CH6+1
   671	000700'	200300	000001*		MOVE	T1,CH7+1
   672	000701'	202300	000004'		MOVEM	T1,CH7LK+1
   673	000702'	200300	001125'		MOVE	T1,[JRST CH7LK]
   674	000703'	202300	000001*		MOVEM	T1,CH7+1
   675				IFCPU (KL),<
   676					MOVE	T1,[JSR CH6]	;DTE INTERRUPT INSTRUCTION
   677					MOVEM	T1,EPT+EPTDT0+DTEDII
   678					CONO	DTE,PILDEN+6	;PI load enable - channel 6
   679				>;END IFCPU (KL)
   680	000704'	712200	001206	IFCPU (<KI,F3>),<CONO TTY,TT.COD!TT.CID+6>
   681				IFCPU (KS),<WRAPR LP.ESF+LP.80C+APRCHN##>	;ENABLE THE CTY INTERRUPT
   682					MOVE	T1,[POINT 7,[ASCIZ /
   683				
   684				Type CTRL-Z ? for help
   685				
   686	000705'	200300	001140'	please log in:  /]]
   687	000706'	202300	000764'		MOVEM	T1,STRFLG	;Set pointer for initial LOGIN
   688	000707'	324740	000201'		PJRST	CTYOUT		;Print the msg on the CTY (NOW!)
   689
   690				EXTERNAL MSKORG,MSKIRG,IRING,ORING,ORP620,IRP620
   691				EXTERNAL ORPPDP,IRPPDP,CH6,CH7
   692				EXTERNAL CPOPJ,CPOPJ1,EPT
   693
   694	000710'			PTRNTB:	BLOCK	40	;Translation table for ports 11-50
   695	000750'	000000	000000	AXINP:	0
   696	000751'	000000	000000	AXSTRP:	0
   697	000752'			AXSTR:	BLOCK	3
   698	000755'	000000	000000	AXCNT:	0
   699	000756'	000000	000000	AXNUM:	0
   700
   701	000757'	000000	000000	NOWIN::	0		;NON-ZERO IF LOGGED IN
   702	000760'	000000	000000	BKPFLG:	0		;NON-ZERO IF "REMOTE" IS APPLYING BACKPRESSURE.
   703				IFNDEF CTYVAL,<CTYVAL==0>
   704	000761'	000000	000000	CTYDO:: CTYVAL
   705	000762'	000000	000000	CTLZFL:	0		;CONTROL Z FLAG
   706	000763'	000000	000000	CTLOFG:	0
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 9-2
CTYSIM.MAC	20-SEP-87 13:00		CTYSIM Dispatch table for messages SCNSER put into the ORING

   707	000764'	000000	000000	STRFLG:	0		;HERE IF GENERATING A STRING (LIKE PLEASE LOG IN)
   708	000765'	000000	000000	CTOPNT:	0		;OUTPUT POINTER
   709	000766'	000000	000000	CTOCNT:	0		;AND COUNT
   710	000767'	000000	000000	CTYACT:	0		;CTY OUTPUT ACTIVE
   711	000770'	000000	000000	CH7SVT:	0		;SAVE LOC FOR CH7
   712	000771'	000000	000000	CTYRFL:	0
   713	000772'	000000	000000	CTYFIL:	0
   714	000773'			CTSV:	BLOCK T4+1	;Up to and including T4
   715	001005'	000000	000113'	RETCTP:	RETCT
   716	001006'				BLOCK 20	;PDL
   717
   718	001026'	777760	001005'		$END	(CTY)

   719	001027'	141000	000007

   720	001030'	064241	505206

   721	001031'	522632	344632

   722	001032'	203075	766732

   723	001033'	607354	471500

   724	001034'	243416	262714

   725	001035'	647604	073722

   726	001036'	723204	041650

   727	001037'	512305	555122

   728	001040'	064241	505100

   729	001041'	201004	037500

   730	001042'	201012	464322

   731	001043'	715015	562746

   732	001044'	717034	762432

   733	001045'	051004	020100

   734	001046'	411004	020204

   735	001047'	713134	165532

   736	001050'	703375	167350

   737	001051'	064244	020100

   738	001052'	202204	020100

CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 9-3
CTYSIM.MAC	20-SEP-87 13:00		CTYSIM Dispatch table for messages SCNSER put into the ORING

   739	001053'	443035	663752

   740	001054'	700321	220100

   741	001055'	201011	420100

   742	001056'	202315	763722

   743	001057'	670321	220100

   744	001060'	201011	720100

   745	001061'	202515	763716

   746	001062'	663124	057236

   747	001063'	064244	020100

   748	001064'	201424	020100

   749	001065'	517136	420314

   750	001066'	647315	406424

   751	001067'	064240	000000

   752	001070'	440700	001030'

   753	001071'	200300	001070'

   754	001072'	202300	000764'

   755	001073'	324740	000201'

   756	001074'	462000	000763'

   757	001075'	263040	000000

   758	001076'	410040	140000

   759	001077'	000600	000127*

   760	001100'	341011	000563*

   761	001101'	260040	000000*

   762	001102'	436471	425564

   763	001103'	400001	000000

   764	001104'	000000	000000*

   765	001105'	241011	001100*
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 9-4
CTYSIM.MAC	20-SEP-87 13:00		CTYSIM Dispatch table for messages SCNSER put into the ORING


   766	001106'	064256	066312

   767	001107'	607474	520330

   768	001110'	677164	064734

   769	001111'	351004	000000

   770	001112'	440700	001106'

   771	001113'	440700	000752'

   772	001114'	002000	010000

   773	001115'	140711	001105*

   774	001116'	260700	000000*

   775	001117'	170700	001116*

   776	001120'	241000	000007

   777	001121'	041000	000007

   778	001122'	056000	040000

   779	001123'	254520	000000*

   780	001124'	254000	000013'

   781	001125'	254000	000003'

   782	001126'	064241	505250

   783	001127'	747414	520206

   784	001130'	522451	426664

   785	001131'	201764	063336

   786	001132'	711015	062730

   787	001133'	700321	206424

   788	001134'	703314	560746

   789	001135'	625015	467716

   790	001136'	203235	635100

   791	001137'	200000	000000

CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 9-5
CTYSIM.MAC	20-SEP-87 13:00		CTYSIM Dispatch table for messages SCNSER put into the ORING

   792	001140'	440700	001126'

   793						;End of CTYSIM (CTYLIT: CTYEND:)
   794
NO ERRORS DETECTED
PROGRAM BREAK IS 001152
6K CORE USED
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88 PAGE 10
CTYSIM.MAC	20-SEP-87 13:00		SYMBOL TABLE

ATRLP		000577'		CTYOUT		000201'		S$XCT	777777	777776	SIN	
ATRLP1		000615'		CTYRFL		000771'		SKPST2		000616'		
ATRLP2		000612'		CTYSET		000666'	INT	SKPSTR		000555'		
AXCNT		000755'		CTYSIM		000000'	ENT	SKT3		000252'		
AXINP		000750'		CTYSTR		000237'		SPCOUT		000273'		
AXNUM		000756'		CTYVAL		000000	SPD	STRDON		000247'		
AXSTR		000752'		DEPO		000165'		STRFIL		000264'		
AXSTRP		000751'		DEPOC		000166'		STRFLG		000764'		
BAKTRN		000623'		DIE		001101'	EXT	STRLP		000512'		
BKPFLG		000760'		EPT		000000	EXT	STRLP2		000526'		
BKPOFF		000147'		GETPRC		000543'		STRLP3		000523'		
BKPON		000156'		GETPRT		000540'		SUPBAD		000402'		
BYP1		000007	SPD	GOBTRN		000661'		SUPCHR		000405'		
BYP2		000017	SPD	GORING		000360'		SUPFIN		000432'		
BYP3		000027	SPD	HNGUP		000142'		SUPINI		000367'		
BYP4		000037	SPD	IRING		000173'	EXT	SUPNUM		000422'		
CH6		001123'	EXT	IRP620		000546'	EXT	SUPSWP		000530'		
CH6LK		000013'	INT	IRPPDP		000545'	EXT	SUPSYS		000420'		
CH6LK1		000024'		ISZCK		000545'		SUPSYW		000531'		
CH7		000000	EXT	JFYSC2		000276'	EXT	SYSNUM		000121'	EXT	
CH7LK		000003'	INT	KEYSET		000673'	EXT	SZODS		000043	SPD	
CH7SVT		000770'		LDSRXE		000034'	EXT	T1		000006	INT	
CONFIG		001117'	EXT	LOGIN		000116'		T2		000007	INT	
CPOPJ		000547'	EXT	MSKIRG		000175'	EXT	T3		000010	INT	
CPOPJ1		000542'	EXT	MSKORG		000354'	EXT	T4		000011	INT	
CPUF3		000004	SPD	NODIE		000000	EXT	TT.CID		001000	SPD	
CPUKI		000001	SPD	NOWIN		000757'	INT	TT.COD		000200	SPD	
CPUKL		000002	SPD	NRMCH		000031'		TT.ID		000040	SPD	
CPUKS		000003	SPD	NRMCH1		000044'		TT.OD		000010	SPD	
CPUTYP		000001	SPD	OPRTIC		000277'	EXT	TT.SOD		000010	SPD	
CPZZ		000000	SPD	ORGTRN		000665'		TTY		000120	SPD	
CRSCHK		000671'	EXT	ORING		001115'	EXT	U		000005	INT	
CTDNO		000253'		ORP620		000355'	EXT	UUIDPB	136000	000000		
CTLOFG		000763'		ORPPDP		000207'	EXT	UUILDB	134000	000000		
CTLZFL		000762'		OSTCNT		000231'		YELTRN		000636'		
CTLZH		000063'		OSTFIL		000260'		ZAPCIR		000346'		
CTLZN		000111'		P		000001	INT	ZAPTRN		000642'		
CTOCNT		000766'		PJRST	324740	000000		.CPLOG		001077'	EXT	
CTOLP		000206'		PRTIRG		001104'	EXT	
CTOPNT		000765'		PTRNTB		000710'		
CTOSPC		000302'		RETCT		000113'		
CTSV		000773'		RETCTP		001005'		
CTYACT		000767'		RSPORG		000362'		
CTYBMT		000215'	INT	RSPOUT		000364'		
CTYBRK		000067'	INT	S$ENTR	777777	777775	SIN	
CTYCH1		000240'		S$EVEN		000006	SIN	
CTYCHR		000275'	EXT	S$HALT	777777	777777	SIN	
CTYDO		000761'	INT	S$INFO		000005	SIN	
CTYEND		001151'	INT	S$NAME		000000'	SPD	
CTYFIL		000772'		S$NONA		000000	SIN	
CTYINP		000051'	INT	S$PATC		000007	SIN	
CTYLDB		000033'	EXT	S$STOP		000001	SIN	
CTYLIT		001026'	INT	S$TEMP		000000	SPD	

CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88
CTYSIM.MAC	20-SEP-87 13:00		Symbol cross reference

ATRLP	   593#	   603
ATRLP1	   594	   608#
ATRLP2	   598	   605#
AXCNT	   453	   471	   495	   698#
AXINP	   447	   449	   548	   556	   695#
AXNUM	   454	   467	   475	   481	   484	   492	   699#
AXSTR	   450	   533	   697#
AXSTRP	   451	   472	   501	   534	   535	   538	   696#
BAKTRN	   366	   367	   615#	   629	   651	   653
BKPFLG	   247	   252	   255	   260	   307	   702#
BKPOFF	   125	   247#
BKPON	   127	   255#
BYP1	    28#	   290
BYP2	    29#	   295	   302	   420	   514	   519	   551	   582	   589	   627	   632	   648
BYP3	    30#	   463
BYP4	    31#
CH6	   663	   670	   691%
CH6LK	    58#	   218	   664	   665
CH6LK1	    67	   112#
CH7	   671	   674	   691%
CH7LK	    40#	    53	   672	   673
CH7SVT	    42	    52	   711#
CONFIG	   487%	   487	   488%	   488
CPOPJ	   567	   692%
CPOPJ1	   172	   561	   692%
CPUF3	    50	    57	   151	   328	   680
CPUKI	    50	    57	   151	   328	   657	   680
CPUKL	    45	    70	   134	   156	   657	   666	   675
CPUKS	    45	    90	   134	   162	   666	   681
CPUTYP	    45	    50	    57	    70	    90	   134	   151	   156	   162	   328	   657	   666	   675	   680
	   681
CPZZ	    45#	    45	    50#	    50	    57#	    57	    70#	    70	    90#	    90	   134#	   134	   151#	   151
	   156#	   156	   162#	   162	   328#	   328	   657#	   657	   666#	   666	   675#	   675	   680#	   680
	   681#	   681
CRSCHK	   659%	   659
CTDNO	   289	   327#	   499	   555	   588	   624	   644
CTLOFG	   198	   298	   330	   650	   706#
CTLZFL	   112	   177	   213	   705#
CTLZH	   113	   176#
CTLZN	   116	   213#
CTOCNT	   300	   311	   580	   584	   593	   597	   709#
CTOLP	   287#	   325	   356	   357	   358	   359	   374	   375	   395	   396	   397	   398	   401	   402
	   422	   444	   445	   473	   476	   480	   485	   549	   557	   619	   621	   625	   637	   639
	   646
CTOPNT	   284	   303	   313	   322	   324	   583	   595	   599	   708#
CTOSPC	   292	   354#	   418
CTSV	    60	    61	    62	   216	   714#
CTYACT	    40	   304	   329	   341	   710#
CTYBMT	   294#	   354	   360	   362	   364	   370	   372	   378	   380	   382	   384	   387	   390	   392
	   399	   403
CTYBRK	   171	   180#
CTYCH1	   314#	   342
CTYCHR	   348%	   348
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88
CTYSIM.MAC	20-SEP-87 13:00		Symbol cross reference

CTYDO	   149	   655	   704#
CTYEND	   793#
CTYFIL	   210	   317	   713#
CTYINP	   149#
CTYLDB	   119%	   119
CTYLIT	   718#
CTYOUT	    65	   195	   253	   282#	   344	   430	   688
CTYRFL	   309	   319	   333	   338	   712#
CTYSET	   655#
CTYSIM	    11	    12#	    15
CTYSTR	   305	   313#
CTYVAL	   703	   704
DEPO	   130	   226	   232	   236	   243	   250	   258	   263#	   443	   516	   521	   525	   529	   531
	   541	   546	   554	   601	   606	   623	   643
DEPOC	   264#
DIE	    11	    11%	    12	   294
EPT	   692%
GETPRC	   506	   562#
GETPRT	   502	   559#
GOBTRN	   368	   648#
GORING	   433#	   441	   455	   459	   615	   641
HNGUP	   205	   241#
IRING	   275	   690%
IRP620	   263	   266	   274	   278	   566	   690%
IRPPDP	   565	   691%
ISZCK	   498	   565#	   587
JFYSC2	   349%	   349
KEYSET	   662%	   662
LDSRXE	   120%	   120
LISTSN	     3	     6
LOGIN	   202	   220#
MSKIRG	   265	   277	   569	   690%
MSKORG	   287	   427	   690%
NODIE	    11%
NOWIN	   117	   220	   238	   242	   429	   701#
NRMCH	   117#	   208
NRMCH1	   121	   128#	   248	   256
OPRTIC	   350%	   350
ORGTRN	   377	   653#
ORING	   290	   295	   301	   323	   420	   433	   463	   514	   519	   551	   581	   589	   627	   632
	   648	   690%
ORP620	    44	   286	   327	   428	   690%
ORPPDP	    43	   288	   691%
OSTCNT	   285	   307#
OSTFIL	   310	   333#	   339
P	    12	    63	   118	   130	   131	   132	   150	   153	   180	   199	   211	   214	   221	   226
	   232	   236	   239	   243	   245	   250	   251	   258	   259	   261	   267	   279	   280	   294
	   308	   314	   318	   320	   331	   335	   336	   346	   348	   351	   352	   439	   441	   443
	   455	   459	   498	   502	   505	   506	   509	   516	   521	   525	   529	   531	   541	   546
	   550	   554	   563	   571	   572	   587	   601	   606	   615	   623	   641	   643	   656
PRTIRG	   294%	   294
PTRNTB	   510	   511	   560	   577	   590	   620	   638	   645	   694#
RETCT	   216#	   715
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88
CTYSIM.MAC	20-SEP-87 13:00		Symbol cross reference

RETCTP	    63	   715#
RSPORG	   441#	   630
RSPOUT	   443#	   457	   461
S$ENTR	    11	    17	   227	   233	   237	   295	   354	   360	   362	   364	   370	   372	   378	   380
	   382	   384	   387	   390	   392	   399	   403	   517	   522	   526	   530	   532	   542	   547
	   602	   607
S$EVEN	   294
S$HALT	    11	   227	   233	   237	   294	   354	   360	   362	   364	   370	   372	   378	   380	   382
	   384	   387	   390	   392	   399	   403	   517	   522	   526	   530	   532	   542	   547	   602
	   607
S$INFO	   294
S$NAME	    15#	   227	   233	   237	   517	   522	   526	   530	   532	   542	   547	   602	   607
S$NONA	    14	    17	   227	   233	   237	   295	   355	   361	   363	   365	   371	   373	   379	   381
	   383	   385	   388	   391	   393	   400	   404	   517	   522	   526	   530	   532	   542	   547
	   602	   607
S$PATC	   294
S$STOP	   294	   295
S$TEMP	    11#	    11	   227#	   227	   233#	   233	   237#	   237	   294#	   294	   354#	   354	   360#	   360
	   362#	   362	   364#	   364	   370#	   370	   372#	   372	   378#	   378	   380#	   380	   382#	   382
	   384#	   384	   387#	   387	   390#	   390	   392#	   392	   399#	   399	   403#	   403	   517#	   517
	   522#	   522	   526#	   526	   530#	   530	   532#	   532	   542#	   542	   547#	   547	   602#	   602
	   607#	   607
S$XCT	    17	   227	   233	   237	   295	   354	   355	   360	   361	   362	   363	   364	   365	   370
	   371	   372	   373	   378	   379	   380	   381	   382	   383	   384	   385	   387	   388	   390
	   391	   392	   393	   399	   400	   403	   404	   517	   522	   526	   530	   532	   542	   547
	   602	   607
SKPST2	   299	   576	   578	   609#
SKPSTR	   297	   574#
SKT3	   325#	   394	   610	   613
SPCOUT	   314	   335	   346#
STRDON	   312	   322#	   608
STRFIL	   283	   338#
STRFLG	   194	   282	   340	   343	   425	   687	   707#
STRLP	   535#	   543
STRLP2	   536	   548#
STRLP3	   539	   545#
SUPBAD	   448	   459#
SUPCHR	   389	   463#
SUPFIN	   466	   487#
SUPINI	   386	   447#
SUPNUM	   468	   478#
SUPSWP	   507	   550#
SUPSYS	   470	   475#
SUPSYW	   493	   503	   551#
SYSNUM	   223%	   223
SZODS	   291	   418#
T1	    42	    43	    44	    52	    66	   114	   115	   122	   129	   176	   178	   179	   181	   182
	   194	   196	   197	   200	   201	   203	   204	   206	   207	   209	   210	   223	   224	   225
	   229	   230	   231	   290	   291	   292	   293	   300	   301	   302	   303	   313	   315	   316
	   317	   319	   334	   340	   342	   347	   420	   421	   423	   425	   450	   451	   452	   453
	   463	   464	   465	   469	   472	   478	   479	   483	   487	   489	   490	   491	   492	   494
	   495	   496	   497	   500	   501	   504	   508	   510	   511	   524	   528	   551	   553	   559
	   560	   562	   570	   580	   581	   582	   583	   584	   585	   586	   589	   590	   592	   595
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88
CTYSIM.MAC	20-SEP-87 13:00		Symbol cross reference

	   596	   599	   600	   609	   610	   611	   612	   616	   617	   618	   620	   622	   627	   628	   632
	   633	   635	   636	   638	   645	   658	   659	   661	   662	   663	   664	   665	   670	   671
	   672	   673	   674	   682	   687
T2	   120	   121	   122	   123	   124	   126	   128	   129	   222	   225	   228	   231	   234	   235
	   241	   249	   257	   275	   295	   296	   433	   442	   456	   460	   481	   482	   483	   484
	   488	   491	   512	   513	   515	   518	   520	   523	   524	   527	   528	   537	   540	   545
	   552	   553	   565	   566	   567	   568	   569	   570	   574	   575	   577	   591	   592	   596
	   600	   605	   616	   622	   638	   640	   642	   648	   649
T3	   154	   168	   169	   170	   263	   264	   265	   266	   274	   275	   276	   277	   278	   346
	   347	   349	   350	   351	   504	   505	   509	   510	   511	   513	   514	   515	   519	   520
	   533	   534	   535	   536	   537	   538	   539	   540	   550	   640	   642
T4	    60	    61	    62	   216	   217	   286	   287	   288	   290	   295	   301	   322	   323	   325
	   327	   356	   357	   358	   359	   374	   375	   394	   395	   396	   397	   398	   401	   402
	   420	   422	   426	   427	   428	   433	   444	   445	   463	   473	   476	   480	   485	   514
	   519	   549	   551	   557	   581	   589	   612	   613	   619	   621	   625	   627	   632	   637
	   639	   646	   648	   714
TT.CID	   680
TT.COD	   328	   680
TT.ID	    58	    64	   152
TT.OD	    58
TT.SOD	    50
TTY	    50	    58	    64	    66	   152	   154	   328	   680
U	   119
YELTRN	   376	   627#
ZAPCIR	   420#	   634
ZAPTRN	   369	   632#
.CPLOG	   229%	   229	   234%	   234
CTYSIM - USE THE CTY TO SIMULATE A TYMNET LINE	MACRO 12.5-46.0 14:51 13-JAN-88
CTYSIM.MAC	20-SEP-87 13:00		Macro/Opdef cross reference

IFCPU	    45	    50	    57	    70	    90	   134	   151	   156	   162	   328	   657	   666	   675	   680
	   681
IFKMC	    19	   268	   434
IFNKMC	    28
PFALL	    67
PJRST	   195	   198	   202	   205	   208	   253	   344	   430	   688
STOPCD	    10	   227	   233	   237	   294	   354	   360	   362	   364	   370	   372	   378	   380	   382
	   384	   387	   390	   392	   399	   403	   517	   522	   526	   530	   532	   542	   547	   602
	   607
TYPI	    35#
UUIDPB	    33#
UUILDB	    32#	   313	   595	   599
$END	   718      M