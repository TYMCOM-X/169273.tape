CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 1
S.MAC	13-JAN-88 11:55		S.MAC - with system parameter file for P035/D, January 1988

     1				SUBTTL	S.MAC - with system parameter file for P035/D, January 1988
     2
     3				IF2,<IFNDEF LISTSN,<TAPE>>	;Skip to PASS2 in all but COMMON.LST
     4				;THIS MODULE ASSEMBLED WITH KS-10 PARAMETER FILE - KSSYM.MAC
     5
     6					IF2,<IFNDEF LISTSN,<		;LIST KSSYM.MAC IN COMMON ONLY
     7					.CREF
     8									TAPE>>
     9				; This file is PRINTF.MAC
    10				DEFINE PRINTF(A,B,C,D),<IF2,<;;Output message on MONKS build only
    11				PRINTX A B C D>>
    12
    13				TITLE CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.
    14
    15					STOPCD(,ENTRY,CIOPR)^
    16					ENTRY	CIOPR		;For library searches
    17	000000'	260040	000000*	CIOPR::PUSHJ	P,DIE		;**** Default stopcode for "CIOPR" ****
    18	000001'	435157	606200		SIXBIT	/CIOPR/  	;Title of module
    19	000002'	000000	000000		S$NONAME,,0		;?NONAME stopcode "CIOPR+nnn(nnnnnn)"
    20			000000'	S$NAME==CIOPR			;For STOPCDs with no arguments
    21					SALL>
    22				^
    23					lall
    24
    25				;(who is JMS? Joseph M Smith did not work for TYMSHARE in 1980)
    26				; **jms4480** KMC SUPPORT FOR NODLOD.SAI ADDED 4-4-1980 /JMS
    27				; **gl 7180** PROTECTIVE CODE FOR UNEXPECTED INTERRUPTS
    28				; **lb 7780** SET/CLEAR MANUAL DOWN FLAG WHEN LOADING DRS
    29
    30				EXTERNAL CPOPJ,CPOPJ1
    31
    32				;Enter here from UUOCON
    33
    34	000003'	704312	000000	CI.OPR::UMOVE	T1,(W)		;FUNCTION,,ADR OF ARG BLOCK
    35	000004'	554340	000006		HLRZ	T2,T1		;T2:=FUNCTION CODE
    36	000005'	303340	000005		CAILE	T2,DLFTL-1	;IN RANGE?
    37					 JRST	[SETO T1,
    38	000006'	254000	000447'			 JRST DLEE]
    39	000007'	256007	000067'		XCT	DLFT(T2)	;YES, PERFORM FUNCTION.
    40	000010'	354001	000000		 AOSA (P)		;SUCCESS
    41	000011'	705312	000000	DLEE:	  UMOVEM T1,(W)		;ERROR CODE FOR USER.
    42	000012'	263040	000000		POPJ P,
    43
    44
    45				IFCPU (KS)^
    46			000000	CPZZ==0
    47				IRP 
    48
    49			000001	IFE CPUTYP-CPUKS,<CPZZ==1>
    50
    51
    52				;END IRP
    53				REPEAT CPZZ^,<	;ENDS ON LAST PAGE.
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 1
CIOPR.MAC	17-SEP-87 16:44		S.MAC - with system parameter file for P035/D, January 1988

    54									; Default definition to JFCL
    55					DEFINE KMCMDN,<JFCL 0>
    56					DEFINE KMCMUP,<JFCL 0>
    57
    58				IFKMC^REPEAT 1,^<					; If this is for a KMC system
    59				  IFDEF KMCVEC,<			;   and the KMC is defined
    60					DEFINE KMCMDN,<PUSHJ P,KMCSMN##>
    61					DEFINE KMCMUP,<PUSHJ P,KMCCMN##>>>
    62
    63				;DR11C hardware parameters.
    64
    65				DEFINE IOREG(REGISTERNAME,OFFSET,BITNAMES,MSB),<
    66				 BIT==100000
    67				IFNB <MSB>,<BIT==MSB>
    68				DR'REGISTERNAME==OFFSET
    69				IRP BITNAMES,<REGISTERNAME'BITNAMES==BIT
    70				              BIT==BIT/2>
    71				>
    72
    73				IOREG(CSR,0,<RB,,,,,,,,RA,IEA,IEB,,,,1,0>)^
    74			100000	 BIT==100000
    75				IFNB <>,<BIT==>
    76			000000	DRCSR==0
    77				IRP 
    78			100000	CSRRB==BIT
    79			040000	              BIT==BIT/2
    80
    81			040000	CSR==BIT
    82			020000	              BIT==BIT/2
    83
    84			020000	CSR==BIT
    85			010000	              BIT==BIT/2
    86
    87			010000	CSR==BIT
    88			004000	              BIT==BIT/2
    89
    90			004000	CSR==BIT
    91			002000	              BIT==BIT/2
    92
    93			002000	CSR==BIT
    94			001000	              BIT==BIT/2
    95
    96			001000	CSR==BIT
    97			000400	              BIT==BIT/2
    98
    99			000400	CSR==BIT
   100			000200	              BIT==BIT/2
   101
   102			000200	CSRRA==BIT
   103			000100	              BIT==BIT/2
   104
   105			000100	CSRIEA==BIT
   106			000040	              BIT==BIT/2
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 1-2
CIOPR.MAC	17-SEP-87 16:44		S.MAC - with system parameter file for P035/D, January 1988

   107
   108			000040	CSRIEB==BIT
   109			000020	              BIT==BIT/2
   110
   111			000020	CSR==BIT
   112			000010	              BIT==BIT/2
   113
   114			000010	CSR==BIT
   115			000004	              BIT==BIT/2
   116
   117			000004	CSR==BIT
   118			000002	              BIT==BIT/2
   119
   120			000002	CSR1==BIT
   121			000001	              BIT==BIT/2
   122
   123			000001	CSR0==BIT
   124			000000	              BIT==BIT/2
   125
   126
   127				^
   128			000001	 DRFN==CSR0   ;Data ready for node (set by KS10 after loading OB).
   129			000001	 ODOFS==1	;High vector = dispatch when node's read OB.
   130			000002	 KRFMD==CSR1  ;KS10 ready for more data (set by KS10 after reading IB).
   131			000000	 IROFS==0	;Low vector = dispatch when node's written IB.
   132				IOREG(OB,2)^
   133			100000	 BIT==100000
   134				IFNB <>,<BIT==>
   135			000002	DROB==2
   136				IRP 
   137
   138				^
   139				IOREG(IB,4)^
   140			100000	 BIT==100000
   141				IFNB <>,<BIT==>
   142			000004	DRIB==4
   143				IRP 
   144
   145				^
   146
   147				;Macro to make a DR11c known to the system.
   148				;Since the concatenation operator can't be used outside of
   149				; macro definitions, we have to use the SETxxx macros.
   150
   151				DEFINE SETBASEADDRESS(N,ADDRESS),<DR'N'BA==ADDRESS>
   152
   153				DEFINE SETVECTORADDRESS(N,ADDRESS),<DR'N'VL==ADDRESS>
   154
   155				DEFINE DR11C(BASEADDRESS,VECTORBASE),<
   156				SETBASEADR(\NUMDR,BASEADDRESS)
   157				SETVECTORADDRESS(\NUMDR,VECTORADDRESS)
   158				IF1,<BLOCK 8>
   159				IF2,<DRINTH(\NUMDR)>
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 1-3
CIOPR.MAC	17-SEP-87 16:44		S.MAC - with system parameter file for P035/D, January 1988

   160				NUMDR==NUMDR+1
   161				>
   162
   163			000000	NUMDR==0
   164
   165				;macro to protect against & count unexpected dr interrupts. /GL 7-1-80
   166				;  and to move a JSR DX#INT into EPT+base+vec.
   167				DEFINE DRXJSR(N,UBA,VEC),<
   168					JRST	DY'N'CNT+1
   169				DX'N'INT: EXP 0
   170					AOS DX'N'CNT
   171					JEN @DX'N'INT
   172				DX'N'CNT: EXP 0
   173				DY'N'INT: EXP 0
   174					AOS DY'N'CNT
   175					JEN @DY'N'INT
   176				DY'N'CNT: EXP 0
   177					MOVE	T2,EPT+100+UBA	;T2/ BASE VECTOR ADDRESS
   178					MOVE	T1,[JSR DX'N'INT]
   179					MOVEM	T1,VEC'/4(T2)
   180					HRRI	T1,DY'N'INT
   181					MOVEM	T1,VEC'/4+1(T2)
   182				>  ;End of DEFINE DRXJSR
   183
   184				;Insert definitions here.
   185				DR11C(767770,300/4)^
   186			767770	SETBASEADR(\NUMDR,767770)^DR0BA==767770^
   187			000060	SETVECTORADDRESS(\NUMDR,300/4)^DR0VL==300/4^
   188				IF1,<BLOCK 8>
   189				IF2,<DRINTH(\NUMDR)>^	;DR0 interrupt handler
   190	000013'	000000	000000	DR0IRF:0
   191	000014'	000000	000000	DR0IR:0
   192	000015'	476000	000013'		SETOM DR0IRF
   193	000016'	254520	000014'		JEN @DR0IR
   194	000017'	777777	777777	DR0ODF:-1
   195	000020'	000000	000000	DR0OD:0
   196	000021'	476000	000017'		SETOM DR0ODF
   197	000022'	254520	000020'		JEN @DR0OD
   198				^
   199			000001	NUMDR==NUMDR+1
   200				^
   201				DR11C(767760,310/4)^
   202			767760	SETBASEADR(\NUMDR,767760)^DR1BA==767760^
   203			000062	SETVECTORADDRESS(\NUMDR,310/4)^DR1VL==310/4^
   204				IF1,<BLOCK 8>
   205				IF2,<DRINTH(\NUMDR)>^	;DR1 interrupt handler
   206	000023'	000000	000000	DR1IRF:0
   207	000024'	000000	000000	DR1IR:0
   208	000025'	476000	000023'		SETOM DR1IRF
   209	000026'	254520	000024'		JEN @DR1IR
   210	000027'	777777	777777	DR1ODF:-1
   211	000030'	000000	000000	DR1OD:0
   212	000031'	476000	000027'		SETOM DR1ODF
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 1-4
CIOPR.MAC	17-SEP-87 16:44		S.MAC - with system parameter file for P035/D, January 1988

   213	000032'	254520	000030'		JEN @DR1OD
   214				^
   215			000002	NUMDR==NUMDR+1
   216				^		; **jms4480**
   217				DR11C(767750,320/4)^
   218			767750	SETBASEADR(\NUMDR,767750)^DR2BA==767750^
   219			000064	SETVECTORADDRESS(\NUMDR,320/4)^DR2VL==320/4^
   220				IF1,<BLOCK 8>
   221				IF2,<DRINTH(\NUMDR)>^	;DR2 interrupt handler
   222	000033'	000000	000000	DR2IRF:0
   223	000034'	000000	000000	DR2IR:0
   224	000035'	476000	000033'		SETOM DR2IRF
   225	000036'	254520	000034'		JEN @DR2IR
   226	000037'	777777	777777	DR2ODF:-1
   227	000040'	000000	000000	DR2OD:0
   228	000041'	476000	000037'		SETOM DR2ODF
   229	000042'	254520	000040'		JEN @DR2OD
   230				^
   231			000003	NUMDR==NUMDR+1
   232				^		; **jms4480**
   233				DR11C(767740,330/4)^
   234			767740	SETBASEADR(\NUMDR,767740)^DR3BA==767740^
   235			000066	SETVECTORADDRESS(\NUMDR,330/4)^DR3VL==330/4^
   236				IF1,<BLOCK 8>
   237				IF2,<DRINTH(\NUMDR)>^	;DR3 interrupt handler
   238	000043'	000000	000000	DR3IRF:0
   239	000044'	000000	000000	DR3IR:0
   240	000045'	476000	000043'		SETOM DR3IRF
   241	000046'	254520	000044'		JEN @DR3IR
   242	000047'	777777	777777	DR3ODF:-1
   243	000050'	000000	000000	DR3OD:0
   244	000051'	476000	000047'		SETOM DR3ODF
   245	000052'	254520	000050'		JEN @DR3OD
   246				^
   247			000004	NUMDR==NUMDR+1
   248				^		; **jms4480**
   249
   250				DEFINE DRINTH(N),<	;DR'N interrupt handler
   251				DR'N'IRF:0
   252				DR'N'IR:0
   253					SETOM DR'N'IRF
   254					JEN @DR'N'IR
   255				DR'N'ODF:-1
   256				DR'N'OD:0
   257					SETOM DR'N'ODF
   258					JEN @DR'N'OD
   259				>;DEFINE DRINTH
   260
   261	000053'			DRIVTB:			;Interrupt vector table
   262				DEFINE DRVECL(N) <
   263					DR'N'VL
   264				>
   265
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 1-5
CIOPR.MAC	17-SEP-87 16:44		S.MAC - with system parameter file for P035/D, January 1988

   266				IF1,<BLOCK NUMDR>
   267				IF2,<
   268			000000	ZZ==0
   269				REPEAT NUMDR,<
   270					DRVECL(\ZZ)
   271				ZZ==ZZ+1
   272				>>
   273
   274					DRVECL(\ZZ)^
   275	000053'	000000	000060		DR0VL
   276				^
   277			000001	ZZ==ZZ+1
   278
   279
   280					DRVECL(\ZZ)^
   281	000054'	000000	000062		DR1VL
   282				^
   283			000002	ZZ==ZZ+1
   284
   285
   286					DRVECL(\ZZ)^
   287	000055'	000000	000064		DR2VL
   288				^
   289			000003	ZZ==ZZ+1
   290
   291
   292					DRVECL(\ZZ)^
   293	000056'	000000	000066		DR3VL
   294				^
   295			000004	ZZ==ZZ+1
   296
   297
   298	000057'			DRFLTB:			;Flag address table
   299				DEFINE DRFLAG(N) <
   300					DR'N'IRF,,DR'N'ODF
   301				>
   302				IF1,<BLOCK NUMDR>
   303				IF2,<
   304			000000	ZZ==0
   305				REPEAT NUMDR,<
   306					DRFLAG(\ZZ)
   307				ZZ==ZZ+1
   308				>>
   309
   310					DRFLAG(\ZZ)^
   311	000057'	000013'	000017'		DR0IRF,,DR0ODF
   312				^
   313			000001	ZZ==ZZ+1
   314
   315
   316					DRFLAG(\ZZ)^
   317	000060'	000023'	000027'		DR1IRF,,DR1ODF
   318				^
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 1-6
CIOPR.MAC	17-SEP-87 16:44		S.MAC - with system parameter file for P035/D, January 1988

   319			000002	ZZ==ZZ+1
   320
   321
   322					DRFLAG(\ZZ)^
   323	000061'	000033'	000037'		DR2IRF,,DR2ODF
   324				^
   325			000003	ZZ==ZZ+1
   326
   327
   328					DRFLAG(\ZZ)^
   329	000062'	000043'	000047'		DR3IRF,,DR3ODF
   330				^
   331			000004	ZZ==ZZ+1
   332
   333
   334	000063'			DRBATB:			;Base address table
   335				DEFINE DRBADR(N) <
   336					3,,DR'N'BA
   337				>
   338				IF1,<BLOCK NUMDR>
   339				IF2,<
   340			000000	ZZ==0
   341				REPEAT NUMDR,<
   342					DRBADR(\ZZ)
   343				ZZ==ZZ+1
   344				>>
   345
   346					DRBADR(\ZZ)^
   347	000063'	000003	767770		3,,DR0BA
   348				^
   349			000001	ZZ==ZZ+1
   350
   351
   352					DRBADR(\ZZ)^
   353	000064'	000003	767760		3,,DR1BA
   354				^
   355			000002	ZZ==ZZ+1
   356
   357
   358					DRBADR(\ZZ)^
   359	000065'	000003	767750		3,,DR2BA
   360				^
   361			000003	ZZ==ZZ+1
   362
   363
   364					DRBADR(\ZZ)^
   365	000066'	000003	767740		3,,DR3BA
   366				^
   367			000004	ZZ==ZZ+1
   368
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 2
CIOPR.MAC	17-SEP-87 16:44		Dispatch for KS version of CIOPR

   369				SUBTTL	Dispatch for KS version of CIOPR
   370
   371				;FUNCTION HANDLERS ARE PASSED ADR OF ARG BLOCK IN T1.RH.
   372				;SINGLE RETURN IF FUNCTION EXECUTED NORMALLY.
   373				;ON ERROR, SKIP RETURN WITH ERROR CODE IN T1.
   374	000067'	260040	000100'	DLFT:	PUSHJ	P,DLSCI		;0 SELECT COMMUNICATIONS INTERFACE.
   375	000070'	260040	000264'		PUSHJ	P,DLSEDR	;1 PREPARE DR11C FOR DATA.
   376	000071'	260040	000231'		PUSHJ	P,DLWDR		;2 WRITE WORD TO DR11C.
   377	000072'	260040	000246'		PUSHJ	P,DLRDR		;3 READ WORD FROM DR11C.
   378	000073'	260040	000312'		PUSHJ	P,DLDDR		;4 RELEASE DR11C TO KMC & NEXILIS NODE.
   379	000074'	260040	000075'		PUSHJ	P,DLKMCD	;5 GIVES ERROR RETURN IF KMCDO IS 0
   380			000006	DLFTL==.-DLFT
   381
   382				;DLKMCD (FUNCTION 5) - TEST IF KMC IS SELECTED
   383
   384	000075'	336000	000000*	DLKMCD:	SKIPN	KMCDO##		;(5) CHECK IF KMCDO IS SET
   385	000076'	350001	000000		  AOS	(P)
   386	000077'	263040	000000		POPJ	P,
   387
   388				;DLSCI (FUNCTION 0) - SELECT COMMUNICATIONS INTERFACE.
   389				; ARG 0: INTERFACE TYPE: 0=CTYSIM, 1=DZKON, 2=TYMBASE NODE, 3=DR11C
   390				; **jms4480** THIS FUNCTION DOES NOT ALLOW  FOR MULTIPLE
   391				; **jms4480** DR'S (ALSO DR0 MUST BE USED). TO USE MORE THAN
   392				; **jms4480** 1 DR, THE KMC IS REQUIRED IN WHICH CASE THE (KMC)
   393				; **jms4480** INTERFACE SHOULD BE CLEARED FROM USER LEVEL.
   394
   395	000100'	260040	000111'	DLSCI:	PUSHJ	P,DLREI		;REMOVE EXISTING INTERFACES.
   396					UHRRZ	T2,(T1)		;GET INTERFACE TYPE.
   397				XCTBU	<HRRZ T2,(T1)		>^SALL
   398	000101'	256200	000451'
   399	000102'	303340	000003		CAILE	T2,3
   400	000103'	254000	000351'		 JRST	DLE0		;ILLEGAL INTERFACE TYPE.
   401	000104'	254027	000105'		JRST	@.+1(T2)
   402	000105'	000000	000215'		DLICTY		;0 CTY
   403	000106'	000000	000223'		DLIDZ		;1 DZ
   404	000107'	000000	000230'		DLINN		;2 KMC
   405	000110'	000000	000210'		DLIDR		;3 DR
   406				;*;	DLREI
   407
   408				;DLREI.  REMOVE LINKS BETWEEN DZKON, CTYSIM AND SYSTEM.
   409	000111'	332000	000000*	DLREI:	SKIPE	CTYDO##
   410	000112'	255000	000000		 JFCL	;**D*	 PUSHJ P,DLRCTY
   411	000113'	332000	000000*		SKIPE	DZDO##
   412	000114'	260040	000154'		 PUSHJ	P,DLRDZ
   413	000115'	332000	000000*		SKIPE	DRDO##
   414	000116'	260040	000122'		 PUSHJ	P,DLRDRI
   415	000117'	332000	000075*		SKIPE	KMCDO##
   416	000120'	255000	000000		 JFCL			;KMC IS NEVER REMOVED
   417	000121'	263040	000000		POPJ	P,
   418
   419				EXTERNAL EPT,CPOPJ1
   420
   421				;Remove DR interface
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 2-2
CIOPR.MAC	17-SEP-87 16:44		Dispatch for KS version of CIOPR

   422
   423	000122'	201340	000000	DLRDRI:	MOVEI	T2,0		;Clear DR0's CSR
   424	000123'	200400	000063'		MOVE	T3,DRBATB	; **jms4480** ONLY DR0 SUPPORTED
   425								; **jms4480** AT THIS LEVEL.
   426	000124'	713350	000000		WRIO	T2,DRCSR(T3)
   427	000125'	201400	000000*		MOVEI	T3,CH7##
   428	000126'	201340	000000*		MOVEI	T2,CLKDR##
   429	000127'	700600	000400		WRPI	LI.PIF
   430	000130'	260040	000175'		PUSHJ	P,DLUIR		;Unlink CLKDR from CH7
   431	000131'	256000	000000'		  STOPCD
   432	000132'	700600	000200		WRPI	LI.PIN
   433	000133'	263040	000000		POPJ	P,
   434
   435				;Remove CTY interface
   436
   437	000134'	201400	000125*	DLRCTY:	MOVEI	T3,CH7##
   438	000135'	201340	000000*		MOVEI	T2,CH7LK##
   439	000136'	700600	000400		WRPI	LI.PIF
   440	000137'	260040	000175'		PUSHJ	P,DLUIR		;Unlink CH7LK from CH7
   441	000140'	256000	000000'		  STOPCD
   442	000141'	201400	000000*		MOVEI	T3,CH6##
   443	000142'	201340	000000*		MOVEI	T2,CH6LK##
   444	000143'	260040	000175'		PUSHJ	P,DLUIR		;Unlink CH6LK from CH6
   445	000144'	256000	000000'		  STOPCD
   446	000145'	201400	000141*		MOVEI	T3,CH6##
   447	000146'	201340	000000*		MOVEI	T2,CH6KST##
   448	000147'	260040	000175'		PUSHJ	P,DLUIR		;Unlink CH6KST from CH6
   449	000150'	256000	000000'		  STOPCD
   450	000151'	402000	000111*		SETZM	CTYDO##
   451	000152'	700600	000200		WRPI	LI.PIN
   452	000153'	263040	000000		POPJ	P,
   453
   454				;Remove DZ interface
   455
   456	000154'	700600	000400	DLRDZ:	WRPI	LI.PIF
   457	000155'	260040	000000*		PUSHJ	P,DZREM##	;TURN OFF DZ11S.
   458	000156'	201400	000134*		MOVEI	T3,CH7##
   459	000157'	201340	000000*		MOVEI	T2,DZPINT##
   460	000160'	260040	000175'		PUSHJ	P,DLUIR		;Unlink DZPINT from CH7
   461	000161'	256000	000000'		  STOPCD
   462	000162'	201400	000145*		MOVEI	T3,CH6##
   463	000163'	201340	000000*		MOVEI	T2,PERINT##
   464	000164'	260040	000175'		PUSHJ	P,DLUIR		;Unlink PERINT from CH6
   465	000165'	256000	000000'		  STOPCD
   466	000166'	201400	000162*		MOVEI	T3,CH6##
   467	000167'	201340	000000*		MOVEI	T2,CONINT##
   468	000170'	260040	000175'		PUSHJ	P,DLUIR		;Unlink CONINT from CH6
   469	000171'	256000	000000'		  STOPCD
   470	000172'	402000	000113*		SETZM	DZDO##
   471	000173'	700600	000200		WRPI	LI.PIN
   472	000174'	263040	000000		POPJ	P,
   473
   474				;DLUIR.  UNLINK INTERRUPT ROUTINE WHOSE ADDRESS IS IN
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 2-3
CIOPR.MAC	17-SEP-87 16:44		Dispatch for KS version of CIOPR

   475				; T2 FROM CHAIN ON CHANNEL IN T3.
   476				;SINGLE RETURN IF COULDN'T FIND THE ROUTINE.  OTHERWISE
   477				; SKIP AFTER UNLINKING IT.
   478	000175'	334640	000010	DLUIR:	SKIPA	P2,T3		;Unlink Interrupt Routine
   479	000176'	334400	000011	DLUIR0:	 SKIPA	T3,T4		;PREVIOUS:=CURRENT
   480	000177'	551450	000000		  HRRZI	T4,(T3)		;T3:=PREVIOUS
   481	000200'	550451	000001		HRRZ	T4,1(T4)	;T4:ENT
   482	000201'	306455	000000		CAIN	T4,(P2)		;LOOPED AROUND?
   483	000202'	263040	000000		 POPJ	P,		;YEP, DIDN'T FIND IT.
   484	000203'	302447	000000		CAIE	T4,(T2)
   485	000204'	254000	000176'		 JRST	DLUIR0
   486	000205'	200451	000001	DLUIR1:	MOVE	T4,1(T4)	;PREVIOUS.NEXT:=CURRENT.NEXT.
   487	000206'	202450	000001		MOVEM	T4,1(T3)
   488	000207'	254000	000000*		JRST	CPOPJ1
   489
   490				;Install DR11C interface to NEXILIS node
   491
   492	000210'	700600	000400	DLIDR:	WRPI	LI.PIF
   493	000211'	476000	000115*		SETOM	DRDO##
   494	000212'	260040	000000*		PUSHJ	P,DRINI##
   495	000213'	700600	000200		WRPI	LI.PIN
   496	000214'	263040	000000		POPJ	P,
   497
   498				;Install CTY interface
   499
   500	000215'	700600	000400	DLICTY:	WRPI	LI.PIF
   501	000216'	476000	000151*		SETOM	CTYDO##
   502	000217'	476000	000000*		SETOM	NOWIN##		;SAY PORT LOGGED IN.
   503	000220'	260040	000000*		PUSHJ	P,CTYSET##
   504	000221'	700600	000200		WRPI	LI.PIN
   505	000222'	263040	000000		POPJ	P,
   506
   507				;Install DZ-11 driver interface
   508
   509	000223'	700600	000400	DLIDZ:	WRPI	LI.PIF
   510	000224'	476000	000172*		SETOM	DZDO##
   511	000225'	260040	000000*		PUSHJ	P,DZINI##
   512	000226'	700600	000200		WRPI	LI.PIN
   513	000227'	263040	000000		POPJ	P,
   514
   515				;Install KMC to NEXILIS node interface
   516
   517	000230'			DLINN:
   518				;*;	SETOM	KMCDO##		;ASSUME KMCDO IS ALREADY SET
   519	000230'	263040	000000		POPJ	P,
   520
   521				;DLWDR (FUNCTION 2) - WRITE WORD TO SELECTED DR11C.
   522				; ARG 0: DR11C#,,16 BIT WORD TO SEND
   523	000231'	260040	000335'	DLWDR:	PUSHJ	P,DLSDR		;GET DR11C BASE ADDRESS.
   524	000232'	254000	000207*		  JRST	CPOPJ1		;ERROR.
   525	000233'	550447	000057'		HRRZ	T4,DRFLTB(T2)	;SEE IF PREVIOUS OUTPUT TAKEN.
   526	000234'	336011	000000		SKIPN	(T4)
   527	000235'	265300	000343'		 JSP	T1,DLWAIT
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 2-4
CIOPR.MAC	17-SEP-87 16:44		Dispatch for KS version of CIOPR

   528	000236'	700600	000400		WRPI	LI.PIF
   529	000237'	402011	000000		SETZM	(T4)		;CLEAR TAKEN FLAG.
   530	000240'	713414	000002		WRIO	T3,DROB(P1)	;SEND WORD
   531	000241'	201400	000001		MOVEI	T3,DRFN
   532	000242'	715414	000000		BCIO	T3,DRCSR(P1)
   533	000243'	714414	000000		BSIO	T3,DRCSR(P1)	;TELL DR NEW DATA IS READY
   534	000244'	700600	000200		WRPI	LI.PIN
   535	000245'	263040	000000		POPJ	P,
   536
   537				;DLRDR (FUNCTION 3) - READ WORD FROM SELECTED DR11C.
   538				; ARG 0: DR11C #,,ADR TO RECEIVE WORD READ.
   539	000246'	260040	000335'	DLRDR:	PUSHJ	P,DLSDR		;GET DR11C BASE ADDRESS.
   540	000247'	254000	000232*		  JRST	CPOPJ1		;ERROR.
   541	000250'	554447	000057'		HLRZ	T4,DRFLTB(T2)	;CHECK IF PREVIOUS INPUT RECEIVED.
   542	000251'	336011	000000		SKIPN	(T4)
   543	000252'	265300	000343'		 JSP	T1,DLWAIT
   544	000253'	700600	000400		WRPI	LI.PIF
   545	000254'	402011	000000		SETZM	(T4)		;CLEAR FLAG.
   546	000255'	712454	000004		RDIO	T4,DRIB(P1)	;GET WORD
   547	000256'	705450	000000		UMOVEM	T4,(T3)		;GIVE IT TO USER
   548	000257'	201440	000002		MOVEI	T4,KRFMD
   549	000260'	715454	000000		BCIO	T4,DRCSR(P1)
   550	000261'	714454	000000		BSIO	T4,DRCSR(P1)	;TELL DR INPUT HAS BEEN READ
   551	000262'	700600	000200		WRPI	LI.PIN
   552	000263'	263040	000000		POPJ	P,
   553
   554				;DLSEDR (FUNCTION 1) - SELECT DR11C FOR USE BY THE 2020.
   555				; ARG 0: DR11C #,,0
   556	000264'	260040	000335'	DLSEDR:	PUSHJ	P,DLSDR		;GET HANDLES ON DR11C
   557	000265'	254000	000247*		 JRST	CPOPJ1		;ERROR.
   558	000266'	200300	000007		MOVE	T1,T2		;SET UP T1 FOR SETTING MANUAL DOWN FLAG
   559	000267'	332000	000117*		SKIPE	KMCDO##		;DONT SET IF NO KMC
   560	000270'	255000	000000		  KMCMDN		;SET DR MANUALLY DOWN
   561	000271'	550440	000103*		HRRZ	T4,EPT+103	;SETUP INTERRUPT VECTORS.
   562	000272'	270447	000053'		ADD	T4,DRIVTB(T2)
   563	000273'	554307	000057'		HLRZ	T1,DRFLTB(T2)
   564	000274'	270300	000452'		ADD	T1,[JSR 1]
   565	000275'	202311	000000		MOVEM	T1,IROFS(T4)
   566	000276'	550307	000057'		HRRZ	T1,DRFLTB(T2)
   567	000277'	270300	000452'		ADD	T1,[JSR 1]
   568	000300'	202311	000001		MOVEM	T1,ODOFS(T4)
   569	000301'	201300	000140		MOVEI	T1,CSRIEA+CSRIEB ;ENABLE BOTH INTERRUPTS
   570	000302'	713314	000000		WRIO	T1,DRCSR(P1)
   571	000303'	201300	001750		MOVEI	T1,^D1000	;GIVE IT A CHANCE TO INTERRUPT
   572	000304'	367300	000304'		SOJG	T1,.		;ASSUME NO INT PENDING AFTER THIS.
   573	000305'	554447	000057'		HLRZ	T4,DRFLTB(T2)	;CLEAR INPUT READY FLAG
   574	000306'	402011	000000		SETZM	(T4)
   575	000307'	550447	000057'		HRRZ	T4,DRFLTB(T2)	;SET DR11C READY FOR OUR OUTPUT FLAG
   576	000310'	476011	000000		SETOM	(T4)
   577	000311'	263040	000000		POPJ	P,
   578
   579				;DLDDR (FUNCTION 4) - DESELECT DR11C.
   580				; ARG 0: DR11C #,,0
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 2-5
CIOPR.MAC	17-SEP-87 16:44		Dispatch for KS version of CIOPR

   581	000312'	260040	000335'	DLDDR:	PUSHJ P,DLSDR		;GET HANDLES ON DR11C
   582	000313'	254000	000265*		 JRST CPOPJ1		;ERROR.
   583	000314'	550447	000057'		HRRZ T4,DRFLTB(T2)	;MAKE SURE LAST OUTPUT TAKEN.
   584	000315'	201640	777777		MOVEI P2,-1		;SET COUNT OF 777777
   585	000316'	336011	000000	DLDDR1:	SKIPN (T4)		;CHECK FOR DATA ACCEPTED
   586	000317'	367640	000316'		 SOJG P2,DLDDR1		;KEEP TRYING
   587	000320'	201300	000000		MOVEI T1,0		;DISABLE INTERRUPTS
   588	000321'	713314	000000		WRIO T1,DRCSR(P1)
   589	000322'	336011	000000		SKIPN (T4)
   590	000323'	265300	000343'		 JSP T1,DLWAIT
   591	000324'	200300	000007		MOVE T1,T2		
   592	000325'	332000	000216*		SKIPE	CTYDO##
   593	000326'	263040	000000		  POPJ	P,		;IF RUNNING FORM CONSOLE QUIT NOW.
   594	000327'	336000	000267*		SKIPN KMCDO##		;DONT REINSTALL DR DRIVER IF KMC ACTIVE
   595	000330'	260040	000210'		 PUSHJ P,DLIDR		;REINSTALL DR11C DRIVER
   596	000331'	332000	000327*		SKIPE KMCDO##		;DO CLEAR MANUAL DOWN FLAG IF KMC ACTIVE
   597	000332'	255000	000000		 KMCMUP			;"MANUALLY UP"
   598	000333'	263040	000000		POPJ P,			;WITH OR WITHOUT KMC
   599	000334'	263040	000000		POPJ P,
   600
   601				;DLSDR.  LOAD P1 WITH BASE ADDRESS OF DR11C SPECIFIED BY USER.
   602				; IN ARG 0.  SKIP IF LEGAL DR11C, SINGLE RETURN OTHERWISE.
   603				; T3.RH HAS ARG0.RH.  T2 HAS DR11C NUMBER.
   604	000335'	704406	000000	DLSDR:	UMOVE T3,(T1)
   605	000336'	554340	000010		HLRZ T2,T3		;DR11C NUMBER
   606	000337'	303340	000003		CAILE T2,NUMDR-1
   607	000340'	254000	000351'		 JRST DLE0		;ILLEGAL DR11C NUMBER.
   608	000341'	200607	000063'		MOVE P1,DRBATB(T2)	;T2:=DR11C BASE ADDRESS.
   609	000342'	254000	000313*		JRST CPOPJ1
   610
   611				;DLWAIT.  WAIT UNTIL PREDICATE TRUE (SKIPS).  PUT PREDICATE
   612				; BEFORE JSP T1,DLWAIT.  IF PREDICATE FAILS, SLEEPS FOR
   613				; A WHILE, THEN TRIES AGAIN.  UP TO 100 TRIES ARE ALLOWED.
   614	000343'	201640	777777	DLWAIT:	MOVEI P2,-1
   615	000344'	201700	000002	DLWT1:	MOVEI P3,2		;RESCHEDULE
   616				;	SLEEP P3,	;**D* REMOVED ??
   617	000345'	256006	777776		XCT -2(T1)		;EXECUTE TEST INSTRUCTION
   618	000346'	367640	000344'		 SOJG P2,DLWT1		;RE EXECUTE LOOP IF TEST FAILED
   619	000347'	322640	000352'		JUMPE P2,DLE1		;GO HANDLE ERROR IF P2 WENT TO ZERO
   620	000350'	254006	000000		JRST (T1)		;TEST SUCCEEDED-  RETURN TO CALLER
   621
   622				;ROUTINES FOR RETURNING ERROR CODES.
   623	000351'	265300	000354'	DLE0:	JSP T1,DLERR
   624	000352'	265300	000354'	DLE1:	JSP T1,DLERR
   625	000353'	265300	000354'	DLE2:	JSP T1,DLERR
   626	000354'	551306	000000*	DLERR:	HRRZI T1,-DLE0+1(T1)
   627	000355'	254000	000342*		JRST CPOPJ1
   628
   629				;ROUTINE TO SETUP EPT FOR DR INTERRUPT PROTECTION. /GL 7-1-80
   630	000356'			DRPROT::		;DESTROYS T1
   631	000356'	254000	000367'		DRXJSR(1,3,300)
   632	000357'	000000	000000
   633	000360'	350000	000362'
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 2-6
CIOPR.MAC	17-SEP-87 16:44		Dispatch for KS version of CIOPR

   634	000361'	254520	000357'
   635	000362'	000000	000000
   636	000363'	000000	000000
   637	000364'	350000	000366'
   638	000365'	254520	000363'
   639	000366'	000000	000000
   640	000367'	200340	000103*
   641	000370'	200300	000453'
   642	000371'	202307	000060
   643	000372'	541300	000363'
   644	000373'	202307	000061
   645						;DR#,UBA#,11VECTOR
   646	000374'	254000	000405'		DRXJSR(2,3,310)
   647	000375'	000000	000000
   648	000376'	350000	000400'
   649	000377'	254520	000375'
   650	000400'	000000	000000
   651	000401'	000000	000000
   652	000402'	350000	000404'
   653	000403'	254520	000401'
   654	000404'	000000	000000
   655	000405'	200340	000103*
   656	000406'	200300	000454'
   657	000407'	202307	000062
   658	000410'	541300	000401'
   659	000411'	202307	000063
   660	000412'	254000	000423'		DRXJSR(3,3,320)
   661	000413'	000000	000000
   662	000414'	350000	000416'
   663	000415'	254520	000413'
   664	000416'	000000	000000
   665	000417'	000000	000000
   666	000420'	350000	000422'
   667	000421'	254520	000417'
   668	000422'	000000	000000
   669	000423'	200340	000103*
   670	000424'	200300	000455'
   671	000425'	202307	000064
   672	000426'	541300	000417'
   673	000427'	202307	000065
   674	000430'	254000	000441'		DRXJSR(4,3,330)
   675	000431'	000000	000000
   676	000432'	350000	000434'
   677	000433'	254520	000431'
   678	000434'	000000	000000
   679	000435'	000000	000000
   680	000436'	350000	000440'
   681	000437'	254520	000435'
   682	000440'	000000	000000
   683	000441'	200340	000103*
   684	000442'	200300	000456'
   685	000443'	202307	000066
   686	000444'	541300	000435'
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 2-7
CIOPR.MAC	17-SEP-87 16:44		Dispatch for KS version of CIOPR

   687	000445'	202307	000067
   688	000446'	263040	000000		POPJ	P,
   689
   690Q				> ;END IFCPU (KS) STARTING PAGE 1.
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 3
CIOPR.MAC	17-SEP-87 16:44		Dispatch for F3 version of CIOPR

   691				SUBTTL	Dispatch for F3 version of CIOPR
   692
   693				IFCPU (F3),<
   694				;FUNCTION HANDLERS ARE PASSED ADR OF ARG BLOCK IN T1.RH.
   695				;SINGLE RETURN IF FUNCTION EXECUTED NORMALLY.
   696				;ON ERROR, SKIP RETURN WITH ERROR CODE IN T1.
   697				DLFT:	PUSHJ	P,DLSCI		;0 SELECT COMMUNICATIONS INTERFACE.
   698					PUSHJ	P,DLSEDR	;1 PREPARE DR11C FOR DATA.
   699					PUSHJ	P,DLWDR		;2 WRITE WORD TO DR11C.
   700					PUSHJ	P,DLRDR		;3 READ WORD FROM DR11C.
   701					PUSHJ	P,DLDDR		;4 RELEASE DR11C TO KMC & NEXILIS NODE.
   702					PUSHJ	P,DLKMCD	;5 GIVES ERROR RETURN IF KMCDO IS 0
   703				DLFTL==.-DLFT
   704				
   705				;ERROR CODE RETURNS
   706				ERRET0:	JSP T1,ERRETN	;ERROR RETURN WITH T1/ ERROR CODE
   707				ERRET1:	JSP T1,ERRETN
   708				ERRET2:	JSP T1,ERRETN
   709				ERRETN:	HRRZI T1,-ERRET0+1(T1)
   710					JRST CPOPJ1
   711				
   712				
   713				
   714				DLSCI:	UHRRZ	T2,(T1)		;(0) GET INTERFACE TYPE
   715					SETZM	T1
   716					CAIE	T2,2		;ONLY TYMBASE IS LEGAL
   717					 JRST	ERRET0		;ERROR RETURN 0
   718					POPJ	P,		;NON-ERROR RETURN
   719				repeat 10,<jfcl>
   720				
   721				DLSEDR:	UMOVE	T3,(T1)	        ;(1) SELECT DR
   722					SETZM	T1
   723					HLRZ	T2,T3		;/T2 INTERFACE NUMBER
   724					CAIE	T2,0		;ONLY ALLOWED TO SELECT DR 0
   725					 JRST ERRET0
   726					POPJ P,
   727				repeat 10,<jfcl>
   728				
   729				DLWDR:	UMOVE	T3,(T1)		;(2) WRITE TO DR
   730					SETZM	T1
   731					HLRZ	T2,T3		;/T2 INTERFACE NUMBER
   732					CAIE	T2,0
   733					 JRST	ERRET0
   734				PRINTF	(<[No code to let F3 load its own base]>)
   735					POPJ	P,		;NOOP
   736				repeat 10,<jfcl>
   737				
   738				DLRDR:	UMOVE	T3,(T1)		;(3) READ FROM DR
   739					SETZM	T1
   740					HLRZ	T2,T3		;/T2 INTERFACE NUMBER
   741					CAIE	T2,0
   742					 JRST	ERRET0
   743					POPJ	P,		;NOOP
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 3-2
CIOPR.MAC	17-SEP-87 16:44		Dispatch for F3 version of CIOPR

   744				repeat 10,<jfcl>
   745				
   746				DLDDR:	UMOVE	T3,(T1)		;(4) DONE WITH DR
   747					SETZM	T1
   748					HLRZ	T2,T3		;/T2 INTERFACE NUMBER
   749					CAIE	T2,0
   750					 JRST	ERRET0
   751					POPJ	P,		;NOOP
   752				repeat 10,<jfcl>
   753				
   754				DLKMCD:	SETOM	T1		;(5) CHECK IF KMCDO IS SET
   755					JRST	CPOPJ1		;SKIP RETURN FOR ERROR (NO KMC ON F3s)
   756				repeat 10,<jfcl>
   757				
   758				>  ;End IFCPU(F3)
   759
   760	000447'	474300	000000		$END	(CIO)

   761	000450'	254000	000011'

   762	000451'	550346	000000

   763	000452'	264000	000001

   764	000453'	264000	000357'

   765	000454'	264000	000375'

   766	000455'	264000	000413'

   767	000456'	264000	000431'

   768						;End of CIOSER (CIOLIT: CIOEND:)
   769
?1 ERROR DETECTED
PROGRAM BREAK IS 000457
7K CORE USED
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88 PAGE 4
CIOPR.MAC	17-SEP-87 16:44		SYMBOL TABLE

BCIO	715000	000000		DLUIR0		000176'		DY4CNT		000440'		
BIT		100000	SPD	DLUIR1		000205'		DY4INT		000435'		
BSIO	714000	000000		DLWAIT		000343'		DZDO		000224'	EXT	
CH6		000166'	EXT	DLWDR		000231'		DZINI		000225'	EXT	
CH6KST		000146'	EXT	DLWT1		000344'		DZPINT		000157'	EXT	
CH6LK		000142'	EXT	DR0BA		767770	SPD	DZREM		000155'	EXT	
CH7		000156'	EXT	DR0IR		000014'		EPT		000000	EXT	
CH7LK		000135'	EXT	DR0IRF		000013'		IROFS		000000	SPD	
CI.OPR		000003'	INT	DR0OD		000020'		KMCDO		000331'	EXT	
CIOEND		000456'	INT	DR0ODF		000017'		KRFMD		000002	SPD	
CIOLIT		000447'	INT	DR0VL		000060	SPD	LI.PIF		000400	SPD	
CIOPR		000000'	ENT	DR1BA		767760	SPD	LI.PIN		000200	SPD	
CLKDR		000126'	EXT	DR1IR		000024'		NODIE		000000	EXT	
CONINT		000167'	EXT	DR1IRF		000023'		NOWIN		000217'	EXT	
CPOPJ		000000	EXT	DR1OD		000030'		NUMDR		000004	SPD	
CPOPJ1		000355'	EXT	DR1ODF		000027'		ODOFS		000001	SPD	
CPUF3		000004	SPD	DR1VL		000062	SPD	P		000001	INT	
CPUKS		000003	SPD	DR2BA		767750	SPD	P1		000014	INT	
CPUTYP		000003	SPD	DR2IR		000034'		P2		000015	INT	
CPZZ		000000	SPD	DR2IRF		000033'		P3		000016	INT	
CSR		000004	SPD	DR2OD		000040'		PERINT		000163'	EXT	
CSR0		000001	SPD	DR2ODF		000037'		PX.MEM		000004	SPD	
CSR1		000002	SPD	DR2VL		000064	SPD	PXCT	256000	000000		
CSRIEA		000100	SPD	DR3BA		767740	SPD	RDIO	712000	000000		
CSRIEB		000040	SPD	DR3IR		000044'		S$ENTR	777777	777775	SIN	
CSRRA		000200	SPD	DR3IRF		000043'		S$HALT	777777	777777	SIN	
CSRRB		100000	SPD	DR3OD		000050'		S$NAME		000000'	SPD	
CTYDO		000325'	EXT	DR3ODF		000047'		S$NONA		000000	SIN	
CTYSET		000220'	EXT	DR3VL		000066	SPD	S$TEMP		000000	SPD	
DIE		000000'	EXT	DRBATB		000063'		S$XCT	777777	777776	SIN	
DLDDR		000312'		DRCSR		000000	SPD	T1		000006	INT	
DLDDR1		000316'		DRDO		000211'	EXT	T2		000007	INT	
DLE0		000351'		DRFLTB		000057'		T3		000010	INT	
DLE1		000352'		DRFN		000001	SPD	T4		000011	INT	
DLE2		000353'		DRIB		000004	SPD	UMOVE	704000	000000		
DLEE		000011'		DRINI		000212'	EXT	UMOVEM	705000	000000		
DLERR		000354'		DRIVTB		000053'		W		000012	INT	
DLFT		000067'		DROB		000002	SPD	WRIO	713000	000000		
DLFTL		000006	SPD	DRPROT		000356'	INT	WRPI	700600	000000		
DLICTY		000215'		DX1CNT		000362'		ZZ	000050	626272	SPD	
DLIDR		000210'		DX1INT		000357'		
DLIDZ		000223'		DX2CNT		000400'		
DLINN		000230'		DX2INT		000375'		
DLKMCD		000075'		DX3CNT		000416'		
DLRCTY		000134'		DX3INT		000413'		
DLRDR		000246'		DX4CNT		000434'		
DLRDRI		000122'		DX4INT		000431'		
DLRDZ		000154'		DY1CNT		000366'		
DLREI		000111'		DY1INT		000363'		
DLSCI		000100'		DY2CNT		000404'		
DLSDR		000335'		DY2INT		000401'		
DLSEDR		000264'		DY3CNT		000422'		
DLUIR		000175'		DY3INT		000417'		

CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88
CIOPR.MAC	17-SEP-87 16:44		Symbol cross reference

BIT	    74#	    78	    79	    79#	    81	    82	    82#	    84	    85	    85#	    87	    88	    88#	    90
	    91	    91#	    93	    94	    94#	    96	    97	    97#	    99	   100	   100#	   102	   103	   103#
	   105	   106	   106#	   108	   109	   109#	   111	   112	   112#	   114	   115	   115#	   117	   118
	   118#	   120	   121	   121#	   123	   124	   124#	   133#	   140#
CH6	   442%	   442	   446%	   446	   462%	   462	   466%	   466
CH6KST	   447%	   447
CH6LK	   443%	   443
CH7	   427%	   427	   437%	   437	   458%	   458
CH7LK	   438%	   438
CI.OPR	    34#
CIOEND	   768#
CIOLIT	   760#
CIOPR	    16	    17#	    20
CLKDR	   428%	   428
CONINT	   467%	   467
CPOPJ	    30%
CPOPJ1	    30%	   419%	   488	   524	   540	   557	   582	   609	   627
CPUF3	   693
CPUKS	    49
CPUTYP	    49	   693
CPZZ	    46#	    49#	    53	   693#	   693
CSR	    81#	    84#	    87#	    90#	    93#	    96#	    99#	   111#	   114#	   117#
CSR0	   123#	   128
CSR1	   120#	   130
CSRIEA	   105#	   569
CSRIEB	   108#	   569
CSRRA	   102#
CSRRB	    78#
CTYDO	   409%	   409	   450%	   450	   501%	   501	   592%	   592
CTYSET	   503%	   503
DIE	    16	    16%	    17
DLDDR	   378	   581#
DLDDR1	   585#	   586
DLE0	   400	   607	   623#	   626
DLE1	   619	   624#
DLE2	   625#
DLEE	    38	    41#
DLERR	   623	   624	   625	   626#
DLFT	    39	   374#	   380
DLFTL	    36	   380#
DLICTY	   402	   500#
DLIDR	   405	   492#	   595
DLIDZ	   403	   509#
DLINN	   404	   517#
DLKMCD	   379	   384#
DLRCTY	   437#
DLRDR	   377	   539#
DLRDRI	   414	   423#
DLRDZ	   412	   456#
DLREI	   395	   409#
DLSCI	   374	   395#
DLSDR	   523	   539	   556	   581	   604#
DLSEDR	   375	   556#
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88
CIOPR.MAC	17-SEP-87 16:44		Symbol cross reference

DLUIR	   430	   440	   444	   448	   460	   464	   468	   478#
DLUIR0	   479#	   485
DLUIR1	   486#
DLWAIT	   527	   543	   590	   614#
DLWDR	   376	   523#
DLWT1	   615#	   618
DR0BA	   186#	   347
DR0IR	   191#	   193
DR0IRF	   190#	   192	   311
DR0OD	   195#	   197
DR0ODF	   194#	   196	   311
DR0VL	   187#	   275
DR1BA	   202#	   353
DR1IR	   207#	   209
DR1IRF	   206#	   208	   317
DR1OD	   211#	   213
DR1ODF	   210#	   212	   317
DR1VL	   203#	   281
DR2BA	   218#	   359
DR2IR	   223#	   225
DR2IRF	   222#	   224	   323
DR2OD	   227#	   229
DR2ODF	   226#	   228	   323
DR2VL	   219#	   287
DR3BA	   234#	   365
DR3IR	   239#	   241
DR3IRF	   238#	   240	   329
DR3OD	   243#	   245
DR3ODF	   242#	   244	   329
DR3VL	   235#	   293
DRBATB	   334#	   424	   608
DRCSR	    76#	   426	   532	   533	   549	   550	   570	   588
DRDO	   413%	   413	   493%	   493
DRFLTB	   298#	   525	   541	   563	   566	   573	   575	   583
DRFN	   128#	   531
DRIB	   142#	   546
DRINI	   494%	   494
DRIVTB	   261#	   562
DROB	   135#	   530
DRPROT	   630#
DX1CNT	   633	   635#
DX1INT	   632#	   634	   641
DX2CNT	   648	   650#
DX2INT	   647#	   649	   656
DX3CNT	   662	   664#
DX3INT	   661#	   663	   670
DX4CNT	   676	   678#
DX4INT	   675#	   677	   684
DY1CNT	   631	   637	   639#
DY1INT	   636#	   638	   643
DY2CNT	   646	   652	   654#
DY2INT	   651#	   653	   658
DY3CNT	   660	   666	   668#
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88
CIOPR.MAC	17-SEP-87 16:44		Symbol cross reference

DY3INT	   665#	   667	   672
DY4CNT	   674	   680	   682#
DY4INT	   679#	   681	   686
DZDO	   411%	   411	   470%	   470	   510%	   510
DZINI	   511%	   511
DZPINT	   459%	   459
DZREM	   457%	   457
EPT	   419%	   561	   640	   655	   669	   683
GINST	   398#	   398	   399
IROFS	   131#	   565
KMCDO	   384%	   384	   415%	   415	   559%	   559	   594%	   594	   596%	   596
KMCVEC	    59
KRFMD	   130#	   548
LI.PIF	   429	   439	   456	   492	   500	   509	   528	   544
LI.PIN	   432	   451	   471	   495	   504	   512	   534	   551
LISTSN	     3	     6
NODIE	    16%
NOWIN	   502%	   502
NUMDR	   163#	   186	   187	   189	   199	   199#	   202	   203	   205	   215	   215#	   218	   219	   221
	   231	   231#	   234	   235	   237	   247	   247#	   269	   305	   341	   606
ODOFS	   129#	   568
P	    17	    40	    42	   374	   375	   376	   377	   378	   379	   385	   386	   395	   412	   414
	   417	   430	   433	   440	   444	   448	   452	   457	   460	   464	   468	   472	   483	   494
	   496	   503	   505	   511	   513	   519	   523	   535	   539	   552	   556	   577	   581	   593
	   595	   598	   599	   688
P1	   530	   532	   533	   546	   549	   550	   570	   588	   608
P2	   478	   482	   584	   586	   614	   618	   619
P3	   615
PERINT	   463%	   463
PX.MEM	   398
S$ENTR	    16	    22	   431	   441	   445	   449	   461	   465	   469
S$HALT	    16	   431	   441	   445	   449	   461	   465	   469
S$NAME	    20#	   431	   441	   445	   449	   461	   465	   469
S$NONA	    19	    22	   431	   441	   445	   449	   461	   465	   469
S$TEMP	    16#	    16	   431#	   431	   441#	   441	   445#	   445	   449#	   449	   461#	   461	   465#	   465
	   469#	   469
S$XCT	    22	   431	   441	   445	   449	   461	   465	   469
T1	    34	    35	    37	    41	   398	   527	   543	   558	   563	   564	   565	   566	   567	   568
	   569	   570	   571	   572	   587	   588	   590	   591	   604	   617	   620	   623	   624	   625
	   626	   641	   642	   643	   644	   656	   657	   658	   659	   670	   671	   672	   673	   684
	   685	   686	   687
T2	    35	    36	    39	   398	   399	   401	   423	   426	   428	   438	   443	   447	   459	   463
	   467	   484	   525	   541	   558	   562	   563	   566	   573	   575	   583	   591	   605	   606
	   608	   640	   642	   644	   655	   657	   659	   669	   671	   673	   683	   685	   687
T3	   424	   426	   427	   437	   442	   446	   458	   462	   466	   478	   479	   480	   487	   530
	   531	   532	   533	   547	   604	   605
T4	   479	   480	   481	   482	   484	   486	   487	   525	   526	   529	   541	   542	   545	   546
	   547	   548	   549	   550	   561	   562	   565	   568	   573	   574	   575	   576	   583	   585
	   589
W	    34	    41
ZZ	   268#	   274	   277	   277#	   280	   283	   283#	   286	   289	   289#	   292	   295	   295#	   304#
	   310	   313	   313#	   316	   319	   319#	   322	   325	   325#	   328	   331	   331#	   340#	   346
	   349	   349#	   352	   355	   355#	   358	   361	   361#	   364	   367	   367#	   398#	   398
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88
CIOPR.MAC	17-SEP-87 16:44		Symbol cross reference

ZZ1	   398#	   398
CIOPR UUO TO FIDDLE WITH COMMUNICATIONS INTERFACE.	MACRO 12.5-46.0 14:19 13-JAN-88
CIOPR.MAC	17-SEP-87 16:44		Macro/Opdef cross reference

BCIO	   532	   549
BSIO	   533	   550
DR11C	   155#	   185	   201	   217	   233
DRBADR	   335#	   346	   352	   358	   364
DRFLAG	   299#	   310	   316	   322	   328
DRINTH	   189	   205	   221	   237	   250#
DRVECL	   262#	   274	   280	   286	   292
DRXJSR	   167#	   631	   646	   660	   674
IFCPU	    45	   693
IFKMC	    58
IOREG	    65#	    73	   132	   139
KMCMDN	    55#	   560
KMCMUP	    56#	   597
PRINTF	    10#
PXCT	   398
PXGEN	   398
RDIO	   546
SETBAS	   151#	   186	   202	   218	   234
SETVEC	   153#	   187	   203	   219	   235
STOPCD	    15	   431	   441	   445	   449	   461	   465	   469
UHRRZ	   396
UMOVE	    34	   604
UMOVEM	    41	   547
WRIO	   426	   530	   570	   588
WRPI	   429	   432	   439	   451	   456	   471	   492	   495	   500	   504	   509	   512	   528	   534
	   544	   551
XCTBU	   397
$END	   760    @Gô