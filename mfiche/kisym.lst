KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 1
S	MAC	 4-Aug-76 23:31		S.MAC - with system parameter file for P035/D, January 1988

     1					Subttl	S.MAC - with system parameter file for P035/D, January 1988
     2
     3					IF2,<IFNDEF LISTSN,<TAPE>>	;Skip to PASS2 in all but COMMON.LST
     4		777777	777777			ifndef listsn,<listsn==-1>
     5					Title KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR
     6					;	/EVS 6 MAR 78
     7					;THIS MODULE ASSEMBLED WITH KI-10 PARAMETER FILE - KISYM.MAC
     8
     9						IF2,<IFNDEF LISTSN,<		;LIST KISYM.MAC IN COMMON ONLY
    10									TAPE>>
    11
    12										;SKIP PASS 2 IN ALL OTHER CASES
    13
    14					;CPU TYPE SYMBOL DEFINITION
    15
    16			000001		CPUTYP==CPUKI
    17
    18					DEFINE IFKMC<REPEAT 0,>
    19					DEFINE IFNKMC<REPEAT 1,>
    20
    21					DEFINE PRINTF(A,B,C,D),<;;;PRINTX A B C D>	;;Output on F3 builds only
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 2
KISYM	MAC	 4-Aug-76 23:33		KI-10 INSTRUCTION AND OPCODE DEFINITIONS

    22					SUBTTL KI-10 INSTRUCTION AND OPCODE DEFINITIONS
    23
    24			000070		XP CLK,70^CLK==:70^
    25					XP CLK2,74	^;SECOND CLOCK
    26
    27		256000	000000		OPDEF	PXCT	[XCT]		;Previous context XCT
    28					DEFINE	ADJSP(A,E),<PRINTX KI cannot do ADJSP>
    29					DEFINE	ADJBP(A,E),<PRINTX KI cannot do ADJBP>
    30					DEFINE	DADD (A,E),<PRINTX KI cannot do DADD>
    31					DEFINE	DSUB (A,E),<PRINTX KI cannot do DSUB>
    32					DEFINE	DMUL (A,E),<PRINTX KI cannot do DMUL>
    33					DEFINE	DDIV (A,E),<PRINTX KI cannot do DDIV>
    34
    35		700040	000000		OPDEF	RDSW	[700040000000]	;DATAI APR, Read console switches
    36		700140	000000		OPDEF	WRMAINT	[700140000000]	;DATAO APR, write maintainence data out
    37		700200	000000		OPDEF	WRAPR	[700200000000]	;CONO  APR, Write APR interrupt assignment
    38		700240	000000		OPDEF	RDAPR	[700240000000]	;CONI  APR, Read APR status bits
    39		700540	000000		OPDEF	WRSW	[700540000000]	;DATAO PI,  Write console switch lights
    40		700600	000000		OPDEF	WRPI	[700600000000]	;CONO  PI,  Write PI status
    41		700640	000000		OPDEF	RDPI	[700640000000]	;CONI  PI,  Read PI status
    42		701240	000000		OPDEF	APRID	[701240000000]	;CONI  PAG, Read CPU serial number
    43		710540	000000		OPDEF	WRADB	[710540000000]	;DATAO PTR, Write Address Break register
    44					DEFINE	RDADB(X),<PRINTX KI cannot read the Address Break register X>
    45
    46					;OPDEF	WREBR	KI uses RH of DATAO PAG, which changes UBR also
    47					;OPDEF	RDEBR	KI uses RH of DATAI PAG, which also reads UBR
    48					;OPDEF	WRUBR	KI uses LH of DATAO PAG, which changes EBR also
    49					;OPDEF	RDUBR	KI uses LH of DATAI PAG, which also reads EBR
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 3
KISYM	MAC	 4-Aug-76 23:33		HARDWARE BITS -- FOR KI10 PROCESSOR

    50					SUBTTL HARDWARE BITS -- FOR KI10 PROCESSOR
    51					;FOR APR
    52
    53					XP APRIOB,1B19	^;IOB RESET
    54					XP APRENC,1B25	^;ENABLE CLOCK
    55					XP APRDSB,1B24	^;DISABLE CLOCK
    56					XP APRCLK,1B26	^;CLOCK FLAG
    57					XP APRIOP,1B28	^;IO PAGE FAULT
    58					XP APRNXM,1B29	^;NXM
    59					XP APRPAR,1B19	^;PARITY ERROR
    60					XP APRPOW,1B22	^;POWER FAILURE
    61					XP APRDST,1B20	^;DISABLE TIMER
    62					XP APRDSR,1B22	^;DISABLE RESTART
    63
    64					XP SS4,(1B15)	^;SENSE SWITCH FOR IN CONI APR
    65
    66					;INTERRUPT MASKS
    67
    68					XP APFMSK,<APRIOP+APRNXM+APRPOW> ^;FATAL INTERRUPT CAUSES
    69					XP APRMSK,<APFMSK+APRCLK+APRPAR>	^;ALL INTERRUPT CAUSES
    70
    71					;OTHER APR STUFF
    72
    73					XP CLRNXM,APRNXM		^;CONO APR,CLRNXM CLEARS NXM
    74					DEFINE CLPARF<CONO PI,PIPAR>	;CLEAR PARITY ERROR FLAG
    75
    76					;BITS IN CONO PI
    77
    78					XP PIPOW,1B18	^;CLEAR POWER FAIL
    79					XP PIPAR,1B19	^;CLEAR PARITY ON PI
    80			002000		LI.CON==1B25	;TURN SELECTED CHANNEL ON.
    81			001000		LI.COF==1B26	;TURN SELECTED CHANNEL OFF.
    82			000400		LI.PIF==1B27	;TURN SYSTEM OFF
    83			000200		LI.PIN==1B28	;TURN SYSTEM ON.
    84
    85					;BITS IN DATAO PAG,
    86
    87					XP IG.LLH,(1B0)		^;LOAD UBR, USER AC BLOCK, REST
    88								; OF LH STUFF
    89					XP IG.UAB,3B2		^;USER AC BLOCK
    90					XP IG.SMU,1B3		^;SMALL USER
    91					XP IG.UAC,1B4		^;USER ADDR COMPARE
    92					XP IG.UBR,17777B17	^;UBR MASK
    93
    94					XP IG.LRH,1B18		^;LOAD RIGHT HALF
    95					XP IG.TEN,1B22		^;TRAP ENABLE
    96					XP IG.EBR,17777B35	^;EBR MASK
    97
    98					;BITS IN CONO CLK, (DK10, USED FOR CHARGING)
    99
   100					XP CLKCDN,10		^;DONE (AND CLEAR DONE)
   101					XP CLKCOV,20		^;OVERFLOW AND CLEAR OVERFLOW
   102					XP CLKON,40		^;TURN CLOCK ON
   103					XP CLKSTP,100		^;STOP CLOCK
   104					XP CLKUSR,200		^;SET FOR USER TIMING ONLY (NOT INTERRUPT LEVEL)
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 3-1
KISYM	MAC	 4-Aug-76 23:33		HARDWARE BITS -- FOR KI10 PROCESSOR

   105					XP CLKCUT,400		^;SET FOR TIMING USER + INTERRUPT. (2ND DK10)
   106					XP CLKCLR,1000		^;CLEAR CLOCK
   107
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 4
KISYM	MAC	 4-Aug-76 23:33		HARDWARE BITS -- FOR KI10 PROCESSOR

   108					;DEFINITIONS FOR CONSOLE TELETYPE
   109
   110					;BITS IN CONO TTY
   111
   112		777777	774000		TT.TST=-1B24		;TEST (LOOP INPUT TO OUTPUT)
   113			002000		TT.CIB==1B25		;CLEAR INPUT BUSY
   114			001000		TT.CID==1B26		;CLEAR INPUT DONE
   115			000400		TT.COB==1B27		;CLEAR OUTPUT BUSY
   116			000200		TT.COD==1B28		;CLEAR OUTPUT DONE
   117			000100		TT.SIB==1B29		;SET INPUT BUSY
   118			000040		TT.SID==1B30		;SET INPUT DONE
   119			000020		TT.SOB==1B31		;SET OUTPUT BUSY
   120			000010		TT.SOD==1B32		;SET OUTPUT DONE
   121
   122			000007		TT.PIA==7B35		;PI ASSIGNMENT MASK
   123
   124					;BITS IN CONI TTY
   125
   126			004000		TT.TST==1B24		;TEST (IF ON, MEANS TEST MODE IS SET.)
   127			000100		TT.IB==1B29		;INPUT BUSY
   128			000040		TT.ID==1B30		;INPUT DONE
   129			000020		TT.OB==1B31		;OUTPUT BUSY
   130			000010		TT.OD==1B32		;OUTPUT DONE
   131
   132			000007		TT.PIA==7B35		;MASK FOR READING PI ASSIGNMENT
   133
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 5
KISYM	MAC	 4-Aug-76 23:33		HARDWARE PAGING PARAMETERS

   134					SUBTTL HARDWARE PAGING PARAMETERS
   135
   136					;PAGE FAIL WORD DEFINITIONS
   137
   138		001000	000000		XP PFW.U,1B8^PFW.U==:1B8^
   139			000010		XP PFW.A,1B32^PFW.A==:1B32^
   140			000004		XP PFW.W,1B33^PFW.W==:1B33^
   141			000002		XP PFW.S,1B34^PFW.S==:1B34^
   142			000001		XP PFW.T,1B35^PFW.T==:1B35^
   143
   144					;PAGE FAIL CODES
   145
   146					XP PF.ABK,23		^;ADDRESS BREAK
   147
   148					;BITS IN MAP INSTRUCTION
   149
   150					XP MAP.FL,1B18		^;MAP BITS SAYS WILL PAGE FAULT
   151								; = -A + -W + (PC PUBLIC & -P)
   152					XP MAP.M,1B22		^;NO MATCH
   153								; = -A + NOT PAGED REF + PAGE REFILL FAILURE
   154					XP MAP.W,1B20		^;CAN WRITE
   155
   156					;PAGE TABLE ACCESS BITS
   157
   158					XP PGE.A,1B18		^;ACCESS ALLOWED
   159					XP PGE.P,1B19		^;PUBLIC
   160					XP PGE.W,1B20		^;WRITE ALLOWED
   161					XP PGE.C,0		^;NOOP ON KI10, CACHE BIT ON KL10
   162
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 6
KISYM	MAC	 4-Aug-76 23:33		HARDWARE PAGING PARAMETERS

   163					;PC BITS.
   164
   165					XP PC.FPD,1B22	^;FIRST PART DONE (CLEARED ON SOFT INTERRUPTS IN NEW PC)
   166			010000		XP PC.USR,1B23^PC.USR==:1B23^
   167					XP PC.UIO,1B24	^;USER IO
   168					XP PC.PUB,1B25	^;PUBLIC
   169					XP PC.ADR,1B26	^;ADDRESS FAILURE INHIBIT
   170					XP PC.TRP,3B28	^;TRAP FLAGS
   171					XP PC.OV,1B18	^;OVERFLOW
   172					XP PC.FOV,1B21	^;FLOATING OVERFLOW
   173					XP PC.FXU,1B29	^;FLOATING EXPONENT UNDERFLOW
   174					XP PC.DCK,1B30	^;DIVIDE CHECK
   175
   176
   177					;LOCATIONS IN THE PAGE TABLE FIXED BY HARDWARE
   178
   179					;USER PAGE TABLE
   180
   181					XP UPTPG0,0		^;PAGE 0 OF USER
   182					XP UPTEP0,400		^;FIRST PAGE OF EXEC (340) IN UPT
   183					XP UPTPGT,420		^;PAGE TRAP INST
   184					XP UPTOVT,421		^;OVERFLOW TRAP
   185					XP UPTPOV,422		^;PDL OVERFLOW TRAP
   186					XP UPTTR3,423		^;TRAP 3
   187					XP UPTMUU,424		^;MUUO STORED HERE
   188					XP UPTMUP,425		^;MUUO PC STORED HERE
   189					XP UPTXPF,426		^;EXEC PAGE FAIL WORD
   190					XP UPTUPF,427		^;USER PAGE FAIL WORD
   191					XP UPTKNT,430		^;KERNAL NO TRAP P WORD
   192					XP UPTKTR,431		^;KERNEL TRAP
   193					XP UPTSNT,432		^;SUPERVISOR NO TRAP
   194					XP UPTSTR,433		^;SUPERVISOR TRAP
   195					XP UPTCNT,434		^;CONCEALED NO TRAP
   196					XP UPTCTR,435		^;CONCEALED TRAP
   197					XP UPTPNT,436		^;PUBLIC NO TRAP
   198					XP UPTPTR,437		^;PUBLIC TRAP
   199
   200					XP UPTFSL,440		^;FIRST LOCATION AVAILABLE TO SOFTWARE
   201					;EXEC PAGE TABLE
   202
   203					XP EPTPG0,200		^;FIRST WORD OF PAGE INFO (PG 400) IN EPT
   204					XP EPTPGT,420		^;PAGE TRAP INSTRUCTION
   205					XP EPTOVT,421		^;OVERFLOW TRAP INSTRUCTION
   206					XP EPTPOV,422		^;PDL OV TRAP INSTR
   207					XP EPTTR3,423		^;TRAP 3 INSTR
   208
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 7
KISYM	MAC	 4-Aug-76 23:33		HARDWARE PAGING PARAMETERS

   209					;AC BLOCK DEFINITIONS
   210
   211					XP USRACB,1		^;USER AC BLOCK 1
   212					XP NULACB,2		^;NULL JOB AC BLOCK 2
   213
   214					;DUMMY MACRO, ONLY NEEDED BY KL, USED BY KL TO SWICH TO
   215					; EXEC AC BLOCK. KI DOES IT AUTOMATICALLY.
   216
   217					DEFINE EXECAC,<>
   218
   219					DEFINE USERAC,<>
   220
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 8
KISYM	MAC	 4-Aug-76 23:33		SYSTEM MACROS - CLEAR PAGE TABLE

   221					SUBTTL SYSTEM MACROS - CLEAR PAGE TABLE
   222
   223					;MACRO TO CLEAR ALL OF PAGE TABLE
   224
   225					DEFINE CLRPTA,<SALL
   226						DATAO PAG,CURUPT>
   227
   228					;CLEAR ONE ENTRY MACRO - CAN'T DO THIS ON KI, SO CLEAR ALL OF
   229					; PAGE TABLE.
   230
   231					DEFINE CLRPTO(ARG),<SALL
   232						IFB <ARG>,<PRINTX MISSING ARGUMENT TO CLRPTO
   233								QQQQQQ>
   234						CLRPTA>
   235
   236					;MACRO TO CLEAR PAGE TABLE FOR VIRTUAL PAGE IN W. ON KI10,
   237					; JUST CLEARS PAGE TABLE.
   238
   239					DEFINE CLRPTW<SALL
   240						CLRPTA>
   241
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 9
KISYM	MAC	 4-Aug-76 23:33		SYSTEM MACROS - CHARGING

   242					SUBTTL SYSTEM MACROS - CHARGING
   243
   244					;MACROS TO MANIPULATE CHARGING CLOCK.
   245
   246					DEFINE CHARGE<
   247						CONO	CLK,CLKUSR+CLKON+TIMCHN>
   248
   249					DEFINE NOCHARGE<
   250						CONO	CLK,CLKSTP>
   251
   252					DEFINE CHGSTS(LOC)<
   253						CONI	CLK,LOC>
   254
   255			000040		XP CHGON,CLKON^CHGON==:CLKON^
   256
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 10
KISYM	MAC	 4-Aug-76 23:33		SYSTEM MACROS - CHARGING

   257					;MACROS TO MOVE DATA BETWEEN THE USER AND THE OPERATING SYSTEM.
   258
   259					DEFINE UMOVE(A,B)
   260						<XCTFU	<MOVE A,B>>
   261
   262					DEFINE UMOVEM (A,B)
   263						<XCTTU	<MOVEM A,B>>
   264
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 11
KISYM	MAC	 4-Aug-76 23:33		SYSTEM MACROS - EXECUTIVE EXECUTE.

   265					SUBTTL SYSTEM MACROS - EXECUTIVE EXECUTE.
   266
   267					;BITS IN XCT AC FIELD
   268
   269					XP X.XFU,1	^;FROM USER
   270					XP X.XTU,2	^;TO USER
   271					XP X.XBU,3	^;BOTH
   272
   273
   274						DEFINE	XCTBU(INST)<SALL
   275						XCT X.XBU,[INST]>
   276
   277						DEFINE	XCTTU(INST)<SALL
   278						XCT X.XTU,[INST]>
   279
   280						DEFINE	XCTFU(INST)<SALL
   281						XCT X.XFU,[INST]>
   282
   283
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 12
KISYM	MAC	 4-Aug-76 23:33		SYSTEM MACROS - EXECUTIVE EXECUTE.

   284						ASUPPRESS		;ONLY LIST REFERENCED SYMBOLS
   285
   286					IFDEF LISTSN,<IFN LISTSN,<PAGE>>	;No $END for KISYM,KLSYM,KSSYM,F3SYM
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 12-1
KISYM	MAC	 4-Aug-76 23:33		SYSTEM MACROS - EXECUTIVE EXECUTE.

   287
   288						purge listsn
   289						end

NO ERRORS DETECTED

PROGRAM BREAK IS 000000
CPU TIME USED 04:31.930

16P CORE USED

KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 1
S	MAC	 4-Aug-76 23:31		S.MAC - with system parameter file for P035/D, January 1988


Symbol cross reference

APFMSK	    69#	    70
APRCLK	    57#	    70
APRDSB	    56#
APRDSR	    63#
APRDST	    62#
APRENC	    55#
APRIOB	    54#
APRIOP	    58#	    69
APRMSK	    70#
APRNXM	    59#	    69	    74
APRPAR	    60#	    70
APRPOW	    61#	    69
CHGON	   255#
CLK	    24#
CLK2	    26#
CLKCDN	   101#
CLKCLR	   107#
CLKCOV	   102#
CLKCUT	   106#
CLKON	   103#	   255
CLKSTP	   104#
CLKUSR	   105#
CLRNXM	    74#
CPUKI	    16
CPUTYP	    16#
EPTOVT	   206#
EPTPG0	   204#
EPTPGT	   205#
EPTPOV	   207#
EPTTR3	   208#
IG.EBR	    97#
IG.LLH	    88#
IG.LRH	    95#
IG.SMU	    91#
IG.TEN	    96#
IG.UAB	    90#
IG.UAC	    92#
IG.UBR	    93#
LI.COF	    81#
LI.CON	    80#
LI.PIF	    82#
LI.PIN	    83#
LISTSN	     3	     4	     4#	     9	   286	   288
MAP.FL	   151#
MAP.M	   153#
MAP.W	   155#
NULACB	   213#
PC.ADR	   170#
PC.DCK	   175#
PC.FOV	   173#
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 1
S	MAC	 4-Aug-76 23:31		S.MAC - with system parameter file for P035/D, January 1988


Symbol cross reference

PC.FPD	   166#
PC.FXU	   174#
PC.OV	   172#
PC.PUB	   169#
PC.TRP	   171#
PC.UIO	   168#
PC.USR	   166#
PF.ABK	   147#
PFW.A	   139#
PFW.S	   141#
PFW.T	   142#
PFW.U	   138#
PFW.W	   140#
PGE.A	   159#
PGE.C	   162#
PGE.P	   160#
PGE.W	   161#
PIPAR	    80#
PIPOW	    79#
SS4	    65#
TT.CIB	   113#
TT.CID	   114#
TT.COB	   115#
TT.COD	   116#
TT.IB	   127#
TT.ID	   128#
TT.OB	   129#
TT.OD	   130#
TT.PIA	   122#	   132#
TT.SIB	   117#
TT.SID	   118#
TT.SOB	   119#
TT.SOD	   120#
TT.TST	   112#	   126#
UPTCNT	   196#
UPTCTR	   197#
UPTEP0	   183#
UPTFSL	   201#
UPTKNT	   192#
UPTKTR	   193#
UPTMUP	   189#
UPTMUU	   188#
UPTOVT	   185#
UPTPG0	   182#
UPTPGT	   184#
UPTPNT	   198#
UPTPOV	   186#
UPTPTR	   199#
UPTSNT	   194#
UPTSTR	   195#
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 1
S	MAC	 4-Aug-76 23:31		S.MAC - with system parameter file for P035/D, January 1988


Symbol cross reference

UPTTR3	   187#
UPTUPF	   191#
UPTXPF	   190#
USRACB	   212#
X.XBU	   272#
X.XFU	   270#
X.XTU	   271#
KI-10 PARAMETER DEFINITIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:36 15-Jan-88 Page 1
S	MAC	 4-Aug-76 23:31		S.MAC - with system parameter file for P035/D, January 1988


Macro/Opdef cross reference

ADJBP	    29#
ADJSP	    28#
APRID	    42#
CHARGE	   246#
CHGSTS	   252#
CLPARF	    74#
CLRPTA	   225#
CLRPTO	   231#
CLRPTW	   239#
DADD	    30#
DDIV	    33#
DMUL	    32#
DSUB	    31#
EXECAC	   217#
IFKMC	    18#
IFNKMC	    19#
NOCHAR	   249#
PRINTF	    21#
PXCT	    27#
RDADB	    44#
RDAPR	    38#
RDPI	    41#
RDSW	    35#
UMOVE	   260#
UMOVEM	   263#
USERAC	   219#
WRADB	    43#
WRAPR	    37#
WRMAIN	    36#
WRPI	    40#
WRSW	    39#
XCTBU	   274#
XCTFU	   280#
XCTTU	   277#
XP	    24	    25	    53	    54	    55	    56	    57	    58	    59	    60	    61	    62	    64	    68
	    69	    73	    78	    79	    87	    89	    90	    91	    92	    94	    95	    96	   100	   101
	   102	   103	   104	   105	   106	   138	   139	   140	   141	   142	   146	   150	   152	   154
	   158	   159	   160	   161	   165	   166	   167	   168	   169	   170	   171	   172	   173	   174
	   181	   182	   183	   184	   185	   186	   187	   188	   189	   190	   191	   192	   193	   194
	   195	   196	   197	   198	   200	   203	   204	   205	   206	   207	   211	   212	   255	   269
	   270	   271   