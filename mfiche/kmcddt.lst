KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 1
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

     1				TITLE	KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING
     2				SUBTTL	NEXILIS/JRG
     3
     4				;DEFINE AC'S
     5
     6			000001	P=1
     7			000002	A=2
     8			000003	B=3
     9			000004	C=4
    10			000005	D=5
    11			000006	E=6
    12			000010	ADR=10		;KMC11 DEVICE ADDRESS
    13			000011	T1=11
    14			000012	T2=12
    15			000013	T3=13
    16
    17				;DEFINE KS10 IOT INSTRUCTIONS
    18
    19					OPDEF	TIOE  [710B8]
    20					OPDEF	TIOEB [720B8]
    21					OPDEF	TION  [711B8]
    22					OPDEF	TIONB [721B8]
    23					OPDEF	RDIO  [712B8]
    24					OPDEF	RDIOB [722B8]
    25					OPDEF	WRIO  [713B8]
    26					OPDEF	WRIOB [723B8]
    27					OPDEF	BSIO  [714B8]
    28					OPDEF	BSIOB [724B8]
    29					OPDEF	BCIO  [715B8]
    30					OPDEF	BCIOB [725B8]
    31					OPDEF	RDAPR [70024B14]
    32					OPDEF	WRAPR [70020B14]
    33
    34				;DEFINE SOME KMC11 MICRO INSTRUCTIONS
    35
    36			061220	BTOUT= 061220		;MOVE BREG,OUT1 <CSR0>
    37			041220	MEMOUT=041220		;MOVE MEM,OUT1 <CSR0>
    38			120400	OUTOB= 120400		;MOVE INP1 <CSR0>,BREG
    39			060600	SPTOB= 060600		;MOVE SPAD <0>,BREG
    40			100400	MPJUMP=100400		;UNCONDITIONAL JUMP
    41			101400	MPJMPZ=101400		;JUMP IF Z IS SET
    42			000000	MPNOP= 000000		;NOP (MOVE # 0,NOP)
    43			021000	INPOUS=021000		;MOVE INBUS TO OUTBUS*
    44			121000	INSOUS=121000		;MOVE INBUS* TO OUTBUS*
    45			122000	INSOUT=122000		;MOVE INBUS* TO OUTBUS
    46			001000	LITOUS=001000		;MOVE LITERAL TO OUTBUS*
    47			122400	IN1TOM=122400		;MOVE INP1 <0>,MEM
    48			014000	MARINC=014000		;MAR INCREMENT
    49			010000	MARLOD=010000		;MAR LOAD (LOW 8 BITS)
    50			004000	MARLDX=004000		;MAR LOAD (HIGH 2 BITS)
    51			000400	LITBRG=000400		;MOVE LITERAL TO BREG
    52			063220	BRGSP0=063220		;MOVE BREG TO SP0
    53			061220	BRGOUS=061220		;MOVE BREG TO OUTBUS*
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 1-2
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

    54			061200	SP0OUS=061200		;MOVE SP0 TO OUTBUS*
    55			003000	CLRSP0=003000		;CLEAR SP0
    56			061100	S0COUS=061100		;MOVE SP0 + C TO OUTBUS*
    57			123000	INSSP0=123000		;MOVE INBUS* TO SP0
    58			060120	SPDXXX=060120		;MOVE SP0 + SP0 TO NOWHERE
    59			120000	TSTINS=120000		;TEST INBUS*
    60
    61				;DEFINE CSR1 BITS
    62
    63			100000	MPRUN= 100000		;RUN
    64			040000	MPINI= 040000		;INIT
    65			020000	MPCWRT=020000		;CRAM WRITE
    66			002000	MPCRAM=002000		;CRAM INPUT/OUTPUT THROUGH CSR6
    67			001000	MPXCT= 001000		;EXECUTE MICRO INSTRUCTION FROM CSR6
    68			000400	MPSTEP=000400		;SINGLE STEP
    69
    70				;DEFINE WORDS AND BITS FOR THE KS10 CTY INTERFACE
    71
    72			000032	CTYIWD==32		;INPUT FROM CTY WORD
    73			000377	  CTYICH==377B35	;CTY INPUT CHARACTER
    74			000400	  CTYIVL==1B27		;INPUT VALID FLAG
    75
    76			000033	CTYOWD==33		;OUTPUT TO CTY WORD
    77			000377	  CTYOCH==377B35	;CTY OUTPUT CHARACTER
    78			000400	  CTYOVL==1B27		;OUTPUT VALID FLAG
    79
    80					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 2
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

    81				;THIS ENTIRE PROGRAM IS A SUBROUTINE WHICH IS ENTERED FROM DDT BY
    82				;	PUSHJ P,KMC$X
    83
    84	000000'			KMCDDT::
    85	000000'	202740	001020'	KMC::	MOVEM	17,SAVEAC+17	;SAVE ALL MONITOR AC'S
    86	000001'	201740	001001'		MOVEI	17,SAVEAC
    87	000002'	251740	001017'		BLT	17,SAVEAC+16
    88	000003'	200040	002062'		MOVE	P,[IOWD 20,STACK];SETUP OUR STACK
    89	000004'	200400	002063'		MOVE	ADR,[3,,760540]	;POINT TO THE KMC
    90	000005'	400500	000000		SETZ	T2,		;STOP THE KMC
    91	000006'	722450	000001		RDIOB	T1,1(ADR)	;SAVE CURRENT CSR1
    92	000007'	723510	000001		WRIOB	T2,1(ADR)
    93	000010'	202440	001053'		MOVEM	T1,CSR+1
    94	000011'	260040	000405'		PUSHJ	P,SAVKMC	;SAVE THE KMC'S STATE
    95					MOVEI	A,[ASCIZ "
    96				*** KMC DEBUG ROUTINES ***
    97				
    98	000012'	201100	002064'	"]
    99	000013'	260040	000702'		PUSHJ	P,OUTSTR
   100	000014'	201200	000045	LOOP:	MOVEI	C,"%"		;TYPE A PROMPT
   101	000015'	260040	000667'		PUSHJ	P,OUTCHR
   102	000016'	260040	000763'		PUSHJ	P,GETOCT	;GET A NUMBER FROM HIM
   103	000017'	306200	000015		CAIN	C,15
   104	000020'	254000	000014'		JRST	LOOP
   105	000021'	306200	000057		CAIN	C,"/"		;CRAM?
   106	000022'	254000	000065'		JRST	CRAM		;YES
   107	000023'	306200	000133		CAIN	C,"["		;DATA?
   108	000024'	254000	000122'		JRST	DATA		;YES
   109	000025'	306200	000134		CAIN	C,"\"		;CSR?
   110	000026'	254000	000217'		JRST	GCSR		;YES
   111	000027'	306200	000041		CAIN	C,"!"		;SCRATCH PAD?
   112	000030'	254000	000153'		JRST	SPAD		;YES
   113	000031'	306200	000120		CAIN	C,"P"		;MICRO-PC?
   114	000032'	254000	000314'		JRST	DSPPC		;YES
   115	000033'	306200	000103		CAIN	C,"C"		;C BIT?
   116	000034'	254000	000326'		JRST	DSPCBT		;YES
   117	000035'	306200	000132		CAIN	C,"Z"		;Z BIT?
   118	000036'	254000	000336'		JRST	DSPZBT		;YES
   119	000037'	306200	000115		CAIN	C,"M"		;MAR?
   120	000040'	254000	000304'		JRST	DSPMAR		;YES
   121	000041'	306200	000102		CAIN	C,"B"		;BRG?
   122	000042'	254000	000346'		JRST	DSPBRG		;YES
   123	000043'	306200	000123		CAIN	C,"S"		;DOES HE WANT TO SINGLE STEP THE KMC
   124	000044'	254000	000362'		JRST	SNGSTP		;YES
   125	000045'	306200	000122		CAIN	C,"R"		;DOES HE WANT TO RUN THE KMC FOR A WHILE?
   126	000046'	254000	000374'		JRST	RUNKMC		;YES
   127	000047'	306200	000130		CAIN	C,"X"		;DOES HE WANT TO LEAVE?
   128	000050'	254000	000054'		JRST	GOAWAY		;YES
   129				UNKTRM:	MOVEI	A,[ASCIZ "
   130				? UNKNOWN TERMINATOR
   131	000051'	201100	002073'	"]
   132	000052'	260040	000702'	ERROR:	PUSHJ	P,OUTSTR	;TYPE THE ERROR MESSAGE
   133	000053'	254000	000014'		JRST	LOOP		;CONTINUE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 2-2
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   134
   135					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 3
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   136				;HERE TO GO BACK TO DDT
   137
   138				GOAWAY:	MOVEI	A,[ASCIZ "
   139				RETURNING TO DDT
   140				
   141	000054'	201100	002100'	"]
   142	000055'	260040	000702'		PUSHJ	P,OUTSTR
   143	000056'	260040	000555'		PUSHJ	P,RSTKMC	;RESTORE KMC STATE
   144	000057'	200440	001053'		MOVE	T1,CSR+1	;START THE KMC IF IT WAS RUNNING
   145	000060'	405440	000200		ANDI	T1,200
   146	000061'	723450	000001		WRIOB	T1,1(ADR)
   147	000062'	205740	001001'		MOVSI	17,SAVEAC	;RESTORE AC'S
   148	000063'	251740	000017		BLT	17,17
   149	000064'	263040	000000		POPJ	P,		;AND LEAVE
   150
   151					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 4
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   152				;HERE TO CHANGE CONTENTS OF A CRAM LOCATION
   153
   154	000065'	242100	777777	CRAM:	LSH	A,-1		;FIX IT UP
   155	000066'	405100	001777	CRAM1:	ANDI	A,1777		;JUST 10 BITS
   156	000067'	202100	001042'		MOVEM	A,CADDR		;SAVE CRAM ADDRESS
   157	000070'	201440	002000		MOVEI	T1,MPCRAM	;SET CRAM IN CSR1
   158	000071'	714450	000000		BSIO	T1,0(ADR)
   159	000072'	713110	000004		WRIO	A,4(ADR)	;STORE CRAM ADDRESS IN CSR4
   160	000073'	260040	000664'		PUSHJ	P,TAB		;TYPE A TAB
   161	000074'	712110	000006		RDIO	A,6(ADR)	;GET CRAM CONTENTS
   162	000075'	260040	000707'		PUSHJ	P,OUTWRD	;TYPE IT
   163	000076'	260040	000664'		PUSHJ	P,TAB		;AND A TAB
   164	000077'	260040	000763'		PUSHJ	P,GETOCT	;GET HIS INPUT
   165	000100'	322140	000106'		JUMPE	B,CRAM2		;DON'T CHANGE IT IF NO NEW VALUE GIVEN
   166	000101'	713110	000006		WRIO	A,6(ADR)	;STORE NEW CONTENTS IN CSR6
   167	000102'	201440	020000		MOVEI	T1,MPCWRT	;GET CRAM WRITE BIT
   168	000103'	714450	000000		BSIO	T1,0(ADR)	;DO IT
   169	000104'	400440	000000		SETZ	T1,
   170	000105'	713450	000000		WRIO	T1,0(ADR)
   171	000106'	306200	000015	CRAM2:	CAIN	C,15		;DOES HE WANT MORE?
   172	000107'	254000	000014'		JRST	LOOP		;NO
   173	000110'	302200	000012		CAIE	C,12		;MAYBE
   174	000111'	254000	000051'		JRST	UNKTRM		;ERROR!
   175	000112'	350100	001042'		AOS	A,CADDR		;YES-GET NEXT ADDRESS
   176	000113'	405100	001777		ANDI	A,1777
   177	000114'	242100	000001		LSH	A,1		;FIX IT UP
   178	000115'	260040	000707'		PUSHJ	P,OUTWRD	;TYPE IT
   179	000116'	201200	000057		MOVEI	C,"/"
   180	000117'	260040	000667'		PUSHJ	P,OUTCHR
   181	000120'	200100	001042'		MOVE	A,CADDR
   182	000121'	254000	000066'		JRST	CRAM1		;CONTINUE
   183
   184					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 5
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   185				;HERE TO CHANGE CONTENTS OF A DATA LOCATION
   186
   187	000122'	405100	001777	DATA:	ANDI	A,1777		;JUST 10 BITS
   188	000123'	202100	001041'		MOVEM	A,DADDR		;REMEMBER ADDRESS FOR LATER
   189	000124'	260040	000664'		PUSHJ	P,TAB		;TYPE A TAB
   190	000125'	260040	000632'		PUSHJ	P,SETMAR	;SET THE MAR
   191	000126'	201100	041220		MOVEI	A,MEMOUT	;GET LAST INSTRUCTION WE NEED
   192	000127'	260040	000642'		PUSHJ	P,MPEX		;DO IT
   193	000130'	722110	000000		RDIOB	A,0(ADR)	;GET THE DATA
   194	000131'	260040	000717'		PUSHJ	P,OUTBYT	;TYPE IT
   195	000132'	260040	000664'		PUSHJ	P,TAB
   196	000133'	260040	000763'		PUSHJ	P,GETOCT	;GET HIS NEXT INPUT
   197	000134'	322140	000140'		JUMPE	B,DATA2		;DO NOTHING IF NOTHING TYPED
   198	000135'	723110	000000		WRIOB	A,0(ADR)	;PUT NEW VALUE IN KMC CSR0
   199	000136'	201100	122400		MOVEI	A,IN1TOM	;GET MICRO INSTRUCTION
   200	000137'	260040	000642'		PUSHJ	P,MPEX		;EXECUTE IT
   201	000140'	306200	000015	DATA2:	CAIN	C,15		;CARRIAGE RETURN?
   202	000141'	254000	000014'		JRST	LOOP		;YES
   203	000142'	302200	000012		CAIE	C,12		;LINE FEED?
   204	000143'	254000	000051'		JRST	UNKTRM		;NO-ERROR
   205	000144'	350100	001041'		AOS	A,DADDR		;YES-BUMP AND FETCH ADDRESS
   206	000145'	405100	001777		ANDI	A,1777
   207	000146'	260040	000707'		PUSHJ	P,OUTWRD	;TYPE IT
   208	000147'	201200	000133		MOVEI	C,"["
   209	000150'	260040	000667'		PUSHJ	P,OUTCHR
   210	000151'	200100	001041'		MOVE	A,DADDR		;GET ADDRESS AGAIN
   211	000152'	254000	000122'		JRST	DATA		;CONTINUE
   212
   213					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 6
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   214				;HERE TO CHANGE CONTENTS OF A SCRATCH PAD LOCATION
   215				;  INORDER TO READ A SCRATCH PAD REGISTER, WE MUST FIRST SAVE THE CURRENT
   216				;  VALUE OF THE BRG AND THEN COPY THE DESIRED SCRATCH PAD REGISTER TO THE BRG
   217				;  (THERE IS NO WAY TO COPY A SCRATCH PAD REGISTER DIRECTLY TO A CSR!).  WE
   218				;  THEN COPY THE BRG TO CSR0 SO WE CAN GET THE VALUE.  FINALLY, WE RESTORE THE
   219				;  ORIGINAL VALUE TO THE BRG!!
   220
   221	000153'	405100	000017	SPAD:	ANDI	A,17		;JUST 4 BITS
   222	000154'	202100	001044'		MOVEM	A,SPADDR	;SAVE ADDRESS
   223	000155'	260040	000664'		PUSHJ	P,TAB
   224	000156'	201100	061220		MOVEI	A,BTOUT		;MOVE BREG TO CSR0
   225	000157'	260040	000642'		PUSHJ	P,MPEX
   226	000160'	722550	000000		RDIOB	T3,0(ADR)	;GET BRG CONTENTS
   227	000161'	200100	001044'		MOVE	A,SPADDR	;GET SCRATCH PAD ADDRESS
   228	000162'	435100	060600		IORI	A,SPTOB		;MAKE INTO MICRO INSTRUCTION
   229	000163'	260040	000642'		PUSHJ	P,MPEX		;DO IT (COPIES SCRATCH PAD TO BRG)
   230	000164'	201100	061220		MOVEI	A,BTOUT		;NOW COPY BRG TO CSR0
   231	000165'	260040	000642'		PUSHJ	P,MPEX
   232	000166'	722110	000000		RDIOB	A,0(ADR)
   233	000167'	260040	000717'		PUSHJ	P,OUTBYT	;OUTPUT THE VALUE
   234	000170'	260040	000664'		PUSHJ	P,TAB		;AND A TAB
   235	000171'	260040	000763'		PUSHJ	P,GETOCT	;GET A POSSIBLE NEW VALUE
   236	000172'	322140	000201'		JUMPE	B,SPAD2		;GO ON IF NO NEW VALUE
   237	000173'	405100	000377		ANDI	A,377		;MAKE SURE ONLY 8 BITS
   238	000174'	435100	000400		IORI	A,LITBRG	;MAKE INTO IMMEDIATE INSTRUCTION
   239	000175'	260040	000642'		PUSHJ	P,MPEX		;DO IT (LOADS VALUE INTO BRG)
   240	000176'	200100	001044'		MOVE	A,SPADDR	;GET SCRATCH PAD ADDRESS
   241	000177'	435100	063220		IORI	A,BRGSP0	;MAKE INTO INSTRUCTION
   242	000200'	260040	000642'		PUSHJ	P,MPEX		;DO IT (COPIES BRG INTO SCRATCH PAD REG)
   243	000201'	723550	000000	SPAD2:	WRIOB	T3,0(ADR)	;RESTORE BRG
   244	000202'	201100	120400		MOVEI	A,OUTOB
   245	000203'	260040	000642'		PUSHJ	P,MPEX
   246	000204'	306200	000015		CAIN	C,15		;CR?
   247	000205'	254000	000014'		JRST	LOOP		;YES
   248	000206'	302200	000012		CAIE	C,12		;LF?
   249	000207'	254000	000051'		JRST	UNKTRM		;NO-ERROR
   250	000210'	350100	001044'		AOS	A,SPADDR	;YES-GET NEXT ADDRESS
   251	000211'	405100	000017		ANDI	A,17
   252	000212'	260040	000717'		PUSHJ	P,OUTBYT	;OUTPUT IT
   253	000213'	201200	000041		MOVEI	C,"!"
   254	000214'	260040	000667'		PUSHJ	P,OUTCHR
   255	000215'	200100	001044'		MOVE	A,SPADDR	;GET ADDRESS AGAIN
   256	000216'	254000	000153'		JRST	SPAD		;CONTINUE
   257
   258					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 7
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   259				;HERE TO CHANGE CONTENTS OF A KMC CSR
   260				;  WE USE THE TERM CSR IN A SOMEWHAT EXTENDED SENSE.  OUR CSR NUMBERS
   261				;  CORRESPOND TO THE KMC REGISTERS AS FOLLOWS:
   262				;	CSR0 -CSR7  = OUTBUS*/INBUS* REGISTERS 0-7 (THESE ARE THE
   263				;			ACTUAL UNIBUS CSR'S)
   264				;	CSR10-CSR17 = OUTBUS/INBUS REGISTERS 0-7
   265				;	CSR20       = OUTBUS*/INBUS* REGISTER 10 (NPR CONT)
   266				;	CSR21       = OUTBUS*/INBUS* REGISTER 11 (UP MISC)
   267
   268	000217'	303100	000021	GCSR:	CAILE	A,21		;VALID CSR ADDRESS?
   269	000220'	254000	000302'		JRST	BADADR		;NO-COMPLAIN!
   270	000221'	202100	001043'		MOVEM	A,CSADDR	;REMEMBER THE ADDRESS
   271	000222'	260040	000664'		PUSHJ	P,TAB		;OUTPUT A TAB
   272	000223'	301100	000010		CAIL	A,10		;IS THIS A SIMPLE ONE?
   273	000224'	254000	000227'		JRST	GCSR1		;NO
   274	000225'	200102	001052'		MOVE	A,CSR(A)	;YES-GET CSR CONTENTS
   275	000226'	254000	000242'		JRST	GCSR4		;AND CONTINUE
   276
   277				;HERE FOR NON-CSR CSR REGISTER
   278
   279	000227'	305100	000020	GCSR1:	CAIGE	A,20		;IS IT A HIGH * REGISTER?
   280	000230'	254000	000235'		JRST	GCSR2		;NO
   281	000231'	405100	000001		ANDI	A,1		;YES-JUST 1 BIT!
   282	000232'	242100	000004		LSH	A,4		;GET IT IN THE RIGHT PLACE
   283	000233'	435100	121200		IORI	A,INSOUS+200	;MAKE INTO MICRO INSTRUCTION
   284	000234'	254000	000240'		JRST	GCSR3		;CONTINUE
   285
   286	000235'	405100	000007	GCSR2:	ANDI	A,7		;JUST 3 BITS
   287	000236'	242100	000004		LSH	A,4
   288	000237'	435100	021000		IORI	A,INPOUS	;MAKE INTO MICRO INSTRUCTION
   289	000240'	260040	000642'	GCSR3:	PUSHJ	P,MPEX		;DO IT (COPIES REGISTER WE WANT INTO CSR0)
   290	000241'	722110	000000		RDIOB	A,0(ADR)	;GET VALUE
   291	000242'	260040	000717'	GCSR4:	PUSHJ	P,OUTBYT	;OUTPUT IT
   292	000243'	260040	000664'		PUSHJ	P,TAB		;AND ANOTHER TAB
   293	000244'	260040	000763'		PUSHJ	P,GETOCT	;GET HIS INPUT
   294	000245'	322140	000265'		JUMPE	B,GCSR8		;GO ON IF NOT CHANGING IT
   295	000246'	200440	000002		MOVE	T1,A		;COPY VALUE TO A SAFE PLACE
   296	000247'	200100	001043'		MOVE	A,CSADDR	;GET ADDRESS
   297	000250'	301100	000010		CAIL	A,10		;IS THIS A SIMPLE ADDRESS?
   298	000251'	254000	000254'		JRST	GCSR5		;NO
   299	000252'	202442	001052'		MOVEM	T1,CSR(A)	;YES-STORE NEW VALUE
   300	000253'	254000	000265'		JRST	GCSR8		;CONTINUE
   301
   302	000254'	305100	000020	GCSR5:	CAIGE	A,20		;WHICH SET?
   303	000255'	254000	000261'		JRST	GCSR6		;???
   304	000256'	405100	000001		ANDI	A,1		;JUST 1 BIT
   305	000257'	435100	121010		IORI	A,INSOUS+10	;MAKE INTO MICRO INSTRUCTION
   306	000260'	254000	000263'		JRST	GCSR7		;CONTINUE
   307
   308	000261'	405100	000007	GCSR6:	ANDI	A,7		;JUST 3 BITS
   309	000262'	435100	122000		IORI	A,INSOUT	;MAKE MICRO INSTRUCTION
   310	000263'	723450	000000	GCSR7:	WRIOB	T1,0(ADR)	;PUT NEW VALUE IN CSR0
   311	000264'	260040	000642'		PUSHJ	P,MPEX		;COPY IT TO THE RIGHT KMC REGISTER
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 7-2
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   312	000265'	306200	000015	GCSR8:	CAIN	C,15		;DOES HE WANT MORE?
   313	000266'	254000	000014'		JRST	LOOP		;NO
   314	000267'	302200	000012		CAIE	C,12		;MAYBE
   315	000270'	254000	000051'		JRST	UNKTRM		;IF ERROR
   316	000271'	350100	001043'		AOS	A,CSADDR	;YES-GET NEXT ADDRESS
   317	000272'	303100	000021		CAILE	A,21		;AT END YET?
   318	000273'	400100	000000		SETZ	A,		;YES-START OVER
   319	000274'	202100	001043'		MOVEM	A,CSADDR
   320	000275'	260040	000717'		PUSHJ	P,OUTBYT	;OUTPUT IT
   321	000276'	201200	000134		MOVEI	C,"\"
   322	000277'	260040	000667'		PUSHJ	P,OUTCHR
   323	000300'	200100	001043'		MOVE	A,CSADDR
   324	000301'	254000	000217'		JRST	GCSR
   325
   326				;HERE IF HE GAVE US A BAD ADDRESS
   327
   328				BADADR:	MOVEI	A,[ASCIZ "
   329				? BAD ADDRESS
   330	000302'	201100	002105'	"]
   331	000303'	254000	000052'		JRST	ERROR
   332
   333					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 8
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   334				;HERE TO DISPLAY AND CHANGE THE MAR
   335
   336	000304'	260040	000664'	DSPMAR:	PUSHJ	P,TAB		;OUTPUT A TAB
   337	000305'	200100	001046'		MOVE	A,MAR		;OUTPUT CURRENT MAR
   338	000306'	260040	000707'		PUSHJ	P,OUTWRD
   339	000307'	260040	000664'		PUSHJ	P,TAB
   340	000310'	260040	000763'		PUSHJ	P,GETOCT	;GET NEW VALUE
   341	000311'	322140	000014'		JUMPE	B,LOOP		;IS HE CHANGING IT?
   342	000312'	202100	001046'		MOVEM	A,MAR		;YES-STORE NEW VALUE
   343	000313'	254000	000014'		JRST	LOOP		;CONTINUE
   344
   345					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 9
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   346				;HERE TO DISPLAY AND CHANGE THE MICRO-PC
   347
   348	000314'	260040	000664PC:	PUSHJ	P,TAB		;OUTPUT A TAB
   349	000315'	200100	001045'		MOVE	A,MPPC		;GET CURRENT MICRO-PC
   350	000316'	242100	000001		LSH	A,1		;FIX IT UP
   351	000317'	260040	000707'		PUSHJ	P,OUTWRD	;OUTPUT IT
   352	000320'	260040	000664'		PUSHJ	P,TAB
   353	000321'	260040	000763'		PUSHJ	P,GETOCT	;GET POSSIBLE NEW VALUE
   354	000322'	322140	000014'		JUMPE	B,LOOP		;DID HE CHANGE IT?
   355	000323'	242100	777777		LSH	A,-1		;YES-FIX IT UP
   356	000324'	202100	001045'		MOVEM	A,MPPC		;AND SAVE IT
   357	000325'	254000	000014'		JRST	LOOP		;THATS ALL
   358
   359					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 10
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   360				;HERE TO DISPLAY AND CHANGE THE C BIT
   361
   362	000326'	260040	000664'	DSPCBT:	PUSHJ	P,TAB		;OUTPUT A TAB
   363	000327'	200100	001047'		MOVE	A,CFLAG		;GET CURRENT VALUE OF THE C BIT
   364	000330'	260040	000726'		PUSHJ	P,ONOFF		;OUTPUT IT
   365	000331'	260040	000664'		PUSHJ	P,TAB
   366	000332'	260040	000763'		PUSHJ	P,GETOCT	;GET POSSIBLE NEW VALUE
   367	000333'	322140	000014'		JUMPE	B,LOOP		;IF NO CHANGE
   368	000334'	202100	001047'		MOVEM	A,CFLAG		;STORE NEW VALUE
   369	000335'	254000	000014'		JRST	LOOP		;FINISHED
   370
   371				;HERE TO DISPLAY AND CHANGE THE Z BIT
   372
   373	000336'	260040	000664'	DSPZBT:	PUSHJ	P,TAB		;OUTPUT A TAB
   374	000337'	200100	001050'		MOVE	A,ZFLAG		;GET CURRENT VALUE OF THE Z BIT
   375	000340'	260040	000726'		PUSHJ	P,ONOFF		;OUTPUT IT
   376	000341'	260040	000664'		PUSHJ	P,TAB
   377	000342'	260040	000763'		PUSHJ	P,GETOCT	;GET POSSIBLE NEW VALUE
   378	000343'	322140	000014'		JUMPE	B,LOOP		;IF NO CHANGE
   379	000344'	202100	001050'		MOVEM	A,ZFLAG		;STORE NEW VALUE
   380	000345'	254000	000014'		JRST	LOOP		;FINISHED
   381
   382					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 11
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   383				;HERE TO DISPLAY AND CHANGE THE BRG
   384
   385	000346'	260040	000664'	DSPBRG:	PUSHJ	P,TAB		;OUTPUT A TAB
   386	000347'	201100	061220		MOVEI	A,BRGOUS	;COPY BRG TO CSR0
   387	000350'	260040	000642'		PUSHJ	P,MPEX
   388	000351'	712110	000000		RDIO	A,0(ADR)	;GET VALUE
   389	000352'	260040	000717'		PUSHJ	P,OUTBYT	;OUTPUT IT
   390	000353'	260040	000664'		PUSHJ	P,TAB
   391	000354'	260040	000763'		PUSHJ	P,GETOCT
   392	000355'	322140	000014'		JUMPE	B,LOOP		;FINISHED IF NOT CHANGING IT
   393	000356'	405100	000377		ANDI	A,377		;JUST 8 BITS
   394	000357'	435100	000400		IORI	A,LITBRG	;MAKE INTO MICRO INSTRUCTION
   395	000360'	260040	000642'		PUSHJ	P,MPEX		;PUT NEW VALUE INTO THE BRG
   396	000361'	254000	000014'		JRST	LOOP		;FINISHED NOW
   397
   398					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 12
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   399				;HERE TO SINGLE STEP THE KMC
   400
   401	000362'	202100	001051'	SNGSTP:	MOVEM	A,COUNT	;SAVE COUNT
   402	000363'	260040	000701'		PUSHJ	P,NEWLIN
   403	000364'	260040	000555'	SNGST2:	PUSHJ	P,RSTKMC	;RESTORE STATE OF KMC (ALMOST)
   404	000365'	201100	000001		MOVEI	A,MPSTEP/400	;GET SINGLE STEP BIT
   405	000366'	724110	000001		BSIOB	A,1(ADR)	;DO ONE REAL INSTRUCTION
   406	000367'	725110	000001		BCIOB	A,1(ADR)
   407	000370'	260040	000405'	SNGST4:	PUSHJ	P,SAVKMC	;SAVE THE STATE
   408	000371'	373000	001051'		SOSLE	COUNT		;FINISHED?
   409	000372'	254000	000364'		JRST	SNGST2		;NO-CONTINUE
   410	000373'	254000	000014'		JRST	LOOP		;THATS ALL
   411
   412					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 13
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   413				;HERE TO RUN THE KMC FOR SOME NUMBER OF INSTRUCTIONS
   414
   415	000374'	202100	001051'	RUNKMC:	MOVEM	A,COUNT		;SAVE COUNT
   416	000375'	260040	000701'		PUSHJ	P,NEWLIN
   417	000376'	260040	000555'		PUSHJ	P,RSTKMC	;RESTORE STATE OF KMC
   418	000377'	201100	000001		MOVEI	A,MPSTEP/400	;GET SINGLE STEP BIT
   419	000400'	724110	000001	RUNKM2:	BSIOB	A,1(ADR)	;DO ONE REAL INSTRUCTION
   420	000401'	725110	000001		BCIOB	A,1(ADR)
   421	000402'	373000	001051'		SOSLE	COUNT		;WANT MORE?
   422	000403'	254000	000400'		JRST	RUNKM2		;YES-CONTINUE
   423	000404'	254000	000370'		JRST	SNGST4		;NO-GO FINISH UP
   424
   425					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 14
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   426				;SUBROUTINE TO SAVE THE CURRENT STATE OF THE KMC
   427				;	PUSHJ	P,SAVKMC
   428
   429	000405'	722450	000000	SAVKMC:	RDIOB	T1,0(ADR)	;SAVE THE KMC'S CSR'S
   430	000406'	202440	001052'		MOVEM	T1,CSR+0
   431	000407'	722450	000002		RDIOB	T1,2(ADR)
   432	000410'	202440	001054'		MOVEM	T1,CSR+2
   433	000411'	722450	000003		RDIOB	T1,3(ADR)
   434	000412'	202440	001055'		MOVEM	T1,CSR+3
   435	000413'	722450	000004		RDIOB	T1,4(ADR)
   436	000414'	202440	001056'		MOVEM	T1,CSR+4
   437	000415'	722450	000005		RDIOB	T1,5(ADR)
   438	000416'	202440	001057'		MOVEM	T1,CSR+5
   439	000417'	722450	000006		RDIOB	T1,6(ADR)
   440	000420'	202440	001060'		MOVEM	T1,CSR+6
   441	000421'	722450	000007		RDIOB	T1,7(ADR)
   442	000422'	202440	001061'		MOVEM	T1,CSR+7
   443
   444				;THE FOLLOWING CODE IS ALL NEEDED JUST TO READ THE KMC'S MICRO-PC!  THERE IS
   445				;  NO WAY TO DO THIS DIRECTLY, SO WE SAVE THE ENTIRE CONTENTS OF THE CRAM AND
   446				;  LOAD THE ENTIRE CRAM, EXCEPT FOR LOCATION 0, WITH NO-OP'S.  WE
   447				;  LOAD LOCATION 0 WITH AN INSTRUCTION TO SET CSR2 TO 2.  WE THEN CLEAR CSR2
   448				;  AND SINGLE STEP THE KMC UNTIL CSR2 BECOMES NON-0!  BY COUNTING THE NUMBER
   449				;  OF TIMES WE HAVE STEPPED THE KMC, WE HAVE THE VALUE OF THE MICRO-PC WHEN WE
   450				;  STARTED!! (WE DIDN'T DESIGN THIS TURKEY!)
   451
   452	000423'	201140	002000		MOVEI	B,MPCRAM	;SET BIT TO ADDRESS CRAM
   453	000424'	713150	000000		WRIO	B,0(ADR)
   454	000425'	200200	002111'		MOVE	C,[POINT 18,SVCRAM];GET BYTE POINTER FOR SAVE AREA
   455	000426'	400100	000000		SETZ	A,		;START AT LOCATION 0
   456	000427'	713110	000004	GETPC2:	WRIO	A,4(ADR)	;LOAD ADDRESS
   457	000430'	712450	000006		RDIO	T1,6(ADR)	;GET CONTENTS
   458	000431'	136440	000004		IDPB	T1,C		;SAVE IT
   459	000432'	305100	002000		CAIGE	A,2000		;DONE YET?
   460	000433'	344100	000427'		AOJA	A,GETPC2	;NO-CONTINUE
   461	000434'	400100	000000		SETZ	A,		;START AT 0 AGAIN
   462	000435'	201140	020000		MOVEI	B,MPCWRT	;SET TO WRITE IN THE CRAM
   463	000436'	201442	000001	GETPC4:	MOVEI	T1,1(A)		;CALCULATE INSTRUCTION FOR JUMP .+1
   464	000437'	242440	000003		LSH	T1,3
   465	000440'	405440	014000		ANDI	T1,14000
   466	000441'	435442	000001		IORI	T1,1(A)
   467	000442'	405440	014377		ANDI	T1,14377
   468	000443'	435440	100400		IORI	T1,MPJUMP	;ADD THE INSTRUCTION BITS
   469	000444'	260040	000550'		PUSHJ	P,PUTCRM	;STORE IT IN THE CRAM
   470	000445'	305100	001775		CAIGE	A,1775		;DONE YET?
   471	000446'	254000	000436'		JRST	GETPC4		;NO-CONTINUE
   472	000447'	201440	115777		MOVEI	T1,MPJMPZ+3*4000+377;INSTRUCTION TO JUMP TO 1777 IF Z IS SET
   473	000450'	260040	000550'		PUSHJ	P,PUTCRM
   474	000451'	201440	001002		MOVEI	T1,LITOUS+2	;INSTRUCTION TO WRITE 2 TO CSR2 (REPORTS
   475	000452'	260040	000550'		PUSHJ	P,PUTCRM	;  THAT Z WAS CLEAR)
   476	000453'	201440	001202		MOVEI	T1,LITOUS+202	;INSTRUCTION TO WRITE 202 TO CSR2 (REPORTS
   477	000454'	260040	000550'		PUSHJ	P,PUTCRM	;  THAT Z WAS SET)
   478	000455'	400100	000000		SETZ	A,		;CLEAR SOME REGISTERS
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 14-2
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   479	000456'	713110	000000		WRIO	A,0(ADR)
   480	000457'	713110	000002		WRIO	A,2(ADR)
   481	000460'	201140	000400		MOVEI	B,MPSTEP	;GET SINGLE STEP BIT
   482	000461'	201100	001776		MOVEI	A,1776		;GET INITIAL COUNT
   483	000462'	713150	000000	GETPC6:	WRIO	B,0(ADR)	;DO ONE INSTRUCTION
   484	000463'	715150	000000		BCIO	B,0(ADR)
   485	000464'	722450	000002		RDIOB	T1,2(ADR)	;ARE WE AT LOCATION 0?
   486	000465'	326440	000471'		JUMPN	T1,GETPC7	;YES
   487	000466'	365100	000462'		SOJGE	A,GETPC6	;NO-CONTINUE
   488					MOVEI	A,[ASCIZ "
   489				% CANNOT DETERMINE PC, C, OR Z!!
   490	000467'	201100	002112'	"]
   491	000470'	254000	000702'		JRST	OUTSTR		;TELL HIM WE COULDN'T DO IT!
   492
   493				;HERE WHEN WE HAVE REACHED LOCATION 1776 OR 1777
   494
   495	000471'	202100	001045'	GETPC7:	MOVEM	A,MPPC		;REMEMBER PC
   496	000472'	242440	777771		LSH	T1,-7		;GET Z VALUE IN LOW ORDER BIT
   497	000473'	202440	001050'		MOVEM	T1,ZFLAG	;AND REMEMBER IT
   498	000474'	201100	061200		MOVEI	A,SP0OUS	;SAVE SP0 IN T3
   499	000475'	260040	000642'		PUSHJ	P,MPEX
   500	000476'	722550	000000		RDIOB	T3,0(ADR)
   501	000477'	201100	003000		MOVEI	A,CLRSP0	;GET INSTRUCTIN TO CLEAR SP0
   502	000500'	260040	000642'		PUSHJ	P,MPEX		;DO IT
   503	000501'	201100	061100		MOVEI	A,S0COUS	;GET INSTRUCTION TO ADD C TO SP0 AND STORE
   504	000502'	260040	000642'		PUSHJ	P,MPEX		;  RESULT IN CSR0 AND DO IT
   505	000503'	722450	000000		RDIOB	T1,0(ADR)	;GET IT
   506	000504'	202440	001047'		MOVEM	T1,CFLAG	;REMEMBER IT FOR LATER
   507	000505'	201100	123000		MOVEI	A,INSSP0	;RESTORE SP0 FROM T3
   508	000506'	723550	000000		WRIOB	T3,0(ADR)
   509	000507'	260040	000642'		PUSHJ	P,MPEX
   510	000510'	201140	002000		MOVEI	B,MPCRAM	;SETUP TO RESTORE CRAM CONTENTS
   511	000511'	713150	000000		WRIO	B,0(ADR)
   512	000512'	201140	020000		MOVEI	B,MPCWRT
   513	000513'	200200	002111'		MOVE	C,[POINT 18,SVCRAM];POINT TO SAVED DATA
   514	000514'	400500	000000		SETZ	T2,
   515	000515'	134440	000004	GETPC8:	ILDB	T1,C		;GET CONTENTS
   516	000516'	713450	000006		WRIO	T1,6(ADR)	;STORE IT
   517	000517'	713510	000004		WRIO	T2,4(ADR)	;STORE ADDRESS
   518	000520'	714150	000000		BSIO	B,0(ADR)	;PUT IT IN THE CRAM
   519	000521'	715150	000000		BCIO	B,0(ADR)
   520	000522'	305500	001777		CAIGE	T2,1777		;DONE?
   521	000523'	344500	000515'		AOJA	T2,GETPC8	;NO-CONTINUE
   522	000524'	260040	000652'		PUSHJ	P,GETMAR	;GET THE MEMORY ADDRESS REGISTER
   523	000525'	202540	001046'		MOVEM	T3,MAR		;AND SAVE IT
   524	000526'	201100	002122'		MOVEI	A,[ASCIZ "PC = "];TELL HIM WHERE HE IS
   525	000527'	260040	000702'		PUSHJ	P,OUTSTR
   526	000530'	200100	001045'		MOVE	A,MPPC		;GET CURRENT MICRO-PC
   527	000531'	242100	000001		LSH	A,1		;FIX IT UP
   528	000532'	260040	000707'		PUSHJ	P,OUTWRD
   529	000533'	201100	002124'		MOVEI	A,[ASCIZ "  Z = "]
   530	000534'	260040	000702'		PUSHJ	P,OUTSTR	;TELL HIM THE STATE OF THE Z FLAG
   531	000535'	200100	001050'		MOVE	A,ZFLAG
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 14-3
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   532	000536'	260040	000726'		PUSHJ	P,ONOFF
   533	000537'	201100	002126'		MOVEI	A,[ASCIZ "  C = "]
   534	000540'	260040	000702'		PUSHJ	P,OUTSTR	;TELL HIM THE STATE OF THE C FLAG
   535	000541'	200100	001047'		MOVE	A,CFLAG
   536	000542'	260040	000726'		PUSHJ	P,ONOFF
   537	000543'	201100	002130'		MOVEI	A,[ASCIZ "  M = "];TELL HIM ABOUT THE MAR
   538	000544'	260040	000702'		PUSHJ	P,OUTSTR
   539	000545'	200100	001046'		MOVE	A,MAR
   540	000546'	260040	000707'		PUSHJ	P,OUTWRD
   541	000547'	254000	000701'		JRST	NEWLIN		;FINISH THE LINE AND RETURN
   542
   543					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 15
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   544				;SUBROUTINE TO STORE INSTRUCTION INTO THE CRAM
   545				;	C(T1) = INSTRUCTION TO STORE
   546				;	C(A)  = CRAM ADDRESS
   547				;	PUSHJ	P,PUTCRM
   548
   549	000550'	713450	000006	PUTCRM:	WRIO	T1,6(ADR)	;STORE INSTRUCTION
   550	000551'	713110	000004		WRIO	A,4(ADR)	;STORE ADDRESS
   551	000552'	714150	000000		BSIO	B,0(ADR)	;DO IT
   552	000553'	715150	000000		BCIO	B,0(ADR)
   553	000554'	344100	000651'		AOJA	A,CPOPJ		;BUMP ADDRESS AND RETURN
   554
   555					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 16
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   556				;SUBROUTINE TO RESTORE THE STATE OF THE KMC
   557				;	PUSHJ	P,RSTKMC
   558
   559	000555'	200100	001046'	RSTKMC:	MOVE	A,MAR		;RESTORE MAR
   560	000556'	260040	000632'		PUSHJ	P,SETMAR
   561	000557'	201100	061200		MOVEI	A,SP0OUS	;GET INSTRUCTION TO MOVE SP0 TO CSR0
   562	000560'	260040	000642'		PUSHJ	P,MPEX		;DO IT
   563	000561'	722550	000000		RDIOB	T3,0(ADR)	;SAVE CONTENTS OF SP0
   564	000562'	201100	123000		MOVEI	A,INSSP0	;GET INSTRUCTION TO MOVE CSR0 TO SP0
   565	000563'	400440	000000		SETZ	T1,		;ASSUME C SHOULD BE CLEAR
   566	000564'	332000	001047'		SKIPE	CFLAG		;RIGHT?
   567	000565'	201440	000200		MOVEI	T1,200		;NO-SET IT
   568	000566'	723450	000000		WRIOB	T1,0(ADR)	;STORE DATA
   569	000567'	260040	000642'		PUSHJ	P,MPEX		;DO IT
   570	000570'	201100	060120		MOVEI	A,SPDXXX	;MOVE SP0 + SP0 TO NOWHERE
   571	000571'	260040	000642'		PUSHJ	P,MPEX		;DO IT (WILL SET C IF CFLAG WAS NON-0)
   572	000572'	201100	123000		MOVEI	A,INSSP0	;GET INSTRUCTION TO RESTORE SP0
   573	000573'	723550	000000		WRIOB	T3,0(ADR)	;STORE VALUE
   574	000574'	260040	000642'		PUSHJ	P,MPEX		;DO IT
   575	000575'	201100	120000		MOVEI	A,TSTINS	;GET INSTRUCTION TO TEST CSR0
   576	000576'	400440	000000		SETZ	T1,		;ASSUME Z SHOULD BE CLEAR
   577	000577'	332000	001050'		SKIPE	ZFLAG		;RIGHT?
   578	000600'	201440	000377		MOVEI	T1,377		;NO-IT SHOULD BE SET
   579	000601'	723450	000000		WRIOB	T1,0(ADR)
   580	000602'	260040	000642'		PUSHJ	P,MPEX		;DO IT (WILL SET Z IF ZFLAG WAS NON-0)
   581	000603'	200100	001045'		MOVE	A,MPPC		;GET KMC PC
   582	000604'	200140	000002		MOVE	B,A		;SPLIT IT UP
   583	000605'	242140	000003		LSH	B,3
   584	000606'	405100	000377		ANDI	A,377
   585	000607'	405140	014000		ANDI	B,14000
   586	000610'	434100	000003		IOR	A,B		;PUT IT BACK TOGETHER!
   587	000611'	435100	100400		IORI	A,MPJUMP	;MAKE IT INTO A JUMP MICRO INSTRUCTION
   588	000612'	260040	000642'		PUSHJ	P,MPEX		;DO IT
   589	000613'	200440	001052'		MOVE	T1,CSR+0	;RESTORE THE KMC CSR'S
   590	000614'	723450	000000		WRIOB	T1,0(ADR)
   591	000615'	200440	001054'		MOVE	T1,CSR+2
   592	000616'	723450	000002		WRIOB	T1,2(ADR)
   593	000617'	200440	001055'		MOVE	T1,CSR+3
   594	000620'	723450	000003		WRIOB	T1,3(ADR)
   595	000621'	200440	001056'		MOVE	T1,CSR+4
   596	000622'	723450	000004		WRIOB	T1,4(ADR)
   597	000623'	200440	001057'		MOVE	T1,CSR+5
   598	000624'	723450	000005		WRIOB	T1,5(ADR)
   599	000625'	200440	001060'		MOVE	T1,CSR+6
   600	000626'	723450	000006		WRIOB	T1,6(ADR)
   601	000627'	200440	001061'		MOVE	T1,CSR+7
   602	000630'	723450	000007		WRIOB	T1,7(ADR)
   603	000631'	263040	000000		POPJ	P,		;FINISHED
   604
   605					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 17
KMCDDT.MAC	20-SEP-87 18:10		NEXILIS/JRG

   606				;SUBROUTINE TO SET MAR
   607				;	C(A) = NEW VALUE FOR MAR
   608				;	PUSHJ	P,SETMAR
   609
   610	000632'	261040	000002	SETMAR:	PUSH	P,A		;SAVE ADDRESS
   611	000633'	405100	000377		ANDI	A,377		;GET OFFSET IN PAGE
   612	000634'	435100	010000		IORI	A,MARLOD	;MAKE INTO KMC INSTRUCTION
   613	000635'	260040	000642'		PUSHJ	P,MPEX		;DO IT
   614	000636'	262040	000002		POP	P,A		;GET ADDRESS FOR LAST TIME
   615	000637'	242100	777770		LSH	A,-10		;GET PAGE NUMBER
   616	000640'	405100	000003		ANDI	A,3
   617	000641'	435100	004000		IORI	A,MARLDX	;MAKE INTO KMC INSTRUCTIN
   618								;FALL INTO MPEX
   619
   620				;SUBROUTINE TO EXECUTE KMC11 INSTRUCTION
   621				;	C(A) = INSTRUCTIN TO EXECUTE
   622				;	PUSHJ	P,MPEX
   623
   624	000642'	201440	001000	MPEX:	MOVEI	T1,MPXCT	;SET TO EXECUTE FROM CSR6
   625	000643'	714450	000000		BSIO	T1,0(ADR)
   626	000644'	713110	000006		WRIO	A,6(ADR)	;GIVE THE INSTRUCTION TO THE KMC
   627	000645'	201440	000400		MOVEI	T1,MPSTEP	;EXECUTE THE INSTRUCTION
   628	000646'	714450	000000		BSIO	T1,0(ADR)
   629	000647'	400440	000000		SETZ	T1,		;DISABLE THE DEVICE
   630	000650'	723450	000001		WRIOB	T1,1(ADR)
   631	000651'	263040	000000	CPOPJ:	POPJ	P,		;THATS ALL
   632
   633				;SUBROUTINE TO GET CURRENT VALUE OF THE MAR
   634				;	PUSHJ	P,GETMAR
   635				;	C(T3) = CURRENT MAR
   636				;  WARNING - DESTROYS KMC MAR!!!
   637
   638	000652'	201540	002000	GETMAR:	MOVEI	T3,2000		;GET VALUE
   639	000653'	363540	000651'	GETMA2:	SOJLE	T3,CPOPJ	;DECREMENT, BE SAFE!
   640	000654'	201100	014000		MOVEI	A,MARINC	;INCREMENT THE MAR
   641	000655'	260040	000642'		PUSHJ	P,MPEX
   642	000656'	201100	121200		MOVEI	A,INSOUS+200	;GET THE MAR OVERFLOW FLAG
   643	000657'	260040	000642'		PUSHJ	P,MPEX
   644	000660'	722110	000000		RDIOB	A,0(ADR)
   645	000661'	606100	000100		TRNN	A,100		;IS IT SET?
   646	000662'	254000	000653'		JRST	GETMA2		;NO-CONTINUE
   647	000663'	263040	000000		POPJ	P,		;YES-FINISHED
   648
   649					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 18
KMCDDT.MAC	20-SEP-87 18:10		SUBROUTINES

   650					SUBTTL	SUBROUTINES
   651
   652				;SUBROUTINE TO OUTPUT A HORIZONTAL TAB
   653				;	PUSHJ	P,TAB
   654
   655	000664'	201200	000040	TAB:	MOVEI	C,40		;JUST TYPE 3 SPACES AND CALL IT A TAB!
   656	000665'	260040	000667'		PUSHJ	P,OUTCHR
   657	000666'	260040	000667'		PUSHJ	P,OUTCHR
   658								;FALL INTO OUTCHR
   659
   660				;SUBROUTINE TO OUTPUT SINGLE CHARACTER TO THE CTY
   661				;	C(C) = CHARACTER TO OUTPUT
   662				;	PUSHJ	P,OUTCHR
   663
   664	000667'	201240	000400	OUTCHR:	MOVEI	D,CTYOVL	;IS IT READY FOR OUTPUT?
   665	000670'	201300	400000		MOVEI	E,400000
   666	000671'	612240	000033	OUTCH2:	TDNE	D,CTYOWD
   667	000672'	367300	000671'		SOJG	E,OUTCH2	;NO-WAIT UNTIL IT IS
   668	000673'	202200	000033		MOVEM	C,CTYOWD	;YES-STORE CHARACTER
   669	000674'	436240	000033		IORM	D,CTYOWD	;MAKE IT VISIBLE
   670	000675'	700240	000005		RDAPR	D		;GET CURRENT APR PI LEVEL
   671	000676'	405240	000007		ANDI	D,7
   672	000677'	700205	012000		WRAPR	12000(D)	;POKE THE 8080
   673	000700'	263040	000000		POPJ	P,		;THATS ALL
   674
   675				;SUBROUTINE TO OUTPUT CR-LF
   676				;	PUSHJ	P,NEWLIN
   677
   678				NEWLIN:	MOVEI	A,[ASCIZ "
   679	000701'	201100	002072'	"]				;GET CR-LF
   680								;AND FALL INTO OUTSTR
   681
   682				;SUBROUTINE TO OUTPUT ASCIZ STRING TO THE CTY
   683				;	C(A) = ADDRESS OF STRING
   684				;	PUSHJ	P,OUTSTR
   685
   686	000702'	505100	440700	OUTSTR:	HRLI	A,(POINT 7,0)	;MAKE INTO A BYTE POINTER
   687	000703'	134200	000002	OUTST2:	ILDB	C,A		;GET NEXT CHARACTER
   688	000704'	322200	000651'		JUMPE	C,CPOPJ		;IF FINISHED
   689	000705'	260040	000667'		PUSHJ	P,OUTCHR	;OUTPUT THE CHARACTER
   690	000706'	254000	000703'		JRST	OUTST2		;CONTINUE
   691
   692					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 19
KMCDDT.MAC	20-SEP-87 18:10		SUBROUTINES

   693				;SUBROUTINE TO OUTPUT 16 BIT OCTAL VALUE
   694				;	C(A) = VALUE TO OUTPUT;       C(A) = VALUE TO OUTPUT
   695				;	PUSHJ	P,OUTWRD
   696
   697	000707'	135200	002132'	OUTWRD:	LDB	C,[POINT 1,A,20];GET FIRST DIGIT
   698	000710'	260040	000724'		PUSHJ	P,OUTOC2	;OUTPUT IT
   699	000711'	135200	002133'		LDB	C,[POINT 3,A,23];GET 2ND DIGIT
   700	000712'	260040	000724'		PUSHJ	P,OUTOC2	;OUTPUT IT
   701	000713'	135200	002134'		LDB	C,[POINT 3,A,26];GET 3RD DIGIT
   702	000714'	260040	000724'		PUSHJ	P,OUTOC2	;OUTPUT IT
   703	000715'	135200	002135'		LDB	C,[POINT 3,A,29];GET 4TH DIGIT
   704	000716'	254000	000720'		JRST	OUTOC1		;CONTINUE
   705
   706				;SUBROUTINE TO OUTPUT OCTAL VALUE
   707				;	C(A) = VALUE TO OUTPUT
   708				;	CALL	OUTBYT
   709
   710	000717'	135200	002136'	OUTBYT:	LDB	C,[POINT 2,A,29];GET FIRST DIGIT
   711	000720'	260040	000724'	OUTOC1:	PUSHJ	P,OUTOC2	;OUTPUT IT
   712	000721'	135200	002137'		LDB	C,[POINT 3,A,32];GET 2ND DIGIT
   713	000722'	260040	000724'		PUSHJ	P,OUTOC2	;OUTPUT IT
   714	000723'	135200	002140'		LDB	C,[POINT 3,A,35];GET 3RD DIGIT
   715	000724'	271200	000060	OUTOC2:	ADDI	C,60		;CHANGE IT ASCII
   716	000725'	254000	000667'		JRST	OUTCHR		;OUTPUT IT AND RETURN
   717
   718					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 20
KMCDDT.MAC	20-SEP-87 18:10		SUBROUTINES

   719				;SUBROUTINE TO OUTPUT SINGLE BIT VALUE
   720				;	C(A) = BIT TO OUTPUT
   721				;	PUSHJ	P,ONOFF
   722
   723	000726'	326100	000731'	ONOFF:	JUMPN	A,ONOFF2	;IF NOT 0
   724	000727'	201200	000060		MOVEI	C,"0"		;0
   725	000730'	254000	000667'		JRST	OUTCHR
   726
   727	000731'	201200	000061	ONOFF2:	MOVEI	C,"1"		;1
   728	000732'	254000	000667'		JRST	OUTCHR
   729
   730					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 21
KMCDDT.MAC	20-SEP-87 18:10		SUBROUTINES

   731				;SUBROUTINE TO INPUT SINGLE CHARACTER FROM THE CTY
   732				;	PUSHJ	P,GETCHR
   733				;	C(C) = CHARACTER
   734
   735	000733'	201240	000400	GETCHR:	MOVEI	D,CTYIVL	;IS THERE AN INPUT CHARACTER AVAILABLE?
   736	000734'	616240	000032		TDNN	D,CTYIWD
   737	000735'	254000	000733'		JRST	GETCHR		;NO-WAIT FOR ONE
   738	000736'	200200	000032		MOVE	C,CTYIWD	;YES-GET IT
   739	000737'	402000	000032		SETZM	CTYIWD		;ALLOW ANOTHER
   740	000740'	405200	000177		ANDI	C,177		;JUST 7 BITS
   741	000741'	306200	000177		CAIN	C,177		;RUBOUT?
   742	000742'	254000	000747'		JRST	GETCH1		;YES
   743	000743'	302200	000012		CAIE	C,12		;LINE FEED?
   744	000744'	306200	000015		CAIN	C,15		;OR CARRIAGE RETURN?
   745	000745'	254000	000754'		JRST	GETCH2		;YES
   746	000746'	254000	000667'		JRST	OUTCHR		;NO-ECHO CHARACTER AND RETURN
   747
   748				;HERE TO ECHO CR OR LF
   749
   750	000747'	201200	000130	GETCH1:	MOVEI	C,"X"		;RUBOUT-ECHO "XXX"
   751	000750'	260040	000667'		PUSHJ	P,OUTCHR
   752	000751'	260040	000667'		PUSHJ	P,OUTCHR
   753	000752'	260040	000667'		PUSHJ	P,OUTCHR
   754	000753'	400200	000000		SETZ	C,		;AND RETURN A 0
   755	000754'	261040	000004	GETCH2:	PUSH	P,C		;SAVE CHARACTER
   756	000755'	201200	000015		MOVEI	C,15		;GET A CR
   757	000756'	260040	000667'		PUSHJ	P,OUTCHR	;OUTPUT IT
   758	000757'	201200	000012		MOVEI	C,12		;GET A LINE FEED
   759	000760'	260040	000667'		PUSHJ	P,OUTCHR	;OUTPUT IT
   760	000761'	262040	000004		POP	P,C		;RESTORE INPUT CHARACTER
   761	000762'	263040	000000		POPJ	P,		;AND RETURN
   762
   763				;SUBROUTINE TO INPUT OCTAL VALUE FROM THE CTY
   764				;	PUSHJ	P,GETOCT
   765				;	C(A) = VALUE
   766				;	C(B) = NUMBER OF DIGITS TYPED (0 IF NULL NUMBER)
   767				;	C(C) = TERMINATING CHARACTER
   768
   769	000763'	403100	000003	GETOCT:	SETZB	A,B		;CLEAR VALUE AND CHARACTER COUNT
   770	000764'	260040	000733'	GETOC2:	PUSHJ	P,GETCHR	;GET NEXT CHARACTER
   771	000765'	307200	000067		CAIG	C,"7"		;IS IT A VALID DIGIT?
   772	000766'	305200	000060		CAIGE	C,"0"
   773	000767'	254000	000775'		JRST	GETOC4		;NO
   774	000770'	271140	000001		ADDI	B,1		;YES-BUMP CHARACTER COUNT
   775	000771'	405200	000007		ANDI	C,7		;GET JUST VALUE OF DIGIT
   776	000772'	242100	000003		LSH	A,3		;SHIFT VALUE
   777	000773'	434100	000004		IOR	A,C		;MERGE IN NEW DIGIT
   778	000774'	254000	000764'		JRST	GETOC2		;CONTINUE
   779
   780	000775'	326200	000651'	GETOC4:	JUMPN	C,CPOPJ		;IF NOT STOPPED BY RUBOUT
   781	000776'	400140	000000		SETZ	B,		;RUBOUT-SAY NO INPUT
   782	000777'	201200	000015		MOVEI	C,15		;BUT RETURN A CR
   783	001000'	263040	000000		POPJ	P,		;AND RETURN
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 21-2
KMCDDT.MAC	20-SEP-87 18:10		SUBROUTINES

   784
   785					PAGE
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 22
KMCDDT.MAC	20-SEP-87 18:10		DATA

   786					SUBTTL	DATA
   787
   788	001001'			SAVEAC:	BLOCK	20		;PLACE TO SAVE MONITOR AC'S
   789	001021'			STACK:	BLOCK	20		;OUR STACK
   790	001041'	000000	000000	DADDR:	EXP	0		;LAST DATA ADDRESS OPENED
   791	001042'	000000	000000	CADDR:	EXP	0		;LAST CRAM ADDRESS OPENED
   792	001043'	000000	000000	CSADDR:	EXP	0		;LAST CSR ADDRESS OPENED
   793	001044'	000000	000000	SPADDR:	EXP	0		;LAST SCRATCH PAD ADDRESS OPENED
   794	001045'	000000	000000	MPPC:	EXP	0		;PLACE TO SAVE KMC MICRO-PC
   795	001046'	000000	000000	MAR:	EXP	0		;PLACE TO SAVE KMC MAR
   796	001047'	000000	000000	CFLAG:	EXP	0		;PLACE TO SAVE KMC C VALUE
   797	001050'	000000	000000	ZFLAG:	EXP	0		;PLACE TO SAVE KMC Z VALUE
   798	001051'	000000	000000	COUNT:	EXP	0		;SINGLE STEP COUNTER
   799	001052'			CSR:	BLOCK	10		;PLACE TO SAVE KMC CSR'S
   800	001062'			SVCRAM:	BLOCK	1000		;PLACE TO SAVE ENTIRE CRAM WHILE READING THE
   801								;  MICRO-PC!
   802
   803	002062'			KMDLIT:	LIT			;This module not assembled with S.MAC,
   804	002062'	777760	001020'
   805	002063'	000003	760540
   806	002064'	064245	225124
   807	002065'	202271	541500
   808	002066'	422130	252616
   809	002067'	202451	752650
   810	002070'	446350	551500
   811	002071'	251245	206424
   812	002072'	064240	000000
   813	002073'	064247	720252
   814	002074'	472271	647656
   815	002075'	471012	442644
   816	002076'	466231	640650
   817	002077'	476441	505000
   818	002100'	064252	242650
   819	002101'	526451	644634
   820	002102'	435012	447500
   821	002103'	422112	406424
   822	002104'	064240	000000
   823	002105'	064247	720204
   824	002106'	406104	040610
   825	002107'	422450	551646
   826	002110'	064240	000000
   827	002111'	442200	001062'
   828	002112'	064244	520206
   829	002113'	406351	647650
   830	002114'	202110	552212
   831	002115'	512331	147212
   832	002116'	202410	326100
   833	002117'	415304	047644
   834	002120'	202644	120432
   835	002121'	050000	000000
   836	002122'	502064	036500
   837	002123'	000000	000000
   838	002124'	201013	220172
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 22-2
KMCDDT.MAC	20-SEP-87 18:10		DATA

   839	002125'	200000	000000
   840	002126'	201010	320172
   841	002127'	200000	000000
   842	002130'	201011	520172
   843	002131'	200000	000000
   844	002132'	170100	000002
   845	002133'	140300	000002
   846	002134'	110300	000002
   847	002135'	060300	000002
   848	002136'	060200	000002
   849	002137'	030300	000002
   850	002140'	000300	000002
   851	002142'			KMDEND:!END			; therefore no $END macro.
   852
NO ERRORS DETECTED
PROGRAM BREAK IS 002142
3K CORE USED
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88 PAGE 23
KMCDDT.MAC	20-SEP-87 18:10		SYMBOL TABLE

A		000002		GETOC2		000764'		RDIOB	722000	000000		
ADR		000010		GETOC4		000775'		RSTKMC		000555'		
B		000003		GETOCT		000763'		RUNKM2		000400'		
BADADR		000302'		GETPC2		000427'		RUNKMC		000374'		
BCIO	715000	000000		GETPC4		000436'		S0COUS		061100		
BCIOB	725000	000000		GETPC6		000462'		SAVEAC		001001'		
BRGOUS		061220		GETPC7		000471'		SAVKMC		000405'		
BRGSP0		063220		GETPC8		000515'		SETMAR		000632'		
BSIO	714000	000000		GOAWAY		000054'		SNGST2		000364'		
BSIOB	724000	000000		IN1TOM		122400		SNGST4		000370'		
BTOUT		061220		INPOUS		021000		SNGSTP		000362'		
C		000004		INSOUS		121000		SP0OUS		061200		
CADDR		001042'		INSOUT		122000		SPAD		000153'		
CFLAG		001047'		INSSP0		123000		SPAD2		000201'		
CLRSP0		003000		KMC		000000'	INT	SPADDR		001044'		
COUNT		001051'		KMCDDT		000000'	INT	SPDXXX		060120		
CPOPJ		000651'		KMDEND		002142'	SPD	SPTOB		060600		
CRAM		000065'		KMDLIT		002062'		STACK		001021'		
CRAM1		000066'		LITBRG		000400		SVCRAM		001062'		
CRAM2		000106'		LITOUS		001000		T1		000011		
CSADDR		001043'		LOOP		000014'		T2		000012		
CSR		001052'		MAR		001046'		T3		000013		
CTYICH		000377	SPD	MARINC		014000		TAB		000664'		
CTYIVL		000400	SPD	MARLDX		004000		TIOE	710000	000000		
CTYIWD		000032	SPD	MARLOD		010000		TIOEB	720000	000000		
CTYOCH		000377	SPD	MEMOUT		041220		TION	711000	000000		
CTYOVL		000400	SPD	MPCRAM		002000		TIONB	721000	000000		
CTYOWD		000033	SPD	MPCWRT		020000		TSTINS		120000		
D		000005		MPEX		000642'		UNKTRM		000051'		
DADDR		001041'		MPINI		040000		WRAPR	700200	000000		
DATA		000122'		MPJMPZ		101400		WRIO	713000	000000		
DATA2		000140'		MPJUMP		100400		WRIOB	723000	000000		
DSPBRG		000346'		MPNOP		000000		ZFLAG		001050'		
DSPCBT		000326'		MPPC		001045'		
DSPMAR		000304'		MPRUN		100000		
DSPPC		000314'		MPSTEP		000400		
DSPZBT		000336'		MPXCT		001000		
E		000006		NEWLIN		000701'		
ERROR		000052'		ONOFF		000726'		
GCSR		000217'		ONOFF2		000731'		
GCSR1		000227'		OUTBYT		000717'		
GCSR2		000235'		OUTCH2		000671'		
GCSR3		000240'		OUTCHR		000667'		
GCSR4		000242'		OUTOB		120400		
GCSR5		000254'		OUTOC1		000720'		
GCSR6		000261'		OUTOC2		000724'		
GCSR7		000263'		OUTST2		000703'		
GCSR8		000265'		OUTSTR		000702'		
GETCH1		000747'		OUTWRD		000707'		
GETCH2		000754'		P		000001		
GETCHR		000733'		PUTCRM		000550'		
GETMA2		000653'		RDAPR	700240	000000		
GETMAR		000652'		RDIO	712000	000000		

KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88
KMCDDT.MAC	20-SEP-87 18:10		Symbol cross reference

A	     7#	    95	   129	   138	   154	   155	   156	   159	   161	   166	   175	   176	   177	   181
	   187	   188	   191	   193	   198	   199	   205	   206	   210	   221	   222	   224	   227	   228
	   230	   232	   237	   238	   240	   241	   244	   250	   251	   255	   268	   270	   272	   274
	   279	   281	   282	   283	   286	   287	   288	   290	   295	   296	   297	   299	   302	   304
	   305	   308	   309	   316	   317	   318	   319	   323	   328	   337	   342	   349	   350	   355
	   356	   363	   368	   374	   379	   386	   388	   393	   394	   401	   404	   405	   406	   415
	   418	   419	   420	   455	   456	   459	   460	   461	   463	   466	   470	   478	   479	   480
	   482	   487	   488	   495	   498	   501	   503	   507	   524	   526	   527	   529	   531	   533
	   535	   537	   539	   550	   553	   559	   561	   564	   570	   572	   575	   581	   582	   584
	   586	   587	   610	   611	   612	   614	   615	   616	   617	   626	   640	   642	   644	   645
	   678	   686	   687	   697	   699	   701	   703	   710	   712	   714	   723	   769	   776	   777
ADR	    12#	    89	    91	    92	   146	   158	   159	   161	   166	   168	   170	   193	   198	   226
	   232	   243	   290	   310	   388	   405	   406	   419	   420	   429	   431	   433	   435	   437
	   439	   441	   453	   456	   457	   479	   480	   483	   484	   485	   500	   505	   508	   511
	   516	   517	   518	   519	   549	   550	   551	   552	   563	   568	   573	   579	   590	   592
	   594	   596	   598	   600	   602	   625	   626	   628	   630	   644
B	     8#	   165	   197	   236	   294	   341	   354	   367	   378	   392	   452	   453	   462	   481
	   483	   484	   510	   511	   512	   518	   519	   551	   552	   582	   583	   585	   586	   769
	   774	   781
BADADR	   269	   328#
BRGOUS	    53#	   386
BRGSP0	    52#	   241
BTOUT	    36#	   224	   230
C	     9#	   100	   103	   105	   107	   109	   111	   113	   115	   117	   119	   121	   123	   125
	   127	   171	   173	   179	   201	   203	   208	   246	   248	   253	   312	   314	   321	   454
	   458	   513	   515	   655	   668	   687	   688	   697	   699	   701	   703	   710	   712	   714
	   715	   724	   727	   738	   740	   741	   743	   744	   750	   754	   755	   756	   758	   760
	   771	   772	   775	   777	   780	   782
CADDR	   156	   175	   181	   791#
CFLAG	   363	   368	   506	   535	   566	   796#
CLRSP0	    55#	   501
COUNT	   401	   408	   415	   421	   798#
CPOPJ	   553	   631#	   639	   688	   780
CRAM	   106	   154#
CRAM1	   155#	   182
CRAM2	   165	   171#
CSADDR	   270	   296	   316	   319	   323	   792#
CSR	    93	   144	   274	   299	   430	   432	   434	   436	   438	   440	   442	   589	   591	   593
	   595	   597	   599	   601	   799#
CTYICH	    73#
CTYIVL	    74#	   735
CTYIWD	    72#	   736	   738	   739
CTYOCH	    77#
CTYOVL	    78#	   664
CTYOWD	    76#	   666	   668	   669
D	    10#	   664	   666	   669	   670	   671	   672	   735	   736
DADDR	   188	   205	   210	   790#
DATA	   108	   187#	   211
DATA2	   197	   201#
DSPBRG	   122	   385#
DSPCBT	   116	   362#
DSPMAR	   120	   336#
DSPPC	   114	   348#
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88
KMCDDT.MAC	20-SEP-87 18:10		Symbol cross reference

DSPZBT	   118	   373#
E	    11#	   665	   667
ERROR	   132#	   331
GCSR	   110	   268#	   324
GCSR1	   273	   279#
GCSR2	   280	   286#
GCSR3	   284	   289#
GCSR4	   275	   291#
GCSR5	   298	   302#
GCSR6	   303	   308#
GCSR7	   306	   310#
GCSR8	   294	   300	   312#
GETCH1	   742	   750#
GETCH2	   745	   755#
GETCHR	   735#	   737	   770
GETMA2	   639#	   646
GETMAR	   522	   638#
GETOC2	   770#	   778
GETOC4	   773	   780#
GETOCT	   102	   164	   196	   235	   293	   340	   353	   366	   377	   391	   769#
GETPC2	   456#	   460
GETPC4	   463#	   471
GETPC6	   483#	   487
GETPC7	   486	   495#
GETPC8	   515#	   521
GOAWAY	   128	   138#
IN1TOM	    47#	   199
INPOUS	    43#	   288
INSOUS	    44#	   283	   305	   642
INSOUT	    45#	   309
INSSP0	    57#	   507	   564	   572
KMC	    85#
KMCDDT	    84#
KMDEND	   851#
KMDLIT	   803#
LITBRG	    51#	   238	   394
LITOUS	    46#	   474	   476
LOOP	   100#	   104	   133	   172	   202	   247	   313	   341	   343	   354	   357	   367	   369	   378
	   380	   392	   396	   410
MAR	   337	   342	   523	   539	   559	   795#
MARINC	    48#	   640
MARLDX	    50#	   617
MARLOD	    49#	   612
MEMOUT	    37#	   191
MPCRAM	    66#	   157	   452	   510
MPCWRT	    65#	   167	   462	   512
MPEX	   192	   200	   225	   229	   231	   239	   242	   245	   289	   311	   387	   395	   499	   502
	   504	   509	   562	   569	   571	   574	   580	   588	   613	   624#	   641	   643
MPINI	    64#
MPJMPZ	    41#	   472
MPJUMP	    40#	   468	   587
MPNOP	    42#
MPPC	   349	   356	   495	   526	   581	   794#
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88
KMCDDT.MAC	20-SEP-87 18:10		Symbol cross reference

MPRUN	    63#
MPSTEP	    68#	   404	   418	   481	   627
MPXCT	    67#	   624
NEWLIN	   402	   416	   541	   678#
ONOFF	   364	   375	   532	   536	   723#
ONOFF2	   723	   727#
OUTBYT	   194	   233	   252	   291	   320	   389	   710#
OUTCH2	   666#	   667
OUTCHR	   101	   180	   209	   254	   322	   656	   657	   664#	   689	   716	   725	   728	   746	   751
	   752	   753	   757	   759
OUTOB	    38#	   244
OUTOC1	   704	   711#
OUTOC2	   698	   700	   702	   711	   713	   715#
OUTST2	   687#	   690
OUTSTR	    99	   132	   142	   491	   525	   530	   534	   538	   686#
OUTWRD	   162	   178	   207	   338	   351	   528	   540	   697#
P	     6#	    88	    94	    99	   101	   102	   132	   142	   143	   149	   160	   162	   163	   164
	   178	   180	   189	   190	   192	   194	   195	   196	   200	   207	   209	   223	   225	   229
	   231	   233	   234	   235	   239	   242	   245	   252	   254	   271	   289	   291	   292	   293
	   311	   320	   322	   336	   338	   339	   340	   348	   351	   352	   353	   362	   364	   365
	   366	   373	   375	   376	   377	   385	   387	   389	   390	   391	   395	   402	   403	   407
	   416	   417	   469	   473	   475	   477	   499	   502	   504	   509	   522	   525	   528	   530
	   532	   534	   536	   538	   540	   560	   562	   569	   571	   574	   580	   588	   603	   610
	   613	   614	   631	   641	   643	   647	   656	   657	   673	   689	   698	   700	   702	   711
	   713	   751	   752	   753	   755	   757	   759	   760	   761	   770	   783
PUTCRM	   469	   473	   475	   477	   549#
RSTKMC	   143	   403	   417	   559#
RUNKM2	   419#	   422
RUNKMC	   126	   415#
S0COUS	    56#	   503
SAVEAC	    85	    86	    87	   147	   788#
SAVKMC	    94	   407	   429#
SETMAR	   190	   560	   610#
SNGST2	   403#	   409
SNGST4	   407#	   423
SNGSTP	   124	   401#
SP0OUS	    54#	   498	   561
SPAD	   112	   221#	   256
SPAD2	   236	   243#
SPADDR	   222	   227	   240	   250	   255	   793#
SPDXXX	    58#	   570
SPTOB	    39#	   228
STACK	    88	   789#
SVCRAM	   454	   513	   800#
T1	    13#	    91	    93	   144	   145	   146	   157	   158	   167	   168	   169	   170	   295	   299
	   310	   429	   430	   431	   432	   433	   434	   435	   436	   437	   438	   439	   440	   441
	   442	   457	   458	   463	   464	   465	   466	   467	   468	   472	   474	   476	   485	   486
	   496	   497	   505	   506	   515	   516	   549	   565	   567	   568	   576	   578	   579	   589
	   590	   591	   592	   593	   594	   595	   596	   597	   598	   599	   600	   601	   602	   624
	   625	   627	   628	   629	   630
T2	    14#	    90	    92	   514	   517	   520	   521
T3	    15#	   226	   243	   500	   508	   523	   563	   573	   638	   639
TAB	   160	   163	   189	   195	   223	   234	   271	   292	   336	   339	   348	   352	   362	   365
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88
KMCDDT.MAC	20-SEP-87 18:10		Symbol cross reference

	   373	   376	   385	   390	   655#
TSTINS	    59#	   575
UNKTRM	   129#	   174	   204	   249	   315
ZFLAG	   374	   379	   497	   531	   577	   797#
KMCDDT	ROUTINES TO ACCESS KMC11 FOR DEBUGGING	MACRO 12.5-46.0 14:22 13-JAN-88
KMCDDT.MAC	20-SEP-87 18:10		Macro/Opdef cross reference

BCIO	    29#	   484	   519	   552
BCIOB	    30#	   406	   420
BSIO	    27#	   158	   168	   518	   551	   625	   628
BSIOB	    28#	   405	   419
RDAPR	    31#	   670
RDIO	    23#	   161	   388	   457
RDIOB	    24#	    91	   193	   226	   232	   290	   429	   431	   433	   435	   437	   439	   441	   485
	   500	   505	   563	   644
TIOE	    19#
TIOEB	    20#
TION	    21#
TIONB	    22#
WRAPR	    32#	   672
WRIO	    25#	   159	   166	   170	   453	   456	   479	   480	   483	   511	   516	   517	   549	   550
	   626
WRIOB	    26#	    92	   146	   198	   243	   310	   508	   568	   573	   579	   590	   592	   594	   596
	   598	   600	   602	   630    [@	