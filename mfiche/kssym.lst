KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 1
S	MAC	 4-Aug-76 23:31		S.MAC - with system parameter file for P035/D, January 1988

     1					Subttl	S.MAC - with system parameter file for P035/D, January 1988
     2
     3					IF2,<IFNDEF LISTSN,<TAPE>>	;Skip to PASS2 in all but COMMON.LST
     4		777777	777777			ifndef listsn,<listsn==-1>
     5					Title KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR
     6					;THIS MODULE ASSEMBLED WITH KS-10 PARAMETER FILE - KSSYM.MAC
     7
     8						IF2,<IFNDEF LISTSN,<		;LIST KSSYM.MAC IN COMMON ONLY
     9						.CREF
    10										TAPE>>
    11										;SKIP PASS2 IN ALL OTHER CASES
    12
    13					;CPU TYPE SYMBOL DEFINITION
    14
    15			000003		CPUTYP==CPUKS
    16					DEFINE IFKMC<REPEAT 1,>		;The KMC is standard in TYMSHARE XX systems.
    17					DEFINE IFNKMC<REPEAT 0,>	;The file NOKMC.MAC redefines these two
    18									;macros for non-standard 2020 systems.
    19
    20					DEFINE PRINTF(A,B,C,D),<;;;PRINTX A B C D>	;;Output on F3 builds only
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 2
KSSYM	MAC	 4-Aug-76 23:39		KS-10 INSTRUCTION DEFINITIONS

    21					SUBTTL KS-10 INSTRUCTION DEFINITIONS
    22
    23		105000	000000		OPDEF	ADJSP	[105000000000]	;Adjust stack pointer
    24		114000	000000		OPDEF	DADD	[114000000000]	;Double integer ADD
    25		115000	000000		OPDEF	DSUB	[115000000000]	;Double integer SUB
    26		116000	000000		OPDEF	DMUL	[116000000000]	;Double integer MUL (quad-word result)
    27		117000	000000		OPDEF	DDIV	[117000000000]	;Double integer DIV (quad-word dividend)
    28		133000	000000		OPDEF	ADJBP	[IBP]		;Adjust byte pointer if AC field nonzero
    29		256000	000000		OPDEF	PXCT	[XCT]		;Previous context XCT
    30
    31		700000	000000		OPDEF	APRID	[700000000000]	;BLKI  PAR,Read APR ID (CPU serial number)
    32		700200	000000		OPDEF	WRAPR	[700200000000]	;CONO  APR, set APR priority assignment
    33		700240	000000		OPDEF	RDAPR	[700240000000]	;CONI  APR, read APR status bits
    34		700600	000000		OPDEF	WRPI	[700600000000]	;CONO  PI,  write PI status
    35		700640	000000		OPDEF	RDPI	[700640000000]	;CONI  PI,  read PI status
    36		701100	000000		OPDEF	CLRPT	[701100000000]	;BLKO  PAG, clear pager tables
    37		701200	000000		OPDEF	WREBR	[701200000000]	;CONO  PAG, write Exec Base Register
    38		701240	000000		OPDEF	RDEBR	[701240000000]	;CONI  PAG, read Exec Base Register
    39		701140	000000		OPDEF	WRUBR	[701140000000]	;DATAO PAG, write User Base Register
    40		701040	000000		OPDEF	RDUBR	[701040000000]	;DATAI PAG, read User Base Register
    41					DEFINE	WRADB(X),<PRINTX KS does not have an address break register X>
    42					DEFINE	RDADB(X),<PRINTX KS does not have an address break register X>
    43		702140	000000		OPDEF	WRPUR	[702140000000]	;Write Process Use Register
    44		702100	000000		OPDEF	RDPUR	[702100000000]	;Read Process Use Register
    45		702400	000000		OPDEF	WRSPB	[702400000000]	;Write SPT Base Address
    46		702000	000000		OPDEF	RDSPB	[702000000000]	;Read SPT Base Address
    47		702440	000000		OPDEF	WRCSB	[702440000000]	;Write CST Base Address
    48		702040	000000		OPDEF	RDCSB	[702040000000]	;Read CST Base Address
    49		702540	000000		OPDEF	WRCSTM	[702540000000]	;Write CST Mask
    50		702500	000000		OPDEF	RDCSTM	[702500000000]	;Read CST Mask
    51		702600	000000		OPDEF	WRTIME	[702600000000]	;WRITE 2 WORD TIME BASE.
    52		702200	000000		OPDEF	RDTIME	[702200000000]	;READ 2 WORD TIME BASE.
    53		702640	000000		OPDEF	WRINT	[702640000000]	;WRITE INTERVAL TIMER PERIOD
    54		702240	000000		OPDEF	RDINT	[702240000000]	;READ CURRENT VALUE OF INTERVAL TIMER
    55		702700	000000		OPDEF	WRHSB	[702700000000]	;WRITE HALT STATUS BLOCK BASE ADR
    56		703000	000000		OPDEF	RDHSB	[703000000000]	;READ HALT STATUS BLOCK BASE ADR
    57		704000	000000		OPDEF	UMOVE	[704000000000]	;MOVE FROM USER
    58		705000	000000		OPDEF	UMOVEM	[705000000000]	;MOVE TO USER
    59		710000	000000		OPDEF	TIOE	[710000000000]	;Test I/O word, skip if equal to zero
    60		711000	000000		OPDEF	TION	[711000000000]	;Test I/O word, skip if non zero
    61		712000	000000		OPDEF	RDIO	[712000000000]	;Read I/O word
    62		713000	000000		OPDEF	WRIO	[713000000000]	;Write I/O word
    63		714000	000000		OPDEF	BSIO	[714000000000]	;Bit Set I/O word
    64		715000	000000		OPDEF	BCIO	[715000000000]	;Bit Clear I/O word
    65		720000	000000		OPDEF	TIOEB	[720000000000]	;  same as above, but I/O byte
    66		721000	000000		OPDEF	TIONB	[721000000000]
    67		722000	000000		OPDEF	RDIOB	[722000000000]
    68		723000	000000		OPDEF	WRIOB	[723000000000]
    69		724000	000000		OPDEF	BSIOB	[724000000000]
    70		725000	000000		OPDEF	BCIOB	[725000000000]
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 3
KSSYM	MAC	 4-Aug-76 23:39		KS-10 INSTRUCTION DEFINITIONS

    71					;APRID BITS.
    72			037777		APRSER==37777		;PROCESSOR SERIAL NUMBER.
    73
    74					;WRAPR (CONO APR) BITS.
    75			200000		LP.IOR==1B19		;IO RESET
    76			100000		LP.ESF==1B20		;ENABLE SELECTED FLAGS (BITS 26-31)
    77			040000		LP.DSF==1B21		;DISABLE SELECTED FLAGS (BITS 26-31)
    78			020000		LP.CSF==1B22		;CLEAR SELECTED FLAGS (BITS 26-31)
    79			010000		LP.SSF==1B23		;SET SELECTED FLAGS (BITS 26-31)
    80			002000		LP.I8C==1B25		;INTERRUPT 8080 CONSOLE
    81			001000		LP.PWF==1B26		;POWER FAIL
    82			000400		LP.NXM==1B27		;NXM
    83			000200		LP.HPE==1B28		;HARD MEMORY ERROR
    84			000100		LP.SPE==1B29		;SOFT MEMORY ERROR
    85			000040		LP.TIM==1B30		;INTERVAL TIMER
    86			000020		LP.80C==1B31		;8080 CONSOLE
    87			000010		LP.INT==1B32		;GENERATE INTERUPT REQUEST
    88			000007		LP.PIA==7B35		;PIA
    89
    90					;LEFT HALF OF RDAPR(CONI APR) BITS
    91		001000	000000		LP.PFE==1B8		;POWER FAIL ENABLED
    92		000400	000000		LP.NEE==1B9		;NON-EXISTENT MEMORY ERROR ENABLED
    93		000200	000000		LP.HEE==1B10		;HARD MEMORY ERROR INTERUPT ENABLED
    94		000100	000000		LP.SEE==1B11		;SOFT MEMORY ERROR INTERRUPT ENABLED
    95		000040	000000		LP.ITE==1B12		;INTERVAL TIMER ENABLED
    96		000020	000000		LP.80E==1B13		;8080 CONSOLE INTERRUPT ENABLED
    97
    98					;RIGHT HALF OF RDAPR(CONI APR) BITS
    99			001000		LP.PWF==1B26		;POWER FAIL ERROR
   100			000400		LP.NXM==1B27		;NON-EXISTENT MEMORY ERROR
   101			000200		LP.HPE==1B28		;HARD MEMORY ERROR
   102			000100		LP.SPE==1B29		;SOFT MEMORY ERROR
   103			000040		LP.ITD==1B30		;INTERVAL TIMER DONE
   104			000020		LP.80I==1B31		;8080 CONSOLE INTERUPT
   105			000010		LP.INT==1B32		;INTERRUPT REQUEST
   106			000007		LP.PIA==7B35		;PIA
   107
   108					;BITS IN WRPI (CONO PI.).
   109
   110			020000		LI.CPP==1B22		;CLEAR PROGRAM REQUESTS ON SELECTED CHANNELS
   111			010000		LI.CPS==1B23		;CLEAR PI SYSTEM
   112			004000		LI.REQ==1B24		;REQUEST INTERRUPTS ON SELECTED CHANNELS
   113			002000		LI.CON==1B25		;TURN SELECTED CHANNEL ON.
   114			001000		LI.COF==1B26		;TURN SELECTED CHANNEL OFF.
   115			000400		LI.PIF==1B27		;TURN SYSTEM OFF
   116			000200		LI.PIN==1B28		;TURN SYSTEM ON.
   117			000100		LI.CO1==1B29
   118			000040		LI.CO2==1B30
   119			000020		LI.CO3==1B31
   120			000010		LI.CO4==1B32
   121			000004		LI.CO5==1B33
   122			000002		LI.CO6==1B34
   123			000001		LI.CO7==1B35
   124			000177		LI.ACO==LI.CO1+LI.CO2+LI.CO3+LI.CO4+LI.CO5+LI.CO6+LI.CO7
   125
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 3-1
KSSYM	MAC	 4-Aug-76 23:39		KS-10 INSTRUCTION DEFINITIONS

   126					;LEFT HALF CONI PI BITS
   127		000100	000000		LI.PR1==1B11		;PROGRAM P1 REQUEST FOR CHANNEL 1
   128		000040	000000		LI.PR2==1B12		;PROGRAM PI REQUEST FOR CHANNEL 2
   129		000020	000000		LI.PR3==1B13		;PROGRAM PI REQUEST FOR CHANNEL 3
   130		000010	000000		LI.PR4==1B14		;PROGRAM PI REQUEST FOR CHANNEL 4
   131		000004	000000		LI.PR5==1B15		;PROGRAM PI REQUEST FOR CHANNEL 5
   132		000002	000000		LI.PR6==1B16		;PROGRAM PI REQUEST FOR CHANNEL 6
   133		000001	000000		LI.PR7==1B17		;PROGRAM PI REQUEST FOR CHANNEL 7
   134
   135					;RIGHT HALF PI CONI BITS.
   136
   137			040000		LI.IP1==1B21			;INTERRUPT IN PROGRESS ON PI CHANNEL 1
   138			020000		LI.IP2==1B22			;INTERRUPT IN PROGRESS ON PI CHANNEL 2
   139			010000		LI.IP3==1B23			;INTERRUPT IN PROGRESS ON PI CHANNEL 3
   140			004000		LI.IP4==1B24			;INTERRUPT IN PROGRESS ON PI CHANNEL 4
   141			002000		LI.IP5==1B25			;INTERRUPT IN PROGRESS ON PI CHANNEL 5
   142			001000		LI.IP6==1B26			;INTERRUPT IN PROGRESS ON PI CHANNEL 6
   143			000400		LI.IP7==1B27			;INTERRUPT IN PROGRESS ON PI CHANNEL 7
   144			077400		LI.IPA==LI.IP1+LI.IP2+LI.IP3+LI.IP4+LI.IP5+LI.IP6+LI.IP7
   145									;INTERRUPT IN PROGRESS ON ANY OR ALL PI CHANNELS
   146			000200		LI.PIA==1B28			;PI ACTIVE
   147			000100		LI.CO1==1B29			;PI CHANNEL 1 ON
   148			000040		LI.CO2==1B30			;PI CHANNEL 2 ON
   149			000020		LI.CO3==1B31			;PI CHANNEL 3 ON
   150			000010		LI.CO4==1B32			;PI CHANNEL 4 ON
   151			000004		LI.CO5==1B33			;PI CHANNEL 5 ON
   152			000002		LI.CO6==1B34			;PI CHANNEL 6 ON
   153			000001		LI.CO7==1B35			;PI CH7NNEL 7 ON
   154			000177		LI.ACO==LI.CO1+LI.CO2+LI.CO3+LI.CO4+LI.CO5+LI.CO6+LI.CO7
   155
   156
   157					;BITS IN WREBR (CONO PAG).
   158			040000		LG.KLP==1B21		;KL PAGING IN EFFECT.
   159			020000		LG.TEN==1B22		;TRAP ENABLE
   160			003777		LG.EPT==3777		;ADDRESS OF EPT
   161
   162					;BITS IN WRUBR (DATAO PAG).
   163		400000	000000		LG.LAB==1B0		;LOAD AC BLOCKS
   164		100000	000000		LG.LUB==1B2		;LOAD USER BASE REGISTER
   165		007000	000000		LG.CAC==7B8		;CURRENT AC BLOCK #
   166		000700	000000		LG.PAC==7B11		;PREV. AC BLOCK #
   167			003777		LG.UPT==3777		;ADDRESS OF UBR
   168
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 4
KSSYM	MAC	 4-Aug-76 23:39		KS-10 INSTRUCTION DEFINITIONS

   169					;HERE ARE APR BITS THAT ARE COMPATIBLE BETWEEN KS, KL, AND KI.
   170					; USE NAMES FORMERLY USED FOR KI10 APR BITS TO MAKE
   171					; THINGS EASIER.
   172
   173					XP APRIOB,LP.IOR	^;IOB RESET
   174					XP APRNXM,LP.NXM	^;NXM
   175					XP APRPOW,LP.PWF	^;POWER FAILURE
   176					XP APRPAR,LP.HPE	^;HARD PARITY ERROR
   177
   178					;MASKS FOR INTERRUPTS
   179
   180					XP APFMSK,LP.PWF+LP.NXM	^;FATAL ERROR INTERRUPTS
   181					XP APRMSK,APFMSK+LP.ITD+LP.80I+LP.HPE	^;MASK FOR ALL INTERRUPT CONDITIONS
   182
   183					DEFINE CLPARF<WRAPR LP.CSF+LP.HPE>
   184					XP CLRNXM,<LP.CSF+LP.NXM+LP.HPE>	^;CONO APR,CLRNXM CLEARS NXM
   185
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 5
KSSYM	MAC	 4-Aug-76 23:39		KS-10 INSTRUCTION DEFINITIONS

   186					; HERE ARE THE DEFINITION OF THE CTY(8080) INTERFACE WORDS
   187
   188					;KSSS4==MTIOC(=24) THE WORD RESERVED FOR COMMUNICATING THE SENSE SWITCH INFORMATION
   189						XP SS4,4	^;"SENSE SWITCH 4",USED FOR AUTO RELOAD SELECTION
   190
   191					;RLWORD==31 THE RELOAD WORD FOR COMMUNICATING BETWEEN THE KS AND THE 8080
   192		010000	000000			KPACT==1B5		;KEEP ALIVE ACTIVE
   193			177400			KPALIV==377B27		;KEEP ALIVE WORD
   194			000033				KPALVE==^D27	;END OF KEEP ALIVE BYTE
   195			000010				KPALVL==8	;LENGTH OF KEEP ALIVE BYTE
   196
   197					;CTYIWD==32 THE INPUT FROM CTY WORD
   198			000377			CTYICH==377B35		;CTY INPUT CHARACTER
   199			000400			CTYIVL==1B27		;INPUT VALID FLAG
   200
   201					;CTYOWD==33 THE OUTPUT TO CTY WORD
   202			000377			CTYOCH==377B35		;CTY OUTPUT CHARACTER
   203			000400			CTYOVL==1B27		;OUTPUT VALID FLAG
   204
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 6
KSSYM	MAC	 4-Aug-76 23:39		HARDWARE PAGING PARAMETERS

   205					SUBTTL HARDWARE PAGING PARAMETERS
   206
   207					;PAGE FAIL (AND MAP INSTRUCTION) WORD DEFINITIONS
   208
   209					XP PFW.U,(1B0)		^;USER/EXEC ADDRESS SPACE BIT
   210					XP PFW.H,(1B1)		^;"HARDWARE" REASON FOR PAGE FAIL.
   211
   212					;THE FOLLOWING DEFINITIONS APPLY IF PFW.H IS ZERO:
   213
   214					XP PFW.A,(1B2)		^;COPY OF A BIT FROM MAP SLOT
   215					XP PFW.W,(1B3)		^;W BIT FROM MAP SLOT
   216					XP PFW.S,(1B4)		^;S BIT FROM MAP SLOT
   217					XP PFW.T,(1B5)		^;ON IF WRITE WAS ATTEMPTED.
   218								;(DOESN'T SAY THATS WHY IT FAILED, THO.)
   219					XP PFW.C,(1B7)		^;C BIT FROM MAP SLOT.
   220					XP PFW.R,(1B8)		^;PAGED REFERENCE (MAP INSTRUCTION)
   221
   222					;IF PFW.H IS 1, FOLLOWING CODES APPLY:
   223
   224					XP PF.NXD,20		^;IO INSTR TO NX DEVICE OR REGISTER
   225								; (BITS 14-35 HOLD IO ADDR.).
   226					XP PF.ABK,23		^;ADDRESS BREAK (NOT MEANINGFUL ON KS)
   227					XP PF.PTP,25		^;PAGE TABLE PARITY ERROR
   228					XP PF.HME,36		^;HARD MEMORY ERROR.
   229					XP PF.NXM,37		^;NXM.
   230
   231					;PAGE MAP POINTER BITS (KI PAGING)
   232
   233			400000		XP PGE.A,400000^PGE.A==:400000^
   234					XP PGE.P,0		^;PUBLIC (NOT MEANINGFUL ON KS)
   235			100000		XP PGE.W,100000^PGE.W==:100000^
   236			040000		XP PGE.S,40000^PGE.S==:40000^
   237					XP PGE.C,20000		^;CACHE BIT
   238
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 7
KSSYM	MAC	 4-Aug-76 23:39		HARDWARE PAGING PARAMETERS

   239					;PC BITS.
   240
   241					XP PC.FPD,1B22	^;FIRST PART DONE
   242			010000		XP PC.USR,1B23^PC.USR==:1B23^
   243					XP PC.PUB,0		^;PUBLIC (NOT MEANINGFUL ON KS)
   244					XP PC.UIO,1B24	^;USER IO
   245					XP PC.ADR,1B26	^;ADDRESS FAILURE INHIBIT( NOT MEANINGFUL ON KS)
   246					XP PC.TRP,3B28	^;TRAP FLAGS
   247					XP PC.OV,1B18	^;OVERFLOW
   248					XP PC.FOV,1B21	^;FLOATING OVERFLOW
   249					XP PC.FXU,1B29	^;FLOATING EXPONENT UNDERFLOW
   250					XP PC.DCK,1B30	^;DIVIDE CHECK
   251
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 8
KSSYM	MAC	 4-Aug-76 23:39		HARDWARE PAGING PARAMETERS

   252					;LOCATIONS IN UPT FIXED BY KS-10 HARDWARE
   253
   254					XP UPTGP0,0		^;PAGE 0 OF USER
   255					XP UPTEP0,400		^;FIRST PAGE OF EXEC (340) IN UPT
   256					XP UPTPGT,420		^;(SOFTWARE LOC. DESC. AS ADDRESS OF LUUO BLOCK ON UPT PICTURE)
   257
   258					XP UPTOVT,421		^;OVERFLOW TRAP INSTRUCTION
   259					XP UPTPOV,422		^;PDL OVERFLOW
   260					XP UPTTR3,423		^;TRAP 3
   261					XP UPTMUU,424		^;MUUO STORED HERE
   262					XP UPTMUP,425		^;MUUO PC STORED HERE
   263					XP UPTPCW,426		^;PROCESS CONTEXT WORD (SECTION, ETC)
   264								; (427 UNUSED)
   265					XP UPTKNT,430		^;KERNAL NO TRAP WORD
   266					XP UPTKTR,431		^;KERNEL TRAP
   267					XP UPTSNT,432		^;SUPERVISOR NO TRAP
   268					XP UPTSTR,433		^;SUPERVISOR TRAP
   269					XP UPTPNT,434		^;CONCEALED NO TRAP,USED EQUIVALENT TO KI/KL PUBLIC
   270					XP UPTCNT,434		^;CONCEALED NO TRAP, USED EQUIVALENT TO KI/KL PUBLIC
   271					XP UPTPTR,435		^;CONCEALED TRAP,USED EQUIVALENT TO PUBLIC ON KI/KL
   272					XP UPTCTR,435		^;CONCEALED TRAP,USED EQUIVALENT TO PUBLIC ON KI/KL
   273								; (436 TO 477 AVAILABLE TO SOFTWARE.)
   274					XP UPTPFW,500		^;PAGE FAIL WORD, USER OR EXEC, STORED HERE.
   275					XP UPTOPP,501		^;OLD PAGE FAIL PC
   276					XP UPTNPP,502		^;NEW PAGE FAIL PC
   277					XP UPTFSL,520		^;BEGINNING OF CONTIGUOUS AREA AVAILABLE
   278								; TO SOFTWARE.  (REALLY STARTS AT 503,
   279								; BUT COMMON WANTS TWENTY WORD BOUNDARY.
   280
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 9
KSSYM	MAC	 4-Aug-76 23:39		HARDWARE PAGING PARAMETERS

   281					;AC BLOCK DEFINITIONS
   282
   283					XP USRACB,0             ^;USER AC BLOCK (MUST BE DEFINED AS ZERO)
   284					XP EX0ACB,1             ^;FOR EXEC MODE.
   285					XP EX1ACB,2             ^; ALTERNATE BETWEEN THESE TWO AS UUOS AND PAGE FAULTS ARE DONE.
   286					XP NULACB,2             ^;CONTAINS NULL JOB
   287					XP SA0ACB,3             ^;AC BLOCK FOR SA 10 CHANNEL'S PI LEVEL.
   288					XP SA1ACB,3             ^;FOR BOTH CHANNELS.
   289					XP RS1ACB,6             ^;RESERVED (KL PAGING)
   290					XP RS2ACB,7             ^;RESERVED TO UCODE (EXT. INST, PARITY ERROR DATA)
   291					XP NUMACB,6		^;NUMBER OF AC BLOCKS AVAILABLE ON THIS MACHINE
   292
   293					;MACRO TO USE WHEN JUST ENTERING EXEC MODE TO SWITCH TO
   294					; THE EXEC AC BLOCK
   295
   296					DEFINE EXECAC,<SALL
   297					        WRUBR [LG.LAB+<EX0ACB>B8+<USRACB>B11]>
   298
   299					DEFINE USERAC,<SALL
   300					        WRUBR   [LG.LAB+<USRACB>B8+<USRACB>B11]
   301					>
   302
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 10
KSSYM	MAC	 4-Aug-76 23:39		HARDWARE PAGING PARAMETERS

   303					;LOCATIONS IN EPT FIXED BY KS-10 HARDWARE
   304
   305					XP EPTLUU,40		^;LOCAL UUO STORED HERE
   306					XP EPTLUI,41		^;INSTRUCTION EXECUTED FOR LOCAL UUOS
   307
   308								; (42-57) STANDARD PI INTERRUPT INSTRUCTIONS
   309								; (40+2*N)
   310
   311					;VECTOR INTERRUPT TABLE PNTRS.
   312			000100		XP EPTUB0,100^EPTUB0==:100^
   313			000101		XP EPTUB1,101^EPTUB1==:101^
   314			000102		XP EPTUB2,102^EPTUB2==:102^
   315			000103		XP EPTUB3,103^EPTUB3==:103^
   316			000104		XP EPTUB4,104^EPTUB4==:104^
   317			000105		XP EPTUB5,105^EPTUB5==:105^
   318			000106		XP EPTUB6,106^EPTUB6==:106^
   319			000107		XP EPTUB7,107^EPTUB7==:107^
   320			000110		XP EPUB10,110^EPUB10==:110^
   321			000111		XP EPUB11,111^EPUB11==:111^
   322			000112		XP EPUB12,112^EPUB12==:112^
   323			000131		XP EPUB13,131^EPUB13==:131^
   324			000114		XP EPUB14,114^EPUB14==:114^
   325			000115		XP EPUB15,115^EPUB15==:115^
   326			000116		XP EPUB16,116^EPUB16==:116^
   327			000117		XP EPUB17,117^EPUB17==:117^
   328
   329					;PAGE MAP POINTERS
   330
   331					XP EPTPG0,200		^;FIRST WORD OF PAGE MAP SLOTS (PG 400) IN EPT
   332					;ORIGIN OF VECTOR INTERRUPT TABLE
   333
   334					XP EPTVIT,400		^;NO CONFLICT ASSUMED WITH DEVICE INT ADDR. AND 420-423
   335					XP EPTPGT,420		^;(SOFTWARE LOCATION IN KS)
   			XP EPTOVT,421		^;OVERFLOW
   337					XP EPTPOV,422		^;PDL OVERFLOW
   338					XP EPTTR3,423		^;TRAP 3
   339
   340					XP EPTMP0,600		^;FIRST LOCATION OF MAP SLOTS FOR EXEC
   341								; PAGES 0-337. (USED TO BE UNMAPPED,
   342								; BUT NEED SLOTS TO CONTROL CACHE.)
   343					XP EPTFSL,760		^;START OF CONTIGUOUS BLOCK AVAILABLE TO SOFTWARE.
   344
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 11
KSSYM	MAC	 4-Aug-76 23:39		SYSTEM MACROS - CLEAR PAGE TABLE

   345					SUBTTL SYSTEM MACROS - CLEAR PAGE TABLE
   346
   347					;MACROS TO CLEAR EITHER ALL OF PAGE TABLE, OR ONE ENTRY.
   348
   349					DEFINE CLRPTA,<SALL
   350						IF2,<IFNDEF EPT,<EXTERN EPT>
   351						     IFNDEF EPTEBR,<EXTERN EPTEBR>>
   352						WREBR	@EPT+EPTEBR>
   353
   354
   355					;CLEAR ONE ENTRY IN PAGE TABLE. ARG IS ADDRESS OF
   356					; LOCATION TO CLEAR (CAN BE INDEXED, INDIRECT).
   357
   358					DEFINE CLRPTO(ARG)<SALL
   359						IFB <ARG>,<PRINTX MISSING ARGUMENT TO CLRPTO
   360								QQQQQQ>
   361						CLRPT	ARG>
   362
   363					;MACRO TO CLEAR PAGE TABLE FOR PAGE WHOSE NUMBER IS IN RH(W).
   364					; PAGE NUMBER IS IN CORE1 STYLE FORMAT (1000 IS EXEC
   365					; 340)
   366
   367					DEFINE CLRPTW<SALL
   368						IF2,<IFNDEF CLPTW,<EXTERN CLPTW>>
   369						PUSHJ	P,CLPTW>
   370
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 12
KSSYM	MAC	 4-Aug-76 23:39		CACHE INVALIDATE MACRO DEFINITION

   371					SUBTTL CACHE INVALIDATE MACRO DEFINITION
   372
   373					;MACRO TO INVALIDATE THE CACHE
   374
   375					DEFINE CSHIVL<
   376						PUSHJ	P,CSINVL##>	;ENTRY POINT IN PICON
   377
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 13
KSSYM	MAC	 4-Aug-76 23:39		SYSTEM MACROS - CHARGING

   378					SUBTTL SYSTEM MACROS - CHARGING
   379
   380					; MACROS TO MANIPULATE CHARGING CLOCK.
   381
   382					DEFINE CHARGE<SALL
   383						IF2,<IFNDEF KSCHRG,<EXTERNAL KSCHRG>>
   384						PUSHJ P,KSCHRG>
   385
   386					DEFINE NOCHARGE<SALL
   387						IF2,<IFNDEF KSNOCH,<EXTERNAL KSNOCH>>
   388						PUSHJ P,KSNOCH>
   389
   390					;MACRO TO CONSTRUCT PARAMETER IN SIXBIT TO 1ST BREAK CHAR.
   391					;  ON COMPLETION ZZ = RIGHT ADJUSTED SIXBIT PARAMETER
   392					DEFINE STPBRK(LOC),<SALL
   393					ZZ==0		;BUILD THE SIXBIT PARAMETER
   394					YY==0		;FLAG A BREAK CHARACTER FOUND
   395					IRPC LOC,<
   396						IFL "'LOC"-"0" <STOPI
   397							     YY==1>	;FLAG BREAK FOUND
   398						IFG "'LOC"-"Z" <STOPI
   399								YY==1>
   400						IFG "'LOC"-"9" <
   401						  IFL "'LOC"-"A" <STOPI
   402								  YY==1>>
   403						IFE YY,<ZZ==<ZZ_6>+''LOC''>
   404					>; END IRPC
   405					>;END STPBRK
   406
   407					;MACRO TO DETERMINE IF "LOC" IS A REGISTER OR NOT
   408
   409					DEFINE LSTTST(LOC,A)<SALL
   410					REGYES==0
   411					STPBRK 'LOC
   412					IRP A,<IFE ''A''-ZZ,<
   413						REGYES==1>>
   414					>;END LSTTST
   415
   416
   417					DEFINE REGTST(LOC),<SALL
   418						LSTTST 'LOC,<S,P,J,PG,F,U,T1,T2,T3,T4,W,M,P1,P2,P3,P4>>
   419
   420					DEFINE CHGSTS(LOC)<SALL
   421						IF2,<IFNDEF TBVALUE,<EXTERNAL TBVALUE,TBON>>
   422						REGTST 'LOC
   423						IFN REGYES,<MOVE 'LOC,TBON>	;IF REGISTER
   424						IFE REGYES,<			;NOT A REGISTER
   425						JRST	[PUSH P,T1
   426							 MOVE T1,TBON
   427							 TLO  T1,1		;FORCE NOT ZERO VALUE
   428							 MOVEM T1,'LOC
   429							 POP   P,T1
   430							 JRST  .+1]>
   431						>; END CHGSTS
   432
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 13-1
KSSYM	MAC	 4-Aug-76 23:39		SYSTEM MACROS - CHARGING

   433					;MACRO TO SAVE AND RESTORE THE TIME BASE IN THE INTERRUPT ROUTINES
   434					;  IN THE FOLLOWING MACROS "LOC" IS A POINTER TO 2 CONSECUTIVE WORDS
   435
   436					DEFINE TBSAVE(LOC),<SALL
   437						RDTIME 'LOC>
   438
   439					DEFINE TBSET(LOC),<SALL
   440						WRTIME  'LOC>
   441
   442			000001		XP CHGON,1^CHGON==:1^
   443
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 14
KSSYM	MAC	 4-Aug-76 23:39		SYSTEM MACROS - EXECUTIVE EXECUTE.

   444					SUBTTL SYSTEM MACROS - EXECUTIVE EXECUTE.
   445					;SAME IN KS AND KL.
   446
   447					;BITS IN PXCT AC FIELD
   448			000010			PX.EAC==10		;EFFECTIVE ADDRESS OF OBJECT INSTRUCTION
   449			000004			PX.MEM==4		;MEMORY OPERAND (BOTH FETCH AND STORE)
   450			000002			PX.BYT==2		;EFFECTIVE ADDRESS OF BYTE POINTER
   451			000001			PX.SRC==1		;STACK WORD IN PUSH/POP; SOURCE IN BLT
   452
   453						DEFINE	XCTBU(INST)<SALL
   454						GINST==<PXCT PX.MEM,[INST]>
   455					
   456					
   457						PXGEN(<INST>,<DPB,IDPB,LDB,ILDB>,<PX.SRC>)
   458								;;INCLUDE BYTE INSTRUCTIONS BECAUSE XCTBU IS USED ON KI10 FOR READ-M
   459					ODIFY-WRITE.
   460						PXGEN(<INST>,<BLT,PUSH,POP>,<PX.SRC!PX.MEM>)
   461						GINST
   462						PURGE GINST
   463					>;END XCTBU MACRO DEFINITION
   464
   465						DEFINE XCTFU(INST)<SALL
   466						GINST==<PXCT PX.MEM,[INST]>
   467							;;INCLUDE DPB AND IDPB BECAUSE XCTFU USED FOR RMW ON KI
   468						PXGEN(<INST>,<LDB,ILDB,DPB,IDPB,POP,BLT>,<PX.SRC>)
   469						GINST
   470						PURGE GINST
   471					>;END XCTFU MACRO DEFINITION
   472
   473						DEFINE XCTTU(INST)<SALL
   474						GINST==<PXCT PX.MEM,[INST]>
   475						PXGEN(<INST>,<LDB,ILDB,IDPB,DPB>,<QQQQQQ>)	;;CAN'T LOAD USERS AC THIS WAY.
   476									;;MAKE IDPB AND DPB ILLEGAL BECAUSE CAN'T DO IT ON KI, MUST 
   477					USE FU OR BU INSTEAD.
   478						PXGEN(<INST>,<PUSH>,<PX.SRC>)
   479						PXGEN(<INST>,<POP,BLT>,<PX.MEM>)
   480						GINST
   481						PURGE GINST
   482					>;END XCTTU MACRO DEFINITION
   483
   484
   485						DEFINE PXGEN(INST,CODES,BITS)<
   486						ZZ==0
   487						IRPC INST,<
   488						ZZ1==0
   489						IFIDN < > <INST>,<ZZ1==1>
   490						IFIDN <	> <INST>,<ZZ1==1>
   491						IFN ZZ1,<STOPI>
   492						IFE ZZ1,<
   493						ZZ==ZZ_6
   494						ZZ==ZZ+''INST''
   495					>;END IFE ZZ1
   496					>;END IRPC INST
   497						IRP CODES,<
   498						IFE <ZZ-''CODES''>,<GINST==<PXCT BITS,[INST]>>
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 14-1
KSSYM	MAC	 4-Aug-76 23:39		SYSTEM MACROS - EXECUTIVE EXECUTE.

   499					>;END IRP CODES
   500					
   501						PURGE ZZ1
   502					>;END PXGEN MACRO DEFINITION
   503
   504
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 15
KSSYM	MAC	 4-Aug-76 23:39		SYSTEM MACROS - EXECUTIVE EXECUTE.

   505						ASUPPRESS		;ONLY LIST REFERENCED SYMBOLS
   506
   507					IFDEF LISTSN,<IFN LISTSN,<PAGE>>	;No $END for KISYM,KLSYM,KSSYM,F3SYM
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 15-1
KSSYM	MAC	 4-Aug-76 23:39		SYSTEM MACROS - EXECUTIVE EXECUTE.

   508
   509						purge listsn
   510						end

NO ERRORS DETECTED

PROGRAM BREAK IS 000000
CPU TIME USED 05:38.567

18P CORE USED

KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 1
S	MAC	 4-Aug-76 23:31		S.MAC - with system parameter file for P035/D, January 1988


Symbol cross reference

APFMSK	   181#	   182
APRIOB	   174#
APRMSK	   182#
APRNXM	   175#
APRPAR	   177#
APRPOW	   176#
APRSER	    72#
CHGON	   442#
CLRNXM	   185#
CPUKS	    15
CPUTYP	    15#
CTYICH	   198#
CTYIVL	   199#
CTYOCH	   202#
CTYOVL	   203#
EPTFSL	   344#
EPTLUI	   307#
EPTLUU	   306#
EPTMP0	   341#
EPTOVT	   337#
EPTPG0	   332#
EPTPGT	   336#
EPTPOV	   338#
EPTTR3	   339#
EPTUB0	   312#
EPTUB1	   313#
EPTUB2	   314#
EPTUB3	   315#
EPTUB4	   316#
EPTUB5	   317#
EPTUB6	   318#
EPTUB7	   319#
EPTVIT	   335#
EPUB10	   320#
EPUB11	   321#
EPUB12	   322#
EPUB13	   323#
EPUB14	   324#
EPUB15	   325#
EPUB16	   326#
EPUB17	   327#
EX0ACB	   285#
EX1ACB	   286#
KPACT	   192#
KPALIV	   193#
KPALVE	   194#
KPALVL	   195#
LG.CAC	   165#
LG.EPT	   160#
LG.KLP	   158#
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 1
S	MAC	 4-Aug-76 23:31		S.MAC - with system parameter file for P035/D, January 1988


Symbol cross reference

LG.LAB	   163#
LG.LUB	   164#
LG.PAC	   166#
LG.TEN	   159#
LG.UPT	   167#
LI.ACO	   124#	   154#
LI.CO1	   117#	   124	   147#	   154
LI.CO2	   118#	   124	   148#	   154
LI.CO3	   119#	   124	   149#	   154
LI.CO4	   120#	   124	   150#	   154
LI.CO5	   121#	   124	   151#	   154
LI.CO6	   122#	   124	   152#	   154
LI.CO7	   123#	   124	   153#	   154
LI.COF	   114#
LI.CON	   113#
LI.CPP	   110#
LI.CPS	   111#
LI.IP1	   137#	   144
LI.IP2	   138#	   144
LI.IP3	   139#	   144
LI.IP4	   140#	   144
LI.IP5	   141#	   144
LI.IP6	   142#	   144
LI.IP7	   143#	   144
LI.IPA	   144#
LI.PIA	   146#
LI.PIF	   115#
LI.PIN	   116#
LI.PR1	   127#
LI.PR2	   128#
LI.PR3	   129#
LI.PR4	   130#
LI.PR5	   131#
LI.PR6	   132#
LI.PR7	   133#
LI.REQ	   112#
LISTSN	     3	     4	     4#	     8	   507	   509
LP.80C	    86#
LP.80E	    96#
LP.80I	   104#	   182
LP.CSF	    78#	   185
LP.DSF	    77#
LP.ESF	    76#
LP.HEE	    93#
LP.HPE	    83#	   101#	   177	   182	   185
LP.I8C	    80#
LP.INT	    87#	   105#
LP.IOR	    75#	   174
LP.ITD	   103#	   182
LP.ITE	    95#
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 1
S	MAC	 4-Aug-76 23:31		S.MAC - with system parameter file for P035/D, January 1988


Symbol cross reference

LP.NEE	    92#
LP.NXM	    82#	   100#	   175	   181	   185
LP.PFE	    91#
LP.PIA	    88#	   106#
LP.PWF	    81#	    99#	   176	   181
LP.SEE	    94#
LP.SPE	    84#	   102#
LP.SSF	    79#
LP.TIM	    85#
NULACB	   287#
NUMACB	   292#
PC.ADR	   246#
PC.DCK	   251#
PC.FOV	   249#
PC.FPD	   242#
PC.FXU	   250#
PC.OV	   248#
PC.PUB	   244#
PC.TRP	   247#
PC.UIO	   245#
PC.USR	   242#
PF.ABK	   227#
PF.HME	   229#
PF.NXD	   225#
PF.NXM	   230#
PF.PTP	   228#
PFW.A	   215#
PFW.C	   220#
PFW.H	   211#
PFW.R	   221#
PFW.S	   217#
PFW.T	   218#
PFW.U	   210#
PFW.W	   216#
PGE.A	   233#
PGE.C	   238#
PGE.P	   235#
PGE.S	   236#
PGE.W	   235#
PX.BYT	   450#
PX.EAC	   448#
PX.MEM	   449#
PX.SRC	   451#
RS1ACB	   290#
RS2ACB	   291#
SA0ACB	   288#
SA1ACB	   289#
SS4	   190#
UPTCNT	   271#
UPTCTR	   273#
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 1
S	MAC	 4-Aug-76 23:31		S.MAC - with system parameter file for P035/D, January 1988


Symbol cross reference

UPTEP0	   256#
UPTFSL	   278#
UPTGP0	   255#
UPTKNT	   266#
UPTKTR	   267#
UPTMUP	   263#
UPTMUU	   262#
UPTNPP	   277#
UPTOPP	   276#
UPTOVT	   259#
UPTPCW	   264#
UPTPFW	   275#
UPTPGT	   257#
UPTPNT	   270#
UPTPOV	   260#
UPTPTR	   272#
UPTSNT	   268#
UPTSTR	   269#
UPTTR3	   261#
USRACB	   284#
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 1
S	MAC	 4-Aug-76 23:31		S.MAC - with system parameter file for P035/D, January 1988


Macro/Opdef cross reference

ADJBP	    28#
ADJSP	    23#
APRID	    31#
BCIO	    64#
BCIOB	    70#
BSIO	    63#
BSIOB	    69#
CHARGE	   382#
CHGSTS	   420#
CLPARF	   183#
CLRPT	    36#
CLRPTA	   349#
CLRPTO	   358#
CLRPTW	   367#
CSHIVL	   375#
DADD	    24#
DDIV	    27#
DMUL	    26#
DSUB	    25#
EXECAC	   296#
IFKMC	    16#
IFNKMC	    17#
LSTTST	   409#
NOCHAR	   386#
PRINTF	    20#
PXCT	    29#
PXGEN	   485#
RDADB	    42#
RDAPR	    33#
RDCSB	    48#
RDCSTM	    50#
RDEBR	    38#
RDHSB	    56#
RDINT	    54#
RDIO	    61#
RDIOB	    67#
RDPI	    35#
RDPUR	    44#
RDSPB	    46#
RDTIME	    52#
RDUBR	    40#
REGTST	   417#
STPBRK	   392#
TBSAVE	   436#
TBSET	   439#
TIOE	    59#
TIOEB	    65#
TION	    60#
TIONB	    66#
UMOVE	    57#
KS-10 PARAMETER DEFINTIONS FOR PDP-10 MONITOR	MACRO %53B(1156)-1 15:39 15-Jan-88 Page 1
S	MAC	 4-Aug-76 23:31		S.MAC - with system parameter file for P035/D, January 1988


Macro/Opdef cross reference

UMOVEM	    58#
USERAC	   299#
WRADB	    41#
WRAPR	    32#
WRCSB	    47#
WRCSTM	    49#
WREBR	    37#
WRHSB	    55#
WRINT	    53#
WRIO	    62#
WRIOB	    68#
WRPI	    34#
WRPUR	    43#
WRSPB	    45#
WRTIME	    51#
WRUBR	    39#
XCTBU	   453#
XCTFU	   465#
XCTTU	   473#
XP	   173	   174	   175	   176	   180	   181	   184	   189	   209	   210	   214	   215	   216	   217
	   219	   220	   224	   226	   227	   228	   229	   233	   234	   235	   236	   237	   241	   242
	   243	   244	   245	   246	   247	   248	   249	   250	   254	   255	   256	   258	   259	   260
	   261	   262	   263	   265	   266	   267	   268	   269	   270	   271	   272	   274	   275	   276
	   277	   283	   284	   285	   286	   287	   288	   289	   290	   291	   305	   306	   312	   313
	   314	   315	   316	   317	   318	   319	   320	   321	   322	   323	   324	   325	   326	   327
	   331	   334	   335	   336	   337	   338	   340	   343	   442    %@N