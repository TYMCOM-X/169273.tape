COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 1
S.MAC	13-JAN-88 11:55		S.MAC - with system parameter file for P035/D, January 1988

     1				SUBTTL	S.MAC - with system parameter file for P035/D, January 1988
     2
     3				IF2,<IFNDEF LISTSN,<TAPE>>	;Skip to PASS2 in all but COMMON.LST
     4				;THIS MODULE ASSEMBLED WITH KL-10 PARAMETER FILE - KLSYM.MAC
     5
     6					IF2,<IFNDEF LISTSN,<		;LIST KLSYM.MAC IN COMMON ONLY
     7								TAPE>>
     8				TITLE COMCON - COMMAND DECODER PAGING SYS
     9				SUBTTL /RCC/PFC 	29 OCT 70
    10
    11					STOPCD(,ENTRY,COMCON)^
    12					ENTRY	COMCON		;For library searches
    13	000000'	260040	000000*	COMCON::PUSHJ	P,DIE		;**** Default stopcode for "COMCON" ****
    14	000001'	435755	435756		SIXBIT	/COMCON/  	;Title of module
    15	000002'	000000	000000		S$NONAME,,0		;?NONAME stopcode "COMCON+nnn(nnnnnn)"
    16			000000'	S$NAME==COMCON			;For STOPCDs with no arguments
    17					SALL>
    18				^
    19
    20				;CALLED FROM CLOCK ROUTINE WHEN 'COMCNT' IS GREATER THAN 0
    21				;AS SET BY COMMAND SERVICE ROUTINE
    22				;ALL AC'S HAVE BEEN SAVED BY CLOCK CHANNEL
    23				;THE COMMAND DECODER CALLS FRMCOM WHICH SCANS FOR FRAME WHICH REQUESTED
    24				;THE COMMAND AND THEN DISPATCHES(PUSHJ) TO APPROPRIATE
    25				;COMMAND SETUP ROUTINE WITH AC'S SET AS:
    26				;J = JOB NUMBER
    27				;F = ADDRESS OF DEVICE DATA BLOCK TYPING COMMAND, IF ANY
    28				;R = ADDRESS OF JOB AREA, = 0 IF NO JOB AREA
    29				;R = ADDRESS OF PROGRAM AREA, 0 MEANS NOT IN CORE OR NO CORE
    30				;S IS SET TO 0, USED FOR ADDRESS OF SUBSEQUENT CALLS
    31				;U = ADDRESS OF U DATA BLOCK OF TTY TYPING COMMAND (IF ANY)
    32				;P3 = DISPATCH ROUTINE ADDRESS AND BITS
    33				;P4 = JOB STATUS WORD (C(JBTSTS(J)))
    34				;UPON RETURN FROM COMMAND SETUP ROUTINE, A CR-LF IS ADDED TO
    35				;MESSAGE AND TTY IS STARTED ON TTY SPECIFIED BY -1(P)
    36				;SEVERAL COMMAND FLAGS ARE CHECKED BEFORE DISPATCHING TO
    37				;COMMAND SETUP ROUTINES TO SEE IF COMMAND IS LEGAL AT THIS TIME
    38				;SEVERAL MORE FLAGS ARE CHECKED UPON RETURN FROM COMMAND SETUP
    39				;ROUTINES(UNLESS AN ERROR HAS OCCURRED) FOR STANDARD
    40				;COMMAND RESPONSE
    41
    42				;SINCE THE COMMAND DECODER IS CALLED FROM THE CLOCK ROUTINE
    43				;COMMAND SETUP ROUTINE MUST RUN TO COMPLETION QUICKLY
    44				;IF A COMMAND FUNCTION CANNOT DO THIS, IT MUST JUST SET
    45				;THE JOB TO RUNABLE STATUS AND RETURN IMMEDIATELY
    46				;OR DELAY THE COMMAND FOR LATER EXECUTION
    47
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 2
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

    48				INTERNAL COMMAND,FCONRQ
    49				INTERNAL COMTAB,COMMXL,WATTAB,WATMXL,SETBL,SETMXL
    50				INTERNAL SKDCOM
    51				EXTERNAL STATES,SETSHT,DWNFLG
    52				EXTERNAL HELPPP,COMCNT,COMTOT,CMNOTF,JBTSTS,JBTUPM
    53				EXTERNAL UPTHCU,UPTJDA,UPTPC,UPTPDL,UPTREL,NOCORQ,%UPT,%UPS
    54				EXTERNAL UPTPID,UPTSPD
    55				EXTERNAL DVCNSG,TTYSTC
    56				EXTERNAL DEVOPR,LDBLOG,UPTRNM,UPTRPN,MAPUPS
    57				EXTERNAL JBTPRV,JBTNAM,JBTLIC,JBTSLC
    58				EXTERNAL SRPNDS,STRBTS,STRTAL,STRDDB,REFLAG
    59				EXTERNAL TTYSTR,TTYUSR,TTYUSW
    60				EXTERNAL TTYFUW,SGSET,SGSETD,STRTAD,UPTSTS,ACTWRT,STRTCL
    61				EXTERNAL ANYACT,ASSASG,DEVLG,DEVPHY,DEVSRC
    62				EXTERNAL DLYCOM,KSTOP,TRHALT
    63				EXTERNAL OCTPNT,PRNAME,RELEA5
    64				EXTERNAL RELEA6,RESET,ERRFCL
    65
    66				EXTERNAL JBTCNK,PVYMOD,PVZMOD,SAVJOB,GETJOB,RUNJOB,RUNJB2,UPTHRL
    67				EXTERNAL JBTCTX,JBTINA
    68
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 3
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

    69				COMMENT ! ROUTINE "COMMAND" -- CLOCK LEVEL COMMAND DECODER !
    70
    71	000003'	260040	000365'	COMMAND:PUSHJ	P,FRMCOM	;SETUP F,U,AND J FOR ANY FRAME WITH COMMAND
    72					  JRST	[AOS  CMNOTF	;NONE FOUND, COUNT THE BUG
    73	000004'	254000	005521'			POPJ  P,]	; AND RETURN
    74	000005'	513002	000000*		HLLZS	JBTINA(J)	;RESET INACTIVITY TIMEOUT
    75	000006'	202100	000434'		MOVEM	J,COMJSV	;Save job number from FRMCOM
    76								; since some commands (ATTACH,etc.)
    77								; change job # in mid-command.
    78	000007'	261040	000005		PUSH	P,U		;Save TTY LDB address, if any
    79	000010'	135300	000315'		LDB	T1,CMDCMX	;GET FORCED COMMAND INDEX, IF ANY
    80	000011'	205340	200000		MOVSI	T2,CMDCMF	;IS COMMAND FORCED?
    81	000012'	612342	000000*		TDNE	T2,TTYTAB(J)	; ..
    82	000013'	334346	000327'		 SKIPA	T2,CMFCOM(T1)	;YES. GET SIXBIT NAME OF COMMAND
    83	000014'	260040	005136'		PUSHJ	P,CTEXT		;SCAN COMMAND NAME, RETURN IT IN T2
    84	000015'	200300	000007		MOVE	T1,T2		;COPY COMMAND.
    85	000016'	211440	000001		MOVNI	T4,1		;SET MASK ALL ONES
    86	000017'	242440	777772		LSH	T4,-6		;CLEAR OUT ONE MORE CHAR.
    87	000020'	242300	000006		LSH	T1,6		;SHIFT 1 COMMAND CHAR OFF
    88	000021'	326300	000017'		JUMPN	T1,.-2		;IF NOT END OF COMMAND, GO AROUND
    89	000022'	201000	000000		MOVEI	S,0		;CLEAR FLAG REGISTER
    90	000023'	135740	000000*		LDB	P4,PVYMOD	;GET MODE
    91	000024'	200757	001023'		MOVE	P4,CMDMOD(P4)
    92	000025'	200302	000000*		MOVE	T1,JBTPRV(J)
    93	000026'	321300	000030'		JUMPL	T1,.+2		;LogoutOnStop implies RCM
    94	000027'	602300	001000		TRNE	T1,PVRCMD	;RESTRICTED COMMAND MODE?
    95	000030'	200740	001027'		 MOVE	P4,CMDRES	;YES. USER RESTRICTED COMMAND LIST
    96	000031'	200317	000000	COMLP1:	MOVE	T1,(P4)		;GET AOBJN FOR THIS SECTION
    97	000032'	661300	700000		TLO	T1,700000	;THESE USED FOR TYPE INFO
    98	000033'	200406	000440'	COMLP:	MOVE	T3,COMTAB(T1)	;GET COMMAND
    99	000034'	630400	000011		TDZ	T3,T4		;MASK
   100	000035'	316346	000440'		CAMN	T2,COMTAB(T1)	;EXACT MATCH
   101	000036'	254000	000053'		 JRST	COMFND
   102	000037'	312340	000010		CAME	T2,T3		;OR MASKED MATCH
   103	000040'	254000	000045'		 JRST	COMNEQ		;NO
   104	000041'	662000	000001		TROE	S,1
   105	000042'	660000	000002		 TRO	S,2		;FLAG SECOND MATCH
   106	000043'	540700	000006		HRR	P3,T1		;SAVE TABLE POINTER
   107	000044'	504700	000017		HRL	P3,P4		;AND AOBJN POINTER FOR TYPE
   108	000045'	253300	000033'	COMNEQ:	AOBJN	T1,COMLP	;MORE OF THIS SECTION
   109	000046'	253740	000031'		AOBJN	P4,COMLP1	;NEXT SECTION
   110	000047'	302000	000001		CAIE	S,1
   111	000050'	254037	000000		 JRST	@(P4)		;NOT FOUND OR MULTI MATCH
   112	000051'	550300	000016		HRRZ	T1,P3		;RESTORE COMMAND POINTERS
   113	000052'	554740	000016		HLRZ	P4,P3
   114	000053'	135700	005523'	COMFND:	LDB	P3,[POINT 3,(P4),2] ;GET TYPE
   115	000054'	256016	000753'		XCT	MDSP(P3)	;AND ACT ON IT
   116	000055'	200400	000006	COMFN1:	MOVE	T3,T1		;SAVE NUMBER FOR PRGRUN
   117	000056'	261040	000010		PUSH	P,T3		;SAVE COMMAND ADDRESS
   118	000057'	200742	000000*		MOVE	P4,JBTSTS(J)	;JOB STATUS WORD FOR THIS JOB
   119	000060'	607740	000004		TLNN	P4,JLOG		;IS JOB LOGGED IN?
   120	000061'	603700	100000		TLNE	P3,NOLOGIN	;NO, CAN CMND PROCEED WITH NO LOGIN?
   121	000062'	254000	000070'		 JRST	CHKRUN		;YES
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 3-2
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   122	000063'	265300	000152'		JSP	T1,COMER	;NO, TYPE "LOGIN PLEASE"
   123	000064'	377315	763722		ASCIZ /?login please
	000065'	671016	066312
   124	000066'	607474	506424	/
	000067'	000000	000000
   125	000070'	201500	000000	CHKRUN:	MOVEI	W,0		;PHYSICAL I/O FLAG
   126	000071'	603740	400000		TLNE	P4,RUN		;RUN BIT ON IN JOB STATUS?
   127	000072'	607700	010000		TLNN	P3,NORUN	;YES, DOES THIS COMMAND REQUIRE A JOB?
   128	000073'	254000	000115'		 JRST	CHKACT		;NO
   129	000074'	135300	000023*		LDB	T1,PVYMOD	;YES, DECIDE ON MESSAGE
   130	000075'	256006	000077'		XCT	CKRCER(T1)
   131	000076'	254000	000152'		JRST	COMER
   132
   133	000077'	201300	000103'	CKRCER:	MOVEI	T1,TYPCC
   134	000100'	201300	000110'		MOVEI	T1,TYPESC
   135	000101'	201300	000110'		MOVEI	T1,TYPESC
   136	000102'	201300	000103'		MOVEI	T1,TYPCC
   137
   138	000103'	377415	462702	TYPCC:	ASCIZ	/?please type ^C first
	000104'	717124	072362
	000105'	703124	057206
	000106'	203155	171346
   139	000107'	720321	200000	/
   140
   141	000110'	377415	462702	TYPESC:	ASCIZ /?please type ESC first
	000111'	717124	072362
	000112'	703124	042646
	000113'	415014	664744
   142	000114'	717501	505000	/
   143
   144	000115'	607700	024000	CHKACT:	TLNN	P3,INCOR!MINCOR	;NEED AT LEAST CONTEXT PGS IN CORE?
   145	000116'	254000	000134'		 JRST	CHKCO2		;NO
   146	000117'	602740	002000		TRNE	P4,SWPINP	;ANY SWAPPING GOING ON?
   147					 JRST	[HRRI P3,DLYCM1	;Wait to finish swap,don't set cmnd wait
   148	000120'	254000	005524'			 JRST COMDIS]
   149	000121'	201300	004000		MOVEI	T1,PRF		;MAKE SURE NONE STARTS UP
   150	000122'	412302	000057*		ANDCAM	T1,JBTSTS(J)
   151	000123'	335002	000000*		SKIPGE	JBTCTX(J)	;ARE CONTEXT PAGES IN CORE?
   152	000124'	254000	000134'		 JRST	CHKCO2		;YES, EVERYTHING IS OK.
   153	000125'	205300	100000		MOVSI	T1,MRQ		;FORCE JOB TO COME IN
   154	000126'	436302	000122*		IORM	T1,JBTSTS(J)	; BY MAKING SWAPPER SEE IT
   155	000127'	205300	040000		MOVSI	T1,JSTCTX	;GOING TO THROW AWAY USER'S ADDRESS
   156	000130'	603700	020000		TLNE	P3,MINCOR	; SPACE ANYWAY?
   157	000131'	436302	000123*		 IORM	T1,JBTCTX(J)	;YES, TELL SWAPPER JUST DO CNTXT PAGES.
   158	000132'	541700	005132'		HRRI	P3,DLYCM	;PUT JOB INTO COMMAND WAIT QUEUE
   159	000133'	254000	000157'		JRST	COMDIS		;AND COME BACK LATER
   160
   161	000134'	603700	040000	CHKCO2:	TLNE	P3,NOACT	;CAN CMND BE PERFORMED WITH ACTIVE DEVICES?
   162	000135'	331002	000131*		SKIPL	JBTCTX(J)	;No, does job have any core assigned?
   163	000136'	254000	000141'		 JRST	.+3		;No core/no devices active or don't care
   164	000137'	260040	000000*		PUSHJ	P,ANYACT	;May be active devices, go check
   165	000140'	254000	005132'		  JRST	DLYCM		;Devices active, delay command
   166
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 3-3
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   167	000141'	607700	400000		TLNN	P3,HVCORE	;DOES THIS COMMAND NEED CORE?
   168	000142'	254000	000153'		 JRST	COMGO		;NO. GO DISPATCH
   169	000143'	554302	000000*		HLRZ	T1,JBTUPM(J)	;YES, DOES THE JOB HAVE ANY EXISTENT
   170	000144'	326300	000153'		JUMPN	T1,COMGO	;PAGES? IF SO, OK
   171	000145'	265300	000152'		JSP	T1,COMER	;NO, PRINT "NO CORE ASSIGNED"
   172	000146'	377355	720306		ASCIZ /?no core assigned
	000147'	677454	520302
	000150'	717475	163734
   173	000151'	627101	505000	/
   174								; ALL GONE, NEXT TIME UPTHCU WILL BE 0
   175
   176	000152'	551700	005233'	COMER:	HRRZI	P3,ERRMES
   177	000153'	607740	200000	COMGO:	TLNN	P4,CMWB		;CLEAR CMWB; WAS JOB IN COMM WAIT
   178	000154'	621700	002000		 TLZ	P3,CMWRQ	;No, clear req. bit in disp. flags
   179	000155'	205000	200000		MOVSI	S,CMWB
   180	000156'	413002	000126*		ANDCAB	S,JBTSTS(J)
   181
   182	000157'	201000	000000	COMDIS:	MOVEI	S,0		;CLEAR S FOR SETTING DISPATCH ADDRESSES
   183	000160'	262040	000010		POP	P,T3		;RESTORE COMMAND POINTER
   184	000161'	260056	000000		PUSHJ	P,(P3)		;DISPATCH TO COMMAND SETUP ROUTINE.
   185
   186				;RETURN FROM COMMAND SETUP ROUTINE
   187
   188	000162'	262040	000005		POP	P,U		;RESTORE TTY LDB ADDRESS
   189	000163'	336000	000002		SKIPN	J		;If anyone fucked with job #
   190	000164'	256000	005526'		 STOPCD (.,STOP,CMDNLJ,,<Command for null job>)
   191				 ;;COMDIS+5
   192	000165'	550202	000012*		HRRZ	F,TTYTAB(J)	;Restore TTY DDB address
   193	000166'	250100	000434'		EXCH	J,COMJSV	;Restore original job # from FRMCOM
   194	000167'	260040	000342'		PUSHJ	P,COMCMR	;INDICATE COMMAND IS COMPLETED
   195	000170'	200100	000434'		MOVE	J,COMJSV	;Restore current job number
   196				;*;	HRRZ	F,TTYTAB(J)	;Correct TTY DDB (in case J changed)
   197	000171'	603700	000001		TLNE	P3,ERRFLG	;Did an error occur?
   198	000172'	205700	002001		 MOVSI	P3,ERRFLG+CMWRQ ;YES, JOB NUMBER REQUIRED, BUT
   199								; NONE IN ITEM. PRINT ERROR MESSAGE
   200								; ONLY, AND REQUEUE JOB IF NECESSARY.
   201
   202	000173'	201300	020000	PCRLF:	MOVEI	T1,JDCON
   203	000174'	603700	000070		TLNE	P3,TTYRNU!TTYRNC!TTYRNW
   204	000175'	412302	000156*		 ANDCAM	T1,JBTSTS(J)	;STARTING CLEAR JCONT BIT
   205	000176'	603700	000002		TLNE	P3,NOMESS	;MESSAGE SUPPRESSED?
   206	000177'	254000	000202'		 JRST	PCRLF0		;YES, SKIP WATCH STUFF TOO
   207	000200'	603700	000070		TLNE	P3,TTYRNU!TTYRNC!TTYRNW	;COMMAND START JOB UP?
   208	000201'	260040	001552'		PUSHJ	P,WCHBEG	;YES, PRINT [HH:MM:SS] STARTED TO WAIT
   209	000202'	607700	000200	PCRLF0:	TLNN	P3,NOCRLF	;SUPPRESS CRLF?
   210	000203'	260040	005234'		 PUSHJ	P,CRLF		;NO
   211	000204'	607700	000100		TLNN	P3,NOPER	;SUPPRESS PRINTING PERIOD?
   212	000205'	260040	005260'		 PUSHJ	P,PRPRMT	;NO
   213	000206'	603700	000001		TLNE	P3,ERRFLG	;Job does not run if error
   214	000207'	254000	000216'		 JRST	PCRLF1
   215	000210'	603700	000040		TLNE	P3,TTYRNU	;JOB TO RUN WHEN TTY FINISHED TYPING?
   216								; COMMAND RESPONSE (TTY TO USER MODE)?
   217	000211'	260040	000000*		 PUSHJ	P,TTYUSR	;YES, CALL SCANNER/SCHEDULER ROUTINES
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 3-4
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   218	000212'	603700	000010		TLNE	P3,TTYRNW	;CMND RESTART TTY RESPECTING IO WAIT?
   219	000213'	260040	000000*		 PUSHJ	P,TTYUSW	;YES,CALL SCANNER ROUTINE AND SCHEDULER
   220	000214'	603700	000020		TLNE	P3,TTYRNC	;NO, RUN JOB AND STAY IN MONITOR MODE?
   221	000215'	260040	000000*		 PUSHJ	P,SETRUN##	;YES, CALL SCHEDULER ROUTINE
   222	000216'	603700	000002	PCRLF1:	TLNE	P3,NOMESS	;IS THERE A MESSAGE?
   223	000217'	254000	000222'		 JRST	.+3		;Skip around if message suppress
   224	000220'	260040	000000*		PUSHJ	P,TTYSTR	;YES, START TTY TYPING IT OUT
   225	000221'	260040	000231'		PUSHJ	P,CHKKIL	;Also see if job needs killing
   226	000222'	322240	000225'		JUMPE	U,.+3		;Skip buffer clear if no LDB
   227	000223'	603700	000001		TLNE	P3,ERRFLG	;WAS THERE AN ERROR?
   228	000224'	260040	000000*		 PUSHJ	P,TSETBI	;YES, CLEAR INPUT BUFFER
   229	000225'	312100	000000*		CAME	J,JOB		;NEVER SET JRQ FOR CURRENT JOB!
   230	000226'	607700	002000		TLNN	P3,CMWRQ	;REQUEUE JOB AFTER CMND WAIT OR ERROR?
   231	000227'	263040	000000		 POPJ	P,		;NO -CURRENT JOB OR DON'T REQUEUE
   232	000230'	254000	000000*		JRST	REQUE##		;YES
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 4
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   233				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   234				;;								;;
   235				;;	Routine CHKKIL - See if a job needs to be killed.	;;
   236				;;								;;
   237				;;	Called at command finish-up unless NOMESS=1 (message	;;
   238				;;	suppress - used for FCONT & KJOB).			;;
   239				;;								;;
   240				;;	Entered with J=job/frame number, F=DDB address		;;
   241				;;								;;
   242				;;	Cheerfully clobbers T1, T4, and U.			;;
   243				;;								;;
   244				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   245
   246	000231'	205440	140000	CHKKIL:	MOVSI	T4,CMDCMK!CMDCK2 ;Job kill bits
   247	000232'	616442	000165*		TDNN	T4,TTYTAB(J)	;Any set?
   248	000233'	263040	000000		 POPJ	P,		;No, no need to kill
   249	000234'	205300	400000		MOVSI	T1,RUN
   250	000235'	616302	000175*		TDNN	T1,JBTSTS(J)	;Is job/frame running?
   251	000236'	254000	000244'		 JRST	SETKIL		;No, just kill it
   252				;;
   253				;; Job is running, therefore must be halted before killing.
   254				;;
   255	000237'	550244	000000*		HRRZ	U,DDBLDB(F)	;Set up Line Data Block address
   256	000240'	332000	000005		SKIPE	U		;Skip if detached
   257	000241'	260040	000000*		 PUSHJ	P,TTYHLT##	;Put TTY in command mode (^C)
   258	000242'	201300	000010		MOVEI	T1,CMFCHT	;Forced command index for .HALT
   259	000243'	324740	000275'		PJRST	COMWCM		;Set forced halt for job/frame
   260
   261	000244'	200302	000232*	SETKIL:	MOVE	T1,TTYTAB(J)	;Get job kill bits
   262	000245'	412442	000244*		ANDCAM	T4,TTYTAB(J)	;Clear any that may be set
   263				IFDEF .PVHKJ,<
   264	000246'	603300	040000		TLNE	T1,CMDCK2	;"Really Kill" set?
   265	000247'	254000	000261'		  JRST	KJBIT		;If so, really kill it
   266	000250'	135440	000000*		LDB	T4,PVYHNG##	;Get HANG/ZAP action field
   267					XCT	[JRST KJBIT	;0 .PVHKJ KJOB
   268						 JRST KJBT1	;1 .PVHDT DETACH
   269						  STOPCD	;2 .PVHCN CCONT DETACH ;;SETKIL+6
   270	000251'	256011	005531'			 JRST KJBT3](T4) ;3 .PVHTM DETACH TIMEOUT KJOB
   271
   272	000252'	400300	000000	KJBT3:	SETZ	T1,
   273	000253'	137100	000000*		DPB	J,CLKJOB##
   274	000254'	260040	000000*		PUSHJ	P,CHGCLK##	;Remove any type 0 on list
   275	000255'	200300	000000*		MOVE	T1,TIMSET##	;And replace with type .SLHNG
   276	000256'	137100	000253*		DPB	J,CLKJOB##
   277	000257'	260040	000254*		PUSHJ	P,CHGCLK##
   278	000260'	334300	005535'	KJBT1:	SKIPA	T1,[CMFCDT]
   279	000261'			KJBIT:> ;End IFDEF .PVHKJ
   280	000261'	201300	000012		MOVEI	T1,CMFCKJ	;Cmd index for KJOB
   281	000262'	260040	000275'		PUSHJ	P,COMWCM	;Set command for job/frame
   282	000263'	263040	000000		POPJ	P,
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 5
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   283				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   284				;;								;;
   285				;;	Routine COMKJB - Kill a detached job/frame		;;
   286				;;								;;
   287				;;	Calling parameters -					;;
   288				;;		J - job/frame number				;;
   289				;;								;;
   290				;;	Clobbers T1.						;;
   291				;;								;;
   292				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   293
   294	000264'			COMKJB::
   295	000264'	205300	100000		MOVSI	T1,CMDCMK	;Action determined by JBTPRV<PVYHNG>
   296	000265'	436302	000245*		IORM	T1,TTYTAB(J)	;Set into command port word
   297	000266'	201300	100000		MOVEI	T1,JACCT2	;User-JACCT
   298	000267'	412302	000235*		ANDCAM	T1,JBTSTS(J)	;Clt out
   299	000270'	402002	000000*		SETZM	JBTSLM##(J)	;Now, clear saved
   300	000271'	402002	000000*		SETZM	JBTLIM##(J)	;  and current TRU limits
   301	000272'	201300	000010		MOVEI	T1,CMFCHT	;Forced command index for HALT
   302	000273'	260040	000275'		PUSHJ	P,COMWCM	;Command dispatcher will do the rest
   303	000274'	263040	000000		POPJ	P,
   304
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 6
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   305				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   306				;;								;;
   307				;;	Routine COMWCM - Set Command Request For a Job/Frame	;;
   308				;;								;;
   309				;;	Calling Parameters:					;;
   310				;;		AC J - Job/Frame Number (not checked, must be	;;
   311				;;			valid).					;;
   312				;;		AC T1 - Command Index (or zero if none - zero	;;
   313				;;			means command input from TTY).		;;
   314				;;								;;
   315				;;	Registers Used:						;;
   316				;;		T1 - Clobbered					;;
   317				;;		T2,T3 - Saved, used, & restored			;;
   318				;;		All other ACs preserved.			;;
   319				;;								;;
   320				;;	Calling Sequence:					;;
   321				;;		MOVE J,[job/frame number]			;;
   322				;;		MOVEI T1,<command index>			;;
   323				;;		PUSHJ P,COMWCM					;;
   324				;;		<only return>					;;
   325				;;								;;
   326				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   327
   328	000275'	331002	000265*	COMWCM::SKIPL	TTYTAB(J)	;Command request already set?
   329	000276'	350000	000000*		 AOS	COMCNT		;No, count one waiting
   330	000277'	322300	000302'		JUMPE	T1,COMWC1	;If no index, command is from TTY
   331	000300'	137300	000315'		DPB	T1,CMDCMX	;Set command index into LH(TTYTAB(J))
   332	000301'	205300	200000		MOVSI	T1,CMDCMF	;And indicate that command is forced
   333	000302'	661300	400000	COMWC1:	TLO	T1,CMDCMR	;Command Request bit
   334	000303'	436302	000275*		IORM	T1,TTYTAB(J)	;Set into LH(TTYTAB(J))
   335	000304'	261040	000007		PUSH	P,T2		;Get some scratch space
   336	000305'	261040	000010		PUSH	P,T3		;And some more
   337	000306'	201342	000000		MOVEI	T2,(J)		;Copy job/frame number
   338	000307'	231340	000044		IDIVI	T2,^D36		;T2 gets index into bit table, T3 gets
   339								; number of relative bit in word
   340	000310'	200410	000000*		MOVE	T3,BITTBL##(T3)	;Convert to actual bit (reverse JFFO)
   341	000311'	436407	000000*		IORM	T3,COMFLG##(T2)	;Set bit in command table
   342	000312'	262040	000010		POP	P,T3
   343	000313'	262040	000007		POP	P,T2
   344	000314'	263040	000000		POPJ	P,		;Exit
   345
   346			400000		CMDCMR=400000		;0 - Command Request (must be sign bit)
   347			200000		CMDCMF=200000		;1 - Command Forced via CMDCMX
   348			100000		CMDCMK=100000		;2 - Forcing KJOB command
   349			040000		CMDCK2=040000		;3 - Really KJOB (never DETACH)
   350								;10-13 - Forced Command Index
   351
   352	000315'	260402	000303*	CMDCMX:	POINT	4,TTYTAB(J),13	;Byte pointer for Forced Command Index
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 7
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   353				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   354				;;								;;
   355				;;	CMFIDX - Find command index				;;
   356				;;	Calling sequence:					;;
   357				;;		MOVE	T1,[SIXBIT /6chars/]			;;
   358				;;		PUSHJ	P,CMFIDX##				;;
   359				;;		  error return	/T1 clobbered			;;
   360				;;		success return	/T1=CMFCOM index		;;
   361				;;	All other AC's preserved.				;;
   362				;;								;;
   363				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   364
   365	000316'	322300	000000*	CMFIDX::JUMPE	T1,CPOPJ	;Zero is always illegal
   366	000317'	261040	000007		PUSH	P,T2		;Work space
   367	000320'	205340	777775		MOVSI	T2,-CMFSIZ	;AOBJN pointer
   368	000321'	316307	000327'		CAMN	T1,CMFCOM(T2)	;Exact match?
   369	000322'	354001	777777		  AOSA	-1(P)		;Yes, give success return
   370	000323'	253340	000321'		AOBJN	T2,.-2
   371	000324'	550300	000007		HRRZ	T1,T2		;Either found it or overran
   372	000325'	262040	000007		POP	P,T2
   373	000326'	263040	000000		POPJ	P,
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 8
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   374
   375				; Forced command table
   376
   377	000327'			CMFCOM:
   378	000000			PHASE 0
   379	000327'	000000	000000		0	;Dummy illegal entry
   380	000330'	164463	534354	CMFCDC::!SIXBIT /.DSKCL/	;DSKCLN runs under [2,5]
   381	000331'	164643	575664	CMFCXJ::!SIXBIT /.FCONT/	;Forced by JCONTINUE command
   382	000332'	165355	435457	CMFCKM::!SIXBIT /.KMCLO/	;KMCLOD runs under [2,5] on 2020
   383	000333'	165457	475156	CMFCXN::!SIXBIT /.LOGIN/	;Run LOGINN when circuit is built
   384	000334'	166563	456364	CMFSTA::!SIXBIT /.USEST/	;Control-T translated to this
   385	000335'	444564	414350	CMFCDT::!SIXBIT /DETACH/	;Forced by circuit zap
   386	000336'	465156	516350	CMNCFN::!SIXBIT /FINISH/	;Do a CLOSE and a DEASSIGN
   387	000337'	504154	640000	CMFCHT::!SIXBIT /HALT/		;Control-C translated to this
   388	000340'	515651	645141	CMFCXI::!SIXBIT /INITIA/	;Forced at system startup
   389	000341'	535257	420000	CMFCKJ::!SIXBIT /KJOB/		;Kill job
   390			000003		CMFSIZ=CMFCKM	;Size of command table
   391	000342'			DEPHASE
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 9
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   392				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   393				;;								;;
   394				;;	Routine COMCMR - Command Return (clean-up)		;;
   395				;;								;;
   396				;;	Called after command has been processed to clean	;;
   397				;;	up the command dispatch database (mostly adjusting	;;
   398				;;	LH(TTYTAB) and the COMFLG bitmap table)			;;
   399				;;								;;
   400				;;	Entered with J=job/frame number, F=TTY DDB address	;;
   401				;;								;;
   402				;;	Clobbers T1, T2.					;;
   403				;;								;;
   404				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   405
   406	000342'	205340	200000	COMCMR:	MOVSI	T2,CMDCMF	;Forced command?
   407	000343'	616342	000315*		TDNN	T2,TTYTAB(J)	;??
   408	000344'	260040	000000*		 PUSHJ	P,TTYCMR##	;No, from TTY, tell terminal service
   409	000345'	661340	400000		TLO	T2,CMDCMR	;Command request flag
   410	000346'	412342	000343*		ANDCAM	T2,TTYTAB(J)	;Clear request and force bit
   411	000347'	370000	000276*		SOS	COMCNT		;One less frame with command pending
   412	000350'	350000	000000*		AOS	COMTOT		;Keep count of total commands processed
   413
   414	000351'	201302	000000	CMDRST:	MOVEI	T1,(J)		;Copy job number
   415	000352'	231300	000044		IDIVI	T1,^D36		;Get COMFLG index and relative bit #
   416	000353'	200347	000310*		MOVE	T2,BITTBL##(T2)	;Get appropriate bit
   417	000354'	412346	000311*		ANDCAM	T2,COMFLG##(T1)	;Clear it out
   418	000355'	263040	000000		POPJ	P,
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 10
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   419				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   420				;;								;;
   421				;;	Routine CMDCKW - Check for job in command wait		;;
   422				;;								;;
   423				;;	Called with U=LDB address of port in question.		;;
   424				;;								;;
   425				;;	Skip returns if job associated with given port has	;;
   426				;;	command pending, non-skip otherwise.			;;
   427				;;								;;
   428				;;	Calling sequence:					;;
   429				;;		MOVE U,[LDB address]				;;
   430				;;		PUSHJ P,CMDCKW					;;
   431				;;		  <job has command pending>			;;
   432				;;		<no job or no command pending>			;;
   433				;;								;;
   434				;;	Clobbers F.						;;
   435				;;								;;
   436				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   437
   438	000356'	550205	000000*	CMDCKW::HRRZ	F,LDBDDB(U)	;Get DDB address
   439	000357'	322200	000000*		JUMPE	F,CPOPJ1	;No job, success return
   440	000360'	135200	000000*		LDB	F,PJOBN##	;Job/Frame number from DDB
   441	000361'	322200	000357*		JUMPE	F,CPOPJ1	;No job??
   442	000362'	331004	000346*		SKIPL	TTYTAB(F)	;Command request pending?
   443	000363'	350001	000000		 AOS	(P)		;No - give success return
   444	000364'	263040	000000		POPJ	P,		;Non-skip - CMR pending
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 11
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   445				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   446				;;								;;
   447				;;	Routine FRMCOM - Find a frame with Command Request	;;
   448				;;			 pending.				;;
   449				;;								;;
   450				;;	Calling parameters: none.				;;
   451				;;								;;
   452				;;	Registers used:						;;
   453				;;		AC's T1, T2, T3 - scratch (clobbered)		;;
   454				;;		AC J - returns job/frame number			;;
   455				;;		AC F - returns DDB address of frame's command	;;
   456				;;			port.					;;
   457				;;		AC U - returns LDB address of frame's command	;;
   458				;;			port or zero if detached.		;;
   459				;;								;;
   460				;;	Calling sequence:					;;
   461				;;		PUSHJ	P,FRMCOM				;;
   462				;;		  <error return> - no frames with CMD REQ	;;
   463				;;		<success> - J, F, and U set up			;;
   464				;;								;;
   465				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
   466
   467	000365'	335340	000432'	FRMCOM:	SKIPGE	T2,COMSAV	;Starting a new scan?
   468	000366'	254000	000424'		 JRST	CMDRCM		;No - continue from middle of table
   469	000367'	205340	000000*		MOVSI	T2,NCMFLG##	;Set to scan all frames
   470	000370'	336247	000354*	CMDSC1:	SKIPN	U,COMFLG(T2)	;Any bits set?
   471	000371'	254000	000427'		 JRST	NOCOM2		;No - try next word in bit-map table
   472	000372'	200407	000000*		MOVE	T3,BITNTB##(T2)	;Get frame number for first bit
   473	000373'	243240	000375'	CMDSC2:	JFFO	U,.+2		;Find first "1" bit (** U=5,T1=6 **)
   474	000374'	254000	000427'		 JRST	NOCOM2		;None - try next word
   475	000375'	242246	000001		LSH	U,1(T1)		;Answer in T1, get rid of first bit
   476	000376'	202240	000433'		MOVEM	U,COMFSV	;Save for later inspection
   477	000377'	270400	000006		ADD	T3,T1		;Get frame number
   478	000400'	202400	000435'		MOVEM	T3,COMPNM	;Save frame number of first bit in
   479								; 'COMFSV'
   480	000401'	202340	000432'		MOVEM	T2,COMSAV	;Save COMFLG AOBJN word
   481	000402'	550100	000010		HRRZ	J,T3		;Get frame number
   482	000403'	205340	400000		MOVSI	T2,CMDCMR	;"Command Request"
   483	000404'	616342	000362*		TDNN	T2,TTYTAB(J)	;Really set for this frame?
   484	000405'	254000	000422'		 JRST	CMDSCE		;No - clear COMFLG bit and continue
   485	000406'	550202	000404*	CMDSC3:	HRRZ	F,TTYTAB(J)	;Set up Device Data Block address
   486	000407'	332240	000004		SKIPE	U,F		;If none, skip and clear LDB also
   487	000410'	550244	000237*		 HRRZ	U,DDBLDB(F)	;Else set up Line Data Block address
   488	000411'	510402	000406*		HLLZ	T3,TTYTAB(J)	;Get command bits to left half
   489	000412'	541400	000012		HRRI	T3,12		;Set up command delimiter in case forced
   490	000413'	603400	200000		TLNE	T3,CMDCMF	;Is this a forced command?
   491	000414'	254000	000420'		 JRST	CMDSC4		;If so, skip TTY diddling
   492	000415'	322240	000422'		JUMPE	U,CMDSCE	;Only forced commands can be detached
   493	000416'	260040	000000*		PUSHJ	P,TRESCN	;Set up terminal command input
   494	000417'	334000	000000		SKIPA
   495	000420'	552400	000000*	CMDSC4:	 HRRZM	T3,TTCMCH	;If forced command, force no more input
   496	000421'	324740	000361*		PJRST	CPOPJ1		;Give good return
   497				;;
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 11-2
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   498				;; Error exit from FRMCOM
   499				;;
   500	000422'			CMDSCE:
   501	000422'	260040	000351'		PUSHJ	P,CMDRST	;Reset bit in COMFLG table
   502	000423'	200340	000432'		MOVE	T2,COMSAV	;Get ready to rescan
   503	000424'	350400	000435'	CMDRCM:	AOS	T3,COMPNM	;Set up next frame to scan
   504	000425'	332240	000433'		SKIPE	U,COMFSV	;Any bits left in this word?
   505	000426'	254000	000373'		 JRST	CMDSC2		;If yes, pick up in the middle
   506	000427'	253340	000370'	NOCOM2:	AOBJN	T2,CMDSC1	;Else loop to next COMFLG word
   507	000430'	402000	000432'		SETZM	COMSAV		;End of table - none there
   508	000431'	263040	000000		POPJ	P,		;Give non-skip return
   509
   510				;;
   511				;; Save area for FRMCOM routine
   512				;;
   513	000432'	000000	000000	COMSAV:	0
   514	000433'	000000	000000	COMFSV:	0
   515	000434'	000000	000000	COMJSV:	0
   516	000435'	000000	000000	COMPNM:	0
   517				;;
   518				;; Save area for ENABLE/DISABLE commands
   519				;;
   520	000436'	000000	000000	LICSAV:	0	; incremental license for disable
   521	000437'	000000	000000	LICNEW:	0	; incremental license for enable
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 12
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   522				;TABLE OF CONSOLE COMMANDS
   523
   524
   525				;BITS CHECKED BEFORE DISPATCHING TO COMMAND SETUP ROUTINE
   526
   527			400000	HVCORE==400000	;JOB MUST HAVE AT LEAST ONE EXISTENT PAGE IN ITS SPACE.
   528			100000	NOLOGIN==100000	;JOB DOES NOT NEED TO BE ALREADY LOGGED IN.
   529			040000	NOACT==40000	;COMMAND MUST BE DELAYED IF JOB HAS ACTIVE DEVICES.
   530			020000	MINCOR==20000	;DO NOT SWAP IN MWS, JUST CONTEXT PAGES.
   531			010000	NORUN==10000	;AN EXPLICIT ^C MUST BE TYPED BY USER BEFORE COMMAND
   532						; IS EXECUTED IF JOB IS RUNNING
   533						; JOB MUST BE SWAPPED IN IF IT HAS LOGICAL CORE
   534			004000	INCOR==4000	;NEED AT LEAST UPT IN CORE
   535			000004	PLSXPN==4	;CORE MUST BE EXPANDED IF STILL COMPRESSED BY SAVE NOT GOING
   536						; TO COMPLETION(CONTROL C OR DEVICE OK?)
   537						; MUST BE USED IN CONJUNCTION WITH COMMANDS WHICH
   538						; NEED CORE AND NEED IT IN CORE
   539
   540				;BITS CHECKED AFTER RETURN FROM COMMAND SETUP ROUTINE
   541
   542			002000	CMWRQ==2000	;REQUEUE JOB AFTER COMMAND WAIT
   543
   544			000200	NOCRLF==200	;NO PRINTING OF CRLF
   545			000100	NOPER==100	;NO PRINTING OF PERIOD
   546			000040	TTYRNU==40	;SET TTY TO USER MODE AND START JOB
   547						; WHEN COMMAND RESPONSE STOPS TYPING
   548			000020	TTYRNC==20	;KEEP TTY IN COMMAND MODE AND START JOB
   549						; WHEN COMMAND RESPONSE STOPS TYPING
   550			000010	TTYRNW==10	;SET TTY TO USER LEVEL AND IO WAIT IF IT WAS IN IOW BEFORE
   551			000002	NOMESS==2	;NO COMMAND RESPONSE EVER, DO NOT CALL TTYSTR
   552
   553						;4 TAKEN ABOVE BY 'PLSXPN' BIT
   554
   555
   556			000001	ERRFLG==1	;COMMAND ERROR
   557
   558			070340	RPGBITS==NOPER!TTYRNU!NOCRLF!MINCOR!NOACT!NORUN
   559			150300	NOTIC==NOLOGIN!NOPER!NOCRLF!NOACT!NORUN
   560
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 13
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   561				;DEFINE NAMES FOR COMMANDS HANDLED BY COMCON
   562
   563
   564				DEFINE NAMES <
   565					CP LP101
   566					CP LP941
   567					CP LPGE1
   568					C R,RCOM,RPGBITS
   569					C RUN,RUNCOM,RPGBITS
   570					C PCOM,PCOM,RPGBITS
   571					C DCOM,PCOM,RPGBITS
   572					C SSAVE,SSAVE,HVCORE!NOCRLF!NOPER!TTYRNU!INCOR!NOACT!NORUN!PLSXPN
   573					C RESOURCES,FREDEV
   574					C FINISH,CFINI,HVCORE!TTYRNU!NOACT!INCOR!NORUN!NOPER!NOCRLF!PLSXPN
   575					C SAVE,SAVE,HVCORE!NOCRLF!NOPER!TTYRNU!INCOR!NOACT!NORUN!PLSXPN
   576					CP LPSUD1
   577					C ENABLE,ENACMD
   578					C DISABLE,DISCMD
   579					C DAYTIME,DAYTIM
   580					C SET,SETCMD,INCOR
   581					C TTY,TTYCMD
   582					C TERMIN,TTYCMD
   583					C CLOSE,CLSCOM,HVCORE!TTYRNU!NOACT!INCOR!NORUN!NOPER!NOCRLF!PLSXPN
   584					C REENTER,REENTER,HVCORE!TTYRNU!NOPER!INCOR!NORUN!PLSXPN
   585					C CORE,CORE,NORUN!CMWRQ!INCOR!NOACT
   586					C VMINFO,VMINFO,INCOR
   587					C .USEST,USESTAT,NOPER!NOCRLF
   588					C TIME,RUNTIM
   589					CP LPRES1
   590					C EXIT,KJB1,NOTIC!NOMESS!MINCOR
   591					C HALT,STOP,NOLOGIN!CMWRQ
   592					C DETACH,DETACH,NOPER!NOCRLF
   593					C .FCONT,FCONT,HVCORE!NOPER!NOCRLF!NOMESS!NORUN!INCOR!NOLOGIN
   594					C .LOGIN,CLOGIN,NOTIC!TTYRNU!MINCOR
   595					C CONTINUE,CONT,HVCORE!NOPER!TTYRNW!INCOR!NORUN
   596					C INITIA,INITIA,NOTIC!TTYRNU!MINCOR
   597					C .DSKCL,DSKLOD,NOTIC!TTYRNU!MINCOR
   598				IFKMC<	C .KMCLO,KMCLOD,NOTIC!TTYRNU!MINCOR>
   599					C <>,CBLANK,NOLOGIN!NOCRLF
   600					C LOGOUT,KJOB,NOTIC!NOMESS!MINCOR
   601					C KJOB,KJOB,NOTIC!NOMESS!MINCOR
   602					C BYE,KJOB,NOTIC!NOMESS!MINCOR
   603					C POP,KJOB,NOTIC!NOMESS!MINCOR
   604					CP LPRES2
   605					C START,START,HVCORE!NOPER!TTYRNU!INCOR!NOACT!NORUN!PLSXPN
   606					C GET,GET,RPGBITS
   607					C JCONTINUE,JCONT,NOLOGIN
   608					C D,DCOM,HVCORE!CMWRQ!INCOR!PLSXPN!NORUN!NOPER!NOACT
   609					C E,ECOM,HVCORE!CMWRQ!INCOR!PLSXPN!TTYRNU!NOTIC!NOACT
   610					C ADRBRK,SETABK,INCOR!MINCOR!HVCORE!NORUN
   611					C PJOB,PJOBCM,0;;Output user name and TTY number
   612					C ASSIGN,ASSIGN,0
   613					C DEASSIGN,DEASSIG
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 13-2
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   614					C DDT,DDTGO,HVCORE!NOPER!TTYRNU!INCOR!NORUN!PLSXPN
   615					C CSTART,STARTC,HVCORE!TTYRNC!INCOR!NOACT!NORUN!PLSXPN
   616					C CCONTINUE,CONTC,HVCORE!TTYRNC!INCOR!NORUN
   617					C ATTACH,ATTACH
   618					C WATCH,WATCH,0
   619					C DSK,DSKCOM
   620					C SCHEDULE,SKEDUL
   621					C REASSIGN,REASS,NOACT!INCOR!CMWRQ!NORUN!PLSXPN
   622					C VERSION,VERPR,HVCORE!CMWRQ!INCOR!PLSXPN!TTYRNU!NOTIC
   623					C GO,RUNCOM,RPGBITS
   624					CP LPGE2
   625					C TALK,SEND
   626					CP LP102
   627					CP LP942
   628					C SAVEBIN,SAVE,HVCORE!NOCRLF!NOPER!TTYRNU!INCOR!NOACT!NORUN!PLSXPN
   629					C SAVBIN,SAVE,HVCORE!NOCRLF!NOPER!TTYRNU!INCOR!NOACT!NORUN!PLSXPN
   630					CP LPSUD2
   631				>
   632
   633
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 14
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   634				;GENERATE TABLE OF SIXBIT COMMAND NAMES
   635
   636				DEFINE C(A,B,D) <
   637					<SIXBIT /A/>
   638				>
   639
   640				DEFINE CP(A)
   641				<A==.-COMTAB>
   642
   643	000440'	620000	000000	COMTAB:	NAMES
   644	000441'	626556	000000
   645	000442'	604357	550000
   646	000443'	444357	550000
   647	000444'	636341	664500
   648	000445'	624563	576562
   649	000446'	465156	516350
   650	000447'	634166	450000
   651	000450'	455641	425445
   652	000451'	445163	414254
   653	000452'	444171	645155
   654	000453'	634564	000000
   655	000454'	646471	000000
   656	000455'	644562	555156
   657	000456'	435457	634500
   658	000457'	624545	566445
   659	000460'	435762	450000
   660	000461'	665551	564657
   661	000462'	166563	456364
   662	000463'	645155	450000
   663	000464'	457051	640000
   664	000465'	504154	640000
   665	000466'	444564	414350
   666	000467'	164643	575664
   667	000470'	165457	475156
   668	000471'	435756	645156
   669	000472'	515651	645141
   670	000473'	164463	534354
   671	000474'	000000	000000
   672	000475'	545747	576564
   673	000476'	535257	420000
   674	000477'	427145	000000
   675	000500'	605760	000000
   676	000501'	636441	626400
   677	000502'	474564	000000
   678	000503'	524357	566451
   679	000504'	440000	000000
   680	000505'	450000	000000
   681	000506'	414462	426253
   682	000507'	605257	420000
   683	000510'	416363	514756
   684	000511'	444541	636351
   685	000512'	444464	000000
   686	000513'	436364	416264
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 14-2
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   687	000514'	434357	566451
   688	000515'	416464	414350
   689	000516'	674164	435000
   690	000517'	446353	000000
   691	000520'	634350	454465
   692	000521'	624541	636351
   693	000522'	664562	635157
   694	000523'	475700	000000
   695	000524'	644154	530000
   696	000525'	634166	454251
   697	000526'	634166	425156
   698
   699				DEFINE C(A)
   700				<	<SIXBIT /A/>
   701				>
   702				;NAMES WHICH CALL PROGRAMS
   703			000067		CP LP103
   704			000067		CP LP943
   705			000067		CP LPSUD3
   706	000527'	504554	545700		C HELLO
   707			000070		CP LPSUD4
   708			000070		CP LPGE3
   709	000530'	504554	600000		C HELP
   710	000531'	474570	454300		C GEXEC
   711	000532'	704241	635143		C XBASIC
   712	000533'	415144	000000		C AID
   713	000534'	436421	000000		C CT1
   714	000535'	436422	000000		C CT2
   715	000536'	436423	000000		C CT3
   716	000537'	436424	000000		C CT4
   717	000540'	436425	000000		C CT5
   718	000541'	436426	000000		C CT6
   719	000542'	436427	000000		C CT7
   720	000543'	436430	000000		C CT8
   721	000544'	436431	000000		C CT9
   722	000545'	604163	636757		C PASSWORD
   723	000546'	606257	524543		C PROJEC
   724	000547'	634556	445541		C SENDMA;;	;Removed RPG's SEND command in P035/C02
   725	000550'	636542	555164		C SUBMIT
   726	000551'	636057	575400		C SPOOL
   727	000552'	554147	566555		C MAGNUM
   728	000553'	466455	414756		C FTMAGN
   729	000554'	705541	475665		C XMAGNU
   730	000555'	644241	000000		C TBA
   731	000556'	634657	626462		C SFORTRAN
   732	000557'	644160	450000		C TAPE
   733				;*;	C DEFER
   734	000560'	564567	630000		C NEWS
   735	000561'	634564	450000		C SETE
   736	000562'	576045	620000		C OPER
   737	000563'	564241	635143		C NBASIC
   738	000564'	434154	000000		C CAL
   739	000565'	434657	626462		C CFORTRAN
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 14-3
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   740	000566'	604562	465762		C PERFORM
   741	000567'	474644	000000		C GFD
   742	000570'	416054	000000		C APL
   743	000571'	655644	455445		C UNDELETE
   744	000572'	604541	530000		C PEAK
   745	000573'	647155	664154		C TYMVAL;;	TYMVALIDATE
   746	000574'	555766	450000		C MOVE
   747	000575'	446560	545143		C DUPLIC
   748	000576'	724160	000000		C ZAP
   749			000137		CP LP104
   750			000137		CP LP944
   751			000137		CP LPGE4
   752
   753				;NAMES WHICH CALL RPG
   754
   755			000137		CP LP105
   756			000137		CP LP945
   757	000577'	647155	457000		C TYMEX
   758	000600'	647155	000000		C TYM;;		;"TYM"="TYMEX" not "TYMVAL"
   759	000601'	704570	454300		C XEXEC
   760	000602'	604460	212000		C PDP10
   761	000603'	554151	540000		C MAIL;;	;Reads RPG mail (soon to be obsolete)
   762	000604'	605763	645541		C POSTMAN;;	;      RPG mail (soon to be obsolete)
   763				;*;	C SEND;;	;Sends RPG mail (soon to be obsolete)
   764	000605'	436445	636400		C CTEST
   765	000606'	675045	625163		C WHERIS;;	;Like (XEXEC)WHEREIS, but uses RPG's DO list
   766	000607'	445700	000000		C DO
   767			000150		CP LPGE5
   768	000610'	435755	605154		C COMPILE
   769	000611'	436245	416445		C CREATE
   770	000612'	434445	426547		C CDEBUG
   771	000613'	436245	460000		C CREF
   772	000614'	444542	654700		C DEBUG
   773	000615'	646271	000000		C TRY
   774	000616'	436257	636300		C CROSS
   775	000617'	436245	000000		C CRE
   776	000620'	445162	454364		C DIRECT
   777	000621'	454451	645762		C EDITOR
   778	000622'	457045	436564		C EXECUTE
   779	000623'	545163	640000		C LIST
   780	000624'	545741	440000		C LOAD
   781	000625'	554100	000000		C MA;;			;Make MA=MAKE (not MAIL or MAGNUM)
   782	000626'	554153	450000		C MAKE
   783	000627'	624556	415545		C RENAME
   784	000630'	644500	000000		C TE;;			;Make TE=TECO (not TERMIN)
   785	000631'	644543	570000		C TECO
   786	000632'	647160	450000		C TYPE
   787	000633'	606251	566400		C PRINT
   788	000634'	465100	000000		C FI;;			;Make FI=FILES (not FINISH)
   789	000635'	465154	456300		C FILES
   790	000636'	464445	426547		C FDEBUG
   791	000637'	445146	464562		C DIFFERENCES
   792	000640'	464443	000000		C FDC
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 14-4
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   793	000641'	604644	430000		C PFDC
   794	000642'	606056	000000		C PPN
   795	000643'	444543	544162		C DECLARE
   796	000644'	444554	456445		C DELETE
   797	000645'	435760	710000		C COPY
   798	000646'	555700	000000		C MO;;			;Make MO=MODIFY (not MOVE)
   799	000647'	555744	514671		C MODIFY
   800	000650'	666545	000000		C VUE
   801			000211		CP LP106
   802			000211		CP LPGE6
   803	000651'	444164	450000		C DATE
   804	000652'	212045	445164		C 10EDIT
   805			000213		CP LP946
   806			000213		CP LPGE7
   807	000653'	576056	576451		C OPNOTICE
   808			000214		CP LPGE8
   809
   810				;NAMES WHICH CALL SYSTAT
   811
   812			000214		CP LP947
   813			000214		CP LP107
   814			000214		CP LPGE9
   815	000654'	675057	000000		C WHO
   816	000655'	637163	644164		C SYSTAT
   817	000656'	637163	565700		C SYSNO
   818	000657'	606360	000000		C PSP
   819	000660'	637163	000000		C SYS
   820	000661'	675045	000000		C WHE;;			;Make WHE=WHERE (not WHERIS)
   821	000662'	675045	624500		C WHERE
   822	000663'	656345	626300		C USERS
   823			000224		CP LP948
   824			000224		CP LP108
   825			000224		CP LPGE10
   826			223000	COMMXL==<.-COMTAB-1>_^D9	;; Length of total command list for GETTAB
   827								;; Some of these commands will be restricted
   828								;; for some users, but until the scanner is
   829								;; re-written this will have to do.
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 15
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   830				;GENERATE THE DISPATCH TABLE PLUS SPECIAL BITS
   831
   832				DEFINE C(A,B,D) <
   833				Z	B	(D)
   834				>
   835					DEFINE CP (A)
   836				<>
   837
   838	000664'	070340	002263'	DISP:	NAMES
   839	000665'	070340	002276'
   840	000666'	070340	001433'
   841	000667'	070340	001433'
   842	000670'	454344	002171'
   843	000671'	000000	005104'
   844	000672'	454344	005022'
   845	000673'	454344	002170'
   846	000674'	000000	001135'
   847	000675'	000000	001207'
   848	000676'	000000	003170'
   849	000677'	004000	004310'
   850	000700'	000000	004257'
   851	000701'	000000	004257'
   852	000702'	454344	005023'
   853	000703'	414144	001425'
   854	000704'	056000	002032'
   855	000705'	004000	002145'
   856	000706'	000300	003422'
   857	000707'	000000	003336'
   858	000710'	170302	001243'
   859	000711'	102000	001435'
   860	000712'	000300	003016'
   861	000713'	514302	001731'
   862	000714'	170340	002252'
   863	000715'	414110	001722'
   864	000716'	170340	002231'
   865	000717'	170340	002234'
   866	000720'	100200	004251'
   867	000721'	170302	001244'
   868	000722'	170302	001244'
   869	000723'	170302	001244'
   870	000724'	170302	001244'
   871	000725'	454144	001333'
   872	000726'	070340	002175'
   873	000727'	100000	001776'
   874	000730'	456104	004153'
   875	000731'	556344	004103'
   876	000732'	434000	004722'
   877	000733'	000000	001054'
   878	000734'	000000	002315'
   879	000735'	000000	002445'
   880	000736'	414144	001430'
   881	000737'	454024	001333'
   882	000740'	414020	001722'
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 15-2
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   883	000741'	000000	002700'
   884	000742'	000000	001510'
   885	000743'	000000	000000*
   886	000744'	000000	004214'
   887	000745'	056004	002507'
   888	000746'	556344	004004'
   889	000747'	070340	002276'
   890	000750'	000000	003517'
   891	000751'	454344	002170'
   892	000752'	454344	002170'
   893
   894	000753'	200706	000664'	MDSP:	MOVE P3,DISP(T1)
   895	000754'	200700	005536'		MOVE P3,[XWD RPGBITS,PRGRUN]
   896	000755'	200700	005537'		MOVE P3,[XWD RPGBITS,CCLRUN]
   897	000756'	200700	005540'		MOVE P3,[XWD RPGBITS,SUDRUN]
   898	000757'	200700	005541'		MOVE P3,[XWD RPGBITS,SYSRUN]
   899	000760'	254000	000763'		JRST NCMD
   900	000761'	254000	000763'		JRST NCMD
   901	000762'	254000	000763'		JRST NCMD
   902
   903	000763'	200700	005542'	NCMD:	MOVE	P3,[XWD NOLOGIN,NOCOM]	;get ready for command error message
   904	000764'	200402	000025*		MOVE	T3,JBTPRV(J)
   905	000765'	603400	000200		TLNE	T3,PVSCMD		;but if in Special Command Mode...
   906	000766'	200700	005543'		 MOVE	P3,[XWD RPGBITS,RESRUN]	;...then run Restricted Command Program
   907	000767'	254000	000055'		JRST	COMFN1
   908
   909	000770'	200310	000440'	PRGRUN:	MOVE T1,COMTAB(T3)	;GET THE PROGRAM NAME
   910	000771'	254000	002271'		JRST ARCOM
   911
   912					DEFINE PTR (A,B,C)
   913				<BYTE (3) A (15) B (18) C>
   914
   915	000772'	077713	000000	PDP10P:	PTR 0,LP101-LP102,LP101
   916	000773'	177730	000067		PTR 1,LP103-LP104,LP103
   917	000774'	277726	000137		PTR 2,LP105-LP106,LP105
   918	000775'	477770	000214		PTR 4,LP107-LP108,LP107
   919			000004	P10SZ==.-PDP10P
   920	000776'	000000	000763'		NCMD
   921
   922	000777'	077713	000000	TYMP:	PTR 0,LP941-LP942,LP941
   923	001000'	177730	000067		PTR 1,LP943-LP944,LP943
   924	001001'	277724	000137		PTR 2,LP945-LP946,LP945
   925	001002'	477770	000214		PTR 4,LP947-LP948,LP947
   926			000004	TYMSZ==.-TYMP
   927	001003'	000000	000763'		NCMD
   928
   929	001004'	077714	000000	GENP:	PTR 0,LPGE1-LPGE2,LPGE1
   930	001005'	177731	000070		PTR 1,LPGE3-LPGE4,LPGE3
   931	001006'	277737	000150		PTR 2,LPGE5-LPGE6,LPGE5
   932	001007'	277777	000213		PTR 2,LPGE7-LPGE8,LPGE7
   933	001010'	477770	000214		PTR 4,LPGE9-LPGE10,LPGE9
   934			000005	GENSZ==.-GENP
   935	001011'	000000	000763'		NCMD
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 15-3
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   936
   937	001012'	077721	000010	SUDP:	PTR 0,LPSUD1-LPSUD2,LPSUD1
   938	001013'	177777	000067		PTR 1,LPSUD3-LPSUD4,LPSUD3
   939			000002	SUDSZ==.-SUDP
   940	001014'	000000	001021'		NCMDS
   941
   942	001015'	077763	000024	RESP:	PTR 0,LPRES1-LPRES2,LPRES1
   943			000001	RESSZ==.-RESP
   944	001016'	000000	001017'		NCMRES
   945	001017'	200700	005543'	NCMRES:	MOVE P3,[XWD RPGBITS,RESRUN]
   946	001020'	254000	000055'		JRST COMFN1
   947
   948	001021'	200700	005540'	NCMDS:	MOVE P3,[XWD RPGBITS,SUDRUN]
   949	001022'	254000	000055'		JRST COMFN1
   950
   951	001023'	777774	000772'	CMDMOD:	XWD -P10SZ,PDP10P
   952	001024'	777774	000777'		XWD -TYMSZ,TYMP
   953	001025'	777773	001004'		XWD -GENSZ,GENP
   954	001026'	777776	001012'		XWD -SUDSZ,SUDP
   955
   956	001027'	777777	001015'	CMDRES:	XWD -RESSZ,RESP
   957
   958
   959				;COMMANDS WHICH ARE IN OTHER MODULES (IE NOT IN COMCON)
   960				;BECAUSE THEY ARE DEPENDENT ON THESE MODULES(SCNSER,FILSER)
   961
   962					EXTERN DSKCOM
   963
   964
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 16
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

   965				COMMENT ! ENTRY COR0 - CLOCK LEVEL
   966				FUNCTION: SET UP MONJOB TO KILL ALL USER CORE (IF NONE, RETURN
   967					RIGHT NOW).
   968				EXPECTS: J/JOB  U/LDB OF TTY WHOSE COMMAND WE'RE PROCESSING
   969					F/ ADDR OF TTY DDB IF ANY
   970				DESTROYS: MANY AC'S
   971				NEW FEATURE: RESET EXO BIT WHEN CLEARING ALL CORE. AAA 5/77
   972				!
   973					EXTERN TTYFNU,KILPGS,LMPNER,%UPLMA,INIARB
   974
   975				;HERE FROM CLEAR FRAME FRMOP
   976				CLRFRM::MOVEI T2,ERRFCL		;INSTEAD OF ESTOP, GO TO PLACE THAT STORES STATUS AND INTERRUPT
   977	001030'	201340	000000*	S PARENT
   978	001031'	254000	001036'		JRST COR00
   979	001032'			COR0:
   980	001032'	554302	000143*		HLRZ T1,JBTUPM(J)	;EXISTENT PAGES
   981	001033'	322300	000316*		JUMPE T1,CPOPJ
   982	001034'	265340	000000*		JSP T2,MONJOB##	;SET UP TO RUN MONITOR JOB
   983							;RETURN AT NEXT INSTR UUO LEVEL, NO ACS SETUP
   984	001035'	201340	000000*		MOVEI T2,ESTOP##;JOB STOP ADDR (SETS JERR, CAN NOT "CONTINUE")
   985	001036'	265300	000000*	COR00:	JSP T1,MONSTR##	;START MONITOR JOB BY SETTING UP ACS
   986
   987				; ROUTINE JOB1:  KILL ALL USER DEVICES AND CORE. USED
   988				;	BY KJOB , PARITY ERROR CODE, AND COR0
   989	001037'			JOB1::
   990	001037'	205300	000000*		MOVSI T1,LMPNER	;SET "IGNORE PAGING ERRORS" IN CASE SWAP
   991	001040'	436300	000000*		IORM T1,%UPLMA+0;ERR ON VP 0. WE WANT JOBDAT REFS
   992							;IN RESET TO COMPLETE. WE ARE GOING TO
   993							;THROW THIS PAGE 0 AWAY RIGHT AWAY ANYWAY,
   994							;WHICH RESETS LMPNER.
   995	001041'	260040	000000*		PUSHJ P,RESET	;RELEASE DEVICES, MUCK W/JOBDATA AREA
   996
   997	001042'	260040	000000*		PUSHJ P,TTYFNU	;SET UP J/JOB, GET PROPER U/LDB,F/DDB,S/DEVIOS
   998	001043'	201340	400000		MOVEI T2,PVEXO
   999	001044'	412342	000764*		ANDCAM T2,JBTPRV(J)	;SO NO "PROG IS RUN ONLY" AFTER "CORE 0"
  1000	001045'	201300	000000		MOVEI T1,0	;KILL FROM PAGE 0,
  1001	001046'	201340	000777		MOVEI T2,777	;TO PAGE 777
  1002	001047'	260040	000000*		PUSHJ P,KILPGS	;IN SEGCON
  1003	001050'	513000	000000*		HLLZS	%UPT+UPTREL	;MARK "NO LOW SEG"
  1004	001051'	513000	000000*		HLLZS	%UPT+UPTHRL	;AND "NO HI SEG"
  1005	001052'	260040	000000*		PUSHJ	P,INIARB	;SET ACCESS RIGHTS TO VIRGIN STATE.
  1006	001053'	263040	000000		POPJ P,
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 17
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

  1007				; "PJOB" PRINT JOB NUMBER OF JOB TTY IS ATTACHED TO
  1008				;Frame 99  TTY177  SMITHJOSEPHM[123456,123456](LONGUSERNAME[123456,654321])
  1009
  1010	001054'	260040	005360'	PJOBCM:	PUSHJ	P,DECIN1	;Get optional job number
  1011	001055'	254000	001070'		 JRST	PJOBX		;No argument, do this job
  1012	001056'	254000	005214'		 JRST	COMERA		;Bad ARG
  1013	001057'	301340	000000*		CAIL	T2,JOBN		;Within range?
  1014	001060'	254000	003010'		 JRST	ATT1		;Output "Illegal Frame Number"
  1015	001061'	250100	000007		EXCH	J,T2		;Set J
  1016	001062'	261040	000007		PUSH	P,T2		;Save caller's job number
  1017	001063'	260040	000000*		PUSHJ	P,CHKSGJ	;See if this person can have that info
  1018					  JRST	[POP	P,J	;No
  1019	001064'	254000	005544'			 JRST	COMERA]
  1020	001065'	260040	001070'		PUSHJ	P,PJOBX		;Output info
  1021	001066'	262040	000002		POP	P,J		;Number of job issuing PJOB command
  1022	001067'	263040	000000		POPJ	P,
  1023
  1024	001070'	260040	005243'	PJOBX::	PUSHJ	P,INLMES	;Enter here from STOPCD processor
  1025	001071'	433454	166712		 ASCIZ /Frame /
	001072'	200000	000000
  1026	001073'	200300	000002		MOVE	T1,J
  1027	001074'	260040	005507'		PUSHJ	P,PRTDEC	;Output job number in decimal
  1028	001075'	260040	005243'		PUSHJ	P,INLMES
  1029	001076'	201000	000000		 ASCIZ /  /
  1030	001077'	550342	000411*		HRRZ	T2,TTYTAB(J)	;Get TTY DDB
  1031	001100'	200347	000000		MOVE	T2,(T2)		;Get TTY name
  1032	001101'	607340	777777		TLNN	T2,-1		;Detached?
  1033	001102'	505340	444564		 HRLI	T2,'DET'	;Yes
  1034	001103'	260040	000000*		PUSHJ	P,PRNAME
  1035				;*; Might want to print node and line number here
  1036	001104'	260040	005243'		PUSHJ	P,INLMES
  1037	001105'	201000	000000		 ASCIZ /  /
  1038	001106'	200342	000000*		MOVE	T2,JBTUNM##(J)	;User's name
  1039	001107'	260040	001103*		PUSHJ	P,PRNAME
  1040	001110'	200342	000000*		MOVE	T2,JBTUN1##(J)	;2nd half
  1041	001111'	260040	001107*		PUSHJ	P,PRNAME
  1042	001112'	200342	000000*		MOVE	T2,JBTAUN##(J)	;Get user's logged-in PPN
  1043	001113'	260040	001623'		PUSHJ	P,PRTPPN
  1044	001114'	200302	000000*		MOVE	T1,JBTPPN##(J)	;The PPN GFD'd to
  1045	001115'	316302	001112*		CAMN	T1,JBTAUN##(J)	;Different from LOGIN PPN?
  1046	001116'	254000	001125'		 JRST	PJOBX1		;No, don't output same PPN twice
  1047	001117'	260040	001655'		PUSHJ	P,PRLPR		;"("
  1048	001120'	200302	001114*		MOVE	T1,JBTPPN##(J)	;Connected PPN
  1049	001121'	260040	001636'		PUSHJ	P,PRTUNM	;Directory name
  1050	001122'	200342	001120*		MOVE	T2,JBTPPN##(J)	;Connected PPN
  1051	001123'	260040	001623'		PUSHJ	P,PRTPPN	;Directory number
  1052	001124'	260040	001653'		PUSHJ	P,PRRPR		;")"
  1053	001125'	260040	005243'	PJOBX1:	PUSHJ	P,INLMES	;This could exceed 80 columns.
  1054	001126'	203036	420000		 ASCIZ / at /
  1055	001127'	200340	000000*		MOVE	T2,.CPSNO##	;System number (from CONFIG.MAC)
  1056	001130'	260040	000000*		PUSHJ	P,PR6BIT##	;Right justified SIXBIT
  1057	001131'	324740	005234'		PJRST	CRLF
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 18
COMCON.MAC	 6-NOV-87 01:34		/RCC/PFC 	29 OCT 70

  1058				;Simple commands
  1059
  1060	001132'	200300	000002	PJOB::	MOVE	T1,J		;JOB NO.
  1061	001133'	260040	005507'	DECLF::	PUSHJ	P,PRTDEC	;Print T1 as decimal, then CRLF
  1062	001134'	254000	005234'		JRST	CRLF
  1063
  1064				SUBTTL	ENABLE - restore saved frame license
  1065
  1066	001135'	260040	005136'	ENACMD:	PUSHJ	P,CTEXT		;Get license name
  1067	001136'	322340	001174'		JUMPE	T2,ENACMX	;Nothing... enable all
  1068	001137'	316340	005546'		CAMN	T2,[SIXBIT/ALL/];Keyword 'ALL' (must be first if present)
  1069	001140'	254000	001174'		  JRST	ENACMX		;Yes, enable all
  1070	001141'	514302	000000*		HRLZ	T1,JBTSLC(J)	;Copy saved frame license
  1071	001142'	202300	000436'		MOVEM	T1,LICSAV	; save for operations
  1072	001143'	514302	000000*		HRLZ	T1,JBTLIC(J)	;Copy current frame license
  1073	001144'	202300	000437'		MOVEM	T1,LICNEW	; save for operations
  1074	001145'	205300	000000*	ENACM1:	MOVSI	T1,-LICMAX##	;Number of names
  1075	001146'	514406	000000*	ENACM2:	HRLZ	T3,LICTBL##(T1)	;Get name from table
  1076	001147'	621400	000077		TLZ	T3,77		; clearing value field
  1077	001150'	312340	000010		CAME	T2,T3		;Match?
  1078	001151'	253300	001146'		  AOBJN	T1,ENACM2	;No, try next one
  1079	001152'	325300	005215'		JUMPGE	T1,COMERR	;Give error message
  1080	001153'	200306	001146*		MOVE	T1,LICTBL##(T1)	;Get pointer to license
  1081	001154'	200440	000006		MOVE	T4,T1		;Copy pointer for building
  1082	001155'	541440	000437'		HRRI	T4,LICNEW	; new license
  1083	001156'	135340	005547'		LDB	T2,[POINT 6,T1,35]	;Get value from pointer
  1084	001157'	541300	000436'		HRRI	T1,LICSAV	;Use holding area
  1085	001160'	135400	000006		LDB	T3,T1		;Get license value
  1086	001161'	315400	000007		CAMGE	T3,T2		;Is it saved? (must allow for xP,xF,xA)
  1087	001162'	254000	001200'		  JRST	ENAERR		;No... complain
  1088	001163'	135400	000011		LDB	T3,T4		;Get current value
  1089	001164'	315400	000007		CAMGE	T3,T2		;Is it already enabled?
  1090	001165'	137340	000011		  DPB	T2,T4		;No, set new value
  1091	001166'	260040	005136'		PUSHJ	P,CTEXT		;Get another license name
  1092	001167'	326340	001145'		JUMPN	T2,ENACM1	;If any, turn it on if possible
  1093	001170'	200300	000437'		MOVE	T1,LICNEW	;Get final license value
  1094	001171'	546302	001143*		HLRM	T1,JBTLIC(J)	;  for user table
  1095	001172'	201300	000014		MOVEI	T1,14		;Record that he changed frame license
  1096	001173'	324740	000000*		PJRST	ACTWRT		; and return from UUO noskip
  1097
  1098	001174'	550302	001141*	ENACMX:	HRRZ	T1,JBTSLC(J)	;Get all saved frame license
  1099	001175'	542302	001171*		HRRM	T1,JBTLIC(J)	;Make it the current frame license
  1100	001176'	201300	000014		MOVEI	T1,14		;Record that he changed frame license
  1101	001177'	324740	001173*		PJRST	ACTWRT		; and return from UUO noskip
  1102
  1103	001200'	265300	005233'	ENAERR:	JSP	T1,ERRMES	;Tell first part
  1104					ASCIZ	/?
  1105	001201'	374321	237630	?License not set
	001202'	647074	567346
	001203'	625015	667750
	001204'	203474	572032
  1106	001205'	050000	000000	/
  1107	001206'	263040	000000		POPJ	P,		;Then return
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 18-2
COMCON.MAC	 6-NOV-87 01:34		ENABLE - restore saved frame license

  1108	
  1109
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 19
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1110				SUBTTL	DISABLE - turn off frame license
  1111
  1112	001207'	260040	005136'	DISCMD:	PUSHJ	P,CTEXT		;Get license name
  1113	001210'	322340	001240'		JUMPE	T2,DISCMX	;Nothing... disable all
  1114	001211'	316340	005546'		CAMN	T2,[SIXBIT/ALL/];Keyword 'ALL' (must be first if present)
  1115	001212'	254000	001240'		  JRST	DISCMX		;Yes, disable all
  1116	001213'	514302	001175*		HRLZ	T1,JBTLIC(J)	;Copy frame license
  1117	001214'	202300	000436'		MOVEM	T1,LICSAV	; save for operations
  1118	001215'	205300	000000*	DISCM1:	MOVSI	T1,-LICMAX##	;Number of names
  1119	001216'	514406	001153*	DISCM2:	HRLZ	T3,LICTBL##(T1)	;Get name from table
  1120	001217'	621400	000077		TLZ	T3,77		; clearing value field
  1121	001220'	312340	000010		CAME	T2,T3		;Match?
  1122	001221'	253300	001216'		  AOBJN	T1,DISCM2	;No, try next one
  1123	001222'	325300	005215'		JUMPGE	T1,COMERR	;Give error message
  1124	001223'	200306	001216*		MOVE	T1,LICTBL##(T1)	;Get pointer to license
  1125	001224'	135340	005547'		LDB	T2,[POINT 6,T1,35]	;Get value from table
  1126	001225'	541300	000436'		HRRI	T1,LICSAV	;Use holding area
  1127	001226'	135400	000006		LDB	T3,T1		;Get license value
  1128				;*;match-any/exact
  1129				;*;	CAME	T3,T2		;Is it enabled? (must match for xP,xF,xA)
  1130				;*;	  JRST	ENAERR		;No... complain
  1131	001227'	322400	001200'		JUMPE	T3,ENAERR	;If none enabled, go complain
  1132				;*;match-any/exact
  1133	001230'	400340	000000		SETZ	T2,		;Yes, (JBTSLC should be setup already)
  1134	001231'	137340	000006		DPB	T2,T1		;  clear license in holding area
  1135	001232'	260040	005136'		PUSHJ	P,CTEXT		;Get another license name
  1136	001233'	326340	001215'		JUMPN	T2,DISCM1	;If any, turn it off
  1137	001234'	200300	000436'		MOVE	T1,LICSAV	;Get final license value
  1138	001235'	546302	001213*		HLRM	T1,JBTLIC(J)	;  for user table
  1139	001236'	201300	000014		MOVEI	T1,14		;Record that he changed frame license
  1140	001237'	324740	001177*		PJRST	ACTWRT		; and return from UUO noskip
  1141
  1142	001240'	513002	001235*	DISCMX:	HLLZS	JBTLIC(J)	;Turn off all frame license
  1143	001241'	201300	000014		MOVEI	T1,14		;Record that he changed frame license
  1144	001242'	324740	001237*		PJRST	ACTWRT		; and return from UUO noskip
  1145
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 20
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1146				; "KJOB" KILL ATTACHED JOB
  1147				EXTERNAL TTYKIL,CPOPJ,CURUPT,DSKKJB,LGONAM
  1148
  1149	001243'	205000	000001	KJB1:	MOVSI	S,1			;SET UP FOR CALL AT SA+1
  1150	001244'	607740	000004	KJOB:	TLNN	P4,JLOG	
  1151	001245'	254000	001254'		 JRST	KJOB2			;IF JOB NOT LOGGED IN
  1152	001246'	641700	000042		TLC	P3,TTYRNU+NOMESS	;Set TTYRNU & clear NOMESS for COMRET
  1153	001247'	205500	400000		MOVSI 	W,PHONLY		;PHYSICAL DEVS ONLY
  1154	001250'	200300	000000*		MOVE	T1,LGONAM		;NAME OF CUSP
  1155	001251'	402002	000270*		SETZM	JBTSLM##(J)		;CLEAR BOTH TRU LIMITS TO
  1156	001252'	402002	000271*		SETZM	JBTLIM##(J)		;MAKE SURE MONJOB CAN RUN
  1157	001253'	254000	002271'		JRST	ARCOM
  1158
  1159				COMMENT ! KJOB2 - HERE IF KJOB COMMAND FORCED ON LINE
  1160					WHICH HAS NOT YET LOGGED IN (HAPPENS IF NOT ENOUGH
  1161					ROOM TO RUN LOGINN). JUST CLEAN UP MONITOR DATA BASE.
  1162				!
  1163	001254'	265340	001034*	KJOB2:	JSP	T2,MONJOB##	;YES, SCHEDULE MONITOR JOB(PC IN EXEC MODE)
  1164					PFALL	JOBKL		; RETURN HERE AT M LEVEL WHEN SCHEDULED
  1165
  1166
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 21
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1167				COMMENT ! MONITOR JOB JOBKL
  1168				FUNCTION: DATABASE CLEANUP FOR LOGOUT UUO OR
  1169					WHEN (SYS)LOGOUT.SHR IS NOT TO BE RUN.
  1170				EXPECTS: J/JOB
  1171				!
  1172				EXTERNAL NOPRNT,TKCHLD
  1173	001255'	201340	001035*	JOBKL::	MOVEI T2,ESTOP##	;PUT ESTOP ON END OF PDL
  1174	001256'	265300	001036*		JSP T1,MONSTR##		;GO SETUP ACS AND PD LIST AT M LEVEL
  1175								;RETURN HERE AT M LEVEL AFTER BEING SCHEDULED
  1176	001257'	260040	000000*		PUSHJ P,DSKKJB		;CLEAR UP CORE BLOCKS ON A KJOB COMMAND
  1177								; MAY GO INTO WAIT, SO DO BEFORE GIVING
  1178								; UP USER CORE
  1179	001260'	554302	001032*		HLRZ T1,JBTUPM(J)	;DOES HE HAVE ANY USER CORE?
  1180	001261'	332000	000006		SKIPE	T1		;Skip if not
  1181	001262'	260040	001037'		PUSHJ P,JOB1		;DO RESET, KILL CORE AS WELL
  1182	001263'	260040	005346'		PUSHJ P,DEASTY		;DEASSIGN ALL BUT TTY
  1183	001264'	260040	000000*		PUSHJ P,NOPRNT		;ORPHAN ALL THE FRAMES CHILDREN
  1184	001265'	260040	000000*		PUSHJ P,TKCHLD		;TAKE THIS FRAME AWAY FROM ITS PARENT.
  1185	001266'	260040	001272'		PUSHJ P,KILUPT		;KILL UPT -- RETURN CORE & VM
  1186	001267'	260040	000000*		PUSHJ	P,TTYFND	;Set up F=DDB,U=LDB,S=DEVIOS(F)
  1187	001270'	260040	000000*		PUSHJ P,TTYKIL		;RETURN TTY TO VIRGIN STATE
  1188				;***Note*** TTYKIL must follow KILUPT, because job may be rescheduled
  1189				;***Note*** while killing UPT, leaving job with TTYTAB(J)=0, but with
  1190				;***Note*** JNA still set.
  1191	001271'	254000	000000*		JRST KSTOP		;CLEAR JOB STATUS WORD AND STOP JOB
  1192
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 22
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1193				;ROUTINE TO KILL THE CONTEXT PAGES FOR A JOB THAT
  1194				; IS LOGGING OFF. FIRST, CHECK TO MAKE SURE NO
  1195				; PAGES EXIST EXCEPT THE CONTEXT PAGES. NEXT, LOCK
  1196				; DOWN THE PHYSICAL CORE PAGES FOR THE CONTEXT PAGES
  1197				; IN CASE REMOVE HAS TO RESCHEDULE. THEN CALL REMOVE,
  1198				; WHICH WILL CHECK SPECIALLY FOR CONTEXT PAGES AND
  1199				; LEAVE THE MAP ENTRIES SO THAT WE CAN STILL ACCESS
  1200				; THE CONTEXT PAGE CORE. THEN UNLOCK THE CORE PAGES
  1201				; (DECREMENT THE USE COUNTS) AND CLEAR THE JBTCTX
  1202				; ENTRIES. ZERO JBTUPM, PUT JOB ON NULL QUEUE AND
  1203				; RETURN.
  1204
  1205				EXTERNAL KCLEAR,NCTXPG,%UPT.N,UXYPTM,LMMEXS,VPUMAX,GETLMA,CTXTAB
  1206				EXTERNAL INCUSE,DECUSE,UPSJOB
  1207				EXTERNAL WLKUPX,ULDUPX
  1208
  1209	001272'	260040	000000*	KILUPT:	PUSHJ	P,WLKUPX	;LOCK UPX SO NO ONE WILL GET THEM WHILE THEY ARE GOING AWAY
  1210	001273'	256000	000000'		 STOPCD			;HAVE TO BE ABLE TO GET OUR OWN. ;;KILUPT+1
  1211	001274'	554302	001260*		HLRZ	T1,JBTUPM(J)	;GET NUMBER OF EXISTENT PAGES IN
  1212								; USER SPACE.
  1213	001275'	332000	000006		SKIPE	T1		;MUST BE NO MORE PAGES
  1214	001276'	256000	000000'		 STOPCD			;THERE ARE, CRASH. ;;KILUPT+4
  1215	001277'	200500	005550'		MOVE	W,[-<VPUMAX-1000+1>,,340+CNVVPN] ;GET AOBJN POINTER
  1216	001300'	260040	000000*	KILUP1:	PUSHJ	P,GETLMA	;GET LMAP SLOT CONTENTS
  1217	001301'	603700	000000*		TLNE	P3,LMMEXS	;MAKE SURE IT DOESN'T EXIST
  1218	001302'	256000	005551'		 STOPCD (.,JOB,KILUP2,,<Funny space still in use at KILUPT>)
  1219	001303'	253500	001300'		AOBJN	W,KILUP1	;AND CHECK ANOTHER
  1220	001304'	201300	002000		MOVEI	T1,SWPINP	;MAKE SURE SWAPPER DOESN'T TRY TO
  1221	001305'	436302	000267*		IORM	T1,JBTSTS(J)	;SWAP US OUT WHILE WE'RE IN STRANGE STATE.
  1222
  1223	001306'	260040	001323'		PUSHJ	P,LOKUPT	;MAKE SURE PAGES DON'T GO AWAY
  1224	001307'	200300	005554'		MOVE	T1,[NCTXPG,,%UPT.N+CNVVPN] ;ARG TO REMOV
  1225	001310'	260040	000000*		PUSHJ	P,KCLEAR	;REMOVE ALL CONTEXT PAGES.
  1226	001311'	256000	000000'		 STOPCD			;HAD TO BE ABLE TO DO IT.   ;;KILUP1+11
  1227	001312'	260040	001322'		PUSHJ	P,ULKUPT	;DON'T RESCHEDULE AFTER THIS.
  1228	001313'	402002	001274*		SETZM	JBTUPM(J)	;NO LONGER ANY UPT.
  1229	001314'	316100	000000*		CAMN	J,UPSJOB	;IF WE WERE IN %UPS
  1230	001315'	402000	001314*		SETZM	UPSJOB		;WE ARE NO LONGER.
  1231	001316'	201300	002000		MOVEI	T1,SWPINP	;OK TO TURN THIS OFF NOW.
  1232	001317'	412302	001305*		ANDCAM	T1,JBTSTS(J)
  1233	001320'	260040	000000*		PUSHJ	P,ULDUPX	;RELEASE WRITE LOCK AND LOCKDOWN.
  1234	001321'	324740	000000*		PJRST	NOCORQ		;PUT JOB INTO NULL QUEUE AND RETURN.
  1235
  1236				;ROUTINE TO INCREMENT AND DECREMENT USE COUNTS FOR
  1237				; CONTEXT PAGES SO THAT THEY DON'T GO AWAY WHILE
  1238				; THEY ARE BEING REMOVED.
  1239
  1240				ULKUPT:	SKIPA	P1,[[SETZM @CTXTAB(W) ;CLEAR JBTCTX ENTRY
  1241	001322'	334600	005557'			     PJRST DECUSE]]	;DECREMENT USE COUNT AND RETURN.
  1242	001323'	201600	000000*	LOKUPT:	MOVEI	P1,INCUSE	;JUST INCREMENT USE COUNT.
  1243	001324'	205500	000000*	LKUUPT:	MOVSI	W,-NCTXPG	;AOBJN POINTER
  1244	001325'	200640	000000*		MOVE	P2,UXYPTM	;TO GET CP NUMBERS [UPXPTR(%UPT.N-1,%UPT)]
  1245	001326'	134140	000015	LKUUP1:	ILDB	PG,P2		;GET UPT MAP SLOT CONTENTS
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 22-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1246	001327'	405140	017777		ANDI	PG,17777	;JUST THE CORE PAGE NUMBER.
  1247	001330'	260054	000000		PUSHJ	P,(P1)		;INCREMENT OR DECREMENT
  1248	001331'	253500	001326'		AOBJN	W,LKUUP1	;AND LOOP
  1249	001332'	263040	000000		POPJ	P,		;DONE.
  1250
  1251
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 23
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1252				; "START L" OR "START" - START AT LOC. L OR STARTING ADDRESS
  1253				EXTERNAL JOBSA,JOBREN,USYPSR
  1254
  1255			400000	XP STARDI,(1B0)		;(MUST BE SIGN) IF ON, MEANS ADDRESS WAS SPECIFIED DIRECTLY
  1256							; RATHER THAN REFERRING TO LOCATION IN JOBDAT
  1257			200000	XP STARCL,(1B1)		;IF ON (STARDI MUST BE OFF) USE C(LOC)+1 AS ADDRESS
  1258	001333'			START:				;SAME AS CSTART, DIFF BY COMTAB BITS
  1259							; WHICH PUT TTY IN MONITOR OR USER MODE
  1260
  1261				; "CSTART L" OR  "CSTART" - START AT LOC. L(TTY IN COMMAND MODE)
  1262
  1263	001333'	260040	005370'	STARTC:	PUSHJ	P,OCTIN1	;CONVERT POSSIBLE OCTAL NO ARG.
  1264	001334'	254000	001343'		JRST	SNOARG		;NO ARG SPECIFIED RETURN
  1265	001335'	254000	005214'		JRST	COMERA		;ILLEGAL CHARACTER
  1266								;T2/USER TYPED OCTAL START LOC
  1267	001336'	260040	002212'		PUSHJ P,PROPRG
  1268	001337'	507302	001240*		HRLS T1,JBTLIC(J)
  1269	001340'	506302	001174*		HRLM T1,JBTSLC(J)
  1270	001341'	621340	777777		TLZ	T2,-1		;CLEAR JUNK
  1271	001342'	665340	400000		TLOA T2,400000		;SET ADDRESS TYPED FLAG
  1272	001343'	201340	000000*	SNOARG:	MOVEI T2,JOBSA		;USE JOBSA IF NO ADDRESS TYPED
  1273	001344'	201740	000004		MOVEI P4,4		;WRITE ACCOUNTING RECORD TYPE 4
  1274
  1275				;ENTER HERE ALSO FROM REENTER, DDT CMDS NEXT PG.
  1276				;T2/ USER ADDR; P4/ STREAM RECORD TYPE TO WRITE
  1277
  1278	001345'	260040	000000*	SNOAR1:	PUSHJ P,MAPUPS		;SET UP %UPS. CLOB T1,T3,T4 ONLY
  1279	001346'	607340	400000		TLNN T2,400000		;WAS ADDRESS TYPED IN?
  1280	001347'	254000	001352'		 JRST SNOAR2		;NO, NO NEED TO CLEAR PID
  1281	001350'	402000	000000*		SETZM %UPS+UPTPID	;CLEAR OUT PID AND SAVED PID
  1282	001351'	402000	000000*		SETZM %UPS+UPTSPD
  1283	001352'	200300	000000*	SNOAR2:	MOVE T1,%UPS+UPTPC	;GET OLD PC
  1284	001353'	607300	010000		TLNN T1,PC.USR		;USER MODE?
  1285	001354'	254000	001403'		 JRST STARC1		;NO.
  1286	001355'	202340	000000*	STARC2:	MOVEM T2,%UPS+UPTXAC+T3	;YES. SAVE ARGUMENT ADDRESS
  1287	001356'	202300	000000*		MOVEM T1,%UPS+UPTXAC+T4	;AND PC
  1288	001357'	202740	000000*		MOVEM P4,%UPS+UPTXAC+P4	;SAVE ACCOUNTING CODE
  1289	001360'	265340	001254*		JSP T2,MONJOB##
  1290
  1291				;HERE FOR A FRAME THAT HAS HAD A MONITOR JOB STARTED FOR IT BY
  1292				; THE START FRAME UUOS. T3,T4, AND P4 SETUP AS PER ABOVE.
  1293
  1294	001361'	400200	000000	STARTX::SETZ	F,		;IN CASE OF ILL MEM REF, DON'T PRINT ADDRESS CHECK.
  1295	001362'	200340	000000*		MOVE	T2,%UPT+UPTPDL	;SAME STARTING ADDRESS
  1296	001363'	265300	001256*		JSP	T1,MONSTR##	;SET UP AT START OF MONITOR JOB
  1297	001364'	335340	000010		SKIPGE	T2,T3		;ADDRESS OR INDIRECT?
  1298	001365'	254000	001371'		 JRST	STARX1		;DIRECT
  1299	001366'	256200	005560'	XCTBU  <HRRZ	T2,(T3)>	;INDIRECT. GET ADDRESS
  1300	001367'	603400	200000		TLNE	T3,STARCL	;WANTS CCL START ADDRESS?
  1301	001370'	350000	000007		AOS	T2		;YES, THIS IS THE CCL ADDRESS.
  1302	001371'	621340	600000	STARX1:	TLZ T2,STARDI!STARCL	;CLEAR SO CAN CHECK FOR 0
  1303	001372'	200300	000011		MOVE T1,T4
  1304	001373'	322340	000000*		JUMPE T2,ERRNSA		;DON'T ALLOW 0 START ADDRESS
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 23-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1305	001374'	261040	000007		PUSH P,T2
  1306	001375'	261040	000006		PUSH P,T1
  1307	001376'	200300	000017		MOVE T1,P4	;RECORD TYPE TO WRITE
  1308	001377'	260040	001242*		PUSHJ P,ACTWRT	;DO IT, CLOB T1-T4
  1309	001400'	262040	000006		POP P,T1
  1310	001401'	262040	000007		POP P,T2
  1311	001402'	254000	000000*		JRST USTART##
  1312
  1313
  1314
  1315
  1316	001403'			STARC1:	;CH7 LEVEL. HERE WHEN JOB WAS STOPPED IN MONITOR.
  1317					;T2/START ADDR, P4/STREAM REC TYPE.  IF HE
  1318					;STOPPED OUTOF SLEEP/TIOW STATE OR HAD JERR, START
  1319					;HIM UP NOW AT HIS START/REEN/DDT ADDRESS. ELSE
  1320					;SET UTRP (START/REEN/DDT PENDING FLAG),STORE
  1321					;THE STREAM TYPE TO WRITE & LET WHATEVER
  1322					;MONITOR ROUTINE WAS RUNNING FINISH UP. AT USRXIT
  1323					;THE START ETC WILL REALLY BE DONE.
  1324
  1325	001403'	200602	001317*		MOVE	P1,JBTSTS(J)	;STOPED INEXEC. GET STATUS
  1326	001404'	612600	005561'		TDNE	P1,[XWD JERR,JDCON];ERROR?
  1327	001405'	254000	001355'		  JRST	STARC2		;YES. START AT USER
  1328	001406'	135600	000000*		LDB	P1,PJBSTS	;GET WAIT STATE
  1329	001407'	302600	000000*		CAIE	P1,TIOWQ
  1330	001410'	306600	000000*		CAIN	P1,SLPQ
  1331	001411'	254000	001355'		  JRST	STARC2		;START AT USER IF TIOW OR SLEEPING
  1332	001412'	542340	000000*		HRRM	T2,%UPS+UPTSTS	;OTHERWISE SET UP TRAP FOR USRXIT
  1333	001413'	200600	000000*		MOVE	P1,%UPS+UPTSTS	;ADDRESS FOR USER START
  1334	001414'	661600	000000*		TLO	P1,STRTAD	;SET ADDRESS FLAG
  1335	001415'	331000	000007		SKIPL	T2		;REALLY AN ADRESS?
  1336	001416'	621600	001414*		TLZ	P1,STRTAD	;NO. FLAG INDIRECT
  1337	001417'	202600	000000*		MOVEM	P1,%UPS+UPTSTS
  1338	001420'	621600	000000*		TLZ	P1,STRTCL	;NO CCL START ADDRESS, ALREADY ADJUSTED.
  1339	001421'	201300	040000		MOVEI	T1,UTRP		;SET UP TRAP
  1340	001422'	436302	001403*		ORM	T1,JBTSTS(J)
  1341	001423'	137740	000000*		DPB	P4,USYPSR	;SAVE
  1342								;TYPE OF RECORD TO WRITE IN UPTSTS IN %UPS
  1343	001424'	263040	000000		POPJ	P,		;RTN TO CMD PROCESSING. JOB RUNNABLE,
  1344								;WILL CONTINUE IN EXEC.
  1345
  1346
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 24
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1347				;"REENTER" - REENTER USER PROGRAM
  1348
  1349				EXTERNAL TIOWQ,SLPQ,ERRNSA
  1350	001425'	201340	000000*	REENTE:	MOVEI	T2,JOBREN	;ADDRESS OF REENTER ADDRESS
  1351	001426'	201740	000005		MOVEI	P4,5		;ACCOUNTING RECORD TYPE 5
  1352	001427'	254000	001345'		JRST	SNOAR1
  1353
  1354
  1355				; "DDT" - START EXECUTION AT DDT IN USER AREA
  1356
  1357					EXTERN	JOBDDT
  1358	001430'	201340	000000*	DDTGO:	MOVEI	T2,JOBDDT	;ADDRESS OF START OF DDT
  1359	001431'	201740	000006		MOVEI	P4,6		;ACCOUNTING RECORD TYPE 6
  1360	001432'	254000	001345'		JRST	SNOAR1
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 25
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1361				; "PCOM"/"DCOM" - both run SYS:PCOM
  1362
  1363	001433'	200300	005562'	PCOM:	MOVE	T1,[SIXBIT /PCOM/]
  1364	001434'	254000	002271'		JRST	ARCOM
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 26
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1365				; "HALT" OR "CONTROL-C"
  1366				;SCANNER ROUTINES DUMMY UP HALT WHEN CONTROL C TYPED IN
  1367				;STOP MUST BE DELAYED IF THIS JOB IS SYSTEM DEC-TAPE USER
  1368				;AND SYSTEM DEC-TAPE IS ACTIVE. OTHERWISE, THE JOB WILL NOT BE
  1369				;STOPPED WHEN DONE USING THE SYSTEM DEC-TAPE.
  1370				;IF JOB IS IN MONITOR MODE AND NOT IN TTY WAIT THIS JOB CANNOT BE STOPPED YET
  1371				;IN THIS CASE SET A BIT IN JOB STATUS WORD (CNTRLC) WHICH WILL BE CHECKED
  1372				;WHEN JOB RETURNS TO USER MODE
  1373
  1374				EXTERNAL JOB,PJBSTS
  1375
  1376	001435'	201300	020000	STOP:	MOVEI	T1,JDCON	;CLEAR JCONT ABLE
  1377	001436'	412302	001422*		ANDCAM	T1,JBTSTS(J)	;SO ONCE A MINUTE STOPS
  1378
  1379	001437'	135300	001406*		LDB	T1,PJBSTS	;GET JOB STATUS CODE
  1380	001440'	201340	000001		MOVEI	T2,1		;BIT POS. IN DELAYN FOR STATE CODE 0
  1381	001441'	242346	000000		LSH	T2,(T1)		;MOVE LEFT ACCORDING TO STATE CODE
  1382	001442'	331302	001436*		SKIPL	T1,JBTSTS(J)	;JOB STATUS. IS RUN BIT OFF?
  1383	001443'	254000	001473'		 JRST	STOPAA		;YES, STOP JOB BUT DO NOT PRINT WATCH STATUS
  1384	001444'	603300	020000		TLNE	T1,JERR		;NO, IS ERROR BIT ON?
  1385	001445'	254000	001471'		 JRST	STOPA		;YES. STOP JOB EVEN IF IN EXEC MODE
  1386	001446'	603300	000001		TLNE	T1,JACCT
  1387	001447'	254000	005133'		 JRST	DLYCM1		;DO NOT TRY TO STOP IF JACCT
  1388	001450'	606300	002000		TRNN	T1,SWPINP	;SWAP IN PROGRESS?
  1389	001451'	331002	000135*		SKIPL	JBTCTX(J)	;CONTEXT PAGES IN CORE?
  1390	001452'	254000	001456'		 JRST	STOPC		;NO. ASSUME PC IN EXEC MODE
  1391	001453'	260040	001345*		PUSHJ	P,MAPUPS
  1392	001454'	200300	000000*		MOVE	T1,%UPS+UPTPC	; GET PC AND FLAGS FOR CURRENT JOB
  1393	001455'	607300	010000		TLNN	T1,PC.USR	;JOB PC IN USER MODE?
  1394	001456'	616340	001503'	STOPC:	TDNN	T2,DELAYN	;NO, IS JOB IN A STATE(IN EXEC) WHICH
  1395								; CAN BE STOPPED IMMEDIATELY
  1396	001457'	254000	001471'		 JRST	STOPA		;YES, STOP JOB
  1397	001460'	205300	000400		MOVSI	T1,CNTRLC	;NO, FLAG THAT USER MUST BE STOPPED WHEN
  1398	001461'	437302	001442*		IORB	T1,JBTSTS(J)	; RETURNING TO USER MODE IN MUUO HANDLER
  1399	001462'	607300	200000		TLNN	T1,CMWB		;IS JOB IN COMMAND WAIT?
  1400	001463'	254000	005133'		 JRST	DLYCM1		;NO. JUST DELAY COMMAND
  1401	001464'	205300	200000		MOVSI	T1,CMWB		;CLEAR COMMAND WAIT BIT
  1402	001465'	412302	001461*		ANDCAM	T1,JBTSTS(J)	;SO REQUE WILL CHANGE JOB QUEUE
  1403	001466'	312100	000225*		CAME	J,JOB		;NEVER REQUEUE CURRENT JOB
  1404	001467'	260040	000230*		 PUSHJ	P,REQUE		;YES. PUT HIM BACK IN RUNNABLE QUEUE
  1405	001470'	254000	005133'		JRST	DLYCM1		;THEN DELAY COMMAND (IE ECHO CR-LF, DOT)
  1406								;UNTIL SWAPPED IN
  1407
  1408	001471'	260040	001663'	STOPA:	PUSHJ	P,WCHEND	;PRINT [XXXX] CRLF IF USER IS WATCHING RESPONSES
  1409	001472'	260040	000000*		PUSHJ	P,TRHALT	;STOP JOB
  1410	001473'	335002	001044*	STOPAA:	SKIPGE	JBTPRV(J)	;check for LogoutOnStop (PVLOS)
  1411	001474'	254000	001500'		 JRST	TTKJOB		; if set, kill frame
  1412	001475'	200302	001465*		MOVE	T1,JBTSTS(J)	;GET JOB STATUS
  1413	001476'	603300	000004		TLNE	T1,JLOG		;IS JOB LOGGED IN?
  1414	001477'	263040	000000		  POPJ	P,		;If not, don't force kill
  1415				;	fall in to TTKJOB
  1416
  1417				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 26-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1418				;
  1419				; General entry point for forcing "must kill"
  1420				; J/ job #
  1421				; T1 mutilated
  1422				;
  1423				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  1424
  1425	001500'	205300	040000	TTKJOB::MOVSI	T1,CMDCK2	;"Must kill" (never detach) flag
  1426	001501'	436302	001077*		IORM	T1,TTYTAB(J)	;Set into command port table
  1427	001502'	254000	000264'		JRST	COMKJB		;Set command waiting stuff, etc.
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 27
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1428				;DEFINE A BIT FOR EACH STATE CODE
  1429				; WHICH IS 1(DJ) MEANS DELAY JOB(IF PC IN EXEC MODE) WHEN CONTROL C TYPED
  1430				; IF 0(SJ), OK TO STOP JOB(IN EXEC MODE)
  1431
  1432				DEFINE X(A,B,C)
  1433				<	IFIDN <C><DJ>,<QQ==1>
  1434					IFIDN <C><SJ>,<QQ==0>
  1435					YY==ZZ*QQ	;;SET THIS STATE CODE BIT TO 0 OR 1
  1436					XX==XX!YY	;;ACCUMULATE VALUES IN XX
  1437					ZZ==ZZ*2	;;MOVE MASK BIT LEFT ONE PLACE
  1438				>
  1439
  1440			000000	QQ==0	;MAKE SURE INTERMEDIATE VALUE IS 0
  1441			000000	XX==0	;START FINAL VALUE AT 0
  1442			000001	ZZ==1	;START OFF BIT FOR STATE 0
  1443
  1444					QUEUES
  1445					CODES
  1446
  1447					INTERN DELAYN
  1448
  1449	001503'	000055	607773	DELAYN:	EXP XX		;GENERATE THE DELAY WORD BIT 35=STATE 0,
  1450							; BIT 34=STATE 1, ETC.
  1451							; BIT 35-I=1 IF STATE I MUST BE DELAYED ON CONTROL C
  1452
  1453
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 28
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1454				;MONITOR COMMAND LEVEL RESPONSE ROUTINES
  1455				;FIVE MULTIPLE ENTRY SUBROUTINES TO PRINT SYSTEM RESPONSE DATA FOR A JOB
  1456				;CONTROL REACHES ONE OF THESE ROUTINES ON ANY OF THE FOLLOWING:
  1457				;1. USER TYPES CONTROL C
  1458				;2. PROGRAM HALTS
  1459				;3. PROGRAM CALLS EXIT, OR CALL N,EXIT
  1460				;4. DEVICE BECOMES UNREADY  DEVICE XXX OK?
  1461				;5. ERROR IN JOB MESSAGE
  1462
  1463				;PRRSP1 - PRINT CRLF CRLF
  1464				;PRRSP3 - PRINT [XXXX] CRLF IF USER WATCHING SYSTEM DATA RESPONSE
  1465				;PRRSP4 - PRINT CRLF
  1466				;PRRSP5 - PRINT PERIOD
  1467
  1468					INTERN PRRSP1,PRRSP3,PRRSP4,PRRSP5
  1469
  1470	001504'	260040	005234'	PRRSP1:	PUSHJ	P,CRLF		;PRINT CR-LF
  1471	001505'	260040	001663'	PRRSP3:	PUSHJ	P,WCHEND	;PRINT SYSTEM RESPONSE DATA IF USER IS WATCHING IT.
  1472	001506'	260040	005234'	PRRSP4:	PUSHJ	P,CRLF		;PRINT CR-LF
  1473	001507'	324740	005260'	PRRSP5:	PJRST	PRPRMT		;PRINT PERIOD
  1474
  1475
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 29
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1476				;COMMAND TO WATCH RESPONSE DATA
  1477				;TYPE:	WATCH DAY,RUN,WAIT,READ,WRITE
  1478				;TYPE	WATCH *CRLF* TO TURN OFF ALL
  1479
  1480					INTERN WATCH
  1481
  1482	001510'	205300	376000	WATCH:	MOVSI	T1,WCHALL	;CLEAR ALL WATCH DATA OPTIONS
  1483	001511'	412302	000000*		ANDCAM	T1,JBTWCH(J)	;FOR THIS JOB
  1484				;LOOP - GET NEXT ARGUMENT AND LOOK FOR TABLE MATCH
  1485	001512'	260040	005136'	WATLOP:	PUSHJ	P,CTEXT		;GET NEXT USER ARGUMENT
  1486	001513'	322340	001033*		JUMPE	T2,CPOPJ	;0 IF FINISHED (OR NONE)
  1487	001514'	205300	777771		MOVSI	T1,-WATLEN	;NO. OF ARGUMENTS
  1488	001515'	312346	001543'		CAME	T2,WATTAB(T1)	;MATCH?
  1489	001516'	253300	001515'		  AOBJN	T1,.-1		;NO. KEEP LOOKING
  1490	001517'	321300	001536'		JUMPL	T1,WATCH1	;FOUND ONE?
  1491	001520'	316340	005546'		CAMN	T2,[SIXBIT /ALL/]
  1492					 JRST	[MOVSI T1,WCHALL  ;WATCH ALL
  1493						 IORM  T1,JBTWCH(J)
  1494	001521'	254000	005563'			 POPJ  P,]
  1495	001522'	265300	005233'		JSP	T1,ERRMES	;NO, TELL USER THE LEGAL ONES
  1496	001523'	377036	263746		ASCIZ	/?args are: DAY,RUN,WAIT,READ,WRITE,VERSION,FILES,ALL
	001524'	203036	262564
	001525'	202110	154530
	001526'	512531	626256
	001527'	406232	426244
	001530'	426030	426256
	001531'	512232	442530
	001532'	532132	251622
	001533'	476345	443222
	001534'	462132	326202
  1497	001535'	462301	505000	/
  1498	001536'	211306	000000	WATCH1:	MOVNI	T1,(T1)		;-NO. OF ENTRY IN TABLE
  1499	001537'	205340	200000		MOVSI	T2,JBPWDY	;FIRST BIT
  1500	001540'	241346	000000		ROT	T2,(T1)		;ROTATE RIGHT TO PROPER POSITION
  1501	001541'	436342	001511*		IORM	T2,JBTWCH(J)	;SET BIT TO INDICATE USER WISHES TO
  1502								; WATCH THIS DATUM
  1503	001542'	254000	001512'		JRST	WATLOP		;GO GET NEXT ARG
  1504
  1505	001543'	444171	000000	WATTAB:	SIXBIT	/DAY/		;JBPWDY
  1506	001544'	626556	000000		SIXBIT	/RUN/		;JBPWRN
  1507	001545'	674151	640000		SIXBIT	/WAIT/		;JBPWWT
  1508	001546'	624541	440000		SIXBIT	/READ/		;JBPWDR
  1509	001547'	676251	644500		SIXBIT	/WRITE/		;JBPWDW
  1510	001550'	664562	635157		SIXBIT	/VERSIO/	;JBPWVR
  1511	001551'	465154	456300		SIXBIT	/FILES/		;JBPWFL
  1512				;ADD NEW ITEMS HERE AND IN ERROR COMMENT
  1513			000007	WATLEN==.-WATTAB
  1514			006000	WATMXL==<WATLEN-1>_^D9		; Length of WATCH table for GETTAB
  1515
  1516
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 30
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1517				;SUBROUTINE TO PRINT TIME OF DAY USER STARTS TO WAIT FOR RESPONSE
  1518				; IF HE HAS ENABLED IT WITH "WATCH DAY"
  1519				;CALL:	MOVE J,JOB NO.
  1520				;	PUSHJ P,WCHBEG
  1521				;	ALWAYS RETURN HERE
  1522
  1523				;THIS SUBROUTINE IS ALWAYS CALLED FROM THE COMMAND DECODER
  1524				;WHEN USER IS ABOUT TO WAIT FOR A RESPONSE
  1525
  1526
  1527	001552'	200300	000000*	WCHBEG:	MOVE	T1,TIME##	;TIME OF DAY IN JIFFIES
  1528	001553'	137300	000000*		DPB	T1,JBYWCH##	;STORE FOR JOB
  1529	001554'	205300	200000		MOVSI	T1,JBPWDY	;DOES USER WANT TO SEE THIS TIME PRINTED?
  1530	001555'	616302	001541*		TDNN	T1,JBTWCH##(J)	; ..
  1531	001556'	263040	000000		  POPJ	P,		;NO.
  1532	001557'	260040	001565'		PUSHJ	P,PRLBK		;YES, PRINT LEFT BRACKET
  1533	001560'	260040	000000*		PUSHJ	P,GETULT##	;GET USER LOCAL TIME AND DATE
  1534	001561'	201300	000000		  MOVEI	T1,0		;DATE NOT SET YET
  1535	001562'	260040	005447'		PUSHJ	P,PRTIME	;PRINT HH:MM:SS(NO CRLF)
  1536								;FALL INTO PRRBKC
  1537				;SUBROUTINE TO PRINT RIGHT BRACKET,CRLF
  1538
  1539	001563'	265300	005235'	PRRBKC:	PJSP	T1,CONMES
  1540					ASCIZ	/]
  1541	001564'	564321	200000	/
  1542				;SUBROUTINE TO PRINT LEFT BRACKET
  1543
  1544	001565'	265300	005235'	PRLBK:	PJSP	T1,CONMES
  1545	001566'	554000	000000		ASCIZ	/[/
  1546
  1547				;SUBROUTINE TO PRINT A FILESPEC FOR A DDB
  1548				;CALL WITH:
  1549				;	F = DDB ADDRESS
  1550				;	U = LDB ADDRESS (OR FIX COMTOA)
  1551				;	PUSHJ	P,PRTDDB
  1552				;	RETURN HERE
  1553
  1554	001567'	265440	000000*	PRTDDB::JSP	T4,SAVE1##	;SAVE P1
  1555	001570'	200604	000004		MOVE	P1,DEVMOD(F)	;GET DEVICE TYPE BITS
  1556	001571'	200344	000000		MOVE	T2,DEVNAM(F)	;GET DEVICE NAME
  1557				;DEVUNI in TOPS-10, not in TYMCOM-X
  1558				;*;	HRRZ	T3,DEVUNI##(F)	;UDB POINTER
  1559				;*;	JUMPE	T3,PRTDD0	;NO UNIT IF A KNOWN SEGMENT
  1560				;*;	TLNE	P1,DVDSK	;IS THIS A DISK?
  1561				;*;	 MOVE	T2,UNILOG##(T3)	;YES--PRINT STR NAME
  1562	001572'	260040	001111*	PRTDD0:	PUSHJ	P,PRNAME##	;PRINT IT
  1563	001573'	201400	000072		MOVEI	T3,":"		;ADD A COLON
  1564	001574'	260040	001660'		PUSHJ	P,PRCHR		; ..
  1565	001575'	607600	200100		TLNN	P1,DVDSK!DVDTA	;FILE AND EXT?
  1566	001576'	263040	000000		 POPJ	P,0		;NO--ALL DONE
  1567	001577'	200344	000015		MOVE	T2,DEVFIL(F)	;GET FILE NAME
  1568	001600'	322340	001620'		JUMPE	T2,PRTDD3	;PUNT IF NO NAME
  1569	001601'	554404	000016		HLRZ	T3,DEVEXT(F)	;IS THIS A UFD
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 30-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1570	001602'	603600	200000		TLNE	P1,DVDSK	;ON DISK
  1571	001603'	302400	654644		 CAIE	T3,'UFD'
  1572	001604'	254000	001607'		  JRST	PRTDD1		;NO
  1573	001605'	260040	001623'		PUSHJ	P,PRTPPN	;YES -- PRINT FILE NAME AS [M,N]
  1574	001606'	254000	001615'		JRST	PRTDD2		;AND NOT SIXBIT
  1575	001607'	603600	200000	PRTDD1:	TLNE	P1,DVDSK	;Disk?
  1576	001610'	336304	000017		SKIPN	T1,DEVPPN(F)	;Yes, got a directory?
  1577	001611'	334000	000000		 SKIPA			;No to one of those
  1578	001612'	260040	001651'		  PUSHJ	P,PRTDIR	;Yes, output name of directory in parens
  1579	001613'	200344	000015		MOVE	T2,DEVFIL(F)	;Get file name back
  1580	001614'	260040	001572*		PUSHJ	P,PRNAME##	;PRINT IT
  1581	001615'	260040	005326'	PRTDD2:	PUSHJ	P,PRPER		;ADD IN A DOT
  1582	001616'	510344	000016		HLLZ	T2,DEVEXT(F)	;GET EXTENSION
  1583	001617'	260040	001614*		PUSHJ	P,PRNAME##	;PRINT IT
  1584	001620'	603600	200000	PRTDD3:	TLNE	P1,DVDSK	;IS THIS THE DISK?
  1585	001621'	336344	000017		SKIPN	T2,DEVPPN(F)	;FALL INTO PRTPPN IF PPN
  1586	001622'	263040	000000		 POPJ	P,		;ELSE RETURN
  1587					PFALL	PRTPPN
  1588				;*;	PUSHJ	P,PRTPPN	;Output PPN
  1589				;*;	PUSHJ	P,INLMES
  1590				;*;	 ASCIZ	/ block /
  1591				;*;	MOVE	T1,DEVPOS##(F)
  1592				;*;	PUSHJ	P,PRTDEC	;Decimal
  1593				;*;	PUSHJ	P,INLMES
  1594				;*;	 ASCIZ	/, page /
  1595				;*;	MOVE	T1,DEVFLO##(F)
  1596				;*;	PJRST	PRT22A##	;Octal
  1597
  1598				;PRTPPN - Routine to output contents of T2 as a PPN
  1599
  1600	001623'	261040	000007	PRTPPN::PUSH	P,T2		;SAVE PPN
  1601	001624'	201400	000133		MOVEI	T3,"["		;PRINT [
  1602	001625'	260040	001660'		PUSHJ	P,PRCHR
  1603	001626'	554301	000000		HLRZ	T1,(P)
  1604	001627'	260040	000000*		PUSHJ	P,PRTDI8##	;PROJECT
  1605	001630'	260040	001657'		PUSHJ	P,PRCOM		;COMMA
  1606	001631'	550301	000000		HRRZ	T1,(P)
  1607	001632'	260040	001627*		PUSHJ	P,PRTDI8##	;PROG
  1608	001633'	201400	000135		MOVEI	T3,"]"
  1609	001634'	260040	001660'		PUSHJ	P,PRCHR
  1610	001635'	254000	000000*		JRST	T2POPJ##
  1611
  1612				;PRTUNM - print user directory user name.  Call with PPN in T1
  1613
  1614	001636'	260040	000000*	PRTUNM::PUSHJ	P,PPNUSR##	;Translate PPN in T1 to username in T2 and T3
  1615	001637'	263040	000000		  POPJ	P,		;Don't output anything if unknown
  1616	001640'	261040	000010		PUSH	P,T3		;Save 2nd half
  1617	001641'	261040	000007		PUSH	P,T2		;Save 1st half
  1618	001642'	260040	001617*		PUSHJ	P,PRNAME##	;First part of user name
  1619	001643'	262040	000010		POP	P,T3		;1st part
  1620	001644'	262040	000007		POP	P,T2		;2nd part in T2 this time
  1621	001645'	322340	001513*		JUMPE	T2,CPOPJ	;Finish off if 2nd part blank
  1622	001646'	606400	000077		TRNN	T3,77		;If 1st part ended with one or more blanks,
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 30-3
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1623	001647'	260040	005250'		 PUSHJ	P,PRSPC		; output one blank
  1624	001650'	324740	001642*		PJRST	PRNAME##	;Output 2nd part
  1625
  1626				;PRTDIR - print user directory name in parentheses.  Call with PPN in T1
  1627
  1628	001651'	260040	001655'	PRTDIR::PUSHJ	P,PRLPR		;Print left paren (even if PPNUSR fails)
  1629	001652'	260040	001636'		PUSHJ	P,PRTUNM	;Print username corresponding to PPN in T1
  1630					PFALL	PRRPR		;Finish off with close parenthesis
  1631
  1632				;PRRPR and PRLPR - print right and left parenthesis
  1633
  1634	001653'	201400	000051	PRRPR::	MOVEI	T3,")"		;Print right paren
  1635	001654'	324740	001660'		PJRST	PRCHR
  1636	001655'	201400	000050	PRLPR::	MOVEI	T3,"("		;Print left paren
  1637	001656'	324740	001660'		PJRST	PRCHR
  1638
  1639				;PRCOM - print a comma
  1640				;PRCHR - Output character in T3, preserves T1 and T2
  1641
  1642	001657'	201400	000054	PRCOM::	MOVEI	T3,","
  1643	001660'	261040	000006	PRCHR::	PUSH	P,T1
  1644	001661'	260040	000000*		PUSHJ	P,COMTYO##
  1645	001662'	324740	000000*		PJRST	TPOPJ##
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 31
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1646				;SUBROUTINE TO PRINT SYSTEM RESPONSE STATISTICS EACH TIME
  1647				;USER FINISHES WAITING FOR SYSTEM
  1648				;PRINT INCREMENTAL RUN TIME, WAIT TIME, # DISK BLKS READ, #DISK BLKS WRITTEN
  1649				;CALL:	MOVE J,JOB NUMBER
  1650				;	PUSHJ P,WCHEND
  1651				;	ALWAYS RETURN HERE
  1652
  1653
  1654	001663'	205300	170000	WCHEND:	MOVSI	T1,JBPWRN!JBPWWT!JBPWDR!JBPWDW	;USER WANT ANY RESPONSE DATA?
  1655	001664'	616302	001555*		TDNN	T1,JBTWCH(J)	; ..
  1656	001665'	263040	000000		  POPJ	P,		;NO.
  1657	001666'	261040	000016		PUSH	P,P3		;Make a work AC
  1658	001667'	260040	001565'		PUSHJ	P,PRLBK		;YES, PRINT LEFT BRACKET
  1659	001670'	205700	777774		MOVSI	P3,-WCHLEN	;LOOP THRU ALL RESPONSE DATA ITEMS
  1660	001671'	510316	001702'	WCHLOP:	HLLZ	T1,WCHTAB(P3)	;GET BIT ASSOCIATED WITH THIS FIELD
  1661	001672'	632302	001664*		TDZE	T1,JBTWCH(J)	;DOES USER WANT TO WATCH IT?
  1662	001673'	260076	001702'		  PUSHJ	P,@WCHTAB(P3)	;YES, PRINT IT OUT
  1663	001674'	252700	001676'		AOBJP	P3,WCH1		;FINISHED ALL FIELDS?
  1664	001675'	260040	005250'		PUSHJ	P,PRSPC		;NO, PRINT A SPACE
  1665	001676'	321700	001671'	WCH1:	JUMPL	P3,WCHLOP	;LOOP IF MORE BITS TO CONSIDER
  1666	001677'	260040	001563'		PUSHJ	P,PRRBKC	;Append right bracket, CRLF
  1667	001700'	262040	000016		POP	P,P3		;Restore work AC
  1668	001701'	263040	000000		POPJ	P,		;Return
  1669
  1670				;TABLE OF ROUTINES TO PRINT RESPONSE DATA
  1671
  1672	001702'	100000	001706'	WCHTAB:	XWD	JBPWRN,PRTWRN	;PRINT RUN TIME
  1673	001703'	040000	001714'		XWD	JBPWWT,PRTWWT	;PRINT WAIT TIME
  1674				EXTERN PRTWDR,PRTWDW
  1675	001704'	020000	000000*		XWD	JBPWDR,PRTWDR	;PRINT # DISK BLOCKS READ
  1676	001705'	010000	000000*		XWD	JBPWDW,PRTWDW	;PRINT # DISK BLOCKS WRITTEN
  1677								;ADD NEW DATA HERE
  1678			000004	WCHLEN==.-WCHTAB
  1679
  1680
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 32
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1681				;ROUTINE TO PRINT INCREMENTAL RUNTIME(NO CRLF)
  1682				;CALL:	MOVEI T1,0
  1683				;	PUSHJ P,PRTWRN
  1684
  1685
  1686	001706'	260040	000000*	PRTWRN:	PUSHJ	P,TIMADJ	;MAKE SURE COUNTS ARE UP TO DATE
  1687	001707'	260040	000000*		PUSHJ	P,CLKTRU	;FIND TRU'S
  1688	001710'	250302	000000*		EXCH	T1,RTIME(J)
  1689	001711'	274302	001710*		SUB	T1,RTIME(J)
  1690	001712'	213000	000006		MOVNS	T1
  1691	001713'	324740	003411'		PJRST	PRTDC1		;PRINT AS #.##
  1692
  1693				;ROUTINE TO PRINT WAIT TIME (NO CRLF)
  1694				;CALL:	PUSHJ P,PRTWWT
  1695
  1696					EXTERN MIDNIT,TIMADJ,CLKTRU
  1697
  1698	001714'	135300	001553*	PRTWWT:	LDB	T1,JBYWCH	;TIME OF DAY USER STARTED TO WAIT
  1699	001715'	274300	001552*		SUB	T1,TIME##	;-CURRENT TIME OF DAY = -WAIT TIME
  1700	001716'	331000	000006		SKIPL	T1		;IS IT REALLY MINUS?
  1701	001717'	274300	000000*		  SUB	T1,MIDNIT	;NO. MUST HAVE BEEN WAITING ACROSS MIDNIGHT
  1702								; SO SUBTRACT A DAY TO GET IT NEGATIVE
  1703	001720'	213000	000006		MOVNS	T1		;NOW MAKE IT PLUS WAIT TIME
  1704	001721'	324740	005450'		PJRST	PRTIM		;TYPE OUT TIME (NO CRLF)
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 33
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1705				; "CONTC" - CONTINUE EXECUTION(TTY REMAINS IN COMMAND MODE)
  1706				; "CONT" -  CONTINUE EXECUTION FROM WHERE LEFT OFF
  1707
  1708	001722'			CONTC:				;SAME AS CONT
  1709	001722'	607740	020000	CONT:	TLNN	P4,JERR		;IS JOB ERROR BIT SET?
  1710	001723'	263040	000000		 POPJ	P,		;COMMAND DECODER WILL DO REST
  1711	001724'	265300	005233'		JSP	T1,ERRMES	;YES, PRINT CANT CONTINUE
  1712	001725'	377074	167116		ASCIZ	/?can't continue
	001726'	721014	367734
	001727'	723235	672712
  1713	001730'	064240	000000	/
  1714
  1715	001731'	260040	001744'	FCONT:	PUSHJ	P,CKFCN		;SEE IF FCONT OK FOR THIS JOB
  1716	001732'	263040	000000		  POPJ	P,		;NO
  1717	001733'	621700	000202		TLZ	P3,NOCRLF!NOMESS ;Yes, set up for message
  1718	001734'	661700	000010		TLO	P3,TTYRNW	;And to start him
  1719	001735'	260040	005243'		PUSHJ	P,INLMES
  1720	001736'	557075	767350		 ASCIZ	/[continued by operator]/
	001737'	647356	562710
	001740'	203057	120336
	001741'	703136	260750
	001742'	677453	500000
  1721	001743'	263040	000000		POPJ	P,
  1722
  1723	001744'	200742	001475*	CKFCN:	MOVE	P4,JBTSTS(J)
  1724	001745'	607740	020000		TLNN	P4,JERR
  1725	001746'	606740	020000		TRNN	P4,JDCON	;FCONT ABLE IF NOT ERR AND JDCON
  1726	001747'	263040	000000		 POPJ	P,
  1727	001750'	254000	000421*		JRST	CPOPJ1		;YES, OK
  1728
  1729	001751'	261040	000005	FCONRQ:	PUSH	P,U
  1730	001752'	261040	000002		PUSH	P,J
  1731	001753'	200100	000006		MOVE	J,T1		;THE JOB TO DO IT FOR
  1732	001754'	260040	001744'		PUSHJ	P,CKFCN
  1733	001755'	254000	001765'		 JRST	FCNCNT		;CAN NOT DO IT, IGNORE
  1734	001756'	260040	001267*		PUSHJ	P,TTYFND	;GET USERS TTY
  1735	001757'	322240	001770'		JUMPE	U,FCNNOW	;DETACHED, GO NOW
  1736	001760'	205300	200000		MOVSI	T1,CMDCMF
  1737	001761'	612302	001501*		TDNE	T1,TTYTAB(J)
  1738	001762'	254000	001774'		 JRST	FCNSKP		;ALREADY HAS COMMAND WAITING
  1739	001763'	201300	000002		MOVEI	T1,CMFCXJ
  1740	001764'	260040	000275'		PUSHJ	P,COMWCM	;FORCE FCONT COMMAND
  1741	001765'	262040	000002	FCNCNT:	POP	P,J
  1742	001766'	262040	000005		POP	P,U
  1743	001767'	263040	000000		POPJ	P,
  1744
  1745	001770'	260040	000215*	FCNNOW:	PUSHJ	P,SETRUN##	;JUST SET HIM TO RUN
  1746	001771'	201300	020000		MOVEI	T1,JDCON
  1747	001772'	412302	001744*		ANDCAM	T1,JBTSTS(J)	;CLEAR JCONT BIT
  1748	001773'	254000	001765'		JRST	FCNCNT
  1749
  1750	001774'	350001	777776	FCNSKP:	AOS	-2(P)
  1751	001775'	254000	001765'		JRST	FCNCNT
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 34
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1752	001776'	201340	100000	JCONT:	MOVEI	T2,LICOPR
  1753	001777'	616342	001337*		TDNN	T2,JBTLIC(J)	;ONLY AN OPR
  1754	002000'	254000	005214'		 JRST	COMERA
  1755	002001'	260040	005360'		PUSHJ	P,DECIN1
  1756	002002'	254000	005252'		  JRST	NOTENF
  1757	002003'	254000	005214'		  JRST	COMERA
  1758	002004'	302340	000000		CAIE	T2,0
  1759	002005'	301340	001057*		CAIL	T2,JOBN
  1760	002006'	254000	003010'		 JRST	ATT1		;ILL JOB NO
  1761	002007'	200407	001772*		MOVE	T3,JBTSTS(T2)
  1762	002010'	607400	040000		TLNN	T3,JNA
  1763	002011'	254000	003002'		 JRST	ATT4		;NOT IN
  1764	002012'	250100	000007		EXCH	J,T2		;SET UP FOR TEST
  1765	002013'	260040	001744'		PUSHJ	P,CKFCN
  1766	002014'	254000	002024'		  JRST	JCER2		;ERROR
  1767	002015'	316340	000002		CAMN	T2,J		;FOR US?
  1768	002016'	254000	001731'		 JRST	FCONT		;GO
  1769	002017'	200300	000002		MOVE	T1,J		;SET UP TO START
  1770	002020'	200100	000007		MOVE	J,T2		;RESTORE OUR JOB NUMBER
  1771	002021'	260040	001751'		PUSHJ	P,FCONRQ
  1772	002022'	263040	000000		  POPJ	P,		;ALL OK
  1773	002023'	254000	003572'		JRST	SNDBSI		;BUSY
  1774
  1775	002024'	200100	000007	JCER2:	MOVE	J,T2		;RESTORE JOB NUMBER
  1776	002025'	265300	005233'		JSP	T1,ERRMES
  1777	002026'	377255	761100		ASCIZ	/?job not waiting/
	002027'	673376	420356
	002030'	607236	464734
	002031'	634000	000000
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 35
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1778				COMMENT ! "CORE" COMMAND.
  1779				"CORE ### OR ###K" - ASSIGN ###*1024 WORDS CORE TO JOB
  1780				"CORE ###P" - ASSIGN ###*512 WORDS CORE TO JOB"
  1781				" CORE CR" - PRINT CURRENT PAGES ASSIGNED & MAX ALLOWED
  1782				!
  1783
  1784	002032'	260040	005360'	CORE:	PUSHJ	P,DECIN1	;GET T2/NUMBER, T3/TERMINAL CHAR
  1785	002033'	254000	002106'		 JRST	COR3		;NO ARG. SPECIFIED
  1786	002034'	254000	005214'		 JRST	COMERA		;ILLEGAL DECIMAL CHARACTER
  1787	002035'	322340	001032'		JUMPE	T2,COR0		;USER SAID "CORE 0". GET RID
  1788								;OF EVERYTHING EXCEPT HIS CONTEXT PAGES.
  1789
  1790	002036'	260040	002212'		PUSHJ	P,PROPRG	;CHECK EX ONLY. CLOB T1
  1791	002037'	507302	001777*		HRLS	T1,JBTLIC(J)
  1792	002040'	506302	001340*		HRLM	T1,JBTSLC(J)
  1793	002041'	201440	000011		MOVEI	T4,^D9
  1794	002042'	306400	000120		CAIN	T3,"P"		;SHIFT BY ^D9 IF HE SAID ##P
  1795	002043'	254000	002050'		  JRST	COR1
  1796	002044'	302400	000113		CAIE	T3,"K"		;IF HE SAID ##K
  1797	002045'	307400	000040		CAIG	T3," "		;OR JUST ##
  1798	002046'	334440	005566'		  SKIPA	T4,[^D10]	;SHIFT BY 10 TO MAKE WORDS
  1799	002047'	254000	005214'		JRST	COMERA		;SAID SOME OTHER CHAR
  1800	002050'	242351	000000	COR1:	LSH	T2,(T4)		;CONVERT TO WORDS
  1801	002051'	275340	000001		SUBI	T2,1		;HIGHEST ADDRESS
  1802	002052'	261040	000007		PUSH	P,T2		;PROTECT FROM MAPUPS
  1803	002053'	260040	001453*		PUSHJ	P,MAPUPS	;GET HIS UPT IN %UPS
  1804	002054'	402000	000000*		SETZM	%UPS+UPTPID	;CLEAR OUT PID AND SAVED PID, HE'S MEDDLING
  1805	002055'	402000	000000*		SETZM	%UPS+UPTSPD
  1806	002056'	262040	000007		POP	P,T2
  1807	002057'	550300	000000*		HRRZ	T1,%UPS+UPTHRL	;LAST ADDR IN HISEG OR 0 IF NONE
  1808	002060'	322300	002072'		JUMPE	T1,COR5		;NO HISEG,T2/SIZE OK ALREADY
  1809	002061'	275346	377777		SUBI	T2,377777(T1)	;LOWSEG SIZE:=ARG-SIZE HISEG
  1810	002062'	325340	002072'		JUMPGE	T2,COR5
  1811	002063'	260040	005243'		PUSHJ	P,INLMES		;TOO SMALL ARG
  1812	002064'	377516	274500		 ASCIZ	/?try larger argument
	002065'	663036	263712
	002066'	711014	171316
	002067'	727334	567350
  1813	002070'	064240	000000	/
  1814	002071'	254000	002102'		JRST	COR2
  1815
  1816	002072'			COR5:	;ENTER HERE T2/HI ADDR DESIRED. SET UP
  1817					;MONJOB AND DO CORE UUO WHEN RUN.
  1818
  1819	002072'	202340	000000*		MOVEM	T2,%UPS+UPTXAC+T3	;SAVE CORE ADDR REQ IN T3
  1820	002073'	661700	000300		TLO	P3,NOPER!NOCRLF		;PHOLD will print period
  1821	002074'	265340	001360*		JSP	T2,MONJOB##
  1822	002075'	265300	001363*		JSP	T1,MONSTR##
  1823	002076'	260040	000000*		PUSHJ	P,TTYFUW	;SET UP TO PRINT
  1824	002077'	047400	000011		CALLI	T3,11		;CORE T3,
  1825	002100'	260040	002106'		  PUSHJ	P,COR3		;PRINT MSG FOR INSUFFICIENT CORE
  1826	002101'	254000	000000*		JRST	HOLD
  1827
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 35-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1828
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 36
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1829	002102'			COR2:	;COME HERE TO PRINT HIS SIZE WHEN HE GIVES A CORE
  1830					;ARG WHICH WOULD REQUIRE DELETING HIS HISEG, OR
  1831					;FROM LOGIN CODE WHEN NOT ENOUGH CORE TO RUN LOGINN.
  1832
  1833	002102'	200241	777777		MOVE	U,-1(P)		;RESTORE TTY LDB ADDR
  1834	002103'	260040	002106'		PUSHJ	P,COR3
  1835	002104'	661700	000001		TLO	P3,ERRFLG	;INDICATE AN ERROR CONDITION
  1836	002105'	263040	000000		POPJ	P,
  1837
  1838
  1839				; COR3: THIS CODE RUNS EITHER AT UUO OR CLOCK LEVEL. IT PUTS
  1840				; THE CONTEXT PAGES FOR THE JOB IN J INTO %UPS.
  1841				;EXPECTS J/JOB
  1842
  1843	002106'			COR3:	;PRINT "EE: NN+MM/ZZZ PAGES" ETC.
  1844	002106'	260040	002053*		PUSHJ	P,MAPUPS	;EXPECTS J/JOB TO MAP
  1845	002107'	554302	001313*		HLRZ	T1,JBTUPM(J)	;EXISTENT PGS BTW 0,777
  1846	002110'	260040	005507'		PUSHJ	P,PRTDEC
  1847	002111'	260040	005445'		PUSHJ	P,PRCOL
  1848	002112'	550300	000000*		HRRZ	T1,%UPS+UPTREL
  1849	002113'	271300	000777		ADDI	T1,777
  1850	002114'	242300	777767		LSH	T1,-9		;PGS IN LOSEG=[HI ADDR+777] LSH -9
  1851	002115'	260040	005507'		PUSHJ	P,PRTDEC
  1852	002116'	260040	005243'		PUSHJ	P,INLMES
  1853	002117'	254000	000000		 ASCIZ	/+/
  1854	002120'	550300	000000*		HRRZ	T1,%UPS+UPTHRL
  1855	002121'	332000	000006		SKIPE	T1
  1856	002122'	275300	377001		SUBI	T1,400000-777
  1857	002123'	242300	777767		LSH	T1,-9
  1858	002124'	260040	005507'		PUSHJ	P,PRTDEC
  1859	002125'	260040	005243'		PUSHJ	P,INLMES
  1860	002126'	274000	000000		 ASCIZ	"/"
  1861	002127'	135300	000000*		LDB	T1,PVYCOR	;GET CORE PERMITTED THIS USER
  1862	002130'	242300	000002		LSH	T1,2		;CONVERT TO PAGES
  1863	002131'	271300	000004		ADDI	T1,4		;AM'T == ((PVYCOR+1)*4)+1
  1864								;ALLOWING FOR THE UPT
  1865	002132'	260040	005507'		PUSHJ	P,PRTDEC	;PRINT NO. OF PAGES AVAILABLE
  1866	002133'	260040	005243'		PUSHJ	P,INLMES
  1867	002134'	203414	163712		 ASCIZ	/ pages
  1868	002135'	714321	253322	Vir. core left=/
	002136'	711344	061736
	002137'	713124	066312
	002140'	633507	500000
  1869	002141'	400300	000000		SETZ	T1,			;BEGIN WITH NOTHING
  1870	002142'	201340	000000*		MOVEI	T2,STRDDB		;GET INITIAL STR POINTER
  1871	002143'	270307	000000*	COR4:	ADD	T1,STRTAL(T2)		; ADD FREE DSK PAGES THIS STR
  1872				PRINTF(<[COR4+1 Loop through STRs for STRTAL - Is STRNXT defined?]>)
  1873				;*;	HLRZ	T2,STRNXT(T2)		; POINT TO NEXT STR
  1874				;*;	JUMPN	T2,COR4			;GET FREE ON ALL STRUCTURES
  1875	002144'	324740	001133'		PJRST	DECLF			;PRINT DECIMAL AND CRLF
  1876
  1877					EXTERNAL PVYCOR,JBYUWS,USYUWL,USYUWM
  1878
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 36-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1879
  1880
  1881				COMMENT ! VMINFO - COMMAND TO PRINT WORKING-SET INFO
  1882				!
  1883
  1884	002145'	260040	002106*	VMINFO::PUSHJ	P,MAPUPS	;EXPECTS J. GET %UPS ETC SET UP
  1885	002146'	260040	005243'		PUSHJ	P,INLMES
  1886	002147'	737465	462760		 ASCIZ	/ws,exs: /
	002150'	715644	000000
  1887	002151'	135300	000000*		LDB	T1,JBYUWS
  1888	002152'	260040	005507'		PUSHJ	P,PRTDEC
  1889	002153'	260040	001657'		PUSHJ	P,PRCOM		;Comma
  1890	002154'	554302	002107*		HLRZ	T1,JBTUPM(J)
  1891	002155'	260040	005507'		PUSHJ	P,PRTDEC	;CURRENT SIZE
  1892	002156'	260040	005243'		PUSHJ	P,INLMES
  1893	002157'	201015	464732		ASCIZ	/  lim,max: /
	002160'	263334	174164
	002161'	200000	000000
  1894	002162'	135300	000000*		LDB	T1,USYUWL	;LIMIT
  1895	002163'	260040	005507'		PUSHJ	P,PRTDEC
  1896	002164'	260040	001657'		PUSHJ	P,PRCOM
  1897	002165'	135300	000000*		LDB	T1,USYUWM	;MAX ALLOWED FOR LIMIT
  1898	002166'	260040	005507'		PUSHJ	P,PRTDEC
  1899	002167'	263040	000000		POPJ	P,
  1900
  1901
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 37
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1902				; "SAVE FILE-NAME[PROJ.,PROG.] CORE" - SAVES JOB AREA ON RETRIEVABLE DEVICE
  1903				;ONLY A SAVE OR A GET IN PROGRESS FOR EACH JOB
  1904				;NO ATTEMPT IS MADE TO SAVE DEVICE ASSIGNMENTS, AC'S, OR PC
  1905
  1906				; "SSAVE FILNAM.EXT [PROJ,R] CORE"
  1907				;WORKS LIKE SAVE, EXCEPT THAT HIGH SEG IS SAVED AS SHARABLE(EXT=SHR)
  1908				;INSTEAD OF NON-SHARABLE(EXT=HGH)
  1909
  1910	002170'	661000	400000	SAVE:	TLO 	S,NSRBIT	;SET FLAG FOR NON-SHARABLE EXT(HGH)
  1911	002171'	541000	000000*	SSAVE:	HRRI 	S,SAVJOB	;SETUP TO RUN SAVJOB (S CLEARED BEFORE)
  1912	002172'	260040	002212'		PUSHJ 	P,PROPRG	;CHECK EX ONLY
  1913	002173'	402002	000000*		SETZM 	JBTNAM(J)	;CLEAR JOB'S PROGRAM NAME FOR RCOM
  1914	002174'	254000	000000*		JRST 	SGSETD		; assume DSK:
  1915
  1916				; "GET DEVICE:FILE-NAME[PROJ.,PROG.] CORE" - SETS UP JOB AREA FROM RETREIVABLE
  1917				;DEVICE AND ASSIGNS CORE.
  1918
  1919	002175'	201000	000000*	GET:	MOVEI 	S,GETJOB	;SETUP TO RUN GETJOB
  1920	002176'	402002	002173*		SETZM	JBTNAM(J)	; CLEAR NAME FOR RCOM
  1921	002177'	254000	002174*		JRST	SGSETD		; assume DSK:
  1922
  1923				;AUTOMATIC LOGIN AFTER DSK REFRESH OR WHEN REFLAG SET
  1924
  1925	002200'	202302	001122*	LOGREF:	MOVEM	T1,JBTPPN(J)	;PRJ,PRG NRS. IN REFLAG
  1926	002201'	461300	000020		SETCMI 	T1,LICUNU
  1927	002202'	552302	002037*		HRRZM 	T1,JBTLIC(J)
  1928	002203'	200300	005567'		MOVE 	T1,[177,,177]
  1929	002204'	202302	001473*		MOVEM 	T1,JBTPRV(J)	;SET CORE ALLOWED TO INFINITE
  1930	002205'	205300	000004		MOVSI	T1,JLOG
  1931	002206'	436302	002007*		IORM	T1,JBTSTS(J)
  1932	002207'	400700	000000		SETZ	P3,		;Clear all flags for COMRET
  1933	002210'	402000	000000*		SETZM	REFLAG		;ONLY ONCE
  1934					;Moved reminder to set date,time to PRPRMT
  1935	002211'	263040	000000		POPJ	P,
  1936
  1937	002212'	201300	400000	PROPRG:	MOVEI 	T1,PVEXO
  1938	002213'	616302	002204*		TDNN 	T1,JBTPRV(J)
  1939	002214'	263040	000000		POPJ 	P,
  1940	002215'	260040	005243'		PUSHJ 	P,INLMES
  1941	002216'	377416	267716		 ASCIZ 	/?program is run only/
	002217'	713035	520322
	002220'	715016	272734
	002221'	203375	666362
	002222'	000000	000000
  1942	002223'	260040	005234'		PUSHJ 	P,CRLF
  1943	002224'	254000	005213'		JRST 	COMERP
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 38
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1944				;"HELP" -HELP COMMAND
  1945
  1946	002225'	200300	000000*	HELP1:	MOVE 	T1,HELPPP
  1947	002226'	607740	000004		TLNN 	P4,JLOG
  1948	002227'	254000	002237'		  JRST	ALOGIN
  1949	002230'	263040	000000		POPJ	P,
  1950
  1951				;SYSTEM JOB STARTUP COMMAND
  1952
  1953	002231'	260040	002225'	INITIA:	PUSHJ 	P,HELP1		;CREATE JOB'S PPN IF NEEDED
  1954	002232'	200300	005570'		MOVE 	T1,[SIXBIT /INITIA/]	;CUSP NAME
  1955	002233'	254000	002271'		JRST 	ARCOM		;RUN IT
  1956
  1957	002234'	260040	002225'	DSKLOD:	PUSHJ 	P,HELP1		;CREATE JOB'S PPN IF NEEDED
  1958	002235'	200300	005571'		MOVE 	T1,[SIXBIT /DSKCLN/]	;CUSP NAME
  1959	002236'	254000	002271'		JRST 	ARCOM		;RUN IT
  1960
  1961				IFKMC<;Run KMCLOD at system startup on 2020
  1962				KMCLOD: PUSHJ	P,HELP1		;CREATE JOB'S PPN IF NEEDED
  1963					MOVE	T1,[SIXBIT /KMCLOD/]	;CUSP NAME
  1964					JRST	ARCOM
  1965				>;END IFKMC
  1966
  1967	002237'			ALOGIN:
  1968				EXTERN	JBTPPN
  1969	002237'	336002	002200*		SKIPN	JBTPPN(J)	;If PPN already set, don't change it
  1970	002240'	202302	002237*		MOVEM 	T1,JBTPPN(J)
  1971	002241'	200740	005572'		MOVE 	P4,[JLOG,,SCHPRV]	
  1972	002242'	413742	002206*		ANDCAB 	P4,JBTSTS(J)	;CLEAR THESE SO COMRET DOES GOOD THINGS
  1973	002243'	263040	000000		POPJ 	P,
  1974
  1975				;"LOGIN" - LOGIN COMMAND
  1976
  1977	002244'	265300	005233'	LOGDET:	JSP	T1,ERRMES
  1978	002245'	377415	462702		 ASCIZ	/?please KJOB or DETACH
	002246'	717124	045624
	002247'	476044	067744
	002250'	202110	552202
  1979	002251'	416201	505000	/
  1980	002252'	603740	000004	CLOGIN:	TLNE	P4,JLOG		;FORCE USER TO LOGOUT BEFORE
  1981	002253'	254000	002244'		JRST	LOGDET		; LOGGING IN ANEW.
  1982	002254'	332300	002210*		SKIPE	T1,REFLAG	;REFLAG SET NON-ZERO FOR AUTOMATIC LOGIN?
  1983	002255'	254000	002200'		JRST	LOGREF		;YES, LOG USER IN WITHOUT RUNNING CUSP
  1984								; SO HE CAN RELOAD THE DISK AFTER REFRESH
  1985	002256'	200300	002225*		MOVE T1,HELPPP		;SET JBTPPN TO HELPPP
  1986	002257'	260040	002237'		PUSHJ P,ALOGIN		;AUTOMATIC LOGIN
  1987	002260'	200300	002262'		MOVE	T1,PRVLOG	;CUSP NAME
  1988	002261'	254000	002271'		JRST	ARCOM		;RUN IT
  1989								;HOPEFULLY THERE WILL BE ENOUGH
  1990								;ROOM TO DO THE RUN (SYS)LOGINN,
  1991								;BUT IF NOT, SEGCON WILL JSP PHOLD
  1992								;WITH A NO ROOM MESSAGE AND A KJOB
  1993								;WILL BE FORCED SINCE JLOG WILL NOT HAVE
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 38-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1994								;BEEN TURNED ON BY LOGINN.
  1995
  1996	002262'	545747	515656	PRVLOG:	SIXBIT /LOGINN/		; NAME OF CUSP TO RUN TO LOG USER IN
  1997
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 39
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  1998				; "R CUSPNAME CORE" - DOES "RUN SYS:CUSPNAME"
  1999
  2000				EXTERNAL TTCMCH
  2001
  2002	002263'	201300	000000	RCOM:	MOVEI	T1,0		;NO FILE NAME. TTY WILL SUPPLY IT
  2003	002264'	254000	002273'		JRST	ARCOM1
  2004
  2005	002265'	200300	005573'	SYSRUN:	MOVE	T1,[SIXBIT /SYSTAT/]
  2006	002266'	254000	002271'		JRST	ARCOM
  2007
  2008	002267'	334300	005574'	SUDRUN:	SKIPA	T1,[SIXBIT /SUDS/]
  2009	002270'	200300	005575'	CCLRUN:	MOVE	T1,[SIXBIT /RPG/]	;CUSP NAME
  2010
  2011	002271'	201400	000012	ARCOM:	MOVEI 	T3,12		;MAKE SURE NO MORE ARGS SCANNED
  2012	002272'	202400	000420*		MOVEM 	T3,TTCMCH	; ..
  2013	002273'	202302	002176*	ARCOM1:	MOVEM	T1,JBTNAM(J)	;STORE FILE NAME
  2014	002274'	205340	637163		MOVSI	T2,(SIXBIT /SYS/) ;READ FROM SYS DEVICE
  2015	002275'	254000	002300'		JRST	RUNCO2
  2016
  2017				; "RUN DEVICE:FILE[PROJ.,PROG.] (CORE)"
  2018				;DOES A CORE,GET,START ALL IN ONE
  2019				;IF CORE ARG IS MISSING, SIZE IN DIRECTORY IS USED
  2020				;JOB ON DISK OR IN CORE OR NO CORE, BUT NOT IN MIDDLE OF SWAP
  2021
  2022				EXTERNAL JOBFDV,JOBEXM
  2023
  2024	002276'	402002	002273*	RUNCOM: SETZM	JBTNAM(J)	;CLEAR FILE NAME
  2025	002277'	205340	446353	RUNCO3:	MOVSI 	T2,'DSK'
  2026	002300'	541000	000000*	RUNCO2:	HRRI 	S,RUNJOB
  2027	002301'	603000	000001		TLNE 	S,1
  2028	002302'	201000	000000*		MOVEI 	S,RUNJB2	;FOR SA+1
  2029	002303'	254000	000000*		JRST 	SGSET
  2030
  2031				; RUN RESTRICTED COMMAND USER FILE
  2032				;
  2033	002304'	261040	000007	RESRUN:	PUSH	P,T2		;save sixbit command name
  2034	002305'	260040	002145*		PUSHJ 	P,MAPUPS	;GET SPECIAL FILE NAME
  2035	002306'	262040	000000*		POP	P,%UPS+UPTUAC##+1;return command name in user AC 1
  2036	002307'	200300	000000*		MOVE 	T1,%UPS+UPTRNM
  2037	002310'	661000	000002		TLO 	S,2		;FLAG RUN SPECIAL FILE
  2038	002311'	202302	002276*		MOVEM 	T1,JBTNAM(J)	;SET NAME
  2039	002312'	201400	000012		MOVEI 	T3,12
  2040	002313'	202400	002272*		MOVEM 	T3,TTCMCH
  2041	002314'	254000	002277'		JRST 	RUNCO3
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 40
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2042				; "ASSIGN DEV:NAME" - ASSIGN DEVICE TO JOB AND GIVE IT LOGICAL NAME
  2043
  2044				EXTERNAL DEVLST
  2045
  2046	002315'	260040	005170'	ASSIGN:	PUSHJ	P,CTXDEV	;GET FIRST ARGUMENT TO T2 "DEV"
  2047	002316'	322340	005252'		JUMPE	T2,NOTENF	;NO ARGUMENT TYPED IF 0
  2048
  2049	002317'	200740	000007		MOVE	P4,T2		;SAVE DEVICE NAME
  2050	002320'	261040	000005		PUSH	P,U		;SAVE TTY LDB
  2051	002321'	200300	000007		MOVE	T1,T2		;DEVICE NAME IN T1
  2052	002322'	260040	000000*		PUSHJ	P,DEVPHY	;DO SOMETHING (LOOK FOR TTY MAYBE)
  2053	002323'	254000	002325'		 JRST	ASSG3		;NOT A PHYSICAL NAME
  2054	002324'	254000	002344'		 JRST	ASSG4		;A SPECIFIC PHYSICAL NAME
  2055
  2056	002325'	201340	400000	ASSG3:	MOVEI	T2,ASSCON	;SET UP ASSIGNED BY CONSOLE BIT
  2057	002326'	554200	000000*		HLRZ	F,DEVLST	;PREPARE TO SEARCH DDB'S
  2058	002327'	200304	000000	ASSG0:	MOVE	T1,DEVNAM(F)	;GET DEVICE NAME FROM DDB
  2059	002330'	316744	000000		CAMN	P4,DEVNAM(F)	;DOES PHYSICAL NAME WITH "DEV"?
  2060	002331'	254000	002344'		 JRST	ASSG4		;YES
  2061	002332'	135500	000360*		LDB	W,PJOBN		;SAVE OLD JOB# FOR THIS DEVICE
  2062	002333'	620300	777777		TRZ	T1,-1		;COMPARE LEFT HALF ONLY (DTA,MTA,DPC)
  2063	002334'	316300	000017		CAMN	T1,P4		;DOES IT MATCH?
  2064	002335'	260040	000000*		 PUSHJ	P,ASSASG	;MATCH, TRY TO ASSIGN DEVICE
  2065	002336'	254000	002340'		JRST	ASSG2		;KEEP LOOKING
  2066	002337'	322500	002412'		JUMPE	W,ASSFIN	;SUCCESS IF OLD JOB# 0, DEVICE PREVIOUSLY UNASSIGNED
  2067
  2068	002340'	554204	000003	ASSG2:	HLRZ	F,DEVSER(F)	;GET ADDRESS OF NEXT DDB
  2069	002341'	326200	002327'		JUMPN	F,ASSG0		;KEEP LOOKING
  2070	002342'	262040	000005		POP	P,U		;RESTORE TTY LDB
  2071	002343'	254000	002455'		JRST	NOTDEV		;PRINT "NO SUCH DEVICE"
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 41
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2072
  2073				;PHYSICAL NAME MATCHES IF HERE
  2074
  2075	002344'	200344	000004	ASSG4:	MOVE	T2,DEVMOD(F)	;DEVMOD WORD
  2076	002345'	607340	200000		TLNN	T2,DVDSK	;IS THIS A DISK?
  2077	002346'	254000	002372'		 JRST	ASSG5		;NO.
  2078	002347'	402004	000005		SETZM	DEVLOG(F)	;YES. CHECK FOR LOGICAL NAME
  2079	002350'	262040	000005		POP	P,U		;RESTORE TTY LDB ADDRESS
  2080	002351'	261040	000004		PUSH	P,F		;AND SAVE DEVICE'S DDB
  2081	002352'	261040	000006		PUSH	P,T1		;SAVE PHYSICAL NAME
  2082	002353'	260040	005140'		PUSHJ	P,CTEXT1	;GET LOGICAL NAME ARGUMENT OF "ASSIGN DEV:NAME"
  2083	002354'	200300	000007		MOVE	T1,T2		;COPY TO T1 FOR DEVLG
  2084	002355'	322300	002376'		JUMPE	T1,ASSG8	;NO LOGICAL NAME SPECIFIED, IF 0
  2085	002356'	260040	000000*		PUSHJ	P,DEVLG		;SEE IF LOGICAL NAME IN USE
  2086	002357'	254000	002361'		 JRST	.+2		;NO
  2087	002360'	254000	002400'		 JRST	ASSG7		;YES, ERROR! SO NO ASSIGNMENT
  2088	002361'	262040	000007		POP	P,T2		;GET PHYSICAL NAME BACK
  2089	002362'	262040	000004		POP	P,F		;RESTORE DDB ADDRESS
  2090	002363'	261040	000006		PUSH	P,T1		;SAVE LOGICAL NAME
  2091	002364'	200300	000007		MOVE	T1,T2		;SET T1= PHYSICAL NAME FOR ASSASG
  2092	002365'	201340	400000		MOVEI	T2,ASSCON
  2093	002366'	260040	002335*		PUSHJ	P,ASSASG	;ASSIGN BY CONSOLE
  2094	002367'	254000	002402'		  JRST	ASSER0		;NO MORE CORE FOR DISK DDB'S
  2095	002370'	262040	000006		POP	P,T1		;RESTORE LOGICAL NAME
  2096	002371'	254000	002434'		JRST	ASSF2		;FINISH LOGICAL ASSIGNMENT
  2097
  2098	002372'	201340	400000	ASSG5:	MOVEI	T2,ASSCON
  2099	002373'	260040	002366*		PUSHJ	P,ASSASG	;TRY TO ASSIGN DEVICE
  2100	002374'	254000	002403'		 JRST	ASSER1		;ALREADY ASSIGNED TO ANOTHER JOB
  2101	002375'	254000	002412'		 JRST	ASSFIN		;SUCCESSFULLY ASSIGNED
  2102
  2103	002376'	262040	000007	ASSG8:	POP	P,T2		;REMOVE GARBAGE FROM PD LIST
  2104	002377'	254000	002433'		JRST	ASSF1
  2105
  2106	002400'	262040	000007	ASSG7:	POP	P,T2		;REMOVE PHYSICAL OAME FROM PD LIST
  2107	002401'	254000	002421'		JRST	ASSF0
  2108
  2109
  2110				;ALREADY ASSIGNED TO ANOTHER JOB
  2111
  2112	002402'	202241	000000	ASSER0:	MOVEM	U,0(P)		;DISCARD LOGICAL NAME VIA NEXT POP INSTR
  2113	002403'	262040	000005	ASSER1:	POP	P,U		;GET LDB ADDRESS
  2114	002404'	265300	005233'	ASSER2:	JSP	T1,ERRMES
  2115	002405'	377114	573322		 ASCIZ /?device not available
	002406'	617124	067336
	002407'	721014	173302
	002410'	647314	161330
  2116	002411'	624321	200000	/
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 42
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2117				;DEVICE ASSIGNED, GIVE IT A LOGICAL NAME
  2118
  2119	002412'	402004	000005	ASSFIN:	SETZM	DEVLOG(F)	;CLEAR LOGICAL NAME
  2120	002413'	262040	000005		POP	P,U		;RESTORE TTY LDB ADDR
  2121	002414'	261040	000004		PUSH	P,F		;SAVE DEVICE'S DDB
  2122	002415'	260040	005140'		PUSHJ	P,CTEXT1	;GET SECOND ARG, LOGICAL DEVICE NAME
  2123	002416'	332300	000007		SKIPE	T1,T2		;IS THERE A LOGICAL NAME SPECIFIED?
  2124	002417'	260040	002356*		 PUSHJ	P,DEVLG		;YES, SEE IF IT IS ALREADY IN USE
  2125								; BY THIS USER
  2126	002420'	254000	002433'		JRST	ASSF1		;NO
  2127	002421'	661700	000001	ASSF0:	TLO	P3,ERRFLG	;Equivalent to calling ERRMES
  2128	002422'	260040	005243'		PUSHJ	P,INLMES
  2129	002423'	377315	763722		 ASCIZ	/?logical name already in use, /
	002424'	617035	420334
	002425'	607334	520302
	002426'	663454	560710
	002427'	745015	167100
	002430'	727474	526100
	002431'	000000	000000
  2130	002432'	201300	000000		MOVEI	T1,0		;CLEAR LOGICAL NAME FOR THIS DEVICE
  2131	002433'	262040	000004	ASSF1:	POP	P,F		;DDB OF THE NEWLY ASSIGNED DEVICE
  2132	002434'	202304	000005	ASSF2:	MOVEM	T1,DEVLOG(F)	;STORE IN DEVICE DATA BLOCK
  2133	002435'	205340	400000		MOVSI	T2,DVDIRIN	;CLEAR DIRECTORY IN CORE BIT
  2134	002436'	412344	000004		ANDCAM	T2,DEVMOD(F)	;
  2135	002437'	200344	000000		MOVE	T2,DEVNAM(F)	;PHYSICAL NAME
  2136	002440'	260040	001650*		PUSHJ	P,PRNAME	;PRINT IT
  2137	002441'	265300	005235'		JSP	T1,CONMES
  2138	002442'	203036	371722		 ASCIZ / assigned
	002443'	637354	562032
  2139	002444'	050000	000000	/
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 43
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2140				;"DEASSIGN DEV" - DEASSIGNS DEVICE FROM CONSOLE
  2141
  2142	002445'	260040	005170'	DEASSI:	PUSHJ	P,CTXDEV	;GET DEVICE NAME
  2143	002446'	322340	005346'		JUMPE	T2,DEASTY 	;NO ARG. IF 0, DEASSIGN ALL BUT TTY
  2144	002447'	200300	000007		MOVE	T1,T2		;DEVICE NAME
  2145	002450'	260040	000000*		PUSHJ	P,DEVSRC	;SEARCH FOR DEVICE
  2146	002451'	254000	002455'		 JRST	DEAER1		;NOT FOUND
  2147	002452'	260040	005330'		PUSHJ	P,DEASG		;FOUND, DEASSIGN IT
  2148	002453'	254000	002463'		 JRST	DEAER2		;NOT PREVIOUSLY ASSIGNED
  2149	002454'	263040	000000		POPJ	P,		;DEVICE DEASSIGNED
  2150
  2151	002455'			NOTDEV:
  2152	002455'	200241	777777	DEAER1:	MOVE	U,-1(P)		;RESTORE TTY U DATA BLOCK
  2153	002456'	265300	005233'		JSP	T1,ERRMES	;PRINT NO SUCH DEVICE
  2154	002457'	377355	720346		 ASCIZ	/?no such device
	002460'	727075	020310
	002461'	627555	161712
  2155	002462'	064240	000000	/
  2156
  2157	002463'	260040	005243'	DEAER2:	PUSHJ	P,INLMES
  2158	002464'	374000	000000		 ASCIZ	"?"
  2159	002465'	200344	000000		MOVE	T2,DEVNAM(F)	;PRINT PHYSICAL DEVICE NAME
  2160	002466'	200241	777777		MOVE	U,-1(P)		;RESTORE TTY LDB
  2161	002467'	260040	002440*		PUSHJ	P,PRNAME
  2162	002470'	265300	005233'		JSP	T1,ERRMES
  2163	002471'	203574	171734		ASCIZ	/ wasn't assigned
	002472'	237504	060746
	002473'	717234	767312
  2164	002474'	620321	200000	/
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 44
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2165				;REASSIGN MUUO
  2166				;CALL	MOVE AC,JOB NUMBER
  2167				;	MOVE AC+1,SIXBIT /DEVICE/
  2168				;	CALL AC,[SIXBIT /REASSIGN/]
  2169				;IF C(AC)=0, JOB HAS NOT BEEN INITIALIZED
  2170				;IF C(AC+1)=0, DEVICE NOT ASSIGNED TO THIS JOB OR DEVICE IS A TTY
  2171
  2172	002475'	261040	000006	REASSI::PUSH	P,T1		; PUSH JOB #
  2173	002476'	541553	000001		HRRI	M,1(M)
  2174	002477'	256200	005576'		UMOVE	T2,(M)		; GET DEVICE DESCRIPTOR
  2175	002500'	370000	000013		SOS	M
  2176	002501'	326300	002520'		JUMPN	T1,REASS1	; IF JOB#0 THEN REASSIGN TO JOB
  2177								; ELSE, DEASSIGN THE DEVICE
  2178	002502'	260040	000000*		PUSHJ	P,DVCNSG	; LOOKUP DEVICE
  2179	002503'	254000	002632'		 JRST	REASE2		; NOT FOUND
  2180	002504'	260040	005330'		PUSHJ	P,DEASG		; GO DEASSIGN IT
  2181	002505'	254000	002636'		 JRST	REASE3		; NOT ASSIGNED TO THIS JOB
  2182	002506'	263040	000000		POPJ	P,		; ONLY RETURN (SICK)
  2183
  2184				;"REASSIGN DEV:JOB" - REASSIGN DEVICE "DEV" TO JOB "JOB"
  2185
  2186	002507'	260040	005170'	REASS:	PUSHJ	P,CTXDEV	;GET DEVICE NAME
  2187	002510'	322340	005252'		JUMPE	T2,NOTENF	;NULL NAME?
  2188	002511'	200540	000007		MOVE	M,T2		;SAVE IT IN M
  2189	002512'	260040	005360'		PUSHJ	P,DECIN1	;GET NEW JOB NUMBER
  2190	002513'	254000	005252'		 JRST	NOTENF		;NONE SPECIFIED. DOESN'T RETURN IF ERROR
  2191	002514'	254000	005214'		JRST	COMERA		;ILLEGAL CHARACTER
  2192	002515'	261040	000007		PUSH	P,T2		;PUT JOB NUMBER ON STACK, DEVICE
  2193	002516'	200340	000013		MOVE	T2,M		;NAME IN T2
  2194	002517'	402000	000013		SETZM	M			;SET COMMAND SWITCH
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 45
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2195				;ROUTINE COMMON TO REASSIGN UUO AND COMMAND
  2196
  2197	002520'	250101	000000	REASS1:	EXCH	J,(P)		;NEW JOB NO. IN J
  2198	002521'	301100	002005*		CAIL	J,JOBN		;IS JOB NUMBER OUT OF RANGE?
  2199	002522'	254000	002626'		 JRST	REASE1		;YES, DO NOT REASSIGN
  2200	002523'	200302	002242*		MOVE	T1,JBTSTS(J)	;NEW JOB STATUS
  2201	002524'	250101	000000		EXCH	J,(P)		;RESTORE J AND STACK
  2202	002525'	607300	040000		TLNN	T1,JNA		;DOES NEW JOB EXIST?
  2203	002526'	254000	002626'		 JRST	REASE1		;NO.
  2204	002527'	200300	000007		MOVE	T1,T2
  2205	002530'	260040	002502*		PUSHJ	P,DVCNSG	;SEARCH FOR DEV
  2206	002531'	254000	002632'		 JRST	REASE2		;NOT FOUND
  2207	002532'	135300	002332*		LDB	T1,PJOBN
  2208	002533'	312300	000002		CAME	T1,J		;ASSIGNED TO THIS JOB
  2209	002534'	254000	002636'		 JRST	REASE3		;NO
  2210	002535'	205300	010000		MOVSI	T1,LICTDV
  2211	002536'	337000	000013		SKIPG	M		;M NEGATIVE IF FROM CMD
  2212	002537'	201300	010000		 MOVEI	T1,LICTDV
  2213	002540'	612302	002202*		TDNE	T1,JBTLIC(J)
  2214	002541'	254000	002547'		 JRST	REASS5		;HE CAN DO IT
  2215	002542'	200301	000000		MOVE	T1,(P)		;NEW JOB NUMBER
  2216	002543'	200306	001115*		MOVE	T1,JBTAUN(T1)	;SEE WHO IT IS
  2217	002544'	430302	002543*		XOR	T1,JBTAUN(J)
  2218	002545'	603300	777777		TLNE	T1,-1		;IS IT SAME ACCOUNT
  2219	002546'	254000	002640'		 JRST	REASE6		;NO, CAN NOT BE REASSIGNED
  2220	002547'	200304	000004	REASS5:	MOVE	T1,DEVMOD(F)
  2221	002550'	603300	004010		TLNE	T1,DVTTY!DVRMT	;IS IT A TTY?
  2222	002551'	254000	002640'		 JRST	REASE6		;YES. CAN'T BE REASSIGNED.
  2223	002552'	606300	200000		TRNN	T1,ASSPRG	;IS DEVICE INITED?
  2224	002553'	254000	002610'		 JRST	REASS3		;NO.
  2225	002554'	135300	002532*		LDB	T1,PJOBN	;AAA. IF REASSIGN TO OWN JOB,
  2226	002555'	316300	001466*		CAMN	T1,JOB		;SKIP THE RELEASE. AAA
  2227	002556'	254000	002610'		 JRST	REASS3		;AAA JAN 77
  2228	002557'	326540	002574'		JUMPN	M,REASS4	;YES. COMMAND LEVEL?
  2229	002560'	504201	000000		HRL	F,(P)		;YES. SCHEDULE RELEASE
  2230	002561'	260040	002305*		PUSHJ	P,MAPUPS	;SET UP UPS
  2231	002562'	202200	000000*		MOVEM	F,%UPS+UPTXAC+F	;SAVE F IN EXEC ACS
  2232	002563'	262040	000007		POP	P,T2
  2233	002564'	661700	000020		TLO	P3,TTYRNC	;Set TTYRNC so job will run
  2234	002565'	265340	000000*		JSP	T2,MSTART##
  2235	002566'	265300	002075*		JSP	T1,MONSTR##
  2236	002567'	554300	000004		HLRZ	T1,F
  2237	002570'	261040	000006		PUSH	P,T1
  2238	002571'	553000	000004		HRRZS	F
  2239	002572'	200100	002555*		MOVE	J,JOB
  2240	002573'	476000	000013		SETOM	M		;SET FLAG TO STOP JOB
  2241	002574'	550444	000003	REASS4:	HRRZ	T4,DEVSER(F)
  2242	002575'	256200	005577'	XCTBU  <HRRZM	F,JOBFDV>
  2243	002576'	200500	000000*		MOVE	W,%UPT+UPTHCU
  2244					PFALL	REASS2
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 46
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2245
  2246	002577'	200212	000000*	REASS2:	MOVE	F,%UPT+UPTJDA(W)	;GET XWD M BITS,DDB ADDRESS
  2247	002600'	256200	005600'	XCTBU  <HRRZ	T1,JOBFDV>	;GET ADDR. OF DDB SAVED BY COMMAND
  2248	002601'	261040	000012		PUSH	P,W		;SAVE USER CHANNEL
  2249	002602'	306304	000000		CAIN	T1,(F)		;IS CHOSEN DEVICE ON THHS CHANNEL?
  2250	002603'	260040	000000*		 PUSHJ	P,RELEA5	;YES, RELEASE DEVICE
  2251	002604'	262040	000012		POP	P,W
  2252	002605'	365500	002577'		SOJGE	W,REASS2
  2253	002606'	256200	005601'		UMOVE	F,JOBFDV
  2254	002607'	200100	002572*		MOVE	J,JOB		;CURRENT JOB NUMBER
  2255	002610'	201300	400000	REASS3:	MOVEI	T1,ASSCON	;ASSIGN IT BY CONSOLE
  2256	002611'	436304	000004		IORM	T1,DEVMOD(F)
  2257				;*;	;MOVSI	T1,DVDIRIN	;CLEAR DIRECTORY IN CORE BIT
  2258				;*;	;ANDCAM	T1,DEVMOD(F)	;..
  2259				;*;	;EXCH	J,(P)
  2260				;*;	;SETZM	DEVLOG(F)	;ZERO LOGICAL NAME WHEN REASSIGNING
  2261				;AAA. LEAVE DDB ALONE IF DEVICE REASS TO OWN JOB, STILL INITTED
  2262	002612'	205300	400000		MOVSI	T1,DVDIRIN	;DIR IN CORE BIT GETS
  2263	002613'	250304	000004		EXCH	T1,DEVMOD(F)	;CLEARED ONLY IF ASSPRG=0
  2264	002614'	606300	200000		TRNN	T1,ASSPRG	;SKIP IF DEV INITTED (REASS TO ANOTHER JOB)
  2265	002615'	420304	000004		ANDCM	T1,DEVMOD(F)	;TURN OFF DVDIRIN IN T1
  2266	002616'	202304	000004		MOVEM	T1,DEVMOD(F)
  2267	002617'	250101	000000		EXCH	J,(P)
  2268	002620'	606300	200000		TRNN	T1,ASSPRG	;SKIP IF DEV INITTED STILL
  2269	002621'	402004	000005		SETZM	DEVLOG(F)	;ZERO LOGICAL NAME IF REASS TO
  2270								;ANOTHER JOB. OTHERWISE LEAVE
  2271	002622'	137100	002554*		DPB	J,PJOBN		;PUT IN NEW JOB NUMBER
  2272	002623'	262040	000002		POP	P,J
  2273	002624'	321540	001255*		JUMPL	M,ESTOP##
  2274	002625'	263040	000000		POPJ	P,
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 47
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2275	002626'	262040	000006	REASE1:	POP	P,T1
  2276	002627'	322540	003002'		JUMPE	M,ATT4		;JOB NEVER WAS INITIATED
  2277	002630'	256200	005602'	REASE4:XCTBU <SETZM (M)>	;CLEAR C(AC)
  2278	002631'	263040	000000		POPJ	P,
  2279
  2280	002632'	201300	002455'	REASE2:	MOVEI	T1,NOTDEV	;NO SUCH DEVICE
  2281	002633'	262040	000007	REASE5:	POP	P,T2
  2282	002634'	322546	000000		JUMPE	M,(T1)
  2283	002635'	344540	002630'		AOJA	M,REASE4
  2284
  2285	002636'	201300	002463'	REASE3:	MOVEI	T1,DEAER2	;WASN'T ASSIGNED
  2286	002637'	254000	002633'		JRST	REASE5
  2287
  2288	002640'	201300	002642'	REASE6:	MOVEI	T1,REASE7
  2289	002641'	254000	002633'		JRST	REASE5
  2290	002642'	260040	005243'	REASE7:	PUSHJ	P,INLMES
  2291	002643'	374000	000000		 ASCIZ	"?"
  2292	002644'	200344	000000		MOVE	T2,DEVNAM(F)
  2293	002645'	200241	777777		MOVE	U,-1(P)		;RESTORE TTY LDB
  2294	002646'	260040	002467*		PUSHJ	P,PRNAME
  2295	002647'	265300	005233'		JSP	T1,ERRMES
  2296	002650'	203074	167116		 ASCIZ	/ can't be reassigned
	002651'	721014	262500
	002652'	713134	171746
	002653'	647175	662710
  2297	002654'	064240	000000	/
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 48
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2298				;"ATTACH <DEVICE>"    OR
  2299				;"ATTACH <JOB NUMBER>
  2300
  2301				INTERNAL ATT1
  2302				EXTERNAL JOBN,TTYFND,JBTAUN,LICMSK,TTYATT
  2303
  2304	002655'			CHKATT:	; check to see if okay to attach TTY: for job J to job T2
  2305	002655'	250300	000007		EXCH	T1,T2		;free up T2 for LICMSK
  2306	002656'	504346	002540*		HRL	T2,JBTLIC(T1)	;desired license
  2307	002657'	540342	002656*		HRR	T2,JBTLIC(J)	;current license
  2308	002660'	260040	000000*		PUSHJ	P,LICMSK	;compute allowed from desired,,current
  2309	002661'	500346	002657*		HLL	T2,JBTLIC(T1)	;only compare RH
  2310	002662'	312346	002661*		CAME	T2,JBTLIC(T1)	;see if desired license is allowed
  2311	002663'	263040	000000		 POPJ	P,
  2312	002664'	250300	000007		EXCH	T1,T2		;restore target job number to T2
  2313	002665'	201640	001000		MOVEI 	P2,LICJAL
  2314	002666'	632642	002662*		TDZE 	P2,JBTLIC(J)	;JL license allows attach to any user
  2315	002667'	254000	002676'		 JRST 	CHKAT1
  2316	002670'	200642	002544*		MOVE 	P2,JBTAUN(J)
  2317	002671'	430647	002670*		XOR 	P2,JBTAUN(T2)	;check on job he wants to go to
  2318	002672'	201300	020000		MOVEI 	T1,PVACTS	;is he an account supervisor?
  2319	002673'	612302	002213*		TDNE 	T1,JBTPRV(J)
  2320	002674'	620640	777777		 TRZ 	P2,-1		;yes, user number need not match
  2321	002675'	326640	001645*		JUMPN 	P2,CPOPJ	;not okay to do it
  2322	002676'	350001	000000	CHKAT1:	AOS 	(P)		;all okay
  2323	002677'	263040	000000		POPJ 	P,
  2324
  2325	002700'	260040	005360'	ATTACH:	PUSHJ P,DECIN1		;GET JOB NO. IN T2 OR 0 IF NONE TYPED
  2326	002701'	254000	005252'		 JRST NOTENF		;NOT A NUMBER OR NONE SPECIFIEED
  2327	002702'	254000	002723'		 JRST DEVATT		;WANTS TO ATTACH A DEVICE
  2328	002703'	322340	002723'		JUMPE T2,DEVATT		;0 ILLEGAL JOB, SEE IF <DEVICE>
  2329	002704'	301340	002521*		CAIL T2, JOBN		;IS JOB NUMBER TOO BIG?
  2330	002705'	254000	003010'		 JRST ATT1		;ILLEGAL JOB NUMBER
  2331	002706'	205300	040000		MOVSI T1,JNA		;HAS THIS JOB NO BEEN ASSIGNED?
  2332	002707'	616307	002523*		TDNN T1,JBTSTS(T2)
  2333	002710'	254000	003002'		 JRST ATT4		;NO, PRINT ERROR
  2334	002711'	260040	002655'		PUSHJ P,CHKATT		;is attach okay?
  2335	002712'	254000	002764'		 JRST ATT3		;can not attach
  2336	002713'	261040	000002		PUSH P,J
  2337	002714'	200100	000007		MOVE J,T2		;JOB NUMBER TO J
  2338	002715'	260040	000000*		PUSHJ P,TTYATT		;NO, ATTACH TTY
  2339	002716'	254000	002751'		 JRST ATT2A		;ERROR CAN'T ATTACH
  2340	002717'	250101	000000		EXCH J,(P)		;GET OLD JOB #
  2341	002720'	260040	003053'		PUSHJ P,DETMSG		;NO. TYPE MESSAGE
  2342	002721'	262040	000002		POP P,J			;RESTORE J
  2343	002722'	254000	001756*		JRST TTYFND		;ATTACHED. GO SET UP OUTP. BYTE PTR.
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 49
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2344				;DETACH device
  2345	002723'	260040	005170'	DEVATT:	PUSHJ P,CTXDEV		;GET DEVICE ARGUMENT
  2346	002724'	255000	000000		JFCL			;SHOULD NEVER RETURN
  2347	002725'	200302	002666*		MOVE T1,JBTLIC(J)
  2348	002726'	640300	120000		TRC T1,LICGDV!LICOPR
  2349	002727'	642300	120000		TRCE T1,LICGDV!LICOPR	;MUST HAVE OPR AND GET DEV
  2350	002730'	254000	002773'		JRST ATT5		;NO - ERROR
  2351	002731'	200300	000007		MOVE T1,T2		;YES-SET UP DEVICE NAME
  2352	002732'	260040	002450*		PUSHJ P,DEVSRC		;SEARCH FOR DEVICE
  2353	002733'	254000	002455'		JRST DEAER1		;NOT FOUND
  2354	002734'	205300	204010		MOVSI T1,DVDSK!DVTTY!DVRMT	;DO NOT GET THESE
  2355	002735'	612304	000004		TDNE T1,DEVMOD(F)
  2356	002736'	254000	002773'		JRST ATT5
  2357	002737'	135300	002622*		LDB T1,PJOBN		;SEE WHO HAS IT
  2358	002740'	326300	002745'		JUMPN T1,ATDV1		;NOT JOB 0, TRYING TO GET IT BACK
  2359	002741'	201300	200000		MOVEI T1,ASSPRG
  2360	002742'	412304	000004		ANDCAM T1,DEVMOD(F)	;GET IT OUT OF 'INITED STATE'
  2361	002743'	137100	002737*	ATDV2:	DPB J,PJOBN		;AND ASSIGN TO THIS JOB
  2362	002744'	263040	000000		POPJ P,
  2363
  2364	002745'	201300	200000	ATDV1:	MOVEI T1,ASSPRG
  2365	002746'	616304	000004		TDNN T1,DEVMOD(F)
  2366	002747'	254000	002743'		JRST ATDV2		;NOT, INITED, GRAB IT
  2367	002750'	254000	002773'		JRST ATT5		;INITED, CAN NOT GET IT
  2368
  2369	002751'	262040	000002	ATT2A:	POP P,J			;REMOVE JUNK FROM STACK
  2370	002752'	322200	002764'		JUMPE F,ATT3		;NO DDB IN F, USE DIFF MSG
  2371	002753'	260040	005243'		PUSHJ P,INLMES
  2372	002754'	374000	000000		 ASCIZ "?"
  2373	002755'	200344	000000		MOVE T2,DEVNAM(F)	;PRINT PHYSICAL NAME
  2374	002756'	260040	002646*		PUSHJ P,PRNAME
  2375	002757'	265300	005233'		JSP T1,ERRMES
  2376	002760'	203035	471312		 ASCIZ " already attached
	002761'	607117	120302
	002762'	723514	161720
  2377	002763'	627101	505000	"
  2378
  2379	002764'	265300	005233'	ATT3:	JSP T1,ERRMES
  2380	002765'	377535	660704		 ASCIZ "?unable to attach to frame
	002766'	663124	072336
	002767'	203036	472302
	002770'	617204	072336
	002771'	203156	260732
  2381	002772'	624321	200000	"
  2382
  2383	002773'	265300	005233'	ATT5:	JSP T1,ERRMES
  2384	002774'	377535	660704		 ASCIZ "?unable to attach device
	002775'	663124	072336
	002776'	203036	472302
	002777'	617204	062312
	003000'	733234	362432
  2385	003001'	050000	000000	"
  2386
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 49-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2387	003002'	265300	005233'	ATT4:	JSP T1,ERRMES
  2388	003003'	377156	260732		 ASCIZ "?frame not assigned
	003004'	625015	667750
	003005'	203036	371722
	003006'	637354	562032
  2389	003007'	050000	000000	"
  2390
  2391	003010'	265300	005233'	ATT1:	JSP T1,ERRMES
  2392	003011'	377235	466312		 ASCIZ "?illegal frame number
	003012'	637035	420314
	003013'	713035	562500
	003014'	673535	561312
  2393	003015'	710321	200000	"
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 50
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2394				;"DETACH" - DETACH CONSOLE FROM JOB
  2395				;"DETACH DEVNAM" - DETACHES DEVICE FROM THE SYSTEM SOFTWAREWISE
  2396
  2397				EXTERNAL LDBDDB
  2398
  2399	003016'	260040	005170'	DETACH: PUSHJ P,CTXDEV		;GET ARGUMENT
  2400	003017'	322340	003047'		JUMPE T2,DETAC1		;ONLY "DET" TYPED
  2401	003020'	200302	002725*		MOVE T1,JBTLIC(J)
  2402	003021'	640300	120000		TRC T1,LICGDV!LICOPR
  2403	003022'	642300	120000		TRCE T1,LICGDV!LICOPR	;MUST HAVE BOTH
  2404	003023'	254000	003060'		 JRST LOGER1		;NO-PRINT ERROR MSG.
  2405	003024'	200300	000007		MOVE T1,T2		;YES-SET UP DEVICE NAME
  2406	003025'	260040	002732*		PUSHJ P,DEVSRC	;SEARCH FOR DEVICE
  2407	003026'	254000	002455'		 JRST DEAER1		;DEVICE NOT FOUND
  2408	003027'	200304	000004		MOVE T1,DEVMOD(F)	;CHECK TO SEE IF THIS IS DSK
  2409	003030'	603300	200010		TLNE T1,DVDSK!DVTTY		;IS IT THE DSK?
  2410	003031'	254000	002455'		 JRST DEAER1		;YES-PRINT ERROR MSG.
  2411	003032'	200241	777777		MOVE U,-1(P)		;RESTORE U FOR ASSER2 AND LOGER1
  2412	003033'	201340	400000		MOVEI T2,ASSCON		;FOUND-SET UP ASSIGNED BY CONSOLE
  2413	003034'	260040	002373*		PUSHJ P,ASSASG		;TRY TO ASSIGN
  2414	003035'	254000	002404'		 JRST ASSER2		;CAN'T ASSIGN
  2415	003036'	603200	000100		TLNE F,SYSDEV		;IS THIS SYSTEM DEVICE?
  2416	003037'	254000	002455'		 JRST DEAER1		;YES-PRINT ERROR MSG.
  2417	003040'	201300	200000		MOVEI T1,ASSPRG
  2418	003041'	612304	000004		TDNE T1,DEVMOD(F)	;ALREADY ASSIGNED BY PROGRAM?
  2419	003042'	254000	003060'		 JRST LOGER1		;YES, CAN NOT DETACH
  2420	003043'	436304	000004		IORM T1,DEVMOD(F)	;NO, SET BIT
  2421	003044'	137300	002743*		DPB T1,PJOBN		;SET JOB NUMBER TO 0
  2422	003045'	260040	005234'		PUSHJ P,CRLF
  2423	003046'	324740	005260'		PJRST PRPRMT		;SUCCESS: PRINT A PROMPT
  2424
  2425	003047'	550205	000356*	DETAC1:	HRRZ F,LDBDDB(U)	;IS THERE A JOB ATTACHED?
  2426	003050'	322200	005234'		PJUMPE F,CRLF		;IF NONE, DONE NOW
  2427	003051'	260040	003053'		PUSHJ P,DETMSG
  2428	003052'	254000	000000*		JRST TTYDET##		;YES. GO DETACH IT FROM U
  2429
  2430	003053'	260040	005243'	DETMSG:	PUSHJ P,INLMES		;TELL USER WHERE HE WAS
  2431	003054'	633455	766500		 ASCIZ "from frame "
	003055'	633454	166712
	003056'	200000	000000
  2432	003057'	324740	001132'		PJRST PJOB
  2433
  2434	003060'	265300	005233'	LOGER1:	JSP T1,ERRMES
  2435	003061'	377535	660704		 ASCIZ "?unable to detach device
	003062'	663124	072336
	003063'	203114	572302
	003064'	617204	062312
	003065'	733234	362432
  2436	003066'	050000	000000	"
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 51
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2437				;"DAYTIME" - PRINT TIME OF DAY
  2438
  2439				EXTERNAL MONTAB,JFYMIN,COMTMS,JFYHR,GETGMT,DATCOM,DSTCHK,PVYTIM
  2440
  2441	003067'	260040	005360'	SETTIM:	PUSHJ P,DECIN1	;FROM SET TIME COMMAND
  2442	003070'	254000	005214'		JRST COMERA		;NO ARG, ERROR
  2443	003071'	254000	005214'		JRST COMERA		;ERROR
  2444	003072'	201300	100000		MOVEI T1,LICOPR	;IS IT OPER
  2445	003073'	616302	003020*		TDNN T1,JBTLIC(J)
  2446	003074'	254000	005214'		JRST COMERA		;NO OPR LIC, ERROR
  2447	003075'	200300	000007		MOVE T1,T2		;YES, RESET TIME ACCORDING TO ARGUMENT
  2448	003076'	231300	000144		IDIVI T1,^D100
  2449	003077'	221300	000074		IMULI T1,^D60		;
  2450	003100'	270300	000007		ADD T1,T2		;COMPUTE MINUTES
  2451	003101'	260040	000000*		PUSHJ P,COMTMS
  2452	003102'	254000	005215'		 JRST COMERR
  2453	003103'	263040	000000		POPJ P,
  2454
  2455	003104'	266250	147132	DAMESS:	ASCIZ	/-JAN-/
	003105'	000000	000000
  2456
  2457	003106'	544000	000000	STZONE:	ASCIZ	/Y/	;  4
  2458	003107'	412472	400000		ASCIZ	/BST/	;  5 BERING STANDARD TIME
  2459	003110'	442472	400000		ASCIZ	/HST/	;  6 HAWAII-ALASKA STANDARD TIME
  2460	003111'	546472	400000		ASCIZ	/YST/	;  7 YUKON STANDARD TIME
  2461	003112'	502472	400000		ASCIZ	/PST/	; 10 PACIFIC STANDARD TIME
  2462	003113'	466472	400000		ASCIZ	/MST/	; 11 MOUNTAIN STANDARD TIME
  2463	003114'	416472	400000		ASCIZ	/CST/	; 12 CENTRAL STANDARD TIME
  2464	003115'	426472	400000		ASCIZ	/EST/	; 13 EASTERN STANDARD TIME
  2465	003116'	406472	400000		ASCIZ	/AST/	; 14 ATLANTIC STANDARD TIME
  2466	003117'	500000	000000		ASCIZ	/P/	; 15
  2467	003120'	474000	000000		ASCIZ	/O/	; 16
  2468	003121'	470000	000000		ASCIZ	/N/	; 17
  2469	003122'	436332	400000		ASCIZ	/GMT/	; 20 GREENWICH MEAN TIME (Western European)
  2470	003123'	416132	400000		ASCIZ	/CET/	; 21 CENTRAL EUROPEAN TIME
  2471	003124'	426132	400000		ASCIZ	/EET/	; 22 EASTERN EUROPEAN TIME
  2472	003125'	414000	000000		ASCIZ	/C/	; 23
  2473	003126'	420000	000000		ASCIZ	/D/	; 24
  2474	003127'	424000	000000		ASCIZ	/E/	; 25
  2475	003130'	430000	000000		ASCIZ	/F/	; 26
  2476	003131'	434000	000000		ASCIZ	/G/	; 27
  2477	003132'	440000	000000		ASCIZ	/H/	; 30
  2478	003133'	452472	400000		ASCIZ	/JST/	; 31 TOKYO
  2479	003134'	454000	000000		ASCIZ	/K/	; 32 BRISBANE
  2480	003135'	460000	000000		ASCIZ	/L/	; 33
  2481	003136'	464000	000000		ASCIZ	/M/	; 34
  2482
  2483	003137'	545005	300000	DSZONE:	ASCIZ	/Y +/	; 44
  2484	003140'	412112	400000		ASCIZ	/BDT/	; 45 BERING DAYLIGHT TIME
  2485	003141'	442112	400000		ASCIZ	/HDT/	; 46 HAWAII-ALASKA DAYLIGHT TIME
  2486	003142'	546112	400000		ASCIZ	/YDT/	; 47 YUKON DAYLIGHT TIME
  2487	003143'	502112	400000		ASCIZ	/PDT/	; 50 PACIFIC DAYLIGHT TIME
  2488	003144'	466112	400000		ASCIZ	/MDT/	; 51 MOUNTAIN DAYLIGHT TIME
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 51-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2489	003145'	416112	400000		ASCIZ	/CDT/	; 52 CENTRAL DAYLIGHT TIME
  2490	003146'	426112	400000		ASCIZ	/EDT/	; 53 EASTERN DAYLIGHT TIME
  2491	003147'	406112	400000		ASCIZ	/ADT/	; 54 ATLANTIC DAYLIGHT TIME
  2492	003150'	501005	300000		ASCIZ	/P +/	; 55
  2493	003151'	475005	300000		ASCIZ	/O +/	; 56
  2494	003152'	471005	300000		ASCIZ	/N +/	; 57
  2495	003153'	536132	352000		ASCIZ	/WEST/	; 60 WESTERN EUROPEAN SUMMER TIME
  2496	003154'	416132	352000		ASCIZ	/CEST/	; 61 CENTRAL EUROPEAN SUMMER TIME
  2497	003155'	426132	352000		ASCIZ	/EEST/	; 62 EASTERN EUROPEAN SUMMER TIME
  2498	003156'	415005	300000		ASCIZ	/C +/	; 63
  2499	003157'	421005	300000		ASCIZ	/D +/	; 64
  2500	003160'	425005	300000		ASCIZ	/E +/	; 65
  2501	003161'	431005	300000		ASCIZ	/F +/	; 66
  2502	003162'	435005	300000		ASCIZ	/G +/	; 67
  2503	003163'	441005	300000		ASCIZ	/H +/	; 70
  2504	003164'	452472	425400		ASCIZ	/JST+/	; 71 TOKYO + DAYLIGHT  (Not normally used)
  2505	003165'	455005	300000		ASCIZ	/K +/	; 72 BRISBANE + DAYLIGHT
  2506	003166'	461005	300000		ASCIZ	/L +/	; 73
  2507	003167'	465005	300000		ASCIZ	/M +/	; 74
  2508
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 52
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2509				;DAYTIME command
  2510	003170'	260040	000000*	DAYTIM::PUSHJ	P,GETGMT	; GET T1=TIME T2=DATE (GMT)
  2511	003171'	205740	400020		MOVSI	P4,400020	; SET DEFAULT OF TYM-GMT TO DEC-CURRENT
  2512	003172'	135440	000000*		LDB	T4,PVYTIM	; GET OUR CURRENT TIME ZONE
  2513	003173'	606440	000040		TRNN	T4,40		; DAYLIGHT SAVINGS EFFECTIVE FOR ME?
  2514	003174'	254000	003203'		 JRST	DAYTI0		; NO! DON'T BOTHER, ONLY CONVERT ONCE
  2515	003175'	200740	005603'		MOVE P4,[400020,,400000]; CONVERT FROM TYMSHARE GMT
  2516	003176'	260040	000000*		PUSHJ	P,DATCOM	;    TO TYMSHARE CURRENT USER
  2517	003177'	255000	000000		  JFCL			;Date not set yet
  2518	003200'	261040	000007		PUSH	P,T2		;SAVE DATE (TYM-FORMAT) AND
  2519	003201'	261040	000006		PUSH	P,T1		;SAVE TIME (TYM-FORMAT) FOR DST CHECK
  2520	003202'	205740	400000		MOVSI	P4,400000	; CONVERT FROM TYMSHARE CURRENT
  2521	003203'	260040	003176*	DAYTI0:	PUSHJ	P,DATCOM	;    TO DEC CURRENT
  2522	003204'	621340	400000		  TLZ	T2,400000	;Date not set yet
  2523	003205'	261040	000006		PUSH	P,T1		;SAVE TIME
  2524	003206'	200300	000007		MOVE	T1,T2
  2525	003207'	231300	000037		IDIVI	T1,^D31
  2526	003210'	250300	000007		EXCH	T1,T2		;YEAR AND MONTH IN T2
  2527	003211'	260040	005520'		PUSHJ	P,DECP1		;ADD 1 TO DAY(IN T1) AND PRINT DECIMAL
  2528	003212'	201300	000000		MOVEI	T1,0
  2529	003213'	235300	000014		DIVI	T1,^D12
  2530	003214'	250300	000007		EXCH	T1,T2
  2531	003215'	200306	000000*		MOVE	T1,MONTAB(T1)	;MONTH
  2532	003216'	137300	005604'		DPB	T1,[POINT 21,DAMESS,27]
  2533	003217'	201300	003104'		MOVEI	T1,DAMESS
  2534	003220'	260040	005235'		PUSHJ	P,CONMES	;PRINT DAY
  2535	003221'	201307	003654		MOVEI	T1,^D1964(T2)
  2536	003222'	260040	005507'		PUSHJ	P,PRTDEC	;PRINT YEAR
  2537	003223'	260040	005250'		PUSHJ	P,PRSPC
  2538	003224'	262040	000006		POP	P,T1		;RESTORE DAYTIME
  2539	003225'	621300	400000		TLZ	T1,400000	;Sign bit set if DATE ok but TIME is not
  2540	003226'	260040	005447'		PUSHJ	P,PRTIME	;PRINT TIME AS HH:MM:SS
  2541	003227'	260040	005250'		PUSHJ	P,PRSPC		;PRINT A SPACE
  2542	003230'	135440	003172*		LDB	T4,PVYTIM	;GET OUR CURRENT TIME ZONE
  2543	003231'	606440	000040		TRNN	T4,40		;DAYLIGHT SAVINGS EFFECTIVE FOR ME?
  2544	003232'	254000	003242'		 JRST	DAYTI1		;NO! DON'T BOTHER WITH CHECKING. (STACK OK!)
  2545	003233'	262040	000006		POP	P,T1		;YES! RESTORE TIME (STACK HAS 2 ITEMS ON IT)
  2546	003234'	230300	000000*		IDIV	T1,JFYHR	;DIVIDE TO GET HOURS
  2547	003235'	262040	000007		POP	P,T2		;RESTORE DATE SINCE JAN 1 1964 (STACK OK)
  2548	003236'	221340	000030		IMULI	T2,^D24		;MULTIPLY TO MAKE HOURS
  2549	003237'	270300	000007		ADD	T1,T2		;ADD TO GET HOURS SINCE JAN 1 1964
  2550	003240'	260040	000000*		PUSHJ	P,DSTCHK	;DO WE FALL WITHIN DAYLIGHT SAVINGS?
  2551	003241'	634400	000010		  TDZA	T3,T3		;YES--CLEAR FLAG
  2552	003242'	474400	000000	DAYTI1:	SETO	T3,		;NO---SET FLAG
  2553	003243'	620440	000040		TRZ	T4,40		; T4 STILL OK, CLEAR DST IF WAS ON
  2554	003244'	201311	003102'		MOVEI	T1,STZONE-4(T4)	;GET ASCIZ STRING TO TYPE
  2555	003245'	336000	000010		SKIPN	T3		; SKIP IF WE'RE OK
  2556	003246'	201311	003133'		 MOVEI	T1,DSZONE-4(T4)	;  ELSE USE DAYLIGHT STRING
  2557	003247'	337000	000000*		SKIPG	THSDAT##	;If date is not valid
  2558	003250'	201300	005605'		 MOVEI	T1,[ASCIZ / Date not set!/]
  2559	003251'	260040	005235'		PUSHJ	P,CONMES	; TYPE IT.
  2560	003252'	336000	000000*		SKIPN	KSYS##		;Is the KSYS timer set?
  2561	003253'	254000	003262'		 JRST	DAYTI2		;No
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 52-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2562	003254'	201300	005610'		MOVEI	T1,[ASCIZ / Timesharing ceases in /]
  2563	003255'	260040	005235'		PUSHJ	P,CONMES
  2564	003256'	200300	003252*		MOVE	T1,KSYS		;Minutes left
  2565	003257'	260040	005507'		PUSHJ	P,PRTDEC
  2566	003260'	201300	005615'		MOVEI	T1,[ASCIZ / minutes/]
  2567	003261'	260040	005235'		PUSHJ	P,CONMES
  2568	003262'	324740	005234'	DAYTI2:	PJRST	CRLF		;AND ADD CRLF
  2569
  2570				;Type date and time on OPR terminal
  2571
  2572	003263'	201300	000002	OPRDTM::MOVEI	T1,2		;Output to CTY and OPR lines
  2573	003264'	260040	000000*		PUSHJ	P,OPROUT##	;Call co-routine to change COMTOA
  2574	003265'	260040	005243'		PUSHJ	P,INLMES
  2575					 ASCIZ \
  2576	003266'	064250	460750	Date/time is now \
	003267'	625376	464732
	003270'	625015	171500
	003271'	673376	720000
  2577	003272'	260040	003307'		PUSHJ	P,LOCTIM	;Output time
  2578	003273'	200300	000000*		MOVE	T1,LOCWEK##	;Day of week
  2579	003274'	260040	005235'		PUSHJ	P,CONMES
  2580	003275'	260040	005234'		PUSHJ	P,CRLF
  2581	003276'	200300	000000*		MOVE	T1,STATES##
  2582	003277'	606300	400000		TRNN	T1,400000	;Is the system shut?
  2583	003300'	263040	000000		 POPJ	P,		;Restore COMTOA and return
  2584	003301'	265300	005235'		PJSP	T1,CONMES	;Yes, output message and POPJ
  2585	003302'	265325	520246		 ASCIZ	 \--- System is SHUT ---
	003303'	747476	462732
	003304'	203236	320246
	003305'	442532	420132
  2586	003306'	265321	505000	\
  2587
  2588				;Output local date and time, with trailing blank, no CRLF (for timestamps)
  2589
  2590	003307'	201300	005617'	LOCTIM::MOVEI	T1,[ASCIZ /(date unknown) /]
  2591	003310'	337000	000000*		SKIPG	LOCDAY##	;No date if LOCDAY not set
  2592	003311'	324740	005235'		 PJRST	CONMES
  2593	003312'	200300	003310*		MOVE	T1,LOCDAY##	;Get day of month
  2594	003313'	260040	005502'		PUSHJ	P,PRT2		;Output 2 digits
  2595	003314'	200300	000000*		MOVE	T1,LOCMON##	;Get month (1..12)
  2596	003315'	200306	777777*		MOVE	T1,MONTAB##-1(T1) ;3 char name, right justified
  2597	003316'	660300	010040		TRO	T1,10040	;Make last 2 characters lowercase
  2598	003317'	137300	005604'		DPB	T1,[POINT 21,DAMESS,27]
  2599	003320'	201300	003104'		MOVEI	T1,DAMESS
  2600	003321'	260040	005235'		PUSHJ	P,CONMES	;Output month as "-Jan-"
  2601	003322'	200300	000000*		MOVE	T1,LOCYER##
  2602	003323'	260040	005507'		PUSHJ	P,PRTDEC	;Output 4 digit year
  2603	003324'	260040	005250'		PUSHJ	P,PRSPC		;Space
  2604	003325'	200300	000000*		MOVE	T1,LOCHOR##
  2605	003326'	260040	005502'		PUSHJ	P,PRT2		;Hours
  2606	003327'	260040	005445'		PUSHJ	P,PRCOL		;Colon
  2607	003330'	200300	000000*		MOVE	T1,LOCMIN##	;Minutes
  2608	003331'	260040	005502'		PUSHJ	P,PRT2
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 52-3
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2609	003332'	260040	005445'		PUSHJ	P,PRCOL
  2610	003333'	200300	000000*		MOVE	T1,LOCSEC##	;Seconds
  2611	003334'	260040	005502'		PUSHJ	P,PRT2		;End with a space in case called for timestamp
  2612	003335'	324740	005250'		PJRST	PRSPC		;End of LOCTIM
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 53
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2613				;"TIME (JOB NO.)" - PRINT TOTAL AND INCREMENTAL RUNNING TIME FOR A JOB
  2614				;FOLLOWED BY KILO-CORE TICKS
  2615				;"TIME 0" IMPLIES RUNTIME FOR NULL JOB
  2616				;	IF NO JOB NO. GIVEN-TIME WILL BE FOR CURRENTLY LOGGEN IN JOB NO.
  2617
  2618				EXTERNAL RTIME,CHKSGJ
  2619
  2620	003336'	260040	005360'	RUNTIM:	PUSHJ	P,DECIN1	;GET JOB NO. ARG
  2621	003337'	254000	003355'		 JRST	RUN1		;NO ARG
  2622	003340'	254000	005214'		 JRST	COMERA		;BAD ARG
  2623	003341'	301340	002704*		CAIL	T2,JOBN		;IS IT OK?
  2624	003342'	254000	003010'		 JRST	ATT1		;NO
  2625	003343'	250100	000007		EXCH	J,T2		;SET J
  2626	003344'	261040	000007		PUSH	P,T2		;SAVE JOB NUMBER
  2627	003345'	260040	001063*		PUSHJ	P,CHKSGJ	;SEE IF HE CAN HAVE THAT INFO
  2628					  JRST	[POP	P,J	;No
  2629	003346'	254000	005544'			 JRST	COMERA]
  2630	003347'	260040	003404'		PUSHJ	P,RUNT2		;GET TIME SET UP
  2631	003350'	262040	000006		POP	P,T1		;GET TRU'S
  2632	003351'	262040	000007		POP	P,T2
  2633	003352'	260040	003370'		PUSHJ	P,PRTTM1	;SKIP PRINTING INCREMENTAL
  2634	003353'	262040	000002		POP	P,J		;GET J BACK SO NO ERROR ON TIME 0
  2635	003354'	263040	000000		POPJ	P,
  2636
  2637	003355'	260040	003404'	RUN1:	PUSHJ	P,RUNT2
  2638	003356'	200301	000000		MOVE	T1,(P)		;THIS IS WHEREE TRU'S END UP
  2639	003357'	250302	001711*		EXCH	T1,RTIME(J)
  2640	003360'	274302	003357*		SUB	T1,RTIME(J)
  2641	003361'	213000	000006		MOVNS	T1
  2642	003362'	260040	003411'		PUSHJ	P,PRTDC1
  2643	003363'	260040	005243'		PUSHJ	P,INLMES
  2644	003364'	202512	252432		 ASCIZ	/ TRU
  2645	003365'	050000	000000	/
  2646	003366'	262040	000006		POP	P,T1
  2647	003367'	262040	000007		POP	P,T2
  2648	003370'	260040	003412'	PRTTM1:	PUSHJ	P,PRTDC2
  2649	003371'	260040	005243'		PUSHJ	P,INLMES
  2650	003372'	202512	252432		 ASCIZ	/ TRU
  2651	003373'	050000	000000	/
  2652	003374'	260040	005243'		PUSHJ	P,INLMES
  2653	003375'	723136	266722		ASCIZ	/terminal time: /
	003376'	673035	420350
	003377'	647334	535100
	003400'	000000	000000
  2654	003401'	200302	000000*		MOVE	T1,JBTCNK(J)
  2655	003402'	220300	000000*		IMUL	T1,JFYSEC	; MAKE PRINTER WORK RIGHT
  2656	003403'	324740	005450'		PJRST	PRTIM		; ROUTINE IS AT END OF COMCON
  2657
  2658	003404'	260040	001706*	RUNT2:	PUSHJ	P,TIMADJ
  2659	003405'	260040	001707*		PUSHJ	P,CLKTRU
  2660	003406'	250341	000000		EXCH	T2,(P)
  2661	003407'	261040	000006		PUSH	P,T1
  2662	003410'	254007	000000		JRST	(T2)
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 53-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2663
  2664	003411'	201340	000000	PRTDC1:	MOVEI	T2,0
  2665	003412'	250300	000007	PRTDC2:	EXCH	T1,T2
  2666	003413'	235300	023420		DIVI	T1,^D10000
  2667	003414'	261040	000007		PUSH	P,T2
  2668	003415'	260040	005507'		PUSHJ	P,PRTDEC
  2669	003416'	260040	005326'		PUSHJ	P,PRPER		;Period
  2670	003417'	262040	000006		POP	P,T1
  2671	003420'	231300	000144		IDIVI	T1,^D100
  2672	003421'	324740	005502'		PJRST	PRT2		;Output 2 digits
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 54
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2673				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  2674				;;								;;
  2675				;;	USESTA - Routine to process the .USESTAT command	;;
  2676				;;								;;
  2677				;;	Types a string on the command port terminal in the	;;
  2678				;;	following format -					;;
  2679				;;								;;
  2680				;;"elapsed:HH:MM:SS tru:d.dd blks in:xx out:yy mws:qq NAME st PC;;
  2681				;;								;;
  2682				;;	The display elements are elapsed time since the last	;;
  2683				;;	.USESTAT command in hours, minutes, and seconds; cpu	;;
  2684				;;	time (microcycles) in minutes, seconds, and jiffies;	;;
  2685				;;	disk blocks read; disk blocks written; the current	;;
  2686				;;	state of the calling job; and the current monitor	;;
  2687				;;	working set size.					;;
  2688				;;								;;
  2689				;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  2690
  2691	003422'	260040	005243'	USESTA:	PUSHJ	P,INLMES	;Preliminary type-out
  2692	003423'	627314	170346		 ASCIZ	/elapsed:/
	003424'	627107	200000
  2693	003425'	200302	003401*		MOVE	T1,JBTCNK(J)	;Connect time
  2694	003426'	250302	000000*		EXCH	T1,JBTSTA##(J)	;Previous (saved) connect time
  2695	003427'	274302	003426*		SUB	T1,JBTSTA(J)	;Negative difference
  2696	003430'	213000	000006		MOVNS	T1		;Positive difference
  2697	003431'	221300	000074		IMULI	T1,^D60		;Convert to jiffies for type-out routine
  2698	003432'	260040	005447'		PUSHJ	P,PRTIME	;Type out time (no CR-LF)
  2699	003433'	260040	005243'		PUSHJ	P,INLMES
  2700	003434'	203516	272564		 ASCIZ	/ tru:/
	003435'	000000	000000
  2701	003436'	260040	001706'		PUSHJ	P,PRTWRN	;Type out incremental TRU's
  2702	003437'	260040	005243'		PUSHJ	P,INLMES
  2703	003440'	203055	465746		 ASCIZ	/ blks in:/
	003441'	203235	635000
  2704	003442'	260040	001704*		PUSHJ	P,PRTWDR
  2705	003443'	260040	005243'		PUSHJ	P,INLMES
  2706	003444'	203376	572164		 ASCIZ	/ out:/
	003445'	000000	000000
  2707	003446'	260040	001705*		PUSHJ	P,PRTWDW
  2708	003447'	260040	005250'		PUSHJ	P,PRSPC
  2709	003450'	260040	005243'		PUSHJ	P,INLMES
  2710	003451'	203336	771564		 ASCIZ	/ mws:/
	003452'	000000	000000
  2711	003453'	135300	000000*		LDB	T1,JBYMWS##
  2712	003454'	260040	005507'		PUSHJ	P,PRTDEC
  2713	003455'	260040	005250'		PUSHJ	P,PRSPC
  2714	003456'	200342	002311*		MOVE	T2,JBTNAM(J)	;Program name
  2715	003457'	260040	002756*		PUSHJ	P,PRNAME
  2716	003460'	260040	005250'		PUSHJ	P,PRSPC
  2717	003461'	135340	001437*		LDB	T2,PJBSTS	;Wait state code from JBTSTS
  2718	003462'	231340	000003		IDIVI	T2,3		;Make index into STSTBL, which has
  2719	003463'	200347	000000*		MOVE	T2,STSTBL##(T2)	;3 2-SIXBIT-char entries per word
  2720	003464'	221400	000014		IMULI	T3,^D12		;Has 0,1, or 2 remainder from divide
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 54-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2721	003465'	242350	000000		LSH	T2,(T3)		;Get proper code to high-order T2
  2722	003466'	331002	002707*		SKIPL	JBTSTS(J)	;Is the run bit on?
  2723	003467'	205340	764300		 MOVSI	T2,'^C '	;If not, indicate special case
  2724	003470'	245340	000006		ROTC	T2,6		;Get first SIXBIT char into low-order T3
  2725	003471'	271400	000040		ADDI	T3,40		;Convert to ASCII
  2726	003472'	260040	001661*		PUSHJ	P,COMTYO##	;Type one character
  2727	003473'	201400	000000		MOVEI	T3,0		;Clear out previous char
  2728	003474'	245340	000006		ROTC	T2,6		;Second SIXBIT character
  2729	003475'	271400	000040		ADDI	T3,40
  2730	003476'	260040	003472*		PUSHJ	P,COMTYO##
  2731	003477'	201400	000052		MOVEI	T3,"*"		;In case we are currently running
  2732	003500'	316100	002607*		CAMN	J,JOB		;Are we the current job?
  2733	003501'	260040	003476*		 PUSHJ	P,COMTYO	;Yes, say so
  2734	003502'	260040	005243'		PUSHJ	P,INLMES
  2735	003503'	203414	335000		 ASCIZ	/ pc:/
  2736	003504'	550302	000000*		HRRZ	T1,JBTPC##(J)
  2737	003505'	260040	000000*		PUSHJ	P,OCTPNT	;6 octal digits
  2738	003506'	554202	003504*		HLRZ	F,JBTPC##(J)
  2739	003507'	322200	003747'		JUMPE	F,SNDEOL	;Not in I/O wait
  2740	003510'	260040	005243'		PUSHJ	P,INLMES
  2741					 ASCIZ \
  2742	003511'	064251	127636	I/O wait for \
	003512'	203574	164750
	003513'	203155	771100
	003514'	000000	000000
  2743	003515'	260040	001567'		PUSHJ	P,PRTDDB
  2744	003516'	324740	003747'		PJRST	SNDEOL		;Output "." if necessary
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 55
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2745				;ROUTINE TO SEND A LINE OF INFORMATION TO ANOTHER TTY, OR
  2746				; TO BROADCAST IT TO ALL TTY'S
  2747
  2748	003517'	261040	000014	SEND:	PUSH	P,P1 		;WE MIGHT NEED 2 MORE REGISTERS
  2749	003520'	261040	000000		PUSH	P,S		;SAVE THE CONTENTS OF R AND S
  2750	003521'	400000	000000		SETZ	S		;SET FLAG TO ZERO
  2751	003522'	260040	005170'		PUSHJ	P,CTXDEV	;GET ARGUMENT DEVICE OF SEND
  2752					JUMPE	T2,[POP P,S
  2753				                    POP P,P1
  2754	003523'	322340	005623'	                    JRST NOTENF];MUST BE ONE
  2755	003524'	204300	000007		MOVS	T1,T2		;GET IT SWAPPED FOR COMPARES
  2756	003525'	306300	525742		CAIN	T1,'JOB'	;PARTICULAR JOB NUMBER?
  2757	003526'	254000	003600'		 JRST	SENDJ		;YES. GO FIND IT
  2758	003527'	306300	415454		CAIN	T1,'ALL'	;BROADCAST TO ALL TTY'S?
  2759	003530'	254000	003627'		 JRST	SENDA		;YES.
  2760	003531'	306300	436471		CAIN	T1,'CTY'	;Send to the CTY?
  2761	003532'	254000	003576'		 JRST	SENDC
  2762	003533'	306300	474156		CAIN	T1,'GAN'	;BROADCAST ONLY TO SENDER'S GAN?
  2763	003534'	254000	003677'		 JRST	SNDGAN		;YES
  2764	003535'	261040	000005		PUSH	P,U		;SAVE U ADDRESS OF SENDER
  2765	003536'	200300	000007		MOVE	T1,T2		;GET DEVICE NAME TO SEARCH FOR
  2766	003537'	260040	000000*		PUSHJ	P,TTYPHY##	;SEE IF IT'S A TTY
  2767	003540'	254000	003617'		  JRST	SENDF		;NO. FAILURE.
  2768	003541'	331005	000000*	SENDT:	SKIPL	LDBLOG(U)
  2769	003542'	254000	003567'		 JRST	SNDBSY		;CHECK FOR LOGGED IN
  2770	003543'	550301	000000		HRRZ	T1,0(P)		;SEE IF EITHER GUY IS THE OPR
  2771	003544'	312240	000000*		CAME	U,OPRLDB##	; ..
  2772	003545'	316300	003544*		CAMN	T1,OPRLDB##	; ..
  2773	003546'	254000	003555'		 JRST	SENDT1		;YES. DONT BUSY CHECK
  2774	003547'	200305	000000*		MOVE	T1,LDBDCH(U)	;NO. SEE IF DEST IS AT COMMAND LEVEL
  2775	003550'	603300	000000*		TLNE	T1,LDLCOM##	; ..
  2776	003551'	254000	003555'		 JRST	SENDT1
  2777	003552'	201300	100000		MOVEI	T1,LICOPR
  2778	003553'	616302	003073*		TDNN	T1,JBTLIC(J)
  2779	003554'	254000	003567'		 JRST	SNDBSY		;NOT BUSY IF FROM OPR LICENSE JOB
  2780	003555'			SENDT1:				;OK CAN SEND TO HIM
  2781	003555'	260040	003731'		PUSHJ	P,SENDHD	;SEND HEADER (CRLF, SEMI, TTY NAME)
  2782					PFALL	SEND1
  2783				;Continued on next page
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 56
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2784				;Fall through from above
  2785
  2786	003556'	260040	003721'	SEND1:	PUSHJ	P,SNDTYI	;GET CHARACTER TO SEND OUT
  2787	003557'	254000	003562'		 JRST	SEND2		;END OF LINE
  2788	003560'	260040	003501*		PUSHJ	P,COMTYO	;SEND IT (DEST IN U)
  2789	003561'	326400	003556'		JUMPN	T3,SEND1	;LOOP FOR MORE
  2790
  2791	003562'	260040	003747'	SEND2:	PUSHJ	P,SNDEOL	;SEND CRLF, MAYBE DOT TO DEST
  2792	003563'	262040	000005	SENDX:	POP	P,U		;RESTORE STACK, GET SENDER LDB
  2793	003564'	262040	000000		POP	P,S
  2794	003565'	262040	000014		POP	P,P1
  2795	003566'	263040	000000		POPJ	P,		;AND RETURN FROM SEND COMMAND
  2796
  2797	003567'	262040	000005	SNDBSY:	POP	P,U		;RESTORE TALKERS LDB ADDR
  2798	003570'	262040	000000		POP	P,S		;RESTORE STACK
  2799	003571'	262040	000014		POP	P,P1
  2800	003572'	265300	005233'	SNDBSI:	JSP	T1,ERRMES	;TYPE ERROR AND RETURN
  2801	003573'	376512	454500		 ASCIZ /?TTY is busy
	003574'	647464	061352
  2802	003575'	717621	505000	/
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 57
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2803				;MORE OF SEND COMMAND
  2804
  2805				EXTERNAL TTYTAB,DDBLDB,LDPLNO,LINTAB,MXLIN
  2806
  2807	003576'	201240	000000*	SENDC:	MOVEI	U,CTYLDB##
  2808	003577'	254000	003555'		JRST	SENDT1
  2809
  2810				;SEND TO A JOB
  2811
  2812	003600'	260040	005360'	SENDJ:	PUSHJ	P,DECIN1	;GET DESIRED JOB NUMBER
  2813	003601'	254000	003773'		  JRST	ENFERR		;MUST HAVE ARGUMENT
  2814	003602'	254000	003770'		  JRST	ERRSTR		;NOT A DECIMAL NUMBER
  2815	003603'	323340	003576'		JUMPLE	T2,SENDC	;"TALK JOB 0" goes to the CTY
  2816	003604'	301340	003341*		CAIL	T2,JOBN		;LEGAL JOB NUMBER?
  2817	003605'	254000	003776'		 JRST	JNERR		;NO. SAY SO AND QUIT
  2818	003606'	200307	003466*		MOVE	T1,JBTSTS(T2)	;OK. SEE IF JOB EXISTS
  2819	003607'	607300	040000		TLNN	T1,JNA		; ..
  2820	003610'	254000	004001'		 JRST	ATT4X		;THAT JOB NOT ASSIGNED
  2821	003611'	261040	000005		PUSH	P,U		;OK. SAVE SENDER'S LDB
  2822	003612'	550207	001761*		HRRZ	F,TTYTAB(T2)	;GET TTY DDB OF DEST JOB
  2823	003613'	322200	003617'		JUMPE	F,SENDF		;MUST BE ONE
  2824	003614'	550244	000410*		HRRZ	U,DDBLDB(F)	;GET LDB ADDRESS
  2825	003615'	335005	003541*		SKIPGE	LDBLOG(U)
  2826	003616'	326240	003541'		 JUMPN	U,SENDT		;AND GO SEND IT (IF NOT DETACHED
  2827	003617'	262040	000005	SENDF:	POP	P,U		;OOPS. NO SUCH GUY. GET SENDER
  2828	003620'	262040	000000		POP	P,S		;RESTORE STACK
  2829	003621'	262040	000014		POP	P,P1
  2830	003622'	265300	005233'		JSP	T1,ERRMES	;GIVE SENDER THE BAD NEWS
  2831	003623'	377355	720346		 ASCIZ /?no such port
	003624'	727075	020340
  2832	003625'	677456	406424	/
	003626'	000000	000000
  2833
  2834	003627'	201300	100000	SENDA:	MOVEI	T1,LICOPR	;Must be OPR to do a SEND ALL
  2835	003630'	616302	003553*		TDNN	T1,JBTLIC(J)
  2836	003631'	254000	003770'		 JRST	ERRSTR		;NO. BAD COMMAND
  2837	003632'	261040	000005	GANBGN:	PUSH	P,U		;YES. STACK LDB ADR OF OPR
  2838	003633'	211240	000001		MOVNI	U,1		;START AT U 0
  2839	003634'	254000	003640'		JRST	SENDA2		; ..
  2840
  2841	003635'	135240	000000*	SENDAL:	LDB	U,LDPLNO	;GET CURRENT LINE NUMBER
  2842	003636'	301240	000000*		CAIL	U,MXLIN		;DONE THEM ALL?
  2843	003637'	254000	003647'		 JRST	SENDA3		;YES.
  2844	003640'	550245	000001*	SENDA2:	HRRZ	U,LINTAB+1(U)	;GET LDB ADDRESS
  2845	003641'	331005	003615*		SKIPL	LDBLOG(U) 	;POTENTIAL SENDEE
  2846	003642'	254000	003635'		 JRST	SENDAL		;NO, ON TO NEXT PERSON
  2847	003643'	602000	000001		TRNE	S,1		;IS THIS A GAN CMD?
  2848	003644'	260040	003653'		 PUSHJ	P,GANTST	;YES, SEE IF U IS IN SENDER'S GAN
  2849	003645'	260040	003731'		  PUSHJ	P,SENDHD	;SEND HEADER TO SENDEE
  2850	003646'	254000	003635'		JRST	SENDAL		;GET ANOTHER ONE
  2851
  2852	003647'	260040	003721'	SENDA3:	PUSHJ	P,SNDTYI	;GET A CHAR FROM SENDER
  2853	003650'	254000	003663'		  JRST	SENDAX		;NO MORE.
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 57-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2854	003651'	260040	003754'		PUSHJ	P,TYOALL	;SEND TO ALL LINES
  2855	003652'	254000	003647'		JRST	SENDA3		;LOOP TILL END OF LINE
  2856
  2857				;Skip return of GAN test fails, nonskip if OK
  2858
  2859	003653'	260040	003657'	GANTST:	PUSHJ	P,GANGET	;GET AUN OF POTENTIAL SENDEE
  2860	003654'	312300	000014		CAME	T1,P1		;IS SENDEE IN GAN?
  2861	003655'	350001	000000		 AOS	(P)		;SORRY, NOT IN GAN
  2862	003656'	263040	000000		POPJ	P,		;RETURN
  2863
  2864	003657'	550205	003047*	GANGET:	HRRZ	F,LDBDDB(U)	;GET ADDRESS OF ATTACHED JOB
  2865	003660'	135300	003044*		LDB	T1,PJOBN	;GET JOB NUMBER
  2866	003661'	554306	002240*		HLRZ	T1,JBTPPN(T1)	;GET AUN NUMBER
  2867	003662'	263040	000000		POPJ	P,		;RETURN
  2868
  2869	003663'	211240	000001	SENDAX:	MOVNI	U,1		;SEND EOL AND MAYBE DOT TO ALL DESTS
  2870	003664'	254000	003670'		JRST	SENDX1		; ..
  2871
  2872	003665'	135240	003635*	SENDX2:	LDB	U,LDPLNO	;GET NEXT LINE]NUMBER
  2873	003666'	301240	003636*		CAIL	U,MXLIN		;THROUGH WITH ALL?
  2874	003667'	254000	003563'		JRST	SENDX		;YES.
  2875
  2876	003670'	550245	000001*	SENDX1:	HRRZ	U,LINTAB+1(U)	;NO, GET LDB ADDRESS OF NEXT U
  2877	003671'	331005	003641*		SKIPL	LDBLOG(U)	;POTENTIAL SENDEE?
  2878	003672'	254000	003665'		 JRST	SENDX2		;NO, CONTINUE LOOPING
  2879	003673'	602000	000001		TRNE	S,1		;IS THIS A GAN COMMAND?
  2880	003674'	260040	003653'		 PUSHJ	P,GANTST	;YES, SEE IF U IS IN SENDER'S GAN
  2881	003675'	260040	003747'		  PUSHJ	P,SNDEOL	;SEND CRLF (DOT)
  2882	003676'	254000	003665'		JRST SENDX2		;LOOP TILL DONE
  2883
  2884	003677'	201300	100000	SNDGAN:	MOVEI	T1,LICOPR	;IF SENDER HAS OPER LICENSE
  2885	003700'	612302	003630*		TDNE	T1,JBTLIC(J)	;THEN IT'S OK TO USE GAN CMD
  2886	003701'	254000	003705'		 JRST	SNDGN1		;SENDER HAS LICENSE
  2887	003702'	200302	002673*		MOVE	T1,JBTPRV(J)	;DOES SENDER HAVE ACCT SUPR PRIV?
  2888	003703'	606300	020000		TRNN	T1,20000
  2889	003704'	254000	003710'		 JRST	GANERR		;SENDER HAS NOTHING. TYPE ERROR AND RETURN
  2890	003705'	554602	003661*	SNDGN1:	HLRZ	P1,JBTPPN(J)	;OK TO USE GAN. STORE SENDER'S AUN
  2891	003706'	474000	000000		SETO	S		;SET FLAG TO TELL SENDA THAT THIS IS
  2892	003707'	254000	003632'		JRST	GANBGN		;A GAN COMMAND
  2893
  2894	003710'	262040	000000	GANERR:	POP	P,S		;RESTORE STACK
  2895	003711'	262040	000014		POP	P,P1
  2896	003712'	265300	005233'		JSP	T1,ERRMES	;PRINT ERROR MESSAGE AND RETURN
  2897	003713'	376170	147100		 ASCIZ /?GAN command not permitted
	003714'	617375	566702
	003715'	673104	067336
	003716'	721016	062744
	003717'	667236	472312
  2898	003720'	620321	200000	/
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 58
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2899				;MORE OF SEND COMMAND
  2900
  2901				;SUBROUTINE TO GET CHARACTER FROM SENDER, WHOSE LDB IS ON STACK
  2902
  2903	003721'	250241	777777	SNDTYI:	EXCH	U,-1(P)		;GET SENDER'S LDB
  2904	003722'	260040	000000*		PUSHJ	P,COMTYT##	;GET HIS CHARACTER AND ITS BITS
  2905	003723'	255000	000000		  JFCL			;DON'T CARE IF LOWER CASE
  2906	003724'	250241	777777		EXCH	U,-1(P)		;RESTORE U OF SENDEE
  2907	003725'	302400	000012		CAIE	T3,12
  2908	003726'	306400	000003		CAIN	T3,3
  2909	003727'	263040	000000		 POPJ	P,		;BREAK CHARACTER
  2910	003730'	254000	001750*		JRST	CPOPJ1		;NON-BREAK CHARACTER
  2911
  2912	003731'	260040	005243'	SENDHD:	PUSHJ	P,INLMES	;SEND START OF SEND MESSAGE
  2913					 ASCIZ /
  2914	003732'	064247	303566	;;/
	003733'	000000	000000
  2915	003734'	250241	777777		EXCH	U,-1(P)		;GET SENDER'S LDB ADR
  2916	003735'	260040	000000*		PUSHJ	P,TTYNAM##	;CONVERT TO REAL NAME IN SIXBIT
  2917	003736'	550300	000005		HRRZ	T1,U		;ONLY RH SHOULD COMPARE TO OPRLDB
  2918	003737'	302300	003576*		CAIE	T1,CTYLDB
  2919	003740'	316300	003545*		CAMN	T1,OPRLDB	;IS IT THE OPR?
  2920	003741'	205340	576062		 MOVSI  T2,(SIXBIT /OPR/);YES. SAY OPR INSTEAD
  2921	003742'	250241	777777		EXCH	U,-1(P)		;RESTORE U ADDRESSES
  2922	003743'	260040	003457*		PUSHJ	P,PRNAME	;OUTPUT THE NAME TO SENDEE
  2923	003744'	260040	005243'		PUSHJ	P,INLMES	;AND SPACER
  2924	003745'	351005	520000		 ASCIZ /: - /		; ..
  2925	003746'	263040	000000		POPJ	P,0		;RETURN FROM SENDHD
  2926
  2927	003747'	260040	005234'	SNDEOL::PUSHJ	P,CRLF		;SEND CR LF TO (U)
  2928	003750'	200305	003547*		MOVE	T1,LDBDCH(U)	;SEE IF DEST IS AT COM LEVEL
  2929	003751'	603300	003550*		TLNE	T1,LDLCOM	; ..
  2930	003752'	260040	005260'		 PUSHJ	P,PRPRMT	;YES. SEND A DOT TOO
  2931	003753'	263040	000000		POPJ	P,		;RETURN FROM SNDEOL
  2932
  2933	003754'	211240	000001	TYOALL:	MOVNI	U,1		;START AT U 0
  2934	003755'	254000	003761'		JRST	TYOAL2		; ..
  2935
  2936	003756'	135240	003665*	TYOAL1:	LDB	U,LDPLNO	;GET CURRENT LINE
  2937	003757'	301240	003666*		CAIL	U,MXLIN		;ALL REAL TTY'S DONE YET?
  2938	003760'	263040	000000		 POPJ	P,		;YES. QUIT
  2939	003761'	550245	000001*	TYOAL2:	HRRZ	U,LINTAB+1(U)	;GET LDB ADDRESS
  2940	003762'	331005	003671*		SKIPL	LDBLOG(U)	;POTENTIAL SENDEE?
  2941	003763'	254000	003756'		 JRST	TYOAL1		;NO. ON TO NEXT PERSON
  2942	003764'	602000	000001		TRNE	S,1		;IS THIS A GAN COMMAND?
  2943	003765'	260040	003653'		 PUSHJ	P,GANTST	;YES, SEE IF LINE IS IN SENDER'S GAN
  2944	003766'	260040	003560*		  PUSHJ	P,COMTYO	;SEND CHARACTER
  2945	003767'	254000	003756'		JRST	TYOAL1		;LOOP AGAIN
  2946
  2947	003770'	262040	000000	ERRSTR:	POP	P,S		;RESTORE STACK BEFORE LEAVING
  2948	003771'	262040	000014		POP	P,P1
  2949	003772'	254000	005214'		JRST	COMERA
  2950
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 58-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2951	003773'	262040	000000	ENFERR:	POP	P,S		;RESTORE STACK BEFORE LEAVING
  2952	003774'	262040	000014		POP	P,P1
  2953	003775'	254000	005252'		JRST	NOTENF
  2954
  2955	003776'	262040	000000	JNERR:	POP	P,S		;RESTORE STACK BEFORE LEAVING
  2956	003777'	262040	000014		POP	P,P1
  2957	004000'	254000	003010'		JRST	ATT1
  2958
  2959	004001'	262040	000000	ATT4X:	POP	P,S		;FRAME NOT ASSIGNED
  2960	004002'	262040	000014		POP	P,P1
  2961	004003'	254000	003002'		JRST	ATT4
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 59
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  2962				Repeat 0,<
  2963				;  START MONITOR JOB AND SAVE USER PC AND ARGUMENTS
  2964				;  ON ENTRY T2=ADDR OF MONITOR JOB
  2965				;            J=JOB NUMBER
  2966				;        P1-P4=UP TO 4 ARGUMENTS
  2967				;
  2968				
  2969				UMONJB:	PUSHJ	P,MAPUPS		;SETUP EXEC MAP
  2970					MOVE	T3,[IOWD EPLLEN,%UPT+UPTPDL]	;NEW PDL
  2971					MOVE 	T1,%UPS+UPTPC		;GET PC
  2972					TLNN	T1,PC.USR		;USER MODE
  2973					  MOVE	T3,%UPS+UPTXAC+P	;NO. SET UP NEW LIST
  2974					HRRI	T3,%UPS-%UPT(T3)	;ADJUST POINTER TO UPS
  2975					PUSH	T3,P1			;SAVE ARGUMENTS
  2976					PUSH	T3,P2
  2977					PUSH	T3,P3
  2978					PUSH	T3,P4
  2979					PUSH	T3,T1			;SAVE OLD PC
  2980					HRRI	T3,%UPT-%UPS(T3)	;RELOCATE TO UPT
  2981					MOVEM	T3,%UPS+UPTXAC+P	;STORE UPDATED P
  2982					PUSHJ	P,MONJOB##		;SET UP FOR MOITOR JOB
  2983					POPJ	P,			;RETURN
  2984				
  2985				;  SET UP WORLD FOR START OF MONITOR JOB WITH USER PC AND
  2986				;  ARGUMENTS SAVED.  MUST BE CALLED AS THE FIRST ROUTINE
  2987				;  IN THE MONITOR JOB.  RETURNS ARGUMENTS IN P1-P4.
  2988				
  2989				UMONST:	PUSH	P,0		;SAVE REGISTER 0.  (NO NEED TO
  2990								;SAVE P SINCE WE KNOW WHAT IT WAS
  2991					MOVE	0,-2(P)		;GET SAVE DPC
  2992					HLRE	0,P		;-LENGTH OF PDL
  2993					CAIL	0,-^D15		;ENOUGH ROOM FOR AC S?
  2994					 STOPCD (.,STOP,CMD000,,<Error detected at UMONST>) ;;UMONST+4
  2995					HRLI	0,1		;START WITH REG 1
  2996					HRRI	0,1(P)		;TO TOP OF PDL
  2997					ADD	P,[XWD ^D15,^D15]	;FAKE PUSH
  2998					BLT	0,(P)
  2999					MOVE	J,JOB		;SET UP J
  3000					MOVE	T1,-^D16(P)	;RETURN ADDRESS
  3001					MOVE	P4,-^D18(P)	;LOAD UP ARGS
  3002					MOVE	P3,-^D19(P)
  3003					MOVE	P2,-^D20(P)
  3004					MOVE	P1,-^D21(P)
  3005					PUSH	P,T1		;SAVE THE AC
  3006					PUSHJ	P,TTYFUW	;SET UP FOR TTY OPS
  3007					POP	P,T1		;RESTORE AC
  3008					JRST	(T1)		;RETURN TO CALLER
  3009				> ; End Repeat 0
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 60
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  3010				Repeat 0,<
  3011				;  END SPECIAL MONITOR JOB. ALLOW USER TO CONTINUE
  3012				;  MUST BE CALLED WITH STATCK INSAME STATE AS WHEN UMONST
  3013				;  WAS CALLED.
  3014				
  3015				ENDUMJ:	PUSHJ	P,PRPPMT	;PRINT ENDING PERIOD
  3016					MOVE	T1,-^D17(P)	;GET OLD PC
  3017					MOVEM	T1,%UPT+UPTPC	;RESTORE IT
  3018					HRLI	0,-^D13(P)
  3019					HRRI	0,2
  3020					MOVE	1,P
  3021					BLT	0,17		;RESTORE AC'S 2-15
  3022					MOVE	0,-^D15(1)	;RESTORE AC 0
  3023					MOVE	1,-^D14(1)	;RESTORE AC 1
  3024					SUB	P,[XWD ^D22,^D22] ;RESET STACK TO THE WAY WE WERE CALLED
  3025					PUSH	P,%UPT+UPTPC	;USCHED EXPECTS PC ON TOP OF STACK
  3026					PUSHJ	P,STOP1##	;STOP MONITOR JOB
  3027					JRST	USCHED##
  3028				> ; End Repeat 0
  3029
  3030				EXTERNAL EPLLEN,UPTXAC
  3031
  3032				; VERSION COMMAND.
  3033				;
  3034
  3035	004004'	265340	002074*	VERPR:	JSP	T2,MONJOB##	;START MONITOR JOB
  3036				;*;	MOVEI	T2,STOP1##	;This does not set JERR like ESTOP does
  3037	004005'	201340	002624*		MOVEI	T2,ESTOP##
  3038	004006'	265300	002566*		JSP	T1,MONSTR##	;Set up PDL
  3039	004007'	260040	002076*		PUSHJ	P,TTYFUW	;SET UP FOR TTYP OUTPUT
  3040	004010'	200342	000000*		MOVE	T2,JBTPRG##(J)	;Program name
  3041	004011'	260040	003743*		PUSHJ	P,PRNAME
  3042	004012'	260040	005250'		PUSHJ	P,PRSPC		;Blank
  3043	004013'	256200	005626'	XCTFU  <MOVE	T1,JOBVER##>	;Get version number from location 137
  3044	004014'	260040	004020'		PUSHJ	P,PRVERS	;Output version number
  3045				PRINTF(<[VERPR does not print version number of HISEG]>)
  3046	004015'	260040	005234'		PUSHJ	P,CRLF
  3047	004016'	260040	005260'		PUSHJ	P,PRPRMT	;*HACK*
  3048	004017'	324740	000000*		PJRST	TTYSTC		;Back to command mode
  3049
  3050				;PRVERS - Routine to type contents of T1 as a version number
  3051
  3052	004020'	607300	777700	PRVERS::TLNN	T1,777700	;If major version is zero
  3053	004021'	254000	004065'		 JRST	PRVERT		; then use TYMSHARE format
  3054	004022'	201340	001632*		MOVEI	T2,PRTDI8##	;Octal output routine
  3055	004023'	622300	400000		TRZE	T1,400000	;Unless bit 18 is set
  3056	004024'	200340	005627'		 MOVE	T2,[1B0+PRTDIG##] ;in which case use decimal routine
  3057	004025'	261040	000007		PUSH	P,T2
  3058	004026'	261040	000006		PUSH	P,T1		;SAVE FOR LATER
  3059	004027'	242300	777750		LSH	T1,^D<12-36>	;POSITION MAJOR VERSION
  3060	004030'	405300	000777		ANDI	T1,777		;CLEAR JUNK
  3061	004031'	332000	000006		SKIPE	T1		;IF NON-ZERO,
  3062	004032'	260061	777777		 PUSHJ	P,@-1(P)	;  PRINT IN OCTAL or decimal
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 60-2
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  3063	004033'	554301	000000		HLRZ	T1,(P)		;GET MINOR VERSION
  3064	004034'	405300	000077		ANDI	T1,77		;CLEAR JUNK
  3065	004035'	322300	004051'		JUMPE	T1,PRVER2	;IF NON-ZERO,
  3066	004036'	337001	777777		SKIPG	-1(P)
  3067					 JRST	[PUSHJ P,PRPER	;Output decimal point
  3068						 PUSHJ P,PRTDIG##
  3069	004037'	254000	005630'			 JRST  PRVER2]	;Minor version in decimal
  3070	004040'	275300	000001		SUBI	T1,1		;
  3071	004041'	231300	000032		IDIVI	T1,^D26		;  PRINT IN ALPHA
  3072	004042'	322300	004047'		JUMPE	T1,PRVER1	;  ONE OR TWO
  3073	004043'	261040	000007		PUSH	P,T2		;  CHARACTERS
  3074	004044'	201406	000100		MOVEI	T3,"A"-1(T1)	;  ..
  3075	004045'	260040	003766*		PUSHJ	P,COMTYO##	;  ..
  3076	004046'	262040	000007		POP	P,T2		;  ..
  3077	004047'	201407	000101	PRVER1:	MOVEI	T3,"A"(T2)	;  ALSO, SECOND ONE
  3078	004050'	260040	004045*		PUSHJ	P,COMTYO##	;  ..
  3079	004051'	550301	000000	PRVER2:	HRRZ	T1,(P)		;GET EDIT NUMBER
  3080	004052'	322300	004057'		JUMPE	T1,PRVER3	;IF NON-ZERO,
  3081	004053'	260040	001655'		PUSHJ	P,PRLPR		;  PRINT (
  3082	004054'	550301	000000		HRRZ	T1,(P)		;  GET EDIT NUMBER
  3083	004055'	260061	777777		PUSHJ	P,@-1(P)
  3084	004056'	260040	001653'		PUSHJ	P,PRRPR		;  PRINT )
  3085	004057'	262040	000006	PRVER3:	POP	P,T1		;GET CUST. NUMBER
  3086	004060'	262041	000000		POP	P,(P)		;Dump output routine
  3087	004061'	242300	777737		LSH	T1,-^D33	;POSITION
  3088	004062'	322300	002675*		JUMPE	T1,CPOPJ##	;IF NON-ZERO,
  3089	004063'	213000	000006		MOVNS	T1		;Make negative
  3090	004064'	324740	005507'		PJRST	PRTDEC		;Output hyphen and digit
  3091
  3092				;TYMSHARE format, LH is between 00 and 77 inclusive.
  3093
  3094	004065'	261040	000006	PRVERT:	PUSH	P,T1		;Save RH
  3095	004066'	557000	000006		HLRZS	T1		;Version number in LH
  3096	004067'	322300	004072'		JUMPE	T1,PRVRT0
  3097	004070'	260040	004022*		PUSHJ	P,PRTDI8##
  3098	004071'	260040	005326'		PUSHJ	P,PRPER		;Period
  3099	004072'	200301	000000	PRVRT0:	MOVE	T1,(P)		;Get release number
  3100	004073'	242300	777767		LSH	T1,-^D9		;Middle 9 bits
  3101	004074'	405300	000777		ANDI	T1,777
  3102	004075'	322300	004100'		JUMPE	T1,PRVRT1
  3103	004076'	260040	004070*		PUSHJ	P,PRTDI8##	;Middle field
  3104	004077'	260040	005326'		PUSHJ	P,PRPER
  3105	004100'	262040	000006	PRVRT1:	POP	P,T1
  3106	004101'	405300	000777		ANDI	T1,777
  3107	004102'	324740	004076*		PJRST	PRTDI8##	;Last 9 bits
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 61
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  3108				;"EXAMINE LOC" - LOOKS A CONTENTS OF LOC AND PRINTS IN OCTAL
  3109				;IF LOC IS MISSING, NEXT LOC IS PRINTED IF PREVIOUS WAS E COMMAND,
  3110				;SAME LOC IF PREVIOUS WAS D COMMAND.  TAB IS PRINTED INSTEAD OF CRLF(LIKE DDT)
  3111
  3112				EXTERNAL TPOPJ
  3113
  3114	004103'	201300	200000	ECOM:	MOVEI	T1,LICSPY	;Jobs with status can E in execute-only
  3115	004104'	616302	003700*		TDNN	T1,JBTLIC(J)	;Does job have Read Core license?
  3116	004105'	260040	002212'		 PUSHJ	P,PROPRG	;No, abort if RUN ONLY
  3117	004106'	260040	005370'		PUSHJ	P,OCTIN1	;GET LOCATION
  3118	004107'	665340	400000		  TLOA	T2,400000	;FLAG NOTHING ENTERED
  3119	004110'	254000	005214'		  JRST	COMERA		;BAD OCTAL NUMBER
  3120	004111'	200600	000007		MOVE	P1,T2		;SET UP AS ARGUMENT FOR MONITOR JOB
  3121	004112'	201340	004115'		MOVEI	T2,EMCOM	;START ADDRESS OF MONITOR JOB
  3122	004113'	260040	004004*		PUSHJ	P,MONJOB##	;START MONITOR JOB
  3123	004114'	254000	004173'		JRST	DMCOM1
  3124
  3125	004115'	201340	004005*	EMCOM:	MOVEI	T2,ESTOP##	;ENDING ADDRESS
  3126	004116'	265300	004006*		JSP	T1,MONSTR##
  3127	004117'	400200	000000		SETZ	F,		;DON'T PRINT ADDRESS CHECK ON ILL MEM REF
  3128	004120'	256200	005633'	XCTBU  <SKIPGE	JOBEXM>		;IF PREVIOUS COMMAND WAS AN "E"
  3129	004121'	256200	005634'	XCTBU  < AOS	JOBEXM>		; INCREMENT DEFAULT ADDRESS
  3130	004122'	256200	005635'	XCTBU  <HRROS	JOBEXM>		;FLAG THAT "E" WAS DONE LAST
  3131	004123'	335300	000014		SKIPGE	T1,P1		;ARGUMENT ENTERED?
  3132	004124'	256200	005636'	XCTBU  < HRRZ	T1,JOBEXM>	;NO. USE JOBEXM
  3133	004125'	256200	005637'	XCTBU  <HRRM	T1,JOBEXM>	;SAVE NEW JOBEXM
  3134	004126'	261040	005622'		PUSH	P,[0]		;INDICATE "E" COMMAND TO ECOMC
  3135	004127'	256200	005640'	XCTFU  <PUSH	P,(T1)>		;WORD TO BE PRINTED
  3136	004130'	261040	000006		PUSH	P,T1		;SAVE ADDRESS
  3137	004131'	260040	004007*		PUSHJ	P,TTYFUW	;SET UP SO CAN PRINT
  3138	004132'	262040	000006		POP	P,T1		;RECOVER ADDRESS FOR PRINTING
  3139	004133'	260040	003505*		PUSHJ	P,OCTPNT	;PRINT ADDRESS
  3140	004134'	260040	005243'		PUSHJ	P,INLMES	;PRINT SLASH TAB
  3141	004135'	274220	000000		 ASCIZ	*/	*
  3142	004136'	554301	000000	ECOMC:	HLRZ	T1,(P)		;PRINT LEFT HALF
  3143	004137'	260040	004133*		PUSHJ	P,OCTPNT
  3144	004140'	260040	005250'		PUSHJ	P,PRSPC		;PRINT SPACE
  3145	004141'	550301	000000		HRRZ	T1,(P)		;PRINT RIGHT HALF
  3146	004142'	260040	004137*		PUSHJ	P,OCTPNT
  3147	004143'	260040	005243'		PUSHJ	P,INLMES	;PRINT FINAL TAB
  3148	004144'	044000	000000		 ASCIZ	/	/
  3149	004145'	262040	000006		POP	P,T1
  3150	004146'	262040	000006		POP	P,T1		;RECOVER VERSION/E FLAG
  3151	004147'	332000	000006		SKIPE	T1		;VERSION?
  3152	004150'	260040	005234'		 PUSHJ	P,CRLF		;YES. PRINT CRLF
  3153	004151'	260040	005260'		PUSHJ	P,PRPRMT
  3154	004152'	254000	004017*		JRST	TTYSTC		;BACK TO COMMAND MODE
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 62
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  3155				;"DEPOSIT LH RH LOC" - DEPOSITS XWD LH,RH IN LOCATION LOC
  3156				;IF LOC IS MISSING, ASSUME NEXT LOC IF PREVIOUS D, SAME LOC IF PREVIOUS E
  3157
  3158	004153'	201300	400000	DCOM:	MOVEI	T1,LICWCR	;Jobs with status can D in execute-only
  3159	004154'	616302	004104*		TDNN	T1,JBTLIC(J)	;Does job have Write Core license?
  3160	004155'	260040	002212'		 PUSHJ	P,PROPRG	;No, abort if RUN-ONLY
  3161	004156'	260040	005370'		PUSHJ	P,OCTIN1	;GET LEFT HALF
  3162	004157'	254000	005252'		  JRST	NOTENF		;NEED ARGUMENT
  3163	004160'	254000	005214'		  JRST	COMERA		;BAD CHARACTER
  3164	004161'	506340	000014		HRLM	T2,P1		;SAVE LEFT HALF
  3165	004162'	260040	005370'		PUSHJ	P,OCTIN1	;GET RIGHT HALF
  3166	004163'	254000	005252'		  JRST	NOTENF
  3167	004164'	254000	005214'		  JRST	COMERA
  3168	004165'	542340	000014		HRRM	T2,P1		;SAVE RIGHT HALF
  3169	004166'	260040	005370'		PUSHJ	P,OCTIN1	;GET LOCATION
  3170	004167'	665340	400000		  TLOA	T2,400000	;FLAG NONE TYPED
  3171	004170'	254000	005214'		  JRST	COMERA
  3172	004171'	200640	000007		MOVE	P2,T2		;SAVE LOCATION
  3173	004172'	201340	004200'		MOVEI	T2,DMCOM	;ADDR. OF MONITOR JOB
  3174	004173'	260040	002561*	DMCOM1:	PUSHJ	P,MAPUPS	;SET UP UPT SLOT IN EXEC MAP
  3175	004174'	202600	000000*		MOVEM	P1,%UPS+UPTXAC+P1;STORE ARGUMENT
  3176	004175'	202640	000000*		MOVEM	P2,%UPS+UPTXAC+P2
  3177	004176'	260040	004113*		PUSHJ	P,MONJOB##	;START MONITOR JOB
  3178	004177'	263040	000000		POPJ	P,
  3179
  3180	004200'	201340	004115*	DMCOM:	MOVEI	T2,ESTOP##
  3181	004201'	265300	004116*		JSP	T1,MONSTR##
  3182	004202'	400200	000000		SETZ	F,		;IF ILL MEM REF, DON'T PRINT ADDRESS CHECK.
  3183	004203'	256200	005641'	XCTBU  <SKIPL	JOBEXM>		;IF PREVIOUS COMMAND WAS "D"
  3184	004204'	256200	005634'	XCTBU  < AOS	JOBEXM>		; THEN INCREMENT DEFAULT ADDRESS
  3185	004205'	256200	005642'	XCTBU  <HRRZS	JOBEXM>		;FLAG THAT "D" WAS DONE LAST
  3186	004206'	335000	000015		SKIPGE	P2		;LOC TYPED?
  3187	004207'	256200	005643'	XCTBU  < HRRZ	P2,JOBEXM>	;NO. USE JOBEXM
  3188	004210'	256200	005644'	XCTBU  <MOVEM	P1,(P2)>	;STORE VALUE
  3189	004211'	256200	005645'	XCTBU  <HRRM	P2,JOBEXM>	;STORE NEW ADDRESS (LH 0 FOR "D")
  3190	004212'	260040	004131*		PUSHJ	P,TTYFUW	;GET STUFF FOR TTY TO PRINT THE PERIOD.
  3191	004213'	324740	005260'		PJRST	PRPRMT
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 63
COMCON.MAC	 6-NOV-87 01:34		DISABLE - turn off frame license

  3192				;"SCHEDULE OCTN" - SETS RH OF STATES TO OCTN, IF TYPED FROM
  3193				; THE OPERATOR CONSOLE (C(DEVOPR)), OTHERWISE ILLEGAL
  3194				;"SCHEDULE" WITH NO ARGUMENT TYPES OUT RH OF STATES, LEGAL FOR ALL.
  3195
  3196	004214'	260040	005370'	SKEDUL:	PUSHJ	P,OCTIN1		;GET THE ARGUMENT IF ANY
  3197	004215'	254000	004246'		  JRST	SKED1			;NO ARGUMENT
  3198	004216'	254000	005214'		  JRST	COMERA			;BAD SYNTAX IN OCTAL NUMBER
  3199	004217'	201300	100000		MOVEI	T1,LICOPR
  3200	004220'	616302	004154*		TDNN	T1,JBTLIC(J)
  3201	004221'	254000	005215'		  JRST	COMERR			;NO. THIS IS ILLEGAL, THEN.
  3202	004222'	332000	000000*		SKIPE	DWNFLG
  3203	004223'	263040	000000		  POPJ	P,			;IGNORE IF TAKING DOWN
  3204	004224'	260040	004227'		PUSHJ	P,SKDCOM
  3205	004225'	254000	005215'		  JRST	COMERR
  3206	004226'	263040	000000		POPJ	P,
  3207
  3208				PRINTF(<[SKEDUL @SKDCOM checks DSKCLN done in fixed STRDDB -- needs thought]>)
  3209	004227'	201300	000000*	SKDCOM:	MOVEI	T1,SRPNDS		;IF DSKCLN NEEDS TO BE RUN,
  3210	004230'	616300	000000*		TDNN	T1,STRDDB+STRBTS	;
  3211	004231'	254000	004235'		  JRST	SKDCM2			;
  3212	004232'	602340	200000		TRNE	T2,STSUPR		;TRYING TO CLEAR SHUT
  3213	004233'	606340	400000		  TRNN	T2,STSHUT		;IS A NO-NO.
  3214	004234'	263040	000000		 POPJ	P,
  3215	004235'	201300	001000	SKDCM2:	MOVEI	T1,ALRSCH		;IN CASE NEED TO SET ALARM CELL
  3216	004236'	500340	003276*		HLL	T2,STATES		;GET CONSTANT PART
  3217	004237'	623340	000001		TLZE	T2,1			;RESET INITIALIZE BIT
  3218	004240'	436300	000000*		  IORM	T1,ALR620		;AND SEND ALARM THAT RESET
  3219	004241'	250340	004236*		EXCH	T2,STATES		;SAVE OLD FOR CHANGE COMPARE
  3220	004242'	430340	004241*		XOR	T2,STATES
  3221	004243'	602340	400000		TRNE	T2,STSHUT		;CHECK UP-SHUT BIT
  3222	004244'	260040	000000*		  PUSHJ	P,SETSHT		;CHANGED, CALL SCNSER TO SET
  3223	004245'	254000	003730*		JRST	CPOPJ1
  3224
  3225	004246'	550300	004242*	SKED1:	HRRZ	T1,STATES		;SCHEDULE WITH NO ARGUMENTS.
  3226	004247'	260040	004142*		PUSHJ	P,OCTPNT		;PRINT RH OF STATES.
  3227	004250'	254000	005234'		JRST	CRLF			;AND RETURN WITH A CRLF
  3228
  3229				;"BLANK" OR NO ALPHA NUMERIC BEFORE BREAK CHAR COMMAND
  3230				;DISPATCHED TO LIKE ANY OTHER COMMAND(O IN COMMAND TABLE)
  3231
  3232	004251'	336400	002313*	CBLANK:	SKIPN	T3,TTCMCH		;GET BACK CHARACTER CAUSING BRK
  3233	004252'	263040	000000		  POPJ	P,			;NULL ENTIRELY
  3234	004253'	302400	000012		CAIE	T3,12			;WAS BREAK A LINEFEED?
  3235	004254'	306400	000073		  CAIN	T3,";"			;NO, IS IT SEMI COLON(MONITOR COMMENT)
  3236	004255'	263040	000000		 POPJ	P,			;YES, IGNORE
  3237									; FALL IN UNKNOWN COMMAND
  3238				;COMMAND NOT IN COMMAND DIRECTORY
  3239
  3240	004256'	254000	005215'	NOCOM:	JRST	COMERR			;NO, APPEND ? TO WHAT HE TYPED IN
  3241
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 64
COMCON.MAC	 6-NOV-87 01:34		[SET] TTY [DEV[:]] [NO] ARG commands

  3242				SUBTTL	[SET] TTY [DEV[:]] [NO] ARG commands
  3243				;TTY [DEV[:]] [NO] WORD	;SETS OR CLEARS BITS IN LDBDCH FOR TTY U
  3244				;DEV ARGUMENT LEGAL ONLY IF ASSIGNED TO YOU AOR YOU ARE OPR
  3245
  3246				EXTERN LDBDCH
  3247				EXTERNAL SCNTCD,ALR620,OPRTIM
  3248
  3249	004257'	261040	000005	TTYCMD:	PUSH	P,U			;SAVE TYPING TTY'S LDB
  3250	004260'	550600	000005		HRRZ	P1,U			;ASSUME HIS WILL BE OBJECT
  3251	004261'	260040	005140'		PUSHJ	P,CTEXT1		;GET AN ARGUMENT
  3252	004262'	302400	000072		CAIE	T3,":"			;DEVICE?
  3253	004263'	254000	004302'		  JRST	TTYC1			;NO. A WORD.
  3254	004264'	200300	000007		MOVE	T1,T2			;GET THE DEVICE.
  3255	004265'	260040	003537*		PUSHJ	P,TTYPHY		;AND FIND OUT WHERE IT IS
  3256	004266'	254000	004304'		  JRST	TTYCE			;NOT A TTY. ERROR.
  3257	004267'	550600	000005		HRRZ	P1,U			;STORE AS OBJECT OF COMMAND
  3258	004270'	200241	000000		MOVE	U,0(P)			;RESTORE LDB FOR TYPER
  3259	004271'	260040	005202'		PUSHJ	P,SKIPS			;DISCARD THE COLON
  3260	004272'	254000	004304'		  JRST	TTYCE			;SHOULDNT BE END OF U
  3261	004273'	550300	000005		HRRZ	T1,U			;SEE IF THIS IS OPR
  3262	004274'	302314	000000		CAIE	T1,0(P1)		;MODIFYING OWN TTY?
  3263	004275'	254000	004304'		  JRST	TTYCE			;NO, ERROR AT LEAST FOR NOW
  3264	004276'	200241	000000	TTYCL:	MOVE	U,0(P)			;RESET U TO TYPER
  3265	004277'	260040	005203'		PUSHJ	P,SKIPS1		;SEE IF ANY MORE ON LINE.
  3266	004300'	254000	004306'		  JRST	TTCEXI			;NO. DONE.
  3267	004301'	260040	005140'		PUSHJ	P,CTEXT1		;YES. SEE WHAT IT IS
  3268	004302'	260040	000000*	TTYC1:	PUSHJ	P,SCNTCD		;CALL TTYCMD IN SCNSER
  3269	004303'	254000	004276'		 JRST	TTYCL			;NEXT COMMAND
  3270									;ERROR IS SKIP RETURN
  3271
  3272	004304'	262040	000005	TTYCE:	POP	P,U			;RESTORE U FROM STACK
  3273	004305'	254000	005215'		JRST	COMERR			;AND GO COMPLAIN.
  3274
  3275	004306'	262040	000005	TTCEXI:	POP	P,U			;RESTORE U FROM STACK
  3276	004307'	263040	000000		POPJ	P,0			;AND RETURN TO COMCON
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 65
COMCON.MAC	 6-NOV-87 01:34		SET XXX commands

  3277				Subttl	SET XXX commands
  3278				;SET COMMAND. MAY EVENTUALLY SET A VARIETY OF THINGS
  3279
  3280	004310'	260040	005140'	SETCMD:	PUSHJ	P,CTEXT1	;GET THING TO SET
  3281	004311'	200300	005646'		MOVE	T1,[-SETBLL,,SETBL]
  3282	004312'	260040	004316'		PUSHJ	P,TABSRC	;FIND A MATCH
  3283	004313'	254000	005215'		  JRST	COMERR		;NO GOOD
  3284	004314'	200306	004406'		MOVE	T1,SETDSP(T1)
  3285	004315'	254006	000000		JRST	(T1)
  3286
  3287	004316'	200400	000007	TABSRC:	MOVE	T3,T2		;COPY
  3288	004317'	261040	000006		PUSH	P,T1		;SAVE ORIGINAL AOBJN POINTER TO COMPUTE INDEX.
  3289	004320'	474440	000000		SETO	T4,		;MASK
  3290	004321'	400000	000000		SETZ	S,
  3291	004322'	242440	777772		LSH	T4,-6
  3292	004323'	242400	000006		LSH	T3,6		;AT LEAST 1 CHAR
  3293	004324'	326400	004322'		JUMPN	T3,.-2
  3294	004325'	200406	000000	TABFLP:	MOVE	T3,(T1)		;GET NEXT ITEM.
  3295	004326'	316340	000010		CAMN	T2,T3		;EXACT MATCH
  3296	004327'	254000	004343'		  JRST	TABFND		;YES
  3297	004330'	630400	000011		TDZ	T3,T4
  3298	004331'	312340	000010		CAME	T2,T3		;MASKED MATCH
  3299	004332'	254000	004336'		  JRST	TABNEQ		;NO.
  3300	004333'	662000	000001		TROE	S,1		;YES. 1 MEANS SAW ONE, 3 MEANS SAW TWO.
  3301	004334'	660000	000002		  TRO	S,2		;SAW TWO
  3302	004335'	504000	000006		HRL	S,T1		;SAVE LAST INDEX IN LH OF S.
  3303	004336'	253300	004325'	TABNEQ:	AOBJN	T1,TABFLP	;SEARCH FOR MATCH
  3304	004337'	606000	000002		TRNN	S,2		;IF SAY TWO OR
  3305	004340'	606000	000001		  TRNN	S,1		;ZERO,
  3306	004341'	254000	001662*		 JRST	TPOPJ		;GET GARBAGE OFF STACK AND RETURN.
  3307	004342'	554300	000000		HLRZ	T1,S		;OK, GET INDEX.
  3308	004343'	262040	000010	TABFND:	POP	P,T3		;GET ORIGINAL POINTER
  3309	004344'	621400	777777		TLZ	T3,-1		;JUST ADDRESS
  3310	004345'	274300	000010		SUB	T1,T3		;COMPUTE INDEX
  3311	004346'	254000	004245*		JRST	CPOPJ1		;AND RETURN.
  3312
  3313	004347'	260040	005140'	SETDEF:	PUSHJ	P,CTEXT1	;GET THING TO SET
  3314	004350'	200300	005647'		MOVE	T1,[-DEFLEN,,DEFTBL]
  3315	004351'	260040	004316'		PUSHJ	P,TABSRC	;FIND A MATCH
  3316	004352'	254000	005215'		  JRST	COMERR		;NO GOOD
  3317	004353'	200306	004436'		MOVE	T1,DEFDSP(T1)
  3318	004354'	254006	000000		JRST	(T1)
  3319
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 66
COMCON.MAC	 6-NOV-87 01:34		SET commands

  3320				Subttl	SET commands
  3321
  3322					DEFINE SETCMS<		;; Set XXX commands
  3323					X NOATTACH,SNOATT,0		;; Set NoAttach
  3324					X ATTACH,SETATT,0		;; Set Attach
  3325					X AUTOLO,SETAUT,0		;; Set Autologout N
  3326					X NOAUTO,CLRAUT,0		;; Set NoAutologout
  3327					X DEFAULT,SETDEF,0		;; Set Default XXX
  3328					X LIMIT,SETTRU,0		;; Set Limit N
  3329					X TTY,TTYCMD,0			;; Set TTY XXX
  3330					X TERMINAL,TTYCMD,0		;; Set TERMINAL XXX
  3331					X WSMAX,SETWSL,0		;; Set WsMax N
  3332					X OPR,SETOPR,LICOPR		;; Set OPR
  3333					X NOTOPR,SETNOP,LICJAL		;; Set NotOPR
  3334					X HAPPY,SETHAP,LICOPR		;; Set Happy
  3335					X KSYS,SETKSY,LICOPR		;; Set KSYS mm
  3336					X BIGBEN,SETBEN,LICOPR		;; Set BigBen mm
  3337					X DATE,SETDAT,LICOPR		;; Set Date mm dd yyyy
  3338					X TIME,SETTIM,LICOPR		;; Set Time hhmm
  3339					X LOGOUT,SETLOG,.PVHKJ		;; Set Logout (on disconnect)
  3340					X DETACH,SETLOG,.PVHDT		;; Set Detach (on disconnect)
  3341					X CONTIN,SETLOG,.PVHCN		;; Set Continue (on disconnect)
  3342					X TIMOUT,SETLOG,.PVHTM		;; Set Timout (on disconnect) 15 minutes
  3343					X SCHPRV,SETSPR,LICJAL		;; Set SchPrv
  3344					X CLRSPR,CLRSPR,0		;; Set ClrSPr
  3345					X LOCK,SETLOK,LICWCR		;; Set Lock
  3346					X NOLOCK,CLRLOK,0		;; Set NoLock
  3347				>
  3348					DEFINE DEFCMS<		;; SET Default XXX commands
  3349					X INACTIVITY,SETDFI,LICOPR	;; SET Default INACTIVITY [NNN]
  3350				;	X BUFFERS,SETDFB,0		;; SET Default BUFFERS NNN
  3351				;	X PROTECTION,SETDFP,0		;; SET Default PROTECTION octal
  3352				>
  3353
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 67
COMCON.MAC	 6-NOV-87 01:34		SET commands

  3354
  3355					DEFINE X (A,B,C)
  3356				<	<SIXBIT /A/>>
  3357
  3358	004355'	565741	646441	SETBL:	SETCMS
  3359	004356'	416464	414350
  3360	004357'	416564	575457
  3361	004360'	565741	656457
  3362	004361'	444546	416554
  3363	004362'	545155	516400
  3364	004363'	646471	000000
  3365	004364'	644562	555156
  3366	004365'	676355	417000
  3367	004366'	576062	000000
  3368	004367'	565764	576062
  3369	004370'	504160	607100
  3370	004371'	536371	630000
  3371	004372'	425147	424556
  3372	004373'	444164	450000
  3373	004374'	645155	450000
  3374	004375'	545747	576564
  3375	004376'	444564	414350
  3376	004377'	435756	645156
  3377	004400'	645155	576564
  3378	004401'	634350	606266
  3379	004402'	435462	636062
  3380	004403'	545743	530000
  3381	004404'	565754	574353
  3382			000030	SETBLL==.-SETBL
  3383			027000	SETMXL==<SETBLL-1>_^D9
  3384
  3385	004405'	515641	436451	DEFTBL:	DEFCMS
  3386			000001	DEFLEN==.-DEFTBL
  3387			000000	DEFMXL==<DEFLEN-1>_^D9
  3388
  3389					DEFINE X (A,B,C)
  3390				<	XWD C,B>
  3391
  3392	004406'	000000	004703'	SETDSP:	SETCMS
  3393	004407'	000000	004700'
  3394	004410'	000000	004607'
  3395	004411'	000000	004630'
  3396	004412'	000000	004347'
  3397	004413'	000000	004565'
  3398	004414'	000000	004257'
  3399	004415'	000000	004257'
  3400	004416'	000000	004513'
  3401	004417'	100000	004437'
  3402	004420'	001000	004452'
  3403	004421'	100000	004544'
  3404	004422'	100000	004551'
  3405	004423'	100000	004557'
  3406	004424'	100000	004470'
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 67-2
COMCON.MAC	 6-NOV-87 01:34		SET commands

  3407	004425'	100000	003067'
  3408	004426'	000000	004654'
  3409	004427'	000001	004654'
  3410	004430'	000002	004654'
  3411	004431'	000003	004654'
  3412	004432'	001000	004662'
  3413	004433'	000000	004666'
  3414	004434'	400000	004671'
  3415	004435'	000000	004674'
  3416	004436'	100000	004576'	DEFDSP:	DEFCMS
  3417
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 68
COMCON.MAC	 6-NOV-87 01:34		SET COMMAND PROCESSING

  3418				Subttl	SET COMMAND PROCESSING
  3419
  3420	004437'	260040	004647'	SETOPR:	PUSHJ	P,CKSLC
  3421	004440'	550305	003657*		HRRZ	T1,LDBDDB(U)	;MUST BE ATTACHED
  3422	004441'	322300	005215'		JUMPE	T1,COMERR
  3423	004442'	200306	000000	COMSOP:	MOVE	T1,DEVNAM(T1)
  3424	004443'	202300	000000*		MOVEM	T1,DEVOPR
  3425	004444'	552240	003740*		HRRZM	U,OPRLDB
  3426	004445'	260040	000000*		PUSHJ	P,OPRFRE##
  3427	004446'	402000	000000*		SETZM	OPRTIM		;NO MORE TIMING NEEDED
  3428	004447'	201300	000020		MOVEI	T1,ALROPR
  3429	004450'	412300	004240*		ANDCAM	T1,ALR620	;TURN OFF ALARM BIT
  3430	004451'	263040	000000		POPJ	P,
  3431
  3432	004452'	260040	004647'	SETNOP:	PUSHJ	P,CKSLC		;AAA JUL 77  UN-SET OPR
  3433	004453'	550305	004440*		HRRZ	T1,LDBDDB(U)
  3434	004454'	322300	005215'		JUMPE	T1,COMERR
  3435	004455'	550300	000005		HRRZ	T1,U
  3436	004456'	312300	004444*		CAME	T1,OPRLDB
  3437	004457'	254000	005215'		  JRST	COMERR		;CANT UN-SET IF NOT THE CURRENT OPR
  3438	004460'	402000	004443*		SETZM	DEVOPR
  3439	004461'	402000	004456*		SETZM	OPRLDB
  3440	004462'	260040	004445*		PUSHJ	P,OPRFRE##	;UNWAIT OPR SETUUO WAITERS
  3441	004463'	201340	000132		MOVEI	T2,^D90
  3442	004464'	201300	400000		MOVEI	T1,STSHUT
  3443	004465'	616300	004246*		TDNN	T1,STATES
  3444	004466'	202340	004446*		  MOVEM	T2,OPRTIM	;SET 90 SEC TIMEOUT IF NOT SHUT
  3445	004467'	263040	000000		POPJ	P,
  3446
  3447	004470'	260040	004647'	SETDAT:	PUSHJ	P,CKSLC		; Set DATE
  3448	004471'	260040	005356'		PUSHJ	P,DECIN		;	MM
  3449	004472'	254000	005252'		 JRST	NOTENF
  3450	004473'	254000	005215'		 JRST	COMERR
  3451	004474'	201647	777777		MOVEI	P2,-1(T2)
  3452	004475'	221640	000037		IMULI	P2,^D31
  3453	004476'	260040	005356'		PUSHJ	P,DECIN		;	    DD
  3454	004477'	254000	005252'		 JRST	NOTENF
  3455	004500'	254000	005215'		 JRST	COMERR
  3456	004501'	271647	777777		ADDI	P2,-1(T2)
  3457	004502'	260040	005356'		PUSHJ	P,DECIN		;		YYYY
  3458	004503'	254000	005252'		 JRST	NOTENF
  3459	004504'	254000	005215'		 JRST	COMERR
  3460	004505'	275340	003654		SUBI	T2,^D1964
  3461	004506'	221340	000564		IMULI	T2,^D31*^D12
  3462	004507'	270340	000015		ADD	T2,P2
  3463	004510'	260040	000000*		PUSHJ	P,COMDAS##
  3464	004511'	254000	005215'		 JRST	COMERR
  3465	004512'	263040	000000		POPJ	P,
  3466
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 69
COMCON.MAC	 6-NOV-87 01:34		SET COMMAND PROCESSING

  3467
  3468				COMMENT ! SETWSL - SET WORKING-SET MAXIMUM. INIT'ZD TO 512 ON LOGIN
  3469					NOTE: THIS SET COMMAND REFERS TO CONTEXT PAGES, HENCE
  3470					SET COMMAND AS A WHOLE NEEDS INCOR ON IN COMCON DISPATCH
  3471				EXPECTS: J/JOB
  3472				DESTROYS T1-T4
  3473				!
  3474
  3475	004513'	260040	004173*	SETWSL:	PUSHJ	P,MAPUPS	;GET %UPS & FREINDS SETUP. TAKES J/JOB
  3476	004514'	260040	005356'		PUSHJ	P,DECIN		;GET T2/NUMBER, T3/TERM CHAR
  3477	004515'	254000	005214'		 JRST	COMERA		;NO NUMBER
  3478	004516'	254000	005214'		 JRST	COMERA		;ILLEG DECIMAL CHAR
  3479	004517'	303400	000040		CAILE	T3," "		;THIS COMMAND ASSUMES PAGES
  3480	004520'	306400	000120		  CAIN	T3,"P"		;UNLESS THE USER SAYS "K"
  3481	004521'	254000	004525'		 JRST	SWSL1
  3482	004522'	302400	000113		CAIE	T3,"K"
  3483	004523'	254000	005214'		  JRST	COMERA		;DIDNT SAY K,P OR BLANK
  3484	004524'	242340	000001		LSH	T2,1		;CONVERT K TO PAGES
  3485	004525'	301340	000003	SWSL1:	CAIL	T2,3		;CANT SET BELOW 3 ELSE SYTEM CAN HANG
  3486	004526'	303340	001000		  CAILE	T2,^D512	;IN I/O BLTS, ETC.
  3487	004527'	254000	004535'		 JRST	SWSL2
  3488	004530'	137340	002165*		DPB	T2,USYUWM	;CONSOLE-SETTABLE MAX
  3489	004531'	135400	002162*		LDB	T3,USYUWL	;PROGRAM-SETTABLE LIMIT
  3490	004532'	313400	000007		CAMLE	T3,T2		;SKIP IF PROGRAMMABLE LIMIT OK.
  3491	004533'	137340	004531*		  DPB	T2,USYUWL	;GOTTA CUT IT DOWN TO MAX
  3492	004534'	263040	000000		POPJ	P,
  3493
  3494	004535'	265300	005233'	SWSL2:	JSP	T1,ERRMES	;BE NICE, GIVE HIM A MESSAGE
  3495	004536'	377475	175312		 ASCIZ	/?size too big or too small/
	004537'	203515	767500
	004540'	613234	720336
	004541'	711016	467736
	004542'	203475	560730
	004543'	660000	000000
  3496
  3497	004544'	260040	004647'	SETHAP:	PUSHJ	P,CKSLC		;SET HAPPY
  3498	004545'	201300	000020		MOVEI	T1,ALROPR
  3499	004546'	406300	004450*		ANDM	T1,ALR620	;TURN OFF ALL BITS BUT OPR ALARM
  3500	004547'	402000	000000*		SETZM	CTYBLF##	;AAA JAN 77. STOP CTY BELLS
  3501	004550'	263040	000000		POPJ	P,
  3502
  3503	004551'	260040	004647'	SETKSY:	PUSHJ	P,CKSLC		;SET KSYS
  3504	004552'	260040	005356'		PUSHJ	P,DECIN		;Minutes until timesharing ceases
  3505	004553'	254000	005215'		 JRST	COMERR		;Must have argument, even if 0
  3506	004554'	254000	005215'		 JRST	COMERR
  3507	004555'	202340	003256*		MOVEM	T2,KSYS##	;Store number of minutes
  3508	004556'	324740	003170'		PJRST	DAYTIM
  3509
  3510	004557'	260040	004647'	SETBEN:	PUSHJ	P,CKSLC		;SET BIGBEN
  3511	004560'	260040	005356'		PUSHJ	P,DECIN		;Minutes between messages
  3512	004561'	634340	000007		 TDZA	T2,T2		;Default if no arg
  3513	004562'	254000	005215'		 JRST	COMERR
  3514	004563'	516340	000000*		HRLZM	T2,BGBENF##	;Set minutes in LH
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 69-2
COMCON.MAC	 6-NOV-87 01:34		SET COMMAND PROCESSING

  3515	004564'	324740	000000*		PJRST	BIGBEN##	;Output message to CTY and reset timer
  3516
  3517	004565'	260040	005356'	SETTRU:	PUSHJ	P,DECIN		;GET A NUMBER FOR TRU LIMIT
  3518	004566'	254000	005252'		 JRST	NOTENF
  3519	004567'	254000	005215'		 JRST	COMERR
  3520	004570'	313340	005650'		CAMLE	T2,[^D3435973]	; Max value * 10000 = 377777,,757520
  3521					  JRST	[JSP  T1,ERRMES	;  print error if limit too large
  3522	004571'	254000	005651'			  ASCIZ /Limit exceeds maximum/]
  3523	004572'	221340	023420		IMULI	T2,^D10000	;CONVERT TO INTERNAL FORM
  3524	004573'	202342	001251*		MOVEM	T2,JBTSLM##(J)	; Store as saved limit
  3525	004574'	202342	001252*		MOVEM	T2,JBTLIM##(J)	; Copy as current TRU limit
  3526	004575'	263040	000000		POPJ	P,
  3527
  3528	004576'	260040	004647'	SETDFI:	PUSHJ	P,CKSLC		; Check OP license
  3529	004577'	260040	005356'		PUSHJ	P,DECIN		; Get a number for DEFAULT INACTIVITY
  3530	004600'	334340	005657'		 SKIPA	T2,[INADFL##]	; No parameter, fill in with default
  3531	004601'	254000	005215'		 JRST	COMERR		; Bad parameter
  3532	004602'	461300	000000*		SETCMI	T1,JBLMSK
  3533	004603'	612340	000006		TDNE	T2,T1		;Limit too big?
  3534					  JRST	[JSP  T1,ERRMES	;  print error if to large
  3535	004604'	254000	005660'			  ASCIZ /Inactivity limit too large/]
  3536	004605'	202340	000000*		MOVEM	T2,INADEF	; Store in default address
  3537	004606'	263040	000000		POPJ	P,
  3538
  3539
  3540	004607'	260040	005356'	SETAUT:	PUSHJ	P,DECIN		;GET A NUMBER FOR INACTIVITY TIMEOUT
  3541	004610'	334340	004605*		 SKIPA	T2,INADEF##	;NO PARAMETER - Use Default
  3542	004611'	254000	005215'		 JRST	COMERR		;BAD PARAMETER
  3543	004612'	461300	004602*		SETCMI	T1,JBLMSK##
  3544	004613'	612340	000006		TDNE	T2,T1		;LIMIT TOO BIG?
  3545	004614'	254000	005215'		  JRST	COMERR		;YES
  3546	004615'	317340	004610*		CAMG	T2,INADEF	;Greater than system default?
  3547	004616'	307340	000000		CAIG	T2,0		; or less than acceptable (i.e. 0)
  3548	004617'	260040	004640'		  PUSHJ	P,CHKASL	;Yes, are we legal to do this
  3549	004620'	304000	000000		 CAIA			; Limit in range or legal
  3550	004621'	254000	005215'		  JRST	COMERR		;No, must be legal to work
  3551	004622'	137340	000000*		DPB	T2,JBYINA##	;SET LIMIT
  3552	004623'	205300	000400		MOVSI	T1,PVDINA	;SET DEFAULT INACTIVITY TIMEOUT BIT
  3553	004624'	436302	003702*		IORM	T1,JBTPRV(J)	;IN FRAME PRIV WORD
  3554	004625'	336000	000007		SKIPN	T2		;IF JUST SET LIMIT TO 0
  3555	004626'	412302	004624*		ANDCAM	T1,JBTPRV(J)	;THEN CLEAR BIT IN PRIV WORD
  3556	004627'	263040	000000		POPJ	P,
  3557
  3558	004630'	260040	004640'	CLRAUT:	PUSHJ	P,CHKASL	;Check if SUP or have license
  3559	004631'	304000	000000		 CAIA			;Yes, good command
  3560	004632'	254000	005215'		  JRST	COMERR		;No, cannot set limit to 0
  3561	004633'	201300	000000		MOVEI	T1,0
  3562	004634'	137300	004622*		DPB	T1,JBYINA	;TURN OFF INACTIVITY TIMEOUT
  3563	004635'	205300	000400		MOVSI	T1,PVDINA	;CLEAR BIT IN PRIV WORD
  3564	004636'	412302	004626*		ANDCAM	T1,JBTPRV(J)
  3565	004637'	263040	000000		POPJ	P,
  3566
  3567	004640'	201400	020000	CHKASL::MOVEI	T3,PVACTS	;Bit for Account Sup
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 69-3
COMCON.MAC	 6-NOV-87 01:34		SET COMMAND PROCESSING

  3568	004641'	612402	004636*		TDNE	T3,JBTPRV(J)	;Are we one?
  3569	004642'	263040	000000		  POPJ	P,		;Yes, no skip back to caller
  3570	004643'	201400	501000		MOVEI	T3,LICWCR!LICOPR!LICJAL	; WC, OP or JL
  3571	004644'	616402	004220*		TDNN	T3,JBTLIC(J)	;Do we have appropriate license?
  3572	004645'	254000	004346*		  JRST	CPOPJ1		;No, skip return
  3573	004646'	263040	000000		POPJ	P,		;Yes, let it through
  3574
  3575	004647'	554340	000006	CKSLC:	HLRZ	T2,T1		;GET REQUIRED LICENSE
  3576	004650'	612342	004644*		TDNE	T2,JBTLIC(J)	;DOES HE HAVE IT?
  3577	004651'	263040	000000		  POPJ	P,		;YES
  3578	004652'	262040	000007		POP	P,T2		;GET RID OF EXTRA CALL
  3579	004653'	254000	005215'		JRST	COMERR		;AND TAKE AN ERROR
  3580
  3581	004654'	554340	000006	SETLOG:	HLRZ	T2,T1		;GET BITS TO SET
  3582	004655'	242340	000017		LSH	T2,<^D35-PVNHNG>
  3583	004656'	436342	004641*		IORM	T2,JBTPRV(J)	;SET ONES THAT SHOULD BE ON
  3584	004657'	640340	300000		TRC	T2,PVMHNG
  3585	004660'	412342	004656*		ANDCAM	T2,JBTPRV(J)	;AND RESET THOSE THAT SHOULD BE OFF
  3586	004661'	263040	000000		POPJ	P,
  3587
  3588				;  SET OR CLEAR SPECIAL PRIVILEGES
  3589
  3590	004662'	260040	004647'	SETSPR:	PUSHJ	P,CKSLC
  3591	004663'	201300	010000		MOVEI	T1,SCHPRV
  3592	004664'	436302	003606*		ORM	T1,JBTSTS(J)
  3593	004665'	263040	000000		POPJ	P,
  3594	004666'	201300	010000	CLRSPR:	MOVEI	T1,SCHPRV
  3595	004667'	412302	004664*		ANDCAM	T1,JBTSTS(J)
  3596	004670'	263040	000000		POPJ	P,
  3597
  3598	004671'	260040	004647'	SETLOK:	PUSHJ	P,CKSLC
  3599	004672'	202100	000000*		MOVEM	J,LOKJOB##
  3600	004673'	263040	000000		POPJ	P,
  3601
  3602	004674'	312100	004672*	CLRLOK:	CAME	J,LOKJOB##
  3603	004675'	254000	005215'		 JRST	COMERR
  3604	004676'	402000	004674*		SETZM	LOKJOB##
  3605	004677'	263040	000000		POPJ	P,
  3606
  3607	004700'	205300	200000	SETATT:	MOVSI	T1,PVNOAT	;TURN OFF NO ATTACH BIT
  3608	004701'	412302	004660*		ANDCAM	T1,JBTPRV(J)
  3609	004702'	263040	000000		POPJ	P,
  3610
  3611	004703'	205300	200000	SNOATT:	MOVSI	T1,PVNOAT	;TURN ON NO ATTACH BIT
  3612	004704'	436302	004701*		IORM	T1,JBTPRV(J)
  3613	004705'	263040	000000		POPJ	P,
  3614
  3615
  3616
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 70
COMCON.MAC	 6-NOV-87 01:34		SET COMMAND PROCESSING

  3617				;ADRBRK COMMAND. "ADRBRK <ADDRESS> <READ> <WRITE> <FETCH> <NONE> <MONITO> <ALL>"
  3618				IFNCPU (KL),<
  3619				SETABK:	JRST	COMERR>		;ERROR ON KI10 MONITORS.
  3620				IFCPU (KL),<;ONLY FOR KL PEOPLE - LITES ON KI SCARE OPRS.
  3621			000200		AB.RED==(1B10)
  3622			000100		AB.WRT==(1B11)
  3623			000400		AB.FET==(1B9)
  3624			000040		AB.USR==:(1B12)
  3625
  3626				EXTERNAL UPTABK
  3627
  3628	004706'	624541	440000	ABKTAB:	SIXBIT/READ/
  3629	004707'	676251	644500		SIXBIT/WRITE/
  3630	004710'	464564	435000		SIXBIT/FETCH/
  3631	004711'	565756	450000		SIXBIT/NONE/
  3632	004712'	415454	000000		SIXBIT/ALL/
  3633	004713'	555756	516457		SIXBIT/MONITO/
  3634			000006	ABKLEN==.-ABKTAB
  3635
  3636	004714'	661600	000200	ABKINS:	TLO	P1,AB.RED
  3637	004715'	661600	000100		TLO	P1,AB.WRT
  3638	004716'	661600	000400		TLO	P1,AB.FET
  3639	004717'	400600	000000		SETZ	P1,
  3640	004720'	661600	000700		TLO	P1,AB.RED+AB.WRT+AB.FET ;ALL
  3641	004721'	265400	004755'		JSP	T3,MONABK	;MAKE SRE ALL IS OK.
  3642
  3643
  3644	004722'	260040	005362'	SETABK:	PUSHJ	P,OCTIN		;GET ADDRESS
  3645	004723'	254000	004761'		  JRST	PRTABK		;PRINT ADDRESS BREAK.
  3646	004724'	634600	000014		  TDZA	P1,P1		;CLEAR P1, NO ADDRESS TYPED.(FOR NONE)
  3647	004725'	200600	000007		MOVE	P1,T2		;SAVE ADDRESS.
  3648	004726'	661600	000040		TLO	P1,AB.USR	;ASSUME USER.
  3649	004727'	260040	005140'		PUSHJ	P,CTEXT1	;GET FIRST THING
  3650					  JUMPE	T2,[TLO P1,AB.RED+AB.WRT+AB.FET ;ASSUME ALL
  3651	004730'	322340	005667'			    JRST SETABD]	;DO IT THIS WAY.
  3652	004731'	200300	005671'		MOVE	T1,[-ABKLEN,,ABKTAB]
  3653	004732'	260040	004316'		PUSHJ	P,TABSRC	;GET MATCH
  3654	004733'	254000	005215'		  JRST	COMERR		;NO GOOD.
  3655	004734'	256006	004714'		XCT	ABKINS(T1)	;DO IT TO IT.
  3656	004735'	260040	005140'	SETABL:	PUSHJ	P,CTEXT1	;DON'T HAVE TO GIVE ARGS NOW.
  3657	004736'	322340	004744'		  JUMPE	T2,SETABD	;DONE.
  3658	004737'	200300	005671'		MOVE	T1,[-ABKLEN,,ABKTAB]
  3659	004740'	260040	004316'		PUSHJ	P,TABSRC	;GET MATCH
  3660	004741'	254000	005215'		  JRST	COMERR		;NO GOOD.
  3661	004742'	256006	004714'		XCT	ABKINS(T1)	;DO SOMETHING TO P1
  3662	004743'	254000	004735'		JRST	SETABL		;GO FOR MORE.
  3663
  3664	004744'	260040	004513*	SETABD:	PUSHJ	P,MAPUPS	;GET UPT IN %UPS
  3665	004745'	202600	000000*		MOVEM	P1,%UPS+UPTABK	;STORE
  3666				IFNCPU(KS),<
  3667	004746'	603600	000040		TLNE	P1,AB.USR	;IF USER, RETURN NOW.
  3668	004747'	263040	000000		POPJ	P,		;AND RETURN.
  3669	004750'	200300	000000*		MOVE	T1,ABKSET##	;GET INSTRUCTION
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 70-2
COMCON.MAC	 6-NOV-87 01:34		SET COMMAND PROCESSING

  3670	004751'	312300	005672'		CAME	T1,[WRADB %UPT+UPTABK] ;IF CHANGED BY EDDT TO A JFCL,
  3671	004752'	700140	000014		 WRADB	P1		;THEN USE WHAT SYSTEM PROGRAMMER SAYS
  3672	004753'	202600	005007'		MOVEM	P1,ABKMON	;REMEMBER LAST ONE DONE.
  3673				>;END IFNCPU(KS)
  3674	004754'	263040	000000		POPJ	P,		;RETURN.
  3675
  3676	004755'	205300	400000	MONABK:	MOVSI	T1,LICWCR
  3677	004756'	260040	004647'		PUSHJ	P,CKSLC		;NEVER COME BACK IF NOT.
  3678	004757'	621600	000040		TLZ	P1,AB.USR	;HAS WC IN JOB, LET HIM BREAK IN MONITOR.
  3679	004760'	254010	000000		JRST	(T3)		;AND RETURN FROM JSP T3,
  3680
  3681	004761'	260040	004744*	PRTABK:	PUSHJ	P,MAPUPS	;GET UPTABK IN %UPS
  3682	004762'	200600	000000*		MOVE	P1,%UPS+UPTABK	;GET INTO PERMANENT PLACE
  3683	004763'	201300	005673'		MOVEI	T1,[ASCIZ/NONE/]
  3684	004764'	606600	777777		TRNN	P1,-1		;ANY AT ALL
  3685	004765'	254000	005235'		 JRST	CONMES		;NO, PRINT NONE AND RETURN
  3686	004766'	201300	005674'		MOVEI	T1,[ASCIZ/AT /]
  3687	004767'	260040	005235'		PUSHJ	P,CONMES
  3688	004770'	550300	000014		HRRZ	T1,P1
  3689	004771'	260040	004247*		PUSHJ	P,OCTPNT
  3690	004772'	201300	005675'		MOVEI	T1,[ASCIZ/(EXEC)/]
  3691	004773'	607600	000040		TLNN	P1,AB.USR
  3692	004774'	260040	005235'		 PUSHJ	P,CONMES
  3693	004775'	201300	005677'		MOVEI	T1,[ASCIZ/ READ/]
  3694	004776'	603600	000200		TLNE	P1,AB.RED
  3695	004777'	260040	005235'		 PUSHJ	P,CONMES
  3696	005000'	201300	005701'		MOVEI	T1,[ASCIZ/ WRITE/]
  3697	005001'	603600	000100		TLNE	P1,AB.WRT
  3698	005002'	260040	005235'		 PUSHJ	P,CONMES
  3699	005003'	201300	005703'		MOVEI	T1,[ASCIZ/ FETCH/]
  3700	005004'	603600	000400		TLNE	P1,AB.FET
  3701	005005'	324740	005235'		 PJRST	CONMES
  3702	005006'	263040	000000		POPJ	P,
  3703				>;END IFCPU (KL)
  3704
  3705	005007'	000000	000000	ABKMON::0			;CONTAINS LAST ADDRESS BREAK SETTING FOR MONITOR.
  3706				IFCPU (KL),<
  3707				;SET ADDRESS BREAK UUO.
  3708
  3709	005010'	322300	005016'	ABKUUO::JUMPE	T1,ABKUU1	;ZERO MEANS CLEAR.
  3710	005011'	603300	000040		TLNE	T1,AB.USR	;IF MONITOR, CHECK LICENSE
  3711	005012'	254000	005016'		 JRST	ABKUU1
  3712	005013'	205340	400000		MOVSI	T2,LICWCR	;NEED WC TO DO IT
  3713	005014'	616342	004650*		TDNN	T2,JBTLIC(J)
  3714	005015'	263040	000000		 POPJ	P,		;NO PRIVS
  3715	005016'	250300	000000*	ABKUU1:	EXCH	T1,%UPT+UPTABK	;SET NEW SETTING
  3716	005017'	256000	004750*		XCT	ABKSET##	;MAKE IT GO INTO EFFECT
  3717	005020'	256200	005705'		UMOVEM	T1,(W)		;RETURN OLD SETTING
  3718	005021'	254000	004645*		JRST	CPOPJ1		;AND RETURN.
  3719				>;END IFCPU (KL)
  3720
  3721				IFNCPU (KL),<XP ABKUUO,CPOPJ>	;UNIMPLEMENTED ON KI
  3722
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 70-3
COMCON.MAC	 6-NOV-87 01:34		SET COMMAND PROCESSING

  3723
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 71
COMCON.MAC	 6-NOV-87 01:34		SET COMMAND PROCESSING

  3724				; "FINISH DEVICE" - CLOSES,RELEASE AND DEASSIGNS DEVICE
  3725				;JOB MUST HAVE CORE
  3726
  3727					EXTERNAL HOLD,CLOSE0,RELEAX
  3728	005022'	634340	000007	CFINI:	TDZA T2,T2	;ZERO FOR FINISH
  3729	005023'	211340	000001	CLSCOM:	MOVNI T2,1	;NEGATIVE FOR CLOSE
  3730	005024'	260040	004761*		PUSHJ	P,MAPUPS
  3731	005025'	202340	000000*		MOVEM	T2,%UPS+UPTXAC+F	;SAVE FLAG IN EXEC AC F
  3732	005026'	260040	005170'		PUSHJ P,CTXDEV
  3733	005027'	507302	005014*		HRLS T1,JBTLIC(J)
  3734	005030'	506302	002040*		HRLM T1,JBTSLC(J)
  3735	005031'	402000	000000*		SETZM %UPS+UPTPID
  3736	005032'	402000	000000*		SETZM %UPS+UPTSPD	;CLEAR PID AND SAVED PID
  3737	005033'	322340	005070'		JUMPE T2,FINALL
  3738	005034'	200300	000007		MOVE T1,T2		;SEARCH FOR SIXBIT DEVICE NAME
  3739								; DO A FINISH SYS COMMAND FOR HIM
  3740	005035'	260040	003025*		PUSHJ P,DEVSRC
  3741	005036'	254000	002455'		JRST NOTDEV		;PRINT NOT A DEVICE
  3742	005037'	542200	000000*		HRRM F,%UPS+UPTXAC+F	;STORE DDB ADR. IN JOB DATA AREA
  3743	005040'	200241	777777		MOVE U,-1(P)		;RESTORE TTY U DATA BLOCK
  3744	005041'	265340	002565*		JSP T2,MSTART##		;SETUP MONITOR JOB AND RETURN
  3745								; RETURN HERE AT M LEVEL WHEN SCHEDULED
  3746	005042'	265300	004201*		JSP T1,MONSTR##		;SETUP ACS,R,R,P
  3747	005043'	260040	005045'		PUSHJ P,CFIN
  3748	005044'	254000	005102'		JRST CFINIX	;DDNE
  3749
  3750	005045'	256200	005706'	CFIN:	UMOVEM F,JOBFDV
  3751	005046'	200500	000000*	CFIN1:	MOVE W,%UPT+UPTHCU	;HIGHEST USER IO CHANNEL IN USE
  3752	005047'	540212	000000*	FDV1:	HRR F,%UPT+UPTJDA(W)	;GET NEXT DEVICE
  3753	005050'	256200	005707'		XCTBU <HLL F,JOBFDV>
  3754	005051'	201540	000000		MOVEI M,0
  3755	005052'	201300	000000*		MOVEI T1,RELEAX		;SET UP TO CALL RELEASE
  3756	005053'	337000	000004		SKIPG F
  3757	005054'	201300	000000*		MOVEI T1,CLOSE0		;JUST CLOSE
  3758	005055'	137500	000000*		DPB W,PUUOAC##		;WITH CHANNEL NO.
  3759	005056'	261040	000012		PUSH P,W
  3760	005057'	256200	005710'		XCTBU <CAMN F,JOBFDV>	;IS THIS DEV. THE ONE TO RELEASE?
  3761	005060'	260046	000000		PUSHJ P,(T1)		;YES, RELEASE IT(AND CLOSE)
  3762	005061'	262040	000012		POP P,W
  3763	005062'	365500	005047'		SOJGE W,FDV1		;FINISHED?
  3764	005063'	200100	003500*		MOVE J,JOB		;GET JOB NUMBER
  3765	005064'	256200	005711'		XCTBU <SKIPL F,JOBFDV>	;RESET F
  3766	005065'	260040	005330'		PUSHJ P,DEASG		;DEASSIGN DEVICE
  3767	005066'	255000	000000		JFCL			;IGNORE IF NOT ASSIGNED BY CONSOLE
  3768	005067'	263040	000000		POPJ P,
  3769
  3770				;HERE TO FIN ALL DEVICES JOB OWNS
  3771	005070'	265340	005041*	FINALL:	JSP	T2,MSTART##	;SETUP MONITOR JOB, RETURN AT UUO LEVEL
  3772	005071'	265300	005042*		JSP	T1,MONSTR##	;SETUP R, R,P
  3773	005072'	256200	005706'		UMOVEM	F,JOBFDV	;SO LEFT HALF IS SAVED FOR CLOSE OR FIN
  3774	005073'	554200	002326*		HLRZ	F,DEVLST	;START OF DDB CHAIN
  3775	005074'	135300	003660*	FINAL1:	LDB	T1,PJOBN	;JOB WHICH OWNS DEVICE
  3776	005075'	256200	005712'		XCTBU <HRRM	F,JOBFDV>;SAVE DDB ADDR IN CASE CFIN IS CALLED
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 71-2
COMCON.MAC	 6-NOV-87 01:34		SET COMMAND PROCESSING

  3777	005076'	316300	005063*		CAMN	T1,JOB		;THIS JOB OWN DEVICE?
  3778	005077'	260040	005046'		PUSHJ	P,CFIN1		;YES, FIN (OR CLOSE) IT
  3779	005100'	554204	000003		HLRZ	F,DEVSER(F);SKIP TO NEXT DDB IN CHAIN
  3780	005101'	326200	005074'		JUMPN	F,FINAL1	;TEST IT IF NON-0
  3781	005102'	260040	001042*	CFINIX:	PUSHJ	P,TTYFNU	;DONE. FIND TTY LINE FOR JOB
  3782	005103'	324740	002101*		PJRST	HOLD		;STOP JOB
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 72
COMCON.MAC	 6-NOV-87 01:34		SET COMMAND PROCESSING

  3783				;"RESOURCES" - PRINT OUT AVAILABLE DEVICES AND FREE BLOCKS ON THE DISK
  3784
  3785	005104'			FREDEV:
  3786
  3787					EXTERN	DSKRES
  3788	005104'	260040	000000*		PUSHJ	P,DSKRES		;PRINT DISK INFO
  3789
  3790	005105'	554500	005073*		HLRZ	W,DEVLST		;GET DDB POINTER
  3791	005106'	201640	000000		MOVEI	P2,0			;SET DEVICE NAME 0 FOR FIRST COMPARE
  3792	005107'	200312	000004	LOP01:	MOVE	T1,DEVMOD(W)		;DEVICE CHARACTERISTICS
  3793	005110'	606300	600000		TRNN	T1,ASSCON!ASSPRG	;DEVICE ASSIGNED BY CONSOLE OR PROGRAM?
  3794	005111'	603300	204010		  TLNE	T1,DVTTY!DVDSK!DVRMT	;NO, IS IT A TTY OR DSK?
  3795	005112'	254000	005127'		 JRST	LOP02			;YES DO NOT PRINT
  3796	005113'	554312	000000		HLRZ	T1,DEVNAM(W)		;GET NAME OF NEXT DEVICE IN CHAIN
  3797	005114'	306300	606471		CAIN	T1,(SIXBIT /PTY/)	;A PSEUDO TELETYPE?
  3798	005115'	254000	005127'		  JRST	LOP02			;YES. DONT MENTION IT.
  3799	005116'	322640	005120'		JUMPE	P2,LOP01B		;SUPPRESS LEADING COMMA
  3800	005117'	260040	001657'		PUSHJ	P,PRCOM			;PRINT ,(INSTEAD OF CRLF SO WILL FIT IN 1 BUFFER)
  3801	005120'	204612	000000	LOP01B:	MOVS	P1,DEVNAM(W)		;GET DEVICE NAME
  3802	005121'	510340	000014		HLLZ	T2,P1			;ASSUME SAME TYPE AS LAST ONE, PRINT
  3803									; ONLY RH OF NAME (UNIT NUMBER)
  3804	005122'	306654	000000		CAIN	P2,0(P1)		;IS IT REALLY THE SAME?
  3805	005123'	254000	005126'		  JRST	LOP01A			;YES. PRINT THE UNIT NUMBER.
  3806	005124'	204340	000014		MOVS	T2,P1			;NO. MUST PRINT WHOLE NAME,
  3807	005125'	550640	000014		HRRZ	P2,P1			; AND GET THE NEW DEVICE IN FLAG AC.
  3808	005126'	260040	004011*	LOP01A:	PUSHJ	P,PRNAME		;AS BEING FREE
  3809	005127'	554512	000003	LOP02:	HLRZ	W,DEVSER(W)		;GET NEXT DEVICE IN CHAIN
  3810	005130'	326500	005107'		JUMPN	W,LOP01			;IS THERE ONE?
  3811	005131'	254000	005234'		JRST	CRLF			;NO. DONE. PRINT CR, LF AND THEN POPJ
  3812
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 73
COMCON.MAC	 6-NOV-87 01:34		SET COMMAND PROCESSING

  3813				;ROUTINE TO DELAY A COMMAND
  3814
  3815				;DELAYS COMMAND TO BE EXECUTED WHEN JOB IN CORE MEMORY
  3816				;AND CAUSES JOB TO BE SWAPPED IN(COMMAND WAIT BIT IS SET IN JBTSTS)
  3817				;AND POPS LEVEL UP ONE.
  3818
  3819
  3820	005132'	260040	000000*	DLYCM:	PUSHJ	P,DLYCOM	;SET COMMAND WAIT BIT IN JOB STATUS AND PUT
  3821								; JOB IN COMMAND WAIT QUEUE
  3822								; SO JOB IS NOT RUNNABLE ANY MORE
  3823				;ROUTINE TO DELAY A COMMAND IF A SWAP OUT OR IN IS IN PROGRESS
  3824				;DIFFERS FROM DLYCM IN THAT JOB IS NOT MADE TO BE SWAPPED IN
  3825				;REQUIRED FOR DELAYING COMMAND IF SYSTEM
  3826				;TAPE USER TYPES ^C (HALT COMMAND)
  3827
  3828	005133'	262040	000006	DLYCM1:	POP	P,T1		;Discard dispatch return address
  3829	005134'	262040	000007		POP	P,T2		;Discard saved LDB address
  3830	005135'	254000	000003'		JRST	COMMAND		;Loop back to beginning of COMCON
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 74
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  3831				SUBTTL	COMCSS - COMMON COMMAND SUBROUTINES
  3832
  3833				;ROUTINE TO RETURN NEXT ALPHANUMERIC STRING
  3834				; IN COMMAND U (SIXBIT)
  3835				;CALL:	PUSHJ P, CTEXT
  3836				; SIXBIT STRING RETURN LEFT JUSTIFIED IN AC T2
  3837
  3838				INTERNAL CTEXT,COMSOP
  3839				INTERNAL CTEXT1
  3840
  3841	005136'	260040	005202'	CTEXT:	PUSHJ	P,SKIPS		;CALL HERE IF AT START OF U
  3842	005137'	254000	005152'		  JRST	CTEXTA		;NOTHING THERE. MAYBE ^C.
  3843
  3844	005140'	260040	005203'	CTEXT1:	PUSHJ	P,SKIPS1	;SKIP LEAD SPACES,TABS,NULLS AND CLEAR T2
  3845	005141'	254000	005152'		  JRST	CTEXTA		;NOTHING THERE.
  3846	005142'	334500	005713'		SKIPA	W,[POINT 6,T2]
  3847	005143'	260040	005174'	CTEX0:	  PUSHJ	P,COMTYS
  3848
  3849	005144'	260040	005155'		PUSHJ	P,CTEX		;IS IT ALPHANUMERIC
  3850	005145'	263040	000000		  POPJ	P,0		;NO
  3851	005146'	640400	000040		TRC	T3,40		;CONVERT TO SIXBIT
  3852	005147'	603500	770000		TLNE	W,770000	;SIX CHARS YET?
  3853	005150'	136400	000012		  IDPB	T3,W		;NO. BUILD WORD
  3854	005151'	254000	005143'		JRST	CTEX0		;LOOP FOR MORE
  3855
  3856	005152'	306400	000003	CTEXTA:	CAIN	T3,3		;CONTROL C?
  3857	005153'	205340	504154		  MOVSI	T2,(SIXBIT /HAL/)
  3858	005154'	263040	000000		POPJ	P,0		;RETURN FROM CTEXT
  3859
  3860
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 75
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  3861				;SCAN FOR ALPHANUMERIC CHAR IN T3 (0-9, A-Z, @)
  3862	005155'	303400	000172	CTEX:	CAILE	T3,"Z"+40	;GREATER THAN LC Z?
  3863	005156'	263040	000000		  POPJ	P,0		;YES. NOT SIXBIT.
  3864	005157'	301400	000141		CAIL	T3,"A"+40	;LOWER CASE LETTER?
  3865	005160'	620400	000040		  TRZ	T3,40		;YES. MAKE UPPER CASE.
  3866	005161'	301400	000060		CAIL	T3,"0"
  3867	005162'	303400	000132		CAILE	T3,"Z"		;LETTERS ARE LARGER THAN NOS.
  3868	005163'	263040	000000		  POPJ	P,0		;NEITHER
  3869	005164'	303400	000071		CAILE	T3,"9"
  3870	005165'	301400	000100		CAIL	T3,"@"
  3871	005166'	254000	005021*		  JRST	CPOPJ1		;LETTER OR NUMBER RETURN
  3872	005167'	263040	000000		POPJ	P,0		;NOT-LETTER/NUMBER RETURN
  3873
  3874	005170'	260040	005140'	CTXDEV:	PUSHJ	P,CTEXT1	;GET A WORD
  3875	005171'	306400	000072		CAIN	T3,":"		;AND IF TERM IS A COLON,
  3876	005172'	260040	005174'		  PUSHJ	P,COMTYS	;DISCARD IT
  3877	005173'	263040	000000		POPJ	P,0		;RETURN FROM CTXDEV
  3878
  3879	005174'	260040	000000*	COMTYS::PUSHJ	P,COMTYI	;IN SCNSER. PICK UP CHAR.
  3880	005175'	302400	000041		CAIE	T3,"!"		;EXCLAM AND SEMICOLON ARE COMMENT CHARS
  3881	005176'	306400	000073		CAIN	T3,";"
  3882	005177'	201400	000012		  MOVEI	T3,12		;TREAT ; AS EOL
  3883	005200'	202400	004251*		MOVEM	T3,TTCMCH
  3884	005201'	263040	000000		POPJ	P,
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 76
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  3885				;ROUTINE TO IGNORE LEADING SPACES, TABS,
  3886				;ALSO CLEARS T2
  3887				;CALL:	PUSHJ P,SKIPS1	;TO CONSIDER CURRENT CHARACTER
  3888				;	PUSHJ P,SKIPS		;TO DISCARD CURRENT CHARACTER
  3889				;NON-SKIP RETURN MEANS END OF U
  3890				;SKIP RETURN MEANS SOMETHING THERE, IN T3 AND TTCMCH
  3891
  3892				INTERNAL SKIPS1,SKIPS
  3893
  3894				EXTERN COMTYI
  3895
  3896				;ROUTINE TO IGNORE LEADING SPACES AND TABS. ALSO, CLEARS T2
  3897				;FOR USE BY ANYRIN AND CTEXT
  3898
  3899	005202'	260040	005174'	SKIPS:	PUSHJ P,COMTYS			;DISCARD CURRENT CHARACTER
  3900	005203'	201340	000000	SKIPS1:	MOVEI T2,0		;CLEAR ANSWER FOR NUMERIC AND TEXT INPUTS
  3901	005204'	200400	005200*		MOVE T3,TTCMCH		;GET CURRENT CHARACTER
  3902	005205'	302400	000011		CAIE T3,11		;TAB?
  3903	005206'	306400	000040		CAIN T3,40		;OR SPACE?
  3904	005207'	254000	005202'		JRST SKIPS		;YES. DISCARD IT
  3905	005210'	301400	000040		CAIL T3,40		;BREAK CHARACTER?
  3906	005211'	350001	000000		AOS 0(P)		;NO. SKIP RETURN
  3907	005212'	263040	000000		POPJ P,0		;RETURN.
  3908
  3909
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 77
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  3910				;ROUTINE TO APPEND A "?" TO INPUT STRING AND SET AS OUTPUT
  3911				;CALLED FROM OCTIN, RETURNS TO SECOND LEVEL ON PDL
  3912				;CALL:	MOVE T1, BYTE POINTER TO LAST CHAR. IN INPUT STRING
  3913				;	PUSHJ P, COMERA
  3914
  3915				INTERNAL COMERA
  3916
  3917	005213'	262041	000000	COMERP:	POP P,0(P)		;REMOVE SUB. RETURN BEFORE CALLING COMERA
  3918	005214'	260040	005174*	COMERA:	PUSHJ P,COMTYI		;SKIP ONE MORE CHARACTER
  3919
  3920				;ROUTINE TO TYPE ALL OF A COMMAND ACCEPTED, FOLLOWED BY
  3921				;A QUESTION MARK
  3922				;CALL:	PUSHJ P, COMERR
  3923
  3924				INTERNAL COMERR
  3925
  3926				EXTERN TRESCN,TSETBI,TTCMCA
  3927
  3928	005215'	261040	000000*	COMERR:	PUSH	P,TTCMCA	;SAVE ERROR POSITION IN SCAN ON STACK
  3929	005216'	260040	000416*		PUSHJ	P,TRESCN	;BACK UP TO START OF COMMAND
  3930	005217'	260040	005246'		PUSHJ	P,PRQM		;TYPE ? FOR BATCH
  3931	005220'	260040	005214*	COMERL:	PUSHJ	P,COMTYI	;GET A CHAR FROM COMMAND
  3932	005221'	200300	005215*		MOVE	T1,TTCMCA	;PASS BAD CHAR YET?
  3933	005222'	316301	000000		CAMN	T1,0(P)	; ..
  3934	005223'	254000	005226'		JRST	COMER1		;YES
  3935	005224'	260040	004050*		PUSHJ	P,COMTYO	;NO. TYPE CHAR.
  3936	005225'	326400	005220'		JUMPN	T3,COMERL	;LOOP IF NOT OUT OF CHARACTERS
  3937
  3938	005226'	262040	000006	COMER1:	POP	P,T1		;REMOVE OLD POSITION FROM STACK
  3939	005227'	260040	000224*		PUSHJ	P,TSETBI	;CLEAR ANY MORE TYPEIN
  3940	005230'	260040	005246'		PUSHJ	P,PRQM		;APPEND ? TO ERRONEOUS WORD
  3941	005231'	265300	005233'		JSP	T1,ERRMES	;Drop into error message routine
  3942					 ASCIZ	/
  3943	005232'	064240	000000	/				; with CR-LF
  3944
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 78
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  3945				;ROUTINE TO PRINT A COMMAND ERROR MESSAGE
  3946				;SAME CALL AS CONMES
  3947
  3948	005233'	665700	000001	ERRMES::TLOA	P3,ERRFLG	;Flag error and skip into CONMES
  3949
  3950				;ROUTINE TO PRINT CARRIAGE RETURN-U-FEED
  3951				;CALL:	MOVE U,LDB ADDRESS OF TTY
  3952				;	PUSHJ P,CRLF
  3953
  3954								; COMERR SKIPS TO HERE(SEE ABOVE)
  3955				CRLF::	MOVEI T1,[ASCII /
  3956	005234'	201300	005714'	/]
  3957
  3958				;ROUTINE TO MOVE ASCII CHAR. STRING TO CONSOLE OUTPUT BUFFER
  3959				; CALL:	MOVE U,LDB ADDRESS OF TTY
  3960				;	MOVEI T1,  ADDRESS OF ASCII MESSAGE
  3961				;	PUSHJ P, CONMES
  3962				; STRING TERMINATED BY NULL
  3963				;CONMS1 - SAME CALLING SEQUENCE AS CONMES,EXCEPT LH IS BYTE POINTER
  3964
  3965	005235'	505300	440700	CONMES::HRLI	T1,440700	;FORM ASCIZ BYTE POINTER
  3966	005236'	261040	000006		PUSH	P,T1		;SAVE BYTE POINTER
  3967	005237'	134401	000000	CON0:	ILDB	T3,(P)		;GET NEXT CHAR.
  3968	005240'	322400	004341*		JUMPE	T3,TPOPJ	;IS IT NULL?(IF YES, DO POP T1, POPJ)
  3969	005241'	260040	005224*		PUSHJ	P,COMTYO##	;NO, STORE TTY OUTPUT BUFFER
  3970	005242'	254000	005237'		JRST	CON0		;KEEP GOING
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 79
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  3971				;ROUTINE TO PRINT INLINE ASCIZ MESSAGE
  3972				;CALL:	PUSHJ P,INLMES
  3973				;	 ASCIZ /THE MESSAGE/
  3974				;RETURN TO NEXT LOC AFTER MESSAGE
  3975
  3976	005243'	262040	000006	INLMES::POP P,T1		;SETUP PRINT ADRESS FOR CONMES
  3977	005244'	260040	005235'		PUSHJ P,CONMES
  3978	005245'	254006	000001		JRST 1(T1)		;RETURN TO NEXT LOC AFTER MESSAGE
  3979
  3980				;ROUTINE TO APPEND ? TO ERROR MESSAGE
  3981				;CALL	PUSHJ P,PRQM
  3982				;	RETURN
  3983
  3984	005246'	201400	000077	PRQM::	MOVEI T3,"?"
  3985	005247'	324740	005241*		PJRST COMTYO
  3986
  3987				;SUBROUTINE TO PRINT A SPACE
  3988
  3989	005250'	201400	000040	PRSPC::	MOVEI T3," "
  3990	005251'	324740	005247*		PJRST COMTYO
  3991
  3992				;ROUTINE TO PRINT "TOO FEW ARGUMENTS"
  3993				;CALL:	MOVE U,BYTE POINTER
  3994				;	PUSHJ P,NOTENF
  3995
  3996				INTERNAL NOTENF
  3997
  3998	005252'	265300	005233'	NOTENF:	JSP T1,ERRMES
  3999	005253'	377515	767500		 ASCIZ /?too few arguments
	005254'	633136	720302
	005255'	713176	566712
  4000	005256'	673516	306424	/
	005257'	000000	000000
  4001
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 80
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  4002				;PRINT PERIOD (OR OTHER PROMPT) PLUS "[MAIL] WAITING" ETC.
  4003				;CALL:	PUSHJ P,PRPRMT  (U must be set up)
  4004
  4005	005260'	261040	000004	PRPRMT::PUSH	P,F		;Print prompt, "." or "!" or "[mail waiting]"
  4006	005261'	261040	000002		PUSH	P,J		;Preserve J in case not called from COMMAND
  4007	005262'	322240	005324'		JUMPE	U,PRPER1	;Don't diddle MAIL WAITING if no TTY
  4008	005263'	550205	004453*		HRRZ	F,LDBDDB(U)	;Set F so we can get job number from DDB
  4009	005264'	322200	005324'		JUMPE	F,PRPER1	;Don't diddle MAIL WAITING if no TTY
  4010	005265'	135100	005074*		LDB	J,PJOBN		;Job owning TTY that U points to
  4011	005266'	201200	010000		MOVEI	F,PVMAIL	;Is RPG mail waiting?
  4012	005267'	616202	004704*		TDNN	F,JBTPRV(J)
  4013	005270'	254000	005277'		 JRST	PRPMT1		;No
  4014	005271'	412202	005267*		ANDCAM	F,JBTPRV(J)	;Yes, turn off bit
  4015	005272'	135300	000074*		LDB	T1,PVYMOD	;Get mode
  4016	005273'	306300	000002		CAIN	T1,JAPMOD	;Don't call it MAIL if Japanese
  4017					 SKIPA	T1,[EXP [ASCIZ/opnotice waiting
  4018	005274'	334300	005721'	/] ]
  4019					  MOVEI	T1,[ASCIZ/mail waiting
  4020	005275'	201300	005722'	/]
  4021	005276'	260040	005235'		PUSHJ	P,CONMES
  4022
  4023	005277'	205200	001000	PRPMT1:	MOVSI	F,PVNMAI	;TUMS mail waiting?
  4024	005300'	616202	005271*		TDNN	F,JBTPRV(J)
  4025	005301'	254000	005305'		 JRST	PRPMT2		;No
  4026	005302'	412202	005300*		ANDCAM	F,JBTPRV(J)	;Yes, turn bit off
  4027					MOVEI	T1,[ASCIZ /[mail waiting]
  4028	005303'	201300	005725'	/]
  4029	005304'	260040	005235'		PUSHJ	P,CONMES	;Announce new mail
  4030
  4031	005305'	337000	003247*	PRPMT2:	SKIPG	THSDAT##	;Date set?
  4032					 PUSHJ	P,[PUSHJ P,INLMES
  4033						    ASCIZ /Remember to set date,time /
  4034	005306'	260040	005731'			   PJRST DAYTIM]
  4035	005307'	135200	005272*		LDB	F,PVYMOD	;Get mode (PDP vs XEXEC)
  4036	005310'	200304	005320'		MOVE	T1,PRMPT(F)	; GET PROMPT ADDRESS FROM (RH)
  4037	005311'	326200	005315'		JUMPN	F,NOTPDP	; PDP mode gets special check
  4038	005312'	550202	005027*		HRRZ	F,JBTLIC(J)	; Does user have any license set ?
  4039	005313'	332000	000004		SKIPE	F		; If not, give usual dot prompt
  4040	005314'	201300	005741'		 MOVEI	T1,[ASCIZ /!/]	; If so, give special prompt
  4041	005315'	262040	000002	NOTPDP:	POP	P,J
  4042	005316'	262040	000004		POP	P,F		; RESTORE F
  4043	005317'	254000	005235'		JRST CONMES		; TYPE ASCIZ AT (T1) AND POPJ
  4044
  4045	005320'	000000	005742'	PRMPT:	[ASCIZ "."]	; PDP10 mode without license
  4046	005321'	000000	005743'		[ASCIZ "-"]	; XEXEC mode
  4047			000002	JAPMOD==2
  4048	005322'	000000	005743'		[ASCIZ "-"]	; JXEXEC mode
  4049					[ASCIZ "READY
  4050	005323'	000000	005744'	"]			; SUDS mode
  4051
  4052	005324'	262040	000002	PRPER1:	POP	P,J
  4053	005325'	262040	000004		POP	P,F
  4054	005326'	201400	000056	PRPER::	MOVEI	T3,"."		;Print a period
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 80-2
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  4055	005327'	324740	001660'		PJRST	PRCHR		;Output it (preserving T1 and T2)
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 81
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  4056				;ROUTINE TO DEASSIGN A DEVICE EXCEPT CONTROLLING TTY
  4057				;CALL:	MOVE F, DEVICE DATA BLOCK
  4058				;	MOVE J, JOB NUMBER
  4059				;	PUSHJ P, DEASG
  4060				;	 ERROR NOT PREVIOUSLY ASSIGNED
  4061				;	OK RETURN WITH DEVICE DEASSIGNED, EXCEPT CONTROLLING
  4062				;		TELETYPE (LOGICAL NAME CLEARED)
  4063
  4064				EXTERNAL CPOPJ1,IPOPJ,IPOPJ1
  4065
  4066	005330'	135300	005265*	DEASG:	LDB T1,PJOBN		;WAS DEVICE ASSIGNED TO THIS JOB?
  4067	005331'	312300	000002		CAME T1,J
  4068	005332'	263040	000000		 POPJ P,		;NO, RETURN
  4069	005333'	261040	000002		PUSH P,J		;SAVE JOB NUMBER
  4070	005334'	205340	400000		MOVSI T2,DVDIRI		;CLEAR DIRECTORY IN CORE BIT
  4071	005335'	413344	000004		ANDCAB T2,DEVMOD(F)	;SET UP FOR TLNE , TOO
  4072	005336'	402004	000005		SETZM DEVLOG(F)		;CLEAR LOGICAL NAME
  4073	005337'	603340	020000		TLNE T2,TTYATC		;BUT DON'T DEASS CONTROLLING TTY
  4074	005340'	254000	000000*		 JRST IPOPJ1
  4075	005341'	602340	400000		TRNE T2,ASSCON		;IS DEVICE ASSIGNED BY CONSOLE?
  4076	005342'	350001	777777		 AOS -1(P)		;YES, DO OK RETURN
  4077	005343'	201340	400000		MOVEI T2,ASSCON		;SETUP ASSIGNED BE CONSOLE BIT FOR RELEA6
  4078	005344'	260040	000000*		PUSHJ P,RELEA6		;CLEAR JOB NO. IN DDB IF DDB NOT NEEDED
  4079	005345'	254000	000000*		JRST IPOPJ		;RESTORE JOB NUMBER AND RETURN
  4080
  4081				;DEASTY--ROUTINE TO DEASSIGN ALL DEVICES EXCEPT CTRLING (ATTACHED) TTY
  4082				;CALL:	MOVE J, JOB NUMBER
  4083				;	PUSHJ P, DEASTY
  4084
  4085	005346'	261040	000004	DEASTY:	PUSH P,F		;SAVE TTY DDB ADDRESS
  4086	005347'	554200	005105*		HLRZ F,DEVLST		;SEARCH ALL DDB'S
  4087	005350'	260040	005330'	DEA1:	PUSHJ P, DEASG		;TRY TO DEASSIGN IT
  4088	005351'	255000	000000		 JFCL			;IGNORE IF CAN'T
  4089	005352'	554204	000003		HLRZ F, DEVSER(F)
  4090	005353'	326200	005350'		JUMPN F, DEA1
  4091	005354'	262040	000004		POP P,F			;RESTORE TTY DDB ADDRESS
  4092	005355'	263040	000000		POPJ P,
  4093
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 82
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  4094
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 83
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  4095
  4096				;ROUTINES TO READ NUMBERS FROM COMMAND STRING
  4097				;CALL:	MOVE P4,DESIRED INPUT RADIX
  4098				;	PUSHJ P, ANYRIN
  4099				;	NO ARG. TYPED RETURN, T2=0
  4100				;	ILLEGAL CHARACTER RETURN
  4101				;	NORMAL EXIT	;AC T2 CONTAINS NUMBER
  4102				;SCAN STOPS ON FIRST CR,DASH,SPACE,OR TAB OR ILLEGAL CHAR.
  4103				;SKIPS LEADING SPACES AND TABS
  4104
  4105				INTERNAL OCTIN,OCTIN1,DECIN,DECIN1
  4106				EXTERNAL CPOPJ2
  4107
  4108	005356'	260040	005202'	DECIN:	PUSHJ P,SKIPS		;SKIP CURRENT CHARACTER
  4109	005357'	263040	000000		  POPJ P,0		;NOTHING LEFT
  4110	005360'	201740	000012	DECIN1:	MOVEI P4,12		;DECIMAL INPUT
  4111	005361'	254000	005371'		JRST ANYRIN
  4112
  4113	005362'	260040	005202'	OCTIN:	PUSHJ P,SKIPS		;SKIP CURRENT CHARACTER
  4114	005363'	263040	000000		  POPJ P,0		;NOTHING LEFT
  4115	005364'	260040	005402'		PUSHJ P,ANYR1
  4116	005365'	263040	000000		 POPJ P,
  4117	005366'	254000	005370'		 JRST .+2
  4118	005367'	263040	000000		 POPJ P,
  4119	005370'	201740	000010	OCTIN1:	MOVEI P4,10		;OCTAL INPUT
  4120	005371'	260040	005203'	ANYRIN:	PUSHJ P,SKIPS1	;SKIP LEADING SPACES, TABS, NULLS
  4121	005372'	263040	000000		  POPJ P,0		;NOTHING LEFT. RETURN.
  4122	005373'	301400	000060	OCT0:	CAIL	T3,"0"		;IS CHARACTER .GE. A ZERO?
  4123	005374'	301417	000060		CAIL	T3,"0"(P4)	;AND WITHIN RADIX BOUNDS?
  4124	005375'	254000	005402'		 JRST	ANYR1		;NO. NOT A LEGAL DIGIT
  4125	005376'	220340	000017		IMUL T2,P4		;YES. SCALE INPUT SO FAR
  4126	005377'	271350	777720		ADDI T2,-"0"(T3)	;AND ADD IN THIS DIGIT
  4127	005400'	260040	005174'		PUSHJ P,COMTYS		;GET ANOTHER CHARACTER
  4128	005401'	254000	005373'		JRST OCT0		;AND LOOP FOR MORE.
  4129
  4130	005402'	303400	000040	ANYR1:	CAILE T3,40		;CHECK FOR LEGAL TERMINATORS
  4131	005403'	306400	000054		CAIN T3,","		;USED IN VARIOUS ROUTINES
  4132	005404'	254000	000000*		JRST CPOPJ2		;OK
  4133	005405'	302400	000133		CAIE T3,"["		;MORE
  4134	005406'	306400	000135		CAIN T3,"]"		; ..
  4135	005407'	254000	005404*		JRST CPOPJ2		;OK.
  4136	005410'	306400	000113		CAIN T3,"K"		;FOR "CORE 55K"
  4137	005411'	254000	005407*		JRST CPOPJ2
  4138	005412'	306400	000120		CAIN T3,"P"		;OR "CORE 55P"
  4139	005413'	254000	005411*		JRST CPOPJ2
  4140	005414'	306400	000055		CAIN T3,"-"		;HYPHEN?
  4141	005415'	254000	005413*		JRST CPOPJ2		;OK.
  4142	005416'	254000	005166*		JRST CPOPJ1		;NO GOOD. GIVE "BAD CHARACTER RETURN"
  4143
  4144
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 84
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  4145				;GET PROJECT-PROGRAMMER NUMBERS
  4146				;CALL:	MOVE T1,INPUT BYTE POINTER
  4147				;	PUSHJ P,PJPGNO
  4148				;
  4149				;(P2)LH _ PROJECT NUMBER
  4150				;(P2)RH _ PROGRAMMER NUMBER
  4151				;(P2) = 0 IF NO [ ]'S TYPED
  4152				;THE TERMINAL ] IS OPTIONAL
  4153
  4154	005417'	201640	000000	PJPGNO::	MOVEI P2,0
  4155	005420'	603000	000002		TLNE S,2		;SPECIAL FILE?
  4156	005421'	200640	000000*		MOVE P2,%UPS+UPTRPN	;YES. GET SPECIAL FILE PPN
  4157	005422'	260040	005203'		PUSHJ	P,SKIPS1
  4158	005423'	263040	000000		 POPJ P,
  4159	005424'	302400	000133		CAIE	T3,"["		;IS IT A "[" ?
  4160	005425'	263040	000000		POPJ P,
  4161	005426'	260040	005362'		PUSHJ P,OCTIN		;GET FIRST ARG.-PROJ. NO.
  4162	005427'	254000	005213'		JRST COMERP		;NO ARG. GIVEN
  4163	005430'	254000	005213'		JRST COMERP		;ILLEGAL OCTAL CHARACTER GIVEN
  4164	005431'	322340	005213'		JUMPE T2,COMERP
  4165	005432'	504640	000007		HRL P2,T2		;ENTER
  4166	005433'	306400	000054		CAIN T3,","
  4167	005434'	260040	005362'		PUSHJ P,OCTIN		;GET SECOND ARG.-PROG. NO.
  4168	005435'	254000	005213'		JRST COMERP		;
  4169	005436'	254000	005213'		JRST COMERP		;
  4170	005437'	322340	005213'		JUMPE T2,COMERP
  4171	005440'	540640	000007		HRR P2,T2		;ENTER
  4172	005441'	306400	000135		CAIN T3,"]"		;IS USUAL ENDING A "]"?
  4173	005442'	260040	005174'		PUSHJ P,COMTYS	;YES, SKIP IT SO FINAL ] IS OPTIONAL
  4174	005443'	321640	005213'		JUMPL P2,COMERP
  4175	005444'	263040	000000		POPJ P,		;RETURN TO CALL
  4176
  4177
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 85
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  4178				;ROUTINE TO PRINT TIME AS HOURS,MINUTES,SECONDS, AND HUNDRETHS (NO CRLF)
  4179				;FORMAT IS HHMM:SS.HH, MM:SS, OR SS.HH IF HH AND MM ARE 0
  4180				;CALL:	MOVE T1,TIME		; IN JIFFIES(60THS,50THS OR MILLISECONDS)
  4181				;	PUSHJ P,PRTIME		; IF YOU WANT HH:MM:SS
  4182				;	PUSHJ P,PRTIM		; IF YOU WANT [[HH:]MM:]SS.HH
  4183				;SCALING IS DONE USING THE FOLLOWING GLOBAL SYMBOLS DEFINED IN COMMON
  4184				;THUS ANY INSTALLATION MAY HAVE ANY RATE CLOCK (50HZ OR 60HZ OR OTHER)
  4185
  4186				;JFYMIN=NO. OF JIFFIES(CLOCK TICKS) PER MINUTE
  4187				;JFYSEC=NO. OF JIFFIES PER SECOND
  4188
  4189	005445'	201400	000072	PRCOL::	MOVEI	T3,":"		;Print a colon
  4190	005446'	324740	005251*		PJRST	COMTYO
  4191
  4192	005447'	634340	000007	PRTIME::TDZA	T2,T2		;*ENTRY FOR HH:MM:SS
  4193	005450'	474340	000000	PRTIM::	 SETO	T2,		;*ENTRY FOR [[HH:]MM:]SS.HH
  4194	005451'	261040	000007		PUSH	P,T2		; SAVE ENTRY FLAG
  4195	005452'	230300	000000*		IDIV	T1,JFYMIN##	; FORM MINUTES
  4196	005453'	261040	000007		PUSH	P,T2		; SAVE REMAINDER IN JIFFIES
  4197	005454'	231300	000074		IDIVI	T1,^D60		; HOURS, MINUTES IN T1,T2
  4198	005455'	332001	777777		SKIPE	-1(P)		;* NOTE: POSITION ON STACK OF FLAG!!!
  4199	005456'	322300	005462'		 JUMPE	T1,PR0		; SUPPRESS 0 HOURS (ONLY FOR PRTIM ENTRY)
  4200	005457'	260040	005502'		PUSHJ	P,PRT2		; PRINT "HH"
  4201	005460'	260040	005445'		PUSHJ	P,PRCOL		; PRINT ":"
  4202	005461'	474300	000000		SETO	T1,		; FLAG THAT WE PRINTED SOMETHING
  4203	005462'	250300	000007	PR0:	EXCH	T1,T2		; GET MINUTES - PUT FLAG INTO T2
  4204	005463'	274340	000006		SUB	T2,T1		; SUBTRACT MINUTES FROM FLAG
  4205	005464'	332001	777777		SKIPE	-1(P)		;*DO NOT SUPRESS 0 MINUTES UNLESS 0 HRS SUPP.
  4206	005465'	322340	005470'		 JUMPE	T2,PR1		;  IF NO MINUTES 0-0=0 ELSE (-1)-? = -N
  4207	005466'	260040	005502'		PUSHJ	P,PRT2		; PRINT "MM"
  4208	005467'	260040	005445'		PUSHJ	P,PRCOL		; PRINT ":"
  4209	005470'	262040	000006	PR1:	POP	P,T1		; RESTORE SECONDS (IN JIFFIES)
  4210	005471'	230300	003402*		IDIV	T1,JFYSEC##	; JIFFIES PER SECOND
  4211	005472'	260040	005502'		PUSHJ	P,PRT2		; PRINT SECONDS AS "SS"
  4212	005473'	262040	000006		POP	P,T1		; RESTORE ENTRY POINT FLAG
  4213	005474'	336000	000006		SKIPN	T1		;*SKIP IF WE WANT ...SS.HH
  4214	005475'	263040	000000		  POPJ	P,		; ELSE RETURN
  4215	005476'	260040	005326'		PUSHJ	P,PRPER		; PRINT PERIOD
  4216	005477'	200300	000007		MOVE	T1,T2		; NO OF JIFFIES(HUNDRETHS)
  4217	005500'	221300	000144		IMULI	T1,^D100	; CONVERT TO HUNDRETHS
  4218	005501'	230300	005471*		IDIV	T1,JFYSEC	; (T1 * 100) / 60 = HUNDREDTHS OF A SEC.
  4219
  4220				;PRT2 - Print contents of T1 as a 2 digit number
  4221
  4222	005502'	201400	000060	PRT2::	MOVEI	T3,"0"		;Begin with a zero
  4223	005503'	261040	000006		PUSH	P,T1		;Save T1 over I/O
  4224	005504'	305300	000012		CAIGE	T1,^D10		; DO WE NEED A SECOND DIGIT?
  4225	005505'	260040	005446*		 PUSHJ	P,COMTYO	; PUT LEADING 0 IF LESS THAN 10
  4226	005506'	262040	000006		POP	P,T1		; RESTORE T1
  4227					PFALL	PRTDEC		; PRINT REST OF NUMBER
  4228
  4229				;PRTDEC - Print contents of T1 as a decimal number, preserving T2
  4230
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 85-2
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  4231	005507'			RADX10:: ;Alias used by FILUUO,ONCDSK,ONCE,SIMIO
  4232	005507'	261040	000007	PRTDEC::PUSH	P,T2		;Save T2 since PRTDIG uses it
  4233	005510'	201400	000055		MOVEI	T3,"-"		;Hyphen in case negative
  4234	005511'	261040	000006		PUSH	P,T1
  4235	005512'	335000	000006		SKIPGE	T1		;Positive?
  4236	005513'	260040	005505*		 PUSHJ	P,COMTYO	;No, output minus sign
  4237	005514'	262040	000006		POP	P,T1
  4238	005515'	217000	000006		MOVMS	T1		;Force positive
  4239	005516'	260040	000000*		PUSHJ	P,PRTDIG##	;Print decimal digits (uses T1 and T2)
  4240	005517'	324740	001635*		PJRST	T2POPJ##	;Restore T2 and return
  4241
  4242				;DECP1 - Add one to contents of T1 and then print decimal number
  4243	005520'	344300	005507'	DECP1::	AOJA	T1,PRTDEC	;Add 1 and go print
  4244
  4245	005521'	350000	000000*		$END	(CCN)

  4246	005522'	263040	000000

  4247	005523'	410317	000000

  4248	005524'	541700	005133'

  4249	005525'	254000	000157'

  4250	005526'	260040	000000*

  4251	005527'	435544	565452

  4252	005530'	000001	000000

  4253	005531'	254000	000261'

  4254	005532'	254000	000260'

  4255	005533'	256000	000000'

  4256	005534'	254000	000252'

  4257	005535'	000000	000006

  4258	005536'	070340	000770'

  4259	005537'	070340	002270'

  4260	005540'	070340	002267'

  4261	005541'	070340	002265'

  4262	005542'	100000	004256'

  4263	005543'	070340	002304'

  4264	005544'	262040	000002
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 85-3
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES


  4265	005545'	254000	005214'

  4266	005546'	415454	000000

  4267	005547'	000600	000006

  4268	005550'	000000*	001000

  4269	005551'	260040	005526*

  4270	005552'	535154	656022

  4271	005553'	000002	000000

  4272	005554'	000000*	000440*

  4273	005555'	402032	000000*

  4274	005556'	324740	000000*

  4275	005557'	000000	005555'

  4276	005560'	550350	000000

  4277	005561'	020000	020000

  4278	005562'	604357	550000

  4279	005563'	205300	376000

  4280	005564'	436302	001672*

  4281	005565'	263040	000000

  4282	005566'	000000	000012

  4283	005567'	000177	000177

  4284	005570'	515651	645141

  4285	005571'	446353	435456

  4286	005572'	000004	010000

  4287	005573'	637163	644164

  4288	005574'	636544	630000

  4289	005575'	626047	000000

  4290	005576'	200353	000000

COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 85-4
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  4291	005577'	552200	000000*

  4292	005600'	550300	005577*

  4293	005601'	200200	005600*

  4294	005602'	402013	000000

  4295	005603'	400020	400000

  4296	005604'	102500	003104'

  4297	005605'	202114	172312

  4298	005606'	203355	772100

  4299	005607'	717136	420400

  4300	005610'	202515	166712

  4301	005611'	717214	171322

  4302	005612'	673164	061712

  4303	005613'	607474	571500

  4304	005614'	647344	000000

  4305	005615'	203335	167352

  4306	005616'	723136	300000

  4307	005617'	243114	172312

  4308	005620'	203535	665734

  4309	005621'	677575	624500

  4310	005622'	000000	000000

  4311	005623'	262040	000000

  4312	005624'	262040	000014

  4313	005625'	254000	005252'

  4314	005626'	200300	000000*

  4315	005627'	400000	005516*

  4316	005630'	260040	005326'

  4317	005631'	260040	005627*
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 85-5
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES


  4318	005632'	254000	004051'

  4319	005633'	335000	000000*

  4320	005634'	350000	005633*

  4321	005635'	563000	005634*

  4322	005636'	550300	005635*

  4323	005637'	542300	005636*

  4324	005640'	261046	000000

  4325	005641'	331000	005637*

  4326	005642'	553000	005641*

  4327	005643'	550640	005642*

  4328	005644'	202615	000000

  4329	005645'	542640	005643*

  4330	005646'	777750	004355'

  4331	005647'	777777	004405'

  4332	005650'	000015	066705

  4333	005651'	265300	005233'

  4334	005652'	463235	564750

  4335	005653'	203137	061712

  4336	005654'	627116	320332

  4337	005655'	607615	166752

  4338	005656'	664000	000000

  4339	005657'	000000	000000*

  4340	005660'	265300	005233'

  4341	005661'	447354	161750

  4342	005662'	647555	172362

  4343	005663'	203315	166722

COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 85-6
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES

  4344	005664'	721016	467736

  4345	005665'	203314	171316

  4346	005666'	624000	000000

  4347	005667'	661600	000700

  4348	005670'	254000	004744'

  4349	005671'	777772	004706'

  4350	005672'	700140	000000*

  4351	005673'	472371	642400

  4352	005674'	406504	000000

  4353	005675'	242133	042606

  4354	005676'	244000	000000

  4355	005677'	202450	540610

  4356	005700'	000000	000000

  4357	005701'	202572	244650

  4358	005702'	424000	000000

  4359	005703'	202150	552206

  4360	005704'	440000	000000

  4361	005705'	202312	000000

  4362	005706'	202200	005601*

  4363	005707'	500200	005706*

  4364	005710'	316200	005707*

  4365	005711'	331200	005710*

  4366	005712'	542200	005711*

  4367	005713'	440600	000007

  4368	005714'	064240	000000

  4369	005715'	677415	667750

  4370	005716'	647074	520356
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 85-7
COMCON.MAC	 6-NOV-87 01:34		COMCSS - COMMON COMMAND SUBROUTINES


  4371	005717'	607236	464734

  4372	005720'	634321	200000

  4373	005721'	000000	005715'

  4374	005722'	667035	166100

  4375	005723'	737035	172322

  4376	005724'	673161	505000

  4377	005725'	557334	164730

  4378	005726'	203574	164750

  4379	005727'	647354	756432

  4380	005730'	050000	000000

  4381	005731'	260040	005243'

  4382	005732'	036454	566712

  4383	005733'	667054	571100

  4384	005734'	723364	071712

  4385	005735'	721014	460750

  4386	005736'	625316	464732

  4387	005737'	625000	000000

  4388	005740'	324740	003170'

  4389	005741'	204000	000000

  4390	005742'	270000	000000

  4391	005743'	264000	000000

  4392	005744'	512130	142262

  4393	005745'	064240	000000

  4394						;End of COMCON (CCNLIT: CCNEND:)
  4395
NO ERRORS DETECTED
PROGRAM BREAK IS 005752
10K CORE USED
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 86
COMCON.MAC	 6-NOV-87 01:34		SYMBOL TABLE

AB.FET		000400	SPD	CBLANK		004251'		CMFIDX		000316'	INT	COR4		002143'	
AB.RED		000200	SPD	CCLRUN		002270'		CMFSIZ		000003		COR5		002072'	
AB.USR		000040	SIN	CCNEND		005751'	INT	CMFSTA		000005	SIN	CORE		002032'	
AB.WRT		000100	SPD	CCNLIT		005521'	INT	CMNCFN		000007	SIN	CPOPJ		004062'	EXT
ABKINS		004714'		CFIN		005045'		CMNOTF		005521'	EXT	CPOPJ1		005416'	EXT
ABKLEN		000006	SPD	CFIN1		005046'		CMWB		200000	SIN	CPOPJ2		005415'	EXT
ABKMON		005007'	INT	CFINI		005022'		CMWRQ		002000	SPD	CPUKL		000002	SPD
ABKSET		005017'	EXT	CFINIX		005102'		CNTRLC		000400	SIN	CPUKS		000003	SPD
ABKTAB		004706'		CHGCLK		000257'	EXT	CNVVPN		000440	SIN	CPUTYP		000002	SPD
ABKUU1		005016'		CHKACT		000115'		COMCMR		000342'		CPZZ		000000	SPD
ABKUUO		005010'	INT	CHKASL		004640'	INT	COMCNT		000347'	EXT	CRLF		005234'	INT
ACTWRT		001377'	EXT	CHKAT1		002676'		COMCON		000000'	ENT	CTEX		005155'	
ALOGIN		002237'		CHKATT		002655'		COMDAS		004510'	EXT	CTEX0		005143'	
ALR620		004546'	EXT	CHKCO2		000134'		COMDIS		000157'		CTEXT		005136'	INT
ALROPR		000020	SIN	CHKKIL		000231'		COMER		000152'		CTEXT1		005140'	INT
ALRSCH		001000	SIN	CHKRUN		000070'		COMER1		005226'		CTEXTA		005152'	
ANYACT		000137'	EXT	CHKSGJ		003345'	EXT	COMERA		005214'	INT	CTXDEV		005170'	
ANYR1		005402'		CKFCN		001744'		COMERL		005220'		CTXTAB		005555'	EXT
ANYRIN		005371'		CKRCER		000077'		COMERP		005213'		CTYBLF		004547'	EXT
ARCOM		002271'		CKSLC		004647'		COMERR		005215'	INT	CTYLDB		003737'	EXT
ARCOM1		002273'		CLKJOB		000256'	EXT	COMFLG		000370'	EXT	CURUPT		000000	EXT
ASSASG		003034'	EXT	CLKTRU		003405'	EXT	COMFN1		000055'		DAMESS		003104'	
ASSCON		400000	SIN	CLOGIN		002252'		COMFND		000053'		DATCOM		003203'	EXT
ASSER0		002402'		CLOSE0		005054'	EXT	COMFSV		000433'		DAYTI0		003203'	
ASSER1		002403'		CLRAUT		004630'		COMGO		000153'		DAYTI1		003242'	
ASSER2		002404'		CLRFRM		001030'	INT	COMJSV		000434'		DAYTI2		003262'	
ASSF0		002421'		CLRLOK		004674'		COMKJB		000264'	INT	DAYTIM		003170'	INT
ASSF1		002433'		CLRSPR		004666'		COMLP		000033'		DCOM		004153'	
ASSF2		002434'		CLSCOM		005023'		COMLP1		000031'		DDBLDB		003614'	EXT
ASSFIN		002412'		CMDCK2		040000		COMMAN		000003'	INT	DDTGO		001430'	
ASSG0		002327'		CMDCKW		000356'	INT	COMMXL		223000	SIN	DEA1		005350'	
ASSG2		002340'		CMDCMF		200000		COMNEQ		000045'		DEAER1		002455'	
ASSG3		002325'		CMDCMK		100000		COMPNM		000435'		DEAER2		002463'	
ASSG4		002344'		CMDCMR		400000		COMSAV		000432'		DEASG		005330'	
ASSG5		002372'		CMDCMX		000315'		COMSOP		004442'	INT	DEASSI		002445'	
ASSG7		002400'		CMDMOD		001023'		COMTAB		000440'	INT	DEASTY		005346'	
ASSG8		002376'		CMDNLJ		000164'	INT	COMTMS		003101'	EXT	DECIN		005356'	INT
ASSIGN		002315'		CMDRCM		000424'		COMTOT		000350'	EXT	DECIN1		005360'	INT
ASSPRG		200000	SIN	CMDRES		001027'		COMTYI		005220'	EXT	DECLF		001133'	INT
ATDV1		002745'		CMDRST		000351'		COMTYO		005513'	EXT	DECP1		005520'	INT
ATDV2		002743'		CMDSC1		000370'		COMTYS		005174'	INT	DECUSE		005556'	EXT
ATT1		003010'	INT	CMDSC2		000373'		COMTYT		003722'	EXT	DEFDSP		004436'	
ATT2A		002751'		CMDSC3		000406'		COMWC1		000302'		DEFLEN		000001	SPD
ATT3		002764'		CMDSC4		000420'		COMWCM		000275'	INT	DEFMXL		000000	SPD
ATT4		003002'		CMDSCE		000422'		CON0		005237'		DEFTBL		004405'	
ATT4X		004001'		CMFCDC		000001	SIN	CONMES		005235'	INT	DELAYN		001503'	INT
ATT5		002773'		CMFCDT		000006	SIN	CONT		001722'		DETAC1		003047'	
ATTACH		002700'		CMFCHT		000010	SIN	CONTC		001722'		DETACH		003016'	
BGBENF		004563'	EXT	CMFCKJ		000012	SIN	COR0		001032'		DETMSG		003053'	
BIGBEN		004564'	EXT	CMFCKM		000003	SIN	COR00		001036'		DEVATT		002723'	
BITNTB		000372'	EXT	CMFCOM		000327'		COR1		002050'		DEVEXT		000016	SIN
BITTBL		000353'	EXT	CMFCXI		000011	SIN	COR2		002102'		DEVFIL		000015	SIN
CBLANK		004251'		CMFCXJ		000002	SIN	COR3		002106'		DEVLG		002417'	EXT
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 86-2
COMCON.MAC	 6-NOV-87 01:34		SYMBOL TABLE

DEVLOG		000005	SIN	FCONRQ		001751'	INT	JBTSLM		004573'	EXT	LICJAL		001000	SIN
DEVLST		005347'	EXT	FCONT		001731'		JBTSTA		003427'	EXT	LICMAX		000000	EXT
DEVMOD		000004	SIN	FDV1		005047'		JBTSTS		004667'	EXT	LICMSK		002660'	EXT
DEVNAM		000000	SIN	FINAL1		005074'		JBTUN1		001110'	EXT	LICNEW		000437'	
DEVOPR		004460'	EXT	FINALL		005070'		JBTUNM		001106'	EXT	LICOPR		100000	SIN
DEVPHY		002322'	EXT	FREDEV		005104'		JBTUPM		002154'	EXT	LICSAV		000436'	
DEVPPN		000017	SIN	FRMCOM		000365'		JBTWCH		005564'	EXT	LICSPY		200000	SIN
DEVSER		000003	SIN	GANBGN		003632'		JBYINA		004634'	EXT	LICTBL		001223'	EXT
DEVSRC		005035'	EXT	GANERR		003710'		JBYMWS		003453'	EXT	LICTDV		010000	SIN
DIE		005551'	EXT	GANGET		003657'		JBYUWS		002151'	EXT	LICUNU		000020	SIN
DISCM1		001215'		GANTST		003653'		JBYWCH		001714'	EXT	LICWCR		400000	SIN
DISCM2		001216'		GENP		001004'		JCER2		002024'		LINTAB		000000	EXT
DISCMD		001207'		GENSZ		000005	SPD	JCONT		001776'		LKUUP1		001326'	
DISCMX		001240'		GET		002175'		JDCON		020000	SIN	LKUUPT		001324'	
DISP		000664'		GETGMT		003170'	EXT	JERR		020000	SIN	LMMEXS		001301'	EXT
DLYCM		005132'		GETJOB		002175'	EXT	JFYHR		003234'	EXT	LMPNER		001037'	EXT
DLYCM1		005133'		GETLMA		001300'	EXT	JFYMIN		005452'	EXT	LOCDAY		003312'	EXT
DLYCOM		005132'	EXT	GETULT		001560'	EXT	JFYSEC		005501'	EXT	LOCHOR		003325'	EXT
DMCOM		004200'		HELP1		002225'		JLOG		000004	SIN	LOCMIN		003330'	EXT
DMCOM1		004173'		HELPPP		002256'	EXT	JNA		040000	SIN	LOCMON		003314'	EXT
DSKCOM		000743'	EXT	HOLD		005103'	EXT	JNERR		003776'		LOCSEC		003333'	EXT
DSKKJB		001257'	EXT	HVCORE		400000	SPD	JOB		005076'	EXT	LOCTIM		003307'	INT
DSKLOD		002234'		INADEF		004615'	EXT	JOB1		001037'	INT	LOCWEK		003273'	EXT
DSKRES		005104'	EXT	INADFL		005657'	EXT	JOBDDT		001430'	EXT	LOCYER		003322'	EXT
DSTCHK		003240'	EXT	INCOR		004000	SPD	JOBEXM		005645'	EXT	LOGDET		002244'	
DSZONE		003137'		INCUSE		001323'	EXT	JOBFDV		005712'	EXT	LOGER1		003060'	
DVCNSG		002530'	EXT	INIARB		001052'	EXT	JOBKL		001255'	INT	LOGREF		002200'	
DVDIRI		400000	SIN	INITIA		002231'		JOBN		003604'	EXT	LOKJOB		004676'	EXT
DVDSK		200000	SIN	INLMES		005243'	INT	JOBREN		001425'	EXT	LOKUPT		001323'	
DVDTA		000100	SIN	IPOPJ		005345'	EXT	JOBSA		001343'	EXT	LOP01		005107'	
DVRMT		004000	SIN	IPOPJ1		005340'	EXT	JOBVER		005626'	EXT	LOP01A		005126'	
DVTTY		000010	SIN	J		000002	INT	JSTCTX		040000	SIN	LOP01B		005120'	
DWNFLG		004222'	EXT	JACCT		000001	SIN	KCLEAR		001310'	EXT	LOP02		005127'	
ECOM		004103'		JACCT2		100000	SIN	KILPGS		001047'	EXT	LP101		000000	SPD
ECOMC		004136'		JAPMOD		000002	SPD	KILUP1		001300'		LP102		000065	SPD
EMCOM		004115'		JBLMSK		004612'	EXT	KILUP2		001302'	INT	LP103		000067	SPD
ENACM1		001145'		JBPWDR		020000	SIN	KILUPT		001272'		LP104		000137	SPD
ENACM2		001146'		JBPWDW		010000	SIN	KJB1		001243'		LP105		000137	SPD
ENACMD		001135'		JBPWDY		200000	SIN	KJBIT		000261'		LP106		000211	SPD
ENACMX		001174'		JBPWRN		100000	SIN	KJBT1		000260'		LP107		000214	SPD
ENAERR		001200'		JBPWWT		040000	SIN	KJBT3		000252'		LP108		000224	SPD
ENFERR		003773'		JBTAUN		002671'	EXT	KJOB		001244'		LP941		000000	SPD
EPLLEN		000000	EXT	JBTCNK		003425'	EXT	KJOB2		001254'		LP942		000065	SPD
ERRFCL		001030'	EXT	JBTCTX		001451'	EXT	KSTOP		001271'	EXT	LP943		000067	SPD
ERRFLG		000001	SPD	JBTINA		000005'	EXT	KSYS		004555'	EXT	LP944		000137	SPD
ERRMES		005233'	INT	JBTLIC		005312'	EXT	LDBDCH		003750'	EXT	LP945		000137	SPD
ERRNSA		001373'	EXT	JBTLIM		004574'	EXT	LDBDDB		005263'	EXT	LP946		000213	SPD
ERRSTR		003770'		JBTNAM		003456'	EXT	LDBLOG		003762'	EXT	LP947		000214	SPD
ESTOP		004200'	EXT	JBTPC		003506'	EXT	LDLCOM		003751'	EXT	LP948		000224	SPD
F		000004	INT	JBTPPN		003705'	EXT	LDPLNO		003756'	EXT	LPGE1		000000	SPD
FCNCNT		001765'		JBTPRG		004010'	EXT	LGONAM		001250'	EXT	LPGE10		000224	SPD
FCNNOW		001770'		JBTPRV		005302'	EXT	LICGDV		020000	SIN	LPGE2		000064	SPD
FCNSKP		001774'		JBTSLC		005030'	EXT	LICJAL		001000	SIN	LPGE3		000070	SPD
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 86-3
COMCON.MAC	 6-NOV-87 01:34		SYMBOL TABLE

LPGE4		000137	SPD	OPRTIM		004466'	EXT	PRT2		005502'	INT	REASE3		002636'	
LPGE5		000150	SPD	P		000001	INT	PRTABK		004761'		REASE4		002630'	
LPGE6		000211	SPD	P1		000014	INT	PRTDC1		003411'		REASE5		002633'	
LPGE7		000213	SPD	P10SZ		000004	SPD	PRTDC2		003412'		REASE6		002640'	
LPGE8		000214	SPD	P2		000015	INT	PRTDD0		001572'		REASE7		002642'	
LPGE9		000214	SPD	P3		000016	INT	PRTDD1		001607'		REASS		002507'	
LPRES1		000024	SPD	P4		000017	INT	PRTDD2		001615'		REASS1		002520'	
LPRES2		000041	SPD	PC.USR		010000	SIN	PRTDD3		001620'		REASS2		002577'	
LPSUD1		000010	SPD	PCOM		001433'		PRTDDB		001567'	INT	REASS3		002610'	
LPSUD2		000067	SPD	PCRLF		000173'		PRTDEC		005507'	INT	REASS4		002574'	
LPSUD3		000067	SPD	PCRLF0		000202'		PRTDI8		004102'	EXT	REASS5		002547'	
LPSUD4		000070	SPD	PCRLF1		000216'		PRTDIG		005631'	EXT	REASSI		002475'	INT
M		000013	INT	PDP10P		000772'		PRTDIR		001651'	INT	REENTE		001425'	
MAPUPS		005024'	EXT	PG		000003	INT	PRTIM		005450'	INT	REFLAG		002254'	EXT
MDSP		000753'		PHONLY		400000	SIN	PRTIME		005447'	INT	RELEA5		002603'	EXT
MIDNIT		001717'	EXT	PJBSTS		003461'	EXT	PRTPPN		001623'	INT	RELEA6		005344'	EXT
MINCOR		020000	SPD	PJOB		001132'	INT	PRTTM1		003370'		RELEAX		005052'	EXT
MONABK		004755'		PJOBCM		001054'		PRTUNM		001636'	INT	REQUE		001467'	EXT
MONJOB		004176'	EXT	PJOBN		005330'	EXT	PRTWDR		003442'	EXT	RESET		001041'	EXT
MONSTR		005071'	EXT	PJOBX		001070'	INT	PRTWDW		003446'	EXT	RESP		001015'	
MONTAB		003215'	EXT	PJOBX1		001125'		PRTWRN		001706'		RESRUN		002304'	
MRQ		100000	SIN	PJPGNO		005417'	INT	PRTWWT		001714'		RESSZ		000001	SPD
MSTART		005070'	EXT	PJRST	324740	000000		PRVER1		004047'		RPGBIT		070340	SPD
MXLIN		003757'	EXT	PJSP	265000	000000		PRVER2		004051'		RTIME		003360'	EXT
NCMD		000763'		PJUMPE	322000	000000		PRVER3		004057'		RUN		400000	SIN
NCMDS		001021'		PLSXPN		000004	SPD	PRVERS		004020'	INT	RUN1		003355'	
NCMFLG		000367'	EXT	PPNUSR		001636'	EXT	PRVERT		004065'		RUNCO2		002300'	
NCMRES		001017'		PR0		005462'		PRVLOG		002262'		RUNCO3		002277'	
NCTXPG		000000	EXT	PR1		005470'		PRVRT0		004072'		RUNCOM		002276'	
NOACT		040000	SPD	PR6BIT		001130'	EXT	PRVRT1		004100'		RUNJB2		002302'	EXT
NOCOM		004256'		PRCHR		001660'	INT	PUUOAC		005055'	EXT	RUNJOB		002300'	EXT
NOCOM2		000427'		PRCOL		005445'	INT	PVACTS		020000	SIN	RUNT2		003404'	
NOCORQ		001321'	EXT	PRCOM		001657'	INT	PVDINA		000400	SIN	RUNTIM		003336'	
NOCRLF		000200	SPD	PRF		004000	SIN	PVEXO		400000	SIN	S		000000	INT
NODIE		000000	EXT	PRGRUN		000770'		PVMAIL		010000	SIN	S$ENTR	777777	777775	SIN
NOLOGI		100000	SPD	PRLBK		001565'		PVMHNG		300000	SIN	S$EVEN		000006	SIN
NOMESS		000002	SPD	PRLPR		001655'	INT	PVNHNG		000024	SIN	S$HALT	777777	777777	SIN
NOPER		000100	SPD	PRMPT		005320'		PVNMAI		001000	SIN	S$INFO		000005	SIN
NOPRNT		001264'	EXT	PRNAME		005126'	EXT	PVNOAT		200000	SIN	S$JOB		000002	SIN
NORUN		010000	SPD	PROPRG		002212'		PVRCMD		001000	SIN	S$NAME		000000'	SPD
NOTDEV		002455'		PRPER		005326'	INT	PVSCMD		000200	SIN	S$NONA		000000	SIN
NOTENF		005252'	INT	PRPER1		005324'		PVYCOR		002127'	EXT	S$PATC		000007	SIN
NOTIC		150300	SPD	PRPMT1		005277'		PVYHNG		000250'	EXT	S$STOP		000001	SIN
NOTPDP		005315'		PRPMT2		005305'		PVYMOD		005307'	EXT	S$TEMP		000000	SPD
NSRBIT		400000	SIN	PRPRMT		005260'	INT	PVYTIM		003230'	EXT	S$XCT	777777	777776	SIN
OCT0		005373'		PRQM		005246'	INT	PVZMOD		000000	EXT	SAVE		002170'	
OCTIN		005362'	INT	PRRBKC		001563'		PX.MEM		000004	SPD	SAVE1		001567'	EXT
OCTIN1		005370'	INT	PRRPR		001653'	INT	PXCT	256000	000000		SAVJOB		002171'	EXT
OCTPNT		004771'	EXT	PRRSP1		001504'	INT	QQ		000000	SPD	SCHPRV		010000	SIN
OPRDTM		003263'	INT	PRRSP3		001505'	INT	RADX10		005507'	INT	SCNTCD		004302'	EXT
OPRFRE		004462'	EXT	PRRSP4		001506'	INT	RCOM		002263'		SEND		003517'	
OPRLDB		004461'	EXT	PRRSP5		001507'	INT	REASE1		002626'		SEND1		003556'	
OPROUT		003264'	EXT	PRSPC		005250'	INT	REASE2		002632'		SEND2		003562'	
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88 PAGE 86-4
COMCON.MAC	 6-NOV-87 01:34		SYMBOL TABLE

SENDA		003627'		SNDGAN		003677'		TKCHLD		001265'	EXT	UPTSPD		000000	EXT
SENDA2		003640'		SNDGN1		003705'		TPOPJ		005240'	EXT	UPTSTS		000000	EXT
SENDA3		003647'		SNDTYI		003721'		TRESCN		005216'	EXT	UPTUAC		000000	EXT
SENDAL		003635'		SNOAR1		001345'		TRHALT		001472'	EXT	UPTXAC		000000	EXT
SENDAX		003663'		SNOAR2		001352'		TSETBI		005227'	EXT	USESTA		003422'	
SENDC		003576'		SNOARG		001343'		TTCEXI		004306'		USTART		001402'	EXT
SENDF		003617'		SNOATT		004703'		TTCMCA		005221'	EXT	USYPSR		001423'	EXT
SENDHD		003731'		SRPNDS		004227'	EXT	TTCMCH		005204'	EXT	USYUWL		004533'	EXT
SENDJ		003600'		SSAVE		002171'		TTKJOB		001500'	INT	USYUWM		004530'	EXT
SENDT		003541'		STARC1		001403'		TTYATC		020000	SIN	UTRP		040000	SIN
SENDT1		003555'		STARC2		001355'		TTYATT		002715'	EXT	UXYPTM		001325'	EXT
SENDX		003563'		STARCL		200000	SIN	TTYC1		004302'		VERPR		004004'	
SENDX1		003670'		STARDI		400000	SIN	TTYCE		004304'		VMINFO		002145'	INT
SENDX2		003665'		START		001333'		TTYCL		004276'		VPUMAX		000000	EXT
SETABD		004744'		STARTC		001333'		TTYCMD		004257'		W		000012	INT
SETABK		004722'		STARTX		001361'	INT	TTYCMR		000344'	EXT	WATCH		001510'	INT
SETABL		004735'		STARX1		001371'		TTYDET		003052'	EXT	WATCH1		001536'	
SETATT		004700'		STATES		004465'	EXT	TTYFND		002722'	EXT	WATLEN		000007	SPD
SETAUT		004607'		STOP		001435'		TTYFNU		005102'	EXT	WATLOP		001512'	
SETBEN		004557'		STOPA		001471'		TTYFUW		004212'	EXT	WATMXL		006000	SIN
SETBL		004355'	INT	STOPAA		001473'		TTYHLT		000241'	EXT	WATTAB		001543'	INT
SETBLL		000030	SPD	STOPC		001456'		TTYKIL		001270'	EXT	WCH1		001676'	
SETCMD		004310'		STRBTS		000000	EXT	TTYNAM		003735'	EXT	WCHALL		376000	SIN
SETDAT		004470'		STRDDB		002142'	EXT	TTYPHY		004265'	EXT	WCHBEG		001552'	
SETDEF		004347'		STRTAD		001416'	EXT	TTYRNC		000020	SPD	WCHEND		001663'	
SETDFI		004576'		STRTAL		002143'	EXT	TTYRNU		000040	SPD	WCHLEN		000004	SPD
SETDSP		004406'		STRTCL		001420'	EXT	TTYRNW		000010	SPD	WCHLOP		001671'	
SETHAP		004544'		STSHUT		400000	SIN	TTYSTC		004152'	EXT	WCHTAB		001702'	
SETKIL		000244'		STSTBL		003463'	EXT	TTYSTR		000220'	EXT	WLKUPX		001272'	EXT
SETKSY		004551'		STSUPR		200000	SIN	TTYTAB		003612'	EXT	WRADB	700140	000000	
SETLOG		004654'		STZONE		003106'		TTYUSR		000211'	EXT	XX	000055	607773	SPD
SETLOK		004671'		SUDP		001012'		TTYUSW		000213'	EXT	YY		000000	SPD
SETMXL		027000	SIN	SUDRUN		002267'		TYMP		000777'		ZZ	000050	626255	SPD
SETNOP		004452'		SUDSZ		000002	SPD	TYMSZ		000004	SPD	%UPLMA		001040'	EXT
SETOPR		004437'		SWPINP		002000	SIN	TYOAL1		003756'		%UPS		000000	EXT
SETRUN		001770'	EXT	SWSL1		004525'		TYOAL2		003761'		%UPT		000000	EXT
SETSHT		004244'	EXT	SWSL2		004535'		TYOALL		003754'		%UPT.N		000000	EXT
SETSPR		004662'		SYSDEV		000100	SIN	TYPCC		000103'		.CPSNO		001127'	EXT
SETTIM		003067'		SYSRUN		002265'		TYPESC		000110'		.PVHCN		000002	SIN
SETTRU		004565'		T1		000006	INT	U		000005	INT	.PVHDT		000001	SIN
SETWSL		004513'		T2		000007	INT	ULDUPX		001320'	EXT	.PVHKJ		000000	SIN
SGSET		002303'	EXT	T2POPJ		005517'	EXT	ULKUPT		001322'		.PVHTM		000003	SIN
SGSETD		002177'	EXT	T3		000010	INT	UPSJOB		001315'	EXT	
SKDCM2		004235'		T4		000011	INT	UPTABK		000000	EXT	
SKDCOM		004227'	INT	TABFLP		004325'		UPTHCU		000000	EXT	
SKED1		004246'		TABFND		004343'		UPTHRL		000000	EXT	
SKEDUL		004214'		TABNEQ		004336'		UPTJDA		000000	EXT	
SKIPS		005202'	INT	TABSRC		004316'		UPTPC		000000	EXT	
SKIPS1		005203'	INT	THSDAT		005305'	EXT	UPTPDL		000000	EXT	
SLPQ		001410'	EXT	TIMADJ		003404'	EXT	UPTPID		000000	EXT	
SNDBSI		003572'		TIME		001715'	EXT	

COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

AB.FET	  3623#	  3638	  3640	  3650	  3700
AB.RED	  3621#	  3636	  3640	  3650	  3694
AB.USR	  3624#	  3648	  3667	  3678	  3691	  3710
AB.WRT	  3622#	  3637	  3640	  3650	  3697
ABKINS	  3636#	  3655	  3661
ABKLEN	  3634#	  3652	  3658
ABKMON	  3672	  3705#
ABKSET	  3669%	  3669	  3716%	  3716
ABKTAB	  3628#	  3634	  3652	  3658
ABKUU1	  3709	  3711	  3715#
ABKUUO	  3709#
ACTWRT	    60%	  1096	  1101	  1140	  1144	  1308
ALOGIN	  1948	  1967#	  1986
ALR620	  3218	  3247%	  3429	  3499
ALROPR	  3428	  3498
ALRSCH	  3215
ANYACT	    61%	   164
ANYR1	  4115	  4124	  4130#
ANYRIN	  4111	  4120#
ARCOM	   910	  1157	  1364	  1955	  1959	  1988	  2006	  2011#
ARCOM1	  2003	  2013#
ASSASG	    61%	  2064	  2093	  2099	  2413
ASSCON	  2056	  2092	  2098	  2255	  2412	  3793	  4075	  4077
ASSER0	  2094	  2112#
ASSER1	  2100	  2113#
ASSER2	  2114#	  2414
ASSF0	  2107	  2127#
ASSF1	  2104	  2126	  2131#
ASSF2	  2096	  2132#
ASSFIN	  2066	  2101	  2119#
ASSG0	  2058#	  2069
ASSG2	  2065	  2068#
ASSG3	  2053	  2056#
ASSG4	  2054	  2060	  2075#
ASSG5	  2077	  2098#
ASSG7	  2087	  2106#
ASSG8	  2084	  2103#
ASSIGN	   878	  2046#
ASSPRG	  2223	  2264	  2268	  2359	  2364	  2417	  3793
ATDV1	  2358	  2364#
ATDV2	  2361#	  2366
ATT1	  1014	  1760	  2301	  2330	  2391#	  2624	  2957
ATT2A	  2339	  2369#
ATT3	  2335	  2370	  2379#
ATT4	  1763	  2276	  2333	  2387#	  2961
ATT4X	  2820	  2959#
ATT5	  2350	  2356	  2367	  2383#
ATTACH	   883	  2325#
BGBENF	  3514%	  3514
BIGBEN	  3515%	  3515
BITNTB	   472%	   472
BITTBL	   340%	   340	   416%	   416
CBLANK	   866	  3232#
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

CCLRUN	   896	  2009#
CCNEND	  4394#
CCNLIT	  4245#
CFIN	  3747	  3750#
CFIN1	  3751#	  3778
CFINI	   844	  3728#
CFINIX	  3748	  3781#
CHGCLK	   274%	   274	   277%	   277
CHKACT	   128	   144#
CHKASL	  3548	  3558	  3567#
CHKAT1	  2315	  2322#
CHKATT	  2304#	  2334
CHKCO2	   145	   152	   161#
CHKKIL	   225	   246#
CHKRUN	   121	   125#
CHKSGJ	  1017	  2618%	  2627
CKFCN	  1715	  1723#	  1732	  1765
CKRCER	   130	   133#
CKSLC	  3420	  3432	  3447	  3497	  3503	  3510	  3528	  3575#	  3590	  3598	  3677
CLKJOB	   273%	   273	   276%	   276
CLKTRU	  1687	  1696%	  2659
CLOGIN	   862	  1980#
CLOSE0	  3727%	  3757
CLRAUT	  3395	  3558#
CLRFRM	   976#
CLRLOK	  3415	  3602#
CLRSPR	  3413	  3594#
CLSCOM	   852	  3729#
CMDCK2	   246	   264	   349#	  1425
CMDCKW	   438#
CMDCMF	    80	   332	   347#	   406	   490	  1736
CMDCMK	   246	   295	   348#
CMDCMR	   333	   346#	   409	   482
CMDCMX	    79	   331	   352#
CMDMOD	    91	   951#
CMDNLJ	   190#
CMDRCM	   468	   503#
CMDRES	    95	   956#
CMDRST	   414#	   501
CMDSC1	   470#	   506
CMDSC2	   473#	   505
CMDSC3	   485#
CMDSC4	   491	   495#
CMDSCE	   484	   492	   500#
CMFCDC	   380#
CMFCDT	   278	   385#
CMFCHT	   258	   301	   387#
CMFCKJ	   280	   389#
CMFCKM	   382#	   390
CMFCOM	    82	   368	   377#
CMFCXI	   388#
CMFCXJ	   381#	  1739
CMFCXN	   383#
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

CMFIDX	   365#
CMFSIZ	   367	   390#
CMFSTA	   384#
CMNCFN	   386#
CMNOTF	    52%	    72
CMWB	   177	   179	  1399	  1401
CMWRQ	   178	   198	   230	   542#	   854	   859	   874	   875	   887	   888
CNTRLC	  1397
CNVVPN	  1215	  1224
COMCMR	   194	   406#
COMCNT	    52%	   329	   411
COMCON	    12	    13#	    16
COMDAS	  3463%	  3463
COMDIS	   148	   159	   182#
COMER	   122	   131	   171	   176#
COMER1	  3934	  3938#
COMERA	  1012	  1019	  1265	  1754	  1757	  1786	  1799	  2191	  2442	  2443	  2446	  2622	  2629	  2949
	  3119	  3163	  3167	  3171	  3198	  3477	  3478	  3483	  3915	  3918#
COMERL	  3931#	  3936
COMERP	  1943	  3917#	  4162	  4163	  4164	  4168	  4169	  4170	  4174
COMERR	  1079	  1123	  2452	  3201	  3205	  3240	  3273	  3283	  3316	  3422	  3434	  3437	  3450	  3455
	  3459	  3464	  3505	  3506	  3513	  3519	  3531	  3542	  3545	  3550	  3560	  3579	  3603	  3654
	  3660	  3924	  3928#
COMFLG	   341%	   341	   417%	   417	   470
COMFN1	   116#	   907	   946	   949
COMFND	   101	   114#
COMFSV	   476	   504	   514#
COMGO	   168	   170	   177#
COMJSV	    75	   193	   195	   515#
COMKJB	   294#	  1427
COMLP	    98#	   108
COMLP1	    96#	   109
COMMAN	    48	    71#	  3830
COMMXL	    49	   826#
COMNEQ	   103	   108#
COMPNM	   478	   503	   516#
COMSAV	   467	   480	   502	   507	   513#
COMSOP	  3423#	  3838
COMTAB	    49	    98	   100	   643#	   643	   651	   663	   676	   695	   696	   698	   703	   704	   705
	   707	   708	   749	   750	   751	   755	   756	   767	   801	   802	   805	   806	   808	   812
	   813	   814	   823	   824	   825	   826	   909
COMTMS	  2439%	  2451
COMTOT	    52%	   412
COMTYI	  3879	  3894%	  3918	  3931
COMTYO	  1644%	  1644	  2726%	  2726	  2730%	  2730	  2733	  2788	  2944	  3075%	  3075	  3078%	  3078	  3935
	  3969%	  3969	  3985	  3990	  4190	  4225	  4236
COMTYS	  3847	  3876	  3879#	  3899	  4127	  4173
COMTYT	  2904%	  2904
COMWC1	   330	   333#
COMWCM	   259	   281	   302	   328#	  1740
CON0	  3967#	  3970
CONMES	  1539	  1544	  2137	  2534	  2559	  2563	  2567	  2579	  2584	  2592	  2600	  3685	  3687	  3692
	  3695	  3698	  3701	  3965#	  3977	  4021	  4029	  4043
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

CONT	   863	  1709#
CONTC	   882	  1708#
COR0	   979#	  1787
COR00	   978	   985#
COR1	  1795	  1800#
COR2	  1814	  1829#
COR3	  1785	  1825	  1834	  1843#
COR4	  1871#
COR5	  1808	  1810	  1816#
CORE	   854	  1784#
CPOPJ	   365	   981	  1147%	  1486	  1621	  2321	  3088%	  3088
CPOPJ1	   439	   441	   496	  1727	  2910	  3223	  3311	  3572	  3718	  3871	  4064%	  4142
CPOPJ2	  4106%	  4132	  4135	  4137	  4139	  4141
CPUKL	  3618	  3620	  3706	  3721
CPUKS	  3666
CPUTYP	  3618	  3620	  3666	  3706	  3721
CPZZ	  3618#	  3618	  3620#	  3620	  3666#	  3666	  3706#	  3706	  3721#	  3721
CRLF	   210	  1057	  1062	  1470	  1472	  1942	  2422	  2426	  2568	  2580	  2927	  3046	  3152	  3227
	  3811	  3955#
CTEX	  3849	  3862#
CTEX0	  3847#	  3854
CTEXT	    83	  1066	  1091	  1112	  1135	  1485	  3838	  3841#
CTEXT1	  2082	  2122	  3251	  3267	  3280	  3313	  3649	  3656	  3839	  3844#	  3874
CTEXTA	  3842	  3845	  3856#
CTXDEV	  2046	  2142	  2186	  2345	  2399	  2751	  3732	  3874#
CTXTAB	  1205%	  1240
CTYBLF	  3500%	  3500
CTYLDB	  2807%	  2807	  2918
CURUPT	  1147%
DAMESS	  2455#	  2532	  2533	  2598	  2599
DATCOM	  2439%	  2516	  2521
DAYTI0	  2514	  2521#
DAYTI1	  2544	  2552#
DAYTI2	  2561	  2568#
DAYTIM	   848	  2510#	  3508	  4034
DCOM	   874	  3158#
DDBLDB	   255	   487	  2805%	  2824
DDTGO	   880	  1358#
DEA1	  4087#	  4090
DEAER1	  2146	  2152#	  2353	  2407	  2410	  2416
DEAER2	  2148	  2157#	  2285
DEASG	  2147	  2180	  3766	  4066#	  4087
DEASSI	   879	  2142#
DEASTY	  1182	  2143	  4085#
DECIN	  3448	  3453	  3457	  3476	  3504	  3511	  3517	  3529	  3540	  4105	  4108#
DECIN1	  1010	  1755	  1784	  2189	  2325	  2441	  2620	  2812	  4105	  4110#
DECLF	  1061#	  1875
DECP1	  2527	  4243#
DECUSE	  1206%	  1241
DEFDSP	  3317	  3416#
DEFLEN	  3314	  3386#	  3387
DEFMXL	  3387#
DEFTBL	  3314	  3385#	  3386
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

DELAYN	  1394	  1447	  1449#
DETAC1	  2400	  2425#
DETACH	   860	  2399#
DETMSG	  2341	  2427	  2430#
DEVATT	  2327	  2328	  2345#
DEVEXT	  1569	  1582
DEVFIL	  1567	  1579
DEVLG	    61%	  2085	  2124
DEVLOG	  2078	  2119	  2132	  2269	  4072
DEVLST	  2044%	  2057	  3774	  3790	  4086
DEVMOD	  1555	  2075	  2134	  2220	  2256	  2263	  2265	  2266	  2355	  2360	  2365	  2408	  2418	  2420
	  3792	  4071
DEVNAM	  1556	  2058	  2059	  2135	  2159	  2292	  2373	  3423	  3796	  3801
DEVOPR	    56%	  3424	  3438
DEVPHY	    61%	  2052
DEVPPN	  1576	  1585
DEVSER	  2068	  2241	  3779	  3809	  4089
DEVSRC	    61%	  2145	  2352	  2406	  3740
DIE	    12	    12%	    13	   190	  1218
DISCM1	  1118#	  1136
DISCM2	  1119#	  1122
DISCMD	   847	  1112#
DISCMX	  1113	  1115	  1142#
DISP	   838#	   894
DLYCM	   158	   165	  3820#
DLYCM1	   147	  1387	  1400	  1405	  3828#
DLYCOM	    62%	  3820
DMCOM	  3173	  3180#
DMCOM1	  3123	  3174#
DSKCOM	   885	   962%
DSKKJB	  1147%	  1176
DSKLOD	   865	  1957#
DSKRES	  3787%	  3788
DSTCHK	  2439%	  2550
DSZONE	  2483#	  2556
DVCNSG	    55%	  2178	  2205
DVDIRI	  2133	  2262	  4070
DVDSK	  1565	  1570	  1575	  1584	  2076	  2354	  2409	  3794
DVDTA	  1565
DVRMT	  2221	  2354	  3794
DVTTY	  2221	  2354	  2409	  3794
DWNFLG	    51%	  3202
ECOM	   875	  3114#
ECOMC	  3142#
EMCOM	  3121	  3125#
ENACM1	  1074#	  1092
ENACM2	  1075#	  1078
ENACMD	   846	  1066#
ENACMX	  1067	  1069	  1098#
ENAERR	  1087	  1103#	  1131
ENFERR	  2813	  2951#
EPLLEN	  3030%
ERRFCL	    64%	   976
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

ERRFLG	   197	   198	   213	   227	   556#	  1835	  2127	  3948
ERRMES	   176	  1103	  1495	  1711	  1776	  1977	  2114	  2153	  2162	  2295	  2375	  2379	  2383	  2387
	  2391	  2434	  2800	  2830	  2896	  3494	  3521	  3534	  3941	  3948#	  3998
ERRNSA	  1304	  1349%
ERRSTR	  2814	  2836	  2947#
ESTOP	   984%	   984	  1173%	  1173	  2273%	  2273	  3037%	  3037	  3125%	  3125	  3180%	  3180
F	   192	   255	   438	   439	   440	   441	   442	   485	   486	   487	  1294	  1555	  1556	  1567
	  1569	  1576	  1579	  1582	  1585	  2057	  2058	  2059	  2068	  2069	  2075	  2078	  2080	  2089
	  2119	  2121	  2131	  2132	  2134	  2135	  2159	  2220	  2229	  2231	  2236	  2238	  2241	  2242
	  2246	  2249	  2253	  2256	  2263	  2265	  2266	  2269	  2292	  2355	  2360	  2365	  2370	  2373
	  2408	  2415	  2418	  2420	  2425	  2426	  2738	  2739	  2822	  2823	  2824	  2864	  3127	  3182
	  3731	  3742	  3750	  3752	  3753	  3756	  3760	  3765	  3773	  3774	  3776	  3779	  3780	  4005
	  4008	  4009	  4011	  4012	  4014	  4023	  4024	  4026	  4035	  4036	  4037	  4038	  4039	  4042
	  4053	  4071	  4072	  4085	  4086	  4089	  4090	  4091
FCNCNT	  1733	  1741#	  1748	  1751
FCNNOW	  1735	  1745#
FCNSKP	  1738	  1750#
FCONRQ	    48	  1729#	  1771
FCONT	   861	  1715#	  1768
FDV1	  3752#	  3763
FINAL1	  3775#	  3780
FINALL	  3737	  3771#
FREDEV	   843	  3785#
FRMCOM	    71	   467#
GANBGN	  2837#	  2892
GANERR	  2889	  2894#
GANGET	  2859	  2864#
GANTST	  2848	  2859#	  2880	  2943
GENP	   929#	   934	   953
GENSZ	   934#	   953
GET	   872	  1919#
GETGMT	  2439%	  2510
GETJOB	    66%	  1919
GETLMA	  1205%	  1216
GETULT	  1533%	  1533
GINST	  1299#	  1299	  1300	  2174#	  2174	  2175	  2242#	  2242	  2243	  2247#	  2247	  2248	  2253#	  2253
	  2254	  2277#	  2277	  2278	  3043#	  3043	  3044	  3128#	  3128	  3129	  3129#	  3130	  3130#	  3131
	  3132#	  3132	  3133	  3133#	  3134	  3135#	  3135	  3136	  3183#	  3183	  3184	  3184#	  3185	  3185#
	  3186	  3187#	  3187	  3188	  3188#	  3189	  3189#	  3190	  3717#	  3717	  3718	  3750#	  3750	  3751
	  3753#	  3753	  3754	  3760#	  3760	  3761	  3765#	  3765	  3766	  3773#	  3773	  3774	  3776#	  3776
	  3777
HELP1	  1946#	  1953	  1957
HELPPP	    52%	  1946	  1985
HOLD	  1826	  3727%	  3782
HVCORE	   167	   527#	   842	   844	   845	   852	   853	   861	   863	   871	   874	   875	   876	   880
	   881	   882	   888	   891	   892
INADEF	  3536	  3541%	  3541	  3546
INADFL	  3530%	  3530
INCOR	   144	   534#	   842	   844	   845	   849	   852	   853	   854	   855	   861	   863	   871	   874
	   875	   876	   880	   881	   882	   887	   888	   891	   892
INCUSE	  1206%	  1242
INIARB	   973%	  1005
INITIA	   864	  1953#
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

INLMES	  1024	  1028	  1036	  1053	  1719	  1811	  1852	  1859	  1866	  1885	  1892	  1940	  2128	  2157
	  2290	  2371	  2430	  2574	  2643	  2649	  2652	  2691	  2699	  2702	  2705	  2709	  2734	  2740
	  2912	  2923	  3140	  3147	  3976#	  4032
IPOPJ	  4064%	  4079
IPOPJ1	  4064%	  4074
J	    74	    75	    81	    92	   118	   150	   151	   154	   157	   162	   169	   180	   189	   192
	   193	   195	   204	   229	   247	   250	   261	   262	   273	   276	   296	   298	   299	   300
	   328	   334	   337	   352	   407	   410	   414	   481	   483	   485	   488	   904	   980	   999
	  1015	  1018	  1021	  1026	  1030	  1038	  1040	  1042	  1044	  1045	  1048	  1050	  1060	  1070
	  1072	  1094	  1098	  1099	  1116	  1138	  1142	  1155	  1156	  1179	  1211	  1221	  1228	  1229
	  1232	  1268	  1269	  1325	  1340	  1377	  1382	  1389	  1398	  1402	  1403	  1410	  1412	  1426
	  1483	  1493	  1501	  1530	  1655	  1661	  1688	  1689	  1723	  1730	  1731	  1737	  1741	  1747
	  1753	  1764	  1767	  1769	  1770	  1775	  1791	  1792	  1845	  1890	  1913	  1920	  1925	  1927
	  1929	  1931	  1938	  1969	  1970	  1972	  2013	  2024	  2038	  2197	  2198	  2200	  2201	  2208
	  2213	  2217	  2239	  2254	  2267	  2271	  2272	  2307	  2314	  2316	  2319	  2336	  2337	  2340
	  2342	  2347	  2361	  2369	  2401	  2445	  2625	  2628	  2634	  2639	  2640	  2654	  2693	  2694
	  2695	  2714	  2722	  2732	  2736	  2738	  2778	  2835	  2885	  2887	  2890	  3040	  3115	  3159
	  3200	  3524	  3525	  3553	  3555	  3564	  3568	  3571	  3576	  3583	  3585	  3592	  3595	  3599
	  3602	  3608	  3612	  3713	  3733	  3734	  3764	  4006	  4010	  4012	  4014	  4024	  4026	  4038
	  4041	  4052	  4067	  4069
JACCT	  1386
JACCT2	   297
JAPMOD	  4016	  4047#
JBLMSK	  3532	  3543%	  3543
JBPWDR	  1654	  1675
JBPWDW	  1654	  1676
JBPWDY	  1499	  1529
JBPWRN	  1654	  1672
JBPWWT	  1654	  1673
JBTAUN	  1042%	  1042	  1045%	  1045	  2216	  2217	  2302%	  2316	  2317
JBTCNK	    66%	  2654	  2693
JBTCTX	    67%	   151	   157	   162	  1389
JBTINA	    67%	    74
JBTLIC	    57%	  1072	  1094	  1099	  1116	  1138	  1142	  1268	  1753	  1791	  1927	  2213	  2306	  2307
	  2309	  2310	  2314	  2347	  2401	  2445	  2778	  2835	  2885	  3115	  3159	  3200	  3571	  3576
	  3713	  3733	  4038
JBTLIM	   300%	   300	  1156%	  1156	  3525%	  3525
JBTNAM	    57%	  1913	  1920	  2013	  2024	  2038	  2714
JBTPC	  2736%	  2736	  2738%	  2738
JBTPPN	  1044%	  1044	  1048%	  1048	  1050%	  1050	  1925	  1968%	  1969	  1970	  2866	  2890
JBTPRG	  3040%	  3040
JBTPRV	    57%	    92	   904	   999	  1410	  1929	  1938	  2319	  2887	  3553	  3555	  3564	  3568	  3583
	  3585	  3608	  3612	  4012	  4014	  4024	  4026
JBTSLC	    57%	  1070	  1098	  1269	  1792	  3734
JBTSLM	   299%	   299	  1155%	  1155	  3524%	  3524
JBTSTA	  2694%	  2694	  2695
JBTSTS	    52%	   118	   150	   154	   180	   204	   250	   298	  1221	  1232	  1325	  1340	  1377	  1382
	  1398	  1402	  1412	  1723	  1747	  1761	  1931	  1972	  2200	  2332	  2722	  2818	  3592	  3595
JBTUN1	  1040%	  1040
JBTUNM	  1038%	  1038
JBTUPM	    52%	   169	   980	  1179	  1211	  1228	  1845	  1890
JBTWCH	  1483	  1493	  1501	  1530%	  1530	  1655	  1661
JBYINA	  3551%	  3551	  3562
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

JBYMWS	  2711%	  2711
JBYUWS	  1877%	  1887
JBYWCH	  1528%	  1528	  1698
JCER2	  1766	  1775#
JCONT	   873	  1752#
JDCON	   202	  1326	  1376	  1725	  1746
JERR	  1326	  1384	  1709	  1724
JFYHR	  2439%	  2546
JFYMIN	  2439%	  4195%	  4195
JFYSEC	  2655	  4210%	  4210	  4218
JLOG	   119	  1150	  1413	  1930	  1947	  1971	  1980
JNA	  1762	  2202	  2331	  2819
JNERR	  2817	  2955#
JOB	   229	  1374%	  1403	  2226	  2239	  2254	  2732	  3764	  3777
JOB1	   989#	  1181
JOBDDT	  1357%	  1358
JOBEXM	  2022%	  3128	  3129	  3130	  3132	  3133	  3183	  3184	  3185	  3187	  3189
JOBFDV	  2022%	  2242	  2247	  2253	  3750	  3753	  3760	  3765	  3773	  3776
JOBKL	  1164	  1173#
JOBN	  1013	  1759	  2198	  2302%	  2329	  2623	  2816
JOBREN	  1253%	  1350
JOBSA	  1253%	  1272
JOBVER	  3043%	  3043
JSTCTX	   155
KCLEAR	  1205%	  1225
KILPGS	   973%	  1002
KILUP1	  1216#	  1219
KILUP2	  1218#
KILUPT	  1185	  1209#
KJB1	   858	  1149#
KJBIT	   265	   267	   279#
KJBT1	   268	   278#
KJBT3	   270	   272#
KJOB	   867	   868	   869	   870	  1150#
KJOB2	  1151	  1163#
KSTOP	    62%	  1191
KSYS	  2560%	  2560	  2564	  3507%	  3507
LDBDCH	  2774	  2928	  3246%
LDBDDB	   438	  2397%	  2425	  2864	  3421	  3433	  4008
LDBLOG	    56%	  2768	  2825	  2845	  2877	  2940
LDLCOM	  2775%	  2775	  2929
LDPLNO	  2805%	  2841	  2872	  2936
LGONAM	  1147%	  1154
LICGDV	  2348	  2349	  2402	  2403
LICJAL	  2313	  3402	  3412	  3570
LICMAX	  1074%	  1074	  1118%	  1118
LICMSK	  2302%	  2308
LICNEW	   521#	  1073	  1082	  1093
LICOPR	  1752	  2348	  2349	  2402	  2403	  2444	  2777	  2834	  2884	  3199	  3401	  3403	  3404	  3405
	  3406	  3407	  3416	  3570
LICSAV	   520#	  1071	  1084	  1117	  1126	  1137
LICSPY	  3114
LICTBL	  1075%	  1075	  1080%	  1080	  1119%	  1119	  1124%	  1124
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

LICTDV	  2210	  2212
LICUNU	  1926
LICWCR	  3158	  3414	  3570	  3676	  3712
LINTAB	  2805%	  2844	  2876	  2939
LISTSN	     3	     6
LKUUP1	  1245#	  1248
LKUUPT	  1243#
LMMEXS	  1205%	  1217
LMPNER	   973%	   990
LOCDAY	  2591%	  2591	  2593%	  2593
LOCHOR	  2604%	  2604
LOCMIN	  2607%	  2607
LOCMON	  2595%	  2595
LOCSEC	  2610%	  2610
LOCTIM	  2577	  2590#
LOCWEK	  2578%	  2578
LOCYER	  2601%	  2601
LOGDET	  1977#	  1981
LOGER1	  2404	  2419	  2434#
LOGREF	  1925#	  1983
LOKJOB	  3599%	  3599	  3602%	  3602	  3604%	  3604
LOKUPT	  1223	  1242#
LOP01	  3792#	  3810
LOP01A	  3805	  3808#
LOP01B	  3799	  3801#
LOP02	  3795	  3798	  3809#
LP101	   643#	   915
LP102	   696#	   915
LP103	   703#	   916
LP104	   749#	   916
LP105	   755#	   917
LP106	   801#	   917
LP107	   813#	   918
LP108	   824#	   918
LP941	   643#	   922
LP942	   696#	   922
LP943	   704#	   923
LP944	   750#	   923
LP945	   756#	   924
LP946	   805#	   924
LP947	   812#	   925
LP948	   823#	   925
LPGE1	   643#	   929
LPGE10	   825#	   933
LPGE2	   695#	   929
LPGE3	   708#	   930
LPGE4	   751#	   930
LPGE5	   767#	   931
LPGE6	   802#	   931
LPGE7	   806#	   932
LPGE8	   808#	   932
LPGE9	   814#	   933
LPRES1	   663#	   942
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

LPRES2	   676#	   942
LPSUD1	   651#	   937
LPSUD2	   698#	   937
LPSUD3	   705#	   938
LPSUD4	   707#	   938
M	  2173	  2174	  2175	  2188	  2193	  2194	  2211	  2228	  2240	  2273	  2276	  2277	  2282	  2283
	  3754
MAPUPS	    56%	  1278	  1391	  1803	  1844	  1884	  2034	  2230	  3174	  3475	  3664	  3681	  3730
MDSP	   115	   894#
MIDNIT	  1696%	  1701
MINCOR	   144	   156	   530#	   558	   858	   862	   864	   865	   867	   868	   869	   870	   876
MONABK	  3641	  3676#
MONJOB	   982%	   982	  1163%	  1163	  1289%	  1289	  1821%	  1821	  3035%	  3035	  3122%	  3122	  3177%	  3177
MONSTR	   985%	   985	  1174%	  1174	  1296%	  1296	  1822%	  1822	  2235%	  2235	  3038%	  3038	  3126%	  3126
	  3181%	  3181	  3746%	  3746	  3772%	  3772
MONTAB	  2439%	  2531	  2596%	  2596
MRQ	   153
MSTART	  2234%	  2234	  3744%	  3744	  3771%	  3771
MXLIN	  2805%	  2842	  2873	  2937
NCMD	   899	   900	   901	   903#	   920	   927	   935
NCMDS	   940	   948#
NCMFLG	   469%	   469
NCMRES	   944	   945#
NCTXPG	  1205%	  1224	  1243
NOACT	   161	   529#	   558	   559	   842	   844	   845	   852	   854	   871	   874	   875	   881	   887
	   891	   892
NOCOM	   903	  3240#
NOCOM2	   471	   474	   506#
NOCORQ	    53%	  1234
NOCRLF	   209	   544#	   558	   559	   842	   844	   845	   852	   856	   860	   861	   866	   891	   892
	  1717	  1820
NODIE	    12%
NOLOGI	   120	   528#	   559	   859	   861	   866	   873	   903
NOMESS	   205	   222	   551#	   858	   861	   867	   868	   869	   870	  1152	  1717
NOPER	   211	   545#	   558	   559	   842	   844	   845	   852	   853	   856	   860	   861	   863	   871
	   874	   880	   891	   892	  1820
NOPRNT	  1172%	  1183
NORUN	   127	   531#	   558	   559	   842	   844	   845	   852	   853	   854	   861	   863	   871	   874
	   876	   880	   881	   882	   887	   891	   892
NOTDEV	  2071	  2151#	  2280	  3741
NOTENF	  1756	  2047	  2187	  2190	  2326	  2754	  2953	  3162	  3166	  3449	  3454	  3458	  3518	  3996
	  3998#
NOTIC	   559#	   858	   862	   864	   865	   867	   868	   869	   870	   875	   888
NOTPDP	  4037	  4041#
NSRBIT	  1910
OCT0	  4122#	  4128
OCTIN	  3644	  4105	  4113#	  4161	  4167
OCTIN1	  1263	  3117	  3161	  3165	  3169	  3196	  4105	  4119#
OCTPNT	    63%	  2737	  3139	  3143	  3146	  3226	  3689
OPRDTM	  2572#
OPRFRE	  3426%	  3426	  3440%	  3440
OPRLDB	  2771%	  2771	  2772%	  2772	  2919	  3425	  3436	  3439
OPROUT	  2573%	  2573
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

OPRTIM	  3247%	  3427	  3444
P	    13	    71	    73	    78	    83	   117	   164	   183	   184	   188	   190	   194	   208	   210
	   212	   217	   219	   221	   224	   225	   228	   231	   248	   257	   274	   277	   281	   282
	   302	   303	   335	   336	   342	   343	   344	   366	   369	   372	   373	   408	   418	   443
	   444	   493	   501	   508	   995	   997	  1002	  1005	  1006	  1010	  1016	  1017	  1018	  1020
	  1021	  1022	  1024	  1027	  1028	  1034	  1036	  1039	  1041	  1043	  1047	  1049	  1051	  1052
	  1053	  1056	  1061	  1066	  1091	  1107	  1112	  1135	  1176	  1181	  1182	  1183	  1184	  1185
	  1186	  1187	  1209	  1216	  1218	  1223	  1225	  1227	  1233	  1247	  1249	  1263	  1267	  1278
	  1305	  1306	  1308	  1309	  1310	  1343	  1391	  1404	  1408	  1409	  1414	  1470	  1471	  1472
	  1485	  1494	  1531	  1532	  1533	  1535	  1562	  1564	  1566	  1573	  1578	  1580	  1581	  1583
	  1586	  1600	  1602	  1603	  1604	  1605	  1606	  1607	  1609	  1614	  1615	  1616	  1617	  1618
	  1619	  1620	  1623	  1628	  1629	  1643	  1644	  1656	  1657	  1658	  1662	  1664	  1666	  1667
	  1668	  1686	  1687	  1710	  1715	  1716	  1719	  1721	  1726	  1729	  1730	  1732	  1734	  1740
	  1741	  1742	  1743	  1745	  1750	  1755	  1765	  1771	  1772	  1784	  1790	  1802	  1803	  1806
	  1811	  1823	  1825	  1833	  1834	  1836	  1844	  1846	  1847	  1851	  1852	  1858	  1859	  1865
	  1866	  1884	  1885	  1888	  1889	  1891	  1892	  1895	  1896	  1898	  1899	  1912	  1935	  1939
	  1940	  1942	  1949	  1953	  1957	  1973	  1986	  2033	  2034	  2035	  2046	  2050	  2052	  2064
	  2070	  2079	  2080	  2081	  2082	  2085	  2088	  2089	  2090	  2093	  2095	  2099	  2103	  2106
	  2112	  2113	  2120	  2121	  2122	  2124	  2128	  2131	  2136	  2142	  2145	  2147	  2149	  2152
	  2157	  2160	  2161	  2172	  2178	  2180	  2182	  2186	  2189	  2192	  2197	  2201	  2205	  2215
	  2229	  2230	  2232	  2237	  2248	  2250	  2251	  2267	  2272	  2274	  2275	  2278	  2281	  2290
	  2293	  2294	  2308	  2311	  2322	  2323	  2325	  2334	  2336	  2338	  2340	  2341	  2342	  2345
	  2352	  2362	  2369	  2371	  2374	  2399	  2406	  2411	  2413	  2422	  2427	  2430	  2441	  2451
	  2453	  2510	  2516	  2518	  2519	  2521	  2523	  2527	  2534	  2536	  2537	  2538	  2540	  2541
	  2545	  2547	  2550	  2559	  2563	  2565	  2567	  2573	  2574	  2577	  2579	  2580	  2583	  2594
	  2600	  2602	  2603	  2605	  2606	  2608	  2609	  2611	  2620	  2626	  2627	  2628	  2630	  2631
	  2632	  2633	  2634	  2635	  2637	  2638	  2642	  2643	  2646	  2647	  2648	  2649	  2652	  2658
	  2659	  2660	  2661	  2667	  2668	  2669	  2670	  2691	  2698	  2699	  2701	  2702	  2704	  2705
	  2707	  2708	  2709	  2712	  2713	  2715	  2716	  2726	  2730	  2733	  2734	  2737	  2740	  2743
	  2748	  2749	  2751	  2752	  2753	  2764	  2766	  2770	  2781	  2786	  2788	  2791	  2792	  2793
	  2794	  2795	  2797	  2798	  2799	  2812	  2821	  2827	  2828	  2829	  2837	  2848	  2849	  2852
	  2854	  2859	  2861	  2862	  2867	  2880	  2881	  2894	  2895	  2903	  2904	  2906	  2909	  2912
	  2915	  2916	  2921	  2922	  2923	  2925	  2927	  2930	  2931	  2938	  2943	  2944	  2947	  2948
	  2951	  2952	  2955	  2956	  2959	  2960	  3039	  3041	  3042	  3044	  3046	  3047	  3057	  3058
	  3062	  3063	  3066	  3067	  3068	  3073	  3075	  3076	  3078	  3079	  3081	  3082	  3083	  3084
	  3085	  3086	  3094	  3097	  3098	  3099	  3103	  3104	  3105	  3116	  3117	  3122	  3134	  3135
	  3136	  3137	  3138	  3139	  3140	  3142	  3143	  3144	  3145	  3146	  3147	  3149	  3150	  3152
	  3153	  3160	  3161	  3165	  3169	  3174	  3177	  3178	  3190	  3196	  3203	  3204	  3206	  3214
	  3222	  3226	  3233	  3236	  3249	  3251	  3255	  3258	  3259	  3264	  3265	  3267	  3268	  3272
	  3275	  3276	  3280	  3282	  3288	  3308	  3313	  3315	  3420	  3426	  3430	  3432	  3440	  3445
	  3447	  3448	  3453	  3457	  3463	  3465	  3475	  3476	  3492	  3497	  3501	  3503	  3504	  3510
	  3511	  3517	  3526	  3528	  3529	  3537	  3540	  3548	  3556	  3558	  3565	  3569	  3573	  3577
	  3578	  3586	  3590	  3593	  3596	  3598	  3600	  3605	  3609	  3613	  3644	  3649	  3653	  3656
	  3659	  3664	  3668	  3674	  3677	  3681	  3687	  3689	  3692	  3695	  3698	  3702	  3714	  3730
	  3732	  3740	  3743	  3747	  3759	  3761	  3762	  3766	  3768	  3778	  3781	  3788	  3800	  3808
	  3820	  3828	  3829	  3841	  3844	  3847	  3849	  3850	  3858	  3863	  3868	  3872	  3874	  3876
	  3877	  3879	  3884	  3899	  3906	  3907	  3917	  3918	  3928	  3929	  3930	  3931	  3933	  3935
	  3938	  3939	  3940	  3966	  3967	  3969	  3976	  3977	  4005	  4006	  4021	  4029	  4032	  4041
	  4042	  4052	  4053	  4068	  4069	  4076	  4078	  4085	  4087	  4091	  4092	  4108	  4109	  4113
	  4114	  4115	  4116	  4118	  4120	  4121	  4127	  4157	  4158	  4160	  4161	  4167	  4173	  4175
	  4194	  4196	  4198	  4200	  4201	  4205	  4207	  4208	  4209	  4211	  4212	  4214	  4215	  4223
	  4225	  4226	  4232	  4234	  4236	  4237	  4239
P1	  1240	  1242	  1247	  1325	  1326	  1328	  1329	  1330	  1333	  1334	  1336	  1337	  1338	  1555
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

	  1565	  1570	  1575	  1584	  2748	  2753	  2794	  2799	  2829	  2860	  2890	  2895	  2948	  2952	  2956
	  2960	  3120	  3131	  3164	  3168	  3175	  3188	  3250	  3257	  3262	  3636	  3637	  3638	  3639
	  3640	  3646	  3647	  3648	  3650	  3665	  3667	  3671	  3672	  3678	  3682	  3684	  3688	  3691
	  3694	  3697	  3700	  3801	  3802	  3804	  3806	  3807
P10SZ	   919#	   951
P2	  1244	  1245	  2313	  2314	  2316	  2317	  2320	  2321	  3172	  3176	  3186	  3187	  3188	  3189
	  3451	  3452	  3456	  3462	  3791	  3799	  3804	  3807	  4154	  4156	  4165	  4171	  4174
P3	   106	   107	   112	   113	   114	   115	   120	   127	   144	   147	   156	   158	   161	   167
	   176	   178	   184	   197	   198	   203	   205	   207	   209	   211	   213	   215	   218	   220
	   222	   227	   230	   894	   895	   896	   897	   898	   903	   906	   945	   948	  1152	  1217
	  1657	  1659	  1660	  1662	  1663	  1665	  1667	  1717	  1718	  1820	  1835	  1932	  2127	  2233
	  3948
P4	    90	    91	    95	    96	   107	   109	   111	   113	   114	   118	   119	   126	   146	   177
	  1150	  1273	  1288	  1307	  1341	  1351	  1359	  1709	  1723	  1724	  1725	  1947	  1971	  1972
	  1980	  2049	  2059	  2063	  2511	  2515	  2520	  4110	  4119	  4123	  4125
PC.USR	  1284	  1393
PCOM	   840	   841	  1363#
PCRLF	   202#
PCRLF0	   206	   209#
PCRLF1	   214	   222#
PDP10P	   915#	   919	   951
PG	  1245	  1246
PHONLY	  1153
PJBSTS	  1328	  1374%	  1379	  2717
PJOB	  1060#	  2432
PJOBCM	   877	  1010#
PJOBN	   440%	   440	  2061	  2207	  2225	  2271	  2357	  2361	  2421	  2865	  3775	  4010	  4066
PJOBX	  1011	  1020	  1024#
PJOBX1	  1046	  1053#
PJPGNO	  4154#
PLSXPN	   535#	   842	   844	   845	   852	   853	   871	   874	   875	   880	   881	   887	   888	   891
	   892
PPNUSR	  1614%	  1614
PR0	  4199	  4203#
PR1	  4206	  4209#
PR6BIT	  1056%	  1056
PRCHR	  1564	  1602	  1609	  1635	  1637	  1643#	  4055
PRCOL	  1847	  2606	  2609	  4189#	  4201	  4208
PRCOM	  1605	  1642#	  1889	  1896	  3800
PRF	   149
PRGRUN	   895	   909#
PRLBK	  1532	  1544#	  1658
PRLPR	  1047	  1628	  1636#	  3081
PRMPT	  4036	  4045#
PRNAME	    63%	  1034	  1039	  1041	  1562%	  1562	  1580%	  1580	  1583%	  1583	  1618%	  1618	  1624%	  1624
	  2136	  2161	  2294	  2374	  2715	  2922	  3041	  3808
PROPRG	  1267	  1790	  1912	  1937#	  3116	  3160
PRPER	  1581	  2669	  3067	  3098	  3104	  4054#	  4215
PRPER1	  4007	  4009	  4052#
PRPMT1	  4013	  4023#
PRPMT2	  4025	  4031#
PRPRMT	   212	  1473	  2423	  2930	  3047	  3153	  3191	  4005#
PRQM	  3930	  3940	  3984#
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

PRRBKC	  1539#	  1666
PRRPR	  1052	  1630	  1634#	  3084
PRRSP1	  1468	  1470#
PRRSP3	  1468	  1471#
PRRSP4	  1468	  1472#
PRRSP5	  1468	  1473#
PRSPC	  1623	  1664	  2537	  2541	  2603	  2612	  2708	  2713	  2716	  3042	  3144	  3989#
PRT2	  2594	  2605	  2608	  2611	  2672	  4200	  4207	  4211	  4222#
PRTABK	  3645	  3681#
PRTDC1	  1691	  2642	  2664#
PRTDC2	  2648	  2665#
PRTDD0	  1562#
PRTDD1	  1572	  1575#
PRTDD2	  1574	  1581#
PRTDD3	  1568	  1584#
PRTDDB	  1554#	  2743
PRTDEC	  1027	  1061	  1846	  1851	  1858	  1865	  1888	  1891	  1895	  1898	  2536	  2565	  2602	  2668
	  2712	  3090	  4227	  4232#	  4243
PRTDI8	  1604%	  1604	  1607%	  1607	  3054%	  3054	  3097%	  3097	  3103%	  3103	  3107%	  3107
PRTDIG	  3056%	  3056	  3068%	  3068	  4239%	  4239
PRTDIR	  1578	  1628#
PRTIM	  1704	  2656	  4193#
PRTIME	  1535	  2540	  2698	  4192#
PRTPPN	  1043	  1051	  1573	  1587	  1600#
PRTTM1	  2633	  2648#
PRTUNM	  1049	  1614#	  1629
PRTWDR	  1674%	  1675	  2704
PRTWDW	  1674%	  1676	  2707
PRTWRN	  1672	  1686#	  2701
PRTWWT	  1673	  1698#
PRVER1	  3072	  3077#
PRVER2	  3065	  3069	  3079#
PRVER3	  3080	  3085#
PRVERS	  3044	  3052#
PRVERT	  3053	  3094#
PRVLOG	  1987	  1996#
PRVRT0	  3096	  3099#
PRVRT1	  3102	  3105#
PUUOAC	  3758%	  3758
PVACTS	  2318	  3567
PVDINA	  3552	  3563
PVEXO	   998	  1937
PVMAIL	  4011
PVMHNG	  3584
PVNHNG	  3582
PVNMAI	  4023
PVNOAT	  3607	  3611
PVRCMD	    94
PVSCMD	   905
PVYCOR	  1861	  1877%
PVYHNG	   266%	   266
PVYMOD	    66%	    90	   129	  4015	  4035
PVYTIM	  2439%	  2512	  2542
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

PVZMOD	    66%
PX.MEM	  1299	  2174	  2242	  2247	  2253	  2277	  3043	  3128	  3129	  3130	  3132	  3133	  3135	  3183
	  3184	  3185	  3187	  3188	  3189	  3717	  3750	  3753	  3760	  3765	  3773	  3776
QQ	  1440#	  1444#	  1444	  1445#	  1445
RADX10	  4231#
RCOM	   838	  2002#
REASE1	  2199	  2203	  2275#
REASE2	  2179	  2206	  2280#
REASE3	  2181	  2209	  2285#
REASE4	  2277#	  2283
REASE5	  2281#	  2286	  2289
REASE6	  2219	  2222	  2288#
REASE7	  2288	  2290#
REASS	   887	  2186#
REASS1	  2176	  2197#
REASS2	  2244	  2246#	  2252
REASS3	  2224	  2227	  2255#
REASS4	  2228	  2241#
REASS5	  2214	  2220#
REASSI	  2172#
REENTE	   853	  1350#
REFLAG	    58%	  1933	  1982
RELEA5	    63%	  2250
RELEA6	    64%	  4078
RELEAX	  3727%	  3755
REQUE	   232%	   232	  1404
RESET	    64%	   995
RESP	   942#	   943	   956
RESRUN	   906	   945	  2033#
RESSZ	   943#	   956
RPGBIT	   558#	   838	   839	   840	   841	   872	   889	   895	   896	   897	   898	   906	   945	   948
RTIME	  1688	  1689	  2618%	  2639	  2640
RUN	   126	   249
RUN1	  2621	  2637#
RUNCO2	  2015	  2026#
RUNCO3	  2025#	  2041
RUNCOM	   839	   889	  2024#
RUNJB2	    66%	  2028
RUNJOB	    66%	  2026
RUNT2	  2630	  2637	  2658#
RUNTIM	   857	  2620#
S	    89	   104	   105	   110	   179	   180	   182	  1149	  1910	  1911	  1919	  2026	  2027	  2028
	  2037	  2749	  2750	  2752	  2793	  2798	  2828	  2847	  2879	  2891	  2894	  2942	  2947	  2951
	  2955	  2959	  3290	  3300	  3301	  3302	  3304	  3305	  3307	  4155
S$ENTR	    12	    18	   191	   269	  1210	  1214	  1219	  1226
S$EVEN	   190	  1218
S$HALT	    12	   190	   269	  1210	  1214	  1218	  1226
S$INFO	   190	  1218
S$JOB	  1218	  1219
S$NAME	    16#	   269	  1210	  1214	  1226
S$NONA	    15	    18	   191	   269	  1210	  1214	  1219	  1226
S$PATC	   190	  1218
S$STOP	   190	   191
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

S$TEMP	    12#	    12	   190#	   190	   269#	   269	  1210#	  1210	  1214#	  1214	  1218#	  1218	  1226#	  1226
S$XCT	    18	   191	   269	  1210	  1214	  1219	  1226
SAVE	   845	   891	   892	  1910#
SAVE1	  1554%	  1554
SAVJOB	    66%	  1911
SCHPRV	  1971	  3591	  3594
SCNTCD	  3247%	  3268
SEND	   890	  2748#
SEND1	  2782	  2786#	  2789
SEND2	  2787	  2791#
SENDA	  2759	  2834#
SENDA2	  2839	  2844#
SENDA3	  2843	  2852#	  2855
SENDAL	  2841#	  2846	  2850
SENDAX	  2853	  2869#
SENDC	  2761	  2807#	  2815
SENDF	  2767	  2823	  2827#
SENDHD	  2781	  2849	  2912#
SENDJ	  2757	  2812#
SENDT	  2768#	  2826
SENDT1	  2773	  2776	  2780#	  2808
SENDX	  2792#	  2874
SENDX1	  2870	  2876#
SENDX2	  2872#	  2878	  2882
SETABD	  3651	  3657	  3664#
SETABK	   876	  3644#
SETABL	  3656#	  3662
SETATT	  3393	  3607#
SETAUT	  3394	  3540#
SETBEN	  3405	  3510#
SETBL	    49	  3281	  3358#	  3382
SETBLL	  3281	  3382#	  3383
SETCMD	   849	  3280#
SETDAT	  3406	  3447#
SETDEF	  3313#	  3396
SETDFI	  3416	  3528#
SETDSP	  3284	  3392#
SETHAP	  3403	  3497#
SETKIL	   251	   261#
SETKSY	  3404	  3503#
SETLOG	  3408	  3409	  3410	  3411	  3581#
SETLOK	  3414	  3598#
SETMXL	    49	  3383#
SETNOP	  3402	  3432#
SETOPR	  3401	  3420#
SETRUN	   221%	   221	  1745%	  1745
SETSHT	    51%	  3222
SETSPR	  3412	  3590#
SETTIM	  2441#	  3407
SETTRU	  3397	  3517#
SETWSL	  3400	  3475#
SGSET	    60%	  2029
SGSETD	    60%	  1914	  1921
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

SKDCM2	  3211	  3215#
SKDCOM	    50	  3204	  3209#
SKED1	  3197	  3225#
SKEDUL	   886	  3196#
SKIPS	  3259	  3841	  3892	  3899#	  3904	  4108	  4113
SKIPS1	  3265	  3844	  3892	  3900#	  4120	  4157
SLPQ	  1330	  1349%
SNDBSI	  1773	  2800#
SNDBSY	  2769	  2779	  2797#
SNDEOL	  2739	  2744	  2791	  2881	  2927#
SNDGAN	  2763	  2884#
SNDGN1	  2886	  2890#
SNDTYI	  2786	  2852	  2903#
SNOAR1	  1278#	  1352	  1360
SNOAR2	  1280	  1283#
SNOARG	  1264	  1272#
SNOATT	  3392	  3611#
SRPNDS	    58%	  3209
SSAVE	   842	  1911#
STARC1	  1285	  1316#
STARC2	  1286#	  1327	  1331
STARCL	  1257#	  1300	  1302
STARDI	  1255#	  1302
START	   871	  1258#
STARTC	   881	  1263#
STARTX	  1294#
STARX1	  1298	  1302#
STATES	    51%	  2581%	  2581	  3216	  3219	  3220	  3225	  3443
STOP	   859	  1376#
STOPA	  1385	  1396	  1408#
STOPAA	  1383	  1410#
STOPC	  1390	  1394#
STRBTS	    58%	  3210
STRDDB	    58%	  1870	  3210
STRTAD	    60%	  1334	  1336
STRTAL	    58%	  1871
STRTCL	    60%	  1338
STSHUT	  3213	  3221	  3442
STSTBL	  2719%	  2719
STSUPR	  3212
STZONE	  2457#	  2554
SUDP	   937#	   939	   954
SUDRUN	   897	   948	  2008#
SUDSZ	   939#	   954
SWPINP	   146	  1220	  1231	  1388
SWSL1	  3481	  3485#
SWSL2	  3487	  3494#
SYSDEV	  2415
SYSRUN	   898	  2005#
T1	    79	    82	    84	    87	    88	    92	    93	    94	    96	    97	    98	   100	   106	   108
	   112	   116	   122	   129	   130	   133	   134	   135	   136	   149	   150	   153	   154	   155
	   157	   169	   170	   171	   202	   204	   249	   250	   258	   261	   264	   272	   275	   278
	   280	   295	   296	   297	   298	   301	   330	   331	   332	   333	   334	   365	   368	   371
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

	   414	   415	   417	   475	   477	   894	   909	   980	   981	   985	   990	   991	  1000	  1026	  1044
	  1045	  1048	  1060	  1070	  1071	  1072	  1073	  1074	  1075	  1078	  1079	  1080	  1081	  1083
	  1084	  1085	  1093	  1094	  1095	  1098	  1099	  1100	  1103	  1116	  1117	  1118	  1119	  1122
	  1123	  1124	  1125	  1126	  1127	  1134	  1137	  1138	  1139	  1143	  1154	  1174	  1179	  1180
	  1211	  1213	  1220	  1221	  1224	  1231	  1232	  1268	  1269	  1283	  1284	  1287	  1296	  1303
	  1306	  1307	  1309	  1339	  1340	  1363	  1376	  1377	  1379	  1381	  1382	  1384	  1386	  1388
	  1392	  1393	  1397	  1398	  1399	  1401	  1402	  1412	  1413	  1425	  1426	  1482	  1483	  1487
	  1488	  1489	  1490	  1492	  1493	  1495	  1498	  1500	  1527	  1528	  1529	  1530	  1534	  1539
	  1544	  1576	  1603	  1606	  1643	  1654	  1655	  1660	  1661	  1688	  1689	  1690	  1698	  1699
	  1700	  1701	  1703	  1711	  1731	  1736	  1737	  1739	  1746	  1747	  1769	  1776	  1791	  1792
	  1807	  1808	  1809	  1822	  1845	  1848	  1849	  1850	  1854	  1855	  1856	  1857	  1861	  1862
	  1863	  1869	  1871	  1887	  1890	  1894	  1897	  1925	  1926	  1927	  1928	  1929	  1930	  1931
	  1937	  1938	  1946	  1954	  1958	  1970	  1977	  1982	  1985	  1987	  2002	  2005	  2008	  2009
	  2013	  2036	  2038	  2051	  2058	  2062	  2063	  2081	  2083	  2084	  2090	  2091	  2095	  2114
	  2123	  2130	  2132	  2137	  2144	  2153	  2162	  2172	  2176	  2200	  2202	  2204	  2207	  2208
	  2210	  2212	  2213	  2215	  2216	  2217	  2218	  2220	  2221	  2223	  2225	  2226	  2235	  2236
	  2237	  2247	  2249	  2255	  2256	  2262	  2263	  2264	  2265	  2266	  2268	  2275	  2280	  2282
	  2285	  2288	  2295	  2305	  2306	  2309	  2310	  2312	  2318	  2319	  2331	  2332	  2347	  2348
	  2349	  2351	  2354	  2355	  2357	  2358	  2359	  2360	  2364	  2365	  2375	  2379	  2383	  2387
	  2391	  2401	  2402	  2403	  2405	  2408	  2409	  2417	  2418	  2420	  2421	  2434	  2444	  2445
	  2447	  2448	  2449	  2450	  2519	  2523	  2524	  2525	  2526	  2528	  2529	  2530	  2531	  2532
	  2533	  2535	  2538	  2539	  2545	  2546	  2549	  2554	  2556	  2558	  2562	  2564	  2566	  2572
	  2578	  2581	  2582	  2584	  2590	  2593	  2595	  2596	  2597	  2598	  2599	  2601	  2604	  2607
	  2610	  2631	  2638	  2639	  2640	  2641	  2646	  2654	  2655	  2661	  2665	  2666	  2670	  2671
	  2693	  2694	  2695	  2696	  2697	  2711	  2736	  2755	  2756	  2758	  2760	  2762	  2765	  2770
	  2772	  2774	  2775	  2777	  2778	  2800	  2818	  2819	  2830	  2834	  2835	  2860	  2865	  2866
	  2884	  2885	  2887	  2888	  2896	  2917	  2918	  2919	  2928	  2929	  3038	  3043	  3052	  3055
	  3058	  3059	  3060	  3061	  3063	  3064	  3065	  3070	  3071	  3072	  3074	  3079	  3080	  3082
	  3085	  3087	  3088	  3089	  3094	  3095	  3096	  3099	  3100	  3101	  3102	  3105	  3106	  3114
	  3115	  3126	  3131	  3132	  3133	  3135	  3136	  3138	  3142	  3145	  3149	  3150	  3151	  3158
	  3159	  3181	  3199	  3200	  3209	  3210	  3215	  3218	  3225	  3254	  3261	  3262	  3281	  3284
	  3285	  3288	  3294	  3302	  3303	  3307	  3310	  3314	  3317	  3318	  3421	  3422	  3423	  3424
	  3428	  3429	  3433	  3434	  3435	  3436	  3442	  3443	  3494	  3498	  3499	  3521	  3532	  3533
	  3534	  3543	  3544	  3552	  3553	  3555	  3561	  3562	  3563	  3564	  3575	  3581	  3591	  3592
	  3594	  3595	  3607	  3608	  3611	  3612	  3652	  3655	  3658	  3661	  3669	  3670	  3676	  3683
	  3686	  3688	  3690	  3693	  3696	  3699	  3709	  3710	  3715	  3717	  3733	  3734	  3738	  3746
	  3755	  3757	  3761	  3772	  3775	  3777	  3792	  3793	  3794	  3796	  3797	  3828	  3932	  3933
	  3938	  3941	  3955	  3965	  3966	  3976	  3978	  3998	  4015	  4016	  4017	  4019	  4027	  4036
	  4040	  4066	  4067	  4195	  4197	  4199	  4202	  4203	  4204	  4209	  4210	  4212	  4213	  4216
	  4217	  4218	  4223	  4224	  4226	  4234	  4235	  4237	  4238	  4243
T2	    80	    81	    82	    84	   100	   102	   335	   337	   338	   341	   343	   366	   367	   368
	   370	   371	   372	   406	   407	   409	   410	   416	   417	   467	   469	   470	   472	   480
	   482	   483	   502	   506	   976	   982	   984	   998	   999	  1001	  1013	  1015	  1016	  1030
	  1031	  1032	  1033	  1038	  1040	  1042	  1050	  1055	  1067	  1068	  1077	  1083	  1086	  1089
	  1090	  1092	  1113	  1114	  1121	  1125	  1133	  1134	  1136	  1163	  1173	  1270	  1271	  1272
	  1279	  1286	  1289	  1295	  1297	  1299	  1301	  1302	  1304	  1305	  1310	  1332	  1335	  1350
	  1358	  1380	  1381	  1394	  1486	  1488	  1491	  1499	  1500	  1501	  1556	  1567	  1568	  1579
	  1582	  1585	  1600	  1617	  1620	  1621	  1752	  1753	  1758	  1759	  1761	  1764	  1767	  1770
	  1775	  1787	  1800	  1801	  1802	  1806	  1809	  1810	  1819	  1821	  1870	  1871	  2014	  2025
	  2033	  2047	  2049	  2051	  2056	  2075	  2076	  2083	  2088	  2091	  2092	  2098	  2103	  2106
	  2123	  2133	  2134	  2135	  2143	  2144	  2159	  2174	  2187	  2188	  2192	  2193	  2204	  2232
	  2234	  2281	  2292	  2305	  2306	  2307	  2309	  2310	  2312	  2317	  2328	  2329	  2332	  2337
	  2351	  2373	  2400	  2405	  2412	  2447	  2450	  2518	  2522	  2524	  2526	  2530	  2535	  2547
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

	  2548	  2549	  2623	  2625	  2626	  2632	  2647	  2660	  2662	  2664	  2665	  2667	  2714	  2717	  2718
	  2719	  2721	  2723	  2724	  2728	  2752	  2755	  2765	  2815	  2816	  2818	  2822	  2920	  3035
	  3037	  3040	  3054	  3056	  3057	  3073	  3076	  3077	  3118	  3120	  3121	  3125	  3164	  3168
	  3170	  3172	  3173	  3180	  3212	  3213	  3216	  3217	  3219	  3220	  3221	  3254	  3287	  3295
	  3298	  3441	  3444	  3451	  3456	  3460	  3461	  3462	  3484	  3485	  3486	  3488	  3490	  3491
	  3507	  3512	  3514	  3520	  3523	  3524	  3525	  3530	  3533	  3536	  3541	  3544	  3546	  3547
	  3551	  3554	  3575	  3576	  3578	  3581	  3582	  3583	  3584	  3585	  3647	  3650	  3657	  3712
	  3713	  3728	  3729	  3731	  3737	  3738	  3744	  3771	  3802	  3806	  3829	  3846	  3857	  3900
	  4070	  4071	  4073	  4075	  4077	  4125	  4126	  4164	  4165	  4170	  4171	  4192	  4193	  4194
	  4196	  4203	  4204	  4206	  4216	  4232
T2POPJ	  1610%	  1610	  4240%	  4240
T3	    98	    99	   102	   116	   117	   183	   336	   340	   341	   342	   472	   477	   478	   481
	   488	   489	   490	   495	   503	   904	   905	   909	  1075	  1076	  1077	  1085	  1086	  1088
	  1089	  1119	  1120	  1121	  1127	  1131	  1286	  1297	  1299	  1300	  1563	  1569	  1571	  1601
	  1608	  1616	  1619	  1622	  1634	  1636	  1642	  1761	  1762	  1794	  1796	  1797	  1819	  1824
	  2011	  2012	  2039	  2040	  2551	  2552	  2555	  2720	  2721	  2725	  2727	  2729	  2731	  2789
	  2907	  2908	  3074	  3077	  3232	  3234	  3235	  3252	  3287	  3292	  3293	  3294	  3295	  3297
	  3298	  3308	  3309	  3310	  3479	  3480	  3482	  3489	  3490	  3567	  3568	  3570	  3571	  3641
	  3679	  3851	  3853	  3856	  3862	  3864	  3865	  3866	  3867	  3869	  3870	  3875	  3880	  3881
	  3882	  3883	  3901	  3902	  3903	  3905	  3936	  3967	  3968	  3984	  3989	  4054	  4122	  4123
	  4126	  4130	  4131	  4133	  4134	  4136	  4138	  4140	  4159	  4166	  4172	  4189	  4222	  4233
T4	    85	    86	    99	   246	   247	   262	   266	   270	  1081	  1082	  1088	  1090	  1287	  1303
	  1554	  1793	  1798	  1800	  2241	  2512	  2513	  2542	  2543	  2553	  2554	  2556	  3289	  3291
	  3297
TABFLP	  3294#	  3303
TABFND	  3296	  3308#
TABNEQ	  3299	  3303#
TABSRC	  3282	  3287#	  3315	  3653	  3659
THSDAT	  2557%	  2557	  4031%	  4031
TIMADJ	  1686	  1696%	  2658
TIME	  1527%	  1527	  1699%	  1699
TIMSET	   275%	   275
TIOWQ	  1329	  1349%
TKCHLD	  1172%	  1184
TPOPJ	  1645%	  1645	  3112%	  3306	  3968
TRESCN	   493	  3926%	  3929
TRHALT	    62%	  1409
TSETBI	   228	  3926%	  3939
TTCEXI	  3266	  3275#
TTCMCA	  3926%	  3928	  3932
TTCMCH	   495	  2000%	  2012	  2040	  3232	  3883	  3901
TTKJOB	  1411	  1425#
TTYATC	  4073
TTYATT	  2302%	  2338
TTYC1	  3253	  3268#
TTYCE	  3256	  3260	  3263	  3272#
TTYCL	  3264#	  3269
TTYCMD	   850	   851	  3249#	  3398	  3399
TTYCMR	   408%	   408
TTYDET	  2428%	  2428
TTYFND	  1186	  1734	  2302%	  2343
TTYFNU	   973%	   997	  3781
TTYFUW	    60%	  1823	  3039	  3137	  3190
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

TTYHLT	   257%	   257
TTYKIL	  1147%	  1187
TTYNAM	  2916%	  2916
TTYPHY	  2766%	  2766	  3255
TTYRNC	   203	   207	   220	   548#	   881	   882	  2233
TTYRNU	   203	   207	   215	   546#	   558	   842	   844	   845	   852	   853	   862	   864	   865	   871
	   875	   880	   888	   891	   892	  1152
TTYRNW	   203	   207	   218	   550#	   863	  1718
TTYSTC	    55%	  3048	  3154
TTYSTR	    59%	   224
TTYTAB	    81	   192	   247	   261	   262	   296	   328	   334	   352	   407	   410	   442	   483	   485
	   488	  1030	  1426	  1737	  2805%	  2822
TTYUSR	    59%	   217
TTYUSW	    59%	   219
TYMP	   922#	   926	   952
TYMSZ	   926#	   952
TYOAL1	  2936#	  2941	  2945
TYOAL2	  2934	  2939#
TYOALL	  2854	  2933#
TYPCC	   133	   136	   138#
TYPESC	   134	   135	   141#
U	    78	   188	   226	   255	   256	   438	   470	   473	   475	   476	   486	   487	   492	   504
	  1729	  1735	  1742	  1833	  2050	  2070	  2079	  2112	  2113	  2120	  2152	  2160	  2293	  2411
	  2425	  2764	  2768	  2771	  2774	  2792	  2797	  2807	  2821	  2824	  2825	  2826	  2827	  2837
	  2838	  2841	  2842	  2844	  2845	  2864	  2869	  2872	  2873	  2876	  2877	  2903	  2906	  2915
	  2917	  2921	  2928	  2933	  2936	  2937	  2939	  2940	  3249	  3250	  3257	  3258	  3261	  3264
	  3272	  3275	  3421	  3425	  3433	  3435	  3743	  4007	  4008
ULDUPX	  1207%	  1233
ULKUPT	  1227	  1240#
UPSJOB	  1206%	  1229	  1230
UPTABK	  3626%	  3665	  3670	  3682	  3715
UPTHCU	    53%	  2243	  3751
UPTHRL	    66%	  1004	  1807	  1854
UPTJDA	    53%	  2246	  3752
UPTPC	    53%	  1283	  1392
UPTPDL	    53%	  1295
UPTPID	    54%	  1281	  1804	  3735
UPTREL	    53%	  1003	  1848
UPTRNM	    56%	  2036
UPTRPN	    56%	  4156
UPTSPD	    54%	  1282	  1805	  3736
UPTSTS	    60%	  1332	  1333	  1337
UPTUAC	  2035%	  2035
UPTXAC	  1286	  1287	  1288	  1819	  2231	  3030%	  3175	  3176	  3731	  3742
USESTA	   856	  2691#
USTART	  1311%	  1311
USYPSR	  1253%	  1341
USYUWL	  1877%	  1894	  3489	  3491
USYUWM	  1877%	  1897	  3488
UTRP	  1339
UXYPTM	  1205%	  1244
VERPR	   888	  3035#
VMINFO	   855	  1884#
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Symbol cross reference

VPUMAX	  1205%	  1215
W	   125	  1153	  1215	  1219	  1240	  1243	  1248	  2061	  2066	  2243	  2246	  2248	  2251	  2252
	  3717	  3751	  3752	  3758	  3759	  3762	  3763	  3790	  3792	  3796	  3801	  3809	  3810	  3846
	  3852	  3853
WATCH	   884	  1480	  1482#
WATCH1	  1490	  1498#
WATLEN	  1487	  1513#	  1514
WATLOP	  1485#	  1503
WATMXL	    49	  1514#
WATTAB	    49	  1488	  1505#	  1513
WCH1	  1663	  1665#
WCHALL	  1482	  1492
WCHBEG	   208	  1527#
WCHEND	  1408	  1471	  1654#
WCHLEN	  1659	  1678#
WCHLOP	  1660#	  1665
WCHTAB	  1660	  1662	  1672#	  1678
WLKUPX	  1207%	  1209
XX	  1441#	  1444	  1444#	  1445	  1445#	  1449
YY	  1444#	  1444	  1445#	  1445
ZZ	  1299#	  1299	  1442#	  1444	  1444#	  1445	  1445#	  2174#	  2174	  2242#	  2242	  2247#	  2247	  2253#
	  2253	  2277#	  2277	  3043#	  3043	  3128#	  3128	  3129#	  3129	  3130#	  3130	  3132#	  3132	  3133#
	  3133	  3135#	  3135	  3183#	  3183	  3184#	  3184	  3185#	  3185	  3187#	  3187	  3188#	  3188	  3189#
	  3189	  3717#	  3717	  3750#	  3750	  3753#	  3753	  3760#	  3760	  3765#	  3765	  3773#	  3773	  3776#
	  3776
ZZ1	  1299#	  1299	  2174#	  2174	  2242#	  2242	  2247#	  2247	  2253#	  2253	  2277#	  2277	  3043#	  3043
	  3128#	  3128	  3129#	  3129	  3130#	  3130	  3132#	  3132	  3133#	  3133	  3135#	  3135	  3183#	  3183
	  3184#	  3184	  3185#	  3185	  3187#	  3187	  3188#	  3188	  3189#	  3189	  3717#	  3717	  3750#	  3750
	  3753#	  3753	  3760#	  3760	  3765#	  3765	  3773#	  3773	  3776#	  3776
%UPLMA	   973%	   991
%UPS	    53%	  1281	  1282	  1283	  1286	  1287	  1288	  1332	  1333	  1337	  1392	  1804	  1805	  1807
	  1819	  1848	  1854	  2035	  2036	  2231	  3175	  3176	  3665	  3682	  3731	  3735	  3736	  3742
	  4156
%UPT	    53%	  1003	  1004	  1295	  2243	  2246	  3670	  3715	  3751	  3752
%UPT.N	  1205%	  1224
.CPSNO	  1055%	  1055
.PVHCN	  3410
.PVHDT	  3409
.PVHKJ	   263	  3408
.PVHTM	  3411
COMCON - COMMAND DECODER PAGING SYS	MACRO 12.5-46.0 14:31 13-JAN-88
COMCON.MAC	 6-NOV-87 01:34		Macro/Opdef cross reference

C	   636#	   643	   644	   645	   646	   647	   648	   649	   650	   651	   652	   653	   654	   655
	   656	   657	   658	   659	   660	   661	   662	   663	   664	   665	   666	   667	   668	   669
	   670	   671	   672	   673	   674	   675	   676	   677	   678	   679	   680	   681	   682	   683
	   684	   685	   686	   687	   688	   689	   690	   691	   692	   693	   694	   695	   696	   697
	   700#	   706	   709	   710	   711	   712	   713	   714	   715	   716	   717	   718	   719	   720
	   721	   722	   723	   724	   725	   726	   727	   728	   729	   730	   731	   732	   734	   735
	   736	   737	   738	   739	   740	   741	   742	   743	   744	   745	   746	   747	   748	   757
	   758	   759	   760	   761	   762	   764	   765	   766	   768	   769	   770	   771	   772	   773
	   774	   775	   776	   777	   778	   779	   780	   781	   782	   783	   784	   785	   786	   787
	   788	   789	   790	   791	   792	   793	   794	   795	   796	   797	   798	   799	   800	   803
	   804	   807	   815	   816	   817	   818	   819	   820	   821	   822	   832#	   838	   839	   840
	   841	   842	   843	   844	   845	   846	   847	   848	   849	   850	   851	   852	   853	   854
	   855	   856	   857	   858	   859	   860	   861	   862	   863	   864	   865	   866	   867	   868
	   869	   870	   871	   872	   873	   874	   875	   876	   877	   878	   879	   880	   881	   882
	   883	   884	   885	   886	   887	   888	   889	   890	   891	   892
CODES	  1445
CP	   641#	   643	   651	   663	   676	   695	   696	   698	   703	   704	   705	   707	   708	   749
	   750	   751	   755	   756	   767	   801	   802	   805	   806	   808	   812	   813	   814	   823
	   824	   825	   836#	   838	   846	   858	   871	   890	   891	   893
DEFCMS	  3348#	  3385	  3416
IFCPU	  3620	  3706
IFKMC	   671	   866	  1961
IFNCPU	  3618	  3666	  3721
NAMES	   564#	   643	   838
PFALL	  1164	  1587	  1630	  2244	  2782	  4227
PJRST	   259	   496	  1057	  1096	  1101	  1140	  1144	  1234	  1241	  1473	  1624	  1635	  1637	  1645
	  1691	  1704	  1875	  2423	  2432	  2568	  2592	  2612	  2656	  2672	  2744	  3048	  3090	  3107
	  3191	  3508	  3515	  3701	  3782	  3985	  3990	  4034	  4055	  4190	  4240
PJSP	  1539	  1544	  2584
PJUMPE	  2426
PRINTF	  1872	  3045	  3208
PTR	   913#	   915	   916	   917	   918	   922	   923	   924	   925	   929	   930	   931	   932	   933
	   937	   938	   942
PXCT	  1299	  2174	  2242	  2247	  2253	  2277	  3043	  3128	  3129	  3130	  3132	  3133	  3135	  3183
	  3184	  3185	  3187	  3188	  3189	  3717	  3750	  3753	  3760	  3765	  3773	  3776
PXGEN	  1299	  2174	  2242	  2247	  2253	  2277	  3043	  3128	  3129	  3130	  3132	  3133	  3135	  3183
	  3184	  3185	  3187	  3188	  3189	  3717	  3750	  3753	  3760	  3765	  3773	  3776
QUEUES	  1444
SETCMS	  3322#	  3358	  3392
STOPCD	    11	   190	   269	  1210	  1214	  1218	  1226
UMOVE	  2174	  2253
UMOVEM	  3717	  3750	  3773
WRADB	  3670	  3671
X	  1433#	  1444	  1445	  3356#	  3358	  3359	  3360	  3361	  3362	  3363	  3364	  3365	  3366	  3367
	  3368	  3369	  3370	  3371	  3372	  3373	  3374	  3375	  3376	  3377	  3378	  3379	  3380	  3381
	  3385	  3390#	  3392	  3393	  3394	  3395	  3396	  3397	  3398	  3399	  3400	  3401	  3402	  3403
	  3404	  3405	  3406	  3407	  3408	  3409	  3410	  3411	  3412	  3413	  3414	  3415	  3416
XCTBU	  1299	  2242	  2247	  2277	  3128	  3129	  3130	  3132	  3133	  3183	  3184	  3185	  3187	  3188
	  3189	  3753	  3760	  3765	  3776
XCTFU	  2174	  2253	  3043	  3135
XCTTU	  3717	  3750	  3773
XP	  1255	  1257
$END	  4245eY