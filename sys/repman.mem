











                               CHAPTER 1

                       REPORT GENERATOR OPERATION



In order to fully take advantage of the report generator's  capabilities
it  is  sometimes  useful to understand its operational structure.  This
structure is illustrated schematically in the accompanying flow chart.


Each of the six sections which make up the structure  are  fully  within
the  user's control.  However, the report generator performs a number of
specific functions silently, before control passes to each  section  and
after  it  leaves.  For this reason the user must take care that control
passes from section to section as specified, so that the system will not
become confused.


Before  control  passes  to  Section  INITIAL   the   report   generator
initializes itself in Single Record mode, retrieving the first record in
the group of records chosen from the currently selected data-set.   This
is  done  so  that  attribute  references  in  Section INITIAL start out
referring to the first record.  However, the record retrieval pointer is
immediately  reset  to  the  first  record  so  that a subsequent GETREC
retrieves the first record, as would normally be expected.


As control passes to Section GETREC the report generator makes a copy of
the most recently selected record, which is later used in Section TOTALS
and is referred to as the "old" record.  This process is done  for  each
open  data-set  so that the report generator maintains "old" records for
each data-set in the data base.


As control passes from Section GETREC the report  generator  checks  the
values  of  expressions  used  in  the  ON CHANGE statements in both the
HEADING and TOTALS sections to see if they have  changed.   Any  changes
are  flagged  accordingly  for  subsequent  processing by the respective
sections in which they are used.  The first time through all HEADING  ON
CHANGE  expressions  are  flagged  and control is transferred to Section
HEADING;  on subsequent passes control is always transferred to  SECTION
TOTALS.


Within Section TOTALS attribute values are always taken from  the  "old"
REPORT GENERATOR OPERATION                                      Page 1-2


record.   However,  the  values of user-defined variables will always be
their current values.  In  some  cases  this  behavior  may  cause  some
confusion  unless  the user remembers to store the "old" values in other
variables, and reference those variable in Section TOTALS.


As control passes from Section TOTALS, the report generator  clears  the
change  flags  of any TOTALS ON CHANGE expressions which were previously
set.  If there are no more records (i.e.  the "old" record is  the  last
record)   control   passes  to  Section  FINAL;   otherwise  control  is
transferred to section HEADING


Attribute and variable references within Section HEADING always refer to
their  current  values.   As  control  passes out of Section HEADING the
change flags are cleared for any HEADING  ON  CHANGE  expressions  which
were  previously  set.   In  all  cases  control  is then transferred to
Section PRINT which handles output of the detail lines of the report.


Section FINAL processes all user intructions which are done  only  once,
at  the  end of the report.  Following this the report generator returns
control to the next higher control level, either the interactive system,
a DPL segment, or the Host Language interface.
REPORT GENERATOR OPERATION                                      Page 1-3


                         REPORT FLOW OF CONTROL
          
          
       ** REPORT START **
                                  Initialize report system.
                                  Retrieve data values from first
R         SECTION INITIAL         record for subsequent attribute
                 !                references; then reset GETREC
E                !                pointer to first record.
                 !
P  ------->------!
   !             !
O  !      SECTION GETREC          Set "current" attribute values
   !             !                to "old" record values then
R  !             !                retrieve new "current" data
   !             !                values.
T  !             !
   !             !
   !     yes     !                If 1st record selected, go
   !  -----<--- 1ST               Generate any headings requested
G  !  !         REC?              by user.
   !  !          !
E  !  !          ! no
   !  !          !                Use data values from "old"
N  !  !          !                record to increment totals
   ^  !   SECTION TOTALS          counters and generate totals
E  !  !          !                lines if a change break has
   !  !          !                occurred
R  !  !          !
   !  V          !
A  !  !        LAST    yes        If current record is the last
   !  !        REC? ---->---      record, go to final section.
T  !  !          !         !
   !  !          ! no      !
O  !  !          !         !      Generate any headings requested
   !  --> SECTION HEADING  !      if a change break has occurred;
R  !             !         !      otherwise continue.
   !             !         !
   !             !         !
F  !             !         !      Do any output of detail lines
   ---<-- SECTION PRINT    V      requested.
L                          !
                           !
O                          !
                           !
W         SECTION FINAL <---      Performs any final actions
                                  requested by user and then
                                  returns to interactive mode.
C      ** REPORT END **
          
O        
          
N    T    R    O    L












                               CHAPTER 2

                       CREATING ADVANCED REPORTS



We will explain here through  actual  report  examples  how  the  Report
Generator  in  System  1022 can be used for complicated and hierarchical
report problems.  They are  actual  running  reports,  provided  in  two
versions:   one  without  formatting (to increase the clarity of what is
being presented), and one with (in the appendix).  Each  report  example
is  more  complex than the one before, and illustrates the way to handle
one distinct reporting situation.  It is common that a report will  have
more  than  one of these requirements in it.  In this case the user must
take the ideas presented  and  combine  them  for  the  total  solution.
Hopefully,  the design for most of the more complex reports can be taken
directly from one of the examples.

First, the user should read the User's Manual  and  the  short  document                                ______ ______
Report  Flow  of  Control,  to  understand  what  is  happening  in  the______  ____  __  _______
background while a Report Segment is operating.  This will give  insight
into  some  of the rules governing the user when s/he introduces special
program code into a report.  The user creates his own values in the form
of  variables,  derived  from the underlying values in the datasets, and
uses these variables to supply the necessary values to the machinery  of
the  Report  Segment.  Much of the work of doing the report can still be
left to this standard  report  machinery,  once  a  few  techniques  are
understood.   The  user  should  refer  to  the  attached examples while
reading this guide.

The example datasets we will use are briefly  described  in  the  Report
Example  section.   The  dataset  PERSON contains some information about
each person working as a consultant in a  large  company.   The  dataset
TASK  is  a collection of task descriptions that are a billing record of
what each consultant has worked on.  Most  dataset  structures  of  this
type, and most datasets in existence, contain more attributes than these
datasets, and most reports involve  reporting  on  more  attributes  and
totals  than  will be shown here.  But the basic idea of how to generate
each total or result extends easily to greater numbers of  totals  -  it
only requires more set-up to generate what is desired.


Simple Report Downtotals and Crosstotals______ ______ __________ ___ ___________

Example 1 is a simple report that requires no general  structure,  since
the  only commands in the report are the page set-up commands, ON CHANGE
CREATING ADVANCED REPORTS                                       Page 2-2


commands,  and  the  central  PRINT  statement.   This  report  produces
headings  and subtotals on the basis of DEPT within the company, as well
as a final total for the entire PERSON dataset.  TASK is not involved in
this  report.   Here,  the  user  is  interested  in a list of salaries,
bonuses, and total pay for each line, or person, as well  as  downtotals
on  each  quantity.   This  is  easily  done  as  shown  by  putting the
expressions to be totalled into TOT clauses, which generate the sum over
all records (passes) in the report.  The correct subtotals are generated
because the ON CHANGE DEPT statement clears its subtotals at  each  DEPT
break,  when  it  prints them.  The ON END statement collects the sum of
all values in the report and only prints them at the very end, giving  a
grand total.


General Structure_______ _________

Example 2 is the same report as Example 1, except that it  now  has  the
general  report  structure.   This  structure  consists  of  the SECTION
statements, which  divide  the  report  up  into  distinct  sections  of
control.   Within  each  SECTION, only the user's statements will affect
the report.  Between SECTION's the report machinery is invoked and  some
special   things   happen.   When  a  user  introduces  special  control
statements into a report, they must operate only within one SECTION at a
time,  and  the user must understand how the variables s/he creates will
react in the TOT (and other totals arithmetic) clauses.


Pre-Totals__________

Example 3 shows how a quantity in the report is  Pre-Totalled  to  allow
the  printing  of  fractional values (or percent values if multiplied by
100.) in levels of the report.   The  user  is  interested  in  printing
SALARY,  BONUS, and total salary (SALARY+BONUS), for each PERSON.  Also,
we want to know what fraction that salary is as part of  the  DEPT  that
the  person  works in, and in the company as a whole.  When we print the
DEPT subtotals, we want to know what fraction of the company  salary  is
represented  by  setting  up our own variables TSAL and DSAL.  DSAL will
hold the DEPT SALARY+BONUS subtotal when we are printing values for that
department,  and  TSAL  will  hold  the  subtotal for all records in the
report.  We use TSAL and DSAL  in  the  expressions  of  the  report  to            ___
produce  the  required fractions.  We set the values of DSAL and TSAL by                                      ___
placing them in "equals clauses" in the statements  which  generate  the
subtotals  for  printing.  An "equals" clause loads the value of a print
expression into a user variable when  that  expression  is  printed  (or
evaluated  if  in  an EVALUATE statement within an ON CHANGE statement).
The keyword PRETOTAL causes this evaluation to be done before a subtotal                                                       ______
group  is  started.   It  gives  a  subtotal  that  is  available at the
beginning rather than at the end.  The effect  is  for  the  PRETOTAL'ed
statements to generate the subtotal values into variables DSAL and TSAL,
allowing us to print the fractions anywhere we wish.  Note that  we  can
even use DSAL in the same statement that it is created, as long as it is
later in the statement.  Both variables must be  defined  beforehand  in_____
the INITIAL SECTION, or before the report is started.
CREATING ADVANCED REPORTS                                       Page 2-3


Breakdown by an Attribute Value_________ __ __ _________ _____

The ON CHANGE structure of a Report Segment allows us to break on  group
values  in  a  vertical  way.   We  get  subtotals sequentially and in a
hierarchical way.  But, we sometimes wish to print subtotals for a group
that  reflect  a  division  of the group into classes, and report on the
class totals at the end of the group.  Example 4 shows how  to  do  this
for  the  classes of M and F, the values of the attribute SEX.  This can
be done in a  similar  way  for  any  number  of  class  breakdowns,  or
conditions.   It is only necessary to place the selection logic into the
TOTALS SECTION of the report, as has been done here for SEX.

We define the variables we will need, one for each class division of the
quantity (SALARY+BONUS) that we wish to report on.  This is done here in
the INITIAL SECTION.  The idea is that for each time through the report,
just  one of these two variables will hold the value of SALARY+BONUS for
the record, the other variable (or variables, if more than 2) will  hold
the value of 0 for the record.  Then, we use the variables in our TOTALS
expressions instead of the attribute itself, and we can easily  generate
a  total  based  on  the  separate  classes of records, and report these
totals at the end of the group break.

Our extra statements start at the statement LET MALSAL EQ  0,  ...   and
end  with  the label C1:  .  By the time control gets to C1, we have set
the appropriate variable to the quantity in the record being  processed.
We  then  use  the  variables  in  the first ON CHANGE DEPT statement to
generate totals by male and female.  The formatting for  that  statement
would  indicate  what  the totals meant.  Note that we can simply repeat
the control expression DEPT in as many ON CHANGE  statements,  all  kept
together,  as  is convenient to generate the printing that we wish.  Or,
the expressions TOT MALSAL, TOT FEMSAL  could  have  been  used  in  the
second  statement  ON CHANGE DEPT if desired.  Typically, the setting of
the values of the variables is done just at  the  start  of  the  TOTALS
SECTION,  for use throughout that SECTION.  If the user wishes to create
values for variables in other SECTION's, for use in the TOTALS  SECTION,
this  must  be  done  in  a  slightly more complicated way.  The user is
referred to later in this guide.


Multiple Dataset Hierarchies________ _______ ___________

When linking between two or more datasets  in  a  report,  complications
arise  that  each  need  some  understanding.   Our  example for this is
Example 5.  First, the record selection process is no longer  automatic;
the  user  must  supply  statements  which  determine  which records and
attribute values are available to the GENERATOR for each "pass"  through
the  report.   Also,  since we are dealing with multiple datasets, DBSET
statements must  be  included  to  tell  the  System  which  dataset  to
reference  at  any  point.   The  DBSET's are necessary both to tell the
system that a statement  is  to  be  interpreted  with  reference  to  a
particular  dataset,  and  also to tell the system at report run-time to
refer to a given dataset.  Third, since we are doing complicated  record
selection  in  the  GETREC SECTION, and usually wish to make values (via
variables we set up) available to the TOTALS SECTION, we must  construct
"delay  variables"  in  order to transmit the value correctly in time to
CREATING ADVANCED REPORTS                                       Page 2-4


the TOTALS SECTION.  Fourth, since (at present) any  one  statement  can
only  refer to attributes in one dataset at a time, we sometimes need to
transfer values from one dataset, through  a  variable,  for  use  in  a
statement  which  is interpreted in another dataset.  This often happens
with PRINT and FIND statements.  We will discuss each of these points in
reference to Example 5, and later 7 and 8.  Fifth, since there is a FIND
statement  within  the  report,  messages  will  print  out  during  the
execution  of  the  report.   To forestall this, the statement 'SET FMSG
OFF' is used.

The purpose of this hierarchical report is to  produce  prints,  totals,
and  subtotals on the COST field of the TASK records associated with all
people in PERSON.DMS.  The PERSON dataset is used  to  locate  the  TASK
records in the right order, to provide control break information, and to
provide information for straight printing (no totals will  be  generated
from information in the PERSON records themselves).

The report is set up by  opening  both  PERSON  and  TASK  in  the  OPEN
statement, then DBSET'ing to PERSON and selecting and sorting the PERSON
records into the desired order.  This is the major order in which groups                                                                  ______
of TASK records will be retrieved, for use in the report.  There will be
one "pass" through the report structure for each TASK record  retrieved.
If  a  PERSON  record  has  no TASK records, then that person is ignored
(compare to Example 7 later, where things get more complex since  we  do
not want to ignore any PERSON records).

Our purpose in the GETREC SECTION is to find the next TASK  record  that
belongs to the current or next PERSON record.  So, the first thing we do
is go to N2, where we check if there are any more TASK  records  already
selected  to process on the next pass.  When just starting, there are no
TASK records selected, so this boundary condition works.  The  DBSET  at
N2  is  necessary  to switch to dataset 2 (TASK) at run-time even though                                                    ________
the DBSET 2 three statements before is sufficient  to  tell  the  System
that  our  statements  are to be interpreted as applying to dataset 2 in
the report.  N2 does a GETREC,  which,  if  successful,  means  we  have
retrieved  another  TASK  record,  and  control  falls  through into the
SECTION HEADING statement to start our pass through the report.

If the GETREC fails, that means we must get another  PERSON  record,  to
find  the next group of TASK records, to locate the next TASK record for
processing.  So, at NPe set to dataset 1  (PERSON),  get  the  next
PERSON record, save the value of the SSN for that person in the variable
TSSN, DBSET to the TASK dataset, and FIND and SORT the TASK records into
the desired order by TASKNUM.  This order is required because we want to
have subtotals by a control break on the change of the TASKNUM.  If  our
GETREC  on the PERSON dataset fails, we must be out of main records, and
the jump to ENDIT is the standard jump to end  the  entire  report,  and
generate  the final totals and subtotals.  But anyway, after selecting a
new PERSON record, we find ourselves at N2, ready  to  select  the  next
single TASK record for processing through the report.

Some things to note:  The Report Generator operates on single records at
a  time.   It is necessary that we only have a single record selected in
PERSON and TASK at the  end  of  the  GETREC  SECTION,  because  we  are
referring  to values in PERSON and TASK records.  (In Example 6, we need
CREATING ADVANCED REPORTS                                       Page 2-5


not select individual records from the TASK dataset,  since  we  do  not
directly  refer to any attributes in the TASK dataset in the body of the
report.  You will see this later.) Also, if there were three datasets in
this  hierarchy,  the  control would be similar.  One would first try to
get a record from dataset 3, upon failing  this  then  dataset  2,  upon
failing this then dataset 1.

We now get to the HEADING SECTION.  We want the printing divided up into
groups  on  the  basis  of different departments (a criterion in dataset
PERSON), and for each person (i.e.  on SSN) within each department (also
a  criterion  in  PERSON),  and by different task at the lowest level (a
criterion in the TASK dataset).  So, in SECTION HEADING, we DBSET  to  1
and  include ON CHANGE breaks for DEPT and SSN, then switch to dataset 2
to generate the break on TASKNUM.  When using  multiple  datasets,  each
SECTION  should  start with an explicit DBSET, since the flow of control
between SECTION's in the background of the Report Generator is  not  the
same  as  the linear flow on the program page.  (Except, if a SECTION is
blank or doesn't refer to attributes  or  datasets,  then  no  DBSET  is
needed, as in the FINAL SECTION of this report.)

In the PRINT SECTION we are only interested in the  COST  of  each  task
record, so we print it.


The TOTALS SECTION is similar to the HEADING SECTION, in that  we  start
now  with  a  DBSET  2  to generate a subtotal control break by TASKNUM,
printing the TOT COST for that group of same tasks.  We next see the use
of  an  intermediate variable.  We want the next control break generated
from information in dataset 1,  but  we  want  to  subtotal  information
(COST) available only in dataset 2.  So, before setting to dataset 1, we
pick up the value of COST in this record,  and  put  the  value  in  the
variable  TMPCOST.   Then we switch to dataset 1, and use TMPCOST in our
TOTALS expressions.  TMPCOST has the same value as COST for each  record
that  the  TOTALS  SECTION  sees.   We do the transfer to conform with a
current restrictive rule about referring to only the attributes  of  one
dataset  in any single statement, and it is convenient to refer directly
to PERSON attributes, and indirectly to the attribute COST.

In SECTION FINAL we just release the channel we are using (by  releasing
all channels) and then the report ends.


A Summary Hierarchical Report_ _______ ____________ ______

In Example 5 we were interested in totalling information in  dataset  2,
using dataset 1 as simply a guide to that reporting.  In Example 6 it is
the reverse.  We are interested in only a simple total  from  dataset  2
for  each record in dataset 1, while our control breaks and group totals
apply only to records in dataset 1.  Here is how this is done.

Again we open two datasets.  Now the purpose of the GETREC SECTION is to
select  the  next  PERSON  record, and in addition make available to the                                       __ ________
report a quantity which is immediately derived and associated with  that
PERSON  record, namely the total COSTS billed by that person as found in
the TASK dataset.  We are uninterested in the particular values  in  the
CREATING ADVANCED REPORTS                                       Page 2-6


associated TASK records, only in the total.

We run into a snag here that has not come up before.  It  is  convenient
for  us  to generate the value we want into a variable called SCOST (for
Subtotal COST), and do it in the GETREC SECTION.  But the way the REPORT
GENERATOR  operates,  the  TOTALS  SECTION  always needs to operate on a
value which is associated with the  previous  record  processed.   Until                                    ________
this inconvenient logic is changed, the user must introduce a one-record
delay into the transmission of a value from the  GETREC  SECTION  to  be
used in the TOTALS SECTION.  This is because the TOTALS SECTION normally
operates each time on the record values as they  were  just  before  the
next  GETREC's  are  done  (allowing  the  TOTALS SECTION easy access to
previous values needed in descriptive printing on subtotal lines).   So,
how  do we introduce a one record delay?  We create another variable, in
this case OSCOST (for Old SCOST), and we make sure that it is set to the
current  value of SCOST just before doing the GETREC's that set the new,
current value of SCOST.  Then, when we want to print a current value  in
the  HEADING  or  PRINT  SECTIONS,  we reference SCOST.  When we want to
reference the delayed value in the TOTALS SECTION, we use OSCOST.

This complication does not happen if we set the value of a  variable  in
the  TOTALS  SECTION and then use it in the TOTALS SECTION.  That is why
we were able to avoid this problem until now.  Future  versions  of  the
Report   Generator   will   be  made  available  that  operate  slightly
differently than the current one, and which will eliminate much of  this
inconvenient variable creation and usage.

So, we now see the reason why the first statement in the GETREC  SECTION
is  to set OSCOST to SCOST.  This sets the delayed value, even though on
the first round it is meaningless and doesn't hurt anything.   Next,  we
DBSET  just before the first statement which is sensitive to the current
dataset, namely the GETREC in the  PERSON  dataset.   As  we  have  seen
before,  the  transfer variable TSSN is used to find an associated group
of records in TASK.  The EVALUATE statement then operates on  dataset  2
in  Global  Mode,  since no GETREC is done in dataset 2, and operates to    ______  ____
set SCOST to the value of TOT COST evaluated for the  group  of  records
just  found.  This is the only extra information we need from dataset 2,
so we proceed into the relatively simple body of the report.

The remaining report structure is very similar to  Example  2.   We  are
reporting  on  values  found  in dataset 1, with the additional value we
have created in the variables SCOST and OSCOST.  We simply reference the
current  value  SCOST  in the PRINT SECTION, and use the "delayed" value
OSCOST in the TOTALS SECTION.


Hierarchical Report with Missing Related Records____________ ______ ____ _______ _______ _______

Example 7 is a reporting problem similar to Example 5, except that  here
information  from  both  datasets is to be totalled and reported on.  In
addition, we want to see displayed every record in  the  PERSON  dataset                                   _____
that  is selected, and along with it a total of the associated cost, and
a listing of the TASK records that participate in this total.   We  will
remember  that in Example 5 a PERSON record without any TASK records did
not matter, because we were only  printing  information  from  the  TASK
CREATING ADVANCED REPORTS                                       Page 2-7


records,  and  using  ON CHANGE information from the PERSON records.  In
Example 6 we did not care if there were no TASK records for a particular
SSN because the totals produced were the only important information, and
the total for a null group of task records is correctly 0.

The significant difference here is that we want to see  detail  in  both
datasets  at  once,  and  do totals in both datasets at once, where some
main records will have no sub-records associated.

Our strategy is to create intermediate variables to hold values  derived
from  dataset  2, and to set those values according to what was found in
dataset 2.  We will make a pass through the report once for  every  TASK
record  we  find, and in addition, once each time we run across a PERSON
record (SSN) that has no associated TASK record.  For the regular GETREC
on  a  TASK  record we set the intermediate variable to the value in the
TASK record, and for the null case we set the intermediate variables  to
zero, or flagged values.

One additional problem is solved  in  this  way.   Since  we  will  pass
through the report once for each TASK record, yet do totalling on values
in the PERSON main records, we would ordinarily get totals that were too
large.   We  would  evaluate TOT SALARY twice if we get a main record in
PERSON with two associated records in TASK.  We want to  add  in  SALARY
just  once for each main record, and we arrange to do this by setting up
a variable that we arrange to be zero, except just once for  each  group
in TASK.  For that one time in each group that the variable has a value,
that value is just the value of the SALARY field  in  the  main  record.
All  of  the other passes through the report add nothing to our total of
salary.  We can also generate a true count of the main records  in  this
way.   We see that in this example we define the two variables VCOST and
VTASKN to hold the appropriate  values  picked  from  the  TASK  dataset
record, in the GETREC SECTION.  Since we want to use this information in
the TOTALS SECTION, we also  need  their  "delayed"  forms,  OVCOST  and
OVTASKN, which are the quantities to refer to for printing and totalling
in the TOTALS SECTION.  They operate similarly to SCOST  in  Example  6.
The two variable TMPSAL and MAINCNT will have a non-zero value just once
for each group of TASK records, and will  be  used  to  easily  generate
totals of the quantities associated with the main records in PERSON.

The GETREC SECTION here is very similar to that of Example 5.   We  have
the  same selection mechanism, to retrieve another record from dataset 2
if possible, and failing that, we select the next record from dataset 1,
and  generate  the new group of records in dataset 2 so that we can pick
one.  The difference here is that  if  there  are  no  records  in  TASK                                                   __
associated  with  a  particular  record  in PERSON, then we want to drop
through the report once anyway so that the PERSON record is reported on.
So,  the  IF  SYSNREC  statement  detects  whether there is at least one
associated record in TASK.  If yes, then they are selected one by one at
N2,  and  the  variables  VCOST  and  VTASKN are used to pick the needed
quantities out of the TASK record.  If there are no associated  records,                                                 __
then  the  value of COST is set to 0 in VCOST, and the dummy value of 99
is set as the TASKNUM in VTASKN.  So, when the user sees a  person  with
just  one associated task on the printed report, and that task number is
99, it is easily seen that there were no task records for that person.
CREATING ADVANCED REPORTS                                       Page 2-8


In the PRINT SECTION we print the value of VCOST which  is  the  current
value of the COST field in the TASK record.

In the TOTALS SECTION, we print and calculate with the "delayed"  values
of  the  variables we set in the GETREC SECTION.  We DBSET to 1, and the
ON CHANGE VTASKN detects groups  of  similar  TASK  records  and  prints
subtotals  of  COST for them, along with the value of TASKNUM associated
with the group.  The value of COST is in the "delayed" variable  OVCOST,
and the value of the TASKNUM is in the "delayed" variable VTASKN.

The user may have noted that we said ON  CHANGE  VTASKN  instead  of  ON
CHANGE  OVTASKN.  It is not a misprint, but a technicality of the Report
Generator.  The values used in the ON CHANGE expression  should  be  the
"current" forms of derived variables, not the "delayed" forms.  So it is
perfectly  correct,  and  necessary  to  use  ON  CHANGE  VTASKN   PRINT                                                          ______
OVTASKN ...   ._______

Having subtotalled at level of the  TASK  records,  we  want  our  other
subtotal  levels  to be directed by values in the PERSON dataset, and we
run into our second delicate  point.   Control  will  flow  through  the
TOTALS  SECTION  once  for  each TASK record, and each time the value of
SALARY+BONUS will remain the same, the value it has in the single PERSON
record  that owns multiple TASK records.  If we did totals directly from
the quantity SALARY+BONUS we would end up with multiple copies  of  that
quantity  in  the total, and that is not what we want.  So we set up the
intermediate variables TMPSAL and MAINCNT, which will  hold  the  values
SALARY+BONUS and the value 1 (for counting) just once for each different
PERSON record, no matter how many (0 to n) TASK records  belong  to  it.
We use a crafty trick.

First, we set the values of both variables  to  0.   Then,  we  use  the
"equals clause" in the ON CHANGE SSN statements to load a value into the
variables just when the SSN changes, which will be just  once  for  each
SSN.   The  values will be set in time for them to be used in any higher
level statements, such as the ON  CHANGE  DEPT  statement,  to  generate
counts  and  totals.   Since  we  were  going  to  print  the  value  of
SALARY+BONUS on each change of the SSN, we set TMPSAL by just  including
it  in  front  of that print expression.  We were not going to print the
expression 1 however, so we include the statement ON CHANGE SSN EVALUATE
MAINCNT  EQ 1.  simply to set MAINCNT at the proper time.  By then using
the expression TOT MAINCNT in the ON CHANGE DEPT and ON  END  statements
we generate a count of the number of PERSON records participating in the
subtotals.  The expression TOT TMPSAL generates the correct sum  of  all
of the SALARY+BONUS fields in the PERSON records.


Conditional Printing of Unneeded Totals___________ ________ __ ________ ______

Example 7 works fine for printing a hierarchical report  where  some  of
the  main  records  have  no sub-records, but we can improve a little on
what happens when one of those main records is processed.  In Example 7,
we  get  a  line  generated  by the statement ON CHANGE VTASKN PRINT ...
even though there are no TASK records.  This is  because  this  line  is
intended  to  produce subtotals on the task records, and it does so even
when there are none, generating a value of 0 for TOT OVCOST and  a  flag
CREATING ADVANCED REPORTS                                       Page 2-9


value of 99 for the task number.

Example 8 improves on this.  We can still use the machinery  of  the  ON
CHANGE  and TOT statements, while introducing our own desire to suppress
printing when there are no TASK records to  TOTAL.   This  can  also  be
extended  to  suppressing  unneeded  totals  lines for TASK groups where
there is only 1 record, but this is left  for  the  user  to  think  out
later.

We still want to generate the value of TOT OVCOST, we just don't know if
we  want to print it.  So we use the statement ON CHANGE VTASKN EVALUATE
...  , where the important change is using EVALUATE  instead  of  PRINT.
This  will  evaluate the expression TOT OVCOST as we desire, but instead
of printing it, the value will  be  put  into  our  variable  TCOST  for
further  use.   The  second ON CHANGE VTASKN goes to CHVT (CHeck VTaskn)
when VTASKN changes.  Control just skips this part via the GO  TO  CON1,
when  VTASKN  doesn't  change  (as  in  the  middle  of  a group of TASK
records).

When we get to CHVT we know that this may  be  the  time  to  print  our
subtotal  only  if this was a valid group of TASK records.  It will be a
valid group if the value of OVTASKN is not the flag value of 99.  So  we
skip the print statement if it is the value 99.  When it is not 99, then                               __                        __ ___
TCOST has in it the value of the subtotal we desire, and we fall through
the PRINT statement which prints the TASK subtotal line we wish.

This general technique, of generating totals silently and then  printing
them  conditionally,  can  be used in many other situations to customize
report output without having to give up the automatic operation  of  the
ON  CHANGE statements, and of course the operation of the totals clauses
contained within them.
CREATING ADVANCED REPORTS                                      Page 2-10


                            REPORT EXAMPLES

In each example, lines of particular interest or importance are preceded
by  an  asterisk  (*).   This  allows an easy comparison between a given
example and the most similar previous example.



            DATA SETS USED IN THE EXAMPLES


DATA SET:      PERSON.DMS     The people in a large company.

ATTRIBUTES:


     SSN       Social Security number, keyed.

     DEPT      Department within the company.

     SALARY    Yearly salary.

     BONUS     Bonus for this year.

     SEX       Either M or F.



DATA SET:      TASK.DMS       Actual assignments carried out.

ATTRIBUTES:


     ASSN      Social Security number of person who did the task.

     TASKNUM   Number of the task.

     COST      Assigned value of the task.












                              APPENDIX A

                   REPORTS WITHOUT FORMAT STATEMENTS








EXAMPLE 1. THE SIMPLEST REPORT.

         OPEN PERSON. FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

           ON CHANGE DEPT PRINT DEPT.

             PRINT SSN SALARY BONUS SALARY+BONUS.

           ON CHANGE DEPT PRINT TOT SALARY TOT BONUS TOT SALARY+BONUS.

           ON END         PRINT TOT SALARY TOT BONUS TOT SALARY+BONUS.

         REPORT END.
REPORTS WITHOUT FORMAT STATEMENTS                                Page A-2


EXAMPLE 2. THE GENERAL REPORT.

         OPEN PERSON. FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

           SECTION INITIAL.

           SECTION GETREC.

           SECTION HEADING.

             ON CHANGE DEPT PRINT DEPT.

           SECTION PRINT.

             PRINT SSN SALARY BONUS SALARY+BONUS.

           SECTION TOTALS.

             ON CHANGE DEPT PRINT TOT SALARY TOT BONUS TOT SALARY+BONUS.

             ON END         PRINT TOT SALARY TOT BONUS TOT SALARY+BONUS.

           SECTION FINAL.

         REPORT END.
REPORTS WITHOUT FORMAT STATEMENTS                                Page A-3


EXAMPLE 3. REPORT WITH PRETOTALS.

         OPEN PERSON. FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

           SECTION INITIAL.

             DEFINE REAL  DSAL, TSAL.

           SECTION GETREC.

           SECTION HEADING.

             ON CHANGE DEPT PRINT DEPT.

           SECTION PRINT.

             PRINT SSN SALARY BONUS SALARY+BONUS  (0.+SALARY+BONUS)/DSAL
                 (0.+SALARY+BONUS)/TSAL.

           SECTION TOTALS.

             ON CHANGE DEPT PRETOTAL PRINT TOT SALARY TOT BONUS
                 DSAL= TOT SALARY+BONUS  (0.+DSAL)/TSAL.

             ON END         PRETOTAL PRINT TOT SALARY TOT BONUS
                 TSAL= TOT SALARY+BONUS.

           SECTION FINAL.

         REPORT END.
REPORTS WITHOUT FORMAT STATEMENTS                                Page A-4


EXAMPLE 4. EXTRA BREAKDOWN BY SEX USING SPLIT VALUE VARIABLES.

         OPEN PERSON. FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

           SECTION INITIAL.

             DEFINE REAL  MALSAL, FEMSAL.

           SECTION GETREC.

           SECTION HEADING.

             ON CHANGE DEPT PRINT DEPT.

           SECTION PRINT.

             PRINT SSN SALARY BONUS SALARY+BONUS.

           SECTION TOTALS.

             LET MALSAL EQ 0, FEMSAL EQ 0.

             IF SEX EQ "M" THEN M1.
             #COM  HERE SEX OF PERSON IS FEMALE.
             LET FEMSAL EQ SALARY+BONUS.
             GO TO C1.
             #COM  HERE SEX OF PERSON IS MALE.
M1:          LET MALSAL EQ SALARY+BONUS.
C1:

             ON CHANGE DEPT PRINT TOT MALSAL TOT FEMSAL.

             ON CHANGE DEPT PRINT TOT SALARY TOT BONUS TOT SALARY+BONUS.

             ON END         PRINT TOT SALARY TOT BONUS TOT SALARY+BONUS.

           SECTION FINAL.

         REPORT END.
REPORTS WITHOUT FORMAT STATEMENTS                                Page A-5


EXAMPLE 5. REPORTING A HIERARCHY.

*        SET FMSG OFF.           #COM SO NO "FIND" MSGS WILL PRINT OUT.

         OPEN PERSON TASK.
         DBSET 1. FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

           SECTION INITIAL.
*            DEFINE TEXT 11 TSSN.
*            DEFINE REAL TMPCOST.

           SECTION GETREC.

*            GO TO N2.           #COM CYCLE FIRST ON DATASET 2 RECORDS.
*NPERS:      DBSET 1.
*            GETREC ENDIT.       #COM REPORT DONE WHEN THRU DATASET 1.
*            LET TSSN EQ SSN.
*            DBSET 2.
*            F ASSN EQ TSSN.     #COM SELECT NEW TASK RECORDS.
*            SORT TASKNUM.

*N2:         DBSET 2.
             GETREC NPERS.       #COM GO FOR NEW PERSON WHEN OUT OF
                                 TASKS FOR LAST ONE.

           SECTION HEADING.
             DBSET 1.
             ON CHANGE DEPT PRINT DEPT.
             ON CHANGE SSN PRINT SSN.

             DBSET 2.
             ON CHANGE TASKNUM PRINT TASKNUM.

           SECTION PRINT.
             DBSET 2.
             PRINT COST.

ENDIT:     SECTION TOTALS.
             DBSET 2.
             ON CHANGE TASKNUM PRINT TOT COST.
             LET TMPCOST EQ COST.

             DBSET 1.
             ON CHANGE SSN PRINT SSN TOT TMPCOST.
             ON CHANGE DEPT PRINT TOT TMPCOST.
             ON END         PRINT TOT TMPCOST.

           SECTION FINAL.
             RELEASE.
         REPORT END.
REPORTS WITHOUT FORMAT STATEMENTS                                Page A-6


EXAMPLE 6. SUMMARIZING A HIERARCHY.

         SET FMSG OFF.           #COM SO NO "FIND" MSGS WILL PRINT OUT.

         OPEN PERSON TASK.
         DBSET 1.
         FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

           SECTION INITIAL.

*            DEFINE REAL  OSCOST, SCOST.
             DEFINE TEXT 11 TSSN.

           SECTION GETREC.

*            LET OSCOST EQ SCOST.    #COM CREATE OLD VERSION OF SCOST.
NPERS:       DBSET 1.
             GETREC ENDIT.       #COM REPORT DONE WHEN THRU DATASET 1.
             LET TSSN EQ SSN.
             DBSET 2.
             FIND ASSN EQ TSSN.  #COM SELECT NEW TASK RECORDS.
*            EVALUATE  SCOST EQ TOT COST.

           SECTION HEADING.

             DBSET 1.
             ON CHANGE DEPT PRINT DEPT.

           SECTION PRINT.

             PRINT SSN SALARY BONUS SALARY+BONUS SCOST.

ENDIT:     SECTION TOTALS.

             DBSET 1.
             ON CHANGE DEPT PRINT TOT SALARY+BONUS TOT OSCOST.

             ON END         PRINT TOT SALARY+BONUS TOT OSCOST.

           SECTION FINAL.

             RELEASE.

         REPORT END.
REPORTS WITHOUT FORMAT STATEMENTS                                Page A-7


EXAMPLE 7. HIERARCHY WITH POSSIBLY MISSING RELATED RECORDS.

         SET FMSG OFF.           #COM SO NO "FIND" MSGS WILL PRINT OUT.

         OPEN PERSON TASK.
         DBSET 1.
         FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

           SECTION INITIAL.

             DEFINE TEXT 11 TSSN.
*            DEFINE REAL  TMPSAL, MAINCNT, VCOST, OVCOST, VTASKN,
*                        OVTASKN.

           SECTION GETREC.

*            #COM START BY SAVING OLD VALUES FOR TOTALS SECTION.
*            LET OVCOST EQ VCOST, OVTASKN EQ VTASKN.

             GO TO N2.           #COM CYCLE FIRST ON DATASET 2 RECORDS.
NPERS:       DBSET 1.
             GETREC ENDIT.       #COM REPORT DONE WHEN THRU DATASET 1.
             LET TSSN EQ SSN.
             DBSET 2.
             FIND ASSN EQ TSSN.  #COM SELECT NEW TASK RECORDS.
*            IF SYSNREC GT 0 THEN OK1.

*            LET VCOST EQ 0, VTASKN EQ 99.
*            GO TO SECH.         #COM GO WITH 0 VALUES WHEN NO TASK
                                 RECORDS.

OK1:         SORT TASKNUM.

N2:          DBSET 2.            #COM NEED THIS FOR JUMP FROM NPERS-1.
             GETREC NPERS.       #COM GO FOR NEW PERSON WHEN OUT OF
                                 TASKS FOR LAST ONE.
*            LET VCOST EQ COST, VTASKN EQ TASKNUM.
             #COM THE VALUES IN TASK RECORD.

SECH:      SECTION HEADING.

             DBSET 1.
             ON CHANGE DEPT PRINT DEPT.

           SECTION PRINT.

             DBSET 2.
*            PRINT VCOST.

ENDIT:     SECTION TOTALS.

             DBSET 1.
*            ON CHANGE VTASKN PRINT OVTASKN TOT OVCOST.
REPORTS WITHOUT FORMAT STATEMENTS                                Page A-8


*            LET TMPSAL EQ 0, MAINCNT EQ 0.

*            ON CHANGE SSN EVALUATE MAINCNT EQ 1.
*                        #COM TO GENERATE THE NUMBER OF PERSONS.

*            ON CHANGE SSN PRINT SSN TMPSAL=SALARY+BONUS TOT OVCOST.

*            ON CHANGE DEPT PRINT TOT MAINCNT TOT TMPSAL TOT OVCOST.

             ON END         PRINT TOT MAINCNT TOT TMPSAL TOT OVCOST.

           SECTION FINAL.

             RELEASE.

         REPORT END.
REPORTS WITHOUT FORMAT STATEMENTS                                Page A-9


EXAMPLE 8. MORE SOPHISTICATED MISSING RECORDS.

         SET FMSG OFF.           #COM SO NO "FIND" MSGS WILL PRINT OUT.

         OPEN PERSON TASK.
         DBSET 1.
         FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

           SECTION INITIAL.

             DEFINE TEXT 11 TSSN.
             DEFINE REAL  TMPSAL, MAINCNT, VCOST, OVCOST, VTASKN,
                         OVTASKN.
*            DEFINE REAL  TCOST.

           SECTION GETREC.

             #COM START BY SAVING OLD VALUES FOR TOTALS SECTION.
             LET OVCOST EQ VCOST, OVTASKN EQ VTASKN.

             GO TO N2.           #COM CYCLE FIRST ON DATASET 2 RECORDS.
NPERS:       DBSET 1.
             GETREC ENDIT.       #COM REPORT DONE WHEN THRU DATASET 1.
             LET TSSN EQ SSN.
             DBSET 2.
             FIND ASSN EQ TSSN.  #COM SELECT NEW TASK RECORDS.
             IF SYSNREC GT 0 THEN OK1.

             LET VCOST EQ 0, VTASKN EQ 99.
             GO TO SECH.         #COM GO WITH 0 VALUES WHEN NO TASK
                                 RECORDS.

OK1:         SORT TASKNUM.

N2:          DBSET 2.            #COM NEED THIS FOR JUMP FROM NPERS-1.
             GETREC NPERS.       #COM GO FOR NEW PERSON WHEN OUT OF
                                 TASKS FOR LAST ONE.
             LET VCOST EQ COST, VTASKN EQ TASKNUM.
             #COM THE VALUES IN TASK RECORD.

SECH:      SECTION HEADING.

             DBSET 1.
             ON CHANGE DEPT PRINT DEPT.

           SECTION PRINT.

             DBSET 2.
*            IF VCOST EQ 0 THEN NOPRINT.
                 #COM SO WON'T PRINT A NULL COST.

             PRINT VCOST.
REPORTS WITHOUT FORMAT STATEMENTS                               Page A-10


*NOPRINT:

ENDIT:     SECTION TOTALS.

             DBSET 1.
*            ON CHANGE VTASKN EVALUATE TCOST=TOT OVCOST.

*            ON CHANGE VTASKN GO TO CHVT.
*            GO TO CON1.

*CHVT:       IF OVTASKN EQ 99 THEN CON1.
*            #COM  SKIP PRINTING ANYTHING IF NO TASK RECORD.

*            PRINT OVTASKN TCOST.

*CON1:

             LET TMPSAL EQ 0, MAINCNT EQ 0.

             ON CHANGE SSN EVALUATE MAINCNT EQ 1.
                                 #COM TO GENERATE THE NUMBER OF PEOPLE.

             ON CHANGE SSN  PRINT SSN TMPSAL=SALARY+BONUS TOT OVCOST.

             ON CHANGE DEPT PRINT TOT MAINCNT TOT TMPSAL TOT OVCOST.

             ON END         PRINT TOT MAINCNT TOT TMPSAL TOT OVCOST.

           SECTION FINAL.

             RELEASE.

         REPORT END.












                              APPENDIX B

                     REPORTS WITH FORMAT STATEMENTS








EXAMPLE 1. THE SIMPLEST REPORT.

         OPEN PERSON. FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

         PAGE 54. BODY 54.
         HEADING PRINT SYSPAGE
                 FMT 'OUTPUT FROM EXAMPLES 1 AND 2.' 50T 'PAGE ' F5.0 //
                 'SSN' 25T 'SALARY' 41T 'BONUS' 49T 'SALARY+BONUS' /
                 '---' 25T '------' 41T '-----' 49T '------------' //
                 END.

         ON CHANGE DEPT PRINT DEPT
                 FMT / "DEPARTMENT: " A20 / END.

         PRINT SSN SALARY BONUS SALARY+BONUS
                 FMT A11 20T F$7.2 35T F$7.2 50T F$7.2 END.

         ON CHANGE DEPT PRINT TOT SALARY TOT BONUS TOT SALARY+BONUS
                 FMT / "DEPT TOTAL:" 20T F$7.2 35T F$7.2 50T F$7.2 END.

         ON END         PRINT TOT SALARY TOT BONUS TOT SALARY+BONUS
                 FMT // "GRAND TOTAL:" 20T F$7.2 35T F$7.2 50T F$7.2
                 END.

         REPORT END.
REPORTS WITH FORMAT STATEMENTS                                  Page B-2


EXAMPLE 2. THE GENERAL REPORT.

         OPEN PERSON. FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

         SECTION INITIAL.

         PAGE 54. BODY 54.
         HEADING PRINT SYSPAGE
                 FMT 'OUTPUT FROM EXAMPLE 2.' 50T 'PAGE ' F5.0 //
                 'SSN' 25T 'SALARY' 41T 'BONUS' 49T 'SALARY+BONUS' /
                 '---' 25T '------' 41T '-----' 49T '------------' //
                 END.

         SECTION GETREC.

         SECTION HEADING.

         ON CHANGE DEPT PRINT DEPT
                 FMT / "DEPARTMENT: " A20 / END.

         SECTION PRINT.

         PRINT SSN SALARY BONUS SALARY+BONUS
                 FMT A11 20T F$7.2 35T F$7.2 50T F$7.2 END.

         SECTION TOTALS.

         ON CHANGE DEPT PRINT TOT SALARY TOT BONUS TOT SALARY+BONUS
                 FMT / "DEPT TOTAL:" 20T F$7.2 35T F$7.2 50T F$7.2
                 END.

         ON END         PRINT TOT SALARY TOT BONUS TOT SALARY+BONUS
                 FMT // "GRAND TOTAL:" 20T F$7.2 35T F$7.2 50T F$7.2
                 END.

         SECTION FINAL.

         REPORT END.
REPORTS WITH FORMAT STATEMENTS                                  Page B-3


EXAMPLE 3. REPORT WITH PRETOTALS.

         OPEN PERSON. FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

         SECTION INITIAL.

         DEFINE REAL  DSAL, TSAL.

         PAGE 54. BODY 54.
         HEADING PRINT SYSPAGE
                 FMT 'OUTPUT FROM EXAMPLE 3.' 50T 'PAGE ' F5.0 //
                 'SSN' 20T 'SALARY' 34T 'BONUS' 48T 'SALARY' 58T
                 'DEPT' 3X 'TOTAL' / 48T '+BONUS' /
                 '---' 20T '------' 34T '-----' 48T '------' 58T
                 '----' 3X '-----' // END.

         SECTION GETREC.

         SECTION HEADING.

         ON CHANGE DEPT PRINT DEPT
                 FMT / "DEPARTMENT: " A20 / END.

         SECTION PRINT.

         PRINT SSN SALARY BONUS SALARY+BONUS  (0.+SALARY+BONUS)/DSAL
                 (0.+SALARY+BONUS)/TSAL
                 FMT A11 15T F$7.2 28T F$7.2 43T F$7.2 56T F1.3 "%"
                 2X F1.3 "%" END.

         SECTION TOTALS.

         ON CHANGE DEPT PRETOTAL PRINT TOT SALARY TOT BONUS
                 DSAL= TOT SALARY+BONUS  (0.+DSAL)/TSAL
                 FMT / "DEPT TOTAL:" 15T F$7.2 28T F$7.2 43T F$7.2
                 64T F1.3 "%" END.

         ON END         PRETOTAL PRINT TOT SALARY TOT BONUS
                 TSAL= TOT SALARY+BONUS
                 FMT // "GRAND TOTAL:" 15T F$7.2 28T F$7.2 43T F$7.2
                 END.

         SECTION FINAL.

         REPORT END.
REPORTS WITH FORMAT STATEMENTS                                  Page B-4


EXAMPLE 4. EXTRA BREAKDOWN BY SEX USING SPLIT VALUE VARIABLES.

         OPEN PERSON. FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

         SECTION INITIAL.

         DEFINE REAL  MALSAL, FEMSAL.

         PAGE 54. BODY 54.
         HEADING PRINT SYSPAGE
                 FMT 'OUTPUT FROM EXAMPLE 4.' 50T 'PAGE ' F5.0 //
                 'SSN' 25T 'SALARY' 41T 'BONUS' 49T 'SALARY+BONUS' /
                 '---' 25T '------' 41T '-----' 49T '------------' //
                 END.

         SECTION GETREC.

         SECTION HEADING.

         ON CHANGE DEPT PRINT DEPT
                 FMT / "DEPARTMENT: " A20 / END.

         SECTION PRINT.
         PRINT SSN SALARY BONUS SALARY+BONUS
                 FMT A11 20T F$7.2 35T F$7.2 50T F$7.2 END.

         SECTION TOTALS.

         LET MALSAL EQ 0, FEMSAL EQ 0.

         IF SEX EQ "M" THEN M1.
         #COM  HERE SEX OF PERSON IS FEMALE.
         LET FEMSAL EQ SALARY+BONUS.
         GO TO C1.
         #COM  HERE SEX OF PERSON IS MALE.
M1:      LET MALSAL EQ SALARY+BONUS.
C1:

         ON CHANGE DEPT PRINT TOT MALSAL TOT FEMSAL
                 FMT / "MALE TOTAL:" 50T F$7.2 /
                 "FEMALE TOTAL:" 50T F$7.2 END.

         ON CHANGE DEPT PRINT TOT SALARY TOT BONUS TOT SALARY+BONUS
                 FMT / "DEPT TOTAL:" 20T F$7.2 35T F$7.2 50T F$7.2 END.

         ON END         PRINT TOT SALARY TOT BONUS TOT SALARY+BONUS
                 FMT  // "GRAND TOTAL:" 20T F$7.2 35T F$7.2 50T F$7.2
                 END.

         SECTION FINAL.
         REPORT END.
REPORTS WITH FORMAT STATEMENTS                                  Page B-5


EXAMPLE 5. REPORTING A HIERARCHY.

         SET FMSG OFF.           #COM SO NO "FIND" MSGS WILL PRINT OUT.

         OPEN PERSON TASK.
         DBSET 1.
         FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

         SECTION INITIAL.

         DEFINE TEXT 11 TSSN.
         DEFINE REAL TMPCOST.

         PAGE 54. BODY 54.
         HEADING PRINT SYSPAGE
                 FMT 'OUTPUT FROM EXAMPLE 5.' 50T 'PAGE ' F5.0 //
                 46T 'COSTS' / 46T '-----' // END.

         SECTION GETREC.

         GO TO N2.               #COM CYCLE FIRST ON DATASET 2 RECORDS.
NPERS:   DBSET 1.
         GETREC ENDIT.           #COM REPORT DONE WHEN THRU DATASET 1.
         LET TSSN EQ SSN.
         DBSET 2.
         F ASSN EQ TSSN.         #COM SELECT NEW TASK RECORDS.
         SORT TASKNUM.

N2:      DBSET 2.
         GETREC NPERS.           #COM GO FOR NEW PERSON WHEN OUT OF
                                 TASKS FOR LAST ONE.

         SECTION HEADING.

         DBSET 1.
         ON CHANGE DEPT PRINT DEPT
                 FMT /// "DEPARTMENT: " A20 END.

         ON CHANGE SSN PRINT SSN
                 FMT // 5X "PERSON: " A11 END.

         DBSET 2.
         ON CHANGE TASKNUM PRINT TASKNUM
                 FMT / 10X "TASK: " I2 END.

         SECTION PRINT.
         DBSET 2.
         PRINT COST
                 FMT 40T F$7.2 END.

ENDIT:   SECTION TOTALS.

         DBSET 2.
REPORTS WITH FORMAT STATEMENTS                                  Page B-6


         ON CHANGE TASKNUM PRINT TOT COST
                 FMT 10X "SUBTOTAL FOR TASK:" 40T F$7.2 END.

         LET TMPCOST EQ COST.

         DBSET 1.
         ON CHANGE SSN PRINT SSN TOT TMPCOST
                 FMT / 5X "TOTAL FOR PERSON " A11 ":" 40T F$7.2 END.

         ON CHANGE DEPT PRINT TOT TMPCOST
                 FMT // "DEPT TOTAL:" 40T F$7.2 END.

         ON END         PRINT TOT TMPCOST
                 FMT /// "GRAND TOTAL:" 40T F$7.2 END.

         SECTION FINAL.

         RELEASE.

         REPORT END.
REPORTS WITH FORMAT STATEMENTS                                  Page B-7


EXAMPLE 6. SUMMARIZING A HIERARCHY.

         SET FMSG OFF.           #COM SO NO "FIND" MSGS WILL PRINT OUT.

         OPEN PERSON TASK.
         DBSET 1.
         FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

         SECTION INITIAL.

         DEFINE REAL  OSCOST, SCOST.
         DEFINE TEXT 11 TSSN.

         PAGE 54. BODY 54.
         HEADING PRINT SYSPAGE
                 FMT 'OUTPUT FROM EXAMPLE 6.' 50T 'PAGE ' F5.0 //
                 'SSN' 20T 'SALARY' 36T 'BONUS' 44T 'SALARY+BONUS'
                 63T 'COSTS' /
                 '---' 20T '------' 36T '-----' 44T '------------'
                 63T '-----' // END.

         SECTION GETREC.
         LET OSCOST EQ SCOST.    #COM CREATE OLD VERSION OF SCOST.
NPERS:   DBSET 1.
         GETREC ENDIT.           #COM REPORT DONE WHEN THRU DATASET 1.
         LET TSSN EQ SSN.
         DBSET 2.
         FIND ASSN EQ TSSN.      #COM SELECT NEW TASK RECORDS.
         EVALUATE  SCOST EQ TOT COST.

         SECTION HEADING.
         DBSET 1.
         ON CHANGE DEPT PRINT DEPT
                 FMT / "DEPARTMENT: " A20 / END.

         SECTION PRINT.
         PRINT SSN SALARY BONUS SALARY+BONUS SCOST
                 FMT A11 15T F$7.2 30T F$7.2 45T F$7.2 57T F$7.2 END.

ENDIT:   SECTION TOTALS.
         DBSET 1.
         ON CHANGE DEPT PRINT TOT SALARY+BONUS TOT OSCOST
                 FMT / "DEPT TOTAL:" 45T F$7.2 57T F$7.2 END.

         ON END         PRINT  TOT SALARY+BONUS TOT OSCOST
                 FMT // "GRAND TOTAL:" 45T F$7.2 57T F$7.2 END.

         SECTION FINAL.
         RELEASE.
         REPORT END.
REPORTS WITH FORMAT STATEMENTS                                  Page B-8


EXAMPLE 7. HIERARCHY WITH POSSIBLY MISSING RELATED RECORDS.

         SET FMSG OFF.           #COM SO NO "FIND" MSGS WILL PRINT OUT.

         OPEN PERSON TASK.
         DBSET 1.
         FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

         SECTION INITIAL.

         DEFINE TEXT 11 TSSN.
         DEFINE REAL  TMPSAL, MAINCNT, VCOST, OVCOST, VTASKN,
                         OVTASKN.

         PAGE 54. BODY 54.
         HEADING PRINT SYSPAGE
                 FMT 'OUTPUT FROM EXAMPLE 7.' 50T 'PAGE ' F5.0 //
                 34T 'SALARY+BONUS' 57T 'COST' /
                 34T '------------' 57T '----' // END.

         SECTION GETREC.

         #COM START BY SAVING OLD VALUES FOR TOTALS SECTION.
         LET OVCOST EQ VCOST, OVTASKN EQ VTASKN.

         GO TO N2.               #COM CYCLE FIRST ON DATASET 2 RECORDS.
NPERS:   DBSET 1.
         GETREC ENDIT.           #COM REPORT DONE WHEN THRU DATASET 1.
         LET TSSN EQ SSN.
         DBSET 2.
         FIND ASSN EQ TSSN.      #COM SELECT NEW TASK RECORDS.
         IF SYSNREC GT 0 THEN OK1.

         LET VCOST EQ 0, VTASKN EQ 99.
         GO TO SECH.             #COM GO WITH 0 VALUES WHEN NO TASK
                                 RECORDS.

OK1:     SORT TASKNUM.

N2:      DBSET 2.                #COM NEED THIS FOR JUMP FROM NPERS-1.
         GETREC NPERS.           #COM GO FOR NEW PERSON WHEN OUT OF
                                 TASKS FOR LAST ONE.
         LET VCOST EQ COST, VTASKN EQ TASKNUM.
         #COM THE VALUES IN TASK RECORD.

SECH:    SECTION HEADING.

         DBSET 1.
         ON CHANGE DEPT PRINT DEPT
                 FMT // "DEPARTMENT: " A20 / END.

         SECTION PRINT.
REPORTS WITH FORMAT STATEMENTS                                  Page B-9


         DBSET 2.
         PRINT VCOST
                 FMT 50T F$7.2 END.

ENDIT:   SECTION TOTALS.

         DBSET 1.
         ON CHANGE VTASKN PRINT OVTASKN TOT OVCOST
                 FMT 20T "SUBTOTAL FOR TASK " I2 ":" 50T F$7.2 / END.

         LET TMPSAL EQ 0, MAINCNT EQ 0.

         ON CHANGE SSN EVALUATE MAINCNT EQ 1.
                                 #COM TO GENERATE THE NUMBER OF PERSONS.

         ON CHANGE SSN PRINT SSN TMPSAL=SALARY+BONUS TOT OVCOST
                 FMT 5T "TOTAL FOR " A11 ":" 35T F$7.2 50T F$7.2 END.

         ON CHANGE DEPT PRINT TOT MAINCNT TOT TMPSAL TOT OVCOST
                 FMT // "DEPARTMENT TOTAL FOR " I3 " PEOPLE:"
                 35T F$7.2 50T F$7.2 END.

         ON END         PRINT TOT MAINCNT TOT TMPSAL TOT OVCOST
                 FMT /// "GRAND TOTAL FOR " I4 " PEOPLE:"
                 35T F$7.2 50T F$7.2 END.

         SECTION FINAL.

         RELEASE.

         REPORT END.
REPORTS WITH FORMAT STATEMENTS                                 Page B-10


EXAMPLE 8. MORE SOPHISTICATED MISSING RECORDS.

         SET FMSG OFF.           #COM SO NO "FIND" MSGS WILL PRINT OUT.

         OPEN PERSON TASK.
         DBSET 1.
         FIND ALL. SORT BY DEPT, SSN.

         REPORT START.

         SECTION INITIAL.

         DEFINE TEXT 11 TSSN.
         DEFINE REAL  TMPSAL, MAINCNT, VCOST, OVCOST, VTASKN,
                         OVTASKN.
         DEFINE REAL  TCOST.

         PAGE 54. BODY 54.
         HEADING PRINT SYSPAGE
                 FMT 'OUTPUT FROM EXAMPLE 8.' 50T 'PAGE ' F5.0 //
                 34T 'SALARY+BONUS' 57T 'COST' /
                 34T '------------' 57T '----' // END.

         SECTION GETREC.

         #COM START BY SAVING OLD VALUES FOR TOTALS SECTION.
         LET OVCOST EQ VCOST, OVTASKN EQ VTASKN.

         GO TO N2.               #COM CYCLE FIRST ON DATASET 2 RECORDS.
NPERS:   DBSET 1.
         GETREC ENDIT.           #COM REPORT DONE WHEN THRU DATASET 1.
         LET TSSN EQ SSN.
         DBSET 2.
         FIND ASSN EQ TSSN.      #COM SELECT NEW TASK RECORDS.
         IF SYSNREC GT 0 THEN OK1.

         LET VCOST EQ 0, VTASKN EQ 99.
         GO TO SECH.             #COM GO WITH 0 VALUES WHEN NO TASK
                                 RECORDS.

OK1:     SORT TASKNUM.

N2:      DBSET 2.                #COM NEED THIS FOR JUMP FROM NPERS-1.
         GETREC NPERS.           #COM GO FOR NEW PERSON WHEN OUT OF
                                 TASKS FOR LAST ONE.
         LET VCOST EQ COST, VTASKN EQ TASKNUM.
         #COM THE VALUES IN TASK RECORD.

SECH:    SECTION HEADING.

         DBSET 1.
         ON CHANGE DEPT PRINT DEPT
                 FMT // "DEPARTMENT: " A20 / END.

         SECTION PRINT.
REPORTS WITH FORMAT STATEMENTS                                 Page B-11


         DBSET 2.
         IF VCOST EQ 0 THEN NOPRINT.     #COM SO WON'T PRINT A NULL
COST.

         PRINT VCOST
                 FMT 50T F$7.2 END.

NOPRINT:

ENDIT:   SECTION TOTALS.

         DBSET 1.
         ON CHANGE VTASKN EVALUATE TCOST=TOT OVCOST.

         ON CHANGE VTASKN GO TO CHVT.
         GO TO CON1.

CHVT:    IF OVTASKN EQ 99 THEN CON1.
         #COM  SKIP PRINTING ANYTHING IF NO TASK RECORD.

         PRINT OVTASKN TCOST
                 FMT 20T "SUBTOTAL FOR TASK " I2 ":" 50T F$7.2 / END.

CON1:

         LET TMPSAL EQ 0, MAINCNT EQ 0.

         ON CHANGE SSN EVALUATE MAINCNT EQ 1.
                                 #COM TO GENERATE THE NUMBER OF PEOPLE.

         ON CHANGE SSN  PRINT SSN TMPSAL=SALARY+BONUS TOT OVCOST
                 FMT 5T "TOTAL FOR " A11 ":" 35T F$7.2 50T F$7.2 END.

         ON CHANGE DEPT PRINT TOT MAINCNT TOT TMPSAL TOT OVCOST
                 FMT // "DEPARTMENT TOTAL FOR " I3 " PEOPLE:"
                 35T F$7.2 50T F$7.2 END.

         ON END         PRINT TOT MAINCNT TOT TMPSAL TOT OVCOST
                 FMT /// "GRAND TOTAL FOR " I4 " PEOPLE:"
                 35T F$7.2 50T F$7.2 END.

         SECTION FINAL.

         RELEASE.

         REPORT END.












                              APPENDIX C

                     ACTUAL EXAMPLE REPORT OUTPUTS



OUTPUT FROM EXAMPLES 1 AND 2.                    PAGE     1.

SSN                     SALARY          BONUS   SALARY+BONUS
---                     ------          -----   ------------

DEPARTMENT: EXECUTIVE           

123-45-6789          $90521.43       $8643.64      $99165.07

DEPT TOTAL:          $90521.43       $8643.64      $99165.07

DEPARTMENT: MANAGEMENT          

444-44-4444          $46325.75       $3000.00      $49325.75
555-55-5555          $50000.00       $3598.26      $53598.26

DEPT TOTAL:          $96325.75       $6598.26     $102924.01

DEPARTMENT: PERSONNEL           

111-11-1111          $13000.00       $1300.00      $14300.00
222-22-2222          $26000.00       $1500.75      $27500.75
333-33-3333          $18500.75       $1675.00      $20175.75

DEPT TOTAL:          $57500.75       $4475.75      $61976.50

DEPARTMENT: SALES/ADVERTISING   

666-66-6666          $24987.54       $1400.53      $26388.07
777-77-7777          $35467.32       $3105.32      $38572.64
888-88-8888          $14983.52       $2149.32      $17132.84
999-99-9999          $18431.64       $2195.64      $20627.28

DEPT TOTAL:          $93870.02       $8850.81     $102720.83


GRAND TOTAL:        $338217.95      $28568.46     $366786.42
ACTUAL EXAMPLE REPORT OUTPUTS                                   Page C-2


OUTPUT FROM EXAMPLE 3.                           PAGE     1.

SSN                SALARY        BONUS         SALARY    DEPT   TOTAL
                                               +BONUS
---                ------        -----         ------    ----   -----



DEPARTMENT: EXECUTIVE           

123-45-6789     $90521.43     $8643.64      $99165.07  1.000%   .270%

DEPT TOTAL:     $90521.43     $8643.64      $99165.07           .270%

DEPARTMENT: MANAGEMENT          

444-44-4444     $46325.75     $3000.00      $49325.75   .479%   .134%
555-55-5555     $50000.00     $3598.26      $53598.26   .521%   .146%

DEPT TOTAL:     $96325.75     $6598.26     $102924.01           .281%

DEPARTMENT: PERSONNEL           

111-11-1111     $13000.00     $1300.00      $14300.00   .231%   .039%
222-22-2222     $26000.00     $1500.75      $27500.75   .444%   .075%
333-33-3333     $18500.75     $1675.00      $20175.75   .326%   .055%

DEPT TOTAL:     $57500.75     $4475.75      $61976.50           .169%

DEPARTMENT: SALES/ADVERTISING   

666-66-6666     $24987.54     $1400.53      $26388.07   .257%   .072%
777-77-7777     $35467.32     $3105.32      $38572.64   .376%   .105%
888-88-8888     $14983.52     $2149.32      $17132.84   .167%   .047%
999-99-9999     $18431.64     $2195.64      $20627.28   .201%   .056%

DEPT TOTAL:     $93870.02     $8850.81     $102720.83           .280%


GRAND TOTAL:   $338217.95    $28568.46     $366786.42
ACTUAL EXAMPLE REPORT OUTPUTS                                   Page C-3


OUTPUT FROM EXAMPLE 4.                           PAGE     1.

SSN                     SALARY          BONUS   SALARY+BONUS
---                     ------          -----   ------------



DEPARTMENT: EXECUTIVE           

123-45-6789          $90521.43       $8643.64      $99165.07

MALE TOTAL:                                             $.00
FEMALE TOTAL:                                      $99165.07

DEPT TOTAL:          $90521.43       $8643.64      $99165.07

DEPARTMENT: MANAGEMENT          

444-44-4444          $46325.75       $3000.00      $49325.75
555-55-5555          $50000.00       $3598.26      $53598.26

MALE TOTAL:                                        $53598.26
FEMALE TOTAL:                                      $49325.75

DEPT TOTAL:          $96325.75       $6598.26     $102924.01

DEPARTMENT: PERSONNEL           

111-11-1111          $13000.00       $1300.00      $14300.00
222-22-2222          $26000.00       $1500.75      $27500.75
333-33-3333          $18500.75       $1675.00      $20175.75

MALE TOTAL:                                        $34475.75
FEMALE TOTAL:                                      $27500.75

DEPT TOTAL:          $57500.75       $4475.75      $61976.50

DEPARTMENT: SALES/ADVERTISING   

666-66-6666          $24987.54       $1400.53      $26388.07
777-77-7777          $35467.32       $3105.32      $38572.64
888-88-8888          $14983.52       $2149.32      $17132.84
999-99-9999          $18431.64       $2195.64      $20627.28

MALE TOTAL:                                        $47015.35
FEMALE TOTAL:                                      $55705.48

DEPT TOTAL:          $93870.02       $8850.81     $102720.83


GRAND TOTAL:        $338217.95      $28568.46     $366786.42
ACTUAL EXAMPLE REPORT OUTPUTS                                   Page C-4


OUTPUT FROM EXAMPLE 5.                           PAGE     1.

                                             COSTS
                                             -----


DEPARTMENT: EXECUTIVE           


     PERSON: 123-45-6789

          TASK:  3
                                          $3154.32
                                           $124.12
          SUBTOTAL FOR TASK:              $3278.44

          TASK:  5
                                          $5312.42
          SUBTOTAL FOR TASK:              $5312.42

     TOTAL FOR PERSON 123-45-6789:        $8590.86


DEPT TOTAL:                               $8590.86



DEPARTMENT: MANAGEMENT          


     PERSON: 444-44-4444

          TASK:  3
                                         $15323.54
          SUBTOTAL FOR TASK:             $15323.54

          TASK:  6
                                         $31532.32
                                            $64.32
          SUBTOTAL FOR TASK:             $31596.64

     TOTAL FOR PERSON 444-44-4444:       $46920.18


     PERSON: 555-55-5555

          TASK:  2
                                          $6542.32
                                          $5960.23
                                          $6100.00
          SUBTOTAL FOR TASK:             $18602.55
ACTUAL EXAMPLE REPORT OUTPUTS                                   Page C-5


OUTPUT FROM EXAMPLE 5.                           PAGE     2.

                                             COSTS
                                             -----

     TOTAL FOR PERSON 555-55-5555:       $18602.55


DEPT TOTAL:                              $65522.73



DEPARTMENT: PERSONNEL           


     PERSON: 111-11-1111

          TASK:  1
                                           $125.65
                                          $3125.42
                                           $353.12
          SUBTOTAL FOR TASK:              $3604.19

          TASK:  2
                                          $4132.35
          SUBTOTAL FOR TASK:              $4132.35

          TASK:  7
                                         $67653.12
          SUBTOTAL FOR TASK:             $67653.12

     TOTAL FOR PERSON 111-11-1111:       $75389.66


     PERSON: 222-22-2222

          TASK:  2
                                          $1542.35
          SUBTOTAL FOR TASK:              $1542.35

          TASK:  5
                                         $53235.31
          SUBTOTAL FOR TASK:             $53235.31

     TOTAL FOR PERSON 222-22-2222:       $54777.66


     PERSON: 333-33-3333

          TASK:  1
                                          $1243.35
          SUBTOTAL FOR TASK:              $1243.35
ACTUAL EXAMPLE REPORT OUTPUTS                                   Page C-6


OUTPUT FROM EXAMPLE 5.                           PAGE     3.

                                             COSTS
                                             -----



     TOTAL FOR PERSON 333-33-3333:        $1243.35


DEPT TOTAL:                             $131410.67



DEPARTMENT: SALES/ADVERTISING   


     PERSON: 666-66-6666

          TASK:  4
                                          $1093.23
          SUBTOTAL FOR TASK:              $1093.23

     TOTAL FOR PERSON 666-66-6666:        $1093.23


     PERSON: 888-88-8888

          TASK:  3
                                           $904.21
          SUBTOTAL FOR TASK:               $904.21

          TASK:  4
                                           $532.35
          SUBTOTAL FOR TASK:               $532.35

          TASK:  7
                                          $1515.24
          SUBTOTAL FOR TASK:              $1515.24

     TOTAL FOR PERSON 888-88-8888:        $2951.80


     PERSON: 999-99-9999

          TASK:  5
                                         $16000.00
          SUBTOTAL FOR TASK:             $16000.00

          TASK:  6
                                          $4236.43
                                           $531.32
          SUBTOTAL FOR TASK:              $4767.75

ACTUAL EXAMPLE REPORT OUTPUTS                                   Page C-7


OUTPUT FROM EXAMPLE 5.                           PAGE     4.

                                             COSTS
                                             -----


     TOTAL FOR PERSON 999-99-9999:       $36236.43


DEPT TOTAL:                              $40281.46



GRAND TOTAL:                            $245805.72
ACTUAL EXAMPLE REPORT OUTPUTS                                   Page C-8


OUTPUT FROM EXAMPLE 6.                           PAGE     1.

SSN                SALARY          BONUS   SALARY+BONUS       COSTS
---                ------          -----   ------------       -----



DEPARTMENT: EXECUTIVE           

123-45-6789     $90521.43       $8643.64      $99165.07    $8590.86

DEPT TOTAL:                                   $99165.07    $8590.86

DEPARTMENT: MANAGEMENT          

444-44-4444     $46325.75       $3000.00      $49325.75   $46920.18
555-55-5555     $50000.00       $3598.26      $53598.26   $18602.55

DEPT TOTAL:                                  $102924.01   $65522.73

DEPARTMENT: PERSONNEL           

111-11-1111     $13000.00       $1300.00      $14300.00   $75389.66
222-22-2222     $26000.00       $1500.75      $27500.75   $54777.66
333-33-3333     $18500.75       $1675.00      $20175.75    $1243.35

DEPT TOTAL:                                   $61976.50  $131410.67

DEPARTMENT: SALES/ADVERTISING   

666-66-6666     $24987.54       $1400.53      $26388.07    $1093.23
777-77-7777     $35467.32       $3105.32      $38572.64        $.00
888-88-8888     $14983.52       $2149.32      $17132.84    $2951.80
999-99-9999     $18431.64       $2195.64      $20627.28   $20767.75

DEPT TOTAL:                                  $102720.83   $24812.78


GRAND TOTAL:                                 $366786.42  $230337.04
ACTUAL EXAMPLE REPORT OUTPUTS                                   Page C-9


OUTPUT FROM EXAMPLE 7.                           PAGE     1.

                                 SALARY+BONUS           COST
                                 ------------           ----




DEPARTMENT: EXECUTIVE           

                                                    $3154.32
                                                     $124.12
                   SUBTOTAL FOR TASK  3:            $3278.44

                                                    $5312.42
                   SUBTOTAL FOR TASK  5:            $5312.42

    TOTAL FOR 123-45-6789:          $99165.07       $8590.86


DEPARTMENT TOTAL FOR   1 PEOPLE:    $99165.07       $8590.86


DEPARTMENT: MANAGEMENT          

                                                   $15323.54
                   SUBTOTAL FOR TASK  3:           $15323.54

                                                   $31532.32
                                                      $64.32
                   SUBTOTAL FOR TASK  6:           $31596.64

    TOTAL FOR 444-44-4444:          $49325.75      $46920.18
                                                    $6542.32
                                                    $5960.23
                                                    $6100.00
                   SUBTOTAL FOR TASK  2:           $18602.55

    TOTAL FOR 555-55-5555:          $53598.26      $18602.55


DEPARTMENT TOTAL FOR   2 PEOPLE:   $102924.01      $65522.73


DEPARTMENT: PERSONNEL           

                                                     $125.65
                                                    $3125.42
                                                     $353.12
                   SUBTOTAL FOR TASK  1:            $3604.19

                                                    $4132.35
                   SUBTOTAL FOR TASK  2:            $4132.35

ACTUAL EXAMPLE REPORT OUTPUTS                                  Page C-10


OUTPUT FROM EXAMPLE 7.                           PAGE     2.

                                 SALARY+BONUS           COST
                                 ------------           ----

                                                   $67653.12
                   SUBTOTAL FOR TASK  7:           $67653.12

    TOTAL FOR 111-11-1111:          $14300.00      $75389.66
                                                    $1542.35
                   SUBTOTAL FOR TASK  2:            $1542.35

                                                   $53235.31
                   SUBTOTAL FOR TASK  5:           $53235.31

    TOTAL FOR 222-22-2222:          $27500.75      $54777.66
                                                    $1243.35
                   SUBTOTAL FOR TASK  1:            $1243.35

    TOTAL FOR 333-33-3333:          $20175.75       $1243.35


DEPARTMENT TOTAL FOR   3 PEOPLE:    $61976.50     $131410.67


DEPARTMENT: SALES/ADVERTISING   

                                                    $1093.23
                   SUBTOTAL FOR TASK  4:            $1093.23

    TOTAL FOR 666-66-6666:          $26388.07       $1093.23
                                                        $.00
                   SUBTOTAL FOR TASK 99:                $.00

    TOTAL FOR 777-77-7777:          $38572.64           $.00
                                                     $904.21
                   SUBTOTAL FOR TASK  3:             $904.21

                                                     $532.35
                   SUBTOTAL FOR TASK  4:             $532.35

                                                    $1515.24
                   SUBTOTAL FOR TASK  7:            $1515.24

    TOTAL FOR 888-88-8888:          $17132.84       $2951.80
                                                   $16000.00
                   SUBTOTAL FOR TASK  5:           $16000.00

                                                    $4236.43
                                                     $531.32
                   SUBTOTAL FOR TASK  6:            $4767.75

    TOTAL FOR 999-99-9999:          $20627.28      $20767.75
ACTUAL EXAMPLE REPORT OUTPUTS                                  Page C-11


OUTPUT FROM EXAMPLE 7.                           PAGE     3.

                                 SALARY+BONUS           COST
                                 ------------           ----




DEPARTMENT TOTAL FOR   4 PEOPLE:   $102720.83      $24812.78



GRAND TOTAL FOR   10 PEOPLE:       $366786.42     $230337.04
ACTUAL EXAMPLE REPORT OUTPUTS                                  Page C-12


OUTPUT FROM EXAMPLE 8.                           PAGE     1.

                                 SALARY+BONUS           COST
                                 ------------           ----




DEPARTMENT: EXECUTIVE           

                                                    $3154.32
                                                     $124.12
                   SUBTOTAL FOR TASK  3:            $3278.44

                                                    $5312.42
                   SUBTOTAL FOR TASK  5:            $5312.42

    TOTAL FOR 123-45-6789:          $99165.07       $8590.86


DEPARTMENT TOTAL FOR   1 PEOPLE:    $99165.07       $8590.86


DEPARTMENT: MANAGEMENT          

                                                   $15323.54
                   SUBTOTAL FOR TASK  3:           $15323.54

                                                   $31532.32
                                                      $64.32
                   SUBTOTAL FOR TASK  6:           $31596.64

    TOTAL FOR 444-44-4444:          $49325.75      $46920.18
                                                    $6542.32
                                                    $5960.23
                                                    $6100.00
                   SUBTOTAL FOR TASK  2:           $18602.55

    TOTAL FOR 555-55-5555:          $53598.26      $18602.55


DEPARTMENT TOTAL FOR   2 PEOPLE:   $102924.01      $65522.73


DEPARTMENT: PERSONNEL           

                                                     $125.65
                                                    $3125.42
                                                     $353.12
                   SUBTOTAL FOR TASK  1:            $3604.19

                                                    $4132.35
                   SUBTOTAL FOR TASK  2:            $4132.35

ACTUAL EXAMPLE REPORT OUTPUTS                                  Page C-13


OUTPUT FROM EXAMPLE 8.                           PAGE     2.

                                 SALARY+BONUS           COST
                                 ------------           ----

                                                   $67653.12
                   SUBTOTAL FOR TASK  7:           $67653.12

    TOTAL FOR 111-11-1111:          $14300.00      $75389.66
                                                    $1542.35
                   SUBTOTAL FOR TASK  2:            $1542.35

                                                   $53235.31
                   SUBTOTAL FOR TASK  5:           $53235.31

    TOTAL FOR 222-22-2222:          $27500.75      $54777.66
                                                    $1243.35
                   SUBTOTAL FOR TASK  1:            $1243.35

    TOTAL FOR 333-33-3333:          $20175.75       $1243.35


DEPARTMENT TOTAL FOR   3 PEOPLE:    $61976.50     $131410.67


DEPARTMENT: SALES/ADVERTISING   

                                                    $1093.23
                   SUBTOTAL FOR TASK  4:            $1093.23

    TOTAL FOR 666-66-6666:          $26388.07       $1093.23
    TOTAL FOR 777-77-7777:          $38572.64           $.00
                                                     $904.21
                   SUBTOTAL FOR TASK  3:             $904.21

                                                     $532.35
                   SUBTOTAL FOR TASK  4:             $532.35

                                                    $1515.24
                   SUBTOTAL FOR TASK  7:            $1515.24

    TOTAL FOR 888-88-8888:          $17132.84       $2951.80
                                                   $16000.00
                   SUBTOTAL FOR TASK  5:           $16000.00

                                                    $4236.43
                                                     $531.32
                   SUBTOTAL FOR TASK  6:            $4767.75

    TOTAL FOR 999-99-9999:          $20627.28      $20767.75


DEPARTMENT TOTAL FOR   4 PEOPLE:   $102720.83      $24812.78
ACTUAL EXAMPLE REPORT OUTPUTS                                  Page C-14


OUTPUT FROM EXAMPLE 8.                           PAGE     3.

                                 SALARY+BONUS           COST
                                 ------------           ----





GRAND TOTAL FOR   10 PEOPLE:       $366786.42     $230337.04
  W;k