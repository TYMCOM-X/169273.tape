UNIVERSAL ICHPRM - REGISTER/BIT DEFINITIONS FOR INTERNAL CHANNELS - V3
SUBTTL	JOSEPH A. DZIEDZIC /JAD		10-SEP-85


	SEARCH	F,S
	SALL


;THIS UNIVERSAL FILE CONTAINS REGISTER AND BIT DEFINITIONS FOR  INTERNAL
;CHANNELS  (RH20  AND  IPA20).   THIS FILE MAY BE SEARCHED BY ANY MODULE
;WHICH  DEALS  WITH  INTERNAL  CHANNELS.   THIS   MAKES   IT   EASY   TO
;ADD/DELETE/CHANGE  DEFINITIONS  BY  PUTTING  THEM  ALL IN ONE PLACE AND
;SAVES SYMBOL TABLE SPACE BY NOT DEFINING THEM  IN  EVERY  MODULE  WHICH
;NEEDS THEM.


;THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY ONLY BE USED
;  OR COPIED IN ACCORDANCE WITH THE TERMS OF SUCH LICENSE.

.CPYRT<1985,1986>
;COPYRIGHT (C) 1985,1986
;BY DIGITAL EQUIPMENT CORP., MAYNARD, MASS.
;ALL RIGHTS RESERVED.

XP	VICPRM,3
	SUBTTL	DEVICE CODE DEFINITIONS FOR INTERNAL CHANNELS


XP	FSTICD,540		;FIRST INTERNAL CHANNEL DEVICE CODE
XP	LSTICD,574		;LAST INTERNAL CHANNEL DEVICE CODE


;IN THE IDEAL WORLD IT WOULD BE POSSIBLE TO INSTALL THE NIA-20 OR  CI-20
;IN  EITHER  OF  THE  MODIFIED  INTERNAL  CHANNEL BACKPLANE SLOTS IN THE
;KL-10.  UNFORTUNATELY, THERE IS NO EASY WAY TO TELL THE  TWO  TYPES  OF
;DEVICES   APART.    THOSE   WHO  ARE  FOOLISH  ENOUGH  TO  BELIEVE  THE
;DOCUMENTATION MIGHT DISAGREE, BUT  THE  ENGINEERS  NEVER  STRAPPED  THE
;NIA-20   AND  CI-20  TO  RETURN  DIFFERENT  PORT  TYPE  FIELDS  AS  THE
;DOCUMENTATION LEADS ONE TO BELIEVE.  FOR THIS REASON, THE  SOFTWARE  IN
;TOPS-10  HAS  BEEN  WRITTEN  TO  ASSUME  THE  NIA-20 CAN ONLY APPEAR AS
;INTERNAL CHANNEL NUMBER 5, AND THE CI-20 CAN ONLY  APPEAR  AS  INTERNAL
;CHANNEL NUMBER 7.

XP	KNIICH,5		;INTERNAL CHANNEL NUMBER FOR NIA-20
XP	KLPICH,7		;INTERNAL CHANNEL NUMBER FOR CI-20

XP	KNI,<FSTICD+<KNIICH*4>>	;NIA-20 DEVICE CODE
XP	KLP,<FSTICD+<KLPICH*4>>	;CI-20 DEVICE CODE
	SUBTTL	CONI BIT DEFINITIONS FOR RH20


XP	CI.DBP,1B18		;DATA BUS PARITY ERROR
XP	CI.EXC,1B19		;EXCEPTION
XP	CI.LWC,1B20		;LONG WORD COUNT
XP	CI.SWC,1B21		;SHORT WORD COUNT
XP	CI.CER,1B22		;CHANNEL ERROR
XP	CI.DRE,1B23		;DRIVE RESPONSE ERROR
XP	CI.RAE,1B24		;REGISTER ACCESS ERROR
XP	CI.RDY,1B25		;CHANNEL READY
XP	CI.OVR,1B26		;DATA OVERRUN
XP	CI.MBE,1B27		;MASSBUS ENABLE
XP	CI.ATN,1B28		;ATTENTION
XP	CI.SCR,1B29		;SCR FULL
XP	CI.AIE,1B30		;ATTENTION INTERRUPT ENABLE
XP	CI.BSY,1B31		;PCR FULL (BUSY)
XP	CI.DON,1B32		;COMMAND DONE
XP	CI.PIA,7B35		;PI ASSIGNMENT
	SUBTTL	CONO BIT DEFINITIONS FOR RH20


XP	CO.RAE,1B24		;CLEAR REGISTER ACCESS ERROR
XP	CO.MBI,1B25		;MASSBUS INIT
XP	CO.TEC,1B26		;TRANSFER ERROR CLEAR
XP	CO.MBE,1B27		;MASSBUS ENABLE
XP	CO.RCP,1B28		;RESET COMMAND LIST POINTER
XP	CO.SCR,1B29		;DELETE SCR
XP	CO.AIE,1B30		;ATTENTION INTERRUPT ENABLE
XP	CO.STP,1B31		;STOP TRANSFER
XP	CO.CCD,1B32		;CLEAR COMMAND DONE
XP	CO.PIA,7B35		;PI ASSIGNMENT
	SUBTTL	CONI BIT DEFINITIONS FOR IPA20


XP	CI.PPT,1B0		;PORT PRESENT
XP	CI.CPE,1B6		;CRAM PARITY ERROR
XP	CI.MER,1B7		;MBUS ERROR
XP	CI.IDL,1B11		;IDLE
XP	CI.DCP,1B12		;DISABLE COMPLETE
XP	CI.ECP,1B13		;ENABLE COMPLETE
XP	CI.TYP,7B17		;PORT TYPE
XP	CI.EPE,1B24		;EBUS PARITY ERROR
XP	CI.FQE,1B25		;FREE QUEUE ERROR
XP	CI.DPE,1B26		;DATA PATH ERROR
XP	CI.RQA,1B28		;RESPONSE QUEUE AVAILABLE
XP	CI.ENA,1B31		;ENABLED
XP	CI.MRN,1B32		;MICRO-PROCESSOR RUNNING
XP	CI.PIA,7B35		;PRIORITY INTERRUPT ASSIGNMENT
	SUBTTL	CONO BIT DEFINITIONS FOR IPA20


XP	CO.CPT,1B18		;CLEAR PORT
XP	CO.LAR,1B21		;SELECT LATCHED ADDRESS REGISTER
XP	CO.EPE,1B24		;CLEAR EBUS PARITY ERROR
XP	CO.FQE,1B25		;CLEAR FREE QUEUE ERROR
XP	CO.CQA,1B27		;SET COMMAND QUEUE AVAILABLE
XP	CO.RQA,1B28		;CLEAR RESPONSE QUEUE AVAILABLE
XP	CO.DIS,1B30		;DISABLE
XP	CO.ENA,1B31		;ENABLE
XP	CO.MRN,1B32		;MICRO-PROCESSOR RUN
XP	CO.PIA,7B35		;PRIORITY INTERRUPT ASSIGNMENT
	SUBTTL	DATAI REGISTER AND BIT DEFINITIONS FOR RH20


;FIELDS COMMON TO ALL DATAI'S

	XP	DI.REG,77B5	;REGISTER SELECT FIELD
	XP	DI.LDR,1B6	;LOAD REGISTER
	XP	DI.DRV,7B17	;DRIVE SELECT FIELD


;REGISTER AND REGISTER SPECIFIC BIT DEFINITIONS.  NOTE THAT BIT
;DEFINITIONS FOR .DIPBA AND .DIPTC ARE THE SAME AS THOSE FOR
;.DISBA AND .DISTC RESPECTIVELY.

XP	.DISBA,70B5		;SECONDARY BLOCK ADDRESS REGISTER
	XP	DI.BAD,177777B35 ;BLOCK ADDRESS/FRAME COUNT

XP	.DISTC,71B5		;SECONDARY TRANSFER CONTROL REGISTER
	XP	DI.RCP,1B7	;RESET COMMAND LIST POINTER
	XP	DI.SCS,1B10	;STORE CHANNEL STATUS
	XP	DI.DTE,1B19	;DISABLE TRANSFER ERROR STOP
	XP	DI.CNT,1777B29	;NEGATIVE BLOCK COUNT
	XP	DI.FNC,77B35	;MASSBUS FUNCTION CODE

XP	.DIPBA,72B5		;PRIMARY BLOCK ADDRESS REGISTER

XP	.DIPTC,73B5		;PRIMARY TRANSFER CONTROLER REGISTER

XP	.DIIVI,74B5		;INTERRUPT VECTOR INDEX REGISTER
	XP	DI.IVI,777B35	;INTERRUPT VECTOR ADDRESS


;BITS APPLICABLE ONLY TO EXTERNAL REGISTERS

	XP	DI.CPE,1B8	;CONTROL BUS PARITY ERROR
	XP	DI.TRA,1B10	;TRANSFER RECEIVED
	XP	DI.CPA,1B19	;CONTROL BUS PARITY BIT
	XP	DI.ERD,177777B35 ;EXTERNAL REGISTER DATA
	SUBTTL	DATAO REGISTER AND BIT DEFINITIONS FOR RH20


;FIELDS COMMON TO ALL DATAO'S

	XP	DO.REG,77B5	;REGISTER SELECT FIELD
	XP	DO.LDR,1B6	;LOAD REGISTER
	XP	DO.DRE,1B9	;DISABLE REGISTER ACCESS ERROR
	XP	DO.DRV,7B17	;DRIVE SELECT FIELD


;REGISTER AND REGISTER SPECIFIC BIT DEFINITIONS.  NOTE THAT THE BIT
;DEFINITIONS FOR .DOPBA AND .DOPTC ARE THE SAME AS THOSE FOR
;.DOSBA AND .DOSTC RESPECTIVELY.

XP	.DOSBA,70B5		;SECONDARY BLOCK ADDRESS REGISTER
	XP	DO.BAD,177777B35 ;BLOCK ADDRESS/FRAME COUNT

XP	.DOSTC,71B5		;SECONDARY TRANSFER CONTROL REGISTER
	XP	DO.RCP,1B7	;RESET COMMAND LIST POINTER
	XP	DO.SCS,1B10	;STORE CHANNEL STATUS
	XP	DO.DTE,1B19	;DISABLE TRANSFER ERROR STOP
	XP	DO.CNT,1777B29	;NEGATIVE BLOCK COUNT
	XP	DO.FNC,77B35	;MASSBUS FUNCTION CODE

XP	.DOPBA,72B5		;PRIMARY BLOCK ADDRESS REGISTER

XP	.DOPTC,73B5		;PRIMARY TRANSFER CONTROLER REGISTER

XP	.DOIVI,74B5		;INTERRUPT VECTOR INDEX REGISTER
	XP	DO.IVI,777B35	;INTERRUPT VECTOR ADDRESS


;BITS APPLICABLE ONLY TO EXTERNAL REGISTERS

	XP	DO.CEP,1B18	;CONTROL BUS EVEN PARITY
	XP	DO.ERD,177777B35 ;EXTERNAL REGISTER DATA
	SUBTTL	DATAO REGISTER AND BIT DEFINITIONS FOR IPA20


;REGISTER AND REGISTER SPECIFIC BIT DEFINITIONS.

XP	.DOLRA,40B5		;LOAD RAM ADDRESS REGISTER
	XP	DO.RAR,7777B12	;RAM ADDRESS REGISTER CONTENTS
	XP	DO.LHW,1B13	;SELECT LEFT HALF CRAM MICRO-WORD

;COMMON TO DATAI/DATAO

	XP	DT.LAR,7777B12	;LATCHED ADDRESS REGISTER CONTENTS
	XP	DT.CRM,7777777777B35 ;CRAM HALF-WORD CONTENTS
	SUBTTL	CHANNEL LOGOUT AREA DEFINITIONS


XP	.CSICW,0		;INITIAL CONTROL WORD
	XP	CC.OPC,7B2	;OPCODE
		XP	.CCHLT,0	;HALT
		XP	.CCJMP,2	;JUMP
		XP	.CCFDT,4	;FORWARD DATA TRANSFER (DO NOT HALT)
		XP	.CCRDT,5	;REVERSE DATA TRANSFER (DO NOT HALT)
		XP	.CCFTH,6	;FORWARD DATA TRANSFER (HALT)
		XP	.CCRTH,7	;REVERSE DATA TRANSFER (HALT)
	XP	CC.XFR,4B2	;DATA TRANSFER IF SET
	XP	CC.HLT,2B2	;HALT BIT FOR DATA TRANSFERS
	XP	CC.REV,1B2	;REVERSE BIT FOR DATA TRANSFERS
	XP	CC.WDC,3777B13	;WORD COUNT
	XP	CC.ADR,17777777B35 ;ADDRESS

XP	.CSCLP,1		;STATUS/COMMAND LIST POINTER
	XP	CS.MPE,1B1	;MEMORY PARITY ERROR
	XP	CS.NAE,1B2	;NOT ADDRESS PARITY ERROR
	XP	CS.NW0,1B3	;NOT WORD COUNT = 0
	XP	CS.NXM,1B4	;NXM
	XP	CS.LTE,1B9	;LAST TRANSFER ERROR
	XP	CS.RHE,1B10	;RH20 ERROR
	XP	CS.LWC,1B11	;LONG WORD COUNT
	XP	CS.SWC,1B12	;SHORT WORD COUNT
	XP	CS.OVR,1B13	;OVERRUN
	XP	CS.CLP,17777777B35 ;CURRENT COMMAND LIST POINTER

XP	.CSDBA,2		;CURRENT CCW
	XP	CS.COP,7B2	;CURRENT CCW OPCODE
	XP	CS.CWC,3777B13	;CURRENT CCW WORD COUNT
	XP	CS.DBA,17777777B35 ;CURRENT DATA BUFFER ADDRESS

XP	.CSIVI,3		;INTERRUPT VECTOR INSTRUCTION
	SUBTTL	EXTERNAL REGISTER DEFINITIONS


;THE FOLLOWING EXTERNAL REGISTER DEFINITIONS ARE THE ONES MOST
;COMMONLY USED.  IT IS NOT INTENDED TO BE AN EXHAUSTIVE LIST OF
;EXTERNAL REGISTERS.

XP	.DICTR,0B5		;CONTROL REGISTER
XP	.DISTR,1B5		;STATUS REGISTER
XP	.DIERR,2B5		;ERROR REGISTER
XP	.DIMTR,3B5		;MAINTENANCE REGISTER
XP	.DIASR,4B5		;ATTENTION SUMMARY REGISTER
XP	.DIDAR,5B5		;DESIRED ADDRESS REGISTER
XP	.DIDTR,6B5		;DRIVE TYPE REGISTER
XP	.DILAR,7B5		;LOOK AHEAD REGISTER
XP	.DIER2,10B5		;2ND ERROR REGISTER
XP	.DIOFS,11B5		;OFFSET REGISTER
	SUBTTL	MICROCODE DEFINITIONS FOR IPA20


;CRAM ADDRESS DEFINITIONS

XP	MAXCRA,7777		;MAXIMUM CRAM ADDRESS
XP	PPEFST,7750		;ADDRESS OF FIRST PLANNED CRAM PARITY ERROR
XP	PPELST,7777		;ADDRESS OF LAST PLANNED CRAM PARITY ERROR



	END
