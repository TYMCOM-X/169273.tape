BIONIC - TEST INPUT FROM 2780 USING NETWORK REMOTE BATCH	MACRO %53B(1156)-1 10:57 24-Oct-83 Page 1
BIONIC	MAC	10-Jun-72 17:54	

     1					TITLE BIONIC - TEST INPUT FROM 2780 USING NETWORK REMOTE BATCH
     2			000001		REL==1
     3			000002		VER==2
     4	000137				LOC 137
     5	000137	000001	000002		XWD  REL,VER
     6	000000'				RELOC
     7
     8			000001		T1=1
     9			000002		T2=2
    10			000003		T3=3
    11			000004		T4=4
    12			000006		C=6
    13			000016		FL==16
    14
    15			000001		FIL==1
    16			000002		TTY==2
    17					;
    18			000010		CASSET==10
    19			000013		D2780==13
    20			000010		CRLFLG==10
    21			000100		DTAFLG==100
    22			000015		CR==15
    23			000012		LF==12
    24					;
    25
    26			000017		P=17
    27
    28					EXTERNAL RDNAM,CMDLP,OUTDEC
    29					INTERNAL GETCHR,GORUN
    30					ARRAY OBUF[3],PDL[40],BIOBUF[^D101],INAM[5],FILNAM[4]
    31					ARRAY DEVDEF[3]
    32	000000'	051 04 0 00 000006 	GETCHR:	INCHWL C
    33	000001'	350 00 0 17 000000 	CPOPJ1:	AOS (P)
    34	000002'	263 17 0 00 000000 		POPJ P,
    35
    36	000003'	047 00 0 00 000000 	STPT:	RESET
    37	000004'	561 01 0 00 000017 	        HRROI T1,17
    38	000005'	476 00 0 00 000420'	        SETOM PAR2#
    39	000006'	042 01 0 00 000420'	        AUXCAL T1,PAR2 
    40	000007'	200 17 0 00 000463'		MOVE P,[IOWD 40,PDL]
    41	000010'	260 17 0 00 000000*		PUSHJ P,CMDLP		;GO SCAN FOR A COMMAND
    42	000011'	041 01 0 00 000000 	GORUN:	INIT FIL,0
    43	000012'	44 63 53 00 00 00 		SIXBIT /DSK/
    44	000013'	000414'	000000			OBUF,,0
    45	000014'	254 00 0 00 000220'		 JRST INIERR
    46	000015'	400 16 0 00 000000 		SETZ	FL,
    47	000016'	402 00 0 00 000462'		SETZM	RECCNT#
    48	000017'	402 00 0 00 000402'		SETZM	DEVDEF+2
    49	000020'	205 01 0 00 646471 		MOVSI	T1,(SIXBIT/TTY/)
    50	000021'	202 01 0 00 000401'		MOVEM	T1,DEVDEF+1
    51	000022'	561 01 0 00 777754 		HRROI	T1,-24		;GOING FOR LINE TYPE
    52	000023'	047 01 0 00 000041 		GETTAB	T1,
    53	000024'	255 00 0 00 000000 		JFCL
    54	000025'	207 00 0 00 000001 		MOVSS	,T1
    55	000026'	242 01 0 00 777772 		LSH	T1,-6
BIONIC - TEST INPUT FROM 2780 USING NETWORK REMOTE BATCH	MACRO %53B(1156)-1 10:57 24-Oct-83 Page 1-1
BIONIC	MAC	10-Jun-72 17:54	

    56	000027'	405 01 0 00 000077 		ANDI	T1,77
    57	000030'	402 00 0 00 000417'		SETZM	OUTDEV#
    58	000031'	201 02 0 00 000010 		MOVEI	T2,CASSET	;FOR CASSET TYPE MODE
    59	000032'	306 01 0 00 000013 		CAIN	T1,13		;CHECK FOR 2780 TYPE LINE
    60	000033'	201 02 0 00 000013 		MOVEI	T2,D2780	;GET 2780 TYPE MODE
    61	000034'	202 02 0 00 000400'		MOVEM	T2,DEVDEF	;STORE FOR OPEN
    62	000035'	306 01 0 00 000013 		CAIN	T1,13		;IS THIS 2780
    63	000036'	476 00 0 00 000417'		SETOM	OUTDEV		;FLAG AS SUCH
    64	000037'	050 02 0 00 000400'		OPEN	TTY,DEVDEF	;SET MODE
    65	000040'	254 00 0 00 000226'		 JRST TTYERR
    66	000041'	051 03 0 00 000464'		OUTSTR [ASCIZ /OUTPUT TO FILE: /]
    67	000042'	201 04 0 00 000407'		MOVEI T4,INAM
    68	000043'	260 17 0 00 000000*		PUSHJ P,RDNAM
    69	000044'	334 00 0 00 000000 		 SKIPA
    70	000045'	255 00 0 00 000000 		JFCL
    71	000046'	201 01 0 00 000003 	RDFIL:	MOVEI T1,3
    72	000047'	202 01 0 00 000403'		MOVEM T1,FILNAM
    73	000050'	201 01 0 00 000407'		MOVEI T1,INAM
    74	000051'	332 00 0 01 000000 		SKIPE (T1)
    75	000052'	202 01 0 00 000404'		MOVEM T1,FILNAM+1
    76	000053'	120 01 0 04 000002 		DMOVE T1,2(T4)
    77	000054'	124 01 0 00 000405'		DMOVEM T1,FILNAM+2
    78	000055'	077 01 0 00 000403'		ENTER FIL,FILNAM
    79	000056'	254 00 0 00 000224'		 JRST WRTERR
    80	000057'	336 00 0 00 000417'		SKIPN	OUTDEV
    81	000060'	051 16 0 00 000021 		OUTCHI	21
    82	000061'	201 02 0 00 000005 		MOVEI T2,5	;SET INPUT BAUD RATE TO 1200
    83	000062'	561 01 0 00 000015 		HRROI T1,15	;AUXCAL DISPATCH ENTRY
    84	000063'	332 00 0 00 000417'		SKIPE	OUTDEV	;DONT SET BAUD FOR NON-2780
    85	000064'	042 01 0 00 000002 		AUXCAL T1,T2	;DO IT.
    86	000065'	561 01 0 00 000034 		HRROI T1,34
    87	000066'	042 01 0 00 000000 		AUXCAL T1,
    88						 JRST	[OUTSTR [ASCIZ @COULD NOT SET BLOCK I/O MODE FOR PORT.@]
    89	000067'	254 00 0 00 000500'		JRST FINIS]
    90						OUTSTR  [ASCIZ/READY FOR INPUT
    91	000070'	051 03 0 00 000502'	/]
    92	000071'	332 00 0 00 000417'		SKIPE	OUTDEV		;SKIP IF NOT 2780
    93						OUTSTR  [ASCIZ/
    94
    95
    96
    97	000072'	051 03 0 00 000506'	/]
    98	000073'	201 01 0 00 000620 		MOVEI T1,^D400
    99	000074'	202 01 0 00 000232'		MOVEM T1,BIOBUF
   100	000075'	561 01 0 00 000036 		HRROI T1,36
   101	000076'	042 01 0 00 000232'		AUXCAL T1,BIOBUF	;THIS SHOULD ALWAYS FAIL.
   102	000077'	200 01 0 00 000510'		MOVE T1,[1,,10]	;10 SEC DELAY HACK FOR J KOPFJ
   103	000100'	047 01 0 00 000072 		HIBER T1,
   104	000101'	334 00 0 00 000000 		 SKIPA
   105	000102'	255 00 0 00 000000 		JFCL
   106	000103'	201 01 0 00 000001 		MOVEI T1,1
   107	000104'	202 01 0 00 000421'	        MOVEM T1,PARITY#
   108	000105'	561 01 0 00 000017 		HRROI T1,17	;SET PARITY AS A SIGNAL TO THE
   109	000106'	332 00 0 00 000417'		SKIPE	OUTDEV
   110	000107'	042 01 0 00 000421'		AUXCAL T1,PARITY	;REMOTE TO START 2780 PROTOCOL.
BIONIC - TEST INPUT FROM 2780 USING NETWORK REMOTE BATCH	MACRO %53B(1156)-1 10:57 24-Oct-83 Page 1-2
BIONIC	MAC	10-Jun-72 17:54	

   111	000110'	201 01 0 00 000620 	LP:	MOVEI T1,^D400
   112	000111'	202 01 0 00 000232'		MOVEM T1,BIOBUF
   113	000112'	561 01 0 00 000035 		HRROI T1,35
   114	000113'	042 01 0 00 000232'		AUXCAL T1,BIOBUF
   115						 JRST	[OUTSTR [ASCIZ /BLOCK INPUT ERROR./]
   116	000114'	254 00 0 00 000515'	        JRST FINIS	]
   117	000115'	200 01 0 00 000517'		MOVE T1,[POINT 8,BIOBUF+1]
   118	000116'	202 01 0 00 000377'		MOVEM T1,BIOPTR#
   119	000117'	063 02 0 00 020000 		STATZ TTY,20000
   120	000120'	254 00 0 00 000173'		JRST LPEND
   121	000121'	375 00 0 00 000232'	LP2:	SOSGE BIOBUF
   122	000122'	254 00 0 00 000173'		JRST LPEND
   123	000123'	134 01 0 00 000377'		ILDB T1,BIOPTR
   124	000124'	405 01 0 00 000177 		ANDI T1,177
   125	000125'	322 01 0 00 000121'		JUMPE T1,LP2
   126	000126'	305 01 0 00 000040 		CAIGE	T1,40		;SKIP IF BLANK OR BETTER
   127	000127'	254 00 0 00 000145'		JRST	DOCRLF		;CHECK FOR CR OR LF
   128	000130'	660 16 0 00 000100 		TRO	FL,DTAFLG	;SAY WE HAVE DATA
   129	000131'	602 16 0 00 000010 	NOCR:	TRNE	FL,CRLFLG	;SKIP IF FLAG OFF
   130	000132'	254 00 0 00 000135'		JRST	NOCR2		;MUST INSERT A LF
   131	000133'	260 17 0 00 000167'	NOCR1:	PUSHJ	P,DUMP		;PUCH CHAR. TO FILE
   132	000134'	254 00 0 00 000121'		JRST	LP2		;GET NEXT CHAR.
   133	000135'	261 17 0 00 000001 	NOCR2:	PUSH	P,T1		;SAVE CHAR.
   134	000136'	201 01 0 00 000012 		MOVEI	T1,LF		;INSERT LF AFTER CR
   135	000137'	260 17 0 00 000167'		PUSHJ	P,DUMP		;PUT IT TO FILE
   136	000140'	262 17 0 00 000001 		POP	P,T1		;RETURN WHATEVER
   137	000141'	660 16 0 00 000100 		TRO	FL,DTAFLG	;SET ON FOR RETURNED CHAR
   138	000142'	620 16 0 00 000010 	DONELF:	TRZ	FL,CRLFLG	;SAY DONE WITH CR, LF
   139	000143'	350 00 0 00 000462'		AOS	RECCNT		;ADD TO RECORD COUNT IN
   140	000144'	254 00 0 00 000133'		JRST	NOCR1		;PROCESS CURRENT CHAR.
   141	000145'	306 01 0 00 000012 	DOCRLF: CAIN	T1,LF		;LINE FEED?
   142	000146'	254 00 0 00 000161'		JRST	DOLF		;PROCESS IT
   143	000147'	302 01 0 00 000015 		CAIE	T1,CR		;CARRIAGE RETURN?
   144	000150'	254 00 0 00 000131'		JRST	NOCR		;NO, PROCESS NORMALLY
   145	000151'	620 16 0 00 000100 		TRZ	FL,DTAFLG	;TURN DATA FLAG OFF
   146	000152'	666 16 0 00 000010 		TRON	FL,CRLFLG	;SEE IF CR AFTER CR
   147	000153'	254 00 0 00 000133'		JRST	NOCR1		;NO, THEN ON WE GO
   148	000154'	201 01 0 00 000012 		MOVEI	T1,LF		;INSERT LF BETWEEN CR'S
   149	000155'	260 17 0 00 000167'		PUSHJ	P,DUMP		;SAVE TO FILE
   150	000156'	350 00 0 00 000462'		AOS	RECCNT		;INCREMENT COUNT
   151	000157'	201 01 0 00 000015 		MOVEI	T1,CR		;GET CR BACK
   152	000160'	254 00 0 00 000133'		JRST	NOCR1		;GO ON AS BEFORE
   153	000161'	606 16 0 00 000100 	DOLF:	TRNN	FL,DTAFLG	;SEE IF LF AFTER DATA
   154	000162'	254 00 0 00 000142'		JRST	DONELF		;NO, GO ON AS IS
   155	000163'	201 01 0 00 000015 		MOVEI	T1,CR		;INSURE CR BEFORE LF
   156	000164'	260 17 0 00 000167'		PUSHJ	P,DUMP
   157	000165'	201 01 0 00 000012 		MOVEI	T1,LF		;GET BLACK LF
   158	000166'	254 00 0 00 000142'		JRST	DONELF		;PROCESS LF NOW
   159
   160	000167'	377 00 0 00 000416'	DUMP:	SOSG OBUF+2
   161	000170'	067 01 0 00 000000 		OUTPUT FIL,
   162	000171'	136 01 0 00 000415'		IDPB T1,OBUF+1
   163	000172'	263 17 0 00 000000 		POPJ P,
   164
   165	000173'	061 02 0 00 020000 	LPEND:	STATO TTY,20000
BIONIC - TEST INPUT FROM 2780 USING NETWORK REMOTE BATCH	MACRO %53B(1156)-1 10:57 24-Oct-83 Page 1-3
BIONIC	MAC	10-Jun-72 17:54	

   166	000174'	254 00 0 00 000110'		JRST LP
   167	000175'	606 16 0 00 000010 		TRNN	FL,CRLFLG	;SEE IF CR BUT NO LF YET
   168	000176'	254 00 0 00 000202'		JRST	LPEND1		;DONE, SO GO ON
   169	000177'	201 01 0 00 000012 		MOVEI	T1,LF		;GET THAT LF
   170	000200'	260 17 0 00 000167'		PUSHJ	P,DUMP
   171	000201'	350 00 0 00 000462'		AOS	RECCNT		;INCREASE COUNT
   172	000202'	070 01 0 00 000000 	LPEND1:	CLOSE FIL,0
   173	000203'	336 00 0 00 000417'		SKIPN	OUTDEV
   174	000204'	051 01 0 00 000520'		OUTCHR	[23]
   175	000205'	561 01 0 00 000042 		HRROI T1,42
   176	000206'	332 00 0 00 000417'		SKIPE	OUTDEV
   177	000207'	042 01 0 00 000000 		AUXCAL T1,
   178	000210'	255 00 0 00 000000 		 JFCL
   179	000211'	561 01 0 00 000017 		HRROI T1,17		;RESET PARITY IN THE REMOTE.
   180	000212'	042 01 0 00 000420'		AUXCAL T1,PAR2  	;SO THAT PROGRAM MAY BE RESTARTED.
   181						OUTSTR  [ASCIZ/
   182	000213'	051 03 0 00 000505'	/]
   183	000214'	200 01 0 00 000462'		MOVE	T1,RECCNT
   184	000215'	260 17 0 00 000000*		PUSHJ	P,OUTDEC
   185	000216'	051 03 0 00 000521'		OUTSTR  [ASCIZ/ RECORDS INPUT/]
   186	000217'	047 00 0 00 000012 	        EXIT
   187
   188	000220'	051 03 0 00 000524'	INIERR:	OUTSTR [ASCIZ /COULD NOT INITIALIZE DSK CHANNEL./]
   189	000221'	254 00 0 00 000227'		JRST FINIS
   190	000222'	051 03 0 00 000533'	RDERR:	OUTSTR [ASCIZ /COULD NOT LOOKUP COMMAND FILE./]
   191	000223'	254 00 0 00 000227'		JRST FINIS
   192	000224'	051 03 0 00 000542'	WRTERR:	OUTSTR [ASCIZ /COULD NOT WRITE TO OUTPUT FILE./]
   193	000225'	254 00 0 00 000227'		JRST FINIS
   194	000226'	051 03 0 00 000551'	TTYERR:	OUTSTR [ASCIZ /COULD NOT INITIALIZE DEVICE TTY./]
   195	000227'	561 01 0 00 000017 	FINIS:  HRROI T1,17
   196	000230'	042 01 0 00 000420'	        AUXCAL T1,PAR2
   197	000231'	047 00 0 00 000012 	        EXIT   	
   198
   199			000003'			END STPT

NO ERRORS DETECTED

PROGRAM BREAK IS 000560
CPU TIME USED 00:07.979

10P CORE USED
BIONIC - TEST INPUT FROM 2780 USING NETWORK REMOTE BATCH	MACRO %53B(1156)-1 10:57 24-Oct-83 Page S-1
BIONIC	MAC	10-Jun-72 17:54		SYMBOL TABLE

BIOBUF		000232'		T4		000004		
BIOPTR		000377'		TTY		000002	spd	
C		000006		TTYERR		000226'		
CASSET		000010	spd	VER		000002	spd	
CMDLP		000010'	ext	WRTERR		000224'		
CPOPJ1		000001'		
CR		000015	spd	
CRLFLG		000010	spd	
D2780		000013	spd	
DEVDEF		000400'		
DOCRLF		000145'		
DOLF		000161'		
DONELF		000142'		
DTAFLG		000100	spd	
DUMP		000167'		
EXIT	047000	000012		
FIL		000001	spd	
FILNAM		000403'		
FINIS		000227'		
FL		000016	spd	
GETCHR		000000'	int	
GETTAB	047000	000041		
GORUN		000011'	int	
HIBER	047000	000072		
INAM		000407'		
INCHWL	051200	000000		
INIERR		000220'		
LF		000012	spd	
LP		000110'		
LP2		000121'		
LPEND		000173'		
LPEND1		000202'		
NOCR		000131'		
NOCR1		000133'		
NOCR2		000135'		
OBUF		000414'		
OUTCHI	051700	000000		
OUTCHR	051040	000000		
OUTDEC		000215'	ext	
OUTDEV		000417'		
OUTSTR	051140	000000		
P		000017		
PAR2		000420'		
PARITY		000421'		
PDL		000422'		
RDERR		000222'		
RDFIL		000046'		
RDNAM		000043'	ext	
RECCNT		000462'		
REL		000001	spd	
RESET	047000	000000		
STPT		000003'		
T1		000001		
T2		000002		
T3		000003		

BIONIC - TEST INPUT FROM 2780 USING NETWORK REMOTE BATCH	MACRO %53B(1156)-1 10:57 24-Oct-83 Page 1
BIONIC	MAC	10-Jun-72 17:54	


Symbol cross reference

BIOBUF	    30#	    99	   101	   112	   114	   117	   121
BIOPTR	   118#	   118	   123
C	    12#	    32
CASSET	    18#	    58
CMDLP	    28#	    41
CPOPJ1	    33#
CR	    22#	   143	   151	   155
CRLFLG	    20#	   129	   138	   146	   167
D2780	    19#	    60
DEVDEF	    31#	    48	    50	    61	    64
DOCRLF	   127	   141#
DOLF	   142	   153#
DONELF	   138#	   154	   158
DTAFLG	    21#	   128	   137	   145	   153
DUMP	   131	   135	   149	   156	   160#	   170
FIL	    15#	    42	    78	   161	   172
FILNAM	    30#	    72	    75	    77	    78
FINIS	    89	   116	   189	   191	   193	   195#
FL	    13#	    46	   128	   129	   137	   138	   145	   146	   153	   167
GETCHR	    29	    32#
GORUN	    29	    42#
INAM	    30#	    67	    73
INIERR	    45	   188#
LF	    23#	   134	   141	   148	   157	   169
LP	   111#	   166
LP2	   121#	   125	   132
LPEND	   120	   122	   165#
LPEND1	   168	   172#
NOCR	   129#	   144
NOCR1	   131#	   140	   147	   152
NOCR2	   130	   133#
OBUF	    30#	    44	   160	   162
OUTDEC	    28#	   184
OUTDEV	    57#	    57	    63	    80	    84	    92	   109	   173	   176
P	    26#	    33	    34	    40	    41	    68	   131	   133	   135	   136	   149	   156	   163	   170
	   184
PAR2	    38#	    38	    39	   180	   196
PARITY	   107#	   107	   110
PDL	    30#	    40
RDERR	   190#
RDFIL	    71#
RDNAM	    28#	    68
RECCNT	    47#	    47	   139	   150	   171	   183
REL	     2#	     5
STPT	    36#	   199
T1	     8#	    37	    39	    49	    50	    51	    52	    54	    55	    56	    59	    62	    71	    72
	    73	    74	    75	    76	    77	    83	    85	    86	    87	    98	    99	   100	   101	   102
	   103	   106	   107	   108	   110	   111	   112	   113	   114	   117	   118	   123	   124	   125
	   126	   133	   134	   136	   141	   143	   148	   151	   155	   157	   162	   169	   175	   177
	   179	   180	   183	   195	   196
BIONIC - TEST INPUT FROM 2780 USING NETWORK REMOTE BATCH	MACRO %53B(1156)-1 10:57 24-Oct-83 Page 1
BIONIC	MAC	10-Jun-72 17:54	


Symbol cross reference

T2	     9#	    58	    60	    61	    82	    85
T3	    10#
T4	    11#	    67	    76
TTY	    16#	    64	   119	   165
TTYERR	    65	   194#
VER	     3#	     5
WRTERR	    79	   192#
BIONIC - TEST INPUT FROM 2780 USING NETWORK REMOTE BATCH	MACRO %53B(1156)-1 10:57 24-Oct-83 Page 1
BIONIC	MAC	10-Jun-72 17:54	


Macro/Opdef cross reference

EXIT	   186	   197
GETTAB	    52
HIBER	   103
INCHWL	    32
OUTCHI	    81
OUTCHR	   174
OUTSTR	    66	    88	    90	    93	   115	   181	   185	   188	   190	   192	   194
RESET	    36    