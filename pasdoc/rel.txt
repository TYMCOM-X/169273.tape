














                     Compiler Maintenance and Release Procedures
















           
           
          Prepared by:  Nancy J.  Egan
          Last Updated:  25 October 1982












          Compiler Maintenance and Release Procedures               Page 1
          25 October 1982


          1  Introduction             ____________


          This document describes all of the steps  necessary  to  maintain
          and release a new version of the MDSI Pascal compiler, which will
          be  referred  to  simply  as  "the  compiler"  from  now  on.  In
          addition,  certain  useful  utility programs and monitor commands
          are explained, with examples of their use illustrated.

































          Compiler Maintenance and Release Procedures               Page 2
          25 October 1982


          2  Overview             ________


          In general, the compiler is dealt with  in  two  different  ways:
          Day-to-day maintenance, and releasing a new version.  The two are
          not unrelated, and many of the maintenance  procedures  are  also
          used in releasing a new version.

          Maintenance   work   usually   centers   around   bug-fixing  and
          enhancement  implementation.  There   are   certain   tools   and
          procedures   available   to   make  this  work  easier  and  less
          error-prone.  They  are  described  further  in  the  section  on
          "Maintenance Procedures".

          A  new  version  of the compiler is released periodically to make
          the  most  recent  bug-fixes  and  enhancements  available  on  a
          released  compiler,  as  opposed to a development compiler, which
          should not be used for producing code for actual use.

          There  are  three  different   kinds   of   releases:   Internal,
          unofficial, and official.



          2.1 Internal releases


          An  internal  release is made whenever the compiler is moved from
          the Development Account on Tymshare to  the  Release  Account  on
          Tymshare  (see  the section on "Compiler Accounts", below for the
          specific account numbers).  This type of release always  precedes
          any  other  kind of release.  An internal release doesn't require









          Compiler Maintenance and Release Procedures               Page 3
          25 October 1982


          that too much advance warning be given  to  the  members  of  the
          Development  Software  Group,  and only members of the group will
          use this new compiler.



          2.2 Unofficial releases


          An unofficial release is a release involving a  transfer  of  the
          compiler  to  ADP,  but  not  for  general use.  For example, the
          compiler used to benchmark  ANC  on  the  M68000  is  unoffically
          released on ADP.  A series of unofficial releases may precede the
          official  release.  Unofficial  releases  do  not  require   much
          advance  warning  to  be  given to the users, nor are the results
          guaranteed to be as stable as an officially released compiler.



          2.3 Official releases


          An  official  release  is  made  less  frequently  than  internal
          releases  are  made.  It  consists  of  giving  adequate  advance
          warning to all user's, doing an internal release, and moving  the
          compiler  to ADP.  An officially released compiler is supposed to
          be as stable and well-checked as possible.  It will  be  used  by
          all users, and should be announced by a Release Letter or Memo.
          A  release  may  just  affect  a single code generator, or it may
          affect the entire compiler.  The amount and extent  of  the  code
          changed,  and  it's  function  in the compiler, all dictate which
          procedures must be used to release the new compiler.









          Compiler Maintenance and Release Procedures               Page 4
          25 October 1982


          3  Compiler Accounts             ________ ________


          There are certain accounts on Tymshare and ADP that are  reserved
          for  the  compiler, and certain accounts on Tymshare reserved for
          compiler development.  The only files on these accounts should be
          those directly related to developing and testing the compiler.



          3.1 Tymshare Accounts




          3.1.1 PASDEV1

          This  account  contains  the  current  internal  release  of  the
          compiler.


          3.1.2 PASDEV10

          This is the compiler development account.


          3.1.3 PASDEV12, PASDEV19

          These accounts are used for the compiler fixpoint.












          Compiler Maintenance and Release Procedures               Page 5
          25 October 1982


          3.1.4 PASDEV11



          3.1.5 PASCAL10C

          This account  is  used  to  release  the  PASDEV1  compiler  from
          Tymshare to ADP.


          3.1.6 PASCCAL10I



          3.1.7 PASCAL10




          3.2 ADP Accounts




          3.2.1 [52250,220]

          This  account  contains  the most current official release of the
          compiler.













          Compiler Maintenance and Release Procedures               Page 6
          25 October 1982


          3.2.2 [52250,222]

          This account contains the most current internal  release  of  the
          compiler.


          3.2.3 [52250,234]

          This account contains the old official release of the compiler.


          3.2.4 [52250,261]

          This  account contains the version of the compiler to be released
          next.


























          Compiler Maintenance and Release Procedures               Page 7
          25 October 1982


          4  Compiler Modules             ________ _______


          There are many seperate modules linked  together  which  comprise
          the  compiler.  Following  is  a  brief  description  of  all the
          modules.



          4.1 PASCAL


          This module is used in passes 0,1,2,3,4,5,6,7,8,9,10,11.



          4.2 PASCFM


          This module is used in passes 0,1,6.



          4.3 PASS1


          This module is used in pass 1.














          Compiler Maintenance and Release Procedures               Page 8
          25 October 1982


          4.4 PASLEX


          This module is used in pass 1.



          4.5 PASSMO


          This module is used in pass 1.



          4.6 PASCMP


          This module is used in pass 1.  This  module  contains  functions
          which test for the compatibility of two types.



          4.7 PASANL


          This module is used in pass 1.















          Compiler Maintenance and Release Procedures               Page 9
          25 October 1982


          4.8 PASBLK


          This module is used in pass 1.



          4.9 PASBOD


          This module is used in pass 1.  This is the module which performs
          semantication of procedure and program bodies.



          4.10 PASTSM


          This module is used in pass 1.



          4.11 PASESM


          This module is used in pass 1.















          Compiler Maintenance and Release Procedures               Page 10
          25 October 1982


          4.12 PASREF


          This module is used in pass 1.  This is the  Reference  Semantics
          module.  It  contains  only  a  single  entry  point.  Logically,
          PASREF could be grouped with PASESM;  it  is  a  sepatate  module
          because of its size and importance.



          4.13 PASEMU


          This   module   is  used  in  pass  1.  This  is  the  Expression
          Manipulation Utility module.  It  contains  entry  points  for  a
          variety  of  routines  which  are used in the manipulation of the
          interrmediate form structures  for  expressions.  These  routines
          are  used  primarily  by  the  other expression semantics modules
          (PASESM, PASREF, and PASFLD), but are available for  use  by  the
          rest  of  the  compiler as well.  PASEMU was created by selecting
          all the PASESU routines which were  only  used  in  Pass  1,  and
          creating a new module for them.



          4.14 PASSFC


          This module is used in pass 1.  This module contains the StdFcall
          routine, which performs semantic analysis for calls  on  standard
          functions.










          Compiler Maintenance and Release Procedures               Page 11
          25 October 1982


          4.15 PA1DMP


          This  module  is  used  in  pass  1.  This  is the debugging dump
          module.  It contins a collection of procedures to  dump  portions
          of  the  symbol  table,  intermediate  form code, etc., to a .DMP
          file.



          4.16 PA1XRF (PASXRF - Pass 1)


          This  module  is  used  in  pass  1.  This  module  handles   the
          generation of the cross reference files.  The files it manipulate
          are:



          4.17 PASGLB


          This module is used in pass 1.



          4.18 PASCGR


          This module is used in pass 1.  This is the  call  graph  module.
          It contains routines to create and manipulate the call graph of a
          program.









          Compiler Maintenance and Release Procedures               Page 12
          25 October 1982


               name.XFR -- the cross reference file
               name.XST -- the symbol table file
               name.XNM -- the name file




          4.19 PASALC (PTMALC)


          This module is used in pass 1.  This is  the  storage  allocation
          module for the PDP 10.



          4.20 PASFLD


          This module is used in pass 1.  This module contains the constant
          expression folding module.  Actually, two  distinct  modules  are
          compiled   from  PASFLD.  If  $X1  is  enabled,  then  PA1FLD  is
          generated.  The version of FOLD in this module is recursive,  and
          will  fold all the operands of an expression before attempting to
          fold the expression itself.  If $X2 is enabled,  then  PA2FLD  is
          generated.  This  version  of  FOLD is non-recursive.  It assumes
          that the operands of an expression will already have been  folded
          when FOLD is called.














          Compiler Maintenance and Release Procedures               Page 13
          25 October 1982


          4.21 PASESU


          This  module  is  used in passes 1 and 2.  This is the Expression
          Semantics Utility module.  It contains entry points for a variety
          of   routines   which   are  used  in  the  manipulation  of  the
          intermediate form structures for expressions.  These routines are
          used primarily by the other expression semantics modules (PASESM,
          PASREF, and PASFLD), but are available for use by the rest of the
          compiler as well.



          4.22 PASRDR


          This  module  is  used  in  passes  1 and 3.  This module cntains
          coroutines which read the source lines for  both  the  input  and
          listing passes.



          4.23 PASOPN


          This module is used in passes 1,3,6.















          Compiler Maintenance and Release Procedures               Page 14
          25 October 1982


          4.24 PASOPD


          This module is used in passes 1,6.



          4.25 PASS2


          This module is used in pass 2.



          4.26 PASOPT


          This  module  is used in pass 2.  This is the optimization module
          for the Pascal compiler.  It contains the  procedures  which  are
          directly relevant to optimization.



          4.27 PA2XRF (PASXRF - Pass 2)


          This   module  is  used  in  pass  2.  This  module  handles  the
          generation  of  the  cross  reference   files.   The   files   it
          manipulates are:

               name.XRF -- the cross reference file
               name.XST -- the symbol table file









          Compiler Maintenance and Release Procedures               Page 15
          25 October 1982


               name.XNM -- the name file




          4.28 PTMSEL (P10SEL)


          This  module  is  used  in  pass 2.  This module performs machine
          specific translation of the intermediate form.  In particular, it
          converts  references  to  memory  access  for  and determines the
          proper "shape" (length, precision, etc.) of individual operators.



          4.29 PASFLD


          This module is used in pass 2.  This module contains the constant
          expression  folding  module.  Actually,  two distinct modules are
          compiled  from  PASFLD.  If  $X1  is  enabled,  then  PA1FLD   is
          generated.  The  version of FOLD in this module is recursive, and
          will fold all the operands of an expression before attempting  to
          fold  the  expression  itself.  If $X2 is enabled, then PA2FLD is
          generated.  This version of FOLD  is  non-recursive.  It  assumes
          that  the operands of an expression will already have been folded
          when FOLD is called.














          Compiler Maintenance and Release Procedures               Page 16
          25 October 1982


          4.30 PASS3


          This module is used in pass 3.



          4.31 PASSDM


          This module is used in pass 3.  This is the symbol table  dumping
          module.  It performs the functions required by the SYMBOLS, XREF,
          and CALLS options.



          4.32 P10GEN


          This module is used in pass 4.



          4.33 P10CGU


          This module is used in passes 4,5.














          Compiler Maintenance and Release Procedures               Page 17
          25 October 1982


          4.34 P10EXP


          This module is used in pass 4.



          4.35 P10CMP


          This module is used in pass 4.



          4.36 P10DSC


          This module is used in pass 4.



          4.37 P10CLL


          This module is used in pass 4.
















          Compiler Maintenance and Release Procedures               Page 18
          25 October 1982


          4.38 P10DEB


          This module is used in passes 4,5.  Emmission of DEBUG and  TRACE
          supports.



          4.39 P10REL


          This module is used in passes 4,5.



          4.40 P10MAC


          This module is used in passes 4,5.



          4.41 P10CSP


          This  module is used in passes 4,5.  P10CSP contains all routines
          necessary for constant pooling.














          Compiler Maintenance and Release Procedures               Page 19
          25 October 1982


          4.42 Q10GEN


          This module is used in pass 5.



          4.43 Q10EXP


          This module is used in pass 5.



          4.44 Q10CMP


          This module is used in pass 5.



          4.45 Q10CMP


          This module is used in pass 5.
















          Compiler Maintenance and Release Procedures               Page 20
          25 October 1982


          4.46 Q10CLL


          This module is used in pass 5.



          4.47 Q10SET


          This module is used in pass 5.



          4.48 Q10DSC


          This module is used in pass 5.



          4.49 PASCMD


          This module is used in pass 6.  This is the command line  manager
          module, which is used by NEWPAS to manipulate an internal list of
          pending commands from auto-startup and indirect command files.














          Compiler Maintenance and Release Procedures               Page 21
          25 October 1982


          4.50 PASINI


          This module is used in passes 7,9,11.



          4.51 P10IMD


          This module is used in pass 7.



          4.52 VAXGEN


          This module is used in pass 8.



          4.53 VAXCGU


          This module is used in pass 8.
















          Compiler Maintenance and Release Procedures               Page 22
          25 October 1982


          4.54 VAXEXP


          This module is used in pass 8.



          4.55 VAXUTL


          This module is used in pass 8.



          4.56 VAXSET


          This module is used in pass 8.



          4.57 VAXCMP


          This module is used in pass 8.
















          Compiler Maintenance and Release Procedures               Page 23
          25 October 1982


          4.58 VAXCLL


          This module is used in pass 8.



          4.59 VAXIO


          This module is used in pass 8.



          4.60 VAXSTR


          This module is used in pass 8.



          4.61 VAXREL


          This module is used in pass 8.
















          Compiler Maintenance and Release Procedures               Page 24
          25 October 1982


          4.62 VAXMAC


          This module is used in pass 8.



          4.63 VAXDEB


          This module is used in pass 8.



          4.64 VAXCSP          This module is used in pass 8.



          4.65 VAXIMD


          This module is used in pass 9.
















          Compiler Maintenance and Release Procedures               Page 25
          25 October 1982


          4.66 M68gEN


          This module is used in pass 10.



          4.67 M68OPT


          This module is used in pass 10.



          4.68 M68UTL


          This module is used in pass 10.



          4.69 M68CGU


          This module is used in pass 10.
















          Compiler Maintenance and Release Procedures               Page 26
          25 October 1982


          4.70 M68EXP


          This module is used in pass 10.



          4.71 M68CLL


          This module is used in pass 10.



          4.72 M68CMP


          This module is used in pass 10.



          4.73 M68STR


          This module is used in pass 10.
















          Compiler Maintenance and Release Procedures               Page 27
          25 October 1982


          4.74 M68SET


          This module is used in pass 10.



          4.75 M68IO


          This module is used in pass 10.



          4.76 M68EMU


          This module is used in pass 10.



          4.77 M68EMT


          This module is used in pass 10.
















          Compiler Maintenance and Release Procedures               Page 28
          25 October 1982


          4.78 M68PHO


          This module is used in pass 10.



          4.79 M68REL


          This module is used in pass 10.



          4.80 M68MAC


          This module is used in pass 10.



          4.81 M68IMD


          This module is used in pass 11.
















          Compiler Maintenance and Release Procedures               Page 29
          25 October 1982


          4.82 PASUTL


          This module is used in passes 1,7,9,11.  This module contains the
          symbols  table  utility  routines.  These  routines  are  used by
          nearly every other module  in  the  compiler.  The  symbol  table
          structure   is  specified  in  PASIST.INC,  and  particularly  in
          PASIST.TYP, which it includes.



          4.83 PASJMP


          This module is used in passes 1,7,9,11.



          4.84 PA2DMP


          This module is used in passes 2,5,8,10.  This  is  the  debugging
          dump  module.  It  contains  a  collection  of procedures to dump
          portions of the symbol table, intermediate form code, etc., to  a
          .DMP file.
















          Compiler Maintenance and Release Procedures               Page 30
          25 October 1982


          4.85 PASS4


          This module is used in passes 4,5,8,10.



          4.86 PASMAP


          This module is used in passes 4,5,8,10.



          4.87 PASDAT


          This module is used in passes 0,1,2,3,4,5,6,7,8,9,10,11.



          4.88 PASTAL


          This  module  is used in passes 1,2,4,5,7,8,9,10,11.  This module
          makes machine-dependent decisions about the allocation  of  types
          on the target machine.














          Compiler Maintenance and Release Procedures               Page 31
          25 October 1982


          4.89 PASVAL


          This  module  is used in passes 1,2,7,9,11.  This module contains
          the utility routines for the  creation  of  value  nodes  in  the
          symbol table.



          4.90 PASIFU


          This module is used in passes 1,2,4,5,8,10.  This module contains
          utilities  for  manipulating  the  intermediate  form.  All   the
          procedures  in  this  module  operate on a "current tuple chain".
          This chain corresponds to  the  procedure  body  currently  being
          compiled.



          4.91 PASLOG


          This module is used in passes 1,3,4,5,8,10.



          4.92 PASERR


          This module is used in passes 1,2,3,7,9,11.  This module contains
          all error recording, formatting, and reporting routines.









          Compiler Maintenance and Release Procedures               Page 32
          25 October 1982


          4.93 PASMTH


          This module is used in passes  1,2,4,5,7,8,9,10,11.  This  module
          contains  miscellaneous  mathematical functions for use elsewhere
          in the compiler.



          4.94 PASCV


          This module is used in passes 1,2,3,4,5,8,10.



          4.95 PASSW


          This module is used in passes 1,2,3,5,6,8,10.



          4.96 PASSET


          This module is used in passes 2,3,5,8,10.  This  is  the  bit-set
          manipulation  module.  Vectors  of bit sets are used for a number
          of functions throughout the optimizer.  Since these  vectors  and
          sets  must  be  dynamically  created,  and  their manipulation is
          repetitive, the creation and manipulation of bit set vectors  has
          been centralized in this module.









          Compiler Maintenance and Release Procedures               Page 33
          25 October 1982


          Each  bit set vector is referred to with a descriptor, which must
          be  declared  with  type  "svector".   Such   a   descriptor   is
          initialized  by  NewSvector, and must be passed as a parameter to
          all the other routines in this module.



          4.97 PASDMP


          This module is used in passes 1,2,5,8,10.






























          Compiler Maintenance and Release Procedures               Page 34
          25 October 1982


          5  Runtime Modules             _______ _______


          The Pascal Runtime also includes many  modules.  Following  is  a
          description of them.



          5.1 RTSYM


          This  universal file contains the general macros and symbols used
          by the PASCAL runtime.  It is searched  at  the  start  of  every
          module.



          5.2 RTMON


          This  file  contains  the  primary  support  routines  for PASCAL
          programs, including stack and environment  initialization,  DEBUG
          interface,  and  procedure  and  function  interfaces.  The three
          modules in this file are PASMON, STACK, and PNTRY.

















          Compiler Maintenance and Release Procedures               Page 35
          25 October 1982


          6  Debugger Modules             ________ _______


          Following is a brief descriptions of the PASCAL debugger modules.



          6.1 DEBLEX


          DEBLEX is the Pascal Debugger's lexical analyzer.



          6.2 DEBPTR


          DEBPRT contains the Pascal Debugger's routines for  printing  of,
          and assigning to, user program variables.



          6.3 DEBIO


          DEBIO  is the Pascal Debugger's package of teletype I/O routines.
          By  using  this  mechanism,  independent  of  the  normal  Pascal
          (buffered)  I/O,  the  Debugger  avoids interfering with the user
          program's I/O.












          Compiler Maintenance and Release Procedures               Page 36
          25 October 1982


          6.4 DEBBOL


          DEBBOL contains  the  Pascal  Debugger's  code  for  parsing  and
          evaluationg a boolean expression.



          6.5 DEBSYM


          DEBSYM  provides  the  debugger's  interface  to the symbol table
          files.



          6.6 DEBSCP


          DEBSCP contains the Pascal Debugger's  routines  associated  with
          establishing a scope stack.



          6.7 DEBUG


          DEBUG$ contains the Pascal Debugger's entry point and much of the
          command line parsing logic.












          Compiler Maintenance and Release Procedures               Page 37
          25 October 1982


          6.8 DEBDMP


          DEBDMP contains the routines which implement the Pascal  Debugger
          .DISPLAY command.



          6.9 DEBBRK


          DEBBRK  contains  the  Pascal Debugger's routines associated with
          setting and clearing breakpoints.



          6.10 DEBREF


          DEBREF contains the debugger's routines for parsing  a  reference
          or constant and constructiong a descriptor to describe the parsed
          object.



















          Compiler Maintenance and Release Procedures               Page 38
          25 October 1982


          7  Maintenance Procedures             ___________ __________








































          Compiler Maintenance and Release Procedures               Page 39
          25 October 1982


          8  Fixpoint Testing             ________ _______


          Before any type of release is done, a fixpoint  test  is  run  on
          TYMSHARE.  The new compiler is compiled in account PASDEV12 using
          the compiler in account PASDEV10.  The compiler is then  compiled
          in  account  PASDEV19  using  the  compiler  in account PASDEV12.
          These two versions are then compared.  If they are identical,  we
          have  ensured  that  the  compiler  at  least will compile itself
          correctly.  The compiler can then be rolled back from PASDEV10 to
          PASDEV1.

          Following are the exact fixpoint procedures:



          8.1 Back up PASDEV1


          Before  a  fixpoint is started, the contents of PASDEV1 should be
          copied to the end of our save tape on TYMSHARE.

               RUN BATCH
               RUN
               Company Name: MDSI                             ____
               Project Code: release                             _______
               Area/Phone/Ext: <your phone #>                               _____ _____ __
               Requested By: <your name>                             _____ _____
               Please mount the tape in slot number R15713 (control
               number is 82849) and take a named save set of all
               files in account PASDEV1.  The save set name should
               be "P<version number>".  Please append the save set









          Compiler Maintenance and Release Procedures               Page 40
          25 October 1982


               to the current contents of the tape.
               <ctrl D>
               The tape should be kept at Tymshare.
               <ctrl D>

          Record the PPR number for possible future reference.  If there is
          any  problem with the request, Tymshare will want to know the PPR
          number.  The phone numbers are:  (408)446-6000 or  (408)446-7705.
          The latter number is for system 55 operations.



          8.2 Compile the compiler on PASDEV12



           1.  Sign on to (not gfd into) account PASDEV12.
           2.    Create   a   file   PASCAL.BLD   with   only  one  record:
              '@[31024,320170]'.  This file serves  as  a  pointer  to  the
              PASCAL.BLD file on PASDEV10.
           3.  Run BUILD to create a command file to compile the compiler:

                   DO BUILD                   ________
                   ** Build Version 2.0 **
                   BUILD:  C*;QD                           _____
                   xxxBLD.CTL created

              This  creates  the  file  xxxBLD.CTL,  where  xxx is your job
              number.
           4.  Edit the file xxxBLD.CTL to run the  compiler  in  [,320170]
              (PASDEV10)  rather  than the compiler in [,320155] (PASDEV1).
              Make sure that no lines contain more than 80 characters.









          Compiler Maintenance and Release Procedures               Page 41
          25 October 1982


           5.  Start the batch compile as follows:

                   .R PERP                    ______
                   :DATE                    ____
                   ENTER YOUR DATE PERIOD
                   :TODAY.                    ______
                   :INSERT                    ______
                   WHAT HOUR (0 to 23)?   hh                                          __
                          [this is the hour portion of current time]
                   COMPUTER    55                               __
                   PROJECT CODE     FIXPOINT                                    ________
                   COMMAND FILE NAME     xxxBLD.CTL                                               __________
                   BUILDING CIRCUIT TO MASTER PERP SYSTEM
                   :LIST                    ____
                   <date> <time>, CPN: 55,PASDEV12;FIXPOINT:xxxBLD.CTL
                   END OF JOB
                   :QUIT                    ____

              To see if the batch job has started, type "SYS" to the system
              prompt.  The  response will give information on how many jobs
              you have running and what is currently  happening.  When  the
              batch  compile is done you will have mail waiting.  It should
              say that the job is complete.  Check the xxxBLD.LOG file  for
              any errors which may have occured.  There should be none.  If
              there are no errors, continue.  If there are  any,  find  out
              why.
           6.  Once everything is correctly compiled, link everything using
              BUILD:

                   .DO BUILD                    __ _____
                   ** Build Version 2.0 **
                   BUILD:  L*                           __









          Compiler Maintenance and Release Procedures               Page 42
          25 October 1982


           7.   Once  the  new  compiler   is   linked,   run   the   three
              initialization programs:

                   .RUN P10INI                    __________
                   .RUN VAXINI                    __________
                   .RUN M68INI                    __________

              P10INI  must  be  run  to  compile  the  compiler  in account
              PASDEV19.  The other  two  initialization  programs  are  run
              simply to ensure that they still run.
           8.    Copy  (PASDEV10)PASERR.TXT  to  same.  This  is  the  file
              containing the text of the error messages.

          There is now a complete compiler in account PASDEV12.



          8.3 Compile the compiler in account PASDEV19



           1.  Sign on to (not gfd into) account PASDEV19.
           2.  DEL *.*
           3.  Copy (PASDEV12)xxxBLD.CTL  to  same.  Edit  it  to  use  the
              [,320207] (PASDEV12) compiler.
           4.   Use  QED  to  create  PASCAL.BLD with its only record being
              '@[31024,320207]'.  This points to (PASDEV12)PASCAL.BLD.
           5.  Start  the  batch  compile  as  described  in  step  #5  for
              PASDEV12.
           6.  Once everything is correctly compiled, link everything using
              BUILD:










          Compiler Maintenance and Release Procedures               Page 43
          25 October 1982


                   DO BUILD                   ________
                   BUILD:  L*                           __

           7.  Create a .COM file to find the differences between the SHR's
              and LOW's as follows:

                   .FILE FILE.TMP = *.SHR, *.LOW                    ____________________________
                   .DO QED                    ______
                   *L FILE.TMP                    __________
                   *F NOT(/SHR/OR/LOW/)D
                   CONFIRM?  N                             _
                   *1,$S/  /./                    __________
                   *1,$S::DIFF:                    ___________
                   *1,$S@@,(PASDEV12)@                    __________________
                      (* This file must be split into two files,
                         since it will be too big for direct COM
                         execution. *)
                   *OPEN SHR.TMP                    ____________
                   *F/.SHR/.OUTPUT;.D                    _________________
                   *CLOSE                    _____
                   *A                    _
                   R (UPL)COM;SHR.TMP                   __________________
                   <cr>                   ____
                   .                   _
                   *W                    _
                   OLD FILE FILE.TMP[31024,320216]?  Y                                                     _
                   *Q                    _

              The form of this COM file will be:

                   DIFF PASCAL.LOW,(PASDEV12)










          Compiler Maintenance and Release Procedures               Page 44
          25 October 1982


              Execute  this  .COM  file.  It will print out any differences
              between the .LOW and .SHR files in PASDEV12 and PASDEV19.  If
              they are not the same, figure out why.  If they are the same,
              the new files in  PASDEV19  can  be  removed.  NOTE:  If  any                                                             _____
              modules  are  being  compiled  in  DEBUG  mode, there will be
              differences in the .SHR files.




          8.4 Copy files to PASDEV1



           1.  Sign on to PASDEV10.
           2.  Create one or more COM files to do the  copy  by  doing  the
              following:

               1.   Get a file, BOTH.TMP, which contains a list of files in
                  both accounts and a file, ONLY.TMP, which contains a list
                  of files in just the PASDEV10 account as follows:

                   1.  Make two files as follows:

                           .FILES FILE10.TMP = *.*/ALP                            __________________________
                           .FILES FILE1.TMP = (PASDEV1)*.*/ALP                            __________________________________

                   2.  Use QED to delete the first five lines of each.
                   3. 

                           .DO COMMON                            _________
                           *BOTH.TMP = FILE1.TMP * FILE10.TMP                            _________________________________









          Compiler Maintenance and Release Procedures               Page 45
          25 October 1982


                           *ONLY.TMP = FILE10.TMP - FILE1.TMP                            _________________________________
                           *


               2.   Edit  the  BOTH.TMP  file  until it contains only those
                  files which need to be copied  to  PASDEV1.  Files  which
                  can be deleted are:

                   1.  *.REL
                   2.  *.SHR
                   3.  *.LOW
                   4.  *.ENV
                   5.  *.DEB

                  PASCAL.BLD can only be deleted when it has no significant
                  differences from the PASCAL.BLD on PASDEV1.
               3.  Turn the BOTH.TMP file into one or more .COM files to do
                  the copy.
               4.   Check the ONLY.TMP file for any new compiler files.  If
                  there are any, add them to the .COM file.

           3.  Sign on to PASDEV1 and use the .COM files to copy the  files
              from PASDEV10.
           4.   Unprotect  all  .SHR  and  .LOW  files  to allow comparison
              checking:

                   DECL RD RD NO *.SHR, *.LOW














          Compiler Maintenance and Release Procedures               Page 46
          25 October 1982


          8.5 Backup old executable compiler to PASDEV19



           1.  Sign on to PASDEV19.
           2.  Make a .COM file to copy the following files from PASDEV1 to
              PASDEV19  and  execute  it.  SHR's  and  LOW's  which must be
              included are:

               1.  PASCAL
               2.  PASCMD
               3.  PASANL
               4.  P10SHP
               5.  P10OCG
               6.  P10CCG
               7.  VAXCCG
               8.  PASLST
               9.  M68CCG

              Other files which must be copied are:

               1.  P10INI.ENV
               2.  VAXINI.ENV
               3.  M68INI.ENV
               4.  PASERR.TXT
               5.  PASLIB.REL















          Compiler Maintenance and Release Procedures               Page 47
          25 October 1982


          8.6 Compile everything in PASDEV1



           1.  Sign on to PASDEV1.
           2.  Reprotect all .SHR and .LOW files:

                   DECL RUN RUN NO *.SHR, *.LOW

           3.  Make a PERP file to compile everything:

                   .DO BUILD                    ________
                   BUILD:  C*;QD                           _____

           4.  Edit the file created above to  use  the  PASDEV10  compiler
              ([,320170]).
           5.  Run PERP as previously described to do the batch compile.
           6.   Copy  over  any REL's corresponding to library changes from
              PASDEV10.  This  includes  PASLIB.REL  and  all   REL   files
              corresponding to any new MAC files.
           7.  Run SETVER to set the version number:

                   .DO SETVER                    _________
                   Old Version = <version number>
                   New Version: <new version number>                                ____ _______ _______

           8.  Unprotect all SHR and LOW files to link up new compiler:

                   .DECL ALL NO NO *.SHR, *.LOW                    ___________________________

           9.  Link the new compiler:










          Compiler Maintenance and Release Procedures               Page 48
          25 October 1982


                   .DO BUILD                    ________
                   BUILD:  L*                           __

          10.  Run all three initialization programs.
          11.  Reprotect all SHR and LOW files:

                   .DECL RUN RUN NO *.SHR, *.LOW                    ____________________________





          8.7 Rebuild the compiler in PASDEV12



           1.  Sign on to PASDEV12.
           2.  Delete *.*
           3.  Create PASCAL.BLD to point to PASDEV1 ([31024,320155]).
           4.  Create PERP file:

                   .DO BUILD                    ________
                   BUILD:  C*;QD                           _____

           5.  Rename FIXPT.CTL = xxxBLD.CTL.
           6.  Use QED to change the LOG name in FIXPT.CTL to FIXPT.LOG.
           7.  Run PERP as before.
           8.  Link everything:

                   DO BUILD
                   L*










          Compiler Maintenance and Release Procedures               Page 49
          25 October 1982


           9.  Sign on to PASDEV1.
          10.   Unprotect  all  SHR  and  LOW  files  to  allow  comparison
              checking:

                   .DECL RD RD NO *.LOW, *.SHR                    __________________________

          11.  Create COM files to compare the LOW and SHR files in PASDEV1
              to PASDEV12.  The form is:

                   DIFF PASCAL.LOW,(PASDEV12)

          12.    Do   the   compares.  If  they  are  identical,  continue.
              Otherwise find out why not.
          13.  Delete the Com files just used.
          14.  Reprotect the SHR and LOW fils:

                   .DECL RUN RUN NO *.SHR, *.LOW                    ____________________________

          15.  Sign on to PASDEV12.
          16.  Delete *.*

          This is the end of the internal release.



















          Compiler Maintenance and Release Procedures               Page 50
          25 October 1982


          9  Version Numbers             _______ _______








































          Compiler Maintenance and Release Procedures               Page 51
          25 October 1982


          10  Adding a new code generator              ______ _ ___ ____ _________








































          Compiler Maintenance and Release Procedures               Page 52
          25 October 1982


          11  Releasing a new cross-compiler code generator              _________ _ ___ ______________ ____ _________



           1.  Copy the pertinent source  (.PAS)  files  from  PASDEV10  to
              PASDEV1.  Also check for .INC and .TYP files.
           2.  Delete the copies from PASDEV10.
           3.  Unprotect the code generator .LOW and .SHR files:

                   .DECL ALL NO NO M68CCG.LOW, M68CCG.SHR                    _____________________________________

           4.  Compile and link the new modules:

                   .DO BUILD                    ________
                   BUILD: C (M68EMU,M68CLL);L C                          _____________________

           5.   If  the  .TYP  file  changes,  recompile  the  entire  code
              generator.
           6.  Reprotect the code generator .LOW and .SHR files:

                   .DECL RUN RUN NO M68CCG.LOW,M68CCG.SHR                    _____________________________________

           7.  Change the version number with SETVER.
           8.  Unprotect the .LOW and .SHR files that  referece  PASVER.REL
              which contains the new version number:

                   .DECL ALL NO NO PASCAL.LOW,PASCMD.LOW,PASLST.LOW,-                    _________________________________________________
                   VAXCCG.LOW,PASCAL.SHR,PASCMD.SHR,PASLST.SHR,VAXCCG.SHR                   ______________________________________________________

           9.  Link these modules:

                   .DO BUILD                    ________









          Compiler Maintenance and Release Procedures               Page 53
          25 October 1982


                   BUILD: L PASCAL,PASCMD,PASLST,VAXCCG                          _____________________________

          10.  Reprotect these modules:

                   .DECL RUN RUN NO PASCAL.LOW,PASCMD.LOW,PASLST.LOW,-                    __________________________________________________
                   VAXCCG.LOW,PASCAL.SHR,PASCMD.SHR,PASLST.SHR,VAXCCG.SHR                   ______________________________________________________

          11.  Create the tape to send to ADP:

               1.  Switch to PASCAL10C.
               2.  Link the code generator and the version number modules:

                       .DO BUILD                        ________
                       BUILD: L M68CCG,VAXCCG,PASCAL,PASCMD,PASLST                              ____________________________________

               3.  Run FILEX:

                       .DO COM                        ______
                       FILES                       _____
                       <cr>                       ____

               4.  Copy the new .DEB files from PASDEV1.
               5.   Submit  a batch request to create a tape with the 5 new
                  .EXEs and all new .DEBs.
               6.  Delete all new .SHR and .LOW files.
















          Compiler Maintenance and Release Procedures               Page 54
          25 October 1982


          12  Making a tape              ______ _ ____


          After the fixpoint is run, a tape can be  made  on  TYMSHARE  and
          sent to ADP.  The procedure for making a tape is:

           1.  Sign on to PASCAL10C.
           2.     Create    a   PASCAL.BLD   file   pointing   to   PASDEV1
              ([31024,320155]).  Make sure that the heap start  address  is
              correct in the PASCAL.BLD file.  It is specified near the end
              of the PASCAL.BLD file.  Internally, a heap start address  of
              45000 is used.  For use by QA or ANC, a heap start address of
              25000 must be  used.  If  the  address  is  wrong,  copy  the
              PASCAL.BLD file to (PASCAL10C), change the search list in the
              beginning of the file, and change the heap start address.
           3.  Run BUILD as follows:

                   .DO BUILD                    ________
                   BUILD:  L*                           __

           4.  Convert all SHR's to EXE's:

                   .DO COM                    __ ___
                   FILE = FILEX                          _____

           5.  Copy (PASDEV1)PASERR.TXT to same.
           6.  Do the batch request for tape as follows:

                   .R BATCH                    _______
                   :RUN                    ___
                   company name: MDSI                                 ____
                   project name: RELEASE                                 _______









          Compiler Maintenance and Release Procedures               Page 55
          25 October 1982


                   phone number: <your phone number>                                 _____ _____ _______
                   your name: <your name>                              _____ _____
                   [enter the following information]
                   Please assign a mag tape to me and take a save set 
                   of all files on PASCAL10C.  The save set should 
                   be named "P<version #>".  Using DEC's utility 
                   program "BACKUP", please make the tape 9-track,
                   1600 BPI, Interchange Mode.
                   <control D>
                   Delivery instructions:

                   Please ship via Federal Express Overnight Delivery 
                   to ADP:

                   ADP Network Services
                   Customer Service
                   175 Jackson Plaza
                   Ann Arbor, MI  48106
                   From: <your name>/MDSI

                   ATTENTION - special instructions:
                   Please enclose a note to ADP Network Services to call me when the 
                   tape arrives at: <your phone #> or <Paul's phone #>.

                   Thank-you.
                   <control D>

           7.  Record the PPR number you get back.  This  is  necessary  if
              you have to call the operator about any problems.
           8.   Call  ADP  Customer Service at 769-6800.  Tell them who you
              are and that you are having a tape shipped ther  via  Federal
              Express  and  want  to  trade  it with the one in slot C1610.









          Compiler Maintenance and Release Procedures               Page 56
          25 October 1982


              Have them allow read only for [52250,*] on the new tape.  The
              account  number for the tape is [52250,237].  The password is
              ISDM.
           9.  Call Bob Nolan (the courier) at x57444 and have him pick  up
              the old tape from ADP.




































          Compiler Maintenance and Release Procedures               Page 57
          25 October 1982


          13  Transporting a tape              ____________ _ ____








































          Compiler Maintenance and Release Procedures               Page 58
          25 October 1982


          14  Reading a tape              _______ _ ____


          When  a  release  tape  arrives at ADP it should be loaded there.
          This is done as follows:

           1.  Sign on to [52250,222]
           2.  Reprotect the DEB and EXE fils.

                   .PROT <055> *.DEB, *.EXE                    _______________________

           3.  Mount the tape:

                   .$ASSIGN MTA:C1610,ISDM,DISABLE,9-TRACK,1600BPI PLEASE                    _____________________________________________________

              C1610 is the slot number for the tape, ISDM is the password.
           4.  Once the tape is mounted, the files can be copied:

                   .R BACKUP                    ________
                   /TAPE MTA:                    _________
                   /DENSITY 1600                    ____________
                   /INTERCHANGE                    ___________
                   /REWIND                    ______
                   /OKSUPERCEDE                    ___________
                   /RESTORE *.*                    ___________
                   !FILES                    _____
                   (get out of backup)

           5.  Run SETPPN to change the ppn fields in M68CCG.EXE:  ???
           6.  Delete M68CCG.EXE and replace it with M68CCG.NEW.
           7.  Reprotect the DEB and EXE files:










          Compiler Maintenance and Release Procedures               Page 59
          25 October 1982


                   PROTECT <255> *.DEB, *.EXE








































          Compiler Maintenance and Release Procedures               Page 60
          25 October 1982


          15  File transfers              ____ _________








































          Compiler Maintenance and Release Procedures               Page 61
          25 October 1982


          16  Preparing a Release Letter              _________ _ _______ ______








































          Compiler Maintenance and Release Procedures               Page 62
          25 October 1982


          17  Running certain necessary utilities              _______ _______ _________ _________





          17.1 Build





          17.2 Setver





          17.3 QED





          17.4 Common
















          Compiler Maintenance and Release Procedures               Page 63
          25 October 1982


          17.5 PERP





          17.6 Batch


































          Compiler Maintenance and Release Procedures               Page 64
          25 October 1982


          18  Using certain necessary monitor commands              _____ _______ _________ _______ ________





          18.1 Filestatus





          18.2 Systat





          18.3 Diff





          18.4 Declare
















          Compiler Maintenance and Release Procedures               Page 65
          25 October 1982


          18.5 Copy





          18.6 Rename





          18.7 Delete




























          Compiler Maintenance and Release Procedures
          25 October 1982





                                  Table of Contents                                  _____ __ ________


          SECTION                                                    PAGE

          1        INTRODUCTION                                        1


          2        OVERVIEW                                            2

          2.1      Internal releases                                   2
          2.2      Unofficial releases                                 3
          2.3      Official releases                                   3

          3        COMPILER ACCOUNTS                                   4

          3.1      Tymshare Accounts                                   4
          3.1.1       PASDEV1                                          4
          3.1.2       PASDEV10                                         4
          3.1.3       PASDEV12,4PASDEV19                               4
          3.1.4       PASDEV11                                         5
          3.1.5       PASCAL10C                                        5
          3.1.6       PASCCAL10I                                       5
          3.1.7       PASCAL10                                         5
          3.2      ADP Accounts                                        5
          3.2.1       [52250,220]                                      5
          3.2.2       [52250,222]                                      6
          3.2.3       [52250,234]                                      6
          3.2.4       [52250,261]                                      6









          Compiler Maintenance and Release Procedures
          25 October 1982



          4        COMPILER MODULES                                    7

          4.1      PASCAL                                              7
          4.2      PASCFM                                              7
          4.3      PASS1                                               7
          4.4      PASLEX                                              8
          4.5      PASSMO                                              8
          4.6      PASCMP                                              8
          4.7      PASANL                                              8
          4.8      PASBLK                                              9
          4.9      PASBOD                                              9
          4.10     PASTSM                                              9
          4.11     PASESM                                              9
          4.12     PASREF                                              10
          4.13     PASEMU                                              10
          4.14     PASSFC                                              10
          4.15     PA1DMP                                              11
          4.16     PA1XRF11(PASXRF11-11Pass111)                        11
          4.17     PASGLB                                              11
          4.18     PASCGR                                              11
          4.19     PASALC12(PTMALC)                                    12
          4.20     PASFLD                                              12
          4.21     PASESU                                              13
          4.22     PASRDR                                              13
          4.23     PASOPN                                              13
          4.24     PASOPD                                              14
          4.25     PASS2                                               14
          4.26     PASOPT                                              14
          4.27     PA2XRF14(PASXRF14-14Pass142)                        14
          4.28     PTMSEL15(P10SEL)                                    15
          4.29     PASFLD                                              15









          Compiler Maintenance and Release Procedures
          25 October 1982


          4.30     PASS3                                               16
          4.31     PASSDM                                              16
          4.32     P10GEN                                              16
          4.33     P10CGU                                              16
          4.34     P10EXP                                              17
          4.35     P10CMP                                              17
          4.36     P10DSC                                              17
          4.37     P10CLL                                              17
          4.38     P10DEB                                              18
          4.39     P10REL                                              18
          4.40     P10MAC                                              18
          4.41     P10CSP                                              18
          4.42     Q10GEN                                              19
          4.43     Q10EXP                                              19
          4.44     Q10CMP                                              19
          4.45     Q10CMP                                              19
          4.46     Q10CLL                                              20
          4.47     Q10SET                                              20
          4.48     Q10DSC                                              20
          4.49     PASCMD                                              20
          4.50     PASINI                                              21
          4.51     P10IMD                                              21
          4.52     VAXGEN                                              21
          4.53     VAXCGU                                              21
          4.54     VAXEXP                                              22
          4.55     VAXUTL                                              22
          4.56     VAXSET                                              22
          4.57     VAXCMP                                              22
          4.58     VAXCLL                                              23
          4.59     VAXIO                                               23
          4.60     VAXSTR                                              23
          4.61     VAXREL                                              23









          Compiler Maintenance and Release Procedures
          25 October 1982


          4.62     VAXMAC                                              24
          4.63     VAXDEB                                              24
          4.64     VAXCSP                                              24
          4.65     VAXIMD                                              24
          4.66     M68gEN                                              25
          4.67     M68OPT                                              25
          4.68     M68UTL                                              25
          4.69     M68CGU                                              25
          4.70     M68EXP                                              26
          4.71     M68CLL                                              26
          4.72     M68CMP                                              26
          4.73     M68STR                                              26
          4.74     M68SET                                              27
          4.75     M68IO                                               27
          4.76     M68EMU                                              27
          4.77     M68EMT                                              27
          4.78     M68PHO                                              28
          4.79     M68REL                                              28
          4.80     M68MAC                                              28
          4.81     M68IMD                                              28
          4.82     PASUTL                                              29
          4.83     PASJMP                                              29
          4.84     PA2DMP                                              29
          4.85     PASS4                                               30
          4.86     PASMAP                                              30
          4.87     PASDAT                                              30
          4.88     PASTAL                                              30
          4.89     PASVAL                                              31
          4.90     PASIFU                                              31
          4.91     PASLOG                                              31
          4.92     PASERR                                              31
          4.93     PASMTH                                              32









          Compiler Maintenance and Release Procedures
          25 October 1982


          4.94     PASCV                                               32
          4.95     PASSW                                               32
          4.96     PASSET                                              32
          4.97     PASDMP                                              33

          5        RUNTIME MODULES                                     34

          5.1      RTSYM                                               34
          5.2      RTMON                                               34

          6        DEBUGGER MODULES                                    35

          6.1      DEBLEX                                              35
          6.2      DEBPTR                                              35
          6.3      DEBIO                                               35
          6.4      DEBBOL                                              36
          6.5      DEBSYM                                              36
          6.6      DEBSCP                                              36
          6.7      DEBUG                                               36
          6.8      DEBDMP                                              37
          6.9      DEBBRK                                              37
          6.10     DEBREF                                              37

          7        MAINTENANCE PROCEDURES                              38


          8        FIXPOINT TESTING                                    39

          8.1      Back up PASDEV1                                     39
          8.2      Compile the compiler on PASDEV12                    40
          8.3      Compile the compiler in account PASDEV19            42
          8.4      Copy files to PASDEV1                               44









          Compiler Maintenance and Release Procedures
          25 October 1982


          8.5      Backup old executable compiler to PASDEV19          46
          8.6      Compile everything in PASDEV1                       47
          8.7      Rebuild the compiler in PASDEV12                    48

          9        VERSION NUMBERS                                     50


          10       ADDING A NEW CODE GENERATOR                         51


          11       RELEASING A NEW CROSS-COMPILER CODE GENERATOR       52


          12       MAKING A TAPE                                       54


          13       TRANSPORTING A TAPE                                 57


          14       READING A TAPE                                      58


          15       FILE TRANSFERS                                      60


          16       PREPARING A RELEASE LETTER                          61


          17       RUNNING CERTAIN NECESSARY UTILITIES                 62

          17.1     Build                                               62
          17.2     Setver                                              62









          Compiler Maintenance and Release Procedures
          25 October 1982


          17.3     QED                                                 62
          17.4     Common                                              62
          17.5     PERP                                                63
          17.6     Batch                                               63

          18       USING CERTAIN NECESSARY MONITOR COMMANDS            64

          18.1     Filestatus                                          64
          18.2     Systat                                              64
          18.3     Diff                                                64
          18.4     Declare                                             64
          18.5     Copy                                                65
          18.6     Rename                                              65
          18.7     Delete                                              65

























@