Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Tue, 22 Jul 86 17:58:39 PDT 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Suggestions... 

If we can keep a counter of how many DDBs we have created, added to the DDB
chains, then if we search more than that many times, we've looped somewhere!

Why not do once a minute code while catching up on time?  Unless it only
checks against uptime counters instead of actual clock time...  it could
confuse people who do DAYTIME commands...

(in particular, inactivity timeouts)


What happens to characters other than ^Z typed on the CTY in NETWORK mode?


What is th actual format of the SYSUDT variable, NSWTBL+5... is it the UDT
the system came up or the TDT?   KSYS is still ticks to system reload, right?

Can I assume that /P32 works?

I have a message from Peter (Stratman?) from CEGI asking about upgrading
their systems to /P (actually whatever is needed for XEXEC) and about some
testing of XEXEC on their systems.  I think that we need to clarify our
support picture with CEGI (or whatever they're now called) before we take
any action.

/Carl

PS:  I'm still not feeling too well, but will try to do some work while I'm
     away.  /C


Received: from X930.Tymnet by X62.Tymnet; Thu, 24 Jul 86 21:10:41 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Thu, 24 Jul 86 21:08:39 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: /P33 is up 

P034/P33 is running on 930, 62, 95.   It has been telecopied to 24 and 26.
KIXP33.SAV is ready to be tested with the 3650/52 disks in Dallas.  /Joe


Received: from X930.Tymnet by X62.Tymnet; Sun, 27 Jul 86 23:01:03 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sun, 27 Jul 86 21:57:47 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: SZRPT.MAC is a mess. 

The author of SZRPT really screwed up.  Look at the following:
	T1=6
	T2=7
	LS=12
	T3=13
	54=54
	UFDBF=12
	MFDBF=13
...
	ARRAY UFDBF[3],MFDBF[3]
...
	CALLI
	INIT UF,17
	SIXBIT /DSK/
	UFDBF
	  JRST ...
...
GTUFD1:	MOVE T1,UFDBLK(UFDBF)
...
The coding is atrocious.  It's a wonder it works at all.  (In fact, it doesn't
even wait for an answer when it asks for "sort by").  It looks very much as if
the program was written before the CHANIO function that reads the UFD.  Then
someone added the .CHUFD call, which made the 3-word buffer header for reading
the UFD in buffered mode obsolete, so that person decided to reuse the name
UFDBF, but did not purge all the previous references to the symbol.

As currently coded, SZRPT attempts to use two overlaping buffer headers in the
ACs, which causes it to die with "?Address check for device at user PC 174"
when running under the /P33 monitor.  Since this program is so blatently wrong,
I will put a new version of SZRPT on SYS, and not retract the edit to the
Monitor that caught this problem.   /Joe


Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Thu, 29 Aug 85 20:27:26 PDT 
To: Dennis Coffey <dencoff@C26.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Jon Mosser <mosserj@X930.Tymnet>,
	Joe Smith <jms@X930.Tymnet>, Osman Guven <osman@X930.Tymnet> 
Subject: 14-bit node numbers 

Yes, I said 14-bit node numbers.  TYMNET NTD is looking at expanding the
current 12-bit numbers since they are currently at '7200+ and will soon
overflow the 12-bit field.

Gazel Tan has asked me to help identify potential software problems on
the PDP-10s if they were to go to 14-bit node numbers.  In the monitor,
the problem is minimal, we have a few extra bits and could easily make
room for up to 16-bit fields.

Various utility programs would falter badly, not to mention SPOOL, which
has relied on 11-bit node numbers and is already needing a fix.

I'd like you to examine the PDP-10 utilities and possibly applications
which do anything with node numbers and make a list: programs which key
off the node (eg. SPOOL,MAGNUM) and programs which simply report what is
read (eg. SYSTAT).

Once we have the list, we can determine what impact changing the node
numbers to 14-bits will have on our environment.
/Carl


Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 1 Sep 85 1:22:52 PDT 
To: jms, Dennis Coffey <dencoff@C26.Tymnet> 
Cc: Osman Guven <osman@X930.Tymnet>, Craig Fletcher <fletcherc@X930.Tymnet> 
Subject: 12-bit node numbers 


----------------------------------------------------------------
Received: from X930.Tymnet by C26.Tymnet; Sun, 1 Sep 85 2:01:05 PDT

Sigh... SYSTAT only reads up to node 3000!   That's why we see *6657* in
the systat listings.  FYI there are two places in SYSTAT that do a
  MOVEI M,3000   instruction then later CAMGE M,xxxxx to check the node
number.  I binary-patched (SYS:930)SYSTAT.SHR to  MOVEI M,7777  to test
it and "le voila" it now prints node names higher than 3000!

Oh, and since TYMNET may or may not have updated things... I wrote a
little program, DEFNOD which is in (TYMNET) that reads NODES.MAP and
does nice things to it.

It's basically DEFSYS/DEFPRI/DEFNOD hacked to work on the right file.
DEFSYS looks at (SYS)PERP.SYS,  DEFPRI looks at (SPOOL)NODPRI and now
DEFNOD looks at (TYMNET)NODES.MAP....

sigh... gee.. it's easy to write/modify programs which read binary files
and print out the entries, and modifies them... real easy... sigh...

Anyway... nodes should type out on 930 a little more sensibly now...
However, don't bother trying to transmit SYSTAT or anything like that
until we get the new 14-bit node standard implemented....

I've talked to Dave Smith, and since he was asked to co-ordinate with
me how to do the new standard, and the base gets it as a 16-bit word,
chances are that we will go to 2 8-bit bytes as I proposed the other
day.   (however, NOTHING will be done until the new bases are completely
deployed in the network and the varians are all gone!!!)

/Carl


Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> (Liberty Street in Fremont 116-2512) 
Date: Wed, 27 Nov 85 14:18:54 PST 
To: Carl A Baltrunas <carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dencoff 
Subject: (M33)NOINTE.PAT 

Patch #4 is for NO INTERRUPT ENABLE during JOB, INFO, and DEBUG stopcodes.
It disables the CONO PI instruction that re-enabled channel 1 interrupts for
these stopcodes.

/JMS


Received: from X118.Tymnet by X930.Tymnet; Wed, 12 Feb 86 0:00:26 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> (Liberty Street in Fremont 116-2512) 
Date: Tue, 11 Feb 86 20:57:28 PST 
To: Carl A Baltrunas <carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet 
Subject: BPXKON is dumb! 

The problem that prevented ASP from working is the same one that caused
"SAVE (SYS)NEWMON" to get an I/O error.  The size of the command list in the
Unit Data Block is big enough to handle 380 records - 1 cylinder on a 3330
formatted in blocks.  This is more than enough for a 3650, which has 210
records per cylinder.  If FILIO attempts to transfer a large number of
contiguous core pages to contiguous disk pages (more than 1 cylinder's worth),
BPXKON splits the request into  smaller transfers.  The routine that does
this assumed that the command list was big enough for exactly one cylinder.
Because of this wrong assumption, it tried to write to record 8 on head 2.
Since there are only 7 records per track, the disk reported NO RECORD FOUND.
BPXKON is so dumb that it treated this condition as an uncorrectable disk
write error, and put the page in the output hash table, as if it might be
able to write to this bogus record some day.

I put a patch into 24XP16 to set P2 correctly, it came up, and 26 minutes later
the ASP restore was done.

Also, PAKCP5 can copy a pack using the old copy routine: "OLDC" and "DOIT".
This also takes about 26 minutes.

/JMS


 BPXKON is stupid. 

It's so dumb that it treats "RECORD NO FOUND" as if it were a bad spot on the
disk, and blithely assumes that the record will reappear if it waits long
enough.

The problem that kept ASP restore from working is the same one that caused
"I/O error to page 124" when I tried to "SAVE (SYS)NEWMON" on C24.

If FILIO tries to output more than 21 contiguous core pages to contiguous
disk pages, BPXKON has to split the request up into 3 or more requests of
7 pages each (7 pages per track).  The routine that does this made a bad
assumption.  Since the size of the command list area is big enough to handle
one cylinder on a 3330 in blocks (1 cyl = 380 blocks), then it thought it
could use the amount of space remaining in the command list to calculate the
end-of-cylinder boundry.  But 380 pages is 1.8 cylinders on a 3650 (and 4.0
cylinders on a 3330 in pages).  It correctly built the command list to transfer
pages 1-7 of track 0, 1-7 of track 1, 1-7 of track 2, but then added 8-10 of
track 2.  The disk complained that record 8 does not exist, but stupid BPXKON
treated it like a bad spot on the disk.

A three-line patch to BPXKON solved this problem.

An ASP dump stores the first 317 cylinders on one tape and 238 on the 2nd
(total of 555 cylinders).  An ASP restore takes 26 minutes, including the time
it takes to rewind the tape and mount the second one.

/JMS

P.S. The old copy routine in PAKCP5 ("OLDC" and "DOIT") works, takes somewhere
between 25 and 30 minutes to copy one 3650 pack (I wasn't watching when it
finished).


Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Wed, 12 Feb 86 3:48:50 PST 
To: Carl A Baltrunas <Carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey
	<dencoff@X930.Tymnet>, Bruce Ring <bring@C26.Tymnet> 
Subject: BIO-ZAP patch 

I've made patch #9, BIOZAP.PAT and installed it on systems C26 & D25
both in SYSTEM.SAV and the running monitor.  The patch addresses two
areas:
  1) STOPCD if T3/ LDBBIO(U) = 0 and a zapper was not seen
                                 if seen, then act if no room for data
     simulates STOPCD(DEBUG,BIOZAP)

  2) GETBIO routine ought to check if the port it's allocating a buffer
     on is really there (not zapped).

If C26 & D25 seem to run "clean" then I will propagate the patch to all
the other systems and fit the fix into the sources.
/Carl

PS. System 930, has this patch installed in the running monitor xxxx-1.


Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Thu, 13 Feb 86 3:45:59 PST 
To: Carl A Baltrunas <Carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey
	<dencoff@X930.Tymnet>, Bruce Ring <bring@C26.Tymnet> 
Subject: ADDPAK vs REFRESH 

Joe,
  The code in ADD UNIT tests a lot of things and all go to CANTAD which
prints out the message CAN NOT ADD UNIT TO STRUCTURE.  However, I suspect
that it took the error return from PAKREF.  This is because there is an
AOBJN pointer that says to read the RIB for each of the per-pack files
which were (2) SAT.SYS, HOME.SYS and now are (3) SAT.SYS, HOME.SYS and
SPAGES.SYS.  In PAKREF, at PREF2 + it says to error return if the rib is
blank... and in the OLD structures SWAP.SYS has been obliterated.  You
need to REFRESH first to setup the rib for SPAGES.SYS and then an ADDPAK
should work fine.

/Carl


Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sat, 22 Feb 86 3:34:57 PST 
To: Carl A Baltrunas <Carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey
	<dencoff@X930.Tymnet>, Bruce Ring <bring@C26.Tymnet> 
Subject: BAD SYSUFD PATCH 

Correction:  The patch to turn off the weird SYS:.UFD = (UFD).UFD does
what we expected... however, we didn't expect that some old accounting
programs actually used that "feature"/"bug" and thus, we cannot patch
it at the moment.

   I went around to most of the Dallas machines with the new /P-8 monitors
and in an effort to just "get it done before I forgot again" I put the
instructiuon  "CAME T1,MFDPPN" back where it was patched out of both the
running /P-8 monitors and (SYS)NEWMON on
  27, 31, 37, 56 and 65.   Just fixed (SYS)NEWMON on 25, 72 and 79.

DID NOT FIX systems 23 and 54 since they were unavailable for some reason
at this time.  Someone (OSMAN,JOE) please check them and un-do the SYSUFD
patch:

  FILUUO$:   CHKPP1+2/ JFCL 0   <== replace with CAME T1,MFDPPN

I did NOT update P-8 to P-8 because I was in a hurry and don't feel all
that well at the moment... I was just trying to do it while it was on my
mind.
/Carl


Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> (Liberty Street in Fremont 116-2512) 
Date: Tue, 25 Feb 86 19:12:50 PST 
To: Carl A Baltrunas <carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet,
	CC:Ring 
Subject: Testing TOPS-10 programs on the 2020. 

Craig,
  To use TOPS-10, just BOOT system 95 from the DSKA and DSKB packs (DSKA
has to be in the drive with the 0 plug).  To log in, type "I" on the TYM444,
INITIA will log in a [1,2] job there.


		/JMS


Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> (Liberty Street in Fremont 116-2512) 
Date: Mon, 17 Mar 86 23:40:22 PST 
To: Carl A Baltrunas <carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet,
	CC:Ring 
Subject: 3650 disk project. 
Resent-from: Dennis Coffey Tymcom-X <DENCOFF@C36> 
Resent-date: Tue, 25 Mar 86 13:50:24 PST 
Resent-to: dencoff@c36 

Remaining items in the 3650 project:                    17-Mar-86

1) Verify that APT10 works.  It is designed to transfer files between the
   TYMCOM-X system and KLDCP DECtapes via the CTY.  Use it to put SA10NW on
   a DECtape.   This requires a standalone KL, brought up in CONSOLE mode.

2) Determine why the paper-tape version of BOTLOD does not work like the version
   in MONBTS.  This requires a standalone KI with 3650 disks for complete veri-
   fication, although most of the work could be done on C24 with Ampex disks.

3) After the KI version of BOTLOD works, put the KL version on the DECtapes
   using APT10.  This can be done during a scheduled downtime.

4) Determine where PAKCP5 fails when writing the secondary HOM and BAT pages.
   This is the only thing keeping the COPY command from working.  This requires
   standalone time on the CPU with 3650 disks, not more than one weekend.

5) Make a single version of PAKCOPY that understands 3675 in blocks and pages.
   This means that the size of the areas used for channel command lists need to
   be determined at run time, not as an assembly option.  This can be done on
   C24 with Ampex disks.

6) Locate the routines in the monitor that assume that all units of a structure
   are the same size.  Determine whether it is feasible to have a DSKB composed
   of a mixture of packs formatted in blocks and in pages.

7) Modify BOOTS to understand all 4 disk types.  Right now, "BOOTS" understands
   3nly, and "BOOTX" understands 3650 pages only.  This requires
   standalone time on C24 with Ampex disks, and can be verified on C26
   during a scheduled reload of the system.

8) Add a command to BOOTS telling it which set of packs to look at.  This is so
   that a one-pack test system can be kept spinning and not confuse the Monitor
   by having two packs claiming to be "DSKB0".  This will have a side effect of
   making BOOTS much faster in loading the monitor, and can be done on 930.

9) Install 2nd upgraded SA10 for continued testing on C24.

10) Add code to PAKCP5 that can rewrite HA/R0 on 3650.  I have disassembled the
   relevant portions of SA10NW.SAV, and will put them in PAKCOP.MAC.  Testing
   requires days of standalone time on C24 with new SA10 and 3650 disks.

11) Merge PAKCP5 with the pages version of 3675 PAKCOP.

12) Determine whether bad blocks really work.  Verify that PAKCOPY assigns
    alternate tracks correctly.  Make it look at the BAT block that SA10NW
    creates.  Make the monitor add new entries when it discovers bad pages.


Return-path: <FLETCHERC@X930.Tymnet> 
From: FLETCHERC@X930.Tymnet 
Date: Tue, 18 Mar 86 16:40:15 PST 
To: jms, osman, carl, dencoff 
Subject: remaining task for 3650 project 
Resent-from: Dennis Coffey Tymcom-X <DENCOFF@C36> 
Resent-date: Tue, 25 Mar 86 13:50:27 PST 
Resent-to: dencoff@c36 

At our TYMCOM-X meeting of 18Mar86 we discussed all the tasks listed
in Joe's mail and reordered them in a slightly different priority.

Priority 1 is to complete all items required by page mode first.
a) Fix Botlod: tasks 1,2,3 from Joe's list
b) Determine why PAKCP5 fails (4)
c) PUt SA10NW on DECtape for KL's
d) Add code to PAKCP5 to rewrite HA/R0 (10)

Priority 2 is to extend software to handle all pages or all blocks by
runtime decision.

a) Make version of PAKCOP that understands blocks and pages(5)
b) Modify BOOTS to understand all 4 disk types (7)
c) Merge PAKCP5 with pages version of 3675 PAKCOP(11)

Priority 3 - items we would like
a) Boots command to choose pack set (8)
b) See if feasible to have structure of mixed pages,blocks (6)

Add to group 1
a)use sector 0 for track replacement in monitor (12


Received: from X930.Tymnet by X62.Tymnet; Tue, 25 Mar 86 3:16:46 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> (Liberty Street in Fremont 116-2512) 
Date: Tue, 25 Mar 86 3:15:46
To: Monitor Group <jms@X930.Tymnet>, Carl A Baltrunas <carl@X930.Tymnet>, Osman
	Guven <osman@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet,
	Bruce 
Subject: Hotline Call. 
Resent-from: Dennis Coffey Tymcom-X <DENCOFF@C36> 
Resent-date: Tue, 25 Mar 86 13:50:36 PST 
Resent-to: dencoff@c36 

24-Mar-85 23:41/JMS
Contact:  Cupertino BLDG C, OPS, Karen, (408)446-7705, Systems 22,23,29,35,36,70

Symptom:  DSKCLN interlock failed when system reloaded.

Diagnosis: INITIA version 22 TELECOPYd to SYS, did not have enough license.

Cure:     Brought up C35 MANUAL, put OP,SY,ST,JL on INITIA.SAV, told Karen and
          Osman to do the same to the others when they are ready.

Note:     The placement of version 22 of INITIA.SAV on SYS was delayed until
          I was on-call, so that I would be notified if any problems occur



Received: from X930.Tymnet by C36.Tymnet; Wed, 2 Apr 86 18:59:39 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Wed, 2 Apr 86 19:00:22 PST 
To: Carl A Baltrunas <Carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey
	<dencoff@X930.Tymnet>, Bruce Ring <bring@C26.Tymnet> 
Subject: XEXEC monitor requirements! 

We need some sort of %KSYS timer... maybe reasonable for TAKEIT to set
and reset this timer instead of doing whatever it does at the moment...
Then when KSYS goes off, TAKEIT kills everything (a la OPSER used to),
then the monitor itself runs a HANGUP job like INITIA/DSKCLN/KMCLOD at
the moment.  This way, the monitor doesn't have to do a while lot, and
we have a "clean" way of taking the system down... (and for BATCH to
know when to stop scheduleing jobs).

/C


Received: from X930.Tymnet by C36.Tymnet; Sun, 6 Apr 86 18:13:31 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 6 Apr 86 17:59:42 PST 
To: Carl A Baltrunas <Carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey
	<dencoff@X930.Tymnet>, Bruce Ring <bring@C26.Tymnet> 
Subject: Hotline Call 

06-Apr-86 15:50 /Carl
Dallas Operations, Tyrone Hill, (214) 637-7435, System 27.

Problem: PFLLDC crashes, system stays up between 4 min and 2 hrs.
	 Also, DIEREH intersperced over the past 3 days.

Analysis: Nothing positive, system was crashing at PFLLDC in CORE1.
	  Both J and Job reported 0.  Stack showed EXCMPE probably
	  fell into USRFLT then xct PFLLDC at USRFLT+3.  I patched
	  the running monitor & system.sav to determine if the STOPCD
	  was caused by null-job or non-zero LDC.. Added PFLNUL in
	  patch area & system crashed at PFLNUL a while later...

Solution: Still unknown, Steve Atwell in Dallas maintenance tried
	  swapping various boards, the latest were E/UBR and address
	  decoders and after the PFLNUL crash the diagnostics finally
	showed a positive fault in the PI clock interrupt and they
	took over to run diagnostics about 18:00.  Will call me at
	home if it starts crashing again after fixing the problem.
	They feel it is definately HW but wanted help in pin-pointing
	the problem.  (they had replaced all of the pager boards and
	the problem still wouldn't go away).

/Carl   2hr, 20 m


Received: from X930.Tymnet by C36.Tymnet; Sat, 26 Apr 86 0:04:59 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> (Liberty Street in Fremont 116-2512) 
Date: Fri, 25 Apr 86 23:43:34 PST 
To: Monitor Group <jms@X930.Tymnet>, Carl A Baltrunas <carl@X930.Tymnet>, Osman
	Guven <osman@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey
	<dencoff@X930.Tymnet>, Bruce Ring <ring@X930.Tymnet> 
Subject: C24 keeps crashing in a two-instruction loop, interrupts off. 

Symptom: RUN is on, PI ENABLED all off, PI IN PROGRESS on channel 3, PI
REQUEST on channel 7, pressing SINGLE INST and hitting CONT shows that the PC
is in a 1, 2, or 3 instruction loop, one of the instructions has zero in the
left half.  Can't do a 147 or a 146 restart - parts of COMMON have been wiped
out.

The loop for (SYS)CRA001 was around USRXIT+17.  The code there hsav been wiped
out by what looks like a stack.

This problem also occurred this afternoon in P19.  The operators were unable
to read-in BOTLOD until after core was cleared.  I have experienced this 
sort of hang with other monitors, but only on C24's hardware.  Could be
flakey pager or UUO trapping.  C24 wouldn't stay up long enough for me to
check (SYS)CRA002.


Received: from X930.Tymnet by C36.Tymnet; Sat, 26 Apr 86 19:03:25 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sat, 26 Apr 86 19:01:05 PST 
To: Carl A Baltrunas <Carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey
	<dencoff@X930.Tymnet>, Bruce Ring <bring@C26.Tymnet> 
Subject: Hotline Call 

26-Apr-86 11:46 and 12:15/Carl
Contact:  CUPC Operations, Steve Carrothers, (408)446-7705, System C26

Symptom:  System crashes attempting all-files with TITO.  Last user done
	  was (BETATESTINT).  Assumption was that a file in BETATESTINT
	  was bad.  Checked with Osman since similar problem occurred on
	  13-Apr-86, system 26.

Problem:  File 041486.SAT in (BILLING10) was bad.  File could be looked
	  at, but not read completely.  CKSUM and copy failed & crashed
	  the system.

	  Examined file with TSTSUP.  File has a hole in it an otherwise
	  appears to be normal.  These files should not have holes in them!
	  Apparently something is deleting a page without updating all the
	  proper file-system tables and thus a hole in this file seems to
	  be causing a crash.

Solution: The file was marked bad by hand using TSTSUP and this prevents
	  TITO from attempting to put it on tape.  The file was renamed to
	  (CRASH:26) for further examination.

/C


Received: from X930.Tymnet by C36.Tymnet; Tue, 29 Apr 86 16:17:11 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> (Liberty Street in Fremont 116-2512) 
Date: Tue, 29 Apr 86 16:13:30 PDT 
To: Monitor Group <jms@X930.Tymnet>, Carl A Baltrunas <carl@X930.Tymnet>, Osman
	Guven <osman@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey
	<dencoff@X930.Tymnet>, Bruce Ring <ring@X930.Tymnet> 
Subject: Found why INFO stopcodes caused recursion is DIE handler. 

When setting up accumulator U to point to the right LDB, the wrong value
was used.  Attempting to output characters to a detached line caused the
recursive stopcode.  (M33)DIETYO.PAT has been installed on 26, it will be
copied to all 10s.			


Received: from X930.Tymnet by C36.Tymnet; Wed, 7 May 86 14:00:45 PDT
Received: from C36.Tymnet by X62.Tymnet; Wed, 7 May 86 14:01:03 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> (Liberty Street in Fremont 116-2512) 
Date: Wed, 7 May 86 13:47:32 PDT 
To: Monitor Group <jms@X930.Tymnet>, Carl A Baltrunas <carl@X930.Tymnet>, Osman
	Guven <osman@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey
	<dencoff@X930.Tymnet>, Bruce Ring <ring@X930.Tymnet>, WRS 
Subject: LOGOUT loops forever if the UFD interlock is busy. 

LOGOUT gets the UFD interlock before cleaning up the directory (deleting TMP
files and such).  If the DSKB interlock is busy for 6 minutes, it jumps to
the label NXTSTR to do the next structure.  Unfortunately, NXTSTR has "DSKB"
hardcoded in, therefore it loops back trying DSKB again and again.

Dennis reported that there were 6 jobs logged in as WRPNET and all 6 were
in SL wait state, had been for some time, and had JACCT making them immune
to TAKEIT.  I located the call to LOKSTR in the listing and put a JFCL in
the error return in (SYS:28)LOGOUT.SHR.  5 minutes later one of the jobs
timed out, hit the JFCL, did its work, released the UFD interlock, and went
away.  Within a few seconds all the other jobs did likewise.

We should either patch LOGOUT on all systems or distribute a new release as
soon as possible.


Received: from X930.Tymnet by X62.Tymnet; Fri, 27 Jun 86 21:49:34 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Fri, 27 Jun 86 21:32:08 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, HelgeM 
Subject: Changed SIMUUF stopcode on F38 from JOB to INFO. 

System 38 experienced many SIMUUF stopcodes today when MIS people GFD'd 
around.  It appears to be whatever program they ran before GFD (or LOGOUT) is
the culprit.  (MAGNUM?)  They have a July 1st deadline have have to have the
system up.  To allow them to stay up, I patched SIMUUF to be an INFO stopcode
that halts the job and lets the system stay up.

	!GET (SYS)SYSTEM
	!DDT
	ERRCON$:   SIMUUF/   XCT USETO0+232
	USETO0+232/   PUSHJ P,DIE
	USETO0+233/   TSZA PG,656546(P2)
	USETO0+234/   SETZ 0(J)   400000+S$INFO,,BUGSTP
	./   SETZ BUGSTP(U)
	^C
	!SAVE (SYS)SYSTEM

I may make this official as patch #11 on all systems after our 1-Jul deadline.


Received: from X930.Tymnet by X62.Tymnet; Wed, 2 Jul 86 16:52:12 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Wed, 2 Jul 86 16:51:31 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, HelgeM 
Subject: Two new patches for the P034/P monitor. 

 "\Patch #11 RESET.PAT 1-Jul-86 JMS \
 "\Make RESET uuo release all SIMIO per-process pages\
 "\This is expected to solve the SIMUUF(FCR.E+3) crashes\
IOCSS:
RELEA5+5/JRST .+2
IOALL+5/JFCL
IOALL+4/MOVEI W,MAXCHN
COMMON:
PATMAP[Q+000100000000

 "\Patch #12 ZAPGOB.PAT 2-Jul-86 JMS \
 "\EBUS ONLY - Do NOT apply this patch to any 2020 monitors\
 "\Cancel the 'need to send gobbler' flag when sending ZAP to TYMNET\
 "\This should stop the KEY=354 base crashes on D65\
SCNSER:
NOTLIN+10/SETZB T1,LDBOUT(U)
 "\Ignore bad port number on message type 3, ignore message type 3\
 "\This will allow John Kopf's new base code to work with the P monitor\
BADPRT+2/CAIN P1,3
BADPRT+3/JRST CNTPRT
TYPTRN+3/AOJA P4,SCNIN1
COMMON:
PATMAP[Q+000040000


Received: from X930.Tymnet by X62.Tymnet; Wed, 9 Jul 86 22:07:40 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Wed, 9 Jul 86 21:59:02 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Update to RESET.PAT and /P-12 

We may be on the right track, but Roy Roskilly's problem showed that the
SIMUUF crashes haven't been completely fixed.  The JRST .+3 was not in error.

The code at RELEA5 uses the UXCTBU macro, which I confused with the XCTBU
macro.  The latter generates one word of in-line code, but UXCTBU produces
	PUSHJ P,DOXCT
	XCT N,[INSTRUCTION]

DOXCT sets the "previous context user" flag (PC.UIO) if necessary so that
the INSTRUCTION refers to the user's address space, even for nested MUUOs.

I have changed the instruction at RELEA5+5 from JRST RELEA5+7 back to its
original JRST RELEA5+10, but left the other two word in RESET.PAT.
NEWMON and all running monitors have been repatched, Roskilly's test on
D56 works now.

Back to the drawing board.		


Received: from X930.Tymnet by X62.Tymnet; Wed, 30 Jul 86 5:22:18 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Wed, 30 Jul 86 5:21:11 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: I'm on call this week. C26 hotline call. 

30-Jul-86 05:14/Joe
Contact:  Cupertino Operation, (408)446-7705, Tom, System C26.

Reason:   System 26 was left running the P034/P33 monitor with instructions to
          call the hotline if the machine crashed (to get a dump if the "hang"
          problem occurred.  The hang has been fixed, but SIMUUF hasn't.  Told
          them to reload from SYSTEM.SAV, no further notification necessary.


Received: from X930.Tymnet by X62.Tymnet; Wed, 30 Jul 86 5:34:34 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Wed, 30 Jul 86 5:33:53 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Correction to previous message 

30-Jul-86 05:14/Joe
Contact:  Cupertino Operation, (408)446-7705, Tom, System C26.

Reason:   The plans were to leave 26 running P034/P33 monitor with instructions
          to call the hotline if the machine crashed (to get a dump if the
          "hang" problem occurred).  The hang has been fixed, but the notice to
          call the hotline was not cancelled.  Anyway, they got a SIMUUF
          stopcode while running the /P19-4 monitor, which means that RESET.PAT
          has not solved the problem.  Told them to reload from SYSTEM.SAV,
          no further notification necessary.  26XP33 still not tested?


Received: from X930.Tymnet by X62.Tymnet; Fri, 1 Aug 86 16:22:06 PDT
Return-path: <osman@X930.Tymnet> 
From: Osman Guven <osman@X930.Tymnet> 
Date: Fri, 1 Aug 86 16:21:03 PDT 
To: Monitor Group <Osman@X930.Tymnet>, Carl A Baltrunas <carl@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: ADD-PACK on C26.. 

BE AWARE!!!!

Operation will be doing a "ADD-PACK" to C26 tonight.
I gave them the correct pakcopy "PAKCP5" and remind
them about INIT commend, doesn't initilize second HOME
and BAT pages but system take care of it during ADD-PACK

-Osman-


Received: from X930.Tymnet by X62.Tymnet; Thu, 7 Aug 86 10:41:24 PDT
Return-path: <osman@X930.Tymnet> 
From: Osman Guven <osman@X930.Tymnet> 
Date: Thu, 7 Aug 86 10:39:44 PDT 
To: Monitor Group <Osman@X930.Tymnet>, Carl A Baltrunas <carl@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Escalation #M03757 

(begin forwarded message)
----------------------------------------------------------------
Received: from EMSTXS.Ontyme.Tymnet by X930.Tymnet; Thu, 7 Aug 86 17:03:41 UT
From: UKNS.LEEWAKE@Ontyme.Tymnet 
Date: Thu, 7 Aug 86 17:03:41 UT 
To: TXS.O/GUVEN@Ontyme.Tymnet 
Cc: TXS.O/GUVEN@Ontyme.Tymnet, QSATS.S/TSUI@Ontyme.Tymnet,
	UKNS.WALLACE@Ontyme.Tymnet, UKNS.LEEWAKE@Ontyme.Tymnet 
Message-id: J72826@Ontyme.Tymnet 
Subject: Escalation #M03757 

=======================  M E M O R A N D U M  =========================

                                           MCDONNELL DOUGLAS INFORMATION
DATE>      07 AUG 86  16:06                          SYSTEMS CONSULTANT

TO>        Osman Guven

COPIES>    S.Tsui B.Wallace

FROM>      Lee Wakefield


SUBJECT>   Escalation #M03757


-----------------------------------------------------------------------


 Osman,

 I sent you a message on system 26, but incase you did not get it I will
repeat my findings here.

 I logged into system 26 for about an hour (40 times or so) and the
system did not crash. I noted one small point that maybe worth a mention,
a few times when the server set read file, not all of the "did not set"
message was printed IE.

 TYMSHARE C26-P034/P19-5 2-28-86
-
-
Did not set WC RC OP GD TD ST JL AC XC WA
-


 I would get :-


 TYMSHARE C26-P034/P19-5 2-28-86
-
-
AC XC WA
-

 I just got your message on sys26 stating the above is a side effect
of the patch untill a better solution is found. Suits me!

   Thanks

    Lee
----------------------------------------------------------------
(end forwarded message)



Received: from X930.Tymnet by X62.Tymnet; Thu, 7 Aug 86 23:42:51 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Thu, 7 Aug 86 23:28:59 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Solved some of the APRFAT and UIL stopcodes. 

Osman and I tracked down the cause some of the APRFAT and UIL stopcodes.
It starts when a user in Great Britain uses a menu server to login and set
status.  Apparently a leave-deferred-echo message catches up to input characters
with all the satellite delays.  In any case, SCNSER sees message type 15 when
it is not ready for it.  On the KLs running P034/P-12, this causes a TTYZNE
info stopcode, with contents of P1 = 15 (the system stays running).  On the
KIs, any INFO stopcode turns off paging and causes a UIL halt stopcode.  On
C26-P034/P19-4, the INFO stopcode runs to completion, but accidently sets the
NXM flag causing an APRFAT stopcode at the next clock tick.

For C26, putting a JFCL at LDEC+2 in SCNSER will avoid the INFO stopcode.
For the KI systems, (M33)INFOKI.PAT will make INFO stopcodes work.

It is possible that the menu server is not strictly following TYMNET-II
protocol in respect to green balls and deferred echoing.  Since it tells the
host it has echoed the characters it is sending (but really doesn't), I
suspect the menu server.  We need to come up with a better way for SCNSER
to handle this problem.

				/Joe


Received: from X930.Tymnet by X62.Tymnet; Mon, 11 Aug 86 21:20:53 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Mon, 11 Aug 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: P034/P33 status. 
521: 16:32 PDT

The file (M33)P33TMP.PAT shows what has been patched to solve the problems
found in the /P33 monitor.  I don't plan to make a /P34 until I find out why
INFO stopcodes set the NXM flag on the KL.  INFO stopcodes work find on the F3,
the KS, and now that SVSETS has been patched, the KI.  It may be in the code
that reads 5  46ueu 47e l possible memory controllers (code borrowed from
TOPS-10 which may not be worth keeping on TYMCOM-X).

			/JOE


Received: from X930.Tymnet by X62.Tymnet; Sat, 2 Aug 86 8:43:35 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sat, 2 Aug 86 8:41:58 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Hotline call for F30. 

2-Aug-86 05:15/Joe
Contact:  Fremont Operation, (415)498-2588, Merina, System F30.

Problem:  UIL stopcode with memory errors.  Deselected sector of memory, then
          got "Inconsistant Hash Constant" and "Too many last logical units"
          and "Logical unit 89 missing from DSKB".

Solution: Went on-site set breakpoints and check the home pages.  DSKB11
          messed up.  Of the 24 nonzero words in the HOM page, all but 5 were
          zero.  The check for missing logical units gets into an infinite loop
          if HOMLUN does not match HOMLOG.  Patched the HOM page on BPA13.
          Came up in CONSOL mode, ran DSKCLN in CHECK mode.  It complained that
          unit 9 was missing RIB pointers.  Put them in using (SPL)FILDDT.
          DSKCLN ran on in check mode, recycled and ran FULL DSkCLN at 8:30am.



Received: from X930.Tymnet by X62.Tymnet; Tue, 19 Aug 86 17:16:46 PDT
Received: from B39.Tymnet by X930.Tymnet; Tue, 19 Aug 86 17:02:44 PDT
Return-path: <JMS@X930.Tymnet> 
From: William R. Soley <WRS@B39.Tymnet> 
Date: Tue, 19 Aug 86 15:18:01 PDT 
To: Joe Smith <JMS@X930.Tymnet> 
Subject: Re: FREE program installed. 
Resent-from: Joe Smith <JMS@X930.Tymnet> 
Resent-date: Tue, 19 Aug 86 17:15:12 PDT 
Resent-to: Monitor Group <JMS>, Carl, Osman 
Resent-cc: FletcherC, DenCoff 
In-reply-to: your message of Tue, 19 Aug 86 14:48:24 PDT

Putting it in the monitor might be nice.  The only disadvantage would be the
loss of the log.  I supose you could put stuff in the stream.  On the other
hand, I'm not sure anybody ever looks at the log.  I'd suggest the following
parameters:

	Number of free jobs desired.
	Minimum idle time required to kill a job.
	Maximum idle time allowed.
	Some method of handling exemptness (JBTPRV?)

Minimum idle would normally be something like 5 minutes.
Maximum idle would normally be 2^35-1.
Number of free jobs desired would be JOBN/10.
Exemptness is the only tricky part.

You wouldn't need a polling interval since you can check whenever somebody
logs in and less than the desired free jobs left.  And also whenever a job
becomes idle for the minimum time and less than the desired free jobs left.

This would be better than FREE does now.

Maybe also consider ports free?

-Bill


Received: from X930.Tymnet by X62.Tymnet; Wed, 20 Aug 86 23:17:24 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Wed, 20 Aug 86 23:12:58 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: BOTLOD works on 3650 

The version of BOTLOD on (M33:70) punches a paper tape that is capable
of reading 3330 formatted in blocks, 3330 formattedn in pages, and 3650
formatted in pages.   It also creates BOTLOD.KL, which is a .SAV file
that needs to be converted to a .A10 file and copied to the KL's DECtape.

		/Joe


Received: from X930.Tymnet by X62.Tymnet; Thu, 28 Aug 86 15:45:41 PDT
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Thu, 28 Aug 86 15:25:37 PDT 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: New Monitor on 33, 34, 36 & 57 

Osman,
  Sue called... Systems 33 and 36 will be scheduled to come up with the
new monitor tonight as you requested.

  Systems 34 and 57 will be scheduled for sometime over the weekend since
tonight would not be a good time for the Japanese customers on those two
systems.
/Carl


From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Thu, 4 Sep 86 13:57:06 PDT 
To: Carl A Baltrunas <Carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X62.Tymnet> 
Subject: Crash mail 

Osman,
   I'm not sure if CUPC is providing this information... but I know that
DALLAS is NOT...  in the crash mail, I'd like them to list what monitor
was running as well as what monitor was loaded after the crash.  Dallas
is telling us the STOPCD and the monitor that is being loaded, but not the
monitor that was running at the time of the crash.

   Does everyone agree that this information is a good idea?

/Carl


Received: from X930.Tymnet by X62.Tymnet; Mon, 8 Sep 86 13:15:24 PDT
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sat, 6 Sep 86 15:19:56 PDT 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: (MONDOC)RIB.DOC 

I updated the HOM page section to accurrately reflect the monitor.
also rib pointers unit/page division is "noted" to cross the half-word
boundary bits 17-35 correctly.
/Carl


Received: from X930.Tymnet by X62.Tymnet; Thu, 21 Aug 86 19:30:49 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Thu, 21 Aug 86 18:56:04 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: MONED1 working again. 

There is a bug in the GETMAP routine, which maps file pages into memory.
Aparently it will not allow more than 12 pages to be mapped.

When MONED1 is reading P034.MEM backwards from the end, it looks for the
latest number like "/P29".  Then it looks for the major version number, such
as "P034/Q".  If the major version number is 12 pages from the end of the
file, then MONED1 dies trying to map SYSID.DAT.  If the major number is more
than 12 pages from the end, then MONED1 dies trying to find it.

My work-around was to duplicate the text "P034/Q" closer to the end of the
file.  To prevent this from happening again, we need to either 1) Fix MONED1
to not use GETMAP, or 2) Release monitors more often.

			/Joe


Received: from X930.Tymnet by X62.Tymnet; Sun, 31 Aug 86 6:16:58 PDT
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 31 Aug 86 6:02:34 PDT 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Hotline Call 31-Aug-86 5:20am 


31-Aug-86 5:20 am /Carl
Caller:   Building C OPS, 408-446-7705, System 26

Problem:  MAPAL1 stopcode (2 - 1st @ 1:00am, 2nd @ 5:xx am) while doing
          the all-files store to tape.

          Both crashes listed problems with memory box 113 error in
          sec 3, port 7 -- (memory reset) BEFORE taking a crash dump.

Solution: Ran TITO/TTR on 2nd tape of the allfiles and did a directory to
          see the last file stored to tape.
          Ran DIRIT with the command "DIR (BILLING10)/UNSORTED" to find
          the file(s) in the same vicinity of the last file stored to the
          tape.  (TTR reported an I/O error before reaching the checksum
          on the last file, indicating that it started the file but DID NOT
          finish the store).
          Ran CKSUM on the "next" presumably good file without error.
          Renamed the "bad" file to (CRASH) and ran LKBDDT to set NFS and NDL
          on the file so that TITO would not try to back it up, and noone
          would accidently try to delete it and have page-deallocation crash
          the system.

Background: Last all-files was done on 8/16/86.  We were running /P19-5 on
            the 15th, /P33-5 on the 16th, and /P34 on the 24th.

            The BAD NEWS is that the bad file was (BILLING10)082686.SAT
            which must have been created after we started running /P34.



Received: from X62.Tymnet by X62.Tymnet; Wed, 17 Sep 86 13:28:21 PDT
Received: from X930.Tymnet by X930.Tymnet; Wed, 17 Sep 86 13:18:06 PDT
Received: from X930.Tymnet by X930.Tymnet; Wed, 17 Sep 86 13:17:04 PDT
Received: from X930.Tymnet by X930.Tymnet; Wed, 17 Sep 86 13:16:08 PDT
Received: from X930.Tymnet by X930.Tymnet; Wed, 17 Sep 86 13:15:21 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sun, 14 Sep 86 23:20:44 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: RX02 floppies on the 2020. 

I found an unsupported program that allows a KS-2020 running TOPS-10 7.03
to read and write 8-inch floppies.  It might be worth it to get an RX02
floppy disk drive and connected it to system 95.  The we could take the KL
BOTLOD program, transfer it to the 2020 via magtape, write it on the floppy,
take the floppy to the data center, and copy it to KLDCP DECtape.

The files are currently in (DEC:930)RX20.INS,RX20.DOC,RTFLX.HLP,RX2SER.MAC
/Joe


Received: from X62.Tymnet by X62.Tymnet; Wed, 17 Sep 86 13:28:38 PDT
Received: from X930.Tymnet by X930.Tymnet; Wed, 17 Sep 86 13:18:18 PDT
Received: from X930.Tymnet by X930.Tymnet; Wed, 17 Sep 86 13:17:14 PDT
Received: from X930.Tymnet by X930.Tymnet; Wed, 17 Sep 86 13:16:17 PDT
Received: from X930.Tymnet by X930.Tymnet; Wed, 17 Sep 86 13:15:28 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Tue, 16 Sep 86 14:53:02 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: BADSAT/MAPAL1 problem located. 

When a bad SAT is detected, the Monitor sets some flags so that it will not
use any of the 9216 pages the SAT refers to.  The system continues, and will
request a full DSKCLN next time to rebuild the SAT from scratch.
There are two ways a SAT can be marked bad.  If there is a read error, then
the count of bad SAT reads in SATBRD is incremented.  If the count from SATCNT
is not correct, then T4 does not match STTFPC.  In all the crashes I looked at,
SATBRD was zero, as was STRDDB+1, which should have pointed to BPA0CB.

Before P034/P21         After P034/P21       ;3/6/86
ADDM T1,UNITAL(U)       ADDM T1,UNITAL(U)    ;Reduce available pages on unit
                        HRRZ T2,UNISTR(U)    ;Point to right STRDDB
ADDM T1,STRTAL+STRDDB   ADDM T1,STRTAL(T3)   ;Reduce avail pages on structure
SETZM STTFPC(T2)        SETZM STTFPC(T2)     ;Zero free page count for SAT

That should have been "HRRZ T3,UNISTR(U)".  The typo T2 to be changed, STRDDB+1
to be zeroed, and MAPAL1 stopcode when the next user got a page fault.
I have patched SYSTEM and NEWMON to be C26-P034/P33-6 and C26-P034/P34-1.

                        /Joe


From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Thu, 18 Sep 86 13:34:12 PDT 
To: Carl A Baltrunas <Carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X62.Tymnet> 
Subject: 2020 reminder 

This is a reminder that the monitor work to standardize the home, bad and
boot pages across all hardware types should be completed.  Joe has worked
on a newer boots for each type, so that should be done.

For the KS, the monitor tools, KSFEFS and friends, are still setup to use
the old page asignments and need to be checked, changed and/or tested to
insure that we do not have any conflicts.

The changes were made to the monitor at the same time SPAGES.SYS was put
into the sources.  I know what I've done, so whomever gets the task of
figuring out where things are, which are done and which are not should
talk to me when they get around to working on this.

BEWARE: ** Until this new set of utilities are working, the new monitor
           cannot be released for 2020 processors. **
/Carl;


Received: from X930.Tymnet by X62.Tymnet; Tue, 30 Sep 86 21:01:44 PDT
Return-path: <JMS@X9 Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Tue, 30 Sep 86 20:55:31 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Bug in (SPL)MAP causes BOOTS to fail! 

I got "READ ERR OR EOF" consistantly from BOOTS after I had used (SPL)MAP
to copy F3XP37.SAV to (SYS)NEWMON.SAV on 930 (and 62XP37.SAV on 62).
If you do "DIRECT (SYS)NEWMON.*/WORDS" you will see that
 file is
exactly 512 words too short, and the size of the good file is a multiple
of 512 words long.  I had to use either COPY or GET/SAVE to duplicate this
monitor.

Carl,
  When is MAP going to be fixed to rescan the command line?  The DUPLICATE
command is already in the monitor waiting for a new DUPLIC.SAV to be put
on SYS:.       /Joe


Received: from X930.Tymnet by X62.Tymnet; Thu, 2 Oct 86 5:42:49 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Thu, 2 Oct 86 5:37:03 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Problems restoring C70's all-files to C24. 

 2-Oct-86 04:06/Joe
Contact:  Cupertino Operations, (408)446-7705, L.T. Smith, System C24
Problem:  He refreshed the disks on 24, and started restoring all files from
          C70's backup tapes.  TITO restored all UFDs, all of SYS, then died
          with stopcode IME in the middle of directory BAILEY on the first tape.
Diagnosis: This happens on all systems - after REFRESH, there is a limited
          number of SATs that can be kept in core and none are written out.
          When the last in-core SAT is filled up, the system dies with IME,
          and you have to run a FULL DSKCLN.  Then the operator has to get
          ALL license (without using REFLAG!) and resume restoring.

Fix:      I ran TSTSUP (it and DECDDT are on SYS on all systems as of 25-Sep)
          and found that page 0 of [1,1].UFD had been overwritten with garbage.
          Probably when the monitor stepped all over itself when the SATs
          filled up.  Told LT to do the following:
          1. Get a directory of the all-files tape to find where SYS ends
          2. Refresh DSKB again
          3. Restore from tape positions 1-<end of SYS>
          4. Run BOOTS to write BOOT.KI to home pages
          5. Take the system down
          6. Bring up the system and run a FULL DSKCLN
          7. Find someone who has an OPER name with all license
          8. Finish restoring rest of all-files

-----------------------------------------------------------------
With the upcoming moves, it is critical that we get a new version of TITO
out to SYS, one with a single change: TITO must type the starting and ending
positions for each directory when doing STORE ALL or RESTORE ALL.

And we have got to come up with a better way of giving the operator all
license when they have to RESTORE ALL.

				/Joe


Received: from X930.Tymnet by X62.Tymnet; Fri, 3 Oct 86 12:22:39 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Fri, 3 Oct 86 12:04:16 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: C24 crashed last night also. It's up now. 

 3-Oct-86 02:06/Joe
Contact:  Cupertino Operations, (408)446-7705, L.T. Smith, System C24
Problem:  BADSAT, [1,1].UFD messed up, etc. when doing RESTORE of C70's files.
          One of the disks had gone off-line, reports of BADSAT on other disks.
Diagnosis: Ran TSTSUP, word 25 of page 1 pointed to [1,1].UFD RIB at page 20712.
          Word 51 of that page pointed to UFD data page for hash 0, it was
          200006,,000012 - the first non HOM page on DSKB3.  That particular
          page was full of ASCII text, TYMSAT engine code in particular.
          Something crumped on the SAT for DSKB3 again allowing the Monitor
          to write over (UFD) again.
Fix:      Turned off RBREAL in RIB pointer (making it 6,,12).  Told operations
          to run another FULL DSKCLN, restore the UFD section of the tape again,
          and resume restoring from where they left off.
Followup: As of noon Friday, TITO was in the middle of restoring (MOORING).
          System uptime 9:35.  PSP reports 952145 pages free, no errors.



Received: from X930.Tymnet by X62.Tymnet; Sat, 4 Oct 86 23:26:56 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sat, 4 Oct 86 23:18:57 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: PAKCP5 works! 

I located the reason why PAKCP5 would not correctly write HA and R0 (Home
Address and Record 0) on 3650's.  There were two off-by-one bugs in the code
I added (unfortunately they did not cancel each other out).

I located the reason why PAKCP5 and PAKCP3 could not write the secondary
HOM and BAT pages.  Code written a long time ago to handle RECSIZ=^D152 used
the wrong half of the accumulator when RECSIZ=PAGSIZ.

I fixed both, refreshed the alternate tracks on unit 315, and successfully
copied 314 to 315.  Now we have two copies of system 24's DSKB14 on those
two units.  Neither one is usable as is, but the copy worked!

The next step is to verify 3675 packs formatted with PAKCP3 in pages work
with CPXKON.  After that, make a single PAKCOP that can handle all three
formats.
				/Joe


Received: from X930.Tymnet by X62.Tymnet; Sun, 5 Oct 86 0:32:46 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sun, 5 Oct 86 0:32:08 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: HOTLINE call from D34 

 5-Oct-86 00:06/Joe
Contact:  Dallas Operations, (214)637-7435, Greg Moran, D34
Problem:  PAM not running, (UTIL)GOPJ would not start it.
Diagnosis: Tried "TAUX PJ:34" from system 34, got "?access barred".
          This means that D34's base (node 6703) is not in the list of
          TYMSHARE nodes.  The supervisor says 6703 is not in the class list
          valid for PJ.
Fix:      Logged into D23, set AC license, "R (SPL)TAUX" and "PJ:34".
          This is a temporary hack until Validations adds node 6703 to list.



Received: from X930.Tymnet by X62.Tymnet; Sun, 5 Oct 86 19:20:18 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sun, 5 Oct 86 12:56:45 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: PJ on D34 

Because GOPJ does not work on D34, I modified (SYS)XEXEC.CTL to start (PJ)PAM
at system startup.   Maybe we should do this on all systems for as long as
(PJ)PAM needs to run.  /Joe


Received: from X930.Tymnet by X62.Tymnet; Fri, 17 Oct 86 0:55:11 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Fri, 17 Oct 86 0:39:37 PDT 
To: WRS 
Cc: Monitor Group <JMS>, Carl, Osman, FletcherC, DenCoff 
Subject: LOGINN version 70.1 installed. 

The latest version of LOGINN has been put on SYS on all systems.  Version 70.1
plugs a security hole from creating a child frame and running LOGINN it in.
The old version of LOGINN did not detect this situation, and unconditionally
read the username from the command port.  Any unpriviliged user could attach
a PTY to the child frame, and send the characters "OPER<CR>" to it.  LOGINN
assumed that the characters came from TYMNET and that the Supervisor had 
verified the password already.  The new version uses the username that the
CREFRM uuo stored in GETTAB tables.

A description of the changes to LOGINN and LOGOUT are found in (OSU)LOGINN.INF
and (OSU)LOGOUT.INF on all systems.    /Joe



Received: from X930.Tymnet by X62.Tymnet; Wed, 22 Oct 86 18:29:13 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Wed, 22 Oct 86 18:15:35 PDT 
To: wrs, Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: B39 crashes. 

System 39 has 2*MAPAL1, 3*EUE, 2*CHTFNF, 2*FILANF, FILAMO+FILAUU dumps.
I have not finished looking at all of them, but here's what I found so far.
MAPAL1 - DDB+DEVRIB has a bogus retrieval pointer, RBREAL (1B1) not on.
EUE - Part of the SETPRV uuo overwritten by an ATB.
EUE - PC matches P1 which is on top of stack, wild POPJ during DEVHNG.
EUE - Part of the CORE uuo overwritten by an FNB.
FILAMO+FILANF+FILAUU can all be caused by an ATB pointer not really pointing
to an ATB.
CHTFNF - Mapped page being unmapped, can't find core page number in CHT.

CRA008(EUE) and CRA009(MAPAL1) occured while running B39-P034/P-13.
Those two dumps look almost exactly like the EUE and MAPAL1 dumps from
running B39-P034/P37.

Maybe we should try expanding the amount of memory that can be used for
creating DDB/ATB/NMB/DRB blocks.  Running C55's monitor on B39 (which is
cut for 80 jobs instead of 127) will have a side effect of making more
core available for these blocks.

			/Joe


Received: from X930.Tymnet by X62.Tymnet; Tue, 28 Oct 86 13:20:16 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Thu, 23 Oct 86 23:17:53 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Hotline call for F28 

23-Oct-86 22:30/Joe
Contact:  Fremont Operations, (415)498-2589, Mike, System F28
Problem:  Incrementing hard read errors, on one particular cylinder.  FSC
          checked the drive, OK, problem moved when pack was moved.
          They already copied out this pack once today, this new duplicate
          has its own set of bad spots.  Note: They were unable to copy the
          pack on F28, and did it on F40 (an IBM system) instead.
          FNDBAD reported 3 files with HRE.
Solution: Told them to rename the files to *.BAD and restore good copies from
          tape.  The files are now (NETSTAT)61014A.BAD, (SRA)PSPDAT.BAD, and
          (MSNTRACK)DUNS.BAD.  The file in NETSTAT is 10978 pages long.
Remark:   I will write a program tomorrow to free up all except the bad pages.



Need to find out why they could not copy the pack with PAKCOP.  They should
not have used an IBM to copy it - the problems they are having now are a
direct result of not having alternate tracks assigned on the destination pack.


Received: from X930.Tymnet by X62.Tymnet; Wed, 29 Oct 86 10:20:18 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Wed, 29 Oct 86 0:22:45 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Why PAKCP5 got hung while accessing unit 340. 

When there is something to do in the block multiplexor list, the SA10 sends
commands to the devices, one right after another.  The 3674 controller will
respond to the first one, and will reject all succeeding commands, saying
"I'm busy now".  PAKCOP sees the busy flag, and sets a bit for the unit saying
that it needs to be restarted when the control unit is available.  When the
3674 finishes that first command, it will cause an interrupt with the CU-END
bit set for for the first unit on the controller (disk unit 300).
PAKCOP checks to see if any other units on this controller got the BUSY status.
If so, those commands are put back into the block mux list and the SA10 is
restarted.  This works just fine for the first 32 disk units on the controller.

The problem is that the bits for units 340-377 are stored in a different word
than the bits for units 300-337.  When unit 340 is busy, it reports 340 busy,
but when the 3674 is available, it reports unit 300.  So PAKCOP got the CU-END
interrupt for 300, saw that 300-337 were not busy, and kept waiting for the
interrupt that said to restart I/O on units 340-337.

I patched the KONEND routine to check for waiting units on all controllers
when any CU-END was detected.  Voila - PAKCP5 saw all the units.

I'm still working on a solution to the contention problem.  I could format
units 300 and 301 together, 340+341, 300+341, and 301+340.  But attempting
to format units 300+340 or 301+341 caused "UNRECOVERABLE ERROR - LENGTH ERROR".

/JOE



Received: from X930.Tymnet by X62.Tymnet; Fri, 31 Oct 86 13:39:18 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Fri, 31 Oct 86 13:37:12 PST 
To: CARL, DENCOFF 
Subject: PPN of SUBMIT changed. 

I changed the PPN of SUBMIT to [3,416154] on 930,62,95 so that it matches the
rest of the systems.  I defined HELGEM to be [3,16154] on our 3 systems.
The LPASSWORD needs to be reset for SUBMIT.   /Joe


Received: from X930.Tymnet by X62.Tymnet; Fri, 3 Oct 86 19:20:15 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Fri, 3 Oct 86 19:10:40 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: (M33)STOPCD.MEM is done. 

The first draft of the STOPCD.MEM is done.  I am soliciting comments as to
what else should be added to the beginning of the file.   /Joe


Received: from X930.Tymnet by X62.Tymnet; Sun, 19 Oct 86 18:40:56 PDT
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sun, 19 Oct 86 18:36:04 PDT 
To: wrs 
Cc: Monitor Group <JMS>, Carl, Osman, FletcherC, DenCoff 
Subject: Searching the PGY table does not flush cache. 

When the monitor wants to find whether a particular disk page is in core,
it does not make a linear search thru the PGY tables.  On a 4-meg system,
the last 12 bits of the disk address are used to index into an array
of heads of linked lists.  One of the PGY entries is the pointer to the
next core page that has the same disk hash.  The average linked list is
a chain of 2 or 3 entries.  After 4 or so compares, the monitor can decide
that the page is not in core, without flushing the cache.    /Joe


Received: from X930.Tymnet by X62.Tymnet; Thu, 6 Nov 86 15:20:16 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Thu, 6 Nov 86 14:53:03 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Names of the monitor, "/A" or not "/A". 

When I tried to create P035, I had a lot of hassles from MONED1.  It refused
to let me specify a monitor name without a slash.  Therefore I skipped ahead
to P035/A.  But then MONED got obstinate.  After much gnashing of teeth, new
SYSIDs were assigned and CNFNxx.MAC updated for all systems.  At that point,
I decided it wasn't worth playing games by MONED1's rules, and decided that
we really want P035 without "/A".

In OSP, the current CNFNxx.MAC files have been amended to say P035.  When
the people in distribution use "LOAD/SAVE:xx035 @MONxx", it will produce
P035 - this is the released monitor version.

However, if the CONFxx.MAC files need to be updated (increase jobs, more
disks, etc), then MONED1 must be run, and this will create P035/A.
Therefore, after the monitors have been distributed, (OSP) will produce
only P035/A.

The next monitor to be released after this one will be P035/B.

			/Joe


Received: from X930.Tymnet by X62.Tymnet; Fri, 7 Nov 86 23:42:38 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Fri, 7 Nov 86 23:39:28 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Did not test 3652 on D25 Friday night. 

System 25 was having problems with 3675 and/or 3672.  They had been down
since 3:00pm our time, and did not get back up until 10:00pm our time.
Since I at least one hour from being ready, I told them bring the system
up for users, we will reschedule another night.   /Joe


Received: from X930.Tymnet by X62.Tymnet; Sun, 9 Nov 86 20:20:21 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 9 Nov 86 18:43:45 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: system 26 problems 

System 26 has had 2-3 bad sat stopcodes and 1 USRUS1 stopcode.  It was
related to me after not finding anything that they were doing an all-files
when each of these occurred.  ... They were on OPER at the time... all the
file sin OPER seem OK... the next directory is OSERANG with one file and
that is OK... the next directory is OSMAN and that seemed ok... I say
seemed, because after I did a directory of OSMAN and ran CKSUM on the first
and last few files  DIR (OSMAN)/UNSORTED  then we got the rib error and
then any lookup for files with the UFD in that directory failed...

The BAD SAT is on BPA3, page 10 ... with a likelyhood that one of the
system ufd pages reside there....

anyway, I told them to PAkCOPy the pack to another drive and see if
the problem goes away with a full dskcln, since the problem seems to
be intermittant... but mostly that drive.   I haven't entertained the
prospect of memory or controller beig bad, since everything else seems
to work fine...

/Carl


Received: from X930.Tymnet by X62.Tymnet; Mon, 10 Nov 86 2:21:25 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Mon, 10 Nov 86 2:20:23 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Status of C26. 

I had them force a fast DSKCLN, then I logged in thru the MUX, SET OPR on one
job, and ran CKSUM on (OPER), (OSERANG), (OSMAN).  They ran TITO starting with
some directory in the N or O range.  The following came out on my OPR terminal:

?INFO stopcode "BADSAT" at 09-Nov-1986 20:11:12
C26, hardware ZZ, KL-1286, base 4200, C26-P034/P37, 9-30-86, M01778
   SAT IO: 000000   STT: 200153   STTFPC: 001133   SATCNT: 001132   SATBRD: 0
Requesting FULL DSKCLN
 ?
? BAD SAT ON BPA4 AT PAGE 10

!psp
DSKB:   103253
BPA4(DSKB7:260007):  SATFAIL:1

SATIO=0 means no read errors detected.  STT=200153 is the address of BPA4's
first SAT page.  STTFPC=1133 is the monitor's last known free page count for
this SAT.  SATCNT=1132 is current count of free pages.  SATBRD=0 means this is
the first reported bad read for any SAT.

SWAMP is complaining that SATCNT does not equal STTFPC.  This means that one
of the F or M bits got set to unavailable (zero) behind SWAMP's back.  Either
some routine marked one of the SAT bits and did not decrement STTFPC, or what
was read from the disk does not match what was in core when SWAMP/PCBIO
decided to swap the SAT page out.

This mangling of a bit in the SAT stored on page 10 has occurred on three
different units on C26 today, it occurred twice on C70 when it moved to 3650
disks, and it occurred twice on D34 when it moved to 3675 disks in Dallas.
That is, it does not appear to be a disk hardware problem, is not limited to
CPXKON, and could be a software or SA10 problem.  Adding the 1/2 meg of memory
to C26 may have aggravated the problem, I don't know.

I went into SYSTEM.SAV (26XP37) and boosted NMSTPC (Number of monitor SAT
PCB's) from 30 (2*15.) to 48 (DISKS*3).  This should cut down on the amount of
swapping of SAT pages.   /Joe

See also (M33)HOTLIN.LOG


Received: from X930.Tymnet by X62.Tymnet; Sat, 15 Nov 86 13:46:28 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sat, 15 Nov 86 13:43:47 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: 3650 problems. 

I've fixed the APRFAT crashes, BADSAT crashes, MAPAL1 crashes, and made
GIVPG1 be continuable.  Now we have SEAR14 crashes.  A summary of these
problems can be found in (M33)3650.BUG.  Sigh.


Received: from X930.Tymnet by X62.Tymnet; Sat, 15 Nov 86 13:47:26 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sat, 15 Nov 86 13:46:29 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: C22 rebuild. 

15-Nov-86 11:35/Joe
Contact:  Cupertino Operations, (408)446-7705, Fred, System 22.

Problem:  Initialization failure - bad UFD.  DSKCLN not running.

          Logged in over shut, found OPER.UFD unreadable, as well as M33.UFD
          and others.  Ran TSTSUP, it reported DEVICE error while trying to
          read page 4 of [1,1].UFD data.  PSP reported:

BPA12(DSKB:220006):  SDATI(CTRL:2 DRV:H Data field ECC uncorrectable) SCONI(
 Unrecoverable data check Count error) SLBN(CYL:102 HEAD:17 RECORD:8) SDAT:5
 HDATAI(CTRL:2 DRV:H Data field ECC uncorrectable) HCONI( Unrecoverable data
 check Count error) HLBN(CYL:102 HEAD:17 RECORD:8) HDEV:44

Fix:      Told them to reformat BPA12 and rebuild system from ASP tapes.


Received: from X930.Tymnet by X62.Tymnet; Wed, 19 Nov 86 1:26:19 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Wed, 19 Nov 86 1:23:22 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, WRS 
Subject: (SPL)DELPAG deletes usable pages from a bad file. 

I freed up about 1000 pages by creating DELPAG and running it on the files
in (BADFILES).  All the good pages were returned to the system, all the bad
pages are locked up in files that have the do-not-delete bit set.
See (SPL)DELPAG.DOC for more info.    /Joe


Received: from X930.Tymnet by X62.Tymnet; Wed, 19 Nov 86 4:20:13 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Wed, 19 Nov 86 3:19:58 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: System 72 

Joe,
  Remember I mentioned that the SETUUO to talk to another job didn't
work on system 72.  Well it still doesn't work.  It seems to work fine
on just about all other systems.  72 is running /P37!

It is very reliably broken on that system.  I wonder if there is something
wrong with the monitor image???

In any case, I'd like it checked... it seems strange that it runs well on
all the other systems.

/Carl


Received: from X930.Tymnet by X62.Tymnet; Thu, 20 Nov 86 2:03:05 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Thu, 20 Nov 86 1:57:32 PST 
To: IPC.L/YARBOROUGH@ONTYME 
Cc: Monitor Group <JMS>, Carl, Osman, FletcherC, DenCoff 
Subject: Status of 3652 testing as of Wednesday night. 

I finally got the system to recognize both halves the 3652 string.  It now
recognizes all 16 units (BPA0-BPA7 & BPC0-BPC7).  I was able to define a
two pack structure using both logical volumes of a single spindle.  The
system came up fine, refreshed DSKB, but hung while TITO was restoring
UFDs to the disk.  I may have lost a disk interrupt or had both units
waiting on each other.  Progress has been made, but I'm stopping for the
night.  I'll let you know if I find anything further.

			/Joe


Received: from X930.Tymnet by X62.Tymnet; Sat, 22 Nov 86 18:00:33 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sat, 22 Nov 86 17:26:54 PST 
To: Craig Fletcher <FletcherC@X930.Tymnet> 
Cc: Monitor Group <JMS>, Carl, Osman, FletcherC, DenCoff 
Subject: 3652 status. 

Found an interesting bug; Missing index register in "MOVEM T1,UNISTS(U)" caused
location 36 to be wiped out, which caused DDT to get an ill mem ref when it
went to type out the location at the next breakpoint.  Fixed that, then got a
stopcode we have not seen before - SWPNIO = swap done to a page that is not
marked for I/O in progress.  I've been reading over FILIO, adding more comments,
and will have something to try Sunday or Monday.  /Joe


Received: from X930.Tymnet by X62.Tymnet; Sat, 22 Nov 86 18:00:37 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sat, 22 Nov 86 17:59:36 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: BADSAT on system 26 every Saturday. 

22-Nov-86 17:44/Joe (Carl did not answer 3 beeps)
Contact:  Cupertino Operation (408)446-7705, David Jorgenson, System 26.
Problem:  Same as 9-Nov - System gets BADSAT when TITO all-files gets to
          directories starting with "O".  Sometime later it gets error reading
          RPG.SHR, then dies with something like USRUS1 stopcode.
Workaround: Whenever system gets BADSAT while TITO is doing the all files,
          let system stay up until either TITO gets error reading files or
          users get error reading files from SYS, then force a fast DSKCLN
          and tell TITO to resume starting after last complete directory saved.


Received: from X930.Tymnet by X62.Tymnet; Sat, 22 Nov 86 18:55:09 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sat, 22 Nov 86 18:42:27 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: BADSAT on system 26. 


Correction: DIdn't answer 1 beep. at 17:44

The previous 2 beebs, were at 6:10 am for system 26, re: BADSAT
  and 6:20 am for system 65, re: bad pack or bad drive causing read errors.

Fred called me back at 10ish this morning, re: more BADSAT problems and
stopcode EUE after the BADSAT occurred.

For system 26, I told Fred to take the system down and run a FAST DSKCLN
and to call me if the problem was not fixed.  Apparently the problem keeps
coming back while trying to do an all-files with TITO.  It had problems
with directories CARL and CNFE this morning.

After the DSKCLN, I told them to continue with the all-files where it left.
Apparently, Joe told them the same for the third call today.  No other
indications were found.


For system 65, I restored SYSTAT and DSKCLN from another system and PSP
indicated a bad drive/pack, so I told them to call TM to look at the drive,
if TM says ok, to try it again, or if it fails, PAKCOP the bad pack and
go from there...  after TM is finished.

PS:  THanks Joe, for catching the 17:44 call.  I was out shopping and
     didn't hear the beep.  Noticed it when I got home... system 26 was
     up running FULL DSKCLN (Dave didn't force FAST) and should be up
     for timesharing by 7:00 pm.

/Carl


Received: from X930.Tymnet by X62.Tymnet; Sun, 23 Nov 86 1:10:13 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 23 Nov 86 0:42:19 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Hotline calls - busy weekend 

(...and it's only saturday night!)

22-Nov-86 19:20 /Carl
Contact:  Fremont Operations via answering service, Bonnie, System F58.
Problem:  System crashed 5 times during previous 8 hours plus a few in
          the morning: 7:48 BADSAT, 11:21 THUNG on all drives + BADSAT
          on unit 2, 15:03 FILAUS stopcode, 17:37 SEAR14 stopcode, 17:44
          FILAUS stopcode.   ... (additional crashes, but times not
          recorded by me, operations has the times)...  more SEAR14 and
          FILAUS stopcodes.

          All files save in progress, incremental backup save in progress
          and the last crash, both incremental and all-files in progress.

          Last files to tape foreach were: (NETSTAT)61119B.DMI, 61105A.DMS
          and 61114C.DMS.  These files were ok.  Files recorded in the
          NETSTAT directory just before and after each of these appeared
          to be ok except 61113B.DMS which caused the system to crash with
          FILAUS during my examination.  I renamed it to (CRASH) and set
          NDL and NFS bits.  TThe NETSTAT directory has 470,000+ pages in
          500+ files, many of the DMS and DMI files are 5000 to 10000 pages
          each.  (CKSUM takes a long time!!!)   I mention this, because we
          are badly in need of a utility program which reads the ribs of
          all files, or all files in a directory, looking for bad pointers.
          DSKCLN is supposed to do this, and fix them (or mark them bad)
          and apparently it doesn't!

Plan:     I've told operations to restore the file and continue with both
          the incremental backup and the all files, and to call me if they
          crash with FILAUS.

          I told Bonnie to have operations call us every time they get the
          FILAUS stopcode, so that we can locate the bad file immediately.
          If they get a BADSAT error, or BADSAT crash, that they should
          (on an error, not a crash) continue running until TITO complains
          about reading files (or until they cannot access system files)
          and then to recycle and force a fast DSKCLN.  I told her that we
          need NOT be called for each BADSAT... Sending mail is enough until
          further notice.  We are aware of the problem and are working on a
          fix.

(it's been a long weekend) sigh.
/Carl


Received: from X930.Tymnet by X62.Tymnet; Mon, 24 Nov 86 0:20:16 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 23 Nov 86 23:20:38 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Hotline calls 

** Turnover to Osman - in case you get calls **

Mostly system 26 and 58.  Same problems BADSAT (26 & 58) and FILAUS (58).
For the bad sat, operations has pretty much been told to proceed until they
have problems accessing system files such as RPG, LOGINN or LOGOUT.  For
FILAUS, they have been told to call us immediately, so that we may look at
the crash and the corresponding backup or all-files tape (TITO) to see what
file caused the crash.

26 had a few problems with BADSAT during the all-files, and they reloaded to
run a fast DSKCLN (forced over FULL) to clear the problem.

System 58 had me on the phone off and on all day with FILAUS and BADSAT trying
to do the daily backup and the all-files.  Username NETSTAT which has over
450,000 pages in 500+ files, many of which are 5k-10k pages in size, had many
bad files which caused FILAUS.  Some were fixed by the DSKCLN which ran, others
have been renamed to (CRASH) with NDL and NFS set.

As of this message, the all-files finished and they were working on the daily
backup, in directory NETSTAT.  I hope yopu don't have any calls...  /Carl


Goodnight.


Received: from X930.Tymnet by X62.Tymnet; Tue, 2 Dec 86 8:31:34 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Tue, 2 Dec 86 8:28:10 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, Bill Soley <WRS@B39.Tymnet> 
Subject: (MPL)CTYLOG reads CTY buffer. 

I defined GETTAB 127,,11 to return the pointers to the CTY buffer.  The
program (MPL)CTYLOG reads the log and displays it in real-time.  It works
in P035/A04 and later, see (MPL:930)CTYLOG.MAC for details.    /Joe


Received: from X930.Tymnet by X62.Tymnet; Tue, 2 Dec 86 14:38:29 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Tue, 2 Dec 86 14:03:57 PST 
To: IPC.L/YARBROUGH@ONTYME, IPC.E/ROOP@ONTYME 
Cc: Monitor Group <JMS>, Carl, Osman, FletcherC, DenCoff 
Subject: 3652 deployment delayed until 3650 BADSAT problem solved. 

I now have a monitor that talks to 3652 disks as well (or as bad) as it
talks to 3650 disks.  The test system in Dallas is exhibiting the same
symptoms as C70, C26, and F58 did when trying to rebuild the disk system.
The SATs are getting clobbered, and the monitor then thinks it is OK to
overwrite the UFDs.  C26 and F58 experience similar problems during normal
operation, not just during the rebuild process.

Until the 3650 BADSAT problem is solved, no additional systems should be
transferred to 3650/3652 hardware.  I am hereby relinquishing use of the
test system in Dallas, and will be using the test system in Fremont.

After the next system is moved from Cupertino to Dallas, I may have a need
for further testing of 3652 disks, but for no more than two days.
I will keep you posted.

			Joe Smith
			JMS@X930
			TXS.J/SMITH@ONTYME


Received: from X930.Tymnet by X62.Tymnet; Sun, 16 Nov 86 4:58:36 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sun, 16 Nov 86 4:57:52 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Question about REBUILD proceedure. 

16-Nov-86 04:45/Joe
Contact:  Cupertino Operations, (408)446-7705, L.T. Smith, System 22.
Problem:  When rebuilding the system, do all the packs have to be the same?
Answer:   ASP dumps DSKB0, then DSKB1, etc.  It does not matter if DSKB0 has
          moved from BPA1 to BPA7.  If the system had 14 packs when ASP was
          run, then it must have 14 packs when restoring.  The physical
          location of the packs is irrelevant.


Received: from X930.Tymnet by X62.Tymnet; Sun, 16 Nov 86 18:46:36 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sun, 16 Nov 86 18:45:14 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, William R Soley <WRS@B39.Tymnet> 
Subject: Oper password file loses license when restoring from backup tape. 

16-Nov-86 18:15/Joe
Contact:  Cupertino Operations, (408)446-7705, Vijay, System 22.
Problem:  Could not set license after restoring from 14th's incremental.
Diagnosis: TITO complained about two files:
          (SYS)DRWSPR.EPO not given license WC
          (BOFANET)ONTYME.SAV not given license AC (SY,HF,RF,WF)
Fix:      Ran SETE then SETLIC on those two files.  System now up.
Note:     Carl and I have been discussing ways of giving license to TITO
          instead of to the operators.  We need to do something about it.

In this particular case, ASP restored all files with correct license.  Now if
TITO had all the license in the world, restoring files to SYS would not lose
license.  Giving license to TITO would be OK if
  1) TITO threw away license if not run by OPER.
  2) TITO threw away license if the TRANSLATE command was given.
  3) TITO kept license only for "RESTORE ALL" and the system number in the
     header matched the current system number.  (Operators would still need
     do set RF on their frame to do a STORE operation.)

This approach would not work if (SYS)TITO.SAV got wiped out and they had to
run TITO from tape.  Right now, only REFLAG gives the operator license when
running from tape.  We could make TITO use "SETE 777777,-1" to get all license
without having to take the system down, but it may be difficult to ensure that
only TITO gets to use it, and not some malicious program.

Or we could make it a restriction that if TITO gets wiped out, they have to
take the system down to get license from ONCE.  Then we could add a "TITO"
command to ONCE that takes device name as an argument (such as SYS: or FTA0:,
etc).  This command would tell ONCE to set CONSOLE-MANUAL mode, log in OPER
(without requiring ^Z L OPER), give the process all the license in the world,
then run TITO from the specified device.  This would avoid DDT and REFLAG and
give them a one-shot license for restoring files to SYS.  Once SYS was
restored and DSKCLN run, they could use the licensed copy of TITO on disk to
restore the rest of the files.

Any comments?
                                        /JOE


Received: from X930.Tymnet by X62.Tymnet; Sun, 16 Nov 86 19:55:03 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 16 Nov 86 19:35:12 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Restore answer... 

Yes, ASP restore is a structure restore... there not only must be the
same number of packs, they must all have an intact structure (built with
DEFINE and then REFRESH, or left from a previous set of system packs).

What is on those packs doesn't matter.  For example, a system 25 pack-set
could be used for a system 27 rebuild, as long as the system is brought
up as system 27 (change system number) in case ASP checks things like that
in the tape headers.

/carl


Received: from X930.Tymnet by X62.Tymnet; Sun, 16 Nov 86 19:55:08 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 16 Nov 86 19:43:29 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: TITO license 

I'm still in favor of the  SETE 777777,-1  idea, although make it only work
via UUO from usrname OPER.  We put that into TITO so that it can setup its
license correctly, but only have it set the license if the given command is
STORE ALL and no translates have been enabled.

I also like the ONCE command TITO or REBUILD to come up in console mode.
This would set both REFLAG and the DOCTY flag to be used whenever a rebuild
operation is needed, either ASP or TITO...

I think we need to write up a document with the changes in it, so we can
hammer at the pros & cons of each situation.  We've discussed various parts
of various proposals on this topic many times, and each time, we overlook
a situation that we don't feel is important, which after some thought is
the main reason none of theses schemes has ever been implemented.

I'm creating (M33)OPRLIC.INF for this purpose.
/Carl


Received: from X930.Tymnet by X62.Tymnet; Wed, 26 Nov 86 3:40:13 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Wed, 26 Nov 86 3:26:11 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: FILAMO investigation 


FILAMO on system 34 (6), 22 (1), 54 (1) and 23 (1) are all identical.
It appears to be very reproduceable, albeit not on command.

Symptoms appear to be the system crashing due to decrementing the maximum
write count for an ATB with a zero count (causing an overflow to -1).
The running job is XEXEC in each case, executing the exact same instruction:

  FRMOP 1,BLOCK    where 1/ 23,,child-job  and block contains 7.


XEXEC is in fact reading the HALT STATUS BLOCK of a job which it received
an exit-in-child or logout-in-child interrupt, which appears to be gone
by the time the system crashes, although the FRMOP doesn't complete.  It
appears that the .FOHSB function 23 may have an interaction problem with
jobs in the process of logging out.  The job in question has been MAILER
running in username MAIL.  The only discrepancy I found was that the job
state fo the target frame said NULQ, and the queue table said STOPQ.

-----------------------

FILAMO, FILANF on system 39 appear to be caused by a different problem.
In both cases (3 saved crashes) the value of SYSCOR = 0, instead of having
a link-pointer address,,0.  This indicates that we are running out of
file-service free core blocks.   SImply raising the amount may solve the
problem, but I thought that there was an interlock to wait for free-core
CB wait may do it... FC is the otehr free-core.

I will continue to look into this...  it should not die due to running out.
Unless... all dormant blocks are reused, and there seems to be a good list
of dormant atb/drb blocks.

/Carl


We may want to put in an info stopcode which warns of frecore low?

/Carl


Received: from X930.Tymnet by X62.Tymnet; Wed, 26 Nov 86 18:32:29 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Wed, 26 Nov 86 18:24:02 PST 
To: IPC.L/YARBROUG@ONTYME 
Cc: Monitor Group <JMS>, Carl, Osman, FletcherC, DenCoff 
Subject: 3652's working as 3650's, but problems with 3650's. 

Status of 3652 project as of Wednesday afternoon:

I have a monitor that works with a string of 3652 disks, treating it as if
it were two strings of 3650 disks.  That is, the problems caused by the
differences between the 3652 and 3650 model disks have been taken care of.

But when I try to build a two-pack system from TITO all-files, I am still
having problems.  These problems are the same as the ones we are experiencing
on the other systems that have the new SA10 and 3650 disks, systems 26, 58,
and 70.  We plan to have a new KL in Fremont hooked up over this weekend.
Anything we discover here in Fremont on this new system will be directly
applicable to the 3652 systems.  Therefore, as soon as we get the 3650
monitor working right, this will be the 3652 monitor as well.

Osman and I will look at the problem over the weekend, and will let you know.

			Joe Smith
			TXS.J/SMITH@ONTYME


Received: from X930.Tymnet by X62.Tymnet; Wed, 26 Nov 86 22:58:19 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Wed, 26 Nov 86 22:49:57 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey
	<dencoff@X930.Tymnet>, William R Soley <wrs@C39.Tymnet> 
Subject: XEXEC and MAILER 

The FILAMO crashes seem to be on the rise... systems 70 and 55 each
caught one today sometime after my newest XEXEC %1(200) was installed.

Since it's apparent that the problem is aggravated by XEXEC doing the
frmop to look at the halt-status-block of the MAILER job as the mailer
is logging out, and this reliably crashes system 34 when MAILER runs,
I have removed MAILER from the queue on ALL, repeat ** ALL ** systems.

(Well, most.  It is still running on X62, X95 and X930!)

I will see if I can put a work-around into XEXEC early next week, and
put MAILER back into the queue.

--------------
Note:  MAILER is still being run, each time someone wants to send mail
about the batch job being run, so (bill?) if this is enough to take care
of the queued mail files (MAIL)*.Q let me know, and I'll leave mailer
out of the queue (since it's being run every so often anyway).

/Carl


Return-path: <osman@X930.Tymnet> 
From: Osman Guven <osman@X930.Tymnet> 
Date: Sat, 29 Nov 86 2:13:27 PST 
To: Monitor Group <Osman@X930.Tymnet>, Carl A Baltrunas <carl@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
Subject: Test system in Fremont F24 is up.. 
Received: from X930.Tymnet by X62.Tymnet; Sat, 29 Nov 86 2:20:19 PST

Joe..

o  I will make sure B39 comes up with NEWMON, after the ASP
   dump on Sunday.

o  System F24 is up with F58's ASP dump of 11/14. FULL DSKCLN found
   many bad files, about 40. There were some bad files neither DSKCLN
   or anything else complained being bad, but they were. Like LOGINN,
   CRSHID which job 3 was keep getting error when INITIA starts to
   run CRSHID, PEAK which is still bad left it like that, I thought
   you might want to look at it.

o  24XA03 Monitor doesn't see anything past BPA7. So system up with
   70XP37.

o  Did not do any testing like TITO, CKSUM, FILLUP yet.

-Osman-


Received: from X930.Tymnet by X62.Tymnet; Mon, 1 Dec 86 7:28:04 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Mon, 1 Dec 86 7:27:15 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: I am on-call this week. 

01-Dec-86 06:59/Joe
Contact:  Cupertino Operation (408)446-7705, L.T. Smith, System 39.
Problem:  CPU stopcode APRFAT when NEWMON loaded.  CDP=Cache Parity error.
Fix:      Reloaded NEWMON.  B39-P035 up at 07:04.

01-Dec-86 06:59/Joe
Contact:  Fremont Operation (415)498-2588, Mary Larios, System 58.
Problem:  System crashed with many BADSAT, GIVPG1, FILAUS.
Fix:      Ran DSKCLN, system now up.


Received: from X930.Tymnet by X62.Tymnet; Mon, 8 Dec 86 1:49:44 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Mon, 8 Dec 86 1:48:32 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, Bill Soley <WRS@B39.Tymnet> 
Subject: Located a bug in DECRMV(FILAMO). 

I believe I have found the cause of the FILAMO crashes at DECRMV+13.

Before
	PUSHJ	P,GETATB	;! GET ATB ADDRESS IN T1
	MOVE	P2,T1		;! SAVE IT IN P2 FOR LATER
	PUSHJ	P,GETCBR	;! GET CB, DIDDLING WITH ATBS
	TLZN	P3,LMPMXW	;%! MAX WRITE ON FOR THIS SLOT?

After
	PUSHJ	P,GETCBR	;! Get CB now so ATB won't disappear
	PUSHJ	P,GETATB	;%! GET ATB ADDRESS IN T1
	MOVE	P2,T1		;%! SAVE IT IN P2 FOR LATER
	TLZN	P3,LMPMXW	;%! MAX WRITE ON FOR THIS SLOT?

In the BEFORE code, if the monitor reschedules between GETATB and GETCBR,
then the other job could come in, GETCBR, and delete the ATB.  When the
original job is allowed to run again, T1 and/or P2 would point to a
nonexistant ATB.  Or, if the original job was really delayed, then T1/P2
would point to somebody else's newly created ATB and prematurely release it.
Even worse, if a new DRB or NMB was allocated where the old ATB was, the
wrong fields would get modified, mangling the in-core database.

				/Joe


Received: from X930.Tymnet by X62.Tymnet; Mon, 8 Dec 86 2:05:04 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Mon, 8 Dec 86 1:53:34 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: FILAUS may be caused by whatever causes BADSAT. 

An SPT entry is made whenever two jobs map in the same page of the same file.
When the routine that sets the M bit (because the page is now mapped into
core) finds the M bit already set and no SPT entry exists, it then creates
an SPT entry.

If an M bit is erroneously set in the SAT, then an unexpected SPT entry will
be created.  When the last legitimate mapper of the file is done with the
page, the use count is decremented.  FILAUS is detected whenever the use
count goes to zero and an unexpected SPT entry exists.

SPTs should never be created when the system is up MANUAL.  I believe the
FILAUS problem on 24 is reproducible even when MANUAL.  If so, setting a
breakpoint at CRESPT should point to the culprit.  I will test this Monday.

			/Joe


Received: from X930.Tymnet by X62.Tymnet; Wed, 10 Dec 86 19:05:58 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Wed, 10 Dec 86 19:03:53 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Why previous message from CARL was garbled. 

Fixed in F3XA05 - MONBTS: Zap the F3's base when doing a 146 restart.
Otherwise the base won't sync right, and we will get garbled characters
on aux circuits and mail from 62 to 930.   /Joe


From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Thu, 11 Dec 86 2:40:34 PST 
To: Carl A Baltrunas <Carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X62.Tymnet> 
Subject: .IANIC Notice-in-child 

Comments please...

1)  Add new parent-child interrupt .iaNIC to cause an interrupt in the
    parent frame whenever anyone attempts to evict the child frame.  The
    child will remain unscathed until the parent issues an evict uuo to
    the child.  This new interrupt cause is similar to Exit-in-child and
    is set by the parent frame.

2)  Change the monitor to check for the new trap before issuing NTQ to a
    frame and if set and the calling frame is NOT the parent, issue the
    new interrupt to the parent, otherwise perform the current checks and
    the current actions.

3)  Add flag bits to the evict uuo to (1) "ignore" the new interrupt and
    perform as it does now (returning any .iaNTQ channel if enabled) and
    (2) only check for any .iaNIC channel that may be enabled.  The older
    programs which do not set the new flag bits will return the channel
    number associated with either .iaNIC or .iaNTQ if set, so that the
    desired functionality may be achieved.

    The evicting program really need not know, but it mght be nice
    for specialty programs which wonder WHY they cannot kill a job!

    TAKEIT could use the old way the first time, and if no response set
    this new bit, and if still no response kill it as it does now.

    ================================================================

By providing this mechanism, we no longer need to know if a particular frame
is considered a "batch" frame or not.  If the interrupt is enabled, it is a
batch frame, or there is a knowledgeable parent around to take care of the
child.  "Any" child frame could be considered "batch".


/Carl


Received: from X930.Tymnet by X62.Tymnet; Fri, 12 Dec 86 19:03:03 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Fri, 12 Dec 86 18:54:12 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, Bill Soley <WRS@B39.Tymnet> 
Subject: Why nothing ever appeared in the BAT pages. 

I found out why the monitor never wrote anything in the BAT pages when
it found a page with an I/O error.  The routine UPERBT in CORE1 read in the
BAT pages, but would not update them if they failed the consistancy check.
Since ONCDSK/REFSTR never set the self pointers, the consistency check always
failed.  I fixed this by changine POPJ P, to PJRST WTBOTH at CHKBAT+5.
"BAMPHF!" BAT pages now work!.  I ran CKSUM on the 11 bad files in BADFILES,
and we now have 11 known bad spots marked in the BAT pages.

Now if DSKCLN honors the BAT pages, and sets the F bit for them even if they
are not part of a file, then we won't need to keep the RIBs around anymore.

/Joe


Received: from X930.Tymnet by X62.Tymnet; Fri, 12 Dec 86 23:22:03 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Fri, 12 Dec 86 23:17:06 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: ASP restore does not work on 3650 disks. 

After the ASP restore finished on 58, DSKCLN reported 100 files that had
lost data.  It appears that the RIBs of those files got overwritten.
CRSHID and TAKEIT bombed because page 7 of SAISGA.SHR was overwritten with
ASCII test, some sort of formatted accounting data.  I'm having them try
rebuilding from the ALL-FILES, using 58XA07.   /Joe


Received: from X930.Tymnet by X62.Tymnet; Sun, 14 Dec 86 10:03:15 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 14 Dec 86 9:54:07 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Hotline call C70 FILAUS 


14-Dec-86 09:10 /Carl
Contact:  CUPC Operations, Barbara (408)446-7705, System 70

Symptom:  FILAUS during All-Files.  Directory (NETDATA).  Both tape directory
          and CRA014 report the bad file as (NETDATA)MCRF.OCT whcih crashed
          the system when I deleted it.

Solution: Had operations do a FAST DSKCLN and restore the file from backup.
          Since C70 is still running /P37 we still need to be involved in
          verifying what the bad file was/is.  I told Barbara that they can
          do a directory of the tape and if a CKSUM of the last file on tape
          crashes the system, to delete the file, run a fast DSKCLN, restore
          the file and continue (without calling us).  If the CKSUM does not
          crash the system, call us so we can find the bad file.

Joe?  Can we put up a newer monitor which prints out the filename on FILAUS
      so operations can always find the bad file without wasting time...

/Carl


Received: from X930.Tymnet by X62.Tymnet; Mon, 15 Dec 86 20:08:35 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Mon, 15 Dec 86 19:49:46 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: DSKCLN looks at BAT pages. 

The current version of DSKCLN does correctly process the BAT pages.
However, the version of PAKCOP on M33 and the old version on SYS do not.
Only PAKCP5/PAKCP3 interpret the numbers in the BATs as being page numbers
like they should.  PAKCOP reads the page numbers and thinks they are block
numbers.  This means that known bad spots on the disk will be reported and
require manual intervention instead of being bypassed automatically during
a COPY operation.  No big deal.

/Joe


Received: from X930.Tymnet by X62.Tymnet; Wed, 17 Dec 86 21:35:07 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Wed, 17 Dec 86 21:23:05 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Hotline call, F58 & F28 


17-Dec-86 19:05/Carl
Contact:  Fremont Operations, (415)498-2588, Bonnie, System 58.
Symptom:  Accounting/MIS people could not run 1022.  This problem had
          occurred previously and Rick Daniels said to have them call
          us about it.
Problem:  (SYS)1022.SHR was protected ALL RD NO.  I changed it to ALL
          RD RD and I was able to run it without license.  I don't
          know for sure if this solves MIS's problems but we will see.


17-Dec-86 20:15/Carl
Contact:  Fremont Operations, (415)498-2588, Bonnie, System 74.
Symptom:  MAGCON doesn't work right... keep getting checksum or parity
          errors when trying to generate tapes.

          I tried MAGCON, TITO and BACKUP and at 1600 BPI, all three had
          problems with tape write parity errors (or the equivalent). I
          then tried TITO at 6250 and it worked fine.  This confirms that
          Operations has had NO problems with the backups and all-files.

Problem:  Tape drives work fine at 6250, not at all at 1600. Have FSC
          look at the hardware, probably in the formatting circuitry if
          they are anything like our Kennedys, they use they use two sets
          of circuits, one for high and one for low density.


Received: from X930.Tymnet by X62.Tymnet; Tue, 13 Jan 87 16:58:56 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Fri, 19 Dec 86 13:43:12 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: KAF on F28. 

I have attacked the symptom (but not the cause) of the system dying with
KAF (Keep Alive Failure) when attempting to recover from tape read errors
at 1600 bpi.  See MARKER for comments - the real culprit has yet to be
located.   /Joe


Received: from X930.Tymnet by X62.Tymnet; Tue, 13 Jan 87 16:58:59 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 21 Dec 86 6:30:17 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Hotline Call: System F58 

21-Dec-86 05:40 /Carl (Saturday)
Contact:  Fremont Operations, Mary (415) 498-2588, System F58.
Problem:  System had THUNG errors earlier and related disk problems, so
          FSC had the system to check things out.  When FSC gave the
          system back, they left some of the spare drives powerd up and
          on-line.  They told operatios that they didn't change anything
          so operations started to bring the system up.

          This resulted in missing or inconsistant pack-set id on one
          or more of the spare drives.  BPA7 was formatted a DSKB0, so we
          had two dskb0's, system wanted to know if they wanted to init
          the BAT pages, etc.

Solution: I had them stop the machine, bring it to boots... check the CTY
          output for the previous "good" load of the system, and verify
          which packs should be spinning and which ones should be off-line.
          After that, I had them follow the procedure for missing/inconsist-
          ant pack-set id (i walked them through DDT).  System came up and
          is running a FULL DSKCLN at this very moment.

/Carl


Received: from X930.Tymnet by X62.Tymnet; Tue, 13 Jan 87 17:01:31 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Tue, 6 Jan 87 20:37:36 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: 35BP5A ready for testing. 

(OSP)35BP5A.SAV is the same as 35CPXA/35BPXA with the following exceptions:
It uses BP5KON.MAC instead of BPXKON or CPXKON
It uses CO5MOD.MAC instead of COMMOD
CONFIG has been patched to X24-P035/A

It will only talk to 3650 in blocks (25 blocks per track instead of 18) and
has 2 strings defined on BPA.  32BP5A.SAV is similar, it has 1 string on BPA
and 1 string on BPC.  See (OSP)COMMOD.SCM and (OSP)BPXKON.SCM for details.


Received: from X930.Tymnet by X62.Tymnet; Tue, 13 Jan 87 17:01:36 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Tue, 6 Jan 87 20:48:56 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Listings of BPXKON 

I have created (M33)BPXKON.LST and (M33)CPXKON.LST for you to look at.  /Joe


Received: from X930.Tymnet by X62.Tymnet; Tue, 13 Jan 87 17:02:23 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Thu, 8 Jan 87 16:33:30 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: List of entry points in CPXKON. 

The file (M33)DISKIO.MEM documents the entry points between FILIO and
BPXKON/CPXKON/RMXKON/APXKON.  /jo


Received: from X930.Tymnet by X62.Tymnet; Tue, 13 Jan 87 17:02:27 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Thu, 8 Jan 87 18:37:59 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, wrs 
Subject: Wonderful F3TSER (revisited) 

Carl and I discovered that if you read a record that is more than 15 pages
long on an F3, then some poor user's UPT gets wiped out.  The unfortunate
job either can't run anything at all, or every command typed will do a
CONTINUE on the current core image.  Anyway, he tried to read 24 pages with
ASP, and that mangled my context pages to the point that everything I typed
threw me back into SED.

%UPS=771000, %ONC=752000, %UPS-%ONC=^D15 pages.   Wonderful


Received: from X930.Tymnet by X62.Tymnet; Sun, 18 Jan 87 1:24:28 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sun, 18 Jan 87 1:12:54 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: RECOV.SYS lists only files that are completely wiped out. 

Currently, the only files mentioned in RECOV.SYS are those that have been
eliminated because their RIB could not be found or the RIB was a multiply used
page.  For every file listed in RECOV.SYS, there is at least one other that
has been damaged.  Files that have been wounded but not killed are not being
reported.  See (JMS)RECOV.TXT for more info.


Received: from X930.Tymnet by X62.Tymnet; Sun, 18 Jan 87 1:36:39 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Sun, 18 Jan 87 1:31:24 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, WRS 
Subject: Soley's modified RPG has been installed on all systems. 

Our users no longer need to make the distinction between "mail waiting" and
"[mail waiting]".  The MAIL command can be used to read either.  RPG now
reads TUMS mail if there is no RPG mail.  Thanks to Bill for this interrim
solution - Carl and I hope to eliminate RPG mail someday.   /Joe


Received: from X930.Tymnet by X62.Tymnet; Sun, 18 Jan 87 1:53:05 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 18 Jan 87 1:35:22 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: DSKCLN actions, BDA 

Re: BDA bit
    My viewpoint on BDA is that we should make it stand for what we have
thought it meant.  This file has been found bad by the damage assement
program, DSKCLN.  At present it means the entire file has been eliminated.
I believe that it is reasonable to use BDA to mean DSKCLN has found anything
wrong with the file.
    This includes bad rib pointers, hard read of a rib page, multiply used
pages, and even bad allocation (although it is possible to have RIBALP set
to a different value than RIBSIZ+<ribs> specifies.  RIBALP specifies the
allocated file size including holes.)
    Things such as wrong UFD time and ufd quota fixups can continue to be
'invisible' to users, since these are expected to be fixed the next time
the user logs in or dskcln runs.

Re: DSKCLN for release...
    To attain our goal of 3650 block mode within a secure environment, we
should modify DSKCLN to put all files which it finds bad, (that is any that
we feel BDA should be set), into RECOV.SYS and print them out on the CTY
as well.  Exactly what happens to multiply used ribs or ribs with hard read
errors is open to discussion.  The main problem with ribs that have hard
read errors is that DSKCLN will mark as FREE any pages in the unreadable rib
and when the rib becomes readable, those pages will be multiply used.
    For multiply used pages, we could give the page to the most recently
created file (if that information were available... it isn't since a newer
creation date is only a data field with a higher number stored in it, not
a real internal creation date).  Otherwise our only solution is to mark it
bad and not to let anyone access that page until all pointers to that page
have been deleted.

/Carl


Received: from X930.Tymnet by X62.Tymnet; Tue, 20 Jan 87 7:29:58 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Tue, 20 Jan 87 7:23:48 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Hotline calls 


System 22 at 8:45 pm, Monday.  Keeps crashing....

System 58 at 6:00 am, Tuesday.  Hole messages on CTY.

I ran newest DSKCLN in checking mode to re-generate a list of files
for system 58 to restore....

System 22 just keeps crashing... something is dreadfully wrong.
To eliminate the DSKCLN as a cause, I put the OLD version which is
36 plain... back in sys.  It is also there as DSKCLN.S36.  The newest
one is in (OSU:32).

Oops... I meant (OSU:22)   ... I'm fading fast... need to get to sleep.

I spent most of the night trying to track down the 22 stuff using DSKCLN
to trap the bad files so they could be foun as bad.  Apparently the system 
still crashes every so many hours... I suggest trying an older monitor now
that the older DSKCLN is back on SYS:22.  Anything... the current behavior
is unacceptable.

/Carl

PS:  I'm going to bed... please call me around 11 to wake me so we can all
discuss 22 more.... we need to do something... and fast.  /Carl



Received: from X930.Tymnet by X62.Tymnet; Tue, 13 Jan 87 17:02:45 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Mon, 12 Jan 87 0:24:27 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Oncall 

I am on call as of 25 minutes ago.  I let Osman answer the beeps for 58 and 32
since he was working with them eariler this evening.  I am very disappointed.
FILAUS did not go away after the change to blocks.  Looks like the problem is
not specific to CPXKON since it has been seen with BP5KON and APXKON.  AND
finding two holes in (SYS:32)LUD.SYS is very disturbing.  /Jo

Received: from X930.Tymnet by X62.Tymnet; Tue, 13 Jan 87 17:02:50 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Mon, 12 Jan 87 0:30:20 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: FILAUS alias DECUMC+10 

I want to bring up the fact that FILAUS is 'not' a new problem... we may
very well have introduced something else to cause FILAUS or maybe fixed
something else which used to die sooner (never reaching the FILAUS check).
We don't really know.  Our suspicion is that we've introduced something
because we have been seeing more and more of them.

Osman has been backing up crashes for a few years now... it might be well
worth our while to look at some of the old crashes to see if they were
caused by holes in the files.  Does anyone think this tact is worthwhile?

Can we look at the ATB/SPT that is being decremented and figure out which
page in the file we are looking at when the crash occurrs and verify that
there is a hole in the file?

Can we verify that the block we are decrementing is current and not just
old garbage because a pointer didn't get updated?

Can we verify that we don't have multiple pointers for different users or
files pointing to the same blocks, thus one (current) gets updated but the
other (pointing at what it thinks is something else) doesn't?

This doesn't seem to be the same problem we've seen where we get a mixedup
SAT page? or can it be?  ... do the SAT bits get cleared before or after a
DECUMC call?  If indeed we have 1 user and we think we have 2, we should in
some other case have two users and think we have 1, thus the SAT bit gets
deallocated and possibly reused before the 2nd user is done...  that is a
frightening thought!

/Car
Received: from X930.Tymnet by X62.Tymnet; Thu, 15 Jan 87 19:46:27 PST
Return-path: <JMS@X930.Tymnet> 
From: Joe Smith <JMS@X930.Tymnet> 
Date: Thu, 15 Jan 87 19:45:43 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: (JMS)DSKCLN.TXT 

I put some observations about DSKCLN in (JMS)DSKCLN.TXT
Received: from X930.Tymnet by X62.Tymnet; Fri, 23 Jan 87 0:56:48 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Fri, 23 Jan 87 0:44:23 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: DSKCLN version 36J(102) works. 

The results are in (SYS)RECOV.SYS and readable by CTYLOG.
The only difference between 36J(101) and 36J(102) is that the latter outputs
"Multiply used pages - starting pass 2" and "SATs written to disk", even when
in fix mode.  (I wanted it to be obvious why DSKCLN was taking twice as long as
usual.)

Because SPAGES was bad on C26, DSKCLN always found multiply used pages, and
always did pass 2.  That's why DSKCLN took twice as long on C26 than the
other systems.

It will look very impressive when we tell them that the new version of DSKCLN
will eliminate the FILAUS problem and run twice as fast as the old one.
It will be impressive after the existing bad files are eliminated.
			/Joe
Received: from X930.Tymnet by X62.Tymnet; Sat, 24 Jan 87 19:22:01 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Sat, 24 Jan 87 19:19:45 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Manual fix of SPAGES on 26, 70 not complete. 

All 3 of the trouble files in (OSNF:26) have "1" punched in the prime RIB
and a FMUP in the spare RIB that still points to SPAGES.  See DSKCLN.LOG
in (JMS:26),(JMS:70),(JMS:58) for details.    /Joe
Received: from X930.Tymnet by X62.Tymnet; Sun, 25 Jan 87 5:38:18 PST
Return-path: <osman@X930.Tymnet> 
From: Osman Guven <osman@X930.Tymnet> 
Date: Sun, 25 Jan 87 5:35:46 PST 
To: Monitor Group <Osman@X930.Tymnet>, Carl A Baltrunas <carl@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: F58 Move to 3650 BLOCK disk.. 

1. F58 MOVE TO 3650 BLOCK MODE DISK IS COMPLETED.
2. AS OF 1/25/87 04:00 SYSTEM IS UP FOR T/S.
3. SYSTEM IS DEFINED FOR 12 PACK SYSTEM AND HAVE 4
   GOOD SPARE DISK.
4. ASP SAVE/RESTOR WORKS, PLEASE RESUME ASP SAVE. 
5. IF ANY PROBLEM WITH SYSTEM F58 OR ANY QUESTION
   PLEASE NOTIFY TYMCOM-X SOFTWARE GROUP.
6. NEW KL-10 IS NOW CONNECTED TO THE 3652. I BUILD
   ONE PACK BLOCK SYSTEM AND IT IS UP.
-Osman-
Received: from X930.Tymnet by X62.Tymnet; Tue, 27 Jan 87 4:34:15 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Tue, 27 Jan 87 4:30:17 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: AHS results 

Joe,
  I have some interesting results to bring up.  I've only
seen the results on one system (26) so far but,
I am confident that a repeat of the
run will produce similar results.  If
this is rtrue, then we have a fix on waht
is happenning with ASP, and why it doesn't work.

Interesting.
Received: from X930.Tymnet by X62.Tymnet; Tue, 27 Jan 87 19:02:53 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Tue, 27 Jan 87 18:56:55 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey
	<dencoff@X930.Tymnet>, William R Soley <wrs@C39.Tymnet> 
Subject: MAPSUP.PAT fixing supermap error 

Systems F22, D23, C26, C29, F30, C33, B36, F38, B39, F58, F70 and F74
have all been patched in teh running monitor, SYSTEM.SAV and NEWMON.SAV
to reflect the change to MAPUS4+22/ CAMGE M,UNIPPU(U) instead of CAMG...

This fixes an OLD off by one bug when doing super-map i/o to any flavor
disks when a single map request split across two units.  This fix should
make ASP more reliable and we should no longer see any bad files after
an ASP restore (unless the files were already damaged before the SAVE).
/Carl
Received: from X930.Tymnet by X62.Tymnet; Wed, 28 Jan 87 1:00:45 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Wed, 28 Jan 87 0:59:27 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: 58's disks looking good. 

The following glitches can be explained.  System OK otherwise.

From: OPER
Date: JANUARY 27,1987 9:31
F58/EEE HAS 4 HDEV ERRORS ON BPA13 (580009) AT 0850 PST 1/27/87.
BPA12 (580008) HAS 2 THUNGS.
BPA15 (580011) HAS 1 THUNG.

Date: JANUARY 27,1987 18:38
P035/A07 patched to become P035/A-1 in SYS:SYSTEM.SAV only.
Fix super map errors across unit boundaries (which caused THUNGs).  /CARL

From: JMS
Date: JANUARY 28,1987 0:49
Whenever you do a PSP on system 58, you will find that SYSTAT does not know
how to decode SLBN and HLBN on 3650 disks.  In particular, the hard read error
on DSKB11(BPA13) is at 200022,,000511 octal.  For a 3330, that page number is
CYL:3 HEAD:16 RECORD:10, but since 58 is running on 3650 disks, the bad spot is
really on CYL:1 HEAD:22 RECORD:18.  That corresponds to the HRE found in
(SYS)SPAGES.SYS, which can safely be ignored.   /Joe
Received: from X930.Tymnet by X62.Tymnet; Wed, 28 Jan 87 15:15:44 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Wed, 28 Jan 87 15:14:13 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, wrs 
Subject: Problem with ASP located and fixed. 

Every ASP tape created before 28-Jan-87 is missing data.  For every three
disks saved to tape, two pages were missing.  They are page 5 on disk 3n+1
and page 15 of disk 3n+2.  These were not picked up due to a long standing
bug in MAPIO that handles the CHANIO function to super-map disk pages.

The missing pages on disk 3n+1 caused no trouble, since it is the third
page of BOOTS, which was never used (BOOTS is actually 1.75 pages long), and
was re-written by running BOOTS.KI or BOOTS.KL.

The octal addresses of the other missing pages were page 17 on unit 2, page 17
on unit 5, page 17 on unit 10, page 17 on unit 13, page 17 on unit 16.  For
systems with 3 strings, page 17 on unit 21 and page 17 on unit 24 would also
be missing.  This means that after doing an ASP restore on a 14-pack system,
4 files would lose one page of data each.  If the page wasn't a RIB, there
would be no indication.  Instead of a page of data, the file would have a
page full of zeros that the formatter (PAKCOP) had written and ASP hadn't.

How the problem occurred:

When ASP read from the disk, it would do so by super-mapping a range of 24
pages.  When it got to the end of DSKB0, the request of 24 pages would
encompass the last 16 pages of DSKB0 and the first 6 pages of DSKB1.  Due to
the bug in MAPIO, the first 16 pages in the range would be mapped correctly,
but the 17th would get mapped to the first page on cylinder 808 (which is not
allowed) and the 18th thru 24th would get mapped to pages 0 thru 4 on DSKB1
(instead of 0 thru 5).  The next group of 24 pages would get mapped to pages
6 thru 31 on DSKB1, which means that page 5 of DSKB1 never got read from the
disk.  On restore, the same bug meant that page 5 of DSKB1 never got written
back to the disk.

As mentioned earlier, missing page 5 is no big deal.  However, page 15 (octal
17) was most likely part of someone's file.  No pages were missing from DSKB0,
DSKB3, DSKB6, etc since 3*68680 is evenly divisible by 24.

For 3650 disks formatted in pages (C26, C70, and F58's old disks), the pattern
repeated evry 4 disks.  Disk 4n+0 lost nothing, 4n+1 lost page 17 (octal 21),
4n+2 lost page 11 (octal 13), and 4n+3 lost page 5 (BOOTS again).  Page 13
on DSKB2 was part of [1,4].UFD, losing meant losing 102 files from SYS.

This bug has existed ever since P033 (when TYMCOM-X converted to pages) and
is now fixed.  The DSKCLN bug has also existed for the same period of time.
Since P033 came out in the summer of 1977, these are "ten-year bugs".

[End of (M33)SUPMAP.TXT]
Received: from X930.Tymnet by X62.Tymnet; Fri, 30 Jan 87 0:33:43 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Fri, 30 Jan 87 0:04:24 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: ASP saves and rebuilds 

We have a "small" problem with ASP rebuilds.  I called Fremont ops to
determine if operations records what monitor was used to take the ASP
dumps.  The answer is, they don't... however, at the beginning of each
shift, they log what monitor is up on each system, so by extrapolation
it can be determined what monitor was "known" to be running.

Re:  What happens if an ASP dump is taken with ???-P034/P37 and they
     attempt to do the restore using ???-P034/P37-1 where -1 is the new
     patch MAPSUP.PAT fixing the off by 1 supermap.

What happens is that on selected units, the first n pages (where n is
determined using the formula that Joe mentioned in his last message on
this topic) are shifted on the disk by 1 page.

This means that the system won't come up, because most likely one or both
of the HOM pages are in the wrong places and the disk looks scrambled!

(This also means that Osman should NOT use the new monitor to restore any
 old ASP tapes on the test systems... otherwise we will think something
 new is broken, until we realize what happenned!)

I called Fremont and CUPC ops and told them that they need to contact
software support BEFORE doing any ASP rebuilds for the next few weeks
so that we can determine which monitor they should use to do the rebuild.

Tomorrow, we can talk to Rick Daniels and get it squared away for all of
the data centers.  I also think that we need to have operations log what
monitor is used in all future TITO and ASP saves and restores so that any
problems caused by monitor or program changes can be detected.
(That also means logging TITO and ASP version numbers)

When I patched CUPC and FREMONT hosts earlier this week, I did not patch
the monitor version number, so if a rebuild is necessary we need to get
the time and date to match against when the systems were patched. PATLOG
exists on most of the systems.

Osman, have all of the Dallas machines been patched?  We ought to collect
a list of times for each system... I will start such a list in the file
(m33:930)SYSPAT.INF for just such a purpose.

/Carl
Received: from X930.Tymnet by X62.Tymnet; Wed, 28 Jan 87 15:15:48 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Wed, 28 Jan 87 15:14:13 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, wrs 
Subject: Problem with ASP located and fixed. 

Every ASP tape created before 28-Jan-87 is missing data.  For every three
disks saved to tape, two pages were missing.  They are page 5 on disk 3n+1
and page 15 of disk 3n+2.  These were not picked up due to a long standing
bug in MAPIO that handles the CHANIO function to super-map disk pages.

The missing pages on disk 3n+1 caused no trouble, since it is the third
page of BOOTS, which was never used (BOOTS is actually 1.75 pages long), and
was re-written by running BOOTS.KI or BOOTS.KL.

The octal addresses of the other missing pages were page 17 on unit 2, page 17
on unit 5, page 17 on unit 10, page 17 on unit 13, page 17 on unit 16.  For
systems with 3 strings, page 17 on unit 21 and page 17 on unit 24 would also
be missing.  This means that after doing an ASP restore on a 14-pack system,
4 files would lose one page of data each.  If the page wasn't a RIB, there
would be no indication.  Instead of a page of data, the file would have a
page full of zeros that the formatter (PAKCOP) had written and ASP hadn't.

How the problem occurred:

When ASP read from the disk, it would do so by super-mapping a range of 24
pages.  When it got to the end of DSKB0, the request of 24 pages would
encompass the last 16 pages of DSKB0 and the first 6 pages of DSKB1.  Due to
the bug in MAPIO, the first 16 pages in the range would be mapped correctly,
but the 17th would get mapped to the first page on cylinder 808 (which is not
allowed) and the 18th thru 24th would get mapped to pages 0 thru 4 on DSKB1
(instead of 0 thru 5).  The next group of 24 pages would get mapped to pages
6 thru 31 on DSKB1, which means that page 5 of DSKB1 never got read from the
disk.  On restore, the same bug meant that page 5 of DSKB1 never got written
back to the disk.

As mentioned earlier, missing page 5 is no big deal.  However, page 15 (octal
17) was most likely part of someone's file.  No pages were missing from DSKB0,
DSKB3, DSKB6, etc since 3*68680 is evenly divisible by 24.

For 3650 disks formatted in pages (C26, C70, and F58's old disks), the pattern
repeated evry 4 disks.  Disk 4n+0 lost nothing, 4n+1 lost page 17 (octal 21),
4n+2 lost page 11 (octal 13), and 4n+3 lost page 5 (BOOTS again).  Page 13
on DSKB2 was part of [1,4].UFD, losing meant losing 102 files from SYS.

This bug has existed ever since P033 (when TYMCOM-X converted to pages) and
is now fixed.  The DSKCLN bug has also existed for the same period of time.
Since P033 came out in the summer of 1977, these are "ten-year bugs".

[End of (M33)SUPMAP.TXT]
w (lpq)stuff
Received: from X930.Tymnet by X62.Tymnet; Fri, 30 Jan 87 18:41:27 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Fri, 30 Jan 87 18:39:47 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: C70 is still up. 

(M33:930)NOTICE.70 has not been updated since 7-Jan-87.  Last I checked, its
uptime was 552.5 hours.  That's 23 days of continuous uptime!
Received: from X930.Tymnet by X62.Tymnet; Sun, 1 Feb 87 16:05:24 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Sun, 1 Feb 87 16:04:30 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Non-optimal page allocation still in P035/B. 

1-Feb-87 at 14:56 - changed GETAP0+2 in SWAMP from MOVEI T3,1 to MOVEI T3,0.
This change to the running monitor was to make C26's files more equally
distributed on X32's disks in Fremont.

Before the patch is the column labeled "one".  At the instant I ran SYSTAT,
SWAMP was picking on BPA12 only.  After the patch, column "three" shows pages
being allocated from BPA13+BPA14+BPA15.  Once the free space on those three
packs matched that on BPA12, then it was also used (column "four").  As soon as
BPA11 thru BPA15 got down to 76648 pages each, then new pages were allocated
equally on all 12 packs.  The column marked "all" was at 15:30.

           one    three     four      all
DSKB:   953143   945496   937572   907247
BPA2     76648    76648    76648    75604
BPA3     76648    76648    76648    75605
BPA4     76648    76648    76648    75603
BPA5     76648    76648    76648    75605
BPA6     76648    76648    76648    75602
BPA7     76648    76648    76648    75605
BPA10    76648    76648    76648    75605
BPA11    76717    76717    76717    75602
BPA12    81893    81144    81016    75602
BPA13    85863    83580    81016    75602
BPA14    85863    83580    81017    75602
BPA15    85863    83580    81017    75602


Received: from X930.Tymnet by X62.Tymnet; Mon, 2 Feb 87 12:50:58 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Mon, 2 Feb 87 12:43:22 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: DSKCLN version 36J(103) created. 

Known deficiency in DSKCLN:  After doing a restore from TITO all-files, every
	single file on the disk has RIPALC set.  When DSKCLN is creating the
	linked list of files that need fixing, it runs out of core.  The
	program CLRALC turns off this bit on all files so DSKCLN can run.

Bug in DSKCLN:	If there is garbage in the UFD, then CLRALC causes the monitor
	to crash when it attempts to LOOKUP that garbage.  CLRALC can't run
	until DSKCLN fixes the disk, DSKCLN can't run until CLRALC runs.

Cure:	Just before adding to the fix-up chain, check the amount of core
	currently in use.  If too much, ignore RIPALC.  RIPALC will be zeroed
	on the next fast DSKCLN, or the next TITO all-files save, or the next
	time anyone does "DIR/WORDS", or any other operation that looks up
	all files.  This is edit 103 to DSKCLN 36J.
Received: from X930.Tymnet by X62.Tymnet; Sat, 7 Feb 87 18:52:05 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sat, 7 Feb 87 18:45:15 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Hotline call 

System D31, 5:00pm-6:20pm, Dallas OPS, Lois @ 214-637-7435

Symptom: Files and UFDs disappeared or became unaccessable without any
         apparent reason.  Lois was running a MAGNUM procedure under
         (BILLING10) and got a fatal magnum error and couldn't proceed.

Problem: One of the disks had a SAT Failure just prior to the problems
         which occurred.

Solution: As per procedure setup by Tom Marconi, I told them to take the
          system down and run a full DSKCLN and call me back when it was
          complete.  DSKCLN went as expected, no failures were found and
          the system was back up an answered prior to 6:20pm when Lois
          called back.

/Carl
Received: from X930.Tymnet by X62.Tymnet; Sat, 7 Feb 87 22:08:57 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Sat, 7 Feb 87 22:03:33 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: THUNGs 

Writing files to the disk does not cause THUNG on 28.  Neither does running
TAKEIT by itself.  However, the HANG command to TAKEIT consistantly causes
BPC0 hung, BPC1 hung, etc.  Osman found it was always BPC, never BPA, even
though DSKB1,3,5,7, etc are on BPC.  Sounds like COMMON/MONBTS does not
do the right things when writing the modified HOME pages out.  This may be
related to the bogus "serious restart error" message.   /Joe
Received: from X930.Tymnet by X62.Tymnet; Sun, 8 Feb 87 16:54:04 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Sun, 8 Feb 87 16:47:30 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: TDERR.PAT for P035/B 

TDERR.PAT has been applied to NEWMON on all systems.  It fixes the problem of
"serious restart error while writing to HOM pages".  The bug was: If the disk
is formatted in pages, MONBTS would set up to read in pages, and if the disk
was formatted in blocks, MONBTS would set up to read in pages.

I asked Osman to put in breakpoints - we found that the THUNGs occur when
TAKEIT kills job 2.  What sort of weirdness is CHKPNT up to?
Received: from X930.Tymnet by X62.Tymnet; Sun, 8 Feb 87 19:15:18 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Sun, 8 Feb 87 19:10:37 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: ATTACH CHKPNT = THUNG. 

I was able to get hung disk messages by "SET OPR", "ATTACH 2".  CHKPNT
shutting down caused a THUNG on BPA4 and HUNG on BPC0,1,2,3,4,5,6.  It looks
like I/O was in progress on BPA4, that's why it got THUNG instead of HUNG
(the T means "while transfer was in progress").  Maybe releasing the ACT:
device causes PI channel 3 to get zapped.  It shouldn't though.  /JMS
Received: from X930.Tymnet by X62.Tymnet; Mon, 9 Feb 87 23:27:00 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Mon, 9 Feb 87 23:25:20 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: 22 up on F22-P035/B 

Works fine using BPXKON instead of the old CPXKON.
See (JMS)DSKCLN.F22 for all the gory details.
Received: from X930.Tymnet by X62.Tymnet; Tue, 10 Feb 87 17:44:09 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Tue, 10 Feb 87 17:38:37 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: THUNGs located. 

CHKPNT does a "read and reset buffered log" STRUUO on every unit in order
to log all accumulated disk errors.  It does all 14 units one right after
another - the BPC units return a busy flag, but for some reason do not
return the un-busy flag.  (Probably because BPA0 and BPC0 are the same
physical unit.)  There is no other-volume logic in FILIO for this UUO yet.
Until it is, I have modified CHKPNT to HIBER for 1/8 second between requests.
This should give the 3674 plenty of time to return the buffered log.  /JMS
Received: from X930.Tymnet by X62.Tymnet; Wed, 11 Feb 87 7:21:55 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Wed, 11 Feb 87 7:03:18 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: CUPC testing 

I rebuilt a 2-pack test system from OSMAN's all-files tape in his office
and more current files from C70's recent all-files.

I made a 1.005 tape copy (1 plus a little) with TITO of that system.

I ran my new ASP to make a save set, did a compare with some interessting
results, (works 99.9% but a small but variable number of pages appears to
be different without apparent discomfort to the file system.

Attempted a second save set but had hardware problems reading from disk...
used the original ASP save to restore to one of the disks in the 2-pack
system and a second one to replace the "bad" one.  Did a compare on the
restored data and it matches, (all except 2 pages... no explanation, one
was obviously a .REL file page, and the other was miscellaneous bits).

Ran a FULL DSKCLN with 36J(103) after the all-files rebuild, after the
ASP asp restore and prior to coming up as X12.  NNo complaints from any
of the DSKCLN runs.

COnclusion:
  CPXKON appears to work in blocks on 3330's.  No load testing was done
          other than ASP.  It would be a good test to run a few ASH jobs
          at once to see what it does...
  ASP 13(101) appears to do everythng it is supposed to do. One check is
          still needed for restart verification of the disk page and for
          starting too near the end of the structure, but that can be
          done later.
  X12 is up, open for users/testing. 32xb01.sav

/Carl
Received: from X930.Tymnet by X62.Tymnet; Tue, 10 Feb 87 17:44:09 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Tue, 10 Feb 87 17:38:37 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: THUNGs located. 

CHKPNT does a "read and reset buffered log" STRUUO on every unit in order
to log all accumulated disk errors.  It does all 14 units one right after
another - the BPC units return a busy flag, but for some reason do not
return the un-busy flag.  (Probably because BPA0 and BPC0 are the same
physical unit.)  There is no other-volume logic in FILIO for this UUO yet.
Until it is, I have modified CHKPNT to HIBER for 1/8 second between requests.
This should give the 3674 plenty of time to return the buffered log.  /JMS
Received: from X930.Tymnet by X62.Tymnet; Tue, 17 Feb 87 23:30:23 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Tue, 17 Feb 87 23:27:49 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: C70-P035/B01 

The B01 monitor is running on system 70 - no problems.  There are only 5
holes remaining - when they are filled, C70 can run DSKCLN 36J(103).

As soon as F58 comes up on P035/B01, we will have the same monitor running
on all the 3650/3652 systems.  /Joe
Received: from X930.Tymnet by X62.Tymnet; Tue, 17 Feb 87 23:35:21 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Tue, 17 Feb 87 23:34:23 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: List of holes. 

There are only 4 systems that have files with holes.  The files are listed
in (JMS)FEB17.HOL
Received: from X930.Tymnet by X62.Tymnet; Sun, 22 Feb 87 19:50:31 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Sun, 22 Feb 87 19:50:02 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Holtline calls 

22-Feb-87 19:37/Joe
Contact: System TRW's 2020, Anaheim, 800-345-6090, Chuck from NSSC
Problem: While running TITO, the command "COF DAY22.DIR" failed.
Fix:     Disk was full - files deleted.

22-Feb-87 17:36/Joe
Contact: System 35, Dallas, (214)637-7435, Tyrone
Problem: Could not GFD, could not LOGIN, then crashed with and APRFAT stopcode,
         "CDP" Cache Directory Parity Error.
Fix:     Told him to call maintenance to run diagnostics.  I don't expect any
         thing to be found - CDP is usually cleared by reloading the system.

21-Feb-87 15:25/Joe
Contact: System 37, Dallas, (214)637-7435, Paul
Problem: PAKCPX saw only units 300-307 on the string of 3652 disks.
Fix:     Told them to try PAKCP5.  If that does not work, have the 3674
         wired for bits 2,3,4 all don't care to make all 8 strings show up.

Received: from X930.Tymnet by X62.Tymnet; Mon, 23 Feb 87 2:10:43 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Mon, 23 Feb 87 1:54:56 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Hotline call 

23-Feb-87 00:50/Carl
Contact:  System 35, Dallas, (214)637-7435, John Roddam
Symptom:  Initialization failure, NO USER for JOB DSKCLN.  Apparently
          the previous problem reported to Joe, cannot GFD etc., may have
          been caused by a bad LUD.SYS in (SYS).  No speculation on the
          co-incidence of the cache-directory-parity error.

Problem:  As in symptom above.  (SYS)LUD.SYS appears to have been modified
          by some unknown agent:  hardware? validations?  who knows...

          After attempting "PPN username" for OPER, CARL, SPL and others it
          seemed like a hardware glitch or some other one-time fluke that
          had wiped out part of the disk/ufd's.  I started a full DSKCLN and
          after Steve Atwell mentioned that he had done the same with no
          real errors, I aborted that and tried "DIR [1,21]" which printed
          a nice neat directory.  I then tried my own ppn and SPL.  Hmmm.

          I renamed LUD.SYS to LUD.BAD, copied it back to LUD.SYS for TITO
          and restored the file from the Saturday all-files tape.  All the
          "missing" UFD's were now restored and I had operations halt the
          machine and do a full DSKCLN.

Received: from X930.Tymnet by X62.Tymnet; Mon, 23 Feb 87 23:15:13 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Mon, 23 Feb 87 23:03:33 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: CHKPNT 

Well,
  apparently CHKPNT %31(102) to whit we have in CHKPNT.CAB is in some
unfinished state (as of 24-Jun-85).  It is NOT worth the effort at this
time to figure out what needs to be finished.  There is code commented
out (as if waiting for more to be written) which looks suspiciously like
the code to prevent CHKPNT from dying when it runs out of space.  I put
in the code that Joe installed in his version 30.4 (I had a 30.4 at one
point but removed the edit because it didn't work as expected) as version
%31(103) now in CHKPNT.CAB in (OSU:930).

  The old %31(102) is now in (osu:930)CHKPNT.312.  Neither this file nor
CHKPNT.CAB will assemble in their current states and I expect to spend no
furhter time working on them until the other 365x work is completed.

  Tomorrow I will look at ASP in more detail and see about scheduling time
on the test machine(s) in Fremont (or Cupertino).

/Carl
Received: from X930.Tymnet by X62.Tymnet; Tue, 24 Feb 87 6:02:00 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Tue, 24 Feb 87 5:48:17 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Hotline Call 

24-Feb-87 05:30 /Carl
Contact:  Dallas OPS, (214)637-7435, System 35.
Symptom:  Customer having problems using EDITOR.  User from VALUE-LINE
          with username P4NEW receives message cannot enter .TMP file and
          and then EDITOR dies with an address check or some similar ilk.

Problem:  User P4NEW [40315,57542] has 583 files with 7005 pages and a disk
          quota of 2500 pages.  Apparently, his quota was lowered by someone
          since there are no huge files in his directory.  Most of the files
          are 2-5 page files with a bunch of 40+ page files.  (I didn't look
          at .TMP files).

Solution: Have customer contact his representative and have his quota raised
          to it's proper value (or delete the majority of his files?).  This
          may have been a result of the LUD.SYS file damage.  I will send a
          message to resources to notify them that there was a problem and
          that they should check their changes to system 35 since Friday.
/Carl
Received: from X930.Tymnet by X62.Tymnet; Tue, 24 Feb 87 12:48:46 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Tue, 24 Feb 87 12:47:26 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Versions of CHKPNT on SYS: 

(SYS)CHKPNT.SAV version 30.3 checksum TUDPUP is on all systems except 26 and 37.
Systems 26 and 37 are running version 30.4 checksum BIGSIS for 3652 disks.
The new version is (OSU)CHKPNT.SAV everywhere; source is in (OSU:930)CHKPNT.304.
930 and 62 are running version 31(100) checksum MEFFAX, source unknown.
Received: from X930.Tymnet by X62.Tymnet; Thu, 26 Feb 87 5:54:59 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Thu, 26 Feb 87 5:47:46 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: schedule 

I'm going home from CUPC soon... and don't expect to come to the office
today.  I will try to go through the output I've generated on the 3330
disks running ASP and summarize it for our meeting.

The results (in my opinion) are inconclusive.  I only used the NEW ASP
and I only used the 32xb01.sav monitor Joe built for 3330 blocks length
command list.

I did NOT have a single run where everything matched.  Some pages were
different each time, and on multiple compares, the different pages
changed.  I do NOT like this at all.  I do NOT suspect ASP as the culprit
but I have no better explanations.

CPXKON is in 32xb01.sav that I used.  It is worth testing again later
with BPXKON to see if there are any differences (or patterns).

/Carl

Good night all... it's been a long day(?) !!!
Received: from X930.Tymnet by X62.Tymnet; Thu, 26 Feb 87 18:15:13 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Thu, 26 Feb 87 16:22:08 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: D31 coming up on 3652 disks this weekend. 

Tom Marconi asked for a 3652 monitor for system D31.
   From: JMS, FEB 26, 1987 18:16
   To: CRALST   Subject: Software for 3652 disks
   (SYS)NEWMON.SAV has D31-P035/B01 monitor
   (M33)PAKCPX.SAV formats 3650/3652 disks in blocks
   (M33)BOTLOD.SAV punches paper-tape boots for the KI
   (M33)BOOTYI.SAV writes BOOTS for 3652, blocks, KI
                           Joe Smith

From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Thu, 26 Feb 87 22:15:34 PST 
To: Carl A Baltrunas <Carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X62.Tymnet> 
Subject: Hotline Calls 

Tuesday,
  4 or 5 calls - all related to system 35's problems.
  problem eventually solved as per my previous messages.

Thursday,
  2 calls (so far) - system F74, Bonnie

  Problem.  System had one or more SAT failure messages on OPR or CTY
after which some files became inaccessible (SYSTAT for one) and they
reloaded.  Accounting under username APACCT complained of RIB errors
both before and after the reload.

  One file in their directory had a bad rib.  2 in TAPELIB.  I ran FNDBAD
and it generated a list of files with HRE and the three files mentioned
above without saying what was wrong with the three files.  It turned out
these are bad ribs.  (Joe, FNDBAD ought to say what is wrong!)

  2nd call was from Tim (Jim?) in Freont because he couldn't restoer the
files which had RIB errors.  Even with license he couldn't delete them.
I told him about the DELETE FILE.EXT/BAD command/switch and the files
were deleted ok.

/Carl
Received: from X930.Tymnet by X62.Tymnet; Sun, 1 Mar 87 8:35:50 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 1 Mar 87 8:31:16 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Hotline call 

Sunday, 7:50 am /Carl
Symptom: DSKCLN gave error "Bad rib detected in critical file"
         It listed (SYS)1022F.SHR and (SYS)DIRIT.SHR wtih WHC which means
         the entries had the wrong hash code.
I deleted both files and told operations to run a FULL DSKCLN and then
to restore the files from the all-files.

I ran DSKCLN in checking mode twice. Once before and once after
the files were deleted.

/Carl
Received: from X930.Tymnet by X62.Tymnet; Sun, 1 Mar 87 9:54:11 PST
Return-path: <Carl@X930.Tymnet> 
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Sun, 1 Mar 87 9:48:26 PST 
To: Monitor Group <CARL@X930>, Osman Guven <osman@X930.Tymnet>, Joe Smith
	<jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Update on hotline call 

Rerun of DSKCLN in checking  mode found additional files also bad...
so I looked at the UFD and found page 4 had what looked like blocks
2,3 and 4 copied to blocks 1,2 and 3.  All the rest of the pages looked
OK.  I BLTed the data to the right phase and erased the duplicate data.
Ran full dskcln in checking mode and intend to turn the system over
to operations to come up with REFLAG set and restore all of SYS from the
previous all-files/backup tapes using MODE SYS NEWEST after first doing
a full dskcln.


DSKCLN is running clean at the moment.

/Carl
Received: from X930.Tymnet by X62.Tymnet; Thu, 5 Mar 87 1:16:25 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Thu, 5 Mar 87 1:13:12 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: File with bad RIB on D65. 

System 65 is running P035/B-1 on 3330s with BPXKON.
!SYSNO
TYMSHARE D65-P035/B-1 1-30-87
!TYPE FNDBAD.RPT
(SDAVIS)AR8612.MSG       DRB

Legend:
  DRB: Dead RIB (use DELETE/BAD to remove file)

!GFD SDAVIS
DSKB:AR8612.MSG rib error

!ASSIGN DSK STR
DSK assigned

!R TSTSUP
$1B>>DATBRK   PAGE/   1   LOOK$X
File: AR8612.MSG

<FOUND>
$1B>>DATBRK   PAGE/   200004,,170602   D<D+777>0$N
D/   200012,,32747
D+1/   200004,,57371
D+2/   200006,,24023
D+3/   200002,,172500
D+4/   200002,,173031
D+5/   200002,,173205
D+6/   200004,,161506
D+7/   200006,,100662
D+10/   200004,,161665
D+11/   200002,,113345
D+12/   200012,,202421
D+13/   200012,,176233
D+14/   200002,,23117
D+15/   200014,,57217
D+16/   200002,,23272
D+17/   200014,,57355
D+20/   200002,,23472
D+21/   200014,,57550
D+22/   200002,,23644
D+23/   200014,,57721
D+24/   200002,,24020
D+25/   200014,,60100
D+26/   200014,,31167
D+27/   200010,,36742
D+30/   200004,,206067
D+31/   200004,,177234
D+32/   200004,,177366
D+33/   200004,,177543
D+34/   200004,,177724
D+35/   200004,,200076
D+36/   200006,,107672
D+576/   666666
D+577/   200004,,170602
D+776/   666666
D+777/   200004,,170602

D/   200012,,32747   PAGE!   $Q
$P
$1B>>DATBRK   PAGE/   200012,,32747   D/   341606,,506424   $T;885
   
D+1/
    
D+2/    I no   
D+3/   ticed   
D+4/    that   
The data in the RIB is shifted 100 words - 1/2 of a block, not a full
block.  Very strange.		/Joe
Received: from X930.Tymnet by X62.Tymnet; Thu, 5 Mar 87 17:06:58 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Thu, 5 Mar 87 17:06:29 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Files with holes 

Files with holes in them, as of 5-Mar-87

None detected: 22,23,26,29,30,31,33,34,37,38,54,55,56,57,58,65,70,74,95
35: (SYS)LUD.XXX[1,4] 4 holes (known bad copy of LUD.SYS)
62: (SYS)SPAGES.SYS[1,4] (can be fixed by refreshing DSKB)
930: (SYS)SPAGES.SYS[1,4] (can be fixed by refreshing DSKB)
930: (NEWSPL)TEST.ME[3,700202] (deliberate hole)

25: (TYMNET)ND3414.BND[21477,175251]
25: (TYMNET)ND4057.N03[21477,175251]
25: (TYMNET)ND2206.N02[21477,175251]
25: (TYMNET)ND2700.N03[21477,175251]
25: (TYMNET)ND2335.N01[21477,175251]
25: (TYMNET)ND2335.N01[21477,175251]
25: (TYMNET)ND4663.N02[21477,175251]
25: (ACCG1)D29603.S03[21477,215544]
25: (ACCG1)D29603.S04[21477,215544]
25: (ACCG1)D29603.S05[21477,215544]
25: (ACCG1)D29603.S10[21477,215544]
25: (MSTSCHED)MASTER.DMS[21477,307121]
25: (CNFE)EJ2517.BND[11020,136151]
25: (CATECH)ND2377.N03[44054,251263]
25: (CHALIT)BH1210.NW1[30455,107741]
25: (ISISPCM)ND2057.N00[37071,27056]
25: (ISISPCM)ND2004.BND[37071,27056]
25: (CANDERSON)CA3452.D12[44062,51243]
25: (JJOELS)MAC3IS.RPT[11334,474103]
25: (OUTDIAL)BK2431.BND[24261,311005]
25: (HQLAB)JL2253.N00[21476,34750]
25: (BCHEN)OPT02.P01[21476,121017]
25: (BTHOMSON)STUFF.DOC[21476,314715]
25: (WARNERD)DW4255.N02[44054,267432]
25: (SLICM)R80D.LST[26007,34174]
25: (MDCIRVINE)DSYN2B.DOC[45261,400005]

27: (ISISDOC)ISIS2.DOC[11334,247524]
27: (ISISDOC)NAD.DOC[11334,247524]
27: (M8045)BANQUE.FRM[15767,216377]
27: (M8045)TABL.AFF[15767,216377]
27: (INSDGSS1)TBASRT.SHR[11011,371163]
27: (SYS)CRA001.SAV[1,4]
27: (HWPROD)EQUIP.TST[14717,404113]
27: (HWPROD)I0MOMI.MR1[14717,404113]
27: (HWPROD)INVOIC.TST[14717,404113]
27: (HWPROD)BZ8GJH.MX1[14717,404113]
27: (ISGFM)NOV.01[47167,474035]

Received: from X930.Tymnet by X62.Tymnet; Wed, 11 Mar 87 12:57:20 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Wed, 11 Mar 87 12:56:01 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: New DSKCLN distributed. 

DSKCLN version 36J(103) has been placed in SYS on all systems in Dallas.
This version is now running on all systems.
Received: from X930.Tymnet by X62.Tymnet; Wed, 11 Mar 87 15:15:16 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Wed, 11 Mar 87 14:16:38 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: correction to previous message 

New DSKCLN not on D25 or D27 yet because of files with holes.
I am running new DSKCLN in check mode to verify how many holes are
still left.  /Joe
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Thu, 12 Mar 87 22:42:52 PST 
To: Carl A Baltrunas <Carl@X930.Tymnet>, Osman Guven <osman@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X62.Tymnet> 
Subject: Fremont power failure 

The fremont data center took a power failure tonight... so if
you're wondering why some of the machines were down that is why.

No hotline call... I was curious why I couldn't build circuits to
any fremont hosts, but Dallas was up... sigh.

/Carl
Received: from X930.Tymnet by X62.Tymnet; Mon, 16 Mar 87 14:57:39 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Mon, 16 Mar 87 14:55:54 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: D54 up on 3652 disks. 

They came up at 05:53 Sunday, March 15th.  That was quick - up a whole day
before Monday morning.  Looks like the rebuild procedure was clear this time.
Received: from X930.Tymnet by X62.Tymnet; Mon, 16 Mar 87 14:57:39 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Mon, 16 Mar 87 14:55:54 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: D54 up on 3652 disks. 

They came up at 05:53 Sunday, March 15th.  That was quick - up a whole day
before Monday morning.  Looks like the rebuild procedure was clear this time.
Received: from X930.Tymnet by X62.Tymnet; Wed, 25 Mar 87 15:51:00 PST
Return-path: <JMS@X930> 
From: Joe Smith <JMS@X930> 
Date: Wed, 25 Mar 87 15:41:37 PST 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Why PJ wasn't running on any system. 

There some hidden restrictions on what can be in JOBS.DAT due to the
incompetent programming in PAM.
1) (PJ)JOBS.DAT can not be more than 128 words long.  One block and only
   one block is read in when PAM starts up.
2) Host numbers greater than 1519 cause illegal memory references.
   This is due to a stupid algorithm to flag which host numbers need
   to be looked at.  It defines an 999 word array to hold the information
   copied from JOBS.DAT.  If host N is mentioned in JOBS.DAT, then ARRAY[N]
   is set nonzero.  There is no bounds checking, which means any host number
   greater than 999 (such as 1051) will exceed the bounds of the array.
   Host numbers greater than 1519 will go to memory locations greater than
   3777 octal, which causes the ILL MEM REF.

This bug did not cause any problems until after the BUBBNET gateway host
numbers were added (host 1552 in particular).  I have redistributed a new
(PJ)HOST.CTL with the offending numbers deleted.        /Joe
From: Joe Smith <JMS@X930> 
Date: Mon, 6 Apr 87 21:22:14 PDT 
To: Monitor Group <JMS@62>, Carl@62, Osman@62 
Cc: FletcherC@62, DenCoff@62 
Subject: /B02 includes ONCE dialog in CTYLOG. 

One of the changes in /B02 is to make all output from ONCE go into the
CTYLOG buffer.  This way we can tell if the operator went into FILES
dialog.  See (M33)CTYLOG.62 for an example.  /Joe
From: Joe Smith <JMS@X930> 
Date: Fri, 17 Apr 87 9:11:09 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: D25 back up now (but shut) 

Had to go back and re-do RIB to SAT.SYS.  I put page 11 where it should
have been page 10.  DSKCLN saw error in critical file, and aborted without
saying which other file had crossed SAT.SYS with multiply used page.  Bug.
The RIB to INITIA.SAV gotset to 777777777777 because of wrong SAT.
Luckily ther was INITIA.22 on SYS which could be renamed.  DSKCLN started
for real at 9:35 CDT, finished at 10:26, and found 12 files in SYS with
bad self-pointers in their RIBs.  DSKCLN put the names in RECOV.SYS saying
their PPN was [1,635445] instead of [1,4] and no user name.  Another bug.
635445=SIXBIT/SLF/.  PIP.SHR and DIRIT.SHR also had been stomped on.
Operations restored this files,They are reloading it for real
now (11:25 CDT).  I'm going to bed.   /JMS
From: Joe Smith <JMS@X930> 
Date: Sat, 18 Apr 87 1:19:00 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: D25 details. 

For details on what got clobbered, see (M33)HOTLIN.LOG.
The was we prevent this from happenning again is to get /B03 distributed
to all systems as quickly as possible.     /JOE
From: Osman Guven <osman@X930.Tymnet> 
Date: Tue, 28 Apr 87 17:11:34 PDT 
To: Monitor Group <Osman@X930.Tymnet>, Carl A Baltrunas <carl@X930.Tymnet>, Joe
	Smith <jms@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: /B03 Monitor & GTSAP1 crash.. 


Hello Joe..

Remember the crashes on D55 last weekend right after rebuild on
3652 disk. Running with /B03 monitor they were keep crashing with
GTSAP1 STCODE. System would not run more than hour or so.

When operation try to bring F26 up with /B03 this mornning, system
crashed with GTSAP1 and crash is saved. System is now up with
SYSTEM which is /B01.

Only crash saved is on F26. The ones on D55 could not be saved because
of CRASH.SAV being 0 word long and BOOTS not quite working.

-Osman-
From: Carl A Baltrunas <Carl@X930.Tymnet> 
Date: Tue, 5 May 87 2:54:09 PDT 
To: Monitor Group <CARL@X930>, Osman Guven <Osman@X930.Tymnet>, Joe Smith
	<JMS@X930.Tymnet> 
Cc: Craig Fletcher <fletcherc@X930.Tymnet>, Dennis Coffey <dencoff@X930.Tymnet>
	
Subject: Takeit %50 

I modified TAKEIT to continue even though it cannot access DSK or create
a LOG file.  (IF it can, it will.  If not, C'est la vie).

I also added code to set and clear KSYS.

Except for one small detail of the HOLD command (TAKEIT keeps an internal
counter and holds it steady, while the monitor KSYS counter doesn't have
the capability to "hold" at a specific value) which needs to be discussed
and implemented based on that discussion, TAKEIT %50 is ready for testing.

One possibility is for TAKEIT to reset the KSYS word in the monitor each
minute.  I put in the hooks and code for that, but it isn't quite turned
on (Need to move it to another location).

Another is that we set the sign bit, (only allowing 17 bits for the value)
and the sign-extended 18th bit says HOLD the current value.  (Since we do
not allow the monitor to go negative... true? [I didn't check]).

We can also change the SETUUO to use ac/ fn,addr   addr/ bits,,time
   or even better                    ac/ bits+fn,,time
   or add another setuuo or two... HOLD KSYS, CONTINUE KSYS

Comments...

/Carl
From: Joe Smith <JMS@X930> 
Date: Wed, 6 May 87 9:39:31 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Cause of GTSAP1 stopcode in /A02, /A05, and /B03. 

There were two changes to SWAMP involved.  1) A DSKOFF instruction was moved to
avoid possible race conditions, and 2) better load balancing by putting new 
files on the unit with most space. 

The real problem was when the DSKOFF instruction was moved and the nearby
"JRST .-3" was not noticed.  The fix was to put a label at the right place and
jump to it.  The bug did not cause problems on a lightly loaded system, the
GTSAP1 crash occurred only when SAT I/O was in progress at the instant that
a new job tried to log in.

The second change caused SAT I/O to occur when new files were being created.
It forced the RIB of the new file to be created on the unit with the most
space instead of the SAT that happened to be in core.

Now that both changes are in and working properly, the monitor allocates disk
space better.  This should cause a noticable performance improvement when
DSKB is rebuilt from TITO all-files.   /Joe

From: Joe Smith <JMS@X930> 
Date: Fri, 15 May 87 15:00:57 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: REFSTR not working for 2020 systems. 

REFSTR assigns 64 pages for the KS front-end file (SYS)FEFILE.SYS, and
allocates page 14 for its RIB, but does not write the RIB to disk.
The first time a full DSKCLN is run after refreshing the disk, the pages
assigned to the front-end file system get marked as available for use.
The changes to fix this will only affect 2020 monitors.  /Joe
From: Joe Smith <JMS@X930> 
Date: Sun, 17 May 87 18:08:57 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, WRS 
Subject: Inactivity timeout bug fixed. 

There is a bug in the job inactivity timeout killer that has been fixed.
The bug has existed for some time, and caused F29 to crash 3 times this
weekend.  The noname stopcode at TTYFND+2(SCNSER+13721) was triggered when
the inactivity timeout monitor noticed a job logged in as MAIL running TMS
that had been idle for more than 15 minutes.  In the process of killing it,
accumulator J got set to 777454, which is not in the JBT tables.  The was
not noticed on F29 before because (MAIL)TMS was not running on that system
until this weekend.  (Bill said he was moving the major MAIL functions from
system 39 to system 29.)  This may also explain some of B39's crashes.

The fix is in (M33)INTKIL.PAT on all systems, and has been applied to
(SYS:29)SYSTEM.SAV=F29-P035/B03-3 and (SYS:29)NEWMON.SAV=F29-P035/B04-3.

			/Joe
From: Joe Smith <JMS@X930> 
Date: Tue, 19 May 87 13:52:10 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: Preventing XEXEC from running after DSKCLN during system rebuild. 

As an interim solution, I have modified INITIA to not start the XEXEC job
if the file (XEXEC)INITIA.SYS does not exist.  Instead, it will output
"?INITIA cannot run XEXEC until (XEXEC)INITIA.SYS is restored from tape."
every 5 minutes until the file is created or until the OPER kills the
job.  Until Carl finishes SUBOPR, this will ensure that XEXEC does not
start after the full DSKCLN that is necessary between restoring SYS and
the rest of the structure.

If (XEXEC)INITIA.SYS is accidently deleted, just create a new one.  It
doesn't matter what's in the file as long as it exists.
/Joe
From: Joe Smith <JMS@X930> 
Date: Fri, 29 May 87 1:50:11 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff 
Subject: (MPL)TYPBAT types the contents of the BAT pages. 

It uses the same routine that is now part of "TYPE BAT" in the FILES dialog.
If you run (MPL)TYPBAT on 930, the F3 is having problems with record 0 on
head 0 of many cylinders.  If you run it on any of the other systems, you
will see that the 3652 disks have not bad spots, the 3675 disks have a log
of bat spots, and they are all on record 14 of an odd head.  The pattern is
so strong, it looks like BPXKON is having problems.      /Joe
From: Joe Smith <JMS@X930> 
Date: Fri, 29 May 87 1:55:04 PDT 
To: Monitor Group <JMS>, Carl, Osman 
Cc: FletcherC, DenCoff, IPC.T/MARCONI@ONTYME, IPC.R/DANIELS@ONTYME 
Subject: /B04 is expected to have several "%% EVENT stopcode BADPAG" messages. 

Running /B02 or later once will activate the badblock recording routines.
/B04 will output a message on the CTY when a badblock is detected, all
previous monitors noticed the badblock but never said anything.

This means that system that starts running /B04 on the old disks is expected
to get sporadic BATPAG messages until the first time an ASP is done.  During
the ASP, flurry of up to 20 BADPAG messages would not be unusual.  After the
ASP completes, the number of new BADPAG messages should slow to less than
one a week.  Operations can run (MPL)TYPBAT to see how bad the disks are.

The point I'm trying to make is that the sudden flare-up of BADPAG messages
is not the fault of the new monitor.  The disks are getting read errors and
a deficiency in the previous monitors caused problems to not be reported.

		/Joe
 @0