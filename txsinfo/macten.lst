MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 1
MACTEN	MAC	12-May-72 20:51		DEC-10 UNIVERSAL PARAMETERS

     1					SUBTTL	DEC-10 UNIVERSAL PARAMETERS
     2
     3						.XCREF
     4					IFDEF %..C,<IFE %..C,<	.CREF
     5								TAPE	>>
     6
     7					IFNDEF %..C,<.DIRECTIVE	.NOBIN>
     8
     9
    10					;***Copyright (C) 1971,1972,1973,1974,1975,1977 Digital Equipment Corp., Maynard, Mass.***
    11
    12
    13
    14					;THIS PARAMETER FILE CONTAINS MACRO DEFINITIONS, SYMBOL DEFINITIONS
    15					;	AND OPDEFS WHICH ARE OPERATING SYSTEM INDEPENDENT.  THIS
    16					;	FILE WAS ORIGINALLY PART OF C.MAC THE TOPS-10 CUSP UUO
    17					;	PARAMETER FILE.
    18
    19			000000			MACWHO==0		;LAST PATCHER
    20			000002			MACVER==2		;MAJOR VERSION
    21			000000			MACMIN==0		;MINOR VERSION
    22			000025			MACEDT==25		;EDIT LEVEL
    23
    24						.CREF
    25						SALL
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 2
MACTEN	MAC	12-May-72 20:51		TABLE OF CONTENTS

    26						SUBTTL	TABLE OF CONTENTS
    27
    28					;                          SECTION                            PAGE
    29					;    1. REVISION HISTORY......................................   3
    30					;    2. INTERESTING SYMBOLS...................................   4
    31					;    3. MACRO DEFINITIONS -- ND, XP, EXT, GLOB................   5
    32					;    4. MACRO DEFINITIONS -- LISTING CONTROL..................   7
    33					;    5. MACRO DEFINITIONS -- BYTE MANIPULATION................   8
    34					;    6. MACRO DEFINITIONS -- INFO/REDEF.......................   9
    35					;    7. MACRO DEFINITIONS -- STACK CONTROL....................  10
    36					;    8. SIMPLE STRUCTURE AND LOAD/STORE.......................  11
    37					;    9. FLAG DEFINITIONS......................................  12
    38					;   10. MACRO DEFINITIONS -- GENERATE OP CODES ABCX...........  13
    39					;   11. MACRO DEFINITIONS -- JUMPPT...........................  22
    40					;   12. USEFUL OPDEFS.........................................  23
    41					;   13. SYMBOLS FOR THE CONTROL CHARACTERS....................  24
    42					;   14. HARDWARE BITS OF INTEREST TO USERS....................  25
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 3
MACTEN	MAC	12-May-72 20:51		REVISION HISTORY

    43						SUBTTL	REVISION HISTORY
    44
    45					;BASED UPON C.MAC %7(163) RELEASED MAY, 1974
    46
    47					;VERSIONS RESET WHEN CREATED
    48
    49					;1	CREATION
    50					;2	CLEAN UP AND CORRECT BUGS INTRODUCED IN ORIGINAL SPLIT
    51					;3	(10-14,209) REMOVE PDP-6 TEST IF SAME AS KA IN JUMPPT
    52					;4	MASK DOWN VALUE IN INSVL.
    53					;5	(10-14,209) ADD .SUA?? SYMBOLS
    54					;6	ADD LSTOF., LSTON.
    55					;7	ADD VRSN. AND VR.???
    56					;10	ADD SHOW.
    57					;11	ADD CONT.
    58					;12	ADD DEFST., LOAD., STOR.
    59					;13	ADD FLAG., LFLAG., SFLAG. AND CHANGE TX??
    60					;14	ADD .LHALF, .RHALF, .FWORD
    61					;15	ADD .ZERO5
    62					;16	ADD FRAME.
    63					;17	ADD TY??.
    64					;20	ADD ZERO.
    65					;21	ADD NDS.
    66					;22	SIMPLIFY INSVL.
    67					;23	ADD KL-10 IN JUMPPT
    68					;24	WITHDRAW 13 UNTIL UNDERSTOOD
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 4
MACTEN	MAC	12-May-72 20:51		REVISION HISTORY

    69						.DIRECTIVE .NOBIN
    70
    71
    72
    73					;+.CENTER
    74					;TITLE. MACRO
    75					;.SKIP 2
    76					;THE TITLE. MACRO IS DESIGNED TO HANDLE THE PROBLEMS OF
    77					;MAINTAINING VERSION NUMBERS IN PROGRAMS. THE MACRO GENERATES
    78					;A SERIES OF MACROS TO PERFORM VARIOUS FUNCTIONS FOR THE
    79					;MACRO-10 PROGRAMMER. THE GENERAL FORM IS:
    80					;.PARAGRAPH 0
    81					;TITLE. (ABV,PRGNAM,COMMENT)
    82					;.TAB STOPS 8
    83					;.LEFT MARG 8
    84					;.PARAGRAPH -8
    85					;WHERE:	ABV=3-CHAR PROGRAM ABBREVIATION, IE. "DRT" FOR DIRECT.
    86					;.BREAK
    87					;PRGNAM=PROGRAM NAME, DIRECT.
    88					;.BREAK
    89					;COMMENT=SHORT STATEMENT STATING PROGRAM'S FUNCTION
    90					;
    91					;.LEFT MARG 0
    92					;.PARA 0
    93					;THE TITLE. MACRO ASSUMES THAT FOUR SYMBOLS ARE DEFINED,
    94					;XXXVER, XXXMIN, XXXWHO AND XXXEDT, WHERE XXX=THE 3-CHARACTER
    95					;PROGRAM ABBREVIATION SUPPLIED TO THE MACRO.
    96					;TWO SYMBOLS ARE DEFINED XXXASC AND XXXSIX WHICH ARE SYMBOLICALLY
    97					;AND RESPECTIVELY DEFINED AS THE ASCII AND SIXBIT VALUES OF THE
    98					;PROGRAM ABBREVIATION SUPPLIED.
    99					;-
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 5
MACTEN	MAC	12-May-72 20:51		TITLE MACRO

   100					SUBTTL	TITLE MACRO
   101					;&.SUBTTL TITLE MACRO
   102
   103
   104					; TITLE. (DRT,DIRECT,PROGRAM TO LIST DIRECTORIES)
   105					DEFINE TITLE.(ABV,PRGNAM,COMENT),<
   106						.XCREF
   107						Z==0
   108						IFNDEF ABV'VER,<Z==-1>
   109						IFNDEF ABV'MIN,<Z==-1>
   110						IFNDEF ABV'EDT,<Z==-1>
   111						IFNDEF ABV'WHO,<Z==-1>
   112						IFL Z,<PRINTX ?SYMBOLS ABV'WHO,ABV'VER,ABV'MIN AND ABV'EDT NOT DEFINED
   113						PRINTX ?VERSION SYMBOLS MUST BE DEFINED BEFORE CALLING TITLE. MACRO
   114					END>
   115						.CREF
   116						IF2,<LALL>
   117						ABV'SIX==SIXBIT /ABV/	; PRGNAM ABBREVIATION IN SIXBIT
   118						ABV'ASC==ASCIZ /ABV/	; PRGNAM ABBREVIATION IN ASCII
   119						SALL
   120						.XCREF
   121					%FIRST=ABV'MIN/^D26
   122					IFE %FIRST,<%SECON==ABV'MIN
   123						%FIRST==0>
   124					IFG %FIRST,<%SECON=ABV'MIN-<^D26*%FIRST>>
   125					IFE ABV'MIN-^D26,<%SECON==ABV'MIN
   126						%FIRST=0>
   127					IFE ABV'MIN-^D52,<%SECON==^D26
   128						%FIRST=1>
   129					; DEFINE ALL THE MACROS
   130					BUILD$ (PRGNAM,\ABV'VER,\ABV'MIN,\%FIRST,<,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,^_
   131					T,U,V,W,X,Y,Z>,\%SECON,<,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,^_
   132					V,W,X,Y,Z>,\ABV'EDT,\ABV'WHO,COMENT,ABV)
   133					
   134						IF2,<PURGE %SECON,%FIRST,Z>
   135					.CREF>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 6
MACTEN	MAC	12-May-72 20:51		BUILD$ MACRO

   136					SUBTTL	BUILD$ MACRO
   137
   138					;+THE TITLE. MACRO GENERATES THE FOLLOWING MACROS TO
   139					;BE OPTIONALLY CALLED BY THE USER.
   140					;.LEFT MARG 8
   141					;-.TAB STOPS 8
   142
   143					DEFINE BUILD$ (PRGNAM,MAJN,MINOR,O1,L1,O2,L2,EDIT,CUS,COMENT,ABV,%TMP,%A,%B),<
   144					%TMP==-1
   145					IRP L1,<%TMP==%TMP+1
   146					IFE O1-%TMP, <%TMP==-1
   147					IRP L2,<%TMP==%TMP+1
   148					IFE O2-%TMP, <
   149					
   150					;+.PARA -8
   151					;XXXTTL	MACRO TO GENERATE A TITLE STATEMENT OF THE FORM:
   152					;.BREAK
   153					;-TITLE PRGNAM COMMENT VERSION
   154						DEFINE ABV'TTL,<IFG CUS,<
   155						TITLE	PRGNAM - COMENT  %'MAJN'L1'L2(EDIT)-CUS
   156					>IFE CUS,<
   157						TITLE	PRGNAM - COMENT  %'MAJN'L1'L2(EDIT)
   158					>>
   159					
   160					;+.PARA -8
   161					;XXX137	MACRO TO SETUP LOCATION 137 WITH THE SPECIFIED
   162					;-VERSION NUMBER. NOTE: THE MACRO DOES ITS OWN "LOC" AND "RELOC".
   163						DEFINE ABV'137,<IFG CUS,<
   164						IF2,<LALL>
   165						LOC	137
   166						BYTE (3)ABV'WHO(9)ABV'VER(6)ABV'MIN(18)ABV'EDT	; PRGNAM %'MAJN'L1'L2(EDIT)-CUS
   167						RELOC
   168						SALL
   169					>	IFE CUS,<
   170						IF2,<LALL>
   171						LOC	137
   172						BYTE (3)ABV'WHO(9)ABV'VER(6)ABV'MIN(18)ABV'EDT	; PRGNAM %'MAJN'L1'L2(EDIT)
   173						RELOC
   174						SALL
   175					>>
   176					
   177					; MACRO TO DEFINE VERSION # AT CURRENT LOCATION
   178					;+.PARA -8
   179					;XXXVRS	MACRO TO DEFINE THE VERSION NUMBER AT AN
   180					;-ARBITRARY USER LOCATION.
   181						DEFINE ABV'VRS,<IFG CUS,<
   182						IF2,<LALL>
   183						BYTE (3)ABV'WHO(9)ABV'VER(6)ABV'MIN(18)ABV'EDT	; PRGNAM %'MAJN'L1'L2(EDIT)-CUS
   184						SALL
   185					>	IFE CUS,<
   186						IF2,<LALL>
   187						BYTE (3)ABV'WHO(9)ABV'VER(6)ABV'MIN(18)ABV'EDT	; PRGNAM %'MAJN'L1'L2(EDIT)
   188						SALL
   189					>>
   190					
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 6-1
MACTEN	MAC	12-May-72 20:51		BUILD$ MACRO

   191					; GENERATE A PASS2 PRINTX STATEMENT
   192					;+.PARA -8
   193					;-XXXPTX	GENERATES A PASS2 PRINTX STATEMENT.
   194						DEFINE ABV'PTX,<
   195						IF2,<
   196						IFG CUS,<PRINTX PRGNAM %'MAJN'L1'L2(EDIT)-CUS	COMENT
   197					>	IFE CUS,<PRINTX PRGNAM %'MAJN'L1'L2(EDIT)	COMENT
   198					>>>
   199					
   200					;+.PARA -8
   201					;XXXSTL	THE XXXSTL MACRO GENERATES A NEW PAGE
   202					;VIA THE MACRO PAGE PSEUDO-OP AND OPTIONALLY
   203					;DEFINES A NEW SUBTTL COMMAND. THE CALL IS "XXXSTL (COMMENT)".
   204					;IF THE XXXSTL MACRO IS CALLED WITH A NULL ARGUMENT A COMMENT
   205					; LINE IS GENERATED AT THE BOTTOM OF THE CURRENT PAGE
   206					; AND AT THE TOP OF THE NEXT PAGE INDICATING THAT THE PAGE
   207					;-HAS BEEN CONTINUED.
   208						DEFINE ABV'STL (TEXT),<IFNB <TEXT>,<
   209						SUBTTL	TEXT
   210						PAGE
   211					>	IFB <TEXT>,<
   212						LALL
   213						PAGE		; CONTINUED TO NEXT PAGE
   214						SALL		; CONTINUED FROM PREVIOUS PAGE
   215					>>
   216					;+.PARA -8
   217					;XXXUNV	MACRO TO GENERATE A UNIVERSAL STATEMENT. THE MACRO IN
   218					;EFFECT IS AN EXACT COPY OF THE XXXTTL MACRO EXCEPT THAT THE
   219					;-WORD "UNIVERSAL" REPLACES THE WORD "TITLE".
   220						DEFINE ABV'UNV,<IFG CUS,<
   221						LALL
   222						UNIVERSAL PRGNAM - COMENT  %'MAJN'L1'L2(EDIT)-CUS
   223						SALL
   224					>IFE CUS,<
   225						LALL
   226						UNIVERSAL PRGNAM - COMENT  %'MAJN'L1'L2(EDIT)
   227						SALL
   228					>>
   229					
   230					;+.PARA -8
   231					;XXXERR	MACRO TO TYPE A FATAL ERROR MESSAGE ON THE
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 7
MACTEN	MAC	12-May-72 20:51		BUILD$ MACRO

   232					;USER'S TERMINAL. THE CALL IS OF THE FORM:
   233					;.BREAK
   234					;XXXERR (ZZZ,ERROR MESSAGE,<PDP-10 INSTRUCTION>)
   235					;.BREAK
   236					;ZZZ IS THE 3-CHARACTER ERROR CODE, ERROR MESSAGE IS THE ASCIZ
   237					;STRING TO BE TYPED ON THE TERMINAL AND PDP-10 INSTRUCTION IS
   238					;AN OPTIONAL ARGUMENT INDICATING WHAT THE USER WANTS TO DO
   239					;ABOUT THE ERROR JUST TYPED. IF THE ARGUMENT IS NULL AN
   240					;-EXIT IS EXECUTED.
   241						DEFINE ABV'ERR (COD,MSG,INSTR),<
   242					...'COD:	JRST	[
   243						OUTSTR	[ASCIZ \
   244					? ABV''COD MSG\]
   245						IFNB <INSTR>,<INSTR>
   246						IFB <INSTR>,<EXIT>
   247					]>
   248					
   249					;+.PARA -8
   250					;XXXWRN	MACRO SIMILAR TO THE XXXERR MACRO EXCEPT THAT A
   251					;WARNING MESSAGE IS ISSUED RATHER THAN A FATAL AND
   252					;-THE DEFAULT PDP-10 INSTRUCTION TO BE EXECUTED IS "JRST .+1".
   253						DEFINE ABV'WRN (COD,MSG,INSTR),<
   254					...'COD:	JRST	[
   255						OUTSTR	[ASCIZ \
   256					% ABV''COD MSG\]
   257						IFNB <INSTR>,<INSTR>
   258						IFB <INSTR>,<JRST .+1>
   259					]>
   260					
   261					;; DEFINE NEW MACROS HERE
   262					>>>>;; DELETED RIGHT BRACKET HERE
   263						PURGE %TMP,%A,%B
   264					>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 8
MACTEN	MAC	12-May-72 20:51		MODSHW MACRO

   265					SUBTTL	MODSHW MACRO
   266
   267					;+
   268					;.SKIP 2
   269					;.LEFT MARG 0
   270					;.CENTER
   271					;MODSHW MACRO
   272					;.PARA 0
   273					;THE MODSHW MACRO IS DESIGNED TO "SHOW" VERSION VALUES OF RELATED
   274					;MODULES. THE FORM IS "MODSHW (ABV)" WHERE ABV IS THE 3-CHARACTER
   275					;PROGRAM ABBREVIATION. THE SYMBOL "%%ABV" IS DEFINED WITH THAT VALUE.
   276					;-
   277
   278						DEFINE MODSHW (ABV),<
   279						LALL
   280						%%'ABV==BYTE (3)ABV'WHO(9)ABV'VER(6)ABV'MIN(18)ABV'EDT
   281						SALL
   282					>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 9
MACTEN	MAC	12-May-72 20:51		IDENTITY

   283					SUBTTL	IDENTITY
   284
   285						TITLE.	(MAC,MACTEN,DECSYSTEM-10 COMMON PARAMETER FILE)
   286		554143	000000			MACSIX==SIXBIT /MAC/	; MACTEN ABBREVIATION IN SIXBIT
   287		466030	300000			MACASC==ASCIZ /MAC/	; MACTEN ABBREVIATION IN ASCII
   288						SALL
   289
   290
   291						IFNDEF %..C,<MACUNV>
   292						UNIVERSAL MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)
   293						SALL
   294
   295						MACPTX
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 10
MACTEN	MAC	12-May-72 20:51		INTERESTING SYMBOLS

   296					SUBTTL	INTERESTING SYMBOLS
   297
   298					;VERSION FORMAT COMPONENTS
   299
   300		700000	000000		VR.WHO==7B2	;WHO EDITTED (0=DEC DEVELOPMENT, 1=OTHER DEC,
   301							;     2-4=CUSTOMER, 5-7=END USER)
   302		077700	000000		VR.VER==777B11	;MAJOR DEC VERSION
   303		000077	000000		VR.MIN==77B17	;MINOR DEC VERSION (1=A, ETC.)
   304			777777		VR.EDT==777777	;EDIT LEVEL
   305
   306					;MACRO TO FORMAT THIS MODULE'S VERSION
   307					;	VRSN.	PREFIX
   308					;
   309					;ASSUMES SYMBOLS OF FORM PREFIX'CUS, ..VER, ETC.
   310
   311					DEFINE VRSN.(PFX),<BYTE (3)PFX'WHO (9)PFX'VER (6)PFX'MIN (18)PFX'EDT>
   312
   313
   314					;MISC. CONSTANTS
   315
   316		377777	777777		.INFIN==377777,,777777	;PLUS INFINITY
   317		400000	000000		.MINFI==1B0		;MINUS INFINITY
   318		777777	000000		LH.ALF==777777B17	;LEFT HALF WORD
   319			777777		RH.ALF==777777		;RIGHT HALF WORD
   320		777777	777777		FW.ORD==-1		;FULL WORD
   321			000000		.ZERO5==0		;MNEMONIC THAT NO @ OR INDEX POSSIBLE
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 11
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- ND, XP, EXT, GLOB

   322						SUBTTL	MACRO DEFINITIONS -- ND, XP, EXT, GLOB
   323
   324					;MACRO TO DEFINE A SYMBOL IF NOT ALREADY DEFINED
   325					;	ND  SYMBOL,VALUE
   326
   327					DEFINE	ND(SYMBOL,VALUE),<
   328						IFNDEF	SYMBOL,<SYMBOL==VALUE>
   329					>
   330
   331
   332					;MACRO TO SHOW THE VALUE OF AN ABSOLUTE SYMBOL
   333					;	SHOW	SYMBOL
   334					;WARNING-- DO NOT USE AS LAST LOCATION IN A SEGMENT
   335
   336					DEFINE	SHOW.(ARG$),<	.XCREF
   337						EXP	<ARG$>
   338						.ORG	.-1
   339								.CREF>
   340
   341
   342					;MACRO TO DEFINE A SYMBOL IF NOT ALREADY DEFINED AND SHOW ITS VALUE
   343					;WARNING-- DO NOT USE AS LAST LOCATION IN A SEGMENT
   344
   345					DEFINE	NDS.(SYMBOL,VALUE),<
   346						IFNDEF	SYMBOL,<SYMBOL==VALUE>
   347						SHOW.	(SYMBOL)
   348					>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 12
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- ND, XP, EXT, GLOB

   349					;MACRO TO DEFINE A SYMBOL AND FORCE IT INTERN
   350					;	XP  SYMBOL,VALUE,PRINT
   351					;		WHERE PRINT IS NON-BLANK TO PRINT OUT FROM DDT
   352
   353					DEFINE	XP(SYMBOL,VALUE,PRINT),<
   354						INTERN	SYMBOL
   355						IFB  <PRINT>,<SYMBOL==VALUE>
   356						IFNB <PRINT>,<SYMBOL=VALUE>
   357					>
   358
   359
   360					;MACRO TO EXTERN A SYMBOL IF NOT DEFINED IN THIS ROUTINE
   361					;	EXT	SYMBOL
   362
   363					DEFINE	EXT(SYMBOL),<
   364						IRP	SYMBOL,<
   365						IF2,<	IFNDEF	SYMBOL,<EXTERN SYMBOL> >>>
   366
   367
   368
   369					;MACRO TO EXTERN OR INTERN A SYMBOL
   370					;	GLOB	SYMBOL
   371
   372					DEFINE	GLOB(SYMBOL),<
   373						IRP	SYMBOL,<
   374						IF2,<	IFDEF	SYMBOL,<INTERN SYMBOL>
   375							IFNDEF	SYMBOL,<EXTERN SYMBOL>
   376							SUPPRE	SYMBOL>>>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 13
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- LISTING CONTROL

   377						SUBTTL	MACRO DEFINITIONS -- LISTING CONTROL
   378
   379					;THIS MACRO IS USED TO FORCE A PAGE OVERFLOW WITH COMMENT
   380					;TO HAVE LISTINGS MATCH THE PROPOSED CODING STANDARD.
   381					;
   382					;IT IS INVOKED WHENEVER A PAGE OVERFLOW WOULD HAVE HAPPENED.
   383					;
   384					;
   385					;ACCORDING TO THE PROPOSED STANDARD, ALL SOURCE FOR A ROUTINE
   386					;MUST OCCUR ON ONE PAGE. HOWEVER, IT IS IMPORTANT FOR THE
   387					;USER TO FIND "SENTENCE" BREAKS TO FORM THE OVERFLOW (EJECT)
   388					;POINTS. WHENEVER OVERFLOW OCCURS, A COMMENT
   389					;TO THAT EFFECT SHOULD APPEAR IN THE LISTING. ALL THIS IS
   390					;ACCOMPLISHED BY THE USER INCLUDING THE MACRO "CONT." IN HIS
   391					;SOURCE AT THE POINT OF THE OVERFLOW. NO BLANKS SHOULD PRECEED
   392					;OR FOLLOW THE MACRO.
   393
   394						DEFINE	CONT.<LALL
   395					
   396								   PAGE	;(CONTINUED ON NEXT PAGE)
   397								   SALL	;(CONTINUED FROM PREVIOUS PAGE)
   398					>
   399
   400
   401					;MACROS TO TURN ON AND OFF LISTINGS WHEN NESTING
   402					;	LSTOF.		TURNS OFF LISTING AND CREF
   403					;	LSTOF.	X	TURNS OFF LISTING
   404					;	LSTON.		RESTORES LISTING AND CREF IF TOP LEVEL
   405					;IF LSTIN. IS DEFINED AS .MINFI, THEN ALL LISTINGS ON
   406
   407					DEFINE	LSTOF.(CREF$),<
   408						IFNDEF	LSTIN.,	LSTIN.==0
   409					IFE LSTIN.,<
   410						IFB <CREF$>,	.XCREF
   411								XLIST>
   412					LSTIN.==LSTIN.+1
   413					>
   414
   415					DEFINE	LSTON.,<
   416					IFG LSTIN., LSTIN.==LSTIN.-1
   417					IFLE LSTIN.,<	.CREF
   418							LIST>
   419					>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 14
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- BYTE MANIPULATION

   420						SUBTTL	MACRO DEFINITIONS -- BYTE MANIPULATION
   421
   422					;MACRO TO COMPUTE THE WIDTH OF A MASK
   423					;	"WID" RETURNS THE LENGTH OF THE LEFTMOST STRING OF
   424					;	CONSECUTIVE ONES IN THE WORD.
   425					DEFINEMASK),<<^L<-<<MASK>_<^L<MASK>>>-1>>>
   426
   427					;MACRO TO COMPUTE THE POSITION OF A MASK
   428					DEFINE	POS(MASK),<<^L<MASK>+^L<-<<MASK>_<^L<MASK>>>-1>-1>>
   429
   430					;MACRO TO BUILD A POINTER TO A MASKED QUANTITY
   431					;	POINTR	LOCATION,MASK
   432					DEFINE	POINTR(LOC,MASK),<<POINT	WID(MASK),LOC,POS(MASK)>>
   433
   434					;MACRO TO BUILD A MASK "WID" BITS WIDE, WITH ITS RIGHTMOST BIT
   435					;	IN THE BIT POSITION "POS".   (I.E. A MASK FOR THE BYTE
   436					;	POINTED TO BY THE BYTE POINTER "POINT  WID,LOC,POS")
   437					DEFINE	MASK.(WID,POS),<<<<1_<WID>>-1>B<POS>>>
   438
   439					;MACRO TO DEFINE A SYMBOL WITH ONLY ONE BIT ON, IN THE SAME POSITION AS
   440					;	THE RIGHTMOST BIT IN "MASK" (OR 0, IF "MASK" = 0)
   441					DEFINE RGHBT.(MASK),<<<MASK>&-<MASK>>>
   442
   443					;MACRO TO DEFINE A SYMBOL WITH ONLY ONE BIT ON, IN THE SAME POSITION AS
   444					;	THE LEFTMOST BIT IN "MASK" (OR 0, IF "MASK" = 0)
   445					DEFINE LFTBT.(MASK),<<1B<^L<MASK>>>>
   446
   447					;	"FILIN." RETURNS A WORD WITH A CONSECUTIVE STRING OF ONES FROM THE
   448					;	BIT POSITION OF THE LEFTMOST ONE IN "MASK" THROUGH THE BIT POSITION
   449					;	OF THE RIGHTMOST ONE IN "MASK" INCLUSIVE.
   450					DEFINE FILIN.(MASK),<<<MASK>!<<LFTBT.(MASK)>-<RGHBT.(MASK)>>>>
   451
   452					;	"ALIGN." RETURNS THE NUMBER OF TRAILING ZEROS IN "MASK"
   453					;	(I.E. A VALUE WHICH IS THE RIGHT COUNTERPART OF THE VALUE
   454					;	RETURNED BY THE MACRO-10 OPERATOR "^L")
   455					DEFINE ALIGN.(MASK),<<^D35-<^L<RGHBT.(MASK)>>+<^D37*<<^L<RGHBT.(MASK)>>/^D36>>>>
   456
   457					;	BTSWP.(AC,BIT-1,BIT-2) SWAPS BITS 1 AND 2 IN AC.
   458					;		BIT-1 AND BIT-2 ARE DECIMALS 0-35
   459					DEFINE	BTSWP.(AC,BIT1,BIT2),<
   460						REPEAT	3,<
   461						TXCE	AC,1B<BIT1>!1B<BIT2>
   462					>>
   463
   464					;	"INSVL." POSITIONS VALUE IN MASK
   465					DEFINE INSVL.(VALUE,MASK),<<<<VALUE>B<POS(<MASK>)>>&<MASK>>>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 15
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- INFO/REDEF

   466						SUBTTL	MACRO DEFINITIONS -- INFO/REDEF
   467
   468					;THE FOLLOWING MACROS FACILITATE THE ACCUMULATION OF TEXT BY PERMITTING
   469					;THE USER TO APPEND A LINE OF TEXT TO THE BODY OF TEXT ALREADY
   470					;ACCUMULATED.  THE MACROS ARE USED IN THE FOLLOWING WAY:
   471					;1.  TO CLEAR THE MECHANISM:
   472					;	CINFO.
   473					;2.  TO APPEND THE LINE "SAMPLE LINE" (FOLLOWED BY CR-LF) TO THE
   474					;END OF THE TEXT ACCUMULATED SO FAR:
   475					;	INFO.	REDEF.,"SAMPLE LINE"
   476					;3.  TO DEFINE A MACRO "NAME" SO THAT ITS EXPANSION WILL BE THE TEXT
   477					;ACCUMULATED SO FAR, (NOTE-IT ADDS A NULL LINE TO THE END):
   478					;	INFO.	DEFINE	"NAME"
   479
   480						DEFINE	CINFO.	<
   481						DEFINE	INFO.(OPCODE,NEWARG)<
   482						OPCODE	NEWARG>>
   483
   484						DEFINE	REDEF.(OLDARG)<
   485						DEFINE	INFO.(OPCODE,NEWARG)<
   486						OPCODE	<OLDARG
   487						NEWARG>>>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 16
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- STACK CONTROL

   488						SUBTTL	MACRO DEFINITIONS -- STACK CONTROL
   489
   490					;MACRO TO DEFINE A BUNCH OF WORDS ON THE STACK.
   491					;EACH ARGUMENT TO THE FRAME. MACRO ALLOCATES 1 WORD ON THE
   492					;  STACK AND DEFINES A MACRO WITH THE SAME NAME AS -N(P).
   493					;
   494					;WARNING: THIS MACRO DEFINES THINGS IN TERMS OF (P) AND THEREFOR
   495					;	NOTHING ELSE MAY BE PUSHED ON THE STACK!!!
   496
   497					DEFINE	FRAME. (LIST,%A),<
   498						OLD%%%==10	;;SAVE CURRENT RADIX
   499						RADIX	8
   500						N%%%==0		;;ARGUMENT COUNT
   501					IRP LIST,<
   502						FR%%AM (LIST,\<N%%%+1>)	;;DEFINE SYMBOL MACRO
   503						N%%%==N%%%+1		;;COUNT ARGS
   504					>
   505						ADD	P,[N%%%,,N%%%]	;;ALLOCATE SPACE
   506						PUSHJ	P,%A		;;DO THE SUBROUTINE
   507						  SKIPA
   508						AOS	-N%%%(P)	;;PASS ON SKIP RETURN
   509						SUB	P,[N%%%,,N%%%]	;;DEALLOCATE SPACE
   510						POPJ	P,		;;RETURN
   511					%A:
   512						RADIX	OLD%%%
   513						PURGE	N%%%,OLD%%%
   514					>
   515
   516					DEFINE	FR%%AM (A,B),<
   517						DEFINE	A,<-^O'B(P)>
   518					>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 17
MACTEN	MAC	12-May-72 20:51		SIMPLE STRUCTURE AND LOAD/STORE

   519						SUBTTL	SIMPLE STRUCTURE AND LOAD/STORE
   520
   521					;MACROS TO DEFINE AND LOAD/STORE A BYTE LOCATION
   522
   523					;MACRO DEFST. (BYTE NAME, WORD LOCATION, MASK)
   524					; DEFINES THE LOCATION AND SIZE OF THE BYTE
   525
   526					DEFINE	DEFST.(NAM$,LOC$,MASK$),<
   527						..OLD==10
   528						..TYP==3
   529					IFE <MASK$>+1,..TYP==0
   530					IFE <MASK$>-^O777777,..TYP==1
   531					IFE <MASK$>-^O777777B17,..TYP==2
   532					..POS==POS(<MASK$>)
   533					..WID==WID(<MASK$>)
   534						RADIX	10
   535						DF%%ST (\..TYP,NAM$,<LOC$>,\..POS,\..WID)
   536						PURGE	..OLD,..TYP,..POS,..WID>
   537
   538					;	THIS IS A HELPER MACRO FOR INTERNAL USE
   539
   540					DEFINE	DF%%ST (TYP$,NAM$,LOC$,POS$,WID$),<
   541						RADIX	..OLD
   542					DEFINE	NAM$ (OPS,AC,E),<
   543						..C==0
   544						IRP OPS,<
   545							IFE TYP$-..C,<
   546								STOPI
   547								IFN 3-..C, OPS <AC>,LOC$''E
   548								IFE 3-..C, OPS <AC>,[POINT WID$,LOC$''E,POS$]
   549							>
   550						..C==..C+1>
   551						PURGE	..C>
   552					>
   553
   554					;MACRO LOAD. (AC, BYTE NAME, OPTIONAL LOC)
   555					; WILL LOAD AC WITH THE CONTENTS OF THE BYTE. IF AND ONLY
   556					; NO LOCATION WAS GIVEN IN DEFST., GIVE IT IN LOAD.
   557
   558					;MACRO STOR. IS IDENTICAL EXCEPT THE AC IS STORED INTO THE BYTE.
   559
   560					;MACRO ZERO. IS IDENTICAL (FIRST ARG IGNORED) EXCEPT ZERO IS STORED
   561
   562					DEFINE LOAD. (AC$,STR$,E$),< STR$ (<MOVE,HRRZ,HLRZ,LDB>,<AC$>,<E$>)>
   563					DEFINE STOR. (AC$,STR$,E$),< STR$ (<MOVEM,HRRM,HRLM,DPB>,<AC$>,<E$>)>
   564					DEFINE ZERO. (AC$,STR$,E$),< STR$ (<SETZM,HLLZS,HRRZS,<PRINTX ?CAN'T ZERO BYTE>>,<AC$>,<E$>)
   565					>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 18
MACTEN	MAC	12-May-72 20:51		FLAG DEFINITIONS

   566						SUBTTL	FLAG DEFINITIONS
   567
   568					;MACRO FLAG. DEFINES A LIST OF FLAGS AS BEING IN
   569					;A PARTICULAR REGISTER IN SUCH A FASHION THAT
   570					;THE BITS ARE ASSIGNED AT ASSEMBLY TIME AND THE REGISTER AND
   571					;BITS ARE "REMEMBERED" FOR FUTURE USE IN THE TX?? MACROS.
   572
   573					;;THIS WILL BE DEFINED AT SOME FUTURE TIME AND VERSION.
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 19
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- GENERATE OP CODES ABCX

   574						SUBTTL	MACRO DEFINITIONS -- GENERATE OP CODES ABCX
   575
   576					;MACRO TO GENERATE MOVEI, MOVSI, OR MOVE [] AS APPROPRIATE
   577					;	ALSO HRLOI, HRROI
   578
   579					DEFINE	MOVX	(AC,FLAG),<
   580						.XCREF
   581						TEST%%=0
   582					IFE	<<FLAG>_-^D18>,<
   583						TEST%%=1
   584						.CREF
   585						MOVEI	AC,<FLAG>
   586						.XCREF
   587					>
   588					IFN	<FLAG>,<
   589					IFE	<<FLAG>_^D18>,<
   590						TEST%%=1
   591						.CREF
   592						MOVSI	AC,(FLAG)
   593						.XCREF
   594					>
   595					IFE	<<<FLAG>_-^D18>-^O777777>,<
   596						TEST%%=1
   597						.CREF
   598						HRROI	AC,<FLAG>
   599						.XCREF
   600					>
   601					IFE	TEST%%,<
   602					IFE	<<<FLAG>_^D18>-^O777777B17>,<
   603						TEST%%=1
   604						.CREF
   605						HRLOI	AC,(<FLAG>-^O777777)
   606						.XCREF
   607					>
   608					IFE	TEST%%,<
   609						.CREF
   610						MOVE	AC,[FLAG]
   611					>>>
   612						PURGE	TEST%%
   613						.CREF>
   614
   615					;STORE (AC,FIRST,LAST,CONSTANT) PUTS CONSTANT IN FIRST THRU LAST.
   616						DEFINE	STORE(AC,FIRST,LAST,CONS),<
   617					IFE <CONS>,<	SETZM	FIRST>	;;IF CONS=0, CLEAR FIRST
   618					IFE <CONS>+1,<	SETOM	FIRST>	;;IF CONS=-1, SET FIRST TO -1
   619					IFN <CONS>*<<CONS>+1>,<MOVX	AC,<CONS>	;;ELSE DO IT
   620							   MOVEM AC,FIRST>	;; THE HARD WAY
   621					IFNB <LAST>,<			;;IF MORE THAN ONE LOCATION
   622						MOVE	AC,[FIRST,,FIRST+1]
   623						BLT	AC,LAST		;;DISTRIBUTE THE CONSTANT
   624					>>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 20
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- GENERATE OP CODES ABCX

   625					;GENERATE CAI OR CAM AS APPROPRIATE
   626
   627					DEFINE	CAX	(AC,VAL),<OP%%CA (AC,VAL,)>
   628					DEFINE	CAXL	(AC,VAL),<OP%%CA (AC,VAL,L)>
   629					DEFINE	CAXLE	(AC,VAL),<OP%%CA (AC,VAL,LE)>
   630					DEFINE	CAXE	(AC,VAL),<OP%%CA (AC,VAL,E)>
   631					DEFINE	CAXG	(AC,VAL),<OP%%CA (AC,VAL,G)>
   632					DEFINE	CAXGE	(AC,VAL),<OP%%CA (AC,VAL,GE)>
   633					DEFINE	CAXN	(AC,VAL),<OP%%CA (AC,VAL,N)>
   634					DEFINE	CAXA	(AC,VAL),<OP%%CA (AC,VAL,A)>
   635
   636					DEFINE	OP%%CA	(AC,VALUE,CODE),<
   637						.XCREF
   638					IFE	<<VALUE>_-^D18>,<
   639						.CREF
   640						CAI'CODE	AC,<VALUE>
   641						.XCREF
   642					>
   643					IFN	<<VALUE>_-^D18>,<
   644						.CREF
   645						CAM'CODE	AC,[VALUE]
   646						.XCREF
   647					>
   648						.CREF>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 21
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- GENERATE OP CODES ABCX

   649					;GENERATE IMMEDIATE OR MEMORY CONSTANTS
   650
   651					DEFINE	ADDX	(AC,VAL),<OP%%IA	(AC,VAL,ADD,SUB)>
   652					DEFINE	SUBX	(AC,VAL),<OP%%IA	(AC,VAL,SUB,ADD)>
   653					DEFINE	MULX	(AC,VAL),<OP%%IN	(AC,VAL,MUL)>
   654					DEFINE	IMULX	(AC,VAL),<OP%%IN	(AC,VAL,IMUL)>
   655					DEFINE	DIVX	(AC,VAL),<OP%%IN	(AC,VAL,DIV)>
   656					DEFINE	IDIVX	(AC,VAL),<OP%%IN	(AC,VAL,IDIV)>
   657
   658					DEFINE	OP%%IA	(AC,VALUE,CODE,ALT),<
   659						.XCREF
   660					IFE	<<<VALUE>_-^D18>-^O777777>,<
   661						.CREF
   662						ALT'I	AC,-<VALUE>
   663						.XCREF
   664					>
   665					IFN	<<<VALUE>_-^D18>-^O777777>,<
   666						OP%%IN	AC,<VALUE>,CODE
   667					>
   668						.CREF>
   669
   670					DEFINE	OP%%IN	(AC,VALUE,CODE),<
   671						.XCREF
   672					IFE	<<VALUE>_-^D18>,<
   673						.CREF
   674						CODE'I	AC,<VALUE>
   675						.XCREF
   676					>
   677					IFN	<<VALUE>_-^D18>,<
   678						.CREF
   679						CODE	AC,[VALUE]
   680						.XCREF
   681					>
   682						.CREF>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 22
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- GENERATE OP CODES ABCX

   683					;GENERATE IMMEDIATE OR MEMORY FOR FLOATING POINT
   684
   685					DEFINE	FADRX	(AC,VAL),<OP%%FA	(AC,VAL,FADR,FSBR)>
   686					DEFINE	FSBRX	(AC,VAL),<OP%%FA	(AC,VAL,FSBR,FADR)>
   687					DEFINE	FMPRX	(AC,VAL),<OP%%FP	(AC,VAL,FMPR)>
   688					DEFINE	FDVRX	(AC,VAL),<OP%%FP	(AC,VAL,FDVR)>
   689
   690					DEFINE	OP%%FA	(AC,VALUE,CODE,ALT),<
   691						.XCREF
   692					IFE	<<<VALUE>_^D18>-^O777777B17>,<
   693						.CREF
   694						ALT'I	AC,(-<VALUE>)
   695						.XCREF
   696					>
   697					IFN	<<<VALUE>_^D18>-^O777777B17>,<
   698						OP%%FP	AC,<VALUE>,CODE
   699					>
   700						.CREF
   701					>
   702
   703					DEFINE	OP%%FP	(AC,VALUE,CODE),<
   704						.XCREF
   705					IFE	<<VALUE>_^D18>,<
   706						.CREF
   707						CODE'I	AC,(VALUE)
   708						.XCREF
   709					>
   710					IFN	<<VALUE>_^D18>,<
   711						.CREF
   712						CODE	AC,[VALUE]
   713						.XCREF
   714					>
   715						.CREF>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 23
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- GENERATE OP CODES ABCX

   716					;MACRO TO GENERATE MACROS OF THE FORM TXYY.  THESE MACRO REPLACE
   717					; A TLYY OR A TRYY DEPENDING UPON THEIR ARGUMENT. SEE EXAMPLES:
   718					;
   719					;		CALL				RESULT
   720					;	TXNE	F,1B20			TRNE	F,1B20
   721					;	TXON	F,1B0			TLON	F,(1B0)
   722					;	TXZ	F,1B1!1B31		TDZ	F,[1B1!1B31]
   723					;
   724					;IF CALLED WITH ONLY ONE ARG, IT IS ASSUMED TO BE DEFINED BY A FLAG. MACRO
   725
   726						.XCREF
   727					DEFINE	TX0%%	(M,S),<
   728						IRP	M,<
   729						IRP	S,<
   730					DEFINE	TX'M'S	(AC,FLAG),<
   731						.XCREF
   732					IFB  <FLAG>,	OP%%TX	<^O37777777&AC>,1B<AC_-^D30>,TL'M'S,TR'M'S,TD'M'S
   733					IFNB <FLAG>,	OP%%TX	AC,<FLAG>,TL'M'S,TR'M'S,TD'M'S
   734						.CREF
   735					>>>>
   736
   737						TX0%%	<N,Z,O,C>,<E,N,A>
   738
   739						PURGE	TX0%%
   740						.CREF
   741
   742					DEFINE	TXN	(AC,FLAG),<
   743					IFB <FLAG>, JFCL	0
   744					IFNB <FLAG>, TRN	AC,<,,<FLAG>>
   745					>
   746					DEFINE	TXZ	(AC,FLAG),<
   747						.XCREF
   748					IFB <FLAG>, TXZ	(<^O37777777&AC>,1B<AC_-^D30>)
   749					IFNB <FLAG>,<
   750					IFN <<AC>&^O777777777760>, PRINTX ? AC IS NOT AN ACCUMULATOR
   751					IFE	<<<FLAG>_-^D18>-^O777777>,<
   752						.CREF
   753						ANDI	AC,<,,-1-<FLAG>>
   754						.XCREF>
   755					IFN	<<<FLAG>_-^D18>-^O777777>,<
   756						OP%%TX	AC,<FLAG>,TLZ,TRZ,TDZ
   757					>>	.CREF>
   758
   759					DEFINE	TXO	(AC,FLAG),<
   760						.XCREF
   761					IFB <FLAG>, TXO	(<^O37777777&AC>,1B<AC_-^D30>)
   762					IFNB <FLAG>,<
   763					IFN <<AC>&^O777777777760>, PRINTX ? AC IS NOT AN ACCUMULATOR
   764					IFE	<<<FLAG>_-^D18>-^O777777>,<
   765						.CREF
   766						ORCMI	AC,<,,-1-<FLAG>>
   767						.XCREF>
   768					IFN	<<<FLAG>_-^D18>-^O777777>,<
   769						OP%%TX	AC,<FLAG>,TLO,TRO,TDO
   770					>>	.CREF>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 24
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- GENERATE OP CODES ABCX

   771					DEFINE	TXC	(AC,FLAG),<
   772						.XCREF
   773					IFB <FLAG>, TXC	(<^O37777777&AC>,1B<AC_-^D30>)
   774					IFNB <FLAG>,<
   775					IFN <<AC>&^O777777777760>, PRINTX ? AC IS NOT AN ACCUMULATOR
   776					IFE	<<<FLAG>_-^D18>-^O777777>,<
   777						.CREF
   778						EQVI	AC,<,,-1-<FLAG>>
   779						.XCREF>
   780					IFN	<<<FLAG>_-^D18>-^O777777>,<
   781						OP%%TX	AC,<FLAG>,TLC,TRC,TDC
   782					>>	.CREF>
   783
   784					DEFINE	OP%%TX	(AC,FLAG,L,R,D)<
   785						.XCREF
   786					IFN <<AC>&^O777777777760>, PRINTX ? AC IS NOT AN ACCUMULATOR
   787					
   788						TEMP%%=0
   789					IFE	<<FLAG>_^D18>,<
   790					IFN	<FLAG>,<
   791						TEMP%%=1
   792						.CREF
   793						L	AC,(FLAG)
   794						.XCREF
   795					>>
   796					IFE	<<FLAG>_-^D18>,<
   797						TEMP%%=1
   798						.CREF
   799						R	AC,<FLAG>
   800						.XCREF
   801					>
   802					IFE	TEMP%%,<
   803						.CREF
   804						D	AC,[FLAG]
   805					>
   806						PURGE	TEMP%%
   807						.CREF>
   808
   809					;DEFINE MNEMONIC CODES FOR SOME OF ABOVE
   810
   811					DEFINE	IORX	(AC,FLAG),<TXO	AC,<FLAG>>
   812					DEFINE	ANDX	(AC,FLAG),<TXZ	AC,-1-<FLAG>>
   813					DEFINE	XORX	(AC,FLAG),<TXC	AC,<FLAG>>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 25
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- GENERATE OP CODES ABCX

   814					;MACROS TO TEST AND SET/CLEAR/COMPLEMENT FLAGS WHICH ARE NOT
   815					;IN ACCUMULATORS. BE VERY CAREFUL THAT THESE GENERATE TWO
   816					;INSTRUCTIONS, SO CAN NOT BE SKIPPED OVER.
   817					;THEY EACH HAVE TWO ARGUMENTS, THE FIRST IS A SCRATCH AC
   818					; AND THE SECOND IS THE FLAG WHICH WAS DEFINED IN A FLAG. MACRO.
   819
   820					DEFINE	TYNE.	(AC,FLAG),<
   821						MOVX	AC,1B<FLAG_-^D30>
   822						.XCREF
   823						<TDNE	AC,>!<37777777&FLAG>
   824						.CREF
   825					>
   826
   827					DEFINE	TYNN.	(AC,FLAG),<
   828						MOVX	AC,1B<FLAG_-^D30>
   829						.XCREF
   830						<TDNN	AC,>!<37777777&FLAG>
   831						.CREF
   832					>
   833
   834					DEFINE	TYO.	(AC,FLAG),<
   835						MOVX	AC,1B<FLAG_-^D30>
   836						.XCREF
   837						<IORM	AC,>!<37777777&FLAG>
   838						.CREF
   839					>
   840
   841					DEFINE	TYZ.	(AC,FLAG),<
   842						MOVX	AC,1B<FLAG_-^D30>
   843						.XCREF
   844						<ANDCAM	AC,>!<37777777&FLAG>
   845						.CREF
   846					>
   847
   848					DEFINE	TYC.	(AC,FLAG),<
   849						MOVX	AC,1B<FLAG_-^D30>
   850						.XCREF
   851						<XORM	AC,>!<37777777&FLAG>
   852						.CREF
   853					>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 26
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- GENERATE OP CODES ABCX

   854					;NOTE - "TXNI.", "TXND.", "JUMPI." & "JUMPD." MAY ASSEMBLE AS ONE OR MORE
   855					;	INSTRUCTIONS, DEPENDING ON THE ACTUAL VALUES OF THEIR ARGUMENTS.
   856					;	IN ALL CASES WHERE THE MACRO EXPANSION IS MORE THAN ONE INSTRUCTION
   857					;	IT WILL BE TRUE THAT IF CONTROL ARRIVES AT THE SECOND INSTRUCTION
   858					;	OF THE MACRO EXPANSION, CONTROL WILL UNCONDITIONALLY BE PASSED TO
   859					;	THE INSTRUCTION IMMEDIATELY FOLLOWING THE LAST INSTRUCTION OF THE
   860					;	MACRO EXPANSION (WITHOUT HAVING ALTERED ANY PART OF THE MACHINE
   861					;	STATE OTHER THAN THE PC). THUS A SKIP TYPE INSTRUCTION IMMEDIATELY
   862					;	PRECEEDING A "TXNI.", "TXND.", "JUMPI.", OR "JUMPD." MACRO WILL HAVE
   863					;	THE EFFECT OF SKIPPING OVER THE ENTIRE MACRO EXPANSION.
   864					;
   865					;
   866					;TEST (BUT DON'T MODIFY) THE FIELD
   867					;	(IN "AC") SPECIFIED BY "MASK" AND SKIP IF IT IS IDENTICAL TO "PATERN"
   868					DEFINE	TXNI.(AC,MASK,PATERN),<
   869					IFE <<MASK>_<1+^L<MASK>>>,<
   870					IFE <<MASK>&<PATERN>>,<
   871						TXNE	AC,<MASK>
   872					>
   873					IFN <<MASK>&<PATERN>>,<
   874						TXNN	AC,<MASK>
   875					>>
   876					IFN <<MASK>_<1+^L<MASK>>>,<
   877						TXCA	AC,<<PATERN>&<MASK>>
   878						JRST	.+4
   879						TXCE	AC,<<PATERN>&<MASK>>
   880						JRST	.+2
   881						TXNE	AC,<<-<PATERN>-1>&<MASK>>
   882					>>
   883
   884					;TEST (BUT DON'T MODIFY) THE FIELD
   885					;	(IN "AC") SPECIFIED BY "MASK" AND SKIP IF IT IS DIFFERENT THAN "PATERN"
   886					DEFINE	TXND.(AC,MASK,PATERN),<
   887					IFE <<MASK>_<1+^L<MASK>>>,<
   888					IFE <<MASK>&<PATERN>>,<
   889						TXNN	AC,<MASK>
   890					>
   891					IFN <<MASK>&<PATERN>>,<
   892						TXNE	AC,<MASK>
   893					>>
   894					IFN <<MASK>_<1+^L<MASK>>>,<
   895						TXCA	AC,<<PATERN>&<MASK>>
   896						JRST	.+4
   897						TXCE	AC,<<PATERN>&<MASK>>
   898						JRST	.+3
   899						TXNN	AC,<<-<PATERN>-1>&<MASK>>
   900					>>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 27
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- GENERATE OP CODES ABCX

   901					;JUMP TO "LOCATN" IF THE FIELD
   902					;	(IN "AC") SPECIFIED BY "MASK" IS IDENTICAL TO "PATERN"
   903					DEFINE	JUMPI.(AC,MASK,PATERN,LOCATN),<
   904					IFE <<MASK>_1>,<
   905					IFE <MASK>,<
   906						JUMPA	AC,LOCATN
   907					>
   908					IFN <MASK>,<
   909					IFE <<PATERN>&<MASK>>,<
   910						JUMPGE	AC,LOCATN
   911					>
   912					IFN <<PATERN>&<MASK>>,<
   913						JUMPL	AC,LOCATN
   914					>>>
   915					IFN <<MASK>_1>,<
   916						TXCA	AC,<<PATERN>&<MASK>>
   917						JRST	.+5
   918						TXCE	AC,<<PATERN>&<MASK>>
   919						JRST	.+3
   920						TXNN	AC,<<-<PATERN>-1>&<MASK>>
   921						JRST	LOCATN
   922					>>
   923
   924					;JUMP TO "LOCATN" IF THE FIELD
   925					;	(IN "AC") SPECIFIED BY "MASK" IS DIFFERENT THAN "PATERN"
   926					DEFINE	JUMPD.(AC,MASK,PATERN,LOCATN)
   927					<IFE <<MASK>_1>,<
   928					IFE <MASK>,<
   929						JUMP	AC,LOCATN
   930					>
   931					IFN <MASK>,<
   932					IFE <<PATERN>&<MASK>>,<
   933						JUMPL	AC,LOCATN
   934					>
   935					IFN <<PATERN>&<MASK>>,<
   936						JUMPGE	AC,LOCATN
   937					>>>
   938					IFN <<MASK>_1>,<
   939						TXCA	AC,<<PATERN>&<MASK>>
   940						JRST	.+5
   941						TXCE	AC,<<PATERN>&<MASK>>
   942						JRST	LOCATN
   943						TXNE	AC,<<-<PATERN>-1>&<MASK>>
   944						JRST	LOCATN
   945					>>
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 28
MACTEN	MAC	12-May-72 20:51		MACRO DEFINITIONS -- JUMPPT

   946						SUBTTL	MACRO DEFINITIONS -- JUMPPT
   947
   948					;MACRO TO JUMP DEPENDING UPON PROCESSOR TYPE
   949
   950					;CALL:	JUMPPT	TEMPAC,PDP-6 ADDR,KA-10 ADDR,KI-10 ADDR,KL-10 ADDR
   951					;	WHERE	TEMPAC IS AN AC TO USE AS A TEMP
   952					;	BLANK PROCESSORS FALL THROUGH TO NEXT INSTRUCTION
   953
   954					DEFINE	JUMPPT	(AC,CP166,KA10,KI10,KL10,KX,KY,KZ,%1),<
   955					IFDIF <CP166><KA10>,<
   956						JFCL	1,.+1		;;CLEAR PC-CHANGE FLAG
   957						JRST	.+1		;;SET PC-CHANGE
   958					IFNB <CP166>,<	JFCL	1,CP166
   959					  IFNB <KA10>,<IFIDN <KA10><KI10>,<IFIDN <KI10><KL10>,< JRST	KA10>>>>
   960					IFB <CP166>,<	JFCL	1,%1
   961					  IFIDN <KA10><KI10>,<IFIDN <KI10><KL10>,< JRST	KA10>>>
   962					>;;END IFDIF <CP166><KA10>
   963					
   964					IFDIF <KA10><KI10>,<
   965						HRLOI	AC,-2		;;SET FOR KA/KI TEST
   966					IFNB <KA10>,<	AOBJP	AC,KA10
   967					  IFNB <KI10>,<IFIDN <KI10><KL10>,<JRST	KI10>>>
   968					IFB <KA10>,<IFDIF <KI10><KL10>,<AOBJP AC,%1>
   969						    IFIDN <KI10><KL10>,<AOBJN AC,KI10>>
   970					>;;END IFDIF <KA10><KI10>
   971					
   972					IFDIF <KI10><KL10>,<
   973						IF2,<IFE AC,<PRINTX ? AC MUST BE NON-ZERO IN JUMPPT>>
   974						MOVEI	AC,0		;;SET FOR KI/KL TEST
   975						BLT	AC,0		;;DO TEST
   976					IFNB <KI10>,<	JUMPE	AC,KI10
   977					  IFNB <KL10>,<	JRST	KL10>>
   978					IFB <KI10>,<	JUMPN	AC,KL10>
   979					>;;END IFDIF <KI10><KL10>
   980					
   981					%1:>
   982
   983
   984					;DEFINE UNITS OF STORAGE ALLOCATION
   985
   986			002000		.SUAP6==^D1024	;PDP-6
   987			002000		.SUAKA==^D1024	;KA-10
   988			001000		.SUAKI==^D512	;KI-10
   989			001000		.SUAKL==^D512	;KL-10
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 29
MACTEN	MAC	12-May-72 20:51		USEFUL OPDEFS

   990						SUBTTL	USEFUL OPDEFS
   991
   992		254000	000000			OPDEF	PJRST	[JRST]		;PUSHJ/POPJ
   993		254100	000000			OPDEF	PJRSTF	[JRSTF]		;PUSHJ/POPJ
   994		265000	000000			OPDEF	PJSP	[JSP]		;MOVEI .+1/PUSHJ/POPJ
   995		321000	000000			OPDEF	PJUMPL	[JUMPL]
   996		323000	000000			OPDEF	PJMPLE	[JUMPLE]
   997		322000	000000			OPDEF	PJUMPE	[JUMPE]
   998		326000	000000			OPDEF	PJUMPN	[JUMPN]
   999		327000	000000			OPDEF	PJUMPG	[JUMPG]
  1000		325000	000000			OPDEF	PJMPGE	[JUMPGE]
  1001
  1002					;OPDEF THE KI-10 CONCEALED PAGE GATE-KEEPER
  1003
  1004		254040	000000			OPDEF	PORTAL	[JRST 1,]
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 30
MACTEN	MAC	12-May-72 20:51		SYMBOLS FOR THE CONTROL CHARACTERS

  1005						SUBTTL	SYMBOLS FOR THE CONTROL CHARACTERS
  1006
  1007			000000		.CHNUL==000	;NULL
  1008			000001		.CHCNA==001
  1009			000002		.CHCNB==002
  1010			000003		.CHCNC==003
  1011			000004		.CHCND==004
  1012			000005		.CHCNE==005
  1013			000006		.CHCNF==006
  1014			000007		.CHBEL==007	;BELL
  1015			000010		.CHCNH==010
  1016			000011		.CHTAB==011	;TAB
  1017			000012		.CHLFD==012	;LINE-FEED
  1018			000013		.CHVTB==013	;VERTICAL TAB
  1019			000014		.CHFFD==014	;FORM FEED
  1020			000015		.CHCRT==015	;CARRIAGE RETURN
  1021			000016		.CHCNN==016
  1022			000017		.CHCNO==017
  1023			000020		.CHCNP==020
  1024			000021		.CHCNQ==021
  1025			000022		.CHCNR==022
  1026			000023		.CHCNS==023
  1027			000024		.CHCNT==024
  1028			000025		.CHCNU==025
  1029			000026		.CHCNV==026
  1030			000027		.CHCNW==027
  1031			000030		.CHCNX==030
  1032			000031		.CHCNY==031
  1033			000032		.CHCNZ==032
  1034			000033		.CHESC==033	;ESCAPE
  1035			000034		.CHCBS==034	;CONTROL BACK SLASH
  1036			000035		.CHCRB==035	;CONTROL RIGHT BRACKET
  1037			000036		.CHCCF==036	;CONTROL CIRCONFLEX
  1038			000037		.CHCUN==037	;CONTROL UNDERLINE
  1039
  1040			000175		.CHALT==175	;OLD ALTMODE
  1041			000176		.CHAL2==176	;ALTERNATE OLD ALTMODE
  1042			000177		.CHDEL==177	;DELETE
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 31
MACTEN	MAC	12-May-72 20:51		HARDWARE BITS OF INTEREST TO USERS

  1043						SUBTTL	HARDWARE BITS OF INTEREST TO USERS
  1044
  1045					;PC FLAGS
  1046
  1047		400000	000000		PC.OVF==1B0	;OVERFLOW
  1048		200000	000000		PC.CY0==1B1	;CARRY 0
  1049		100000	000000		PC.CY1==1B2	;CARRY 1
  1050		040000	000000		PC.FOV==1B3	;FLOATING OVERFLOW
  1051		020000	000000		PC.BIS==1B4	;BYTE INCREMENT SUPPRESSION
  1052		010000	000000		PC.USR==1B5	;USER MODE
  1053		004000	000000		PC.UIO==1B6	;USER IOT MODE
  1054		002000	000000		PC.LIP==1B7	;LAST INSTRUCTION PUBLIC
  1055		001000	000000		PC.AFI==1B8	;ADDRESS FAILURE INHIBIT
  1056		000600	000000		PC.ATN==3B10	;APR TRAP NUMBER
  1057		000100	000000		PC.FUF==1B11	;FLOATING UNDERFLOW
  1058		000040	000000		PC.NDV==1B12	;NO DIVIDE
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 32
MACTEN	MAC	12-May-72 20:51		

  1059						SUBTTL
  1060
  1061						.XCREF
  1062
  1063		000200	000025		%%MACT==<VRSN. (MAC)>
  1064						PURGE	MACWHO,MACVER,MACMIN,MACEDT
  1065
  1066
  1067						IF1,<	ASUPPRESS>
  1068						IFNDEF %..C,<END>	;END UNIVERSAL OF MACTEN

NO ERRORS DETECTED

PROGRAM BREAK IS 000000
CPU TIME USED 00:38.282

20P CORE USED
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page S-1
MACTEN	MAC	12-May-72 20:51		SYMBOL TABLE

FW.ORD	777777	777777	spd	.CHCNY		000031	spd	
LH.ALF	777777	000000	spd	.CHCNZ		000032	spd	
MACASC	466030	300000	spd	.CHCRB		000035	spd	
MACSIX	554143	000000	spd	.CHCRT		000015	spd	
PC.AFI	001000	000000	spd	.CHCUN		000037	spd	
PC.ATN	000600	000000	spd	.CHDEL		000177	spd	
PC.BIS	020000	000000	spd	.CHESC		000033	spd	
PC.CY0	200000	000000	spd	.CHFFD		000014	spd	
PC.CY1	100000	000000	spd	.CHLFD		000012	spd	
PC.FOV	040000	000000	spd	.CHNUL		000000	spd	
PC.FUF	000100	000000	spd	.CHTAB		000011	spd	
PC.LIP	002000	000000	spd	.CHVTB		000013	spd	
PC.NDV	000040	000000	spd	.INFIN	377777	777777	spd	
PC.OVF	400000	000000	spd	.MINFI	400000	000000	spd	
PC.UIO	004000	000000	spd	.SUAKA		002000	spd	
PC.USR	010000	000000	spd	.SUAKI		001000	spd	
PJMPGE	325000	000000		.SUAKL		001000	spd	
PJMPLE	323000	000000		.SUAP6		002000	spd	
PJRST	254000	000000		.ZERO5		000000	spd	
PJRSTF	254100	000000		
PJSP	265000	000000		
PJUMPE	322000	000000		
PJUMPG	327000	000000		
PJUMPL	321000	000000		
PJUMPN	326000	000000		
PORTAL	254040	000000		
RH.ALF		777777	spd	
VR.EDT		777777	spd	
VR.MIN	000077	000000	spd	
VR.VER	077700	000000	spd	
VR.WHO	700000	000000	spd	
%%MACT	000200	000025	spd	
.CHAL2		000176	spd	
.CHALT		000175	spd	
.CHBEL		000007	spd	
.CHCBS		000034	spd	
.CHCCF		000036	spd	
.CHCNA		000001	spd	
.CHCNB		000002	spd	
.CHCNC		000003	spd	
.CHCND		000004	spd	
.CHCNE		000005	spd	
.CHCNF		000006	spd	
.CHCNH		000010	spd	
.CHCNN		000016	spd	
.CHCNO		000017	spd	
.CHCNP		000020	spd	
.CHCNQ		000021	spd	
.CHCNR		000022	spd	
.CHCNS		000023	spd	
.CHCNT		000024	spd	
.CHCNU		000025	spd	
.CHCNV		000026	spd	
.CHCNW		000027	spd	
.CHCNX		000030	spd	

MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 1
MACTEN	MAC	12-May-72 20:51		DEC-10 UNIVERSAL PARAMETERS


Symbol cross reference

FW.ORD	   320#
LH.ALF	   318#
MACASC	   287#
MACSIX	   286#
PC.AFI	  1055#
PC.ATN	  1056#
PC.BIS	  1051#
PC.CY0	  1048#
PC.CY1	  1049#
PC.FOV	  1050#
PC.FUF	  1057#
PC.LIP	  1054#
PC.NDV	  1058#
PC.OVF	  1047#
PC.UIO	  1053#
PC.USR	  1052#
RH.ALF	   319#
VR.EDT	   304#
VR.MIN	   303#
VR.VER	   302#
VR.WHO	   300#
%..C	   291
.CHAL2	  1041#
.CHALT	  1040#
.CHBEL	  1014#
.CHCBS	  1035#
.CHCCF	  1037#
.CHCNA	  1008#
.CHCNB	  1009#
.CHCNC	  1010#
.CHCND	  1011#
.CHCNE	  1012#
.CHCNF	  1013#
.CHCNH	  1015#
.CHCNN	  1021#
.CHCNO	  1022#
.CHCNP	  1023#
.CHCNQ	  1024#
.CHCNR	  1025#
.CHCNS	  1026#
.CHCNT	  1027#
.CHCNU	  1028#
.CHCNV	  1029#
.CHCNW	  1030#
.CHCNX	  1031#
.CHCNY	  1032#
.CHCNZ	  1033#
.CHCRB	  1036#
.CHCRT	  1020#
.CHCUN	  1038#
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 1
MACTEN	MAC	12-May-72 20:51		DEC-10 UNIVERSAL PARAMETERS


Symbol cross reference

.CHDEL	  1042#
.CHESC	  1034#
.CHFFD	  1019#
.CHLFD	  1017#
.CHNUL	  1007#
.CHTAB	  1016#
.CHVTB	  1018#
.INFIN	   316#
.MINFI	   317#
.SUAKA	   987#
.SUAKI	   988#
.SUAKL	   989#
.SUAP6	   986#
.ZERO5	   321#
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 1
MACTEN	MAC	12-May-72 20:51		DEC-10 UNIVERSAL PARAMETERS


Macro/Opdef cross reference

ADDX	   651#
ALIGN.	   455#
ANDX	   812#
BTSWP.	   459#
BUILD$	   143#
CAX	   627#
CAXA	   634#
CAXE	   630#
CAXG	   631#
CAXGE	   632#
CAXL	   628#
CAXLE	   629#
CAXN	   633#
CINFO.	   480#
CONT.	   394#
DEFST.	   526#
DF%%ST	   540#
DIVX	   655#
EXT	   363#
FADRX	   685#
FDVRX	   688#
FILIN.	   450#
FMPRX	   687#
FR%%AM	   516#
FRAME.	   497#
FSBRX	   686#
GLOB	   372#
IDIVX	   656#
IMULX	   654#
INSVL.	   465#
IORX	   811#
JUMPD.	   927#
JUMPI.	   903#
JUMPPT	   954#
LFTBT.	   445#
LOAD.	   562#
LSTOF.	   407#
LSTON.	   415#
MACPTX	   295
MACUNV	   291
MASK.	   437#
MODSHW	   278#
MOVX	   579#
MULX	   653#
ND	   327#
NDS.	   345#
OP%%CA	   636#
OP%%FA	   690#
OP%%FP	   703#
OP%%IA	   658#
MACTEN - DECSYSTEM-10 COMMON PARAMETER FILE  %2(25)	MACRO %53B(1156)-1 13:38  8-Nov-85 Page 1
MACTEN	MAC	12-May-72 20:51		DEC-10 UNIVERSAL PARAMETERS


Macro/Opdef cross reference

OP%%IN	   670#
OP%%TX	   784#
PJMPGE	  1000#
PJMPLE	   996#
PJRST	   992#
PJRSTF	   993#
PJSP	   994#
PJUMPE	   997#
PJUMPG	   999#
PJUMPL	   995#
PJUMPN	   998#
POINTR	   432#
PORTAL	  1004#
POS	   428#
REDEF.	   484#
RGHBT.	   441#
SHOW.	   336#
STOR.	   563#
STORE	   616#
SUBX	   652#
TITLE.	   105#	   285
TXC	   771#
TXN	   742#
TXND.	   886#
TXNI.	   868#
TXO	   759#
TXZ	   746#
TYC.	   848#
TYNE.	   820#
TYNN.	   827#
TYO.	   834#
TYZ.	   841#
VRSN.	   311#
WID	   425#
XORX	   813#
XP	   353#
ZERO.	   564#  @y