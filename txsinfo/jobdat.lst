JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 1
JOBDAT	MAC	12-May-72 20:50		T. HASTINGS/TH/PFC/JNG  TS 16 AUG 77   V431(447)

     1						SUBTTL	T. HASTINGS/TH/PFC/JNG  TS 16 AUG 77   V431(447)
     2
     3		043100	000447		%JOBDT==:43100,,447
     4
     5
     6
     7
     8					;THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY ONLY BE USED
     9					;  OR COPIED IN ACCORDANCE WITH THE TERMS OF SUCH LICENSE.
    10					;
    11					;COPYRIGHT (C) 1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979 BY DIGITAL EQUIPMENT C
    12					ORP., MAYNARD, MASS.
    13
    14					;TO ELIMINATE MOST OF UNWANTED GLOBALS USERS
    15					;ASSEMBLING INSTRUCTIONS TO MAKE USER VERSION FOR CUSP:
    16					;.COMPILE  JOBDAT
    17					;	INSTEAD, THIS MAKES A JOBDAT.UNV FOR USERS
    18					;	IF SYMBOL %..UNV IS DEFINED
    19
    20					;MONITOR ASSEMBLY INSTRUCTIONS:
    21					;.COMPILE  EJBDAT.REL=F.MAC+S.MAC+JOBDAT.MAC	;IF PRE 5.07
    22					;.COMPILE F??.MAC,S.MAC,EJBDAT.REL=FTEJBD.MAC+JOBDAT.MAC	;IF 5.07 OR LATER
    23					;.COMPILE FVM.MAC,S.MAC,VJBDAT.REL=FTEJBD.MAC+JOBDAT.MAC	;IF 6.01 OR LATER
    24					;	WHERE FTEJBD.MAC IS JUST P=1
    25					;	NOTE--IF LEVEL C S.MAC IS USED, EJBDAT WILL BE FOR LEVEL C
    26					;		OTHERWISE, IT WILL BE FOR LEVEL D.
    27					;		USER VERSION IS THE SAME IN EITHER CASE.
    28
    29
    30
    31
    32
    33					;CONDITIONAL ASSEMBLY OPTIONS:
    34
    35					IFNDEF FTCN6,<FTCN6==0>		;REMOVE .JBCN6
    36					IFNDEF FTJOB,<FTJOB==0>		;REMOVE "JOB" SYMBOLS
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 2
JOBDAT	MAC	12-May-72 20:50		REVISION HISTORY

    37						SUBTTL	REVISION HISTORY
    38
    39					;%426(431) MAY 1971, WITH 5.03
    40
    41					;432	COSMETIC IMPROVMENTS TO CLEAN UP COMMENTS;
    42					;	SYMBOLS NOT DEFINING WORDS ARE NOW TABBED IN; FIX
    43					;	USER SYMBOLS AT CONSTANT LOCATIONS.
    44					;433	ADD CHECKOUT INSTRUCTIONS.
    45					;434	DEFINE .JBHSA,.JBH41,.JBHRN AS USER SYMBOLS.
    46					;435	DEFINE .JBPFH,.JBHGA AND MAKE 6.01(VM) CHANGES.
    47					;436	DEFINE .JBOVL FOR LINK-10 V.2.
    48					;437	REMOVE .JBCN6 (UNDER FTCN6)
    49					;440	REMOVE JOBXXX IN USER VERSION (UNDER FTJOB)
    50					;%427(440)	JAN, 1974
    51
    52					;441	(10-13,901) PRODUCE JOBDAT.UNV
    53					;442	PURGE LOCAL MJDA
    54					;443	PURGE LOCAL MACROS
    55					;444	IF FTJOB=0, DON'T PUT JOBXXX SYMBOLS IN THE ENTRY BLOCK
    56					;447	ADD .JBEDV
    57					;%431(447)	FEB 1979	7.00 RELEASE
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 3
JOBDAT	MAC	12-May-72 20:50		CHECKOUT INSTRUCTIONS

    58						SUBTTL	CHECKOUT INSTRUCTIONS
    59
    60					;1. PRODUCE NEW USER VERSION:		.COMPILE JOBDAT
    61					;   RUN GLOB TO GET LIST OF SYMBOLS:	.R GLOB
    62					;					*NUJBDT=JOBDAT$
    63					;   COMPARE WITH PREVIOUS USER VERSION:	.R GLOB
    64					;					*OUJBDT=JOBDAT[10,7]$
    65					;					.R FILCOM
    66					;					*TTY:=OUJBDT.GLB,NUJBDT/1L
    67					;   VERIFY OUTPUT.
    68					;
    69					;2. PRODUCE NEW EXEC VERSION:		.COMPILE F??,S,EJBDAT.REL=FTEJBD+JOBDAT
    70					;   RUN GLOB TO GET LIST OF SYMBOLS:	.R GLOB
    71					;					*NEJBDT=EJBDAT$
    72					;   COMPARE WITH PREVIOUS EXEC VERSION:	.R GLOB
    73					;					*OEJBDT=EJBDAT[10,7]$
    74					;					.R FILCOM
    75					;					*TTY:=OEJBDT.GLB,NEJBDT/1L
    76					;   VERIFY OUTPUT.
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 4
JOBDAT	MAC	12-May-72 20:50		MACRO DEFINITIONS FOR THIS ROUTINE

    77						SUBTTL	MACRO DEFINITIONS FOR THIS ROUTINE
    78
    79					;THIS AREA PROVIDES STORAGE OF ITEMS OF INTEREST TO BOTH
    80					;THE MONITOR AND THE USER
    81
    82					;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    83					;;;   ALL NEW USER SYMBOLS MUST BE OF THE FORM:                ;;;
    84					;;;   .JBXXX   IF THE SYMBOL IS IN THE LOW SEGMENT             ;;;
    85					;;;   .JBHXX   IF THE SYMBOL IS IN THE HIGH SEGMENT            ;;;
    86					;;;							       ;;;
    87					;;;   THE OLD FORMS OF JOBXXX AND JOBHXX ARE LEGAL ONLY FOR    ;;;
    88					;;;   COMPATABILITY WITH OLD PROGRAMS AND WILL EVENTUALLY DIE  ;;;
    89					;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    90					;;;   SYMBOLS NOT DEFINING WORDS ARE TABBED IN ONCE            ;;;
    91					;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    92
    93					;MACRO TO DEFINE SYMBOLS FOR USER USE
    94					;THESE CANNOT BE CHANGED WITHOUT INVALIDATING OLD SAVED FILES
    95
    96						DEFINE U(SYMBOL,VALUE,LENGTH)
    97						<SYMBOL=VALUE
    98						IFNDEF %..UNV,ENTRY SYMBOL
    99						LOC=VALUE+LENGTH>
   100
   101					;MACRO TO DEFINE SUPPRESSED SYMBOLS FOR USER USE
   102
   103						DEFINE US(SYMBOL,VALUE,LENGTH)
   104						<SYMBOL==VALUE
   105						IFNDEF %..UNV,INTERN SYMBOL
   106						LOC=VALUE+LENGTH>
   107
   108					;MACRO TO DEFINE SYMBOLS FOR USER USE OF BOTH JOB AND .JB FORMAT
   109					;SAME AS U
   110
   111						DEFINE UJOB(SYMBOL,VALUE,LENGTH)
   112						<.JB'SYMBOL=VALUE
   113						IFNDEF %..UNV,ENTRY .JB'SYMBOL
   114						IFN FTJOB,<
   115						JOB'SYMBOL=VALUE
   116						IFNDEF %..UNV,ENTRY JOB'SYMBOL>
   117						LOC=VALUE+LENGTH>
   118
   119					;MACRO TO DEFINE SYMBOLS FOR USER USE OF BOTH JOB AND .JB FORMAT
   120					;SAME AS US
   121
   122						DEFINE USJOB(SYMBOL,VALUE,LENGTH)
   123						<.JB'SYMBOL==VALUE
   124						IFNDEF %..UNV,ENTRY .JB'SYMBOL
   125						IFN FTJOB,<
   126						JOB'SYMBOL==VALUE
   127						IFNDEF %..UNV,ENTRY JOB'SYMBOL>
   128						LOC=VALUE+LENGTH>
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 5
JOBDAT	MAC	12-May-72 20:50		MACRO DEFINITIONS FOR THIS ROUTINE

   129					;THESE MACROS PROVIDE STORAGE OF ITEMS OF INTEREST TO ONLY MONITOR
   130
   131
   132					;MACRO TO DEFINE SYMBOLS FOR MONITOR USE ONLY
   133					;THESE MAY BE CHANGED TO SUIT MONITOR
   134
   135						DEFINE M(SYMBOL,VALUE,LENGTH)
   136						<IFE  U2,<	SYMBOL==VALUE
   137						IFNDEF UJOBDAT,<INTERNAL SYMBOL> ;MAKE GLOBAL ONLY IF ASSEM FOR MONITOR
   138						LOC=VALUE+LENGTH>
   139						IFN  U2,<PURGE  SYMBOL>>
   140
   141					;MACRO TO DEFINE PARAMETERS OF INTEREST TO MONITOR ONLY
   142					;THESE MAY BE CHANGED TO SUIT MONITOR & WILL NOT PRINT OUT WITH DDT
   143
   144						DEFINE XP(SYMBOL,VALUE)
   145						<IFE  U2,<	SYMBOL==VALUE
   146						IFNDEF UJOBDAT,<INTERN SYMBOL>>	;MAKE GLOBAL ONLY IF ASSEM FOR MONITOR
   147						IFN  U2,<PURGE  SYMBOL>>
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 6
JOBDAT	MAC	12-May-72 20:50		MACRO DEFINITIONS FOR THIS ROUTINE

   148					;DEFINE ASSEMBLY PARAMETERS:
   149					;	UJOBDAT=DEFINED IF USER JOBDAT
   150					;	U2=USER JOBDAT PASS 2
   151					;	LC=4S72 (LEVEL-C) MONITOR JOBDAT
   152					;	UNIV=MONITOR WITH UNIVERSAL F, S
   153					;	VM=6.01 (VM) MONITOR JOBDAT
   154
   155			000001		IFNDEF P,<IFNDEF PDP,<UJOBDAT==1>>  ;IF NOT ASSEMBLED WITH S.MAC, MAKE USER VERSION
   156
   157					IFDEF UJOBDAT,<
   158			000000			R=0		;DEFINE MONITOR ACS SO USER VERSION WILL ASSEMBLE
   159			000000			P=0		;OK TO DEFINE TO BE WRONG SINCE DO NOT APPEAR IN U MACRO
   160			000001		IF2,<  U2==1>		;FLAG SPECIAL HANDLE IN PASS 2 FOR USER VERSION
   161					>
   162					IFNDEF  U2,<U2==0>
   163
   164					IFNDEF	UJOBDAT,<IFDEF FTDISK,<IFNDEF P1,<LC=0>>>  ;SET LC=0 IF LEV.C MONITOR VERSION
   165					IFNDEF	LC,<LC=1>			;ELSE, SET IT TO 1
   166
   167					IFNDEF UJOBDAT,<IFNDEF FTDISK,<UNIV==1  ;IF MONITOR BUT FTDISK UNDEFINED,
   168								SEARCH F,S	;5.07 USES UNIVERSAL F??.MAC,S.MAC
   169							  PURGE P>>		;REMOVE DUMMY P
   170										;  THEN MUST BE UNIVERSAL F,S
   171					IFNDEF UNIV,<UNIV==0>			;  ELSE, PRE 5.07, SO NO UNIVERSALS
   172
   173					IF1,<
   174					IFN	UNIV,<VM=FTVM>
   175					IFE	UNIV,<IFDEF FTVM,<VM=FTVM>>	;IF 6-SERIES MONITORS, VM=FTVM
   176					>
   177					IFNDEF	VM,<VM=0>
   178
   179
   180
   181					IFDEF UJOBDAT,<
   182					IFNDEF %..UNV,TITLE	JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 
   183					IFDEF %..UNV,<.DIRECTIVE	.NOBIN	;SUPPRESS BINARY
   184							%%JOBD==%JOBDT	;STANDARD UNIVERSAL VERSION
   185							PURGE %JOBDT
   186						UNIVERSAL	JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 
   187					>	;END IFDEF %..UNV
   188					>
   189
   190					IFNDEF UJOBDAT,<
   191					FTJOB==1	;FORCE JOBXXX SYMBOLS
   192					IFE VM,<
   193					DATJOB:	IFNDEF %..UNV,ENTRY	DATJOB
   194						TITLE	EJBDAT - EXEC VERSION OF JOB DATA AREA
   195						IFNDEF	P,<P==PDP>	;IN CASE OF OLD MONITORS
   196						IFNDEF	R,<R==PROG>	; ..
   197					>
   198					IFN VM,<
   199					VMDTJB:	IFNDEF %..UNV,ENTRY	VMDTJB
   200						TITLE	VJBDAT - VM EXEC VERSION OF JOB DATA AREA
   201					>
   202					>
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 7
JOBDAT	MAC	12-May-72 20:50		LOW SEGMENT DATA AREA

   203						SUBTTL	LOW SEGMENT DATA AREA
   204
   205					M JOBAC,0,20		^;PLACE WHERE USER ACS ARE STORED ON UUO CALLS
   206								;IE RELATIVE 0-17 IN USER AREA
   207					M JOBDAC,LOC,20		^;PLACE WHERE HARDWARE ACS(0-17) ARE STORED
   208								;WHEN JOB IS INACTIVE. THESE ARE EITHER THE
   209								;USERS AC IF JOB WAS STOPPED IN USER MODE
   210								;OR ARE THE EXEC IF STOPED IN EXEC MODE
   211								;0-16 ALSO STORED HERE ON CLK INTERRUPTS
   212						XP JOBDPD,JOBDAC+P	^;AC P DUMPED HERE
   213						XP JOBDPG,JOBDAC+R	^;AC R DUMPED HERE
   214						IFE	LC,<
   215						XP JOBD14,JOBDAC+14	;AC 14 DUMPED HERE
   216						>
   217						XP JOBD15,JOBDAC+15	^;AC 15 DUMPED HERE
   218						XP JOBD16,JOBDAC+16	^;AC 16 DUMPED HERE
   219						XP JOBD17,JOBDAC+17	^;AC 17 DUMPED HERE
   220					UJOB UUO,40,1		^;USER UUO TRAP LOC.(UUO STORED HERE)
   221					UJOB 41,41,1		^;USER UUO JSR LOCATION
   222								;(SET FROM HIGH SEG DATA AREA ON GET IN NO LOW FILE)
   223					UJOB ERR,42,1		^;LH UNUSED-SAVE FOR LATER THINGS - SO USER PROGRAMS
   224								;SHOULD IGNORE LH IN ALL PROGRAMS
   225								;RH=COUNT OF NO. OF ERRORS IN RPG(RAPID PROGRAM
   226								;GENERATION) SEQUENCE OF CUSPS.
   227								;NOT CHANGED FROM GET TO GET.
   228					M JOBENB,43,1		^;LH UNUSED
   229								;RH=APR CONSO FLAGS FOR USER APR TRAPPING
   230								;SET BY CALL [SIXBIT /APRENB/]
   231					UJOB REL,44,1		^;LH=0 - RH=HIGHEST REL. ADR. IN USER AREA(IE LOW SEGMENT)
   232								;SET BY MONITOR EACH TIME JOB RUNS OR CHANGES CORE SIZE
   233						IFN	VM,<LOC=JOBPDO-.JDAT>
   234					M JOBPD1,LOC,0		^;FIRST LOC. OF SYSTEM UUO PUSHDOWN LIST
   235						XP JOBPDL,JOBPD1-1	^;FIRST LOC.-1
   236						XP JOBPD3,JOBPDL+3	^;PLACE FOR STORING FIRST PUSH IN A UUO ROUTINE
   237									; (THIRD ENTRY)USED BY RUN AND GETSEG UUOS
   238					UJOB BLT,45,3			^;3 WORDS USED BY LINKING LOADER TO MOVE
   239									; PROGRAM DOWN BEFORE CALLING EXIT.
   240									;OK TO USE EXEC PD LIST BEFORE EXECUTING UUO
   241			000071			IFN	LC,<LOC=71>	;(LEVEL D)
   242						IFE	LC,<LOC=72>	;(LEVEL C)
   243									;LAST LOC+1 OF PD LIST. IE THIS LOC CLOBBERED
   244									; ON PUSH DOWN LIST OVERFLOW DURING EXEC UUO
   245									; WHICH IS OK SINCE CONTENTS ARE COPIED
   246									; INTO THE MONITOR WHEN JOB RUNS
   247						IFN	VM,<LOC=JOBPDL+PDLLEN>
   248						XP JOBLPD,LOC-1		^;LAST LOC OF PDL AREA
   249									; FROM JOBPD1+1 THRUJOB LPD ARE RESTORED FROM
   250									; EXTENDED PDL WHEN IT IS BEING RETURNED
   251						XP MJOBPD,JOBPDL-LOC	^;MINUS LENGTH OF PUSHDOWN LIST
   252						XP MJOBP1,MJOBPD+1	^;-LENGTH+1
   253						XP MAXPDL,-MJOBPD	^;MAX. LENGTH OF ALL PD LISTS IN MONITOR
   254									; NULPDL AND ERRPDL ARE SHORTER
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 8
JOBDAT	MAC	12-May-72 20:50		LOW SEGMENT DATA AREA

   255						XP MMXPDL,MJOBPD	^;MINUS MAX. LENGTH OF ALL PD LISTS IN MONITOR
   256						IFN	VM,<LOC=LOC+1>
   257						XP JOBPRT,LOC		^;FIRST LOC PROTECTED BY BEING COPIED INTO MONITOR
   258						XP JOBPR1,JOBPRT+1	^;FIRST LOC+1
   259									;
   260									;HERE DOWN PROTECTED
   261									;
   262					IFN	LC,<IFE VM,<	;(5-SERIES ONLY)
   263					M JOBEPL,LOC,1		^IFE  U2,<	JOBEPL==LOC
   264						IFNDEF UJOBDAT,<INTERNAL JOBEPL> ;MAKE GLOBAL ONLY IF ASSEM FOR MONITOR
   265						LOC=LOC+1>
   266						IFN  U2,<PURGE  JOBEPL>^;LH=UNUSED AND IS ASSUMED ZERO.
   267								; COULD BE USED FOR SOMETHING WITH SMALL CODE CHANGE
   268								;RH=0 OR EXEC CORE ADDRESS OF EXTENDED EXEC PD LIST
   269								; IF PD LIST IN JOB DATA AREA OVERFLOWED ON EXEC UUO
   270								; 0 MEANS JOB DOES NOT HAVE EXEC CORE.  EXEC CORE
   271								; IS RETURNED ON UUO RETURN TO USER, CALL RESET,AND
   272								; CORE 0 COMMAND AND KJOB UUO.
   273					>>			;(END LEVEL D ONLY)
   274					M JOBHCU,LOC,1		^;HIGHEST USER IO CHANNEL IN USE
   275								;ONLY JOBJDA...JOBJDA+C(JOBHCU) ARE COPIED INTO
   276								;MONITOR WHEN JOB IS RUN. 0 MEANS NONE OR
   277								;CHAN. 0 IN USE, NEG LH MEANS SAVEGET HAS ACTIVE IO(RH STILL
   278								; HIGHEST CHAN IN USE)
   279					M JOBPC,LOC,1		^;JOB PC WHEN JOB INACTIVE
   280					IFN	VM,<
   281					M JBMDDT,LOC,1		;PMP COPY OF .JBDDT
   282					>
   283			000071			MJDA==LOC
   284					UJOB DDT,74,1		^;LH UNUSED,RH=STARTING ADDRESS OF USER DDT
   285						XP .JBLUL,20	^;MAXIMUM LENGTH OF A MONITOR MUUO ARGUMENT LIST
   286						XP JOBUAL,.JBDDT+1	^;WHERE MONITOR MUUO ARGUMENTS ARE STORED
   287			000075			IFE VM,<MJDA==LOC>
   288			000075			JDA==LOC
   289									;
   290									;HERE DOWN "SAVED"
   291									;
   292						XP JOBSAV,.JBDDT-1	^;FIRST LOC.-1 WRITTEN BY SAVE COMMAND
   293					M JOBJDA,MJDA,20	^;JOB DEVICE ASSIGNMENT TABLE
   294								;LH=UUOS DONE SO FAR, RH=ADR. OF DEVICE DATA BLOCK IN MONITOR
   295						XP JOBSV,JDA+1		^;FIRST LOC READ INTO OR WRITTEN FROM BY NEW SAVGET
   296									; WHICH ZERO COMPRESSES ON ALL DEVICES
   297									; THIS LOC CONTAINS THE FIRST IOWD WITH NO. OF DATA
   298									; WORDS IN LH, FIRST ADR-1 IN RH
   299									; MONITOR SUPPRESSES STORING IN RH OF JOBHRL DURING
   300									; SAVEGET(USRCHU NEG.)
   301									; SO THAT OLD ZERO COMPRESSED DECTAPE FILES WILL
   302									; ALWAYS FIT IN CORE (JOBHRL USED TO BE 0).  THIS
   303									; CHECK COULD HAVE BEEN ELIMINATED, IF JOBSV HAD BEEN
   304									; DEFINED AS JOBHRL+1(JOBSYM), HOWEVER JOBSYM ALMOST
   305									; ALWAYS HAS NON-ZERO DATA, SO SAVEGET WOULD HAVE TO
   306									; BE WRITTEN TO EXPAND DOWN OR UP RATHER THAN JUST UP
   307						XP JOBSVM,JOBSV-1	^;FIRST LOC-1, USED FOR SETTING UP DUMP MODE
   308									; COMMAND LIST FOR SAVGET
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 9
JOBDAT	MAC	12-May-72 20:50		LOW SEGMENT DATA AREA

   309						XP JOBSV3,JOBSV+3	^;LOC WHICH SHOULD NOT CONTAIN 0 UNLESS FILE WAS
   310									; CREATED BY CONVERTING OLD FORMAT TO NEW FORMAT
   311									; DECTAPE USING CONVRT PROGRAM
   312						XP JOBNSV,JOBSV+14	^;JOBSV+4...JOBSV+7--USED TO WRITE NULL HIGH AND
   313									; LOW FILE ON MTA ONLY WHEN SEGMENT HAS NOTHING
   314									; TO BE WRITTEN.  THUS MTA ALWAYS WRITES 2 FILES.
   315						XP JOBSVD,JOBSVM-JOBSAV	^;NO. OF LOC. TO MOVE DOWN OLD (NON-COMPRESSED DSK)
   316									; SAVE FILES WHICH WERE ALWAYS WRITTEN FROM JOBSAV+1
   317						XP JOBSDP,JOBSV-JOBSAV	^;NO. OF LOCATIONS TO MOVE DOWN CONVRTED SAVE FILES
   318									; WHICH ARE ALWAYS WRITTEN FROM JOBSAV+1 AND HAVE
   319									; AN IOWD ADDED ON FRONT TO LOOK LIKE A COMPRESSED FILE
   320					IFN FTCN6,<
   321					UJOB CN6,106,1			;6 TEMP LOCATIONS USED BY CHAIN
   322					>
   323					U .JBEDV,112,1			^;POINTER TO EXEC DATA VECTOR
   324						IFN	VM,<
   325						XP JOBEXM,JDA+16	;SEE DESCRIPTION FURTHER DOWN
   326						>
   327						XP JOBSDD,JDA+17	^;PLACE TO SAVE JOBDDT ON SAVE SO ZERO EXPANSION ON GET
   328									;ALWAYS MOVES UP
   329						XP JOBSD1,JOBSDD-1	^;FOR COMPUTING IOWD'S
   330						XP JOBJMH,JOBHCU-JOBJDA	^;JOBHCU-JOBJDA
   331									;USED BY ANYACT ROUT. IN CORE1
   332					UJOB PFI,.JBDDT,1		^;HIGHEST LOC. IN JOB DATA AREA PROTECTED FROM IO
   333						IFE LC,<
   334						XP MJOBCK,JOBDAC-JOBPFI	;AREA CHECKSUMMED DURING SWAPPING
   335						>
   336									;
   337									;BEFORE HERE PROTECTED
   338									;
   339					UJOB HRL,115,1		^;LH IS FIRST FREE LOC IN HIGH SEG RELATIVE TO ITS ORIGIN
   340								;ANALOGOUS TO LH OF JOBSA FOR LOW SEG
   341								; (IN OTHER WORDS LH=LENGTH TO SAVE ON SAVE COMMAND)
   342								; SET BY LOADER
   343								;RH ANALOGOUS TO JOBREL, IE HIGHEST LEGAL
   344								;USER ADDRESS IN HIGH SEG. SET BY MONITOR EVERY TIME
   345								;USER RUNS.  IF JOBHRL=0, JOB DOES NOT HAVE A HIGH SEG
   346								;USER PROGRAMS SHOULD BE WRITTEN SO THAT
   347								;THEY CAN BE ONE OR TWO SEGMENT PROGRAMS. JOBHRL
   348								;CAN BE TESTED FOR NON-ZERO TO SEE IF HIGH SEG EXISTS
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 10
JOBDAT	MAC	12-May-72 20:50		LOW SEGMENT DATA AREA

   349					UJOB SYM,116,1		^;POINTER TO LOADER AND DDT SYMBOL TABLE POINTER
   350					UJOB USY,117,1		^;POINTER TO UNDEFINED SYMBOL TABLE
   351								;SET BY LOADER, NOT YET USED BY DDT
   352					UJOB SA,120,1		^;LH=INITIAL FIRST FREE LOCATION IN LOW SEG (SET BY LOADER)
   353								;RH=STARTING ADDRESS OF USER PROGRAM
   354					UJOB FF,121,1		^;(SET FROM HIGH DATA AREA ON GET IF NO LOW FILE)
   355								;CURRENT FIRST FREE LOCATION IN LOW SEG
   356								; USED AND UPDATED BY MONITOR TO ASSIGN I/O BUFFERS IN TOP
   357								; OF USER AREA. USY CHANGE CONTENTS IN ORDER TO AFFECT
   358								; PLACEMENT OF BUFFERS BY MONITOR
   359					M JOBS41,122,1		^;C(JOB41) SAVED HERE ON SAVE COMMAND
   360								;RESTORE FROM HERE ON GET
   361					U .JBPFH,123,1		^;LH=LENGTH OF PAGE FAULT HANDLER
   362								;RH=START OF PAGE FAULT HANDLER
   363						IFE	VM,<
   364						XP JOBEXM,.JBPFH	^IFE  U2,<	JOBEXM==.JBPFH
   365						IFNDEF UJOBDAT,<INTERN JOBEXM>>	;MAKE GLOBAL ONLY IF ASSEM FOR MONITOR
   366						IFN  U2,<PURGE  JOBEXM>^;LAST LOC EXAMINED OR DEPOSITED USING 
   367									;D OR E COMMANDS
   368									;LH=-1 IF LAST COM WAS AN E. 0 IF IT WAS A D
   369						>
   370					UJOB REN,124,1		^;REENTER ADDRESS FOR REENTER COMMAND
   371								; (SET FROM HIGH DATA AREA ON GET IF NO LOW FILE)
   372					UJOB APR,125,1		^;PLACE TO TRAP TO IN USER AREA ON APR TRAP
   373								;ENABLED BY APRENB UUO
   374					UJOB CNI,126,1		^;APR IS CONIED INTO C(JOBCNI) ON APR TRAP
   375					UJOB TPC,127,1		^;PC IS STORED HERE ON USER APR TRAP
   376					UJOB OPC,130,1		^;OLD PC IS STORED HERE ON START,DDT,REENTER,
   377								;STARTC COMMANDS
   378					UJOB CHN,131,1		^;LH=FIRST LOC AFTER FIRST FORTRAN 4 LOADED PROGRAM
   379								;RH=FIRST LOC AFTER FIRST FORTRAN 4 BLOCK DATA
   380								;TO BE USED FOR JOB CHAINING
   381					U .JBOVL,131,1		^;(SAME AS .JBCHN)
   382								;LH=NEGATIVE COUNT OF ROOT SEGMENT OVERLAYS
   383								;RH=ADDRESS OF ROOT SEGMENT POINTER
   384					M JOBFDV,LOC,1		^;DEV. DATA BLOCK ADR. FOR FINISH COMMAND
   385								; ALSO USER START ADR FOR DDT, REENTER, START
   386								; IF TYPED WHILE JOB WAS IN MONITOR.  UUO EXIT
   387								; USES TO JUMP TO USER.
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 11
JOBDAT	MAC	12-May-72 20:50		LOW SEGMENT DATA AREA

   388					UJOB COR,133,1		^;(SET FROM HIGH DATA AREA ON GET IF NO LOW FILE)
   389								;LH=HIGHEST LOCATION LOADED(LOW SEG) WITH PROG OR DATA
   390								; SET BY LOADER(BLOCK STATEMENTS DO NOT COUNT HERE)
   391								; SAVE WILL NOT WRITE THE LOW SEG OF A TWO SEG PROG,
   392								; IF LH IS 137 OR LESS AND GET WILL NOT READ
   393								;RH=SIZE OF CORE FOR LOW SEG ON RUN,SAVE,GET COM.
   394								;(SET FROM HIGH DATA AREA ON GET IF NO LOW FILE)
   395								;SET BY SAVE TO CORE ASSIGNMENT TO BE USED ON GET
   396								; (UNLESS USER TYPES A LARGER ARG TO GET)
   397								; TO FIRST FREE LOC-1(OR TOP IF USER DDT) OR
   398								; TO USER'S CORE ARG TO SAVE IF BIGGER
   399								;GET ALWAYS SETS RH TO INITIAL CORE ASSIGNMENT SO THAT PROG
   400								; CAN RESTORE CORE TO ORIGINAL ASSIGNMENT ON RESTARTING
   401					UJOB INT,134,1		^;RH=LOC OF DATA BLOCK FOR ERROR INTERCEPTING
   402					U .JBOPS,135,1		^;RESERVED TO OBJECT TIME SYSTEMS
   403					U .JBCST,136,1		^;RESERVED TO CUSTOMERS
   404					UJOB VER,137,1		^;CONTAINS VERSION NO.(OCTAL) OF PROGRAM BEING RUN
   405								;GENERAL FORMAT IS:
   406								;  BITS 0-2	WHO LAST EDITTED THIS:
   407								;		0=DIGITAL DEVELOPMENT GROUP
   408								;		1=OTHER DIGITAL
   409								;		2-4=RESERVED TO CUSTOMER
   410								;		5-7=RESERVED TO HIS USERS
   411								;	3-11	DIGITAL MAJOR VERSION NUMBER
   412								;	12-17	DIGITAL MINOR VERSION NUMBER
   413								;	18-35	EDIT NUMBER
   414								;GET LOADS IT FROM THE SAVE FILE.  NEVER CONVERTED
   415								;TO DECIMAL BY MAN OR MACHINE. E 137 WILL PRINT VERSION NO.
   416								;SET BY LOC 137 IN CUSP SOURCE
   417								;(SET FROM HIGH DATA AREA ON GET IF NO LOW FILE)
   418					UJOB DA,140		^;FIRST LOC NOT USED BY JOB DATA AREA
   419						XP MJOBDA,-.JBDA	^;-LENGTH OF JOB DATA AREA
   420
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 12
JOBDAT	MAC	12-May-72 20:50		HIGH SEGMENT DATA AREA

   421						SUBTTL	HIGH SEGMENT DATA AREA
   422
   423					; LOCATIONS ARE RELATIVE TO BEGINNING OF HIGH SEGMENT, SINCE
   424					; THE HIGH SEGMENT CAN BEGIN AT 400000 OR HIGHER
   425					; THIS AREA IS USED TO INITIALIZE CERTAIN LOCATIONS IN THE LOW SEG JOB DATA AREA
   426					; IN CASE THER WAS NO LOW SEG SAVED.(LH JOBCOR 137 OR LESS AS SET BY LOADER)
   427					; LOW SEG JOB DATA AREA LOCATIONS SET FROM HIGH SEG DATA AREA ARE INDICATED ABOVE BY:
   428					;(SET FROM HIGH SEG IF NEC)
   429					; THESE LOCATIONS ARE SET FROM LOW JOB DATA AREA ONLY IF HIGH SEG IS NON-SHARABLE
   430					; AT THE TIME THE SAVE IS PERFORMED (SHRSEG=0 IN JBTSTS)
   431
   432					USJOB HGH,400000	^;NORMAL BEGINNING ADDRESS OF HIGH SEGMENT
   433					US .JBHSA,0		^;USED TO RESTORE JOBSA
   434						XP JOBHSA,.JBHSA^;
   435					US .JBH41,1		^;USED TO RESTORE JOB41
   436						XP JOBH41,.JBH41^;
   437					US .JBHCR,2		^;USED TO RESTORE JOBCOR(BOTH HALVES)
   438						XP JOBHCR,.JBHCR^;
   439					US .JBHRN,3		^;LH RESTORES LH OF JOBHRL(FIRST REL. FREE LOC. IN HIGH)
   440						XP JOBHRN,.JBHRN^;RH RESTORES JOBREN,LH SET TO 0 FOR FUTURE
   441					USJOB HVR,4		^;RESTORE BOTH HALVES OF JOBVER
   442						XP JOBPOP,4	^;HIGHEST LOC TO BE RESTORED(POPPED) BY GET
   443					USJOB HNM,5		^;HIGH SEGMENT NAME SO DDT KNOWS ABOUT GETSEGS
   444					USJOB HSM,6		^;HIGH SEGMENT SYMBOL TABLE POINTER
   445					US .JBHGA,7		^;  BYTE(9) RESERVED
   446								;  BYTE(9) GET ADDRESS PAGE NUMBER TO START SEGMENT
   447								;  BYTE (18) [FUTURE] RELATIVE ADDRESS OF EXTENSION BLOCK IF NON-ZER
   448					O
   449					USJOB HDA,10		^;FIRST LOC NOT USED BY HIGH SEG DATA AREA
   450								;LOADER WILL LOAD FIRST WORD HERE
   451
   452
   453						IFDEF  UJOBDAT,<PURGE  P,R>	;CLEAN UP USER VERSION SYMBOL TABLE
   454						IFN  U2,<PURGE  UJOBDAT>	;DITTO
   455						PURGE  LOC,U2,JDA,MJDA		;CLEAN UP SYMBOL TABLE
   456						IF2 <PURGE  LC,VM,FTCN6,FTJOB,FTDISK,UNIV,%..UNV>  ;DITTO
   457						IF2 <PURGE  R,P,P1,FTVM,PDP,PROG>	;DITTO
   458						IF2 <PURGE  U,US,UJOB,USJOB,M,XP>	;DITTO
   459
   460
   461						END

NO ERRORS DETECTED

PROGRAM BREAK IS 000000
CPU TIME USED 00:20.680

10P CORE USED
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page S-1
JOBDAT	MAC	12-May-72 20:50		SYMBOL TABLE

%JOBDT	043100	000447	sin	
.JB41		000041	ent	
.JBAPR		000125	ent	
.JBBLT		000045	ent	
.JBCHN		000131	ent	
.JBCNI		000126	ent	
.JBCOR		000133	ent	
.JBCST		000136	ent	
.JBDA		000140	ent	
.JBDDT		000074	ent	
.JBEDV		000112	ent	
.JBERR		000042	ent	
.JBFF		000121	ent	
.JBH41		000001	sin	
.JBHCR		000002	sin	
.JBHDA		000010	sen	
.JBHGA		000007	sin	
.JBHGH		400000	sen	
.JBHNM		000005	sen	
.JBHRL		000115	ent	
.JBHRN		000003	sin	
.JBHSA		000000	sin	
.JBHSM		000006	sen	
.JBHVR		000004	sen	
.JBINT		000134	ent	
.JBOPC		000130	ent	
.JBOPS		000135	ent	
.JBOVL		000131	ent	
.JBPFH		000123	ent	
.JBPFI		000074	ent	
.JBREL		000044	ent	
.JBREN		000124	ent	
.JBSA		000120	ent	
.JBSYM		000116	ent	
.JBTPC		000127	ent	
.JBUSY		000117	ent	
.JBUUO		000040	ent	
.JBVER		000137	ent	


JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 1
JOBDAT	MAC	12-May-72 20:50		T. HASTINGS/TH/PFC/JNG  TS 16 AUG 77   V431(447)


Symbol cross reference

FTCN6	    35	   320	   456
FTJOB	    36	   221	   222	   224	   232	   239	   285	   333	   340	   350	   351	   353	   355	   371
	   373	   375	   376	   377	   379	   389	   402	   405	   419	   433	   442	   444	   445	   450
	   456
JDA	   288#	   455
JOBAC	   206
JOBD15	   218
JOBD16	   219
JOBD17	   220
JOBDAC	   208
JOBDPD	   213
JOBDPG	   214
JOBENB	   229
JOBEPL	   266
JOBEXM	   366
JOBFDV	   385
JOBH41	   437
JOBHCR	   439
JOBHCU	   275
JOBHRN	   441
JOBHSA	   435
JOBJDA	   294
JOBJMH	   331
JOBLPD	   249
JOBNSV	   313
JOBPC	   280
JOBPD1	   235
JOBPD3	   237
JOBPDL	   236
JOBPOP	   443
JOBPR1	   259
JOBPRT	   258
JOBS41	   360
JOBSAV	   293
JOBSD1	   330
JOBSDD	   328
JOBSDP	   318
JOBSV	   296
JOBSV3	   310
JOBSVD	   316
JOBSVM	   308
JOBUAL	   287
LC	   165	   214	   241	   242	   262	   333	   456
LOC	   221#	   222#	   224#	   232#	   239#	   241#	   283	   285#	   287	   288	   324#	   333#	   340#	   350#
	   351#	   353#	   355#	   362#	   371#	   373#	   375#	   376#	   377#	   379#	   382#	   389#	   402#	   403#
	   404#	   405#	   419#	   433#	   434#	   436#	   438#	   440#	   442#	   444#	   445#	   446#	   450#	   455
MAXPDL	   254
MJDA	   283#	   287#	   455
MJOBDA	   420
MJOBP1	   253
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 1
JOBDAT	MAC	12-May-72 20:50		T. HASTINGS/TH/PFC/JNG  TS 16 AUG 77   V431(447)


Symbol cross reference

MJOBPD	   252
MMXPDL	   256
P	   155	   159#	   453
PDP	   155
R	   158#	   453
U2	   160#	   162	   206	   208	   213	   214	   218	   219	   220	   229	   235	   236	   237	   249
	   252	   253	   254	   256	   258	   259	   263	   266	   275	   280	   286	   287	   293	   294
	   296	   308	   310	   313	   316	   318	   328	   330	   331	   360	   364	   366	   385	   420
	   435	   437	   439	   441	   443	   454	   455
UJOBDA	   155#	   157	   164	   167	   181	   190	   453	   454
UNIV	   171	   456
VM	   177	   233	   247	   256	   262	   280	   287	   324	   363	   456
%..UNV	   182	   183	   221	   222	   224	   232	   239	   285	   324	   333	   340	   350	   351	   353
	   355	   362	   371	   373	   375	   376	   377	   379	   382	   389	   402	   403	   404	   405
	   419	   433	   434	   436	   438	   440	   442	   444	   445	   446	   450
%JOBDT	     3#
.JB41	   222#	   222
.JBAPR	   373#	   373
.JBBLT	   239#	   239
.JBCHN	   379#	   379
.JBCNI	   375#	   375
.JBCOR	   389#	   389
.JBCST	   404#	   404
.JBDA	   419#	   419
.JBDDT	   285#	   285	   333
.JBEDV	   324#	   324
.JBERR	   224#	   224
.JBFF	   355#	   355
.JBH41	   436#	   436
.JBHCR	   438#	   438
.JBHDA	   450#	   450
.JBHGA	   446#	   446
.JBHGH	   433#	   433
.JBHNM	   444#	   444
.JBHRL	   340#	   340
.JBHRN	   440#	   440
.JBHSA	   434#	   434
.JBHSM	   445#	   445
.JBHVR	   442#	   442
.JBINT	   402#	   402
.JBLUL	   286
.JBOPC	   377#	   377
.JBOPS	   403#	   403
.JBOVL	   382#	   382
.JBPFH	   362#	   362
.JBPFI	   333#	   333
.JBREL	   232#	   232
.JBREN	   371#	   371
.JBSA	   353#	   353
.JBSYM	   350#	   350
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 1
JOBDAT	MAC	12-May-72 20:50		T. HASTINGS/TH/PFC/JNG  TS 16 AUG 77   V431(447)


Symbol cross reference

.JBTPC	   376#	   376
.JBUSY	   351#	   351
.JBUUO	   221#	   221
.JBVER	   405#	   405
JOBDAT - JOB DATA AREA (FIRST 140 LOC OF USER AREA) 	MACRO %53B(1156)-1 13:36  8-Nov-85 Page 1
JOBDAT	MAC	12-May-72 20:50		T. HASTINGS/TH/PFC/JNG  TS 16 AUG 77   V431(447)


Macro/Opdef cross reference

M	   136#	   205	   207	   228	   234	   263	   274	   279	   293	   359	   384	   458
U	    97#	   323	   361	   381	   402	   403	   458
UJOB	   112#	   220	   221	   223	   231	   238	   284	   332	   339	   349	   350	   352	   354	   370
	   372	   374	   375	   376	   378	   388	   401	   404	   418	   458
US	   104#	   433	   435	   437	   439	   445	   458
USJOB	   123#	   432	   441	   443	   444	   449	   458
XP	   145#	   212	   213	   217	   218	   219	   235	   236	   248	   251	   252	   253	   255	   257
	   258	   285	   286	   292	   295	   307	   309	   312	   315	   317	   327	   329	   330	   364
	   419	   434	   436	   438	   440	   442	   458   }