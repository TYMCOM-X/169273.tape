View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 1
VUE	INF	22-Nov-70 15:16		VUEMAC	By Carl A Baltrunas - Tymshare Inc -

     1					;	%  VUE - Virtually Unsupported Editor  %
     2					;	----------------------------------------
     3
     4			000000			VUEWHO==0	;Who last edited, 0=Tymshare
     5			000001			VUEVER==1	;Major version
     6			000001			VUEMIN==1	;Minor version
     7			000055			VUEEDT==55	;Edit level (# of edits)
     8
     9					Comment ~
    10
    11					***  PLEASE!!!  Update VUELST.INF whenever anything changes. /CARL  ***
    12
    13					  xx o	Add C-G escape to THEREP routine, so we can get out of long
    14						search commands when we know we made a mistake. (not implemented) **
    15					  56 o	Reorganize META-RC/LC, LAST/NEXT-PAGE routines from WINDOW into VUE.
    16					  55 o	Move WRITESTRING, WRITELOSS, UPDATECURSOR into macro (VIEW) to
    17						possibly improve efficiency & clean up the REDISP module.
    18					  54 o	Merge FILECO routines EXINI and CTRLXT into VUE.BLI removing
    19						yet another extraneous module.
    20					  53 o	Disolve CALIAD module moving metalp and metarp into VUE and
    21						autoloss into BUFFER.  Also cleaned some autoloss code up.
    22					  52 o	Add FTSYS ppn [1,315372] to the list of legal running places.
    23					  51 o	Add protective code to check for RUNEXE style EXE files to RESET.
    24					  50 o	Remove PASCAL mode.  **** Note ****  *.47 & *.C47 are backups.
    25					  47 o	Change the window sill to |||||| instead of /\/\/\.
    26					  46 o	Added global routines CLRKBF and APPKBF which clear the kill
    27						buffer and (force) an append to the current kill buffer.
    28					  45 o	Fixed problem in KILL REGION where it looped forever.
    29					  44 o	Changed GPPN to GETPPN everywhere, added a few GETxxx routines.
    30					  43 o	Rewrote RESET to get more info, to only PUTLSA for stolen copies,
    31						and to do the protection rename if can't do just a delete.
    32					  42 o	Shrunk Ctrlk code and Delforward by creating Killforward routine.
    33					  41 o	Created KILLMULTILINE routine to do the "right" C-K command
    34						and restored the "old" behavior to the C-K (Kill Line) routine.
    35
    36
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 2
VUE	INF	22-Nov-70 15:16		VUEMAC	By Carl A Baltrunas - Tymshare Inc -

    37
    38					  40 o	Deleted FINI, MYRET and MYALTM and replaced with proper code.
    39					  37 o	Make FEN wait for output complete before resetting TTY.
    40					  36 o	Changed RESET routine to also set NOECHO and binary mode for
    41						the TTY, which gets cleared by an EXIT uuo.
    42					  35 o	Shuffle out the last few routines from module DISPAT.
    43						Moved CTRLC into VUE, METAM into MODES; deleted CTRLUS and
    44						FORCEINPUT; Removed all externals which weren't needed.
    45					  34 o	Rewrote code referencing FEN/FEF so it is only done when needed.
    46					  33 o	Fixed RESET code for PUTLSA to do it right, instead of UDT!!!.
    47					  32 o	Re-wrote part of IDC module, renamed it IDCHAR.BLI & installed it.
    48					  31 o	Changed CTRLL to position curline @ modpos if repcount > scrsize.
    49					  30 o	Made CTRLK routine "smart" about lines and such.  A single C-K
    50						command should act as it always did, but C-U n C-K should kill
    51						<n> complete lines regardless of whether they were empty or not.
    52					  27 o	Created "killtext" routine called by METAW and METCW thus making
    53						a single routine for kill/copy from point to mark.
    54					  26 o	Moved FLUBFR() call inside of READCH so it can be removed from
    55						every single call to read a character.
    56					  25 o	Added FLUBFR after CLEARLINE and CLEARSCREEN in module CURSOR.
    57					  24 o	Added "+DDT" to status line if ddt is loaded.
    58					  23 o	Changed cost variables a little to make it more "user" nice.  May
    59						still need twiddling.
    60					  22 o	Made costs point to variables, CSTpos, CSTclr, CSTins, CSTdel in
    61						module IDLINE (XLIAD), and had TTYIN2() in module CURSOR setup
    62						more realistic values dependent upon terminal type.
    63					  21 o	Changed SCREEN array to 132 * 27, for maxlines on hazeltine 2000
    64						instead of 132*31 for GTVT06.  Reduced lowcore by 2 pages.
    65					  20 o	Added routine GETJOB to module VIEW, BUFNAM(name) to BUFFER, to
    66						allow the buffer name to be 'MAIN'xx where "xx" is the job # in HEX
    67						so as to allow multiple jobs to edit in the same directory.
    68					  17 o	Added routine MAIL() to module VIEW, Dostat type {MAIL} on the
    69						status line IF you have your MAIL WAITING bit set.
    70					  16 o	Changed ASKTTY to try to read your terminal type from the monitor.
    71					  15 o	Changed EXini routine to read DSK:VUE.INI from your AUN in FILECO.
    72					  14 o	Added Global WrtOct routine in SYMS, defined Local WrtRadix also.
    73					  13 o	Fixed BUG in module MODES: An unterminated "GLOBAL ROUTINE".
    74					  12 o	Created global routine FILBUF to do common code from routines
    75						CTRLXR, CTRLXV and CCLSTUFF.
    76					  11 o	Moved routine CTRLXR from module VUE into module BUFFER.
    77					  10 o	Added routines GETAUN and a new GETTTY to VIEW to get your logged
    78						in PPN and your Terminal type (.AXTTP=100) for /J44+ monitors.
    79					   7 o	Renamed GETTTY to ASKTTY in module CURSOR.
    80					   6 o	Replaced AUX,TTYCOR,SPEED,VUEVER with VIEW.MAC  /CAB 29-Oct-81.
    81					   5 o	Changed FEN/FEF and eliminated routines ECHON/ECHOF in VIEW.
    82					   4 o	Removed extraneous calls to many routines, and removed those
    83						routines from VIEW.  (SETINT, DBX, ECHOF, ECHON, PAGEON, PAGEOFF).
    84					   3 o	Created VIEW.MAC to build a single MACRO-10 module.
    85					   2 o	Created VUEVER.MAC temporarily to house the version number.
    86					   1 o	Created VUEMAC.MAC as a Tymshare only version of TTYCOR.
    87					     o	--- Began work on YEUX --- /CAB 28-Oct-81
    88
    89
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 3
VUE	INF	22-Nov-70 15:16		VUEMAC	By Carl A Baltrunas - Tymshare Inc -

    90					1(0)	/CAB	19-May-81	Transmitted as Version %1
    91
    92					     o	Rewrote HELP to scan the EXTEND tables and provide M-X ? to list
    93						function names by category.  M-? still lists by key and function.
    94					     o	Change abbrev mode to use C-X C-A rather than C-X A.
    95					     o	Removed "Call Editor" and "Return to VUE" functions.
    96					     o	Re-bound M-{ and M-} to top and bottom of "current page".
    97					     o	Implemented C-X [ and C-X ] for "top of" last and next page.
    98					     o	Unbound "ALL" keys not bound similar to their EMACS counterparts.
    99					     o	Changed C-X L to "COPY KEY" to allow key "X" to be copied to key "Y".
   100					     o	Implemented rebinding of keys to function "names".
   101					     o	Invented "names" for all of the command functions.
   102					     o	Created EXTEND module to introduce M-X <function> <esc>.
   103					     o	Removed C-X C-T, renamed it to C-X @ for @file.
   104					     o	Re-named many of the SYMS variables.  Zapped symbols LBD and TENSEP.
   105					     o	Removed MACRO functions pending future revision, doing it right.
   106					     o	Made Keyboard macro's not ask for "delimiter", now end with C-X ).
   107					     o	Added WRS's PUTLSA. Del if FPN not (SYS) [(VUE) and (YEUX) ok].
   108					     o	Added TP check, runs EDIT10/EDITOR based on the user's XEXEC mode.
   109					     o	Explicitly left binding of M-! to mean move this line to top.
   110					     o	Made C-L work like EMACS, C-U n C-L positions line @ n on screen.
   111					     o	Changed many text messages all over, more understandable!
   112					     o	Fixed I-Search mode from clearing .Metaprefix "really"!
   113					     o	Implemented C-X { and C-X } for Last/Next page (until C-X ] free).
   114					     o	Moved C-X C-O to C-X C-K for restore "killed" buffer.
   115					     o	Moved M-E to C-X * for recursive edition levels.
   116					     o	Moved "macro" commands: M-C >> C-X E, C-X M >> C-X (, M-P >> C-X ),
   117						M-A changed to C-X Q.
   118					     o	Moved M-K to the EMACS key M-\ for anticipation of "kill sentence".
   119					     o	Rebound commands, all illegal ones return "Error"!
   120					     o	Created HELP.BLI for the on-line help stuff, no longer in CCL.
   121					     o	Created STATUS.BLI for the statusline stuff, no longer in DISPAT.
   122					     o	Introduced Writesix(word) for all the sixbit statusline stuff.
   123					     o	Changed commands around; C-S >> M-S, C-R >> M-R, M-Q >> M-%,
   124						M-R >> M-$, M-S >> M-*, M-C-S >> C-S, M-C-R >> C-R.
   125					     o	Only rebind .MetaPrefix if = .Escvalue for I-Search mode.
   126					     o	Ctrlat now checks hatuvl = 1 means SET, otherwise CLEAR the Mark.
   127					     o	Writestring now displays LF as ^J, all others use Outstr.
   128					     o	Removed references to STDFIN and cleaned up the environment some.
   129					     o	Fix incremental search mode so .MetaPrefix is saved properly.
   130					     o	Use *.VUE for the buffer names instead of *.FIN.
   131					     o	Start using VUE.INI instead of FINE.INI.
   132					     o	Remove DIRED mode completely.
   133					     o	Remove FINI mode, replace it with INIT mode for now.		[Temp]
   134					     o	Change status line information.					[Temp]
   135					     o	Remove Writehack(foo) & replace with new ToPrompt(foo).
   136					     o	Make ToPrompt() into ToPrompt(Writestring(foo)) everywhere.
   137					     o	Add .Escvalue for #033 whenever it's not used for META.
   138					     o	Substitute .XPrefix wherever C-X was used as a prefix.
   139					     o	Substitute .MetaPrefix wherever #033 is used for META.
   140
   141					0(0)	Begin with FINE 1A(3)-2	28-Apr-81 /CAB	* Many modules *
   142
   143					~ ; End comment
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 1
VIEW	MAC	22-Nov-70 15:10		VUEMAC	By Carl A Baltrunas - Tymshare Inc -

   144					Title	View	Macro support subroutines for VUE
   145					Subttl	VUEMAC	By Carl A Baltrunas - Tymshare Inc -
   146
   147						Search	Jobdat
   148
   149					;Register Definitions -- See BLISS Manual
   150
   151			000000			s=0		; Sreg - PDL & Stack
   152			000001			t=1		; SuperTemp - Don't expect anything
   153			000002			f=2		; Freg - Formal parameter stack
   154			000003			v=3		; Vreg - Value register
   155			000004			a=4		; Temp
   156			000005			b=5		; Temp
   157			000006			c=6		; Temp
   158			000007			d=7		; Temp
   159			000010			e=10		; Temp
   160
   161	400000'					Twoseg		; Generate Shareable code
   162
   163	400000'					Reloc	400000	; Starting at normal address.
   164
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 2
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Version and relocation information

   165					Subttl	VUEMAC	Version and relocation information
   166
   167	000137					loc	.jbver		; VUExxx defined in VUE.INF
   168	000137	0 001 01 000055 		Byte (3) vuewho (9) vuever (6) vuemin (18) vueedt
   169	400000'					reloc
   170
   171			000001			Ftcommand=1		; Expect RESCAN capability
   172
   173					IFNDEF Ftdebug,<Ftdebug==-1>	; Allow (VUE) & (YEUX) as well as (SYS)
   174
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 3
VIEW	MAC	22-Nov-70 15:10		Entry Points - Internal / External

   175					Subttl	Entry Points - Internal / External
   176
   177						entry fef,fen,wrnum,clulin,clupos,autblk,cluhac,imout,realup,flush
   178						entry scrsze,screen,curline,dskbuf,filblk,fixfil,ppn,cucl,defdsk,base
   179						entry comchar,newcount,repcount,readch,lowend,linesz
   180						entry ttytyp,sst,mark,maxss,muncho,munchi,ocline,scrmod,muline
   181						entry hend,ttyidle,reset,hbot,p,dskbfh,putch,flubfr,modpos
   182						entry writestring,writeloss,updatecursor
   183						entry csnum,qreg,dorescan,setlab,lookop,hitsts,submod,vuetyp
   184						entry physpos,physlin,tabsize,distbl,bfblk1,bfblk2,scroff,scrlen
   185						entry relcor,coresize,rsrchr,rsrptr,rsrstk,dmpout,dmpin
   186						entry ttype,tspeed,gettty,getwid,getlen,getaun,getppn,mail,getjob
   187						entry moveforward,moveback,quit,modblk
   188						entry getchx,ftp,therep
   189
   190					external metap,ctrlxr,ctrlxv,uctrlo,read
   191					external silent,escvalue,leftmargin,goxy
   192					external rptr,corecheck,cstk
   193
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 4
VIEW	MAC	22-Nov-70 15:10		VUEMAC	TYMCOM-X / TOPS-10 Definitions 

   194					Subttl	VUEMAC	TYMCOM-X / TOPS-10 Definitions 
   195
   196		042000	000000		Opdef	Auxcal	[042000,,0]	; Terminal / Aux Circuit calls
   197		047000	777752		Opdef	Setmod	[Calli -26]	; Used to set status/mode of line
   198		047000	777715		Opdef	Putlsa	[Calli -63]	; Writes a Stream Accounting Record
   199
   200			000000		.Axi8c==0	; Input character image and wait
   201			000001		.Axi8s==1	; Input character image and skip
   202			000010		.Axsic==10	; skip if character
   203			000016		.Axobr==16	; Read Output baud rate code
   204			000027		.Axwid==27	; Terminal Width
   205			000045		.Axics==45	; input character and skip
   206			000052		.Axost==52	; Outstr to Aux port
   207			000055		.Axrvx==55	; reverse ^S/^Q enable
   208			000064		.Axcfs==64	; Setmod for Aux port
   209			000100		.Axttp==100	; Read terminal type
   210
   211			000400		io.nee==1b27	; no-escape-echo bit
   212			000200		io.nec==1b28	; no-echo bit
   213			000100		io.fcs==1b29	; full-character-set bit
   214
   215			000010		.ioimg==10	; image mode io
   216			000014		.iobin==14	; binary
   217
   218		777777	777753		.Gtfpn==-25	; Frame PPN
   219		777777	777755		.Gtaun==-23	; Acct User Number (ppn)
   220		777777	777760		.Gtlic==-20	; User license
   221			000002		.Gtppn==2	; Gfd'd PPN
   222			000003		.Gtnam==3	; Name!
   223			000006		.Gtprv==6	; Privilage word
   224
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 5
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Main subroutines - Shareable @ 400000

   225					Subttl	VUEMAC	Main subroutines - Shareable @ 400000
   226					Subttl	VUEMAC	Reset
   227
   228					;Reset	- Reset i/o and do one-time only checks with PUTLSA & JP.TYM
   229					;
   230					;	Pushj	s,Reset		RESET()
   231					;	 <Only Return>
   232					;
   233	400000'	047 00 0 00 000000 	Reset:	Calli	0		; Reset the world!
   234	400001'	260 00 0 00 401031'		Pushj	s,Getprv	; Get user privs.
   235	400002'	202 03 0 00 006466'		Movem	v,Usrprv	; Store them.
   236	400003'	260 00 0 00 401027'		Pushj	s,Getlic	; Get user license.
   237	400004'	202 03 0 00 006467'		Movem	v,Usrlic	; Store them.
   238	400005'	260 00 0 00 401025'		Pushj	s,Getnam	; Get program name.
   239	400006'	202 03 0 00 006470'		Movem	v,Usrnam	; Store it.
   240	400007'	260 00 0 00 401033'		Pushj	s,GetFPN	; Get Frame PPN (where program run from).
   241	400010'	202 03 0 00 006472'		Movem	v,UsrFPN	; Store it.
   242	400011'	260 00 0 00 401040'		Pushj	s,Getppn	; Get the GFD'd PPN
   243	400012'	202 03 0 00 006473'		Movem	v,UsrPPN	; Store it.
   244	400013'	260 00 0 00 401034'		Pushj	s,Getaun	; Get the Logged in PPN too.
   245	400014'	202 03 0 00 006471'		Movem	v,Usraun	; Store it.
   246	400015'	332 00 0 00 006472'		Skipe	UsrFPN		; See if FPN is good.
   247	400016'	254 00 0 00 400021'		  Jrst	BadFPN		; Yes, continue.
   248	400017'	202 16 0 00 006470'		Movem	16,Usrnam	; This guy is either an EXE file or...
   249	400020'	202 17 0 00 006472'		Movem	17,UsrFPN	;  he's been meddling.  Scrunch!!!
   250
   251	400021'	634 05 0 00 000005 	BadFPN:	Tdza	b,b		; Start fresh.
   252	400022'	660 05 0 00 777734 		 Tro	b,-44		; Make sure this is done right. (NEVER!)
   253	400023'	205 04 0 00 656444 		Movsi	a,'UTD'		; For file hackers!!! this is VUE - 10101
   254	400024'	661 05 0 00 010101 		Tlo	b,10101		; Here is the 10101 to add
   255	400025'	273 04 0 00 000005 		Addb	a,b		; ...
   256					ifn Ftdebug,<
   257	400026'	332 00 0 00 000074 		Skipe	.Jbddt		; If DDT is loaded
   258	400027'	200 04 0 00 401442'		  Move	a,[sixbit 'dvue'];  then allow a different name!
   259					    > ; End ifn Ftdebug
   260	400030'	312 04 0 00 006470'		Came	a,Usrnam	; Do they still match?
   261	400031'	254 00 0 00 400060'		  Jrst	Tattle		; No-- Tell someone!
   262	400032'	205 05 0 00 000001 		Movsi	b,1		; Build these too!
   263	400033'	241 05 0 00 000024 		Rot	b,24		; Put the 4 into position
   264	400034'	661 05 0 00 000001 		Tlo	b,1		; Set bits for 1,,4
   265	400035'	316 05 0 00 006472'		CAMN	b,UsrFPN	; is it a legal copy?
   266	400036'	254 00 0 00 400155'		  Jrst	Rested		; Seems ok -- DO next step
   267	400037'	640 05 0 00 000004 		Trc	b,4		; Clear the 4
   268	400040'	660 05 0 00 315372 		Tro	b,315372	; Set in UUN for (FTSYS)
   269	400041'	316 05 0 00 006472'		Camn	B,UsrFPN	; Compare
   270	400042'	254 00 0 00 400155'		  Jrst	Rested		; Seems ok -- DO next step
   271					Ifn Ftdebug,<
   272	400043'	200 04 0 00 006472'		Move	a,Usrfpn	; Need to get this for later
   273	400044'	205 05 0 00 006777 		Movsi	b,6777		; get first part 3,3774...shifted some
   274	400045'	271 05 0 00 022000 		Addi	b,022000	; now add next part
   275	400046'	241 04 0 00 000012 		Rot	a,12		; shift test part
   276	400047'	312 04 0 00 000005 		CAME	a,b		; DEBUG COPY?
   277	400050'	316 04 0 00 401443'		CAMN	a,[6777,,024000]; NEW VERSION?
   278	400051'	254 00 0 00 400155'		  Jrst	Rested		; Seems ok -- DO next step
   279	400052'	241 04 0 00 777766 		Rot	a,-12		; No, So move everything back!
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 5-1
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Reset

   280						> ; End Ifn Ftdebug
   281
   282	400053'	634 06 0 00 000006 		Tdza	c,c		;  fresh.
   283	400054'	660 05 0 00 777734 		 Tro	b,-44		; Make sure this is done right. (NEVER!)
   284	400055'	205 05 0 00 656444 		Movsi	b,'UTD'		; For file hackers!!! this is VUE - 10101
   285	400056'	661 06 0 00 010101 		Tlo	c,10101		; Here's the 10101 to add (left half)
   286	400057'	273 06 0 00 000005 		Addb	c,b
   287	400060'	047 05 0 00 777715 	Tattle:	PUTLSA	b,		; make a stream record
   288	400061'	255 00 0 00 000000 		 JFCL
   289	400062'	400 06 0 00 000000 		Setz	c,		; Need some scratch
   290	400063'	200 03 0 00 006467'		Move	v,Usrlic	; First check license
   291	400064'	602 03 0 00 000002 		Trne	v,(2b17)	; Does he have WF?
   292	400065'	254 00 0 00 400100'		  Jrst	Delf		; Yes-- No need to check further
   293	400066'	200 03 0 00 006472'		Move	v,UsrFPN	; Get the frame ppn
   294	400067'	316 03 0 00 006473'		Camn	v,UsrPPN	; Does it match? (GFD'd PPN)
   295	400070'	660 06 0 00 000100 		  Tro	c,100		;  Yes!! Only needs Owner access
   296	400071'	620 03 0 00 777777 		Trz	v,-1		; Clear PN
   297	400072'	510 05 0 00 006473'		Hllz	b,Usrppn	; Get Project part
   298	400073'	316 03 0 00 000005 		Camn	v,b		; ... Do they match?
   299	400074'	660 06 0 00 000010 		  Tro	c,10		;  Yes!! Only needs Project access
   300	400075'	200 03 0 00 006467'		Move	v,Usrlic	; See if he has WP set?
   301	400076'	602 03 0 00 000001 		Trne	v,(1b17)	; Either that or WA... both ok.
   302	400077'	620 06 0 00 000010 		  Trz	c,10		;   Seems to - Clear project bit
   303	400100'	200 03 0 00 000006 	Delf:	move	v,c		; Now, copy our flag.
   304
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 6
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Reset

   305
   306
   307						OPEN	[ 17
   308							  sixbit "DSK"
   309	400101'	050 00 0 00 401444'			  xwd 0,0]
   310	400102'	254 00 0 00 400155'		  Jrst	Rested		; Can't cope -- DO next step
   311	400103'	336 00 0 00 006470'		Skipn	Usrnam		; Get program name.
   312	400104'	254 00 0 00 400154'		  Jrst	cantell		; Can't cope -- Release Disk.
   313						MOVE	d,[point 18,[sixbit /LOWSHR/
   314								     sixbit /HGHSAV/
   315								     sixbit /SWREXE/
   316	400105'	200 07 0 00 401453'				     sixbit /XPN   /]]
   317	400106'	200 13 0 00 006472'	Vuecpy:	Move	e+3,UsrFPN	; Reset the FPN (remembered from above)
   318	400107'	200 10 0 00 006470'		Move	e,Usrnam	; Save the name in the AC's LOOKUP block
   319	400110'	134 06 0 00 000007 		Ildb	c,d		; Get one of LOW SHR HGH SAV SWR 0
   320	400111'	322 06 0 00 400154'		 Jumpe	c,cantell	; All done?
   321	400112'	206 06 0 00 000011 		Movsm	c,e+1		; Not yet... store extension to try.
   322	400113'	402 00 0 00 000012 		Setzm	e+2		; Finish setup...
   323	400114'	076 00 0 00 000010 		LOOKUP	e		; Look it up in his directory [FPN]
   324	400115'	254 00 0 00 400106'		  Jrst	Vuecpy		;  Ignore errors - Just go to the next one.
   325	400116'	322 03 0 00 400150'		Jumpe	v,Okdelf	; Ok to delete if WF or WP... set, so go!
   326	400117'	135 06 0 00 401454'		ldb	c,[point 3,e+2,2]; get user protection
   327	400120'	602 03 0 00 000100 		Trne	v,100		; If same user, then...
   328	400121'	322 06 0 00 400150'		 jumpe	c,Okdelf	;  Let him delete it if possible
   329	400122'	602 03 0 00 000100 		Trne	v,100		;  Else ... he must rename it first.
   330	400123'	254 00 0 00 400137'		 jrst	Okrenf		;  ...
   331	400124'	135 06 0 00 401455'		ldb	c,[point 3,e+2,5]; get project protection
   332	400125'	602 03 0 00 000010 		Trne	v,10		; If same project, then...
   333	400126'	322 06 0 00 400150'		 jumpe	c,Okdelf	;  Let him delete it if possible
   334	400127'	602 03 0 00 000010 		Trne	v,10		;  Else ... he must rename it first.
   335	400130'	301 06 0 00 000002 		cail	c,2		;  ... IF that is possible!
   336	400131'	304 00 0 00 000000 		 caia			;  no - no - no!
   337	400132'	254 00 0 00 400137'		  jrst	Okrenf		;  ...  Ok!
   338	400133'	135 06 0 00 401456'		ldb	c,[point 3,e+2,8]; get anyone protection
   339	400134'	322 06 0 00 400150'		 jumpe	c,Okdelf	;  Let him delete it if possible
   340	400135'	301 06 0 00 000002 		cail	c,2		;  Else ... he must rename it first.
   341	400136'	254 00 0 00 400106'		  jrst	Vuecpy		;  ...  Can't!!! so try next file!
   342	400137'	201 06 0 00 000017 	Okrenf:	movei	c,00017		;  Protection 0, mode 17
   343	400140'	137 06 0 00 401457'		Dpb	c,[point 13,e+2,12]; store it for the rename.
   344	400141'	055 00 0 00 000010 		Rename	e		; Change the protection
   345	400142'	254 00 0 00 400106'		  jrst	Vuecpy		; If error -- give up & try next one
   346	400143'	402 00 0 00 000012 		setzm	e+2		; Clear this field
   347	400144'	200 13 0 00 006472'		move	e+3,UsrFPN	; Restore the directory name
   348	400145'	513 00 0 00 000011 		hllzs	e+1		; Clear creation date and stuff
   349	400146'	076 00 0 00 000010 		Lookup	e		; Do a lookup again
   350	400147'	254 00 0 00 400106'		  jrst	Vuecpy		; Not there? -- Give up!
   351	400150'	402 00 0 00 000010 	Okdelf:	SETZM	e		; Clear name
   352	400151'	055 00 0 00 000010 		RENAME	e		; Delete it
   353	400152'	255 00 0 00 000000 		 Jfcl			;  Ignore errors
   354	400153'	254 00 0 00 400106'		Jrst	Vuecpy		; Loop till all stolen files gone
   355
   356	400154'	071 00 0 00 000000 	Cantell: RELEAS			; Release the channel (DSK)
   357	400155'	201 04 0 00 040000 	Rested:	movei	a,1b21		; JP.TYM
   358	400156'	612 04 0 00 006466'		tdne	a,Usrprv	; Does the user have license?
   359	400157'	254 00 0 00 400217'		  jrst	Noecho		;   Yes -- Turn off echo & GO!
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 6-1
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Reset

   360	400160'	242 04 0 00 777771 		lsh	a,-7		; Shift word over and decipher the mode!
   361	400161'	405 04 0 00 000003 		andi	a,3		; Got it, now we have them run something else
   362						move	a,[sixbit /EDIT10/	; PDP-10 .JPMPD
   363							   sixbit /EDITOR/	; XEXEC  .JPMXE
   364							   sixbit /EDITOR/	; XEXECJ .JPMXJ
   365	400162'	200 04 0 04 401460'			   sixbit /EDITOR/](a)	; SUDS   .JPMSU
   366									; Fall into code to RUN (SYS) ((a))
   367
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 7
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Runccl	Cucl	RunRPG	Runcca

   368					Subttl	VUEMAC	Runccl	Cucl	RunRPG	Runcca
   369
   370					;Runccl	- Perform a "RUN" at start address + 1 for SYS:(a)
   371					;
   372					;	Move	a,[sixbit /program/]
   373					;	Jrst	Runcca
   374					;	  <never returns>
   375					;
   376	400163'	200 05 0 00 401464'	Runccl:	Move	b,[Xwd RPGBLK,e]; Remember this is from SYS:
   377	400164'	251 05 0 00 000015 		Blt	b,e+5		; Copy defaults from RPG
   378	400165'	202 04 0 00 000011 		Movem	a,e+1		; Now store the name
   379	400166'	254 00 0 00 400172'		Jrst	Runcca		; And run it at the CCL point
   380
   381					;Cucl	- Run CCL program at starting addr + 1
   382					;RunRPG	- Run (SYS)RPG at atarting address + 1 to do the last RPG thing
   383					;
   384					;	Jrst	RunRPG		Cucl()  or  Runrpg()
   385					;	  <never returns>
   386					;
   387	400167'	260 00 0 00 400222'	cucl:	Pushj	s,Fen		; Turn off the terminal
   388	400170'	200 05 0 00 401464'	RunRPG:	Move	b,[Xwd RPGBLK,e]; We are running RPG right?
   389	400171'	251 05 0 00 000015 		Blt	b,e+5		; Copy defaults from RPGBLK
   390	400172'	205 04 0 00 000001 	Runcca:	movsi	a,1		; Start offset = 1
   391	400173'	541 04 0 00 000010 		hrri	a,e		; Setup address of block
   392	400174'	047 04 0 00 000035 		run	a,		; Bye!
   393	400175'	254 04 0 00 400175'		  halt	.
   394
   395	400176'	63 71 63 00 00 00 	RPGBLK:	sixbit/SYS/
   396	400177'	62 60 47 00 00 00 		sixbit/RPG/
   397	400200'	000000	000000			0
   398	400201'	000000	000000			0
   399	400202'	000001	000004			1,,4
   400	400203'	000000	000000			0
   401
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 8
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Fef	Fen

   402					Subttl	VUEMAC	Fef	Fen
   403
   404					;Fef	- Save Characteristics & Setup Terminal
   405					;
   406					;	Pushj	s,FEF		FEF()
   407					;	  <only return>
   408					;
   409	400204'	474 04 0 00 000000 	fef:	seto	a,		; Get the tty characteristics
   410	400205'	051 06 0 00 000004 		getlch	a		; Of your own port
   411	400206'	202 04 0 00 015664'		movem	a,tymtty	; Remember them
   412	400207'	661 04 0 00 000220 		tlo	a,220		; Magic bits NFC!NCM
   413	400210'	051 07 0 00 000004 		setlch	a		; Now setup special ones
   414	400211'	561 04 0 00 000055 		hrroi	a,.Axrvx	; ^S/^Q
   415	400212'	402 00 0 00 015665'		setzm	inirvx		; turn it off and save it
   416	400213'	042 04 0 00 015665'		Auxcal	a,inirvx
   417	400214'	476 00 0 00 006465'		Setom	tspeed		; Get the terminal speed
   418	400215'	561 04 0 00 000016 		hrroi	a,.Axobr	; ... for output anyway.
   419	400216'	042 04 0 00 006465'		Auxcal	a,tspeed	;  .. save it for later
   420	400217'	561 04 0 00 000064 	Noecho:	Hrroi	a,.Axcfs	; Now setup port status
   421	400220'	042 04 0 00 000714 		Auxcal	a,io.nee!io.nec!io.fcs!.iobin
   422	400221'	263 00 0 00 000000 	Cpopj:	Popj	s,		; Then Return
   423
   424
   425					;Fen	- Restore terminal characteristics
   426					;
   427					;	Pushj	s,Fen		FEN()
   428					;	  <only return>
   429					;
   430	400222'	260 00 0 00 400501'	fen:	pushj	s,flubfr	;make sure everything is gone
   431	400223'	200 04 0 00 401465'		move	a,[Xwd 41,5]	; Send a yellow ball throught the net
   432	400224'	047 04 0 00 000072 		Hiber	a,		;   then setup to wait up to 5 seconds
   433	400225'	255 00 0 00 000000 		  jfcl			;   for it to return.  Ignore errors.
   434	400226'	200 04 0 00 015664'		move	a,tymtty	; Remember these characteristics?
   435	400227'	051 07 0 00 000004 		setlch	a		; Now set them back
   436	400230'	561 04 0 00 000055 		hrroi	a,.Axrvx	; ^S/^Q
   437	400231'	261 00 0 00 015665'		push	s,inirvx	; Make sure this doesn't get clobberred
   438	400232'	042 04 0 00 015665'		Auxcal	a,inirvx	; restore it
   439	400233'	262 00 0 00 015665'		pop	s,inirvx	;  ...
   440	400234'	263 00 0 00 000000 		Popj	s,		; Then return
   441
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 9
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Relcor	Coresize

   442					Subttl	VUEMAC	Relcor	Coresize
   443
   444					;Relcor	- ....
   445					;
   446					;	Push	s,[N]			Relcor(N)
   447					;	Pushj	s,Relcor
   448					;	  <only return>				or ERROR!EXIT
   449					;
   450	400235'	200 04 0 00 006453'	relcor:	move	a,hend			; Get hend
   451	400236'	231 04 0 00 000005 		idivi	a,5
   452	400237'	271 04 0 00 000100 		addi	a,100
   453	400240'	270 04 0 00 006455'		add	a,p			; a=highest address used by vue.
   454	400241'	202 04 0 00 000121 		movem	a,.Jbff			; Set jobff
   455	400242'	435 04 0 00 000777 		ori	a,777
   456	400243'	202 04 0 00 000044 		movem	a,.Jbrel		; Set this number too.
   457	400244'	047 04 0 00 000011 		calli	a,11			; Get the core
   458	400245'	254 00 0 00 401440'		  jrst	E$$NEC			; Give error message and exit
   459	400246'	263 00 0 00 000000 		popj	s,
   460
   461					;Coresize - Increase core by N words (if necessary?)
   462					;
   463					;	Push	s,[N]			Coresize(N)
   464					;	Pushj	s,Coresize
   465					;	  <only return>				or ERROR!EXIT
   466					;
   467	400247'				Coresize:
   468	400247'	200 04 0 00 000000 		move	a,s			; Get the argument
   469	400250'	200 03 0 00 000121 		move	v,.Jbff			; Get Next free location
   470	400251'	200 05 0 04 777777 		move	b,-1(a)			; Get requested length
   471	400252'	272 05 0 00 000121 		addm	b,.Jbff			; Increment to next free
   472	400253'	273 05 0 00 000044 		addb	b,.Jbrel		; Add to last available size
   473	400254'	047 05 0 00 000011 		calli	b,11			; Ask for it
   474	400255'	254 00 0 00 401440'		  jrst	E$$NEC			;  Nope - Give error & exit
   475	400256'	263 00 0 00 000000 		popj	s,
   476
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 10
VIEW	MAC	22-Nov-70 15:10		VUEMAC	TtyIdle - Return 1 if True, 0 if False

   477					Subttl	VUEMAC	TtyIdle - Return 1 if True, 0 if False
   478
   479					;Ttyidle - Return True(1) or False(0) depending upon pending input
   480					;
   481					;	Pushj	s,TtyIdle	... Ttyidle() ...
   482					;	  <only return>				v == 0 or 1
   483					;	
   484	400257'				ttyidle:
   485	400257'	561 03 0 00 000010 		hrroi	v,.Axsic	; Equiv of Skpinc
   486	400260'	042 03 0 00 000000 		Auxcal	v,		;  to see if anything there
   487	400261'				Ret1:
   488	400261'	334 03 0 00 401466'	ifn v,<	 skipa	v,[1]>		;    1 == True
   489					ife v,<	 tdza	v,v		; Simulate "skipa v,[1]"
   490						 caia
   491						 aosa	v>
   492	400262'	400 03 0 00 000000 	Ret0:	 setz	v,		;    0 == False
   493	400263'	263 00 0 00 000000 		popj	s,
   494
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 11
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Readch - reads a char and returns it in v

   495					Subttl	VUEMAC	Readch - reads a char and returns it in v
   496
   497					;Readch	- Read a character from the current input source into V
   498					;
   499					;	Pushj	s,Readch	char _ Readch()
   500					;	  <only return>				v _ char
   501					;
   502	400264'	260 00 0 00 400501'	readch:	pushj	s,flubfr	; Everyone wants this, so do it!
   503	400265'	200 04 0 00 006232'		move	a,csnum		; The stack index (-1 for TTY)
   504	400266'	336 00 0 04 000000*		skipn	cstk(a) 	; Do we have a real pointer?
   505	400267'	254 00 0 00 400274'		  jrst	usetty		;  No -- Use TTY
   506	400270'	335 00 0 04 400266*		skipge	cstk(a) 	; Is it a REAL pointer?
   507	400271'	254 00 0 00 400301'		  jrst	usefil		;  No -- From a file
   508	400272'	134 03 0 04 400270*		ildb	v,cstk(a) 	; Yes -- Get a character
   509	400273'	263 00 0 00 000000 		popj	s, 		; Return
   510
   511	400274'	561 04 0 00 000000 	usetty:	hrroi	a,.Axi8c	; Inchrw equivalent
   512	400275'	042 04 0 00 000003 		Auxcal	a,v		; (To preserve Image mode)
   513						  jrst	[movei	a,1
   514							sleep	a,
   515	400276'	254 00 0 00 401467'			jrst	.-2]	; Loop (waiting for port)
   516
   517					; test & skip if this terminal type wants all 8 bits!!!
   518	400277'	620 03 0 00 000200 		trz	v,200		; Else zap parity
   519	400300'	263 00 0 00 000000 		popj	s, 		; and go home.
   520
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 12
VIEW	MAC	22-Nov-70 15:10		VUEMAC	usefil - Read a character from a file (Readch)

   521					Subttl	VUEMAC	usefil - Read a character from a file (Readch)
   522
   523	400301'	261 00 0 00 401472'	usefil:	push	s,[4]
   524	400302'	260 00 0 00 000000*		pushj	s,read		; Read a char
   525	400303'	262 00 0 00 000004 		pop	s,a
   526	400304'	321 03 0 00 400331'		jumpl	v,popout	; Branch on EOF
   527	400305'	322 03 0 00 400301'		jumpe	v,usefil	; In files...
   528	400306'	302 03 0 00 000015 		caie	v,15		;   ignore NULL,
   529	400307'	306 03 0 00 000012 		cain	v,12		;       CR and LF
   530	400310'	254 00 0 00 400301'		  jrst	usefil		;
   531	400311'	302 03 0 00 000077 		caie	v,"?"		; Check for <control escape>
   532	400312'	263 00 0 00 000000 		  popj	s,		;   No, -- return character
   533	400313'	261 00 0 00 401472'	usefi1:	push	s,[4]		; Yes ---
   534	400314'	260 00 0 00 400302*		pushj	s,read		; Read another character
   535	400315'	262 00 0 00 000004 		pop	s,a
   536	400316'	321 03 0 00 400331'		jumpl	v,popout	; Branch on EOF
   537	400317'	322 03 0 00 400313'		jumpe	v,usefi1	; In files... always ignore NULL
   538					;	caie	v,15		;   But here give a
   539					;	cain	v,12		;       CR and LF
   540					;	  jrst	fromfx		;   Cause an error!!!
   541	400320'	306 03 0 00 000077 		cain	v,"?"		; Our <control escape>?
   542	400321'	263 00 0 00 000000 		  popj	s,		;  Yes -- Return with it
   543	400322'	301 03 0 00 000141 		cail	v,"a"		; Case map all to upper
   544	400323'	303 03 0 00 000172 		caile	v,"z"		; ... only alpha for now
   545	400324'	304 00 0 00 000000 		  caia			; No change, skip
   546	400325'	201 03 0 03 777740 		movei	v,-40(v)	; Map them -- UPPER CASE
   547	400326'	201 03 0 03 777700 		movei	v,-100(v)	; Map them -- CONTROL CHARACTERS
   548	400327'	331 00 0 00 000003 		skipl	v		;  Check if legal?
   549	400330'	263 00 0 00 000000 		  popj	s,		;   Yes -- Return with it
   550
   551	400331'	260 00 0 00 000000*	popout:	pushj	s,metap		; EOF or illegal character
   552	400332'	254 00 0 00 400264'		jrst	readch		; Now continue?
   553
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 13
VIEW	MAC	22-Nov-70 15:10		VUEMAC	usefil - Read a character from a file (Readch)

   554
   555	400333'	200 04 0 00 016036'	fixfil:	move	a,filblk
   556	400334'	202 04 0 00 016012'		movem	a,zapdev+1
   557	400335'	050 03 0 00 016011'		open	3,zapdev
   558	400336'	254 00 0 00 401436'		  jrst	E$$COD		; Can't Open Device
   559	400337'	200 04 0 00 016037'		move	a,filblk+1 	; get the file name.
   560	400340'	202 04 0 00 016030'		movem	a,newblk
   561	400341'	200 04 0 00 016007'		move	a,bakx
   562	400342'	202 04 0 00 016031'		movem	a,newblk+1 	;for the lookup
   563	400343'	200 04 0 00 006473'		move	a,ppn 		; the ppn
   564	400344'	202 04 0 00 016033'		movem	a,newblk+3 	; again for the lookup.
   565	400345'	402 00 0 00 016032'		setzm	newblk+2
   566	400346'	076 03 0 00 016030'		lookup	3,newblk
   567	400347'	254 00 0 00 400356'		  jrst	fixfi0
   568	400350'	402 00 0 00 016033'		setzm	newblk+3	;lookup breaks this field.
   569	400351'	402 00 0 00 016032'		setzm	newblk+2 	; should be zero
   570	400352'	402 00 0 00 016031'		setzm	newblk+1 	; why not.
   571	400353'	402 00 0 00 016030'		setzm	newblk 		; prepare to wipe file.
   572	400354'	055 03 0 00 016030'		rename	3,newblk
   573	400355'	255 00 0 00 000000 		  jfcl
   574	400356'	200 04 0 00 016040'	fixfi0:	move	a,filblk+2 	; get the extension
   575	400357'	202 04 0 00 016031'		movem	a,newblk+1 	;and store it.
   576	400360'	200 04 0 00 006473'		move	a,ppn 		;get the ppn again
   577	400361'	202 04 0 00 016033'		movem	a,newblk+3
   578	400362'	200 04 0 00 016037'		move	a,filblk+1 	;the file name
   579	400363'	202 04 0 00 016030'		movem	a,newblk
   580	400364'	402 00 0 00 016032'		setzm	newblk+2 	;just in case.
   581	400365'	076 03 0 00 016030'		lookup	3,newblk 	;for the rename
   582	400366'	254 00 0 00 400376'		  jrst	jrsap 		;just reset and popj
   583	400367'	200 04 0 00 016007'		move	a,bakx 		;new file name
   584	400370'	202 04 0 00 016031'		movem	a,newblk+1 	;extension
   585	400371'	200 04 0 00 006473'		move	a,ppn 		;get the ppn
   586	400372'	202 04 0 00 016033'		movem	a,newblk+3 	;because lookup broke it.
   587	400373'	402 00 0 00 016032'		setzm	newblk+2
   588	400374'	055 03 0 00 016030'		rename	3,newblk
   589	400375'	255 00 0 00 000000 		  jfcl
   590	400376'	070 03 0 00 000000 	jrsap:	close	3,
   591	400377'	071 03 0 00 000000 		release	3,
   592	400400'	402 00 0 00 016041'		setzm	filblk+3
   593	400401'	510 04 0 00 016040'		hllz	a,filblk+2 	;preserve only the extension
   594	400402'	202 04 0 00 016040'		movem	a,filblk+2
   595	400403'	263 00 0 00 000000 		popj	s, 		;go home.
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 14
VIEW	MAC	22-Nov-70 15:10		VUEMAC	usefil - Read a character from a file (Readch)

   596	400404'				munchi:
   597	400404'	200 05 0 00 000000 		move b,s
   598	400405'	200 05 0 05 777777 		move b,-1(b) ;get byte ptr.
   599	400406'	201 07 0 00 000001 		movei d,1
   600	400407'	375 00 0 00 015457'	gloop:	sosge dskbfh+2 ;decrement byte count
   601	400410'	254 00 0 00 400442'		jrst getbf ;if buffer empty
   602	400411'	133 00 0 00 015456'		ibp dskbfh+1		;increment it first.
   603	400412'	200 06 1 00 015456'		move c,@dskbfh+1	;get the pointer to the word.
   604	400413'	606 06 0 00 000001 		trnn c,1
   605	400414'	254 00 0 00 400421'		jrst asos
   606	400415'	211 06 0 00 000006 		movni c,6		;number of chars to be zapped.
   607	400416'	272 06 0 00 015457'		addm c,dskbfh+2		;decrement the count.
   608	400417'	350 00 0 00 015456'		aos dskbfh+1	;bump the pointer
   609	400420'	133 00 0 00 015456'		ibp dskbfh+1
   610	400421'	135 06 0 00 015456'	asos:	ldb c,dskbfh+1 ;get a byte
   611	400422'	306 06 0 00 000000 		cain c,0
   612	400423'	254 00 0 00 400407'		jrst gloop ; if a null
   613	400424'	306 06 0 00 000012 		cain c,12
   614	400425'	254 00 0 00 400407'		jrst gloop ;if a line feed.
   615	400426'	136 06 0 00 000005 		idpb c,b ;dump it in a the place.
   616	400427'	201 07 0 00 000001 		movei d,1
   617	400430'	272 07 0 00 006452'		addm d,lowend
   618	400431'	200 10 0 00 006452'		move e,lowend
   619	400432'	271 10 0 00 000020 		addi e,20
   620	400433'	315 10 0 00 006454'		camge e,hbot
   621	400434'	254 00 0 00 400407'		jrst gloop
   622	400435'	202 05 0 00 006456'		movem b,save
   623	400436'	260 00 0 00 000000*		pushj s,corecheck
   624	400437'	200 05 0 00 006456'		move b,save
   625	400440'	201 07 0 00 000001 		movei d,1
   626	400441'	254 00 0 00 400407'		jrst gloop
   627
   628	400442'	056 02 0 00 000000 	getbf:	in 2,
   629	400443'	254 00 0 00 400407'		 jrst gloop ;no errors or anything.
   630	400444'	263 00 0 00 000000 		popj s, ;else go back home, we are done.
   631
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 15
VIEW	MAC	22-Nov-70 15:10		VUEMAC	usefil - Read a character from a file (Readch)

   632	400445'				muncho:
   633	400445'	200 06 0 00 000000 		move c,s
   634	400446'	200 04 0 06 777777 		move a,-1(c) ;ptr
   635	400447'	200 05 0 06 777776 		move b,-2(c) ;length
   636	400450'	375 00 0 00 000005 	ploop:	sosge b
   637	400451'	254 00 0 00 400261'		jrst	ret1
   638	400452'	302 06 0 00 000015 		caie c,15 ;carriage return was last
   639	400453'	254 00 0 00 400456'		jrst reg
   640	400454'	201 06 0 00 000012 		movei c,12 ;get a line feed
   641	400455'	254 00 0 00 400457'		jrst regpl
   642	400456'	134 06 0 00 000004 	reg:	ildb c,a ;get the byte
   643	400457'	377 00 0 00 015457'	regpl:	sosg dskbfh+2 ;buffer full?
   644	400460'	254 00 0 00 400465'		jrst putbf ;dmp it first
   645	400461'	136 06 0 00 015456'	putc:	idpb c,dskbfh+1 ;dump it in buffer
   646	400462'	306 06 0 00 000015 		cain c,15 ;cr?
   647	400463'	271 05 0 00 000001 		addi b,1 ;if so
   648	400464'	254 00 0 00 400450'		jrst ploop
   649	400465'	057 02 0 00 000000 	putbf:	out 2,
   650	400466'	254 00 0 00 400461'			jrst putc ;no errors, go home.
   651	400467'	254 00 0 00 400262'		jrst	ret0	;write failed.
   652	400470'	254 00 0 00 400461'		jrst putc
   653
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 16
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Putch	Flubfr

   654					Subttl	VUEMAC	Putch	Flubfr
   655
   656					;Putch	- Output a character (put it into buffer)
   657					;
   658					;	Push	s,[char]	Putch(.char)
   659					;	Pushj	s,Putch
   660					;	  <only return>
   661					;
   662	400471'	332 00 0 00 000000*	putch:	skipe	silent		; If we're being quiet
   663	400472'	263 00 0 00 000000 		  popj	s,		;   then don't say a word
   664	400473'	375 00 0 00 000154'		sosge	ttysfd		; Any room left?
   665	400474'	260 00 0 00 400501'		  pushj	s,flubfr	;   No -- Flush the buffer
   666	400475'	200 04 0 00 000000 		move	a,s		; Get the character
   667	400476'	200 04 0 04 777777 		move	a,-1(a)		;   from the top of the stack
   668	400477'	136 04 0 00 000005'		idpb	a,bufptr	; Put it into the buffer
   669	400500'	263 00 0 00 000000 		popj	s,		; and Return
   670
   671					;Flubfr	- Output the buffer
   672					;
   673					;	Pushj	s,Flubfr	Flubfr()
   674					;	  <only return>
   675					;
   676	400501'	400 04 0 00 000000 	flubfr:	setz	a,		; Put a NULL at the end of the buffer
   677	400502'	136 04 0 00 000005'		idpb	a,bufptr
   678	400503'	201 04 0 00 000007'		movei	a,ttybuf-1	; Get the address of the buffer
   679	400504'	505 04 0 00 010700 		hrli	a,10700		; Make a byte pointer
   680	400505'	202 04 0 00 000005'		movem	a,bufptr	; Store it for next time
   681	400506'	201 04 0 00 000763 		movei	a,5*ttybfs-1	; Calculate the buffer size
   682	400507'	202 04 0 00 000154'		movem	a,ttysfd	; Store it for next time
   683	400510'	561 04 0 00 000052 		hrroi	a,.Axost	; Output String to aux-port
   684	400511'	042 04 0 00 000010'		Auxcal	a,ttybuf	; (so Image mode won't be killed)
   685	400512'	263 00 0 00 000000 		Popj	s,		; And return
   686
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 17
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Writestring

   687					Subttl	VUEMAC	Writestring
   688
   689					;Writestring -	Routine to write a string to the screen taking care of
   690					;		possibly funny characters.
   691					;
   692					;	Push	s,[Asciz /TEXT/]	Writestring(plit asciz 'TEXT');
   693					;	Pushj	s,Writestring
   694					;	  <only return>
   695					;
   696
   697	400513'				WRITESTRIN::				;  global routine writestring(foo)
   698	400513'	332 00 0 00 400471*		Skipe	Silent			;   If .silent
   699	400514'	263 00 0 00 000000 		  Popj	s,			;       then return;
   700	400515'	200 04 0 00 000000 		Move	a,s			;
   701	400516'	551 04 1 04 777777 		Hrrzi	a,@-1(a)		;   WS$Ptr _ Point 7,.foo
   702	400517'	505 04 0 00 440700 		Hrli	a,(Point 7)		;
   703	400520'	202 04 0 00 006230'		Movem	a,WS$Ptr		;
   704	400521'	134 04 0 00 006230'	WS$LP:	Ildb	a,WS$Ptr		;   a_scani(WS$Ptr);
   705	400522'	322 04 0 00 400221'		 Jumpe	a,Cpopj			;   if .a eql 0 then return;
   706	400523'	261 00 0 00 000004 		Push	s,a			;
   707	400524'	260 00 0 00 400527'		Pushj	s,Writeloss		;   writeloss(.c);
   708	400525'	274 00 0 00 401473'		Sub	s,[1,,1]		; end while .a neq 0;
   709	400526'	254 00 0 00 400521'		Jrst	WS$LP			;
   710
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 18
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Writeloss

   711					Subttl	VUEMAC	Writeloss
   712
   713					;Writeloss -	Routine to write a possibly funny character
   714					;
   715					;	Push	s,[char]		Writeloss("char");
   716					;	Pushj	s,Writeloss
   717					;	  <only return>
   718					;
   719	400527'				WRITELOSS::				; Global routine writeloss(foo)
   720	400527'	332 00 0 00 400513*		Skipe	Silent			;   If .silent
   721	400530'	263 00 0 00 000000 		  Popj	s,			;       then return;
   722	400531'	200 04 0 00 000000 		Move	a,s			;
   723	400532'	200 04 0 04 777777 		Move	a,-1(a)			; a _ .foo
   724	400533'	301 04 0 00 000040 		Cail	a," "			; If .foo geq " "
   725	400534'	303 04 0 00 000177 		Caile	a,177			;     and lss .Rub
   726	400535'	254 00 0 00 400543'		  Jrst	WLOSS0			; NO
   727	400536'	261 00 0 00 000004 		Push	s,a			;   then begin
   728	400537'	260 00 0 00 400471'		Pushj	s,PUTCH			;     Putch(.foo)
   729	400540'	262 00 0 00 000004 		Pop	s,a
   730	400541'	350 00 0 00 006226'		Aos	Physpos			;     Physpos _ Physpos+1
   731	400542'	263 00 0 00 000000 		  Popj	s,			;   end; Return;
   732
   733	400543'	306 04 0 00 000015 	WLOSS0:	Cain	a,15			; else If .foo eql #cr
   734	400544'	254 00 0 00 000000*		Jrst	LEFTMARGIN		;         then return Leftmargin()
   735	400545'	302 04 0 00 000011 		Caie	a,11			; else If .foo eql #tab
   736	400546'	254 00 0 00 400560'		  Jrst	WLOSS2			; NO
   737	400547'	261 00 0 00 401474'		Push	s,[Exp 11]		;	then begin
   738	400550'	261 00 0 00 006226'		Push	s,PHYSPOS		;
   739	400551'	260 00 0 00 400605'		Pushj	s,UPDATECURS		;	  Updatecursor(#tab,.Physpos)
   740	400552'	274 00 0 00 401475'		Sub	s,[2,,2]		;
   741	400553'	261 00 0 00 000003 		Push	s,v			;
   742	400554'	261 00 0 00 006227'		Push	s,PHYSLIN		;
   743	400555'	260 00 0 00 000000*		Pushj	s,GOXY			;	  Goxy( .v, .Physlin)
   744	400556'	274 00 0 00 401475'		Sub	s,[2,,2]		;
   745	400557'	263 00 0 00 000000 		Popj	s,			;	Return;
   746
   747	400560'	312 04 0 00 000000*	WLOSS2:	Came	a,ESCVALUE		; else If .foo eql .EscValue
   748	400561'	254 00 0 00 400567'		  Jrst	WLOSS4			; NO
   749	400562'	261 00 0 00 401476'		Push	s,["$"]			;      then
   750	400563'	260 00 0 00 400471'		Pushj	s,PUTCH			;	  Putch("$")
   751	400564'	274 00 0 00 401473'		Sub	s,[1,,1]		;
   752	400565'	350 00 0 00 006226'		Aos	PHYSPOS			;	  Physpos _ .Physpos + 1
   753	400566'	263 00 0 00 000000 		Popj	s,			;	  Return
   754
   755	400567'	306 04 0 00 000177 	WLOSS4:	Cain	a,177			; else if .foo eql .Rub
   756	400570'	211 04 0 00 000035 		  Movni	a,35			;	then foo _ "#"-#100;
   757	400571'	261 00 0 00 000004 		Push	s,a			; else+rubout ...
   758	400572'	261 00 0 00 401477'		Push	s,["^"]			;
   759	400573'	260 00 0 00 400471'		Pushj	s,PUTCH			;	  Putch("^")
   760	400574'	274 00 0 00 401473'		Sub	s,[1,,1]		;
   761	400575'	262 00 0 00 000004 		Pop	s,a			;
   762	400576'	271 04 0 00 000100 		Addi	a,100			;
   763	400577'	261 00 0 00 000004 		Push	s,a			
   764	400600'	260 00 0 00 400471'		Pushj	s,PUTCH			;	  Putch(.foo+#100)
   765	400601'	274 00 0 00 401473'		Sub	s,[1,,1]		;
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 18-1
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Writeloss

   766	400602'	350 00 0 00 006226'		Aos	PHYSPOS			;
   767	400603'	350 00 0 00 006226'		Aos	PHYSPOS			;	  Physpos _ .Physpos + 2
   768	400604'	263 00 0 00 000000 		Popj	s,			;	Return;
   769
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 19
VIEW	MAC	22-Nov-70 15:10		VUEMAC	UpdateCursor

   770					Subttl	VUEMAC	UpdateCursor
   771
   772					;UpdateCursor -	Routine to calculate the next character position
   773					;		beginning at .foo if the character is .xc
   774					;
   775					;	Push	s,["char"]		UpdateCursor (xc,foo);
   776					;	Push	s,[position]
   777					;	Pushj	s,UpdateCursor
   778					;	  <only return>
   779					;
   780
   781	400605'				UPDATECURS::			
   782	400605'	200 01 0 00 000000 		Move	t,s			;
   783	400606'	200 03 0 01 777777 		Move	v,-1(t)			; Formal (.foo)
   784	400607'	200 01 0 01 777776 		Move	t,-2(t)			; Formal (.xc)
   785	400610'	302 01 0 00 000011 		Caie	t,11			;
   786	400611'	254 00 0 00 400617'		  Jrst	UPDCUR			;
   787	400612'	360 03 0 00 000000 		Soj	v,			;	.foo - 1
   788	400613'	230 03 0 00 006231'		Idiv	v,TABSIZE		;	  % .tabsize
   789	400614'	220 03 0 00 006231'		Imul	v,TABSIZE		;	    * .tabsize
   790	400615'	270 03 0 00 006231'		Add	v,TABSIZE		;	 + .tabsize
   791	400616'	344 03 0 00 400221'		Aoja	v,Cpopj			;	 + 1
   792
   793	400617'	303 01 0 00 000040 	UPDCUR:	Caile	t," "			; else if .xc geq " "
   794	400620'	303 01 0 00 000177 		Caile	t,177			;     and .xc lss .Rub
   795	400621'	304 00 0 00 000000 		  Caia				; NO
   796	400622'	344 03 0 00 400221'		Aoja	v,Cpopj			;	then .foo + 1
   797	400623'	316 01 0 00 400560*		Camn	t,ESCVALUE		; else if .xc eql .EscValue
   798	400624'	344 03 0 00 400221'		  Aoja	v,Cpopj			;	then .foo + 1
   799	400625'	271 03 0 00 000002 		Addi	v,2			; else .foo + 2
   800	400626'	263 00 0 00 000000 		Popj	s,			; Global Return!
   801
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 20
VIEW	MAC	22-Nov-70 15:10		OLD Q-REGister MACRO space 100 words * n return a pointer to it

   802					Subttl	OLD Q-REGister MACRO space 100 words * n return a pointer to it
   803
   804					;Qreg	- Returns a byte pointer to q-space indexed by (a to z)
   805					;
   806					;	Push	s,["a"]		tp _ Qreg("a")
   807					;	Pushj	s,qreg
   808					;	  <only return>				v _ [Point 7,qspace("a")]
   809					;
   810	400627'	201 03 0 00 000154'	qreg:	movei	v,qspace-1	; Address of q-space
   811	400630'	505 03 0 00 010700 		hrli	v,10700		; Build a pointer
   812	400631'	200 04 0 00 000000 		move	a,s		; Get the name from the stack
   813	400632'	200 04 0 04 777777 		move	a,-1(a)
   814	400633'	301 04 0 00 000141 		cail	a,"a"		; Allow both UPPER and LOWER case
   815	400634'	201 04 0 04 777740 		 movei	a,-40(a)	;  to map into A-Z
   816	400635'	201 04 0 04 777677 		movei	a,-"A"(a)	; Offset from 0
   817	400636'	221 04 0 00 000144 		imuli	a,qwsize	; 100 words of storage for each
   818	400637'	270 03 0 00 000004 		add	v,a		; add for offset into q-space
   819	400640'	263 00 0 00 000000 		popj	s,		; Return a byte pointer in V
   820
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 21
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Dorescan - Rescan the command line

   821					Subttl	VUEMAC	Dorescan - Rescan the command line
   822
   823	400641'				dorescan:
   824	400641'	051 10 0 00 000000 		rescan			; Allow the last line to be read
   825	400642'	051 14 0 00 000000 		 skpinl			; Anything there?
   826	400643'	263 00 0 00 000000 		   popj	s,		;  No! Just return
   827
   828					ifn ftcommand,<
   829	400644'	201 05 0 00 000006 	reresc:	movei b,6		; Setup a temp buffer
   830	400645'	402 00 0 00 015672'		setzm	rsrwrd		;   for the command name
   831	400646'	200 04 0 00 401500'		move	a,[point 6,rsrwrd]
   832	400647'	202 04 0 00 015673'		movem	a,rsrwpt	; and a pointer to it
   833					>
   834	400650'	561 04 0 00 000001 	rescn:	hrroi	a,.Axi8s	; Look for a filename argument
   835	400651'	042 04 0 00 000004 		Auxcal	a,a		;  (Use Aux port so won't kill image mode)
   836	400652'	334 00 0 00 000000 		 skipa
   837	400653'	624 04 0 00 000200 		  trza	a,200
   838	400654'	263 00 0 00 000000 		popj s,			;Flopped:  no hyphen
   839	400655'	302 04 0 00 000050 		caie	a,"("		;[CB @ GC] *** Allow "(" since monitor does
   840	400656'	306 04 0 00 000073 		cain	a,";"		;for visit file
   841	400657'	254 00 0 00 400704'		jrst	vfile
   842	400660'	306 04 0 00 000041 		cain	a,"!"		;for old buffer
   843	400661'	254 00 0 00 400706'		jrst	obuff
   844					ife ftcommand,<
   845						caie	a,"-"		;[CB] Hack attack
   846					>
   847					ifn ftcommand,<
   848	400662'	306 04 0 00 000055 		cain	a,"-"
   849	400663'	254 00 0 00 400675'		  jrst	rfile		;for read file
   850	400664'	301 04 0 00 000141 		cail	a,"a"
   851	400665'	303 04 0 00 000172 		caile	a,"z"
   852	400666'	304 00 0 00 000000 		  caia
   853	400667'	201 04 0 04 777740 		movei	a,-40(a)
   854	400670'	201 04 0 04 777740 		movei	a,-40(a)	;make sixbit
   855	400671'	323 04 0 00 400710'		 jumple	a,restst	;test word for monitor command
   856	400672'	363 05 0 00 400650'		sojle	b,rescn
   857	400673'	136 04 0 00 015673'		idpb	a,rsrwpt	;save the character
   858					>
   859	400674'	254 00 0 00 400650'		jrst	rescn		;Look again
   860	400675'	260 00 0 00 000000*	rfile:	pushj	s,ctrlxr	;Found the filename arg, process it
   861	400676'				lrt:
   862	400676'	561 04 0 00 000001 		hrroi	a,.Axi8s	;eat the line feed if we can
   863	400677'	042 04 0 00 000004 		Auxcal	a,a		; (Use Aux port so won't kill image mode)
   864	400700'	334 00 0 00 000000 		 skipa
   865	400701'	624 04 0 00 000200 		  trza	a,200
   866	400702'	263 00 0 00 000000 		popj	s,
   867	400703'	263 00 0 00 000000 		popj	s,
   868	400704'	260 00 0 00 000000*	vfile:	pushj	s,ctrlxv
   869	400705'	254 00 0 00 400676'		jrst	lrt		;eat the line feed if we can.
   870	400706'	260 00 0 00 000000*	obuff:	pushj	s,uctrlo
   871	400707'	254 00 0 00 400676'		jrst	lrt		;eat the line feed if we can.
   872					ifn ftcommand,<
   873	400710'	305 05 0 00 000000 	restst:	caige	b,0
   874	400711'	400 05 0 00 000000 		  setz	b,
   875	400712'	221 05 0 00 000006 		imuli	b,6
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 21-1
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Dorescan - Rescan the command line

   876	400713'	474 04 0 00 000000 		seto	a,
   877	400714'	242 04 0 05 000000 		lsh	a,(b)
   878	400715'	200 05 0 00 401501'		move	b,[sixbit/vue/]
   879	400716'	404 04 0 00 000005 		and	a,b
   880	400717'	316 04 0 00 015672'		camn	a,rsrwrd
   881	400720'	254 00 0 00 400675'		  jrst	rfile
   882	400721'	200 04 0 00 401502'		move	a,[sixbit/ct4/]
   883	400722'	316 04 0 00 015672'		camn	a,rsrwrd
   884	400723'	254 00 0 00 400675'		  jrst	rfile
   885	400724'	200 04 0 00 401501'		move	a,[sixbit/vue/]
   886	400725'	316 04 0 00 015672'		camn	a,rsrwrd
   887	400726'	254 00 0 00 400675'		  jrst	rfile
   888	400727'	254 00 0 00 400644'		jrst	reresc
   889					> ; end ifn ftcommand
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 22
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Setlab	- Set re-enter address and save bliss stuff

   890					Subttl	VUEMAC	Setlab	- Set re-enter address and save bliss stuff
   891
   892	400730'	202 00 0 00 000001'	setlab:	movem	s,saveds	; Save S and next 4 BLISS registers
   893	400731'	202 01 0 00 000002'		movem	1,saveds+1	;	????
   894	400732'	202 02 0 00 000003'		movem	2,saveds+2	;	FREG
   895	400733'	202 03 0 00 000004'		movem	3,saveds+3	;	VREG
   896	400734'	200 04 0 00 000000 		move	a,s		; Get address of where to start
   897	400735'	200 04 0 04 000000 		move	a,0(a)		; ...as in RE-Start
   898	400736'	202 04 0 00 000000'		movem	a,place		; Store it some place
   899	400737'	201 04 0 00 400750'		movei	a,readr		; Get REEnter address
   900	400740'	202 04 0 00 000124 		movem	a,.Jbren	; Set REEnter address.
   901	400741'	263 00 0 00 000000 		popj	s,		; Return
   902
   903	400742'	260 00 0 00 400222'	quit:	pushj	s,fen		; Reset the terminal
   904	400743'	047 01 0 00 000012 		exit	1,		; Bye.
   905	400744'	260 00 0 00 400204'		pushj	s,fef		; Oh?  Turn it back on.
   906	400745'	263 00 0 00 000000 		popj	s,		; Return to where we came from
   907
   908	400746'	260 00 0 00 400222'	exerr:	pushj	s,fen		; Reset the terminal
   909	400747'	047 01 0 00 000012 		exit	1,		; Bye.
   910	400750'	201 04 0 00 000001 	readr:	movei	a,1		; Set repeat count to 1
   911	400751'	202 04 0 00 006451'		movem	a,repcount
   912	400752'	400 04 0 00 000000 		setz	a,		; Clear ...
   913	400753'	202 04 0 00 000000*		movem	a,rptr		; Rptr	(pop their stack)
   914	400754'	202 04 0 00 006232'		movem	a,csnum		; Csnum	(tty input)
   915	400755'	200 00 0 00 000001'		move	s,saveds	; Restore saved values...
   916	400756'	200 01 0 00 000002'		move	1,saveds+1
   917	400757'	200 02 0 00 000003'		move	2,saveds+2
   918	400760'	200 03 0 00 000004'		move	3,saveds+3
   919	400761'	260 00 0 00 400204'		pushj	s,fef		; Setup the terminal again
   920	400762'	324 00 1 00 000000'		jumpa	@place
   921
   922	000000'					Reloc	; 0
   923
   924	000000'	000000	000000		place:	0
   925	000001'				saveds:	block	4	;register save area.
   926
   927	400763'					Reloc	; 400000
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 23
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Setlab	- Set re-enter address and save bliss stuff

   928
   929	400763'	200 04 0 00 000000 	realup:	move	a,s
   930	400764'	200 04 0 04 777777 		move	a,-1(a)	;get the first argument
   931	400765'	201 03 0 00 000000 		movei	v,0	;default failure
   932	400766'	076 02 0 04 000000 		lookup	2,0(a)	;lookup on the block.
   933	400767'	263 00 0 00 000000 		  popj	s,	;failed
   934	400770'	201 03 0 00 000001 		movei	v,1	;otherwise return true.
   935	400771'	263 00 0 00 000000 		popj	s,
   936
   937	400772'	200 04 0 00 016042'	lookop:	move	a,filblk+4	;ppn
   938	400773'	202 04 0 00 015770'		movem	a,lblk+1
   939	400774'	200 04 0 00 016037'		move	a,filblk+1	;filenam
   940	400775'	202 04 0 00 015771'		movem	a,lblk+2
   941	400776'	200 04 0 00 016040'		move	a,filblk+2	;extension
   942	400777'	202 04 0 00 015772'		movem	a,lblk+3
   943	401000'	201 04 0 00 000017 		movei	a,17
   944	401001'	202 04 0 00 015767'		movem	a,lblk
   945	401002'	076 02 0 00 015767'		lookup	2,lblk
   946	401003'	254 00 0 00 400262'		  jrst	ret0		;lookup failed.
   947
   948	401004'	205 04 0 00 446353 		movsi	a,'dsk'		; Use DSK in all cases.
   949
   950	401005'	202 04 0 00 016036'		movem	a,filblk
   951	401006'	254 00 0 00 400261'		jrst	ret1		; lookup succeeded!
   952
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 24
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Gettty	Getwid	Getaux	Getlen

   953					Subttl	VUEMAC	Gettty	Getwid	Getaux	Getlen
   954
   955	401007'	334 04 0 00 401503'	gettty:	skipa	a,[-1,,.axttp]	; (100) Terminal type
   956	401010'	561 04 0 00 000027 	getwid:	hrroi	a,.axwid	;  (27) Line width
   957	401011'	474 03 0 00 000000 	getaux:	seto	v,		; Read my port
   958	401012'	042 04 0 00 000003 		auxcal	a,v		; Value returned in v
   959	401013'	263 00 0 00 000000 		popj s,
   960
   961	401014'	474 03 0 00 000000 	getlen:	seto	v,	; Tymcom-X doesn't do this at all
   962	401015'	263 00 0 00 000000 		popj s,
   963
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 25
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Getaun	Getab	Mail

   964					Subttl	VUEMAC	Getaun	Getab	Mail
   965
   966	401016'	561 03 0 00 000006 	Mail:	hrroi	v,.gtprv	; Look at user privs
   967	401017'	047 03 0 00 000041 		gettab	v,		;    in the monitor tables
   968	401020'	400 03 0 00 000000 		  setz	v,		; Well?
   969	401021'	606 03 0 00 010000 		trnn	v,1b23		; Check for MAIL-WAITING bit
   970	401022'	634 03 0 00 000003 		  tdza	v,v		;  No! Clear all other bits & skip
   971	401023'	201 03 0 00 000001 		movei	v,1		; Yes! Make it TRUE
   972	401024'	263 00 0 00 000000 		popj	s,		; Return
   973
   974	401025'	561 03 0 00 000003 	getnam:	hrroi	v,.gtnam	; Program name
   975	401026'	254 00 0 00 401035'		jrst	getab
   976	401027'	561 03 0 00 777760 	getlic:	hrroi	v,.gtlic	; User license
   977	401030'	254 00 0 00 401035'		jrst	getab
   978	401031'	561 03 0 00 000006 	getprv:	hrroi	v,.gtprv	; User privilages
   979	401032'	254 00 0 00 401035'		jrst	getab
   980
   981	401033'	334 03 0 00 401504'	getfpn:	skipa	v,[-1,,.gtfpn]	; Frame ppn
   982	401034'	561 03 0 00 777755 	getaun:	hrroi	v,.gtaun	; Accounting User Number
   983	401035'	047 03 0 00 000041 	getab:	gettab	v,		;    for this user
   984	401036'	400 03 0 00 000000 		  setz	v,		; Hmmmm. well indicate FALSE
   985	401037'	263 00 0 00 000000 		popj	s,		; Return
   986
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 26
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Getppn	Getjob

   987					Subttl	VUEMAC	Getppn	Getjob
   988
   989	401040'	047 03 0 00 000024 	Getppn:	Calli	v,24		; Getppn v,
   990	401041'	255 00 0 00 000000 		  jfcl			; Jacct skip if 1,2
   991	401042'	263 00 0 00 000000 		popj	s,		; Return
   992
   993	401043'	047 03 0 00 000030 	Getjob:	Pjob	v,		; Get my job number
   994	401044'	263 00 0 00 000000 		popj	s,		; Return
   995
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 27
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Getppn	Getjob

   996
   997	401045'	260 00 0 00 400501'	imout:	pushj	s,flubfr	;flush the output buffer.
   998	401046'	200 04 0 00 000000 		move	a,s
   999	401047'	200 04 0 04 777777 		move	a,-1(a)		;get the argument
  1000	401050'	051 15 0 00 000004 		ioneou	a
  1001	401051'	263 00 0 00 000000 		popj	s,
  1002
  1003	401052'	200 04 0 00 000000 	wrnum:	move	a,0		;for indexing.
  1004	401053'	200 04 0 04 777777 		move	a,-1(a)		;the argument.
  1005	401054'	275 04 0 00 000001 		subi	a,1		;useful. converts to 0 origin.
  1006	401055'	200 06 0 00 006463'		move	c,ttytyp	;get the terminal type.
  1007	401056'	302 06 0 00 000012 		caie	c,^d10		;is the terminal a vt100?	[cb]
  1008	401057'	306 06 0 00 000016 		cain	c,^d14		;is it a hp19
  1009	401060'	254 00 0 00 401132'		jrst	heath		;for now, can do better.
  1010	401061'	302 06 0 00 000027 		caie	c,^d23		;is it a hp2621?
  1011	401062'	306 06 0 00 000007 		cain	c,7		;hp 2648
  1012	401063'	254 00 0 00 401132'		jrst	heath		;two of a kind I guess.
  1013	401064'	302 06 0 00 000017 		caie	c,^d15		;dm1520
  1014	401065'	306 06 0 00 000020 		cain	c,^d16		;act4
  1015	401066'	254 00 0 00 401110'		jrst	binout
  1016	401067'	306 06 0 00 000025 		cain	c,^d21		;mime4
  1017	401070'	254 00 0 00 401110'		jrst	binout
  1018	401071'	306 06 0 00 000001 		cain	c,1		;superbee
  1019	401072'	254 00 0 00 401114'		jrst	superb
  1020	401073'	306 06 0 00 000006 		cain	c,6		;6is concept 100.
  1021	401074'	254 00 0 00 401103'		jrst	concep		;the concept 100.
  1022	401075'	231 04 0 00 000012 		idivi	a,12		;divide by 10. 2 has x/10, 3 has rem.
  1023	401076'	242 04 0 00 000004 		lsh	a,4		;shift l
  1024	401077'	270 05 0 00 000004 		add	b,a		;now r2 has bcd version.
  1025	401100'	260 00 0 00 400501'		pushj	s,flubfr	;write out lines.
  1026	401101'	051 15 0 00 000005 		ioneou	b		;image mode.
  1027	401102'	263 00 0 00 000000 		popj	s,		;return.
  1028
  1029	401103'	271 04 0 00 000040 	concep:	addi	a,40		;add thirty-two
  1030	401104'	261 00 0 00 000004 		push	s,a
  1031	401105'	260 00 0 00 400471'		pushj	s,putch
  1032	401106'	262 00 0 00 000004 		pop	s,a
  1033	401107'	263 00 0 00 000000 		popj	s,
  1034
  1035	401110'	261 00 0 00 000004 	binout: push	s,a
  1036	401111'	260 00 0 00 401045'		pushj	s,imout
  1037	401112'	262 00 0 00 000004 		pop	s,a
  1038	401113'	263 00 0 00 000000 		popj	s,
  1039
  1040	401114'	200 06 0 00 000004 	superb:	move	c,a		;save a copy thereof.
  1041	401115'	261 00 0 00 401505'		push	s,["0"]
  1042	401116'	260 00 0 00 400471'		pushj	s,putch
  1043	401117'	262 00 0 00 000004 		pop	s,a
  1044	401120'	231 06 0 00 000012 		idivi	c,12		;calculate place to go.
  1045	401121'	271 06 0 00 000060 		addi	c,"0"
  1046	401122'	271 07 0 00 000060 		addi	d,"0"
  1047	401123'	261 00 0 00 000006 		push	s,c
  1048	401124'	260 00 0 00 400471'		pushj	s,putch
  1049	401125'	262 00 0 00 000004 		pop	s,a
  1050	401126'	261 00 0 00 000007 		push	s,d
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 27-1
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Getppn	Getjob

  1051	401127'	260 00 0 00 400471'		pushj	s,putch
  1052	401130'	262 00 0 00 000004 		pop	s,a
  1053	401131'	263 00 0 00 000000 		popj	s,
  1054
  1055	401132'	200 06 0 00 000004 	heath:	move	c,a		;save a copy thereof.
  1056	401133'	231 06 0 00 000012 		idivi	c,12		;calculate place to go.
  1057	401134'	271 06 0 00 000060 		addi	c,"0"
  1058	401135'	271 07 0 00 000060 		addi	d,"0"
  1059	401136'	306 06 0 00 000060 		cain	c,"0"
  1060	401137'	254 00 0 00 401143'		jrst	zersp
  1061	401140'	261 00 0 00 000006 		push	s,c
  1062	401141'	260 00 0 00 400471'		pushj	s,putch
  1063	401142'	262 00 0 00 000004 		pop	s,a
  1064	401143'	261 00 0 00 000007 	zersp:	push	s,d
  1065	401144'	260 00 0 00 400471'		pushj	s,putch
  1066	401145'	262 00 0 00 000004 		pop	s,a
  1067	401146'	263 00 0 00 000000 		popj	s,
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 28
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Moveforward - Move pointer forward n bytes

  1068					Subttl	VUEMAC	Moveforward - Move pointer forward n bytes
  1069
  1070	401147'				movefo: ;come here to move forward n bytes. adjust curline too.
  1071	401147'	402 00 0 00 015764'		setzm ctrlct
  1072	401150'	200 04 0 00 006474'		move a,curlin
  1073	401151'	202 04 0 00 015763'		movem a,ocl	;save to see if passed a cr.
  1074	401152'	200 04 0 00 000000 		move a,s	;can not indirect off of sp with this bliss.
  1075	401153'	200 04 0 04 777777 		move a,-1(a)	;get the number of bytes we are to move.
  1076	401154'	201 05 0 00 000001 		movei b,1
  1077					; next we note that to get the byte pointer before foo, we
  1078					; do use effective address of (foo-1)/5+.p
  1079					; and byte offset of 7*(foo-5*((foo-1)/5))
  1080					; so we generate byte ptrs for .lowend and .hbot
  1081	401155'	200 10 0 00 006452'		move e,lowend
  1082	401156'	275 10 0 00 000001 		subi e,1	;lowend-1
  1083	401157'	231 10 0 00 000005 		idivi e,5
  1084	401160'	550 06 0 00 000010 		hrrz c,e	;move foo-1 fifths to rh of c.
  1085	401161'	221 06 0 00 000005 		imuli c,5
  1086	401162'	274 06 0 00 006452'		sub c,lowend	;nearly the answer we want.
  1087	401163'	221 06 0 00 000007 		imuli c,7
  1088	401164'	271 06 0 00 000044 		addi c,44	;add 36 decimal.
  1089	401165'	242 06 0 00 000036 		lsh c,36	;move over 12 bits decimal.
  1090	401166'	505 10 0 00 000700 		hrli e,700	;byte size.
  1091	401167'	270 10 0 00 006455'		add e,p		;add base in.
  1092	401170'	270 06 0 00 000010 		add c,e		;now c is the byte ptr we need.
  1093					;end calculation of byte ptr.
  1094	401171'	200 10 0 00 006454'		move e,hbot
  1095	401172'	275 10 0 00 000001 		subi e,1	;hbot-1
  1096	401173'	231 10 0 00 000005 		idivi e,5
  1097	401174'	550 07 0 00 000010 		hrrz d,e	;move foo-1 fifths to rh of d.
  1098	401175'	221 07 0 00 000005 		imuli d,5
  1099	401176'	274 07 0 00 006454'		sub d,hbot	;nearly the answer we want.
  1100	401177'	221 07 0 00 000007 		imuli d,7
  1101	401200'	271 07 0 00 000044 		addi d,44	;add 36 decimal.
  1102	401201'	242 07 0 00 000036 		lsh d,36	;move over 12 bits decimal.
  1103	401202'	505 10 0 00 000700 		hrli e,700	;byte size.
  1104	401203'	270 10 0 00 006455'		add e,p		;add base in.
  1105	401204'	270 07 0 00 000010 		add d,e		;now d is the byte ptr we need.
  1106					;now d has the from target ptr, c has the to target ptr
  1107					;and a has the count of the number of iterations of the next loop:
  1108	401205'	270 06 0 00 401506'		add	c,[70000,,0]		;add to backup bptr.
  1109	401206'	270 07 0 00 401506'		add	d,[70000,,0]		;add to backup bptr.
  1110	401207'	335 00 0 00 000006 		skipge	c
  1111	401210'	274 06 0 00 401507'		 sub	c,[430000,,1]
  1112	401211'	335 00 0 00 000007 		skipge	d
  1113	401212'	274 07 0 00 401507'		 sub	d,[430000,,1]
  1114	401213'	272 04 0 00 006452'		addm	a,lowend
  1115	401214'	272 04 0 00 006454'		addm	a,hbot
  1116	401215'	375 00 0 00 000004 	lp1:	sosge a		;do loop ctr.
  1117	401216'	254 00 0 00 401310'		jrst car	;go home after checking ocl with curlin.
  1118	401217'	134 10 0 00 000007 		ildb e,d	;get byte
  1119	401220'	306 10 0 00 000014 		cain e,14
  1120	401221'	202 05 0 00 015764'		movem b,ctrlct	;count of these.
  1121	401222'	306 10 0 00 000015 		cain e,15	;skip if not a c-ret
  1122	401223'	272 05 0 00 006474'		addm b,curlin
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 28-1
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Moveforward - Move pointer forward n bytes

  1123	401224'	136 10 0 00 000006 		idpb e,c	;dump it
  1124	401225'	254 00 0 00 401215'		jrst lp1
  1125
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 29
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Moveback - Move the pointer backward n bytes

  1126					Subttl	VUEMAC	Moveback - Move the pointer backward n bytes
  1127
  1128	401226'				moveba: ;come here to move backwards n bytes. adjust curline too.
  1129	401226'	402 00 0 00 015764'		setzm ctrlct
  1130	401227'	201 04 0 00 000001 		movei a,1
  1131	401230'	202 04 0 00 006233'		movem a,cluhac	;set direction bit
  1132	401231'	200 04 0 00 006474'		move a,curlin	;save curlin
  1133	401232'	202 04 0 00 015763'		movem a,ocl	;in ocl.
  1134	401233'	200 04 0 00 000000 		move a,s	;can not indirect off of sp with this bliss.
  1135	401234'	200 04 0 04 777777 		move a,-1(a)	;get the number of bytes we are to move.
  1136	401235'	211 05 0 00 000001 		movni b,1	;for use to decrement curlin[e].
  1137					; next we note that to get the byte pointer before foo, we
  1138					; do use effective address of (foo-1)/5+.p
  1139					; and byte offset of 7*(foo-5*((foo-1)/5))
  1140					; so we generate byte ptrs for .lowend and .hbot
  1141	401236'	200 10 0 00 006452'		move e,lowend
  1142	401237'	275 10 0 00 000001 		subi e,1	;lowend-1
  1143	401240'	231 10 0 00 000005 		idivi e,5
  1144	401241'	550 06 0 00 000010 		hrrz c,e	;move foo-1 fifths to rh of c.
  1145	401242'	221 06 0 00 000005 		imuli c,5
  1146	401243'	274 06 0 00 006452'		sub c,lowend	;nearly the answer we want.
  1147	401244'	221 06 0 00 000007 		imuli c,7
  1148	401245'	271 06 0 00 000044 		addi c,44	;add 36 decimal.
  1149	401246'	242 06 0 00 000036 		lsh c,36	;move over 12 bits decimal.
  1150	401247'	505 10 0 00 000700 		hrli e,700	;byte size.
  1151	401250'	270 10 0 00 006455'		add e,p		;add base in.
  1152	401251'	270 06 0 00 000010 		add c,e		;now c is the byte ptr we need.
  1153					;end calculation of byte ptr.
  1154	401252'	200 10 0 00 006454'		move e,hbot
  1155	401253'	275 10 0 00 000001 		subi e,1	;hbot-1
  1156	401254'	231 10 0 00 000005 		idivi e,5
  1157	401255'	550 07 0 00 000010 		hrrz d,e	;move foo-1 fifths to rh of d.
  1158	401256'	221 07 0 00 000005 		imuli d,5
  1159	401257'	274 07 0 00 006454'		sub d,hbot	;nearly the answer we want.
  1160	401260'	221 07 0 00 000007 		imuli d,7
  1161	401261'	271 07 0 00 000044 		addi d,44	;add 36 decimal.
  1162	401262'	242 07 0 00 000036 		lsh d,36	;move over 12 bits decimal.
  1163	401263'	505 10 0 00 000700 		hrli e,700	;byte size.
  1164	401264'	270 10 0 00 006455'		add e,p		;add base in.
  1165	401265'	270 07 0 00 000010 		add d,e		;now d is the byte ptr we need.
  1166					;now d has the from target ptr, c has the to target ptr
  1167					;and a has the count of the number of iterations of the next loop:
  1168	401266'	210 04 0 00 000004 		movn a,a
  1169	401267'	272 04 0 00 006452'		addm a,lowend
  1170	401270'	272 04 0 00 006454'		addm a,hbot
  1171	401271'	353 00 0 00 000004 	lp2:	aosle a		;do loop ctr.
  1172	401272'	254 00 0 00 401310'		jrst car		;go home and set muline perhaps
  1173	401273'	270 06 0 00 401506'		add c,[7b5]	;decrement number
  1174	401274'	307 06 0 00 000000 		caig c,0
  1175	401275'	274 06 0 00 401507'		sub c,[430000,,1]
  1176	401276'	135 10 0 00 000006 		ldb e,c		;get byte
  1177	401277'	306 10 0 00 000014 		cain e,14
  1178	401300'	202 05 0 00 015764'		movem b,ctrlct
  1179	401301'	306 10 0 00 000015 		cain e,15	;skip if not a c-ret
  1180	401302'	272 05 0 00 006474'		addm b,curlin
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 29-1
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Moveback - Move the pointer backward n bytes

  1181	401303'	270 07 0 00 401506'		add d,[7b5]	;decrement the thing.
  1182	401304'	307 07 0 00 000000 		caig d,0
  1183	401305'	274 07 0 00 401507'		sub d,[430000,,1]
  1184	401306'	137 10 0 00 000007 		dpb e,d		;dump it
  1185	401307'	254 00 0 00 401271'		jrst lp2
  1186
  1187	401310'	200 04 0 00 015764'	car:	move a,ctrlct
  1188	401311'	302 04 0 00 000000 		caie a,0
  1189	401312'	254 00 0 00 401321'		jrst mulpag
  1190	401313'	200 04 0 00 015763'		move a,ocl
  1191	401314'	316 04 0 00 006474'		camn a,curlin
  1192	401315'	263 00 0 00 000000 		popj s,
  1193	401316'	201 04 0 00 000001 		movei a,1
  1194	401317'	202 04 0 00 006445'		movem a,muline
  1195	401320'	263 00 0 00 000000 		popj s,
  1196
  1197	401321'	201 04 0 00 000001 	mulpag:	movei a,1
  1198	401322'	202 04 0 00 006445'		movem a,muline
  1199	401323'	202 04 0 00 006444'		movem a,scrmod
  1200	401324'	263 00 0 00 000000 		popj	s,
  1201
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 30
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Dmpin/Dmpout - (Chan, Addr, Size)

  1202					Subttl	VUEMAC	Dmpin/Dmpout - (Chan, Addr, Size)
  1203
  1204					; args are channel,address,size
  1205	401325'	200 04 0 00 000000 	dmpin:	move	a,s
  1206	401326'	200 05 0 04 777777 		move	b,-1(a)		;the size
  1207	401327'	200 04 0 04 777776 		move	a,-2(a)		;the address
  1208	401330'	210 05 0 00 000005 		movn	b,b		;negate it.
  1209	401331'	506 05 0 00 015765'		hrlm	b,dmblk		;put the size down
  1210	401332'	275 04 0 00 000001 		subi	a,1		;calc address.
  1211	401333'	542 04 0 00 015765'		hrrm	a,dmblk		;
  1212	401334'	201 03 0 00 000001 		movei	v,1		;won
  1213	401335'	056 02 0 00 015765'		in	2,dmblk		;dump mode block
  1214	401336'	263 00 0 00 000000 		  popj	s,
  1215	401337'	201 03 0 00 000000 		movei	v,0		;error return -> lost.
  1216	401340'	263 00 0 00 000000 		popj	s,
  1217
  1218	401341'	200 04 0 00 000000 	dmpout:	move	a,s
  1219	401342'	200 05 0 04 777777 		move	b,-1(a)		;the size
  1220	401343'	200 04 0 04 777776 		move	a,-2(a)		;the address
  1221	401344'	210 05 0 00 000005 		movn	b,b		;negate it.
  1222	401345'	506 05 0 00 015765'		hrlm	b,dmblk		;put the size down
  1223	401346'	275 04 0 00 000001 		subi	a,1		;calc address.
  1224	401347'	542 04 0 00 015765'		hrrm	a,dmblk		;
  1225	401350'	067 02 0 00 015765'		output	2,dmblk		;dump mode block
  1226	401351'	263 00 0 00 000000 		popj	s,
  1227
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 31
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Dmpin/Dmpout - (Chan, Addr, Size)

  1228
  1229
  1230	401352'	201 03 0 00 000015 	getchx:	movei	v,^d13			;prepare to return a <cr>.
  1231	401353'	200 04 0 00 000000 		move	a,s
  1232	401354'	337 04 0 04 777777 		skipg	a,-1(a)			;1 is start, get desired char.
  1233	401355'	263 00 0 00 000000 		 popj	s,
  1234	401356'	315 04 0 00 006452'		camge	a,lowend		;compare arg with lowend
  1235	401357'	254 00 0 00 401364'		 jrst	norel			;in low part of gap.
  1236	401360'	270 04 0 00 006454'		add	a,hbot			;add this in.
  1237	401361'	274 04 0 00 006452'		sub	a,lowend		;just do the formula
  1238	401362'	311 04 0 00 006453'		caml	a,hend
  1239	401363'	263 00 0 00 000000 		 popj	s,
  1240	401364'	231 04 0 00 000005 	norel:	idivi	a,5			;a is count/5, a+1 is remainder
  1241	401365'	270 04 0 00 006455'		add	a,p
  1242	401366'	135 03 0 05 401370'		ldb	v,table(b)		;magic
  1243	401367'	263 00 0 00 000000 		popj	s,
  1244
  1245	401370'	01 07 0 04 777777 	table:	point	7,-1(a),5*7-1
  1246	401371'	35 07 0 04 000000 		point	7,(a),1*7-1
  1247	401372'	26 07 0 04 000000 		point	7,(a),2*7-1
  1248	401373'	17 07 0 04 000000 		point	7,(a),3*7-1
  1249	401374'	10 07 0 04 000000 		point	7,(a),4*7-1
  1250
  1251	401375'	100677	777777		ntbl:	100700-1,,-1
  1252	401376'	010677	777777			10700-1,,-1
  1253	401377'	350700	000000			350700,,0
  1254	401400'	260700	000000			260700,,0
  1255	401401'	170700	000000			170700,,0
  1256
  1257	401402'				therep:	;Patch for the other version of therep
  1258						; Convert char pos in arg 2 to an ildb ptr.
  1259	401402'	200 04 0 00 000000 		move	a,s
  1260	401403'	200 05 0 04 777777 		move	b,-1(a)		;the char ptr.
  1261
  1262	401404'	315 05 0 00 006452'		camge	b,lowend		;compare arg with lowend
  1263	401405'	254 00 0 00 401410'		 jrst	norel2			;in low part of gap.
  1264	401406'	270 05 0 00 006454'		add	b,hbot			;add this in.
  1265	401407'	274 05 0 00 006452'		sub	b,lowend		;just do the formula
  1266	401410'	231 05 0 00 000005 	norel2:	idivi	b,5			;b is count/5, b+1 is remainder
  1267	401411'	270 05 0 00 006455'		add	b,p
  1268	401412'	270 05 0 06 401375'		add	b,ntbl(c)		;magic byte ptr we will use.
  1269	401413'	254 00 0 00 401416'		jrst	ftpae			;alt entry to ftp
  1270
  1271	401414'				ftp:	;Fast version of therep. Takes as arg 1 (-2(sp)) the line we're
  1272						;looking for, and as arg 2 (-1(sp)) the ildb byte ptr to use.
  1273						;Assumes that line is already uppercased, for speed.
  1274	401414'	200 04 0 00 000000 		move	a,s		;get the sp somewhere useful.
  1275	401415'	200 05 0 04 777777 		move	b,-1(a)		;the byte ptr to use.
  1276	401416'	200 04 0 04 777776 	ftpae:	move	a,-2(a)		;the ptr to line
  1277	401417'	200 07 0 04 000000 		move	d,0(a)		;the size field
  1278	401420'	201 03 0 00 000000 		movei	v,0		;return false by default.
  1279
  1280	401421'	375 00 0 00 000007 	ftplp:	sosge	d		;loop
  1281	401422'	254 00 0 00 401434'		jrst	ftpwon		;if we are equal.
  1282	401423'	134 06 0 00 000005 		ildb	c,b		;get a char.
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 31-1
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Dmpin/Dmpout - (Chan, Addr, Size)

  1283	401424'	301 06 0 00 000141 		cail	c,"a"		;less than "a" is ok.
  1284	401425'	303 06 0 00 000172 		 caile	c,"z"		;less than "z".
  1285	401426'	304 00 0 00 000000 		  caia			;no convert to uppercase.
  1286	401427'	275 06 0 00 000040 		 subi	c,40		;convert it.
  1287	401430'	312 06 0 04 000001 	nocv:	came	c,1(a)		;are we equal here?
  1288	401431'	263 00 0 00 000000 		popj	s,
  1289	401432'	271 04 0 00 000001 		addi	a,1
  1290	401433'	254 00 0 00 401421'		jrst	ftplp
  1291	401434'	201 03 0 00 000001 	ftpwon:	movei	v,1
  1292	401435'	263 00 0 00 000000 		popj	s,
  1293
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 32
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Dmpin/Dmpout - (Chan, Addr, Size)

  1294
  1295	401436'				E$$COD:	Outstr	[Asciz\
  1296					?
  1297					?VUECOD	Cannot Open Device for file rename(s) - Please recover with Olde buffer
  1298	401436'	051 03 0 00 401510'	\]
  1299	401437'	254 00 0 00 400746'			Jrst	exerr			; Exit
  1300
  1301	401440'				E$$NEC:	Outstr	[Asciz\
  1302					?
  1303					?VUENEC Not enough core to edit file
  1304	401440'	051 03 0 00 401532'	\]
  1305	401441'	254 00 0 00 400746'		jrst	exerr
  1306
  1307
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 33
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Dmpin/Dmpout - (Chan, Addr, Size)

  1308	000005'					Reloc	; 0
  1309
  1310	000005'	010700	000007'		bufptr: xwd 10700,ttybuf-1
  1311
  1312						Radix	^d10
  1313
  1314	000006'	000000	000000		scroff: 0	;offset of buffer in screen.
  1315	000007'	000000	000022		scrlen: ^d18
  1316
  1317			000144		ttybfs=^d100		;tty buf size in words.
  1318	000010'				ttybuf: block ttybfs
  1319	000154'	000000	000763		ttysfd: 5*ttybfs-1	;init it correctly.
  1320			000144		qwsize==^d100
  1321	000155'				qspace: block 26*qwsize ; 500 chars by 26 macros.
  1322
  1323	005225'	000000	000001		finver: 1
  1324	005226'				distbl: block 512	; Here is the standard vue environment table !
  1325
  1326	006226'	000000	000001		physpos: 1
  1327	006227'	000000	000001		physlin: 1
  1328	006230'	000000	000000		ws$ptr:	0		; Storage - Pointer for Writestring
  1329	006231'	000000	000010		tabsize: 8
  1330	006232'	000000	000000		csnum: 0
  1331	006233'	000000	000000		cluhac:	0
  1332	006234'				sst: block 132
  1333	006440'	000000	000117		linesz: 79
  1334	006441'	000000	000000		clulin:	0
  1335	006442'	000000	000000		clupos: 0
  1336	006443'	000000	000001		hitsts:	1
  1337	006444'	000000	000001		scrmod: 1
  1338	006445'	000000	000001		muline: 1
  1339	006446'	777777	777777		ocline: -1
  1340	006447'	000000	000000		comchar:	0
  1341	006450'	000000	000000		newcount:	0
  1342	006451'	000000	000000		repcount:	0
  1343	006452'	000000	000000		lowend:		0
  1344	006453'	000000	000000		hend:		0
  1345	006454'	000000	000000		hbot:		0
  1346	006455'	000000	000000		p:		0
  1347	006456'	000000	000000		save: 0
  1348	006457'	000000	000000		mark: 0
  1349	006460'	000000	000022		scrsze:	18
  1350
  1351	006461'	000000	000000		vuetyp:	0			; VUE type
  1352	006462'	000000	000000		submod:	0			; SUB Mode
  1353	006463'	000000	000000		ttytyp: 0			; Terminal type (numeric)
  1354	006464'	000000	000000		ttype:	0			; Terminal type in sixbit
  1355	006465'	000000	000000		tspeed:	0			; Terminal output speed
  1356
  1357	006466'	000 00 0 00 000000 	Usrprv:	z			; User privilage word
  1358	006467'	000 00 0 00 000000 	Usrlic:	z			; User license word
  1359	006470'	000 00 0 00 000000 	Usrnam:	z			; User program name
  1360	006471'	000 00 0 00 000000 	UsrAUN:	z			; User Account Number
  1361	006472'	000 00 0 00 000000 	UsrFPN:	z			; User FILE PPN
  1362	006473'				UsrPPN:				; User GFD'd PPN
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 33-1
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Dmpin/Dmpout - (Chan, Addr, Size)

  1363	006473'	000000	000000		ppn: 0				;  "    "     "
  1364	006474'	000000	000001		curline:	1
  1365	006475'	000000	000000		flush:	0
  1366	006476'	000000	000000		base:	0
  1367
  1368					; Here is the end of the standard vue environment.
  1369
  1370	006477'	000000	000022		modpos: 18
  1371
  1372	006500'	000000	000036		maxss: 30
  1373	006501'				screen:	block	27*132		;[CB] Change 25==>27 hazeltine 2000
  1374	015455'				dskbfh:	block	3
  1375	015460'				dskbuf:	block	132
  1376						radix	8
  1377
  1378	015664'				tymtty:	block	1		;[CB @ Tymshare] Remember tty characteristics
  1379	015665'				inirvx:	block	1		;[CB @ Tymshare] Remember tty characteristics
  1380
  1381	015666'	44 07 0 00 015674'	rsrptr:	point	7,rsrbuf	;pointer into buffer
  1382	015667'	44 07 0 00 015674'	rsrpnt:	point	7,rsrbuf	;pointer into buffer
  1383	015670'				rsrcnt:	block	1		;count character space
  1384	015671'				rsrchr:	block	1		;Rescan break character, -;(
  1385	015672'				rsrwrd:	block	1
  1386	015673'	44 06 0 00 015672'	rsrwpt:	point	6,rsrwrd
  1387	015674'				rsrbuf:	block	<^d135*2>/5	;Room for 2 lines at 132 chars
  1388			015762'			rsrend=.
  1389			000416			rsrmax=<rsrend-rsrbuf>*5 ;# characters maximum
  1390
  1391					;cstk:	block	35		;max depth of  macro calls.
  1392	015762'				rsrstk:	block	1		;place for rescan pointer
  1393
  1394	015763'	000000	000000		ocl:	0
  1395	015764'	000000	000000		ctrlct:	0
  1396	015765'	000000	000000		dmblk:	0
  1397	015766'	000000	000000			0
  1398	015767'				lblk:	block 20
  1399
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 34
VIEW	MAC	22-Nov-70 15:10		VUEMAC	Dmpin/Dmpout - (Chan, Addr, Size)

  1400
  1401	016007'	42 41 53 00 00 00 	bakx: sixbit/bak/
  1402	016010'	44 63 53 00 00 00 	defdsk: sixbit/dsk/
  1403	016011'	000000	000000		zapdev:	0
  1404	016012'	44 63 53 00 00 00 		sixbit/dsk/
  1405	016013'	000000	000000			0
  1406
  1407	016014'	44 63 53 00 00 00 	bfblk1:	sixbit	/dsk/
  1408	016015'	55 41 51 56 00 00 		sixbit	/main/
  1409	016016'	66 65 45 00 00 00 		sixbit	/vue/
  1410	016017'	000000	000000			Exp 0,0,0
  1411	016020'	000000	000000
  1412	016021'	000000	000000
  1413
  1414	016022'	44 63 53 00 00 00 	bfblk2:	sixbit	/dsk/
  1415	016023'	55 41 51 56 00 00 		sixbit	/main/
  1416	016024'	66 65 45 00 00 00 		sixbit	/vue/
  1417	016025'	000000	000000			Exp 0,0,0
  1418	016026'	000000	000000
  1419	016027'	000000	000000
  1420
  1421	016030'				newblk: block	6
  1422	016036'	44 63 53 00 00 00 	filblk: sixbit/dsk/
  1423	016037'	44 45 54 45 64 45 		sixbit/delete/
  1424	016040'	000000	000000			Exp 0,0,0,0
  1425	016041'	000000	000000
  1426	016042'	000000	000000
  1427	016043'	000000	000000
  1428
  1429	016044'	44 63 53 00 00 00 	autblk: sixbit/dsk/
  1430	016045'	66 65 45 00 00 00 		sixbit/vue/
  1431	016046'	64 55 60 00 00 00 		sixbit/tmp/
  1432	016047'	000000	000000			Exp 0,0,0
  1433	016050'	000000	000000
  1434	016051'	000000	000000
  1435
  1436	016052'	44 63 53 00 00 00 	modblk:	sixbit/dsk/
  1437	016053'	51 56 51 64 00 00 		sixbit/init/
  1438	016054'	45 70 45 00 00 00 		sixbit/exe/
  1439	016055'	000000	000000			Exp 0,0,0
  1440	016056'	000000	000000
  1441	016057'	000000	000000
  1442
  1443
  1444	401442'					Reloc	; 400000		; Literals, etc should be shareable
  1445
  1446						End

NO ERRORS DETECTED

HI-SEG. BREAK IS 401543
PROGRAM BREAK IS 016060
CPU TIME USED 01:03.750

6K CORE USED
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page S-1
VIEW	MAC	22-Nov-70 15:10		SYMBOL TABLE

A		000004		FTCOMM		000001		MUNCHO		400445'	ent	RSRPTR		015666'	ent	
ASOS		400421'		FTDEBU	777777	777777	spd	NEWBLK		016030'		RSRSTK		015762'	ent	
AUTBLK		016044'	ent	FTP		401414'	ent	NEWCOU		006450'	ent	RSRWPT		015673'		
AUXCAL	042000	000000		FTPAE		401416'		NOCV		401430'		RSRWRD		015672'		
B		000005		FTPLP		401421'		NOECHO		400217'		RUN	047000	000035		
BADFPN		400021'		FTPWON		401434'		NOREL		401364'		RUNCCA		400172'		
BAKX		016007'		GETAB		401035'		NOREL2		401410'		RUNCCL		400163'		
BASE		006476'	ent	GETAUN		401034'	ent	NTBL		401375'		RUNRPG		400170'		
BFBLK1		016014'	ent	GETAUX		401011'		OBUFF		400706'		S		000000		
BFBLK2		016022'	ent	GETBF		400442'		OCL		015763'		SAVE		006456'		
BINOUT		401110'		GETCHX		401352'	ent	OCLINE		006446'	ent	SAVEDS		000001'		
BUFPTR		000005'		GETFPN		401033'		OKDELF		400150'		SCREEN		006501'	ent	
C		000006		GETJOB		401043'	ent	OKRENF		400137'		SCRLEN		000007'	ent	
CANTEL		400154'		GETLCH	051300	000000		OUTSTR	051140	000000		SCRMOD		006444'	ent	
CAR		401310'		GETLEN		401014'	ent	P		006455'	ent	SCROFF		000006'	ent	
CLUHAC		006233'	ent	GETLIC		401027'		PHYSLI		006227'	ent	SCRSZE		006460'	ent	
CLULIN		006441'	ent	GETNAM		401025'		PHYSPO		006226'	ent	SETLAB		400730'	ent	
CLUPOS		006442'	ent	GETPPN		401040'	ent	PJOB	047000	000030		SETLCH	051340	000000		
COMCHA		006447'	ent	GETPRV		401031'		PLACE		000000'		SETMOD	047000	777752		
CONCEP		401103'		GETTAB	047000	000041		PLOOP		400450'		SILENT		400527'	ext	
CORECH		400436'	ext	GETTTY		401007'	ent	POPOUT		400331'		SKPINL	051600	000000		
CORESI		400247'	ent	GETWID		401010'	ent	PPN		006473'	ent	SLEEP	047000	000031		
CPOPJ		400221'		GLOOP		400407'		PUTBF		400465'		SST		006234'	ent	
CSNUM		006232'	ent	GOXY		400555'	ext	PUTC		400461'		SUBMOD		006462'	ent	
CSTK		400272'	ext	HBOT		006454'	ent	PUTCH		400471'	ent	SUPERB		401114'		
CTRLCT		015764'		HEATH		401132'		PUTLSA	047000	777715		T		000001		
CTRLXR		400675'	ext	HEND		006453'	ent	QREG		400627'	ent	TABLE		401370'		
CTRLXV		400704'	ext	HIBER	047000	000072		QSPACE		000155'		TABSIZ		006231'	ent	
CUCL		400167'	ent	HITSTS		006443'	ent	QUIT		400742'	ent	TATTLE		400060'		
CURLIN		006474'	ent	IMOUT		401045'	ent	QWSIZE		000144	spd	THEREP		401402'	ent	
D		000007		INIRVX		015665'		READ		400314'	ext	TSPEED		006465'	ent	
DEFDSK		016010'	ent	IO.FCS		000100	spd	READCH		400264'	ent	TTYBFS		000144		
DELF		400100'		IO.NEC		000200	spd	READR		400750'		TTYBUF		000010'		
DISTBL		005226'	ent	IO.NEE		000400	spd	REALUP		400763'	ent	TTYIDL		400257'	ent	
DMBLK		015765'		IONEOU	051640	000000		REG		400456'		TTYPE		006464'	ent	
DMPIN		401325'	ent	JRSAP		400376'		REGPL		400457'		TTYSFD		000154'		
DMPOUT		401341'	ent	LBLK		015767'		RELCOR		400235'	ent	TTYTYP		006463'	ent	
DORESC		400641'	ent	LEFTMA		400544'	ext	REPCOU		006451'	ent	TYMTTY		015664'		
DSKBFH		015455'	ent	LINESZ		006440'	ent	RERESC		400644'		UCTRLO		400706'	ext	
DSKBUF		015460'	ent	LOOKOP		400772'	ent	RESCAN	051400	000000		UPDATE		400605'	ent	
E		000010		LOWEND		006452'	ent	RESCN		400650'		UPDCUR		400617'		
E$$COD		401436'		LP1		401215'		RESET		400000'	ent	USEFI1		400313'		
E$$NEC		401440'		LP2		401271'		RESTED		400155'		USEFIL		400301'		
ESCVAL		400623'	ext	LRT		400676'		RESTST		400710'		USETTY		400274'		
EXERR		400746'		MAIL		401016'	ent	RET0		400262'		USRAUN		006471'		
EXIT	047000	000012		MARK		006457'	ent	RET1		400261'		USRFPN		006472'		
F		000002		MAXSS		006500'	ent	RFILE		400675'		USRLIC		006467'		
FEF		400204'	ent	METAP		400331'	ext	RPGBLK		400176'		USRNAM		006470'		
FEN		400222'	ent	MODBLK		016052'	ent	RPTR		400753'	ext	USRPPN		006473'		
FILBLK		016036'	ent	MODPOS		006477'	ent	RSRBUF		015674'		USRPRV		006466'		
FINVER		005225'		MOVEBA		401226'	ent	RSRCHR		015671'	ent	V		000003		
FIXFI0		400356'		MOVEFO		401147'	ent	RSRCNT		015670'		VFILE		400704'		
FIXFIL		400333'	ent	MULINE		006445'	ent	RSREND		015762'		VUECPY		400106'		
FLUBFR		400501'	ent	MULPAG		401321'		RSRMAX		000416		VUEEDT		000055	spd	
FLUSH		006475'	ent	MUNCHI		400404'	ent	RSRPNT		015667'		VUEMIN		000001	spd	
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page S-2
VIEW	MAC	22-Nov-70 15:10		SYMBOL TABLE

VUETYP		006461'	ent	
VUEVER		000001	spd	
VUEWHO		000000	spd	
WLOSS0		400543'		
WLOSS2		400560'		
WLOSS4		400567'		
WRITEL		400527'	ent	
WRITES		400513'	ent	
WRNUM		401052'	ent	
WS$LP		400521'		
WS$PTR		006230'		
ZAPDEV		016011'		
ZERSP		401143'		
.AXCFS		000064	spd	
.AXI8C		000000	spd	
.AXI8S		000001	spd	
.AXICS		000045	spd	
.AXOBR		000016	spd	
.AXOST		000052	spd	
.AXRVX		000055	spd	
.AXSIC		000010	spd	
.AXTTP		000100	spd	
.AXWID		000027	spd	
.GTAUN	777777	777755	spd	
.GTFPN	777777	777753	spd	
.GTLIC	777777	777760	spd	
.GTNAM		000003	spd	
.GTPPN		000002	spd	
.GTPRV		000006	spd	
.IOBIN		000014	spd	
.IOIMG		000010	spd	
.JBDDT		000074		
.JBFF		000121		
.JBREL		000044		
.JBREN		000124		
.JBVER		000137		


View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 1
VUE	INF	22-Nov-70 15:16	
Symbol cross reference

A	   155#	   253	   255	   258	   260	   272	   275	   276	   277	   279	   357	   358	   360	   361
	   362	   365	   378	   390	   391	   392	   409	   410	   411	   412	   413	   414	   416	   418
	   419	   420	   421	   431	   432	   434	   435	   436	   438	   450	   451	   452	   453	   454
	   455	   456	   457	   468	   470	   503	   504	   506	   508	   511	   512	   513	   514	   525
	   535	   555	   556	   559	   560	   561	   562	   563	   564	   574	   575	   576	   577	   578
	   579	   583	   584	   585	   586	   593	   594	   634	   642	   666	   667	   668	   676	   677
	   678	   679	   680	   681	   682	   683	   684	   700	   701	   702	   703	   704	   705	   706
	   722	   723	   724	   725	   727	   729	   733	   735	   747	   755	   756	   757	   761	   762
	   763	   812	   813	   814	   815	   816	   817	   818	   831	   832	   834	   835	   837	   839
	   840	   842	   848	   850	   851	   853	   854	   855	   857	   862	   863	   865	   876	   877
	   879	   880	   882	   883	   885	   886	   896	   897	   898	   899	   900	   910	   911	   912
	   913	   914	   929	   930	   932	   937	   938	   939	   940	   941	   942	   943	   944	   948
	   950	   955	   956	   958	   998	   999	  1000	  1003	  1004	  1005	  1022	  1023	  1024	  1029
	  1030	  1032	  1035	  1037	  1040	  1043	  1049	  1052	  1055	  1063	  1066	  1072	  1073	  1074
	  1075	  1114	  1115	  1116	  1130	  1131	  1132	  1133	  1134	  1135	  1168	  1169	  1170	  1171
	  1187	  1188	  1190	  1191	  1193	  1194	  1197	  1198	  1199	  1205	  1206	  1207	  1210	  1211
	  1218	  1219	  1220	  1223	  1224	  1231	  1232	  1234	  1236	  1237	  1238	  1240	  1241	  1245
	  1246	  1247	  1248	  1249	  1259	  1260	  1274	  1275	  1276	  1277	  1287	  1289
ASOS	   605	   610#
AUTBLK	   177	  1429#
B	   156#	   251	   252	   254	   255	   262	   263	   264	   265	   267	   268	   269	   273	   274
	   276	   283	   284	   286	   287	   297	   298	   376	   377	   388	   389	   470	   471	   472
	   473	   597	   598	   615	   622	   624	   635	   636	   647	   829	   856	   873	   874	   875
	   877	   878	   879	  1024	  1026	  1076	  1120	  1122	  1136	  1178	  1180	  1206	  1208	  1209
	  1219	  1221	  1222	  1242	  1260	  1262	  1264	  1265	  1266	  1267	  1268	  1275	  1282
BADFPN	   247	   251#
BAKX	   561	   583	  1401#
BASE	   178	  1366#
BFBLK1	   184	  1407#
BFBLK2	   184	  1414#
BINOUT	  1015	  1017	  1035#
BUFPTR	   668	   677	   680	  1310#
C	   157#	   282	   285	   286	   289	   295	   299	   302	   303	   319	   320	   321	   326	   328
	   331	   333	   335	   338	   339	   340	   342	   343	   603	   604	   606	   607	   610	   611
	   613	   615	   633	   634	   635	   638	   640	   642	   645	   646	  1006	  1007	  1008	  1010
	  1011	  1013	  1014	  1016	  1018	  1020	  1040	  1044	  1045	  1047	  1055	  1056	  1057	  1059
	  1061	  1084	  1085	  1086	  1087	  1088	  1089	  1092	  1108	  1110	  1111	  1123	  1144	  1145
	  1146	  1147	  1148	  1149	  1152	  1173	  1174	  1175	  1176	  1268	  1282	  1283	  1284	  1286
	  1287
CANTEL	   312	   320	   356#
CAR	  1117	  1172	  1187#
CLUHAC	   177	  1131	  1331#
CLULIN	   177	  1334#
CLUPOS	   177	  1335#
COMCHA	   179	  1340#
CONCEP	  1021	  1029#
CORECH	   192#	   623
CORESI	   185	   467#
CPOPJ	   422#	   705	   791	   796	   798
CSNUM	   183	   503	   914	  1330#
CSTK	   192#	   504	   506	   508
CTRLCT	  1071	  1120	  1129	  1178	  1187	  1395#
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 1
VUE	INF	22-Nov-70 15:16	
Symbol cross reference

CTRLXR	   190#	   860
CTRLXV	   190#	   868
CUCL	   178	   387#
CURLIN	   178	  1072	  1122	  1132	  1180	  1191	  1364#
D	   158#	   313	   319	   599	   616	   617	   625	  1046	  1050	  1058	  1064	  1097	  1098	  1099
	  1100	  1101	  1102	  1105	  1109	  1112	  1113	  1118	  1157	  1158	  1159	  1160	  1161	  1162
	  1165	  1181	  1182	  1183	  1184	  1277	  1280
DEFDSK	   178	  1402#
DELF	   292	   303#
DISTBL	   184	  1324#
DMBLK	  1209	  1211	  1213	  1222	  1224	  1225	  1396#
DMPIN	   185	  1205#
DMPOUT	   185	  1218#
DORESC	   183	   823#
DSKBFH	   181	   600	   602	   603	   607	   608	   609	   610	   643	   645	  1374#
DSKBUF	   178	  1375#
E	   159#	   317	   318	   321	   322	   323	   326	   331	   338	   343	   344	   346	   347	   348
	   349	   351	   352	   376	   377	   378	   388	   389	   391	   618	   619	   620	  1081	  1082
	  1083	  1084	  1090	  1091	  1092	  1094	  1095	  1096	  1097	  1103	  1104	  1105	  1118	  1119
	  1121	  1123	  1141	  1142	  1143	  1144	  1150	  1151	  1152	  1154	  1155	  1156	  1157	  1163
	  1164	  1165	  1176	  1177	  1179	  1184
E$$COD	   558	  1295#
E$$NEC	   458	   474	  1301#
ESCVAL	   191#	   747	   797
EXERR	   908#	  1299	  1305
F	   153#
FEF	   177	   409#	   905	   919
FEN	   177	   387	   430#	   903	   908
FILBLK	   178	   555	   559	   574	   578	   592	   593	   594	   937	   939	   941	   950	  1422#
FINVER	  1323#
FIXFI0	   567	   574#
FIXFIL	   178	   555#
FLUBFR	   181	   430	   502	   665	   676#	   997	  1025
FLUSH	   177	  1365#
FTCOMM	   171#	   828	   844	   847	   872
FTDEBU	   173	   256	   271
FTP	   188	  1271#
FTPAE	  1269	  1276#
FTPLP	  1280#	  1290
FTPWON	  1281	  1291#
GETAB	   975	   977	   979	   983#
GETAUN	   186	   244	   982#
GETAUX	   957#
GETBF	   601	   628#
GETCHX	   188	  1230#
GETFPN	   240	   981#
GETJOB	   186	   993#
GETLEN	   186	   961#
GETLIC	   236	   976#
GETNAM	   238	   974#
GETPPN	   186	   242	   989#
GETPRV	   234	   978#
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 1
VUE	INF	22-Nov-70 15:16	
Symbol cross reference

GETTTY	   186	   955#
GETWID	   186	   956#
GLOOP	   600#	   612	   614	   621	   626	   629
GOXY	   191#	   743
HBOT	   181	   620	  1094	  1099	  1115	  1154	  1159	  1170	  1236	  1264	  1345#
HEATH	  1009	  1012	  1055#
HEND	   181	   450	  1238	  1344#
HITSTS	   183	  1336#
IMOUT	   177	   997#	  1036
INIRVX	   415	   416	   437	   438	   439	  1379#
IO.FCS	   213#	   421
IO.NEC	   212#	   421
IO.NEE	   211#	   421
JRSAP	   582	   590#
LBLK	   938	   940	   942	   944	   945	  1398#
LEFTMA	   191#	   734
LINESZ	   179	  1333#
LOOKOP	   183	   937#
LOWEND	   179	   617	   618	  1081	  1086	  1114	  1141	  1146	  1169	  1234	  1237	  1262	  1265	  1343#
LP1	  1116#	  1124
LP2	  1171#	  1185
LRT	   861#	   869	   871
MAIL	   186	   966#
MARK	   180	  1348#
MAXSS	   180	  1372#
METAP	   190#	   551
MODBLK	   187	  1436#
MODPOS	   181	  1370#
MOVEBA	   187	  1128#
MOVEFO	   187	  1070#
MULINE	   180	  1194	  1198	  1338#
MULPAG	  1189	  1197#
MUNCHI	   180	   596#
MUNCHO	   180	   632#
NEWBLK	   560	   562	   564	   565	   566	   568	   569	   570	   571	   572	   575	   577	   579	   580
	   581	   584	   586	   587	   588	  1421#
NEWCOU	   179	  1341#
NOCV	  1287#
NOECHO	   359	   420#
NOREL	  1235	  1240#
NOREL2	  1263	  1266#
NTBL	  1251#	  1268
OBUFF	   843	   870#
OCL	  1073	  1133	  1190	  1394#
OCLINE	   180	  1339#
OKDELF	   325	   328	   333	   339	   351#
OKRENF	   330	   337	   342#
P	   181	   453	  1091	  1104	  1151	  1164	  1241	  1267	  1346#
PHYSLI	   184	   742	  1327#
PHYSPO	   184	   730	   738	   752	   766	   767	  1326#
PLACE	   898	   920	   924#
PLOOP	   636#	   648
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 1
VUE	INF	22-Nov-70 15:16	
Symbol cross reference

POPOUT	   526	   536	   551#
PPN	   178	   563	   576	   585	  1363#
PUTBF	   644	   649#
PUTC	   645#	   650	   652
PUTCH	   181	   662#	   728	   750	   759	   764	  1031	  1042	  1048	  1051	  1062	  1065
QREG	   183	   810#
QSPACE	   810	  1321#
QUIT	   187	   903#
QWSIZE	   817	  1320#	  1321
READ	   190#	   524	   534
READCH	   179	   502#	   552
READR	   899	   910#
REALUP	   177	   929#
REG	   639	   642#
REGPL	   641	   643#
RELCOR	   185	   450#
REPCOU	   179	   911	  1342#
RERESC	   829#	   888
RESCN	   834#	   856	   859
RESET	   181	   233#
RESTED	   266	   270	   278	   310	   357#
RESTST	   855	   873#
RET0	   492#	   651	   946
RET1	   487#	   637	   951
RFILE	   849	   860#	   881	   884	   887
RPGBLK	   376	   388	   395#
RPTR	   192#	   913
RSRBUF	  1381	  1382	  1387#	  1389
RSRCHR	   185	  1384#
RSRCNT	  1383#
RSREND	  1388#	  1389
RSRMAX	  1389#
RSRPNT	  1382#
RSRPTR	   185	  1381#
RSRSTK	   185	  1392#
RSRWPT	   832	   857	  1386#
RSRWRD	   830	   831	   880	   883	   886	  1385#	  1386
RUNCCA	   379	   390#
RUNCCL	   376#
RUNRPG	   388#
S	   151#	   234	   236	   238	   240	   242	   244	   387	   422	   430	   437	   439	   440	   459
	   468	   475	   493	   502	   509	   519	   523	   524	   525	   532	   533	   534	   535	   542
	   549	   551	   595	   597	   623	   630	   633	   663	   665	   666	   669	   685	   699	   700
	   706	   707	   708	   721	   722	   727	   728	   729	   731	   737	   738	   739	   740	   741
	   742	   743	   744	   745	   749	   750	   751	   753	   757	   758	   759	   760	   761	   763
	   764	   765	   768	   782	   800	   812	   819	   826	   838	   860	   866	   867	   868	   870
	   892	   896	   901	   903	   905	   906	   908	   915	   919	   929	   933	   935	   959	   962
	   972	   985	   991	   994	   997	   998	  1001	  1025	  1027	  1030	  1031	  1032	  1033	  1035
	  1036	  1037	  1038	  1041	  1042	  1043	  1047	  1048	  1049	  1050	  1051	  1052	  1053	  1061
	  1062	  1063	  1064	  1065	  1066	  1067	  1074	  1134	  1192	  1195	  1200	  1205	  1214	  1216
	  1218	  1226	  1231	  1233	  1239	  1243	  1259	  1274	  1288	  1292
SAVE	   622	   624	  1347#
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 1
VUE	INF	22-Nov-70 15:16	
Symbol cross reference

SAVEDS	   892	   893	   894	   895	   915	   916	   917	   918	   925#
SCREEN	   178	  1373#
SCRLEN	   184	  1315#
SCRMOD	   180	  1199	  1337#
SCROFF	   184	  1314#
SCRSZE	   178	  1349#
SETLAB	   183	   892#
SILENT	   191#	   662	   698	   720
SST	   180	  1332#
SUBMOD	   183	  1352#
SUPERB	  1019	  1040#
T	   152#	   782	   783	   784	   785	   793	   794	   797
TABLE	  1242	  1245#
TABSIZ	   184	   788	   789	   790	  1329#
TATTLE	   261	   287#
THEREP	   188	  1257#
TSPEED	   186	   417	   419	  1355#
TTYBFS	   681	  1317#	  1318	  1319
TTYBUF	   678	   684	  1310	  1318#
TTYIDL	   181	   484#
TTYPE	   186	  1354#
TTYSFD	   664	   682	  1319#
TTYTYP	   180	  1006	  1353#
TYMTTY	   411	   434	  1378#
UCTRLO	   190#	   870
UPDATE	   182	   739	   781#
UPDCUR	   786	   793#
USEFI1	   533#	   537
USEFIL	   507	   523#	   527	   530
USETTY	   505	   511#
USRAUN	   245	  1360#
USRFPN	   241	   246	   249	   265	   269	   272	   293	   317	   347	  1361#
USRLIC	   237	   290	   300	  1358#
USRNAM	   239	   248	   260	   311	   318	  1359#
USRPPN	   243	   294	   297	  1362#
USRPRV	   235	   358	  1357#
V	   154#	   235	   237	   239	   241	   243	   245	   290	   291	   293	   294	   296	   298	   300
	   301	   303	   325	   327	   329	   332	   334	   469	   485	   486	   488	   489	   492	   508
	   512	   518	   526	   527	   528	   529	   531	   536	   537	   541	   543	   544	   546	   547
	   548	   741	   783	   787	   788	   789	   790	   791	   796	   798	   799	   810	   811	   818
	   931	   934	   957	   958	   961	   966	   967	   968	   969	   970	   971	   974	   976	   978
	   981	   982	   983	   984	   989	   993	  1212	  1215	  1230	  1242	  1278	  1291
VFILE	   841	   868#
VUECPY	   317#	   324	   341	   345	   350	   354
VUEEDT	     7#	   168
VUEMIN	     6#	   168
VUETYP	   183	  1351#
VUEVER	     5#	   168
VUEWHO	     4#	   168
WLOSS0	   726	   733#
WLOSS2	   736	   747#
WLOSS4	   748	   755#
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 1
VUE	INF	22-Nov-70 15:16	
Symbol cross reference

WRITEL	   182	   707	   719#
WRITES	   182	   697#
WRNUM	   177	  1003#
WS$LP	   704#	   709
WS$PTR	   703	   704	  1328#
ZAPDEV	   556	   557	  1403#
ZERSP	  1060	  1064#
.AXCFS	   208#	   420
.AXI8C	   200#	   511
.AXI8S	   201#	   834	   862
.AXICS	   205#
.AXOBR	   203#	   418
.AXOST	   206#	   683
.AXRVX	   207#	   414	   436
.AXSIC	   202#	   485
.AXTTP	   209#	   955
.AXWID	   204#	   956
.GTAUN	   219#	   982
.GTFPN	   218#	   981
.GTLIC	   220#	   976
.GTNAM	   222#	   974
.GTPPN	   221#
.GTPRV	   223#	   966	   978
.IOBIN	   216#	   421
.IOIMG	   215#
.JBDDT	   257
.JBFF	   454	   469	   471
.JBREL	   456	   472
.JBREN	   900
.JBVER	   167
View	Macro support subroutines for VUE	MACRO %53B(1156)-1 07:34 26-Mar-82 Page 1
VUE	INF	22-Nov-70 15:16	
Macro/Opdef cross reference

AUXCAL	   196#	   416	   419	   421	   438	   486	   512	   684	   835	   863	   958
EXIT	   904	   909
GETLCH	   410
GETTAB	   967	   983
HIBER	   432
IONEOU	  1000	  1026
OUTSTR	  1295	  1301
PJOB	   993
PUTLSA	   198#	   287
RESCAN	   824
RUN	   392
SETLCH	   413	   435
SETMOD	   197#
SKPINL	   825
SLEEP	   514   @]