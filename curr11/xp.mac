	.NLIST
.IF DF XLIST
	.NLIST
	.DSABL	CRF
.ENDC
	.LIST
	.SBTTL	XP     - NETWORK PARAMETERS

	.ENABLE	PUR			;PURGE ALL UNUSED PARAMETERS!


;DEFINE DEFAULT VALUES FOR THE ASSEMBLY OPTIONS

;OPTION "PDP11" DEFINES THE MODEL OF PDP-11 THE NODE IS RUNNING ON
;	0 = PDP-11/03 (LSI-11)
;	1 = PDP-11/04
;	2 = PDP-11/10
;	3 = PDP-11/34
;	4 = PDP-11/40
;	5 = PDP-11/60

.IF NDF PDP11
  PDP11=!0				;DEFAULT IS LSI-11
.ENDC

.IF NDF ..BUG
  ..BUG=!0				;IF NOT DEFINED, NO DEBUG CODE
.ENDC

.IF NDF ..EIS
  ..EIS=!1				;ASSUME WE HAVE EIS!!
.ENDC

;OPTION "OPEXM" SPECIFIES IF MEMORY MANAGEMENT IS USED (EXTENDED MEMORY)
;	0 = DO NOT USE MEMORY MANAGEMENT
;	1 = USE MEMORY MANAGEMENT

.IF NDF OPEXM
  OPEXM=!0				;DEFAULT IS NO EXTENDED MEMORY
.ENDC

;DEFINE REGISTERS:


R0=%0
R1=%1			;USUALLY POINTS TO PACKET
R2=%2
R3=%3
R4=%4			;USUALLY POINTS TO DDB
SD=%5			;POINTER TO SOCKET DATA BLOCK (SDB)
SP=%6			;STACK POINTER
PC=%7			;PROGRAM COUNTER

PSW=177776		;PSW (IF ADDRESS AS MEMORY)

	.NLIST	BEX		;ONLY LIST ONE LINE PER INSTRUCTION
	.NLIST	ME		;DONT LIST MACRO EXPANSIONS
	.NLIST	MEB

;DEFINE PASS FLAG

.IF NDF .PASS2
  .PASS2=!0			;IF PASS 1
.IFF
  .PASS2=!1			;IF PASS 2
.ENDC

;DEFINE STANDARD MACROS

;DEFINE MACRO TO DECLARE PERMINATE PROGRAM SECTION

	.MACRO	PSECT  NAME,RWRO,ID,LCLGBL,RELABS,CONOVR
	.PSECT	NAME,RWRO,ID,LCLGBL,RELABS,CONOVR
	.MACRO	RESTOR
	.PSECT	NAME,RWRO,ID,LCLGBL,RELABS,CONOVR
	.ENDM
	.ENDM

	.MACRO	CODE
	.PSECT	CODE,RW,I,LCL,REL,CON
	.MACRO	RESTOR
	.PSECT	CODE,RW,I,LCL,REL,CON
	.ENDM
	.ENDM

	.MACRO	PURE
	.PSECT	PURE,RW,D,LCL,REL,CON
	.MACRO	RESTOR
	.PSECT	PURE,RW,D,LCL,REL,CON
	.ENDM
	.ENDM

	.MACRO	IMPURE
	.PSECT	IMPURE,RW,D,LCL,REL,CON
	.MACRO	RESTOR
	.PSECT	IMPURE,RW,D,LCL,REL,CON
	.ENDM
	.ENDM

	.MACRO	MAIN
	.PSECT	MAIN,RW,I,LCL,REL,CON
	.MACRO	RESTOR
	.PSECT	MAIN,RW,I,LCL,REL,CON
	.ENDM
	.ENDM

;DEFINE MACRO FOR CALLING PACKET ALLOCATION SUBROUTINE

	.MACRO	MAKPKT	LIM
.IF B <LIM>
  .ERROR	;MAKPKT INVOKED WITHOUT LIMIT PARAMETER
.ENDC
	EMT	LIM
	.ENDM

;DEFINE MACRO FOR CALLING PACKET DEALLOCATION SUBROUTINE

	.MACRO	FREPKT
	IOT
	.ENDM

;DEFINE MACRO FOR USE AFTER INSTRUCTIONS WHICH MAY CAUSE ILLEGAL MEMORY
;  REFERENCE

	.MACRO	NXMJMP  LOC
	BR	.+4
	.WORD	LOC
	.ENDM

;DEFINE MACROS FOR BIT TESTING THE MOST EFFICIENT WAY

	.MACRO	TBBN  BITS,WORD,ADDR
	.DSABL	CRF
.IF EQ BITS-100000
	.ENABL	CRF
	TST	WORD
	BMI	ADDR
.IFF
  .IF EQ BITS-200
	.ENABL	CRF
	TSTB	WORD
	BMI	ADDR
  .IFF
	.ENABL	CRF
	BIT	#BITS,WORD
	BNE	ADDR
  .ENDC
.ENDC
	.ENDM

	.MACRO	TBBE  BITS,WORD,ADDR
	.DSABL	CRF
.IF EQ BITS-100000
	.ENABL	CRF
	TST	WORD
	BPL	ADDR
.IFF
  .IF EQ BITS-200
	.ENABL	CRF
	TSTB	WORD
	BPL	ADDR
  .IFF
	.ENABL	CRF
	BIT	#BITS,WORD
	BEQ	ADDR
  .ENDC
.ENDC
	.ENDM

;DEFINE PUSH MACRO

	.MACRO	PUSH  LOC
.IF NB <LOC>
	MOV	LOC,-(SP)
.IFF
	CLR	-(SP)
.ENDC
	.ENDM

	.MACRO	PUSHB  LOC
.IF NB <LOC>
	MOVB	LOC,-(SP)
.IFF
	CLRB	-(SP)
.ENDC
	.ENDM

;DEFINE POP MACRO

	.MACRO	POP  LOC
.IF NB <LOC>
	MOV	(SP)+,LOC
.IFF
	TST	(SP)+
.ENDC
	.ENDM

	.MACRO	POPB  LOC
.IF NB <LOC>
	MOVB	(SP)+,LOC
.IFF
	TST	(SP)+
.ENDC
	.ENDM

;DEFINE MACROS TO SET PROCESSOR'S PSW

	.MACRO	SETPSW  VAL
	PUSH	VAL
	.GLOBL	RTNRTI
	CALL	RTNRTI
	.ENDM

	.MACRO	CLRPSW
	CLR	-(SP)
	.GLOBL	RTNRTI
	CALL	RTNRTI
	.ENDM

;DEFINE MACRO FOR INDIRECT JUMP (THIS ALLOWS DOUBLE INDIRECT JUMPS!)

	.MACRO	JMPI  LOC
	MOV	LOC,PC
	.ENDM

;DEFINE MACRO FOR GENERATING SINGLE RADIX-50 WORD FROM THREE CHARACTERS
;  FROM A STRING
;	.WR50	N,STRING,VAL
;  WHERE:
;	N      = NUMBER OF CHARACTER IN STRING TO START WITH
;	STRING = CHARACTER STRING
;	VAL    = OPTIONAL SYMBOL WHICH IS SET EQUAL TO THE VALUE OF THE
;		   RADIX-50 WORD - IF NOT GIVEN, THE VALUE IS USED AS THE
;		   ARGUMENT OF A .WORD PSEUDO-OP

	.MACRO	.WR50  .N,.XXX,.RT
	.DSABL	CRF
.IF NDF .PASS2
  .IF B .RT
	.WORD	0
  .ENDC
.IFF
  .A=!1
  .B=!1
  .F=!3100
  .V=!0
	.IRPC	.Q,<.XXX>
  .IF LE .N-.A
    .Y=!''.Q
    .IF GT .Y-140
      .Y=!.Y&337
    .ENDC
    .IF EQ .Y-'$
      .Y=!33
    .IFF
      .IF EQ .Y-'.
        .Y=!34
      .IFF
        .IF LT .Y-100
          .Y=!.Y-22
        .ENDC
      .ENDC
    .ENDC
    .Y=!.Y&77
    .V=!.V+<.Y*.F>
    .F=!.F/50
    .B=!.B+1
  .ENDC
  .IF GT .B-3
	.MEXIT
  .ENDC
  .A=!.A+1
	.ENDM
  .IF B .RT
	.WORD	.V
  .IFF
	.ENABL	CRF
    .RT=!0			;JUST FOR CREF!
	.DSABL	CRF
    .RT=!.V
  .ENDC
.ENDC
	.ENDM

;DEFINE MACRO TO SETUP ACTUAL ADDRESS OF PACKET FROM POINTER

.IF EQ OPEXM
	.MACRO	SETADR  PNT,ADR
  .IF DIF <PNT><ADR>
	MOV	PNT,ADR
  .ENDC
	.ENDM
.IFF
	.MACRO	SETADR  PNT,ADR
	MOV	PNT,XXMRG6#
	MOV	#PKBASE,ADR
	.ENDM
.ENDC

;DEFINE MACRO TO STORE POINTER TO PACKET

.IF EQ OPEXM
	.MACRO	STRPNT  PNT,LOC
	MOV	PNT,LOC
	.ENDM
.IFF
	.MACRO	STRPNT  PNT,LOC
	MOV	XXMRG6#,LOC
	.ENDM
.ENDC

;DEFINE SHIFT MACRO (NEEDED SINCE MACRO-11 DOES NOT HAVE SHIFT OPERATOR!)

	.MACRO	.SHFT  VAL,NUM,AMT	;DEFINES VAL TO BE NUM SHIFTED LEFT
VAL=NUM					;  BY AMT (RIGHT IF AMT IS .LT. 0)
.IF GT AMT
	.REPT	AMT
  VAL=VAL*2
	.ENDR
.ENDC
.IF LT AMT
	.REPT	-<AMT>
  VAL=VAL/2
	.ENDR
.ENDC
	.ENDM

;DEFINE MACRO TO GENERATE ENTRIES IN THE INTERRUPT VECTOR TABLE

	.MACRO	VECTOR  LOC,ADDR,LEVEL
	.PSECT	VECTBL,RW,D,LCL,REL,CON
	.WORD	LOC,ADDR,LEVEL*40
	RESTOR
	.ENDM

;DEFINE MACRO TO GENERATE ENTRIES IN THE INITIALIZATION ROUTINE

	.MACRO	INICAL	NAME
	.PSECT	INIT,RW,I,LCL,REL,CON
	CALL	NAME
	RESTOR
	.ENDM

;DEFINE MACRO TO GENERATE ENTRIES IN THE MAIN PROGRAM LOOP

	.MACRO	MAINXX  NAME
	.PSECT	MAIN,RW,I,LCL,REL,CON
	CALL	NAME
	RESTOR
	.ENDM

;DEFINE MACRO TO GENERATE ENTRIES IN THE ONCE-A-SECOND LOOP

	.MACRO	ONCSEC  NAME
	.PSECT	SECOND,RW,I,LCL,REL,CON
	CALL	NAME
	RESTOR
	.ENDM

;DEFINE MACRO TO GENERATE ENTRIES IN THE TEN-TIMES-A-SECOND LOOP

	.MACRO	TNHSEC  NAME
	.PSECT	TENTHS,RW,I,LCL,REL,CON
	CALL	NAME
	RESTOR
	.ENDM

;DEFINE FATAL ERROR STOP MACRO

	.MACRO	FSTOP  X
	TRAP	1
	.RAD50	/X/
	.ENDM

;DEFINE RESTART ERROR STOP MACRO

	.MACRO	RSTOP  X
	TRAP	0
	.RAD50	/X/
	.ENDM

;DEFINE MACRO FOR SUPPRESSING LISTING OF PARAMETER FILE XP.MAC

	.MACRO	XLPAR
	.ENABLE	PUR
XLIST=!1
	.DSABLE	PUR
	.ENDM
	.PAGE
;DEFINE MACROS FOR EIS INSTRUCTIONS FOR MACHINES WHICH DON'T HAVE THEM!!!!

.IF NE ..EIS			;IF WE DO HAVE EIS!

	.MACRO	ASHI  S,LOC
	ASH	#S,LOC
	.ENDM

.IFF				;IF NO EIS!!!!

	.MACRO	ASHI  S,LOC
.IF GT S
	.REPT	S
	ASL	LOC
	.ENDR
.ENDC
.IF LT S
	.REPT	-S
	ASR	LOC
	.ENDR
.ENDC
	.ENDM

	.MACRO	ASHC  S,LOC
	.ERROR	0;ILLEGAL INSTRUCTION -- ASHC !! NO EIS !!
	.ENDM

	.MACRO	SOB  R,LOC
	DEC	R
	BNE	LOC
	.ENDM

	.MACRO	MUL  LOC,R
	.GLOBL	MULSUB
	PUSH	LOC
	PUSH	R
	CALL	MULSUB
	POP	R
	POP	%<R!1>
	.ENDM

	.MACRO	DIV  LOC,R
	.GLOBL	DIVSUB
	PUSH	LOC
	PUSH	R
	PUSH	%<R!1>
	CALL	DIVSUB
	POP	R
	POP	%<R!1>
	.ENDM

	.MACRO	XOR  R,DST
	PUSH	R
	BIC	DST,(SP)
	BIC	R,DST
	BIS	(SP)+,DST
	.ENDM

.ENDC			;.IF XX ..EIS
	.PAGE
;-----
; Define bits for general use
;-----
$BIT00	=! ^B0000000000000001
$BIT01	=! ^B0000000000000010
$BIT02	=! ^B0000000000000100
$BIT03	=! ^B0000000000001000
$BIT04	=! ^B0000000000010000
$BIT05	=! ^B0000000000100000
$BIT06	=! ^B0000000001000000
$BIT07	=! ^B0000000010000000
$BIT08	=! ^B0000000100000000
$BIT09	=! ^B0000001000000000
$BIT10	=! ^B0000010000000000
$BIT11	=! ^B0000100000000000
$BIT12	=! ^B0001000000000000
$BIT13	=! ^B0010000000000000
$BIT14	=! ^B0100000000000000
$BIT15	=! ^B1000000000000000
	.PAGE
;DEFINE BITS FOR THE NODSTS STATUS WORD

$NSNCS=!100000		;DO NOT CHECK-SUM MEMORY (FOR DEBUGGING)
$NSRCS=!040000		;RECALCULATE MEMORY CHECK-SUM VALUE
$NSFTL=!020000		; Treat all RSTOPs as FSTOPs (i.e., fatally)
$NSMMU=!000010		;This node has an MMU
$NSMMA=!000004		;The MMU is enabled
$NSNOA=!000002		;DO NOT ANSWER DATA SET LINES
$NSNOT=!000001		;NO TIME-OUTS FOR DOWN LINKS IF SET (FOR DEBUGGING)

;DEFINE BITS FOR THE SDSTS1 STATUS WORD IN EACH SDB

$S1HLD=!100000		;Output has been held off
$S1STP=!040000		;Transfer to packet service has been stopped
$S1INU=!020000		;Socket is in use (is not in socket free-list)
$S1JNK=!010000		;Junk all received data packets
$S1DPS=!004000		;Disconnect pending state timer sync bit
$S1AVL=!002000		;Socket is available (hardware exists)
$S1BC2=!001000		;Been connected 2
$S1STA=!000377		;Socket state (used when sending packets)
  .SSDIS=!0		;  Disconnected
  .SSCTP=!2		;  Connect to socket pending
  .SSCFP=!4		;  Connect from socket pending
  .SSCON=!6		;  Connected
  .SSDTP=!10		;  Disconnect to socket pending
  .SSDFP=!12		;  Disconnect from socket pending
  .SSKT1=!14		;  Kill to socket pending - state 1
  .SSKT2=!16		;  Kill to socket pending - state 2
  .SSZTR=!20		;  Zap to socket requested
  .SSZFR=!22		;  Zap from socket requested
  .SSRTP=!24		;  Reconnect to socket pending
  .SSRFP=!26		;  Reconnect from socket pending
  .SSRTW=!30		;  Reconnect to device waiting
  .SSRFW=!32		;  Reconnect from socket waiting
  .SSRIP=!34		;  Reconnect in progress

;DEFINE BITS FOR THE EQUEST BYTE IN THE SDB (SDREQB)

$RQPOK=!200		;POKE
$RQRSM=!100		;RESUME

;DEFINE BITS FOR THE PURE DEVICE STATUS WORD DDSTS0 IN THE DDB

$D0PRI=!100000		;THIS NODE IS PRIMARY FOR CONNECTIONS ON THIS DEVICE
$D0LNK=!040000		;THIS DEVICE IS AN INTERNAL NEXNET LINK
$D0TRM=!020000		;THIS DEVICE IS A TERMINAL
$D0FLG=!010000		;THIS DEVICE USES FLAG PROTOCOL (ONLY SET FOR LINKS,
			;  HOSTS, OR GATEWAYS)
$D0HST=!004000		;THIS DEVICE IS A HOST
$D0SII=!002000		;SEND "SOCKET IS IDLE" PACKETS (ONLY SET FOR LINKS)
$D0GTW=!001000		;THIS DEVICE IS A GATEWAY
$D0CLN=!000400		;THIS DEVICE DOES NOT DO COMPLETE CLEANUP ON
			;  DISCONNECTS SO THIS MUST BE DONE BY SNDPKT
$D0TAX=!000200		;"Aux" connections can be made to this device
$D0LVL=!000100		;THIS LINK USES THE "LINK PRIORITY LEVEL" (SDLKLV,
			;  SDACNT, AND SDFCNT ARE INITIALIZED BY SNDPKT)
$D0WLD=!000040		;This device will allocate socket if socket 0
			;  (Wild socket) is specified
$D0FAX=!000020		;"Aux" connections can be made from this device
$D0DV3=!000010		;DEVICE DEPENDENT BIT
$D0DV2=!000004		;DEVICE DEPENDENT BIT
$D0DV1=!000002		;DEVICE DEPENDENT BIT
$D0DV0=!000001		;DEVICE DEPENDENT BIT

;DEFINE BITS FOR THE IMPURE DEVICE STATUS WORD DDSTS1 IN THE DDB

$D1ACT=!100000		;DEVICE IS ACTIVE
$D1DWN=! 40000		;LINK OR HOST IS DOWN (NEVER SET FOR DEVICES)
$D1UNV=! 20000		;DEVICE IS UNAVAILABLE (HARDWARE DOES NOT EXIST)
$D1OFF=! 10000		;Device has been turned off by status device
$D1LCK=!  4000		;Device is locked (no new connections)
$D1FTL=!  2000		;FATAL ERROR HAS OCCURED
$D1DIS=!  1000		;INTERFACE HAS BEEN TEMPORARILY DISABLED DUE TO ERROR
$D1ACH=!   200		;HARDWARE IS ACTIVE
$D1ACP=!   100		;PACKET OUTPUT IS ACTIVE
$D1DV3=!    10		;DEVICE DEPENDENT BIT
$D1DV2=!     4		;DEVICE DEPENDENT BIT
$D1DV1=!     2		;DEVICE DEPENDENT BIT
$D1DV0=!     1		;DEVICE DEPENDENT BIT
	.PAGE
;DEFINE SPECIAL ASCII CHARACTERS

NUL=!000		;NULL
SOH=!001		;START OF HEADER (^A)
STX=!002		;START OF TEXT (^B)
ETX=!003		;END OF TEXT (^C)
EOT=!004		;END OF TRANSMISSION (^D)
ENQ=!005		;ENQUIRY (^E)
ACK=!006		;ACKNOWLEDGEMENT (^F)
BEL=!007		;BELL (^G)
BS =!010		;BACK SPACE (^H)
HT =!011		;HORIZONTAL TAB (^I)
LF =!012		;LINE FEED (^J)
VT =!013		;VERTICAL TAB (^K)
FF =!014		;FORM FEED (^L)
CR =!015		;CARRIAGE RETURN (^M)
SO =!016		;SHIFT OUT (^N)
SI =!017		;SHIFT IN (^O)
DLE=!020		;DATA LINK ESCAPE (^P)
DC1=!021		;XON - DEVICE CONTROL 1 (^Q)
DC2=!022		;DEVICE CONTROL 2 (^R)
DC3=!023		;XOFF - DEVICE CONTROL 3 (^S)
DC4=!024		;DEVICE CONTROL 4 (^T)
NAK=!025		;NEGATIVE ACKNOWLEDGEMENT (^U)
SYN=!026		;SYNC (^V)
ETB=!027		;END OF TRANSMISSION BLOCK (^W)
CAN=!030		;CANCEL (^X)
EM =!031		;END OF MEDIUM (^Y)
SUB=!032		;SUBSTITUTE (^Z)
ESC=!033		;ESCAPE (^[)
FS =!034		;FILE SEPARATOR (^\)
GS =!035		;GROUP SEPARATOR (^])
RS =!036		;RECORD SEPARATOR (^^)
US =!037		;UNIT SERARATOR (^_)
SPA=!040		;SPACE
LA =!074		;LEFT ANGLE
RA =!076		;RIGHT ANGLE
GRV=!140		;GRAVE
LB =!173		;LEFT BRACE
VB =!174		;VERTICAL BAR
RB =!175		;RIGHT BRACE
TLD=!176		;TILDE
DEL=!177		;DELETE (RUBOUT)

;DEFINE PSEUDO-ASCII CHARACTERS USED IN THE TRANSLATION TABLES FOR NON-ASCII
;  TERMINALS

UNUSED=!200		;NON-ASCII CODE WHICH HAS NO ASCII EQUIVALENT
LCSHFT=!201		;LOWER CASE SHIFT
UCSHFT=!202		;UPPER CASE SHIFT
PREFIX=!203		;PREFIX CHARACTER
SELEOT=!204		;2741 EOT CHARACTER

;DEFINE SPECIAL 2741 CHARACTERS

SLUCS=!34		;UPPER CASE SHIFT
SLLCS=!37		;LOWER CASE SHIFT
SLEOA=!64		;EOA
SLEOT=!74		;EOT
	.PAGE
;DEFINE SUPERVISORY PACKETS TYPES (APPLY TO ALL PACKETS SENT ON A WILD
;  SOCKET)

.SPFLG=!0			;FLAGS
.SPCON=!1			;WILD CONNECT
.SPACK=!2			;WILD CONNECT ACK
.SPNAK=!3			;WILD CONNECT NAK
.SPSII=!4			;"SOCKET IS IDLE"
.SPSIA=!5			;"SOCKET IS ACTIVE"
.SPFSI=!6			;"FORCE SOCKET IDLE"

;DEFINE NORMAL PACKET TYPES (APPLY TO ALL PACKETS SENT ON OTHER THAN A
;  WILD SOCKET)

.PTDAT=!0		;DATA
.PTCON=!1		;CONNECT REQUEST
.PTACK=!2		;CONNECT ACKNOWLEDGEMENT (ACK)
.PTNAK=!3		;CONNECT NEGATIVE ACKNOWLEDGEMENT (NAK)
.PTFUN=!4		;FUNCTION
  .FNNUL=!0		;  NULL
  .FNHIN=!1		;  HARD INTERRUPT
  .FNSIN=!2		;  SOFT INTERRUPT
  .FNOSA=!3		;  OUTPUT SUPPRESS ACK
  .FNOPS=!4		;  OUTPUT SUPPRESS
  .FNOPH=!5		;  OUTPUT HOLD
  .FNOPA=!6		;  OUTPUT ALLOW
  .FNCDP=!7		;  CHANGE DEVICE PARAMETERS (SET AND READ)
  .FNSDP=!10		;  SET DEVICE PARAMETERS
  .FNADP=!11		;  ACCESS DEVICE PARAMETERS
  .FNRDP=!12		;  REPLY WITH DEVICE PARAMETERS
  .FNDCN=!13		;  DEVICE CONTROL
  .FNDST=!14		;  DEVICE STATUS
  .FNADS=!15		;  ACCESS DEVICE STATUS
    $D0ERR=!200		;    DEVICE ERROR STATUS
    $D0OFL=!100		;    DEVICE OFF-LINE STATUS
  .FNCON=!16		;  CONTINUE OUTPUT (^Q)
  .FNFHI=!17		;  FORCE HARD INTERRUPT
  .FNDEM=!20		;  DEFERRED ECHO MODE CONTROL
  .FNRQD=!21		;  REQUEST DISCONNECT
  .FNRQC=!22		;  REQUEST BUFFER CLEAR
  .FNREQ=!23		;  REQUEST (YELLOW BALL)
  .FNRSP=!24		;  RESPONSE (ORANGE BALL)
  .FNGRN=!25		;  GREEN BALL
  .FNRED=!26		;  RED BALL
  .FNLST=!27		;  LOST DATA INDICATION
  .FNLSX=!30		;  REFLECTED LOST DATA INDICATION
  .FNBRK=!31		;  BREAK RECEIVED OR REQUEST
  .FNHNG=!32		;  HANG UP REQUEST
  .FNXHG=!33		;  HARD HANG UP REQUEST
  .FNRCC=!34		;  Reconnect control
  .FNXGB=!35		;  Special character gobbler for TYMNET
  .FNSRQ=!36		;  Status request
  .FNCLI=!37		;  Clear login mode
  .FNBIN=!40		;  Output binary characters from function
  .FNFLR=!41		;  Force line retype
  .FNXMK=!42		;  X.25 marker, to delimit data packets and pass M & Q
  .FNXIT=!43		;  X.25 Interrupt (in interrupt packet, .+int user data)
  .FNXIC=!44		;  X.25 Interrupt Confirmation
  .FNXRS=!45		;  X.25 Reset (in Eat Packet, .+cause code+diag code)
  .FNXRC=!46		;  X.25 Reset Confirmation (in Eat Packet)
;+--us701, ATCX25
  .FNX47=!47		;  X.25 indicate to CMDX28 that X I/F and LKEPKT
			;  	is connected, respond to .FNX51
  .FNX50=!50		;  send X.25 call req pk in the form of function pk,
  .FNX51=!51		;  if length of call req pk < 64 bytes, use .FNX51,
			;  if > 64, use .FNX50's followed by .FNX51.
;---us701
.PTINT=!5		;INTERRUPT FUNCTION
.PTEAT=!6		;"EAT" PACKET
.PTDIS=!7		;DISCONNECT REQUEST
.PTKIL=!10		;KILL CONNECTION
.PTDAK=!11		;DISCONNECT ACK
.PTRCR=!12		;RECONNECT REQUEST
.PTXRR=!21		;X.25 RR EQUIVALENT

;DEFINE SYMBOLS FOR TERMINAL PROFILES (THESE DEFINATIONS MUST MATCH THE TABLES
;  IN TRMT!)

P.TYMSHR=!0		;TYMSHARE (TERMINAL CONNECTED TO TYMSHARE HOST)
P.T10   =!1		;TOPS-10 (DEC)
P.T20   =!2		;TOPS-20 (DEC)
P.RSX   =!3		;RSX (DEC)
;P.CANSIM=!4		;CANADIAN SIMPLE, BASIC III (DATAPAC)
P.SIMTYM=!4		;TYMNET SIMPLE
P.INTTRN=!5		;INTERNATIONAL TRAMSPARENT (DATAPAC)
P.CANDFT=!6		;CANADIAN DEFAULT (DATAPAC)
P.RSTS  =!7		;RSTS-11 (DEC)
P.INTSIM=!10		;INTERNATIONAL SIMPLE (DATAPAC)
P.X25=!11		;Link E
P.X28=!12		;Link E--us701,ATCX25,see CMDX28 for usage
  P..MAX=!12		;MAXIMUM LEGAL VALUE
	.PAGE
;DEFINE ERROR CODES - RETURNED IN FIRST DATA BYTE OF THE CONNECT NAK OR
;  DISCONNECT PACKETS
;	N = MAY BE RETURNED IN NAK PACKET
;	D = MAY BE RETURNED IN DISCONNECT PACKET

.ERLKF=!1		;N  - LINK FULL
.ERBFF=!2		;N  - BUFFER SPACE FULL (X.25 - Network congestion)
.ERTIM=!3		;N  - TIME-OUT
.ERILD=!4		; D - INCONSISTANT LINK DATA
.ERLKD=!5		;ND - LINK DOWN (X.25 - Out of order)
.ERLKO=!6		;N  - Link disabled (by status device)
.ERLKL=!7		;N  - Link is locked (no new connections)
;	10
;	11
;	12
;	13
;	14
.ERNSA=!15		;N  - NO SOCKETS AVAILABLE ON DST (X.25 - Number busy)
.ERSIU=!16		;N  - REQUESTED SOCKET IN USE ON DST
.ERNSN=!17		;N  - NO SUCH NODE
.ERNSH=!20		;N  - NO SUCH HOST (X.25 - Not obtainable)
.ERNSD=!21		;N  - NO SUCH DEVICE
.ERNSS=!22		;N  - NO SUCH SOCKET ON DEVICE
.ERHSD=!23		;N  - HOST DOWN
.ERHNA=!24		;N  - HOST NOT AVAILABLE
.ERCRF=!25		;N  - CONNECTION REFUSED  (X.25 - Access barred)
.ERGWD=!26		;ND - Gateway down
;	27
.ERPRV=!30		;N  - PRIVILEDGE FAILURE
  .ERTRY=!30		;       HIGHEST VALUE WHICH ALLOWS RETRY
.ERISP=!31		;ND - ILLEGAL SEQUENCE OF PACKETS
.ERPLS=!32		; D - PLEASE SEE YOUR REP...
;	33
.ERREQ=!34		; D - REQUEST (X.25 - DTE clearing)
.ERHNG=!35		; D - HANGUP
;.ERILD=!36		; D - INCONSISTANT LINK DATA
.ERDER=!37		; D - DEVICE OR SERVICE ROUTINE ERROR
.ERNSJ=!40		;N  - NO SPACE FOR JOB DATA
.ERJCX=!41		;N  - JOB CAPACITY EXCEEDED
.ERCRJ=!42		;ND - NETWORK COMMAND REJECT
.ERUNE=!43		; D - USER NAME ERROR
.ERSPR=!44		;ND - TYMNET SUPERVISOR PROBLEM
.ERMUD=!45		;ND - TYMNET MASTER USER DIRECTORY (MUD) ERROR
.ERFER=!46		;ND - TYMNET FORMAT ERROR
.ERRCC=!47		; D - RECONNECT SEQUENCE COMPLETE
.ERTRM=!50		; D - Process terminated
.ERRLS=!51		; D - Device released
.EROOP=!52		; D - OUT OF ORIGINATING PORTS (TYMNET ONLY)
.ERAQF=!53		; D - REQUEST NOT HONORED (AUX CIRCUIT QUEUE FULL -
			;	TYMNET ONLY)
.ERSVR=!54		; D - TYMNET SUPERVISOR REQUEST
.ERIFR=!55		;ND - X.25 INVALID FACILITY REQUEST
.ERRPE=!56		;ND - X.25 REMOTE PROCEDURE ERROR
.ERLPE=!57		;ND - X.25 LOCAL PROCEDURE ERROR
.ERNRC=!60		;N  - X.25 NUMBER REFUSE REVERSE CHARGING
.ERICD=!61		;N  - X.25 IMCOMPATIBLE DESTINATION
	
;DEFINE OFFSETS WITHIN A PACKET

PKLINK=!0		;(W) LINK TO NEXT PACKET
PKCNT =!2		;(B) NUMBER OF BYTES IN PACKET
PKTYPE=!3		;(B) PACKET TYPE
PKSOC =!4		;(B) SOCKET NUMBER
PKPNT =!4		;(B) POINTER TO CURRENT DATA BYTE IN PACKET (MUST BE
			;      AN EVEN ADDRESS!)
PKSEQ =!5		;(B) PACKET SEQUENCE NUMBER
PKDATA=!6		;( ) START OF DATA AREA

;NOTE:  THE 4TH BYTE HAS A DOUBLE USE - WHEN A PACKET IS IN A DST LIST, IT
;	  CONTAINS A POINTER TO THE CURRENT DATA BYTE IN THE PACKET.  WHEN
;	  A PACKET IS SENT OVER A LINK, IT CONTAINS THE SOCKET NUMBER.

PKTWDS=!40			;WORDS PER PACKET
PKCMAX=!PKTWDS*2-PKDATA		;MAXIMUM NUMBER OF CHARACTERS PER PACKET

;Define illegal address used for catching errors

BADADR=!177756
	.PAGE
;DEFINE SOME PARAMETERS FOR TYPE B LINKS

IMSIZ=!4			;THE FRAME SIZE FOR INPUT TO MAIN
MOSIZ=!4			;THE FRAME SIZE FOR MAIN TO OUTPUT
	.PAGE
;DEFINE NETWORK TERMINAL PARAMETER VALUES

.TPCIC=!1	;COMMAND INTERRUPT CHARACTER 
.TPECH=!2	;ECHO CONTROL
.TPBST=!3	;BREAK SET
.TPITD=!4	;IDLE TIMER DELAY (X.3 PARAMETER 4)
.TPTAP=!5	;"PAPER TAPE"MODE
.TPNMC=!6	;NETWORK MESSAGES CONTROL (I.E.  X.3 PARAMETER 6)
.TPBRK=!7	;BREAK HANDLING (X.3 PARAMETER 7)
.TPPRF=!10	;TERMINAL PROFIL
.TPRAT=!11	;BAUD RATE
.TPWID=!12	;LINE WIDTH 
.TPLEN=!13	;PAGE LENGTH
.TPOHE=!14	;OUTPUT HOLD ENABLE (I.E. X.3 PARAMETER 12.)
.TPHIC=!15	;HARD INTERRUPT CHARACTER
.TPSIC=!16	;SOFT INTERRUPT CHARACTER
.TPOSC=!17	;OUTPUT SUPPRESS CHARACTER
.TPDEL=!20	;DELETE CHARACTER (X.3 PARAMMETER 16.)
.TPLDC=!21	;LINE DELETE CHARACTER (X.3 PARAMETER 17.)
.TPLRC=!22	;LINE RETYPE CHARACTER (X.3 PARAMETER 18.)
.TPSHT=!23	;SIMULATE HORIZONTAL TAB
.TPSVT=!24	;SIMULATE VERTICAL TAB
.TPSFF=!25	;SIMULATE FORM FEED
.TPMCD=!26	;MIN/MAX C.R. DELAY
.TPFCD=!27	;FIXED C.R. DELAY
.TPVCD=!30	;VARIABLE C.R. DELAY
.TPLFD=!31	;L.F. DELAY
.TPHTD=!32	;HORIZONTAL TAB DELAY
.TPVTD=!33	;VERTICAL TAB DELAY
.TPFFD=!34	;FIXED FORM FEED DELAY
.TPVFD=!35	;VARIABLE FORM FEED DELAY
.TPBSD=!36	;BACKSPACE DELAY
.TPLFI=!37	;LINE FEED INSERSION
.TPCRI=!40	;CARRIAGE RETURN INSERSION
.TPIMI=!41	;Image mode input
.TPIMO=!42	;Image mode output
.TPXLI=!43	;XLATE LOWER CASE INPUT TO UPPER CASE
.TPXLO=!44	;XLATE LOWER CASE OUTPUT TO UPPER CASE
.TPBDE=!45	;BACKSPACE DELETE ENABLE
.TPEDB=!46	;ECHO DELETE CHARACTER AS BACKSPACE
.TPXBD=!47	;EXTENDED BACKSPACE DELETE ECHO
.TPLCP=!50	;LOCAL COPY
.TPBC1=!51	;1ST ADDITIONAL BREAK CHRACTER
.TPBC2=!52	;2ND ADDITIONAL BREAK CHARACTER
.TPOPT=!53	;OUTPUT PENDING TIMER
.TPCCE=!54	;CONTROL CHARACTER ECHO CONTROL
.TPESC=!55	;"ESC" CHARACTER ECHO CONTROL
.TPCHS=!56	;CONVERT HIGH SPECIAL CHARACTERS TO "ESC"
.TPTYP=!57	;TERMINAL TYPE
.TPESQ=!60	;ESC SEQUENCE CONTROL
		;NOT ASSIGNED
.TPFCR=!62	;ALLOW FREE CR/LF
		;NOT ASSIGNED
.TPTRN=!64	;TRANSPARENCY MODE
.TPADM=!65	;ALTERNATE DEVICE MODE
.TPIRT=!66	;INPUT BAUD RATE
.TPORT=!67	;OUTPUT BAUD RATE
.TPIHE=!70	;INPUT HOLD ENABLE
.TPKAT=!71	;KATAKANA!?!!
.TPPAR=!72	;PARITY CONTROL
.TPALF=!73	;AUTO LINE-FEED
.TPVTS=!74	;VERTICAL TAB SPACING
.TPBLT=!75	;BELT PRINTER CONTROL
.TPEHT=!76	;Echo horizontal tab (TYMNET nodes only)
.TPSRC=!77	;Status request character
.TPEBS=!100	;Echo backspace (TYMNET nodes only)
.TPSCE=!101	;Suppress control character echoing
.TPIBL=!102	;INPUT BUFFER LIMIT VALUE
.TPTOB=!103	;Terminate output on break (TYMNET)
.TPECE=!104	;Echo ESC local (TYMNET)
.TPQMD=!105	;"Q" mode (used for TYMCOM-370 3270 emulation)
.TPSOP=!106	;SUPPRESS OUTPUT (X.3 PARAMETER 8.)
.TPEDT=!107	;LINE EDITING ENABLE (X.3 PARAMETER 15.)

;DEFINE BITS FOR THE SDTRS0 STATUS WORD (PURE STATUS WORD) FOR TERMINALS

$T0CMD=!040000		;Terminal can escape to network command level
$T0CMX=!020000		;Network command level is default
$T0HCL=!017000		;Host connect list index
$T0FWN=!000400		;Fill with nulls instead of time delay
$T0SFM=!000200		;Suppress fatal network messages
$T0SIM=!000100		;Suppress informative network messages
$T0ACD=!000040		;Automatic connect on disconnect
$T0ASK=!000020		;Ask for terminal type and profile
$T0ROB=!000010		;Release on break
$T0DDD=!000002		;Drop Dtr on Disconnectin
$T0HWR=!000001		;Terminal is hardwired

;DEFINE BITS FOR THE SDTRBR WORD FOR TERMINALS

$BRIRT=!017400		;DEFAULT INPUT BAUD RATE
$TCODE=!000340		;DEFAULT TERMINAL CODE
$BRORT=!000037		;DEFAULT OUTPUT BAUD RATE

;DEFINE BITS FOR THE SDTRS1 STATUS WORD FOR TERMINALS

$T1ACT=!100000		;OUTPUT IS ACTIVE
$T1SYN=!040000		;OUTPUT HUNG SYNC BIT
$T1CMD=!020000		;TERMINAL IS IN COMMAND MODE
$T1ECH=!010000		;ECHO INPUT
$T1HIA=!004000		;BUFFER INPUT IF OUTPUT IS ACTIVE
$T1IMI=!002000		;Image mode input
$T1IMO=!001000		;Image mode output
$T1DEX=!000400		;DEFERRED ECHO MODE NOT ALLOWED
$T1ACX=!000200		;EXPECTING OUTPUT DONE INTERRUPT
$T1SOP=!000100		;SUPPRESS OUTPUT
$T1DEA=!000040		;DELETE ECHO IS ACTIVE
$T1ECM=!000020		;Echo when in command mode
$T1TLG=!000004		;--us701, X.28 enable login mode
$T1XXX=!000002		;--us701, X.28 and X I/F is connected
$T1DEM=!000001		;DEFERRED ECHO MODE IN EFFECT

;DEFINE BITS FOR THE SDTRS2 STATUS WORD FOR TERMINALS

$T2SPP=!100000		;Enable space parity output (Prism terminal)
$T2RKY=!040000		;Request 2741 keyboard enable when output done
$T2ICI=!020000		;First interrupt char seen at input hold level
$T2ICH=!010000		;First interrupt char seen at input processing level
$T2XOF=!004000		;XOF has been sent
$T2QOF=!002000		;XOF request
$T2IMX=!002000		;Output next character in image mode (only used by
			;  LNKH with terminal protocol conversion!)
$T2QON=!001000		;XON request
$T2TPR=!000400		;In transparency mode (Prism terminal)
$T2CRO=!000200		;Last character output was carriage return

;THE FOLLOWING 3 BITS MUST BE IN THE SAME ORDER AS THE BITS CHANGED BY
;  PARAMETER 40 (.TPCRI)

$T2ECL=!000100		;ECHO C.R. AFTER L.F. FROM TERMINAL
$T2SCL=!000040		;SEND C.R. TO HOST AFTER L.F. FROM TERMINAL
$T2ICL=!000020		;INSERT C.R. AFTER L.F. FROM HOST

;THE FOLLOWING 4 BITS MUST BE IN THE SAME ORDER AS THE BITS CHANGED BY
;  PARAMETER 37 (.TPLFI)

$T2XLC=!000010		;Insert L.F. after C.R. from host unless next character
			;  is L.F.
$T2ELC=!000004		;Echo L.F. after C.R. from terminal
$T2SLC=!000002		;Send L.F. to host after C.R. from terminal
$T2ILC=!000001		;Insert L.F. after C.R. from host

;DEFINE BITS FOR THE SDTRS3 STATUS WORD FOR TERMINALS

$T3LGI=!100000		;LOGIN MODE
$T3RDC=!040000		;HAVE RECEIVED DISCONNECT PACKET
$T3ECL=!020000		;END OF COMMAND LINE SEEN
$T3IRT=!017400		;CURRENT INPUT BAUD RATE
$T3TRM=!000200		;ASK FOR TERMINAL TYPE AND PROFILE AT COMMAND LEVEL
$T3ACA=!000100		;HAVE ATTEMPTED TO CONNECT USING HOST ACCESS LIST
$T3DSC=!000040		;DISCONNECT HAS BEEN RECEIVED
$T3ORT=!000037		;CURRENT OUTPUT BAUD RATE

;DEFINE BITS FOR THE SDTRS4 STATUS WORD FOR TERMINALS - BITS IN THIS WORD
;  ARE INITIALIZED WHEN THE TERMINAL TYPE IS SET

$T4LCP=!100000		;LOCAL COPY TERMINAL
$T4ALF=!040000		;AUTO-LINE FEED TERMINAL (CARRIAGE RETURN FUNCTION
			;  INCLUDES LINE FEED FUNCTION
$T4HTS=!020000		;HORIZNTAL TABS ARE SIMULATED
$T4VTS=!010000		;VERTICAL TABS ARE SIMULATED
$T4FFS=!004000		;FORM-FEEDS ARE SIMULATED
$T4HSP=!002000		;CONVERT "HIGH SPECIAL" CHARACTERS TO ESCAPE ON INPUT
$T4EDB=!001000		;ECHO DELETE CHARACTER LIKE BACKSPACE
$T4XBE=!000400		;EXTENDED BACKSPACE ECHO (WHEN SET, ECHO BACKSPACE
			;  WHICH DELETES A CHARACTER AS BACKSPACE-SPACE-
			;  BACKSPACE)
$T4NFC=!000200		;DO NOT INSERT FREE CR-LF AT END OF LINE
$T4HIE=!000100		;INPUT HOLD ENABLE
$T4LEM=!000100		;Local echo mode (only used by type H link!)
$T4HOE=!000040		;OUTPUT HOLD ENABLE
$T4BLT=!000020		;BELT TYPE PRINTER
$T4SEL=!000010		;2741 TYPE TERMINAL

;The following 3 bits must be the 3 low order bits of the word and must be
;  defined to match the bits in terminal parameter .TPPAR which controls
;  parity handling

$T4PAR=!000004		;Parity handling enabled
$T4ODD=!000002		;Odd parity (only meaningful if $T4FUL is set)
$T4CHK=!000001		;Check parity on input (only meaningful if $T4FUL is set)

;DEFINE BITS FOR THE SDTRS5 STATUS WORD FOR TERMINALS - BITS IN THIS WORD
;  ARE INITIALIZED WHEN THE TERMINAL PROFILE IS SET

$T5ESQ=!100000		;PROCESS ESC SEQUENCES
$T5TAP=!040000		;TAPE MODE
$T5LCI=!020000		;ACCEPT LOWER CASE INPUT AS LOWER CASE
$T5LCO=!010000		;ACCEPT LOWER CASE OUTPUT AS LOWER CASE
$T5XFC=!004000		;DO NOT ALLOW FREE CR/LF
$T5ECC=!002000		;ECHO CONTROL CHARACTERS AS "^X"
$T5EED=!001000		;ECHO ESCAPE AS "$"
$T5BDE=!000400		;Backspace delete enable (when set, backspace deletes
			;  previous character, when clear, backspace is normal
			;  input character)
$T5AOH=!000200		;Accept XON and XOF as data even if output hold is
			;  enabled (depending on hold state)
$T5AOX=!000100		;XOF seen since XON
$T5EHT=!000040		;Echo horizontal tabs
$T5SCE=!000020		;Suppress control echoing
$T5NMC=!000010		;NETWORK MESSAGE CONTROL (=1, DISPLAY NETWORK MESSAGE;
			;			  =0, DON'T DISPLAY)
$T5EDT=!000004		;ALLOW LINE EDITING

;DEFINE BITS FOR THE SDTRS6 STATUS WORD FOR TERMINALS

$T6ECE=!100000		;ECHO ESCAPE MODE
$T6EOA=!040000		;EXPECTING EOA FROM TERMINAL (2741 ONLY)
$T6LMB=!020000		;TERMINAL IS IN LIMBO STATE (2741 ONLY)
$T6ICU=!010000		;INPUT UPPER CASE FLAG (NON-ASCII TERMINALS ONLY)
$T6ICX=!004000		;INPUT PREFIX FLAG (NON-ASCII TERMINALS ONLY)
$T6OCU=!002000		;OUTPUT UPPER CASE FLAG (NON-ASCII TERMINALS ONLY)
$T6QMD=!001000		;"Q" MODE FOR 3270 EMULATION ON HP TERMS
$T6RBF=!000400		;RED BALL FLAG (NEED TO SEND RED BALL WHEN OUTPUT
			;  IS IDLE
$T6GBF=!000200		;GREEN BALL FLAG (GREEN BALL HAS BEEN SENT BUT NOT
			;  RECEIVED)
$T6BOF=!000100		;BALL OUT FLAG (RED OR GREEN BALL HAS BEEN SENT BUT
			;  NOT RECEIVED
$T6FSC=!000040		;USING FAST CLOCK (USED BY AUTO6)
$T6CMW=!000004		;COMMAND PROCESSOR IS WAITING FOR COMMAND
$T6PND=!000002		;CONNECTON PENDING (EXPECTING ACK OR NAK)
$T6TOB=!000001		;TERMINATE ON BREAK FLAG

;DEFINE CARRIER STATE VALUES

.CSHNG=!0		;TERMINAL IS HUNG UP (IDLE)
.CSCDT=!2		;CARRIER DETECT TIMEOUT
.CSCDD=!4		;CARRIER DETECT DELAY
.CSBRD=!6		;BAUD RATE DETECT
.CSSEL=!10		;INITIAL 2741 SETUP WAIT
.CSNRM=!12		;NORMAL
.CSBCL=!14		;CARRIER LOSS TIMEOUT DURING BAUD RATE DETECT
.CSSCL=!16		;CARRIER LOSS TIMEOUT DURING 2741 SETUP WAIT
.CSNCL=!20		;CARRIER LOSS TIMEOUT (NORMAL)
.CSIGN=!22		;IGNORE EVERYTHING!

;DEFINE BITS FOR THE ASYNC INTERFACE STATUS BYTE ADSTS1

$A1AVL=!200		;INTERFACE HARDWARE IS AVAILABLE
$A1CHG=!100		;Baud rate can be changed
$A1SPT=!040		;Interface supports split speed

;DEFINE SYMBOLS FOR TERMINAL TYPES (THESE DEFINATIONS MUST MATCH THE TABLES
;  IN TRMT!)

;THE NEGATIVE VALUES ARE ONLY USED IN THE AUT0-BAUD TABLES TO INDICATE CODE
;  WITHOUT SPECIFING OTHER TERMINAL PARAMETERS

T.BCD	=!-3		;ANY BCD CODE TERMINAL
T.CORRS	=!-2		;ANY CORRESPONDENCE CODE TERMINAL
T.ASCII	=!-1		;ANY ASCII CODE TERMINAL
T.CRT	=!0		;CRT TYPE TERMINAL
T.VT52	=!1		;DEC VT52 CRT
T.TTY	=!2		;STANDARD TELETYPE
T.LA36	=!3		;DEC LA36 TERMINAL
T.LA180	=!4		;DEC LA180 PRINTER
T.CRTA	=!5		;SLOW CRT
T.TRMB	=!6		;TYMSHARE TERMINAL TYPE "B"
T.TRMC	=!7		;TYMSHARE TERMINAL TYPE "C"
T.TRMD	=!T.TTY		;TYMSHARE TERMINAL TYPE "D"
T.TRME	=!10		;TYMSHARE TERMINAL TYPE "E"
T.TRMG	=!11		;TYMSHARE TERMINAL TYPE "G"
T.TRGE	=!12		;TYMSHARE TERMINAL TYPE "G" WITH EVEN PARITY
T.TRMI	=!13		;TYMSHARE TERMINAL TYPE "I"
T.TRIE	=!14		;TYMSHARE TERMINAL TYPE "I" WTIH EVEN PARITY
T.TRMJ	=!15		;TYMSHARE TERMINAL TYPE "J"
T.TRMY	=!16		;TYMSHARE TERMINAL TYPE "Y"
T.SEL	=!17		;SELECTRIC (2741) TERMINAL
T.CRTB	=!20		;BLOCK MODE CRT LIKE ADM-31, SOROC, AND TELERAY
T.CRTP	=!21		;BLOCK MODE PERTEC
T.ACS	=!22		;ACS UNIT OR CRT & PTR ON Y CABLE
T.LA120	=!23		;DEC LA120 PRINTER
T.2780	=!24		;TYMSHARE TERMINAL TYPE "2780"
T.3270	=!25		;TYMSHARE TERMINAL TYPE "3270"
T.AUDIO =!26		;AUDIO RESPONSE UNIT
T.BAUD	=!27		;BAUDOT TERMINAL
T.AUX	=!30		;TYMSHARE TYPE AUX
T.CRTO	=!31	;PRISM TYPE TERMINAL
 T..MAX	=!31		;MAXIMUM LEGAL VALUE

;DEFINE CODES FOR LINE INTERFACE FUNCTIONS

;FUNCTIONS SENT TO TERMINAL SERVICE (TRM) FROM INTERFACE DRIVER

.LFRDY	=!0		;OUTPUT READY
.LFDAT	=!2		;DATA
.LFRNG	=!4		;RING DETECTED
.LFBRK	=!6		;BREAK DETECTED
.LFHNG	=!10		;HANG UP DETECTED
.LFCDT	=!12		;CARRIER DETECTED
.LFCLS	=!14		;CARRIER LOSS

;FUNCTIONS SENT TO INTERFACE DRIVER FROM TEMINAL SERVICE (TRM)

.LFSBK	=!0		;Send break on line
.LFSET	=!2		;Setup hardware to match SDB data
.LFANS	=!4		;Answer line
.LFFHG	=!6		;Force hang-up
.LFSTP	=!10		;Stop output
.LFEBK	=!12		;End break on line

;DEFINE SYMBOLS FOR THE BAUD RATE CODES
R.SYNC	=!0

R.50	=!1		;   50   BAUD, 5 BITS, 1.5 STOP BITS
R.75	=!2		;   75   BAUD, 5 BITS, 1.5 STOP BITS
R.110	=!3		;  110   BAUD, 8 BITS, 2   STOP BITS
R.134X	=!4		;  134.5 BAUD, 6 BITS, 1   STOP BIT
R.150	=!5		;  150   BAUD, 8 BITS, 1   STOP BIT
R.200	=!6		;  200   BAUD, 8 BITS, 1   STOP BIT
R.300	=!7		;  300   BAUD, 8 BITS, 1   STOP BIT
R.300X	=!10		;  300   BAUD, 6 BITS, 1   STOP BIT
R.400	=!11		;  400   BAUD, 8 BITS, 1   STOP BIT
R.600	=!12		;  600   BAUD, 8 BITS, 1   STOP BIT
R.1200	=!13		; 1200   BAUD, 8 BITS, 1   STOP BIT
R.1800	=!14		; 1800   BAUD, 8 BITS, 1   STOP BIT
R.2000	=!15		; 2000   BAUD, 8 BITS, 1   STOP BIT
R.2400	=!16		; 2400   BAUD, 8 BITS, 1   STOP BIT
R.3600	=!17		; 3600   BAUD, 8 BITS, 1   STOP BIT
R.4800	=!20		; 4800   BAUD, 8 BITS, 1   STOP BIT
R.7200	=!21		; 7200   BAUD, 8 BITS, 1   STOP BIT
R.9600	=!22		; 9600   BAUD, 8 BITS, 1   STOP BIT
R.19200	=!23		;19200   BAUD, 8 BITS, 1   STOP BIT
R.100	=!24		;  100   BAUD, 8 BITS, 1   STOP BIT
R.38400 =!25		;38400   BAUD, 8 BITS, 1   STOP BIT
R.75S	=!26		;75/100  BAUD, 8 BITS, 1   STOP BIT
R.48K	=!27		;48000	 BAUD, X.3 PARAMETER 11.
R.56K	=!30		;56000	 BAUD,  "
R.64K	=!31		;64000	 BAUD,  "
 R.MAX	=!31		;Maximum legal value

;RATAT0	=!R.MAX+1	;LOWEST AUTO BAUD RATE VALUE
RATAT0	=!30		;LOWEST AUTO BAUD RATE VALUE

;DEFINE VALUES FOR THE TERMNAL OUTPUT STATE BITS

.OSFIL	=!2		;FILLER OUTPUT NEEDED
.OSDLY	=!4		;DELAY NEEDED
.OSBEL	=!10		;BELL, XOFF, OR XON NEEDED
.OSESC	=!20		;Last character output was ESC

;DEFINE VALUES FOR THE TERMINAL INPUT ESC SEQUENCE STATES

.ESNRM	=!0		;NORMAL
.ESSTR	=!2		;START OESC SEQUENCE
.ESTR1	=!4		;FIRST TRAILING CHARACTER
.ESTRL	=!6		;LAST TRAILING CHARACTER

;Define xmit functions for the DCP IO processor

.XFXDG	=!2		;Execute IO processor internal diagnostics
.XFBOT	=!4		;Bootstrap function (reserved to the bootstrap!)
.XFEXM	=!6		;Examine IO processor memory
.XFDPM	=!10		;Deposit into IO processor memory
.XFDPR	=!12		;Dump IO processor registers
.XFZAP	=!14		;Reinitialize all lines
.XFEXE	=!16		;Execute DCP (turns on interrupts from DCP)
.XFPAR	=!20		;Setup asynchronous line parameters
.XFDAT	=!22		;Output data
.XFSDR	=!24		;Set data terminal ready
.XFCDR	=!26		;Clear data terminal ready
.XFSBK	=!30		;Start break
.XFEBK	=!32		;End break
.XFCPT	=!34		;Configure port (initialize interrupt vector)
.XFTSM	=!36		;Transmit start of message
.XFTEM	=!40		;Transmit end of message
.XFSPR	=!42		;Initialize synchronous parameters
.XFSES	=!44		;Search synch
.XFSTS	=!46		;Strip synch
.XFNCR	=!50		;Transmit char without CRC enabled
.XFTX2	=!52		;Transmit two characters
.XFSDL	=!54		;Initialize SDLC mode
.XFCPH	=!56		;Configure port to HIGH priority
.XFTDM	=!60		;Start transmit DMA operation
.XFABT	=!62		;Abort transmit dma transfer

;Define receive functions for the DCP IO processor

.RFPER	=!-10		;Port error
.RFFER	=!-6		;Function error
.RFMER	=!-4		;Memory error
.RFRER	=!-2		;ROM error
.RFERR	=!0		;Illegal
.RFDSD	=!2		;Data set ready detect
.RFDSL	=!4		;Data set ready loss
.RFCRD	=!6		;Carrier detect
.RFCRL	=!10		;Carrier loss
.RFDAT	=!12		;Recieved data
.RFDON	=!14		;Output done
.RFPOK	=!16		;Passed diagnositics
.RFCDN	=!20		;Configuration done
.RFEOM	=!22		;Transmit underrun/End of message
.RFMAX	=!24		;Maximum value for receive function

	.NLIST
.IF DF XLIST
	.LIST
	.ENABLE	CRF
.ENDC
	.LIST
`mÜ