.journal;
.single space;
.blankline;
.<<.odd heading (,,)>>
.<<.even heading (MICRO-NODE NETWORK MANAGER'S GUIDE,,);>>
.every heading (MICRO-NODE NETWORK MANAGER'S GUIDE,,);
.every footing ("TYMSHARE Distributed Systems Group, Cupertino, Ca.",,{page!});
.<<.odd footing ("TYMSHARE Distributed Systems Group, Cupertino, Ca.",,{page!});>>
.<<.even footing ({page!},,"TYMSHARE Distributed Systems Group, Cupertino, Ca.");>>
.MarginHeadings_True
.Titlepage $(
.Group skip 15 apart;
.begin center
***********************************************
*                                             *
*                                             *
*     MICRO-NODE NETWORK MANAGER'S GUIDE      *
*              January 23, 1981               *
*                                             *
*     TYMSHARE Distributed Systems Group      *
*               Cupertino, Ca.                *
*                                             *
*                                             *
***********************************************
.end
.)$
.<<.odd heading (,,{secname})>>
.every heading (,,{secname})
.skip to column 1;
. <<.P 5,1,3>>
.indent 3;
.preface 1;
.SEC Introduction

This manual provides the specified information needed by the manager of a
MICRO-NODE network. Topics covered include general rules for configuring a
network and detailed information on specifying software and hardware
configurations of network nodes.
.skip to column 1
.sec Node configuration

The configuration of each node in a MICRO-NODE network must be specified in a
configuration file for that node.  In addition, the global configuration
of the entire network must be specified in a map file for the network.
Also, a link command file must be produced for each node.  To generate
the program for each node, the module COMMON.MAC is assembled with the
configuration file and the module ROUTE.MAC is assembled with the
configuration and map files.

The resulting object files are linked along with the pre-assembled
node object files which are independent of the configuration using the
linker program to produce a "image" file which can be loaded from a host into the
node using the %NODLOD% program.
The image file can be input to the program %NIBTRN% to produce a "NIB" format
file for loading over TYMNET using LOADII.

A %GENBAS% program is planned to generate the required configuration and
command files for building a network node.  Until this program is available,
the configuration and command files must be edited manually to indicate
the desired configuration.

Following is a complete typical node configuration file:
.skip 
.byhand

*****************************************************************
*								*
*	.SBTTL	TEST  - NEXILIS/JRG				*
*	.SBTTL	TEST  - CONFIGURATION FILE FOR NODE NEX01	*
*								*
*	.MACRO	CONFIG						*
*								*
*;DEFINE GENERAL PARAMETERS					*
*								*
*	DEFINE	JIFSEC,60.	;60 TICKS PER SECOND		*
*								*
*;DEFINE THE NAME OF THIS NODE					*
*								*
*	NAME	NEX01						*
*								*
*;DEFINE LINKS BETWEEN THIS NODE AND OTHER NODES AND HOSTS	*
*								*
*	LINK	NEXA  ,000,TF,10.,S,D,<170000,120,5>		*
*	LINK	NEX02 ,000,TF,10.,P,C,<170010,130,5>		*
*								*
*;DEFINE ALL DEVICES ON THIS NODE				*
*								*
*	DEV	ST,200,<300,377>				*
*	  SOC	1.						*
*	  SOC	2.						*
*	  SOC	3.						*
*	  							*
*	DEV	LP						*
*	  SOC	1.,A,<177554,204,177550>			*
*								*
*;DEFINE THE HOST CONNECT LISTS					*
*								*
*	HCL	A,<NEXA>					*
*								*
*;DEFINE THE DEFAULT HOST					*
*								*
*	DHOST	NEXA						*
*								*
*;DEFINE TERMINAL LINES						*
*								*
*	LINX	 A,<177560,60>					*
*	  LINE   1.,F,300, ,NEX,CRT,ASC,RSTS,N,N,Y,Y,HW,A,200	*
*								*
*	LINX	 B,<160130,340>					*
*	  LINE   2.,A,  3, ,NEX,CRT,ASC,RSTS,N,N,Y,Y,HW,A,200	*
*	  LINE   3.,A,  3, ,NEX,CRT,ASC,RSTS,N,N,Y,Y,HW,A,200	*
*	  LINE   4.,A,  3, ,NEX,CRT,ASC,RSTS,N,N,Y,Y,HW,A,200	*
*	  LINE   5.,A,  3, ,NEX,CRT,ASC,RSTS,N,N,Y,Y,HW,A,200	*
*								*
*	.ENDM							*
*								*
*****************************************************************
.endhand
.skip  2
Following is a description of each macro used in the configuration file:
.skip  2
.group
.byhand
**********
* DEFINE *
**********
.endhand
.skip 
The %DEFINE% macro is used to assign non-standard values to node parameters.
It normally does not need to be used.  Its format is:
.apart
.skip 
.byhand
	DEFINE	parameter,value

Where:  parameter = name of node parameter to be defined
        value     = value for parameter
.endhand
.skip  2
.group
.byhand
**********
* NAME   *
**********
.endhand
.skip 
.apart
The %NAME% macro is used to specify the name of the node.  It must be
included in the configuration file.
.skip 
.byhand
	NAME	node

Where:  node  = name of this node
.endhand
.skip 
.group
.byhand
**********
* TYMSAT *
**********
.endhand
.skip
.apart
This macro specifies that this node is a %Tymsat% only node.  It has no parameters.
.skip  2
.group
.byhand
**********
* LINK   *
**********
.endhand
.skip
.apart
The %LINK% macro is used to specify links between this node and other nodes
or hosts or gateways.
.byhand

	LINK	name,level,auxcap,conn,prisec,type,<xxxxxx>

.endhand
.begin narrow 17,0;
.preface 0
.indent -17
Where:##name###=#name of node, host, or gateway on other end of link
.indent -9
level##=#minimum %priviledge% which allowes connection if host or gateway;
maximum %priviledge% allowed across link if link to another node
.indent -9
auxcap#=#sets link capabilities as follows:
.begin narrow 6,0;
.indent -4
TF#=#connections to and from this link are allowed
.indent -4
T##=#connections allowed only to this link
.indent -4
F##=#connections allowed only from this link
.indent -4
N##=#no connections allowed to or from this link
.widen; end;
.indent -9
connno#=#number of connection sockets allocated for this link
.indent -9
prisec#=#indicates if this end of the link is primary or secondary (in terms
of socket allocation)
.indent -9
type###=#indicates type of link as follows:
.begin narrow 6,0;
.indent -4
A#=#not used
.indent -4
B#=#NSP/a (%synchronous% line protocol) (one end of each link must be
primary; the other end must be secondary)
.indent -4
C#=#DRV11/DR11-C parallel interface link (one end of each link must be primary;
the other end must be secondary)
.indent -4
D#=#DRV11/DR11-C RSX or RSTS host interface  (must always be secondary)
.indent -4
E#=#X.25 gateway (byte framing)  (primary = DCE, secondary = DTE)
.indent -4
F#=#Tymcom-X (2020 and F3) and TENEX host interface (must always be secondary)
.indent -4
G#=#Tymnet extended X.25 gateway (primary = DCE, secondary = DTE)
.indent -4
H#=#Tymnet native mode (T201) gateway (must always be secondary)
.widen; end;
.indent -9
xxxxxx#=#specifies link type dependent parameters.
.skip 
For types B, C, and D, the format is:
.byhand

         <reg,vec,level>

.endhand
.begin narrow 18,0;
.indent -16
where:##reg###=#address of first device register
.indent -8
vec###=#address of first device vector
.indent -8
level#=#interrupt priority level for interface
.widen; end;
.skip 
For link types E and G the format is:
.byhand

      <reg,vec,level,dst,adst,window,T1,N1,N2>

.endhand
.begin narrow 19,0;
.indent -17
where:##reg####=#address of first device register
.indent -9
vec####=#address of first device vector
.indent -9
level##=#interrupt priority level for interface
.indent -9
dst####=#destination name for incoming connections
.indent -9
adst###=#alternate destination name for incoming connections
.indent -9
window#=#frame level window size
.indent -9
T1#####=#no response timer value (ticks)
.indent -9
N1#####=#maximum number of bytes in frame information field
.indent -9
N2#####=#maximum number of retransmissions
.widen; end;
.skip 
Format for type F link is:
.byhand

      <reg,vec,level,rngsiz,KMC>

.endhand
.begin narrow 21,0;
.indent -17
where:##reg####=#address of first device register
.indent -9
vec####=#address of first device vector
.indent -9
level##=#interrupt priority level for interface
.indent -9
rngsiz#=#size of host input ring (in PDP-10 words)
.indent -9
KMC######indicates that a KMC is used in the 2020 interface
.widen; end;
.skip 
Format for type H link is:
.byhand

      <nodnum,nsph,kind>

.endhand
.begin narrow 21,0;
.indent -17
where:##nodnum#=#node number as seen by Tymnet
.indent -9
nsph###=#number of ports available for each host - specifies how many ports are
really available to each host out of the maximum number defined (256 if 1 host,
128 if 2 hosts, or 64 if 3 or 4 hosts).  Ports not available to hosts are
available for circuits originating from terminals.  If all ports are specified
as available to hosts, no terminal circuits can be built!
.indent -9
kind###=#kind of link - must be one of the following:
.skip
SAT = TYMsat
.skip
BAS = TYMbase without terminal protocol conversion
.skip
TPC = TYMbase with terminal protocol conversion
.widen; end;
.widen; end;
.preface 1
.skip  2
.group
.byhand
**********
* LNKH   *
**********
.endhand
.skip
.apart
The %LNKH% macro is used follow a LINK macro for a type H gateway to specify
the "hosts" which are to be known to Tymnet.  If this node is not to support
any hosts, i.e., if it is to be a "TYMSAT" only node,
this macro should not appear.
In this case the LKHST# modules must be loaded.  If it does appear, this node
will be a "TYMBAS" and the LKHBS# modules must be loaded.
The format is:
.byhand
	LNKH	TYMHST,NEXHST
.endhand
.skip 
.begin narrow 17,0;
.indent -17
Where:##TYMHST#=#Tymnet host number
.indent -9
NEXHST#=#MICRO-NODE host name which corresponds to TYMHST
.skip 
.widen; end;
There may be up to 4 hosts specified for each type H link.
.skip  2
.group
.byhand
**********
* LNKL   *
**********
.endhand
.skip
.apart
The %LNKL% macro is only used following a LINK macro for a type H gateway.  It
specifies a %synchronous% line connecting to %Tymnet%.  The format is:
.byhand

	LNKL	chn,nbr,speed,sat,type,xxxxxx

.endhand
.begin narrow 17,0;
.indent -17
Where:##chn####=#Number of channels on line (number of groups times 16)
.preface 0
.indent -9
nbr####=#number of neighbor node
.indent -9
speed##=#speed of line as follows:
.indent 6
1#=#2400 baud
.indent 6
2#=#4800 baud
.indent 6
3#=#56000 baud
.indent 6
4#=#9600 baud
.indent -9
sat####=#S if this is a satellite link with long propigation delay,
N if it is a normal link
.indent -9
type###=#line driver type - currently must always be A
.indent -9
xxxxxx#=#line driver type dependent parameters as follows:
.byhand
         <reg,vec,level>
.endhand
.begin narrow 18,0;
.indent -17
where:##reg####=#address of first device register
.indent -9
vec####=#address of first device vector
.indent -9
level##=#interrupt priority level for interface
.widen; end;
.widen; end;

A type H link must always specify at least 1 Tymnet line using a LNKL macro.
Up to 8 lines may be specified.  All LNKL macros must follow all LNKH macros.
.preface 0
.skip  2
.group
.byhand
**********
* DEV    *
**********
.endhand
.skip
.apart
The %DEV macro% specifies all non-terminal devices on the node. It is only
needed if devices are present.  Its format is:
.skip 
.byhand
	DEV	dv,level,<xxxxxx>
.endhand
.skip 
.begin narrow 17,0;
.indent -17
Where:##dv#####=#two letter mnemonic for device
.preface 0
.indent -9
level##=#minimum %priviledge% level for connection to device
.indent -9
xxxxxx#=#device dependent parameters
.widen; end;
.preface 1
.skip 
.byhand
Valid devices are:
.endhand
.skip 
.begin narrow 8,0;
.indent -8
ST######Status device - this is a software device which is used to obtain
status information from the node and to control the node.
The status device is optional but should usually be included to allow access
to data stored in the node.  The two device dependent parameters are the
%priviledge% level for examining and writing memory.
.skip
.indent -8
WD######Load device - this is a special device which is used to down-line
load adjacent nodes.  It only be used with type B or C links.  When included,
it must always be specified with one socket.
.skip
.indent -8
LP######Line printer
.widen; end;
.skip  2
.group
.byhand
**********
* SOC    *
**********
.endhand
.skip
.apart
The %SOC macro% is used with the %DEV% macro to specify devices.  Each DEV macro
must be followed by one or more SOC macros which specify each socket on the

device as follows:
.skip 
.byhand
	SOC	sn,type,<xxxxxx>
.endhand
.skip 
.begin narrow 17,0;
.indent -17
Where:##sn#####=#socket number (must start at 1 and increase by 1)
.indent -9
type###=#type of device driver for this socket (not used for ST or WD)
.indent -9
xxxxxx#=#device driver dependent parameters (not used for ST or WD
  - LP has unknown device dependent parameters)
.skip  2
.widen; end;
.group
.byhand
**********
* HCL    *
**********
.endhand
.skip
.apart
The %HCL macro% specifies any "host connect lists" which are to be used by
terminals on this node.  Each host connect list specifies an ordered list of
host systems which is used when a terminal is initially connected to the
node or when a "connect" command is issued without an argument.  Format
of this macro is:
.skip 
.byhand
	HCL	list,<host1,host2,...>
.endhand
.skip 
.begin narrow 16,0;
.indent -16
Where:##list##=#a single letter which identifies this list.  First
list must be "A", second "B", etc.
.indent -8
host1#=#name of first host system in list
.indent -8
host2#=#name of second host system in list
.skip  2
.widen; end;
.group
.byhand
**********
* DHOST  *
**********
.endhand
.skip
.apart
The %DHOST macro% specifies a single "default host" which
will be used as the destination
whenever an unknown host is specified.  The host specified will be used as
the destination extension.  This allows hosts connected to a foreign network
connected to this network through a gateway to be accessed in a transparent
manner.  The gateway is specified as the default host.  Any requests for an
unknown host will thus be routed to the gateway, which will then use the
destination extension as the destination on the foreign network.
Format of this macro is:
.skip 
.byhand
        DHOST      hstnam

Where:   hstnam = name of default host (or gateway)

.endhand
.skip  2
.group
.byhand
**********
* LINX   *
**********
.endhand
.skip
.apart
The %LINX macro% specifies the %asynchronous% terminal interfaces on the node.
Format is:
.byhand

	LINX	type,<xxxxxx>

Where:	type   = type of interface as follows:
		   A = DLV11/DL11 single line interface
		   B = DZV11/DZ11 4 or 8 line interface
		   C = DH11 16 line interface
		   D = Infotron 780 "Super-mux" driver
		   F = Nexilis Systems DCP board
	xxxxxx = interface dependent parameters
		 (usually <address,vector,priority>)
.endhand
.skip  2
.group
.byhand
**********
* LINE   *
**********
.endhand
.skip
.apart
Each line on each terminal interface must be specified in a %LINE macro%.
The LINE macros must immediately follow the LINX macro which specifies the
interface.
Its format is:
.skip 
.byhand
LINE num,fa,or,ir,cmd,type,code,pro,ask,snm,cm,acd,rob,duhw,hcl,priv

Where:    num  = socket number for port (must be in ascending order)
.endhand
.preface 0
.begin narrow 17,0
.indent -7
fa###=#indicates if fixed or auto-baud rate or if special line; F = fixed,
A = auto, C = special line used as high speed clock, L = special line used
as serial printer port.  If C or F, no parameters beyond this one are used.
All C or L lines must follow all A or F lines (even if on different interfaces).
F and A lines may be freely intermixed as may C or L lines.

or###=#output baud rate if fa = F or auto rate detect type if fa = A

ir###=#input baud rate if fa = F and it is different
from the output rate - otherwise should be null

cmd##=#name of network command decoder - should be "TYM" for a TYMNET base and
"SAT" for a TYMSAT

type#=#default terminal type (usually "TYMSHR")

code#=#default character code for terminal - valid values are ASC (Ascii),
CRS (selectric correspondence), CAL (Selectric Call-360),
BCD (Selectric BCD), and EBC (Selectric EBCD)

pro##=#default terminal profile (based on host; TYMSHR, RSTS, RSX)

ask##=#Y if should ask for Tymshare terminal ID; N if should not

snm##=#Y if should suppress all network messages, I if should
suppress only informational network nessages, N if should
output all network messages

cm###=#Y if should allow network command mode and command mode should be
default when not connected; R if should allow network command mode but only as
a result of typing the command interrupt character; N if network command mode is
not allowed

acd##=#Y if should do auto-connect when a disconnect is received; N if should
not (not used with TYMNET version)

rob##=#Y if should release (hang up) the terminal when a break is detected,
N if should not

duhw#=#indicates if dial-up(answers ring indicator and watches carrier
detect) or hard-wired line; DU = dial-up,
HW = hard-wired
.group

hcl##=#host connect list - single letter which must have been
used as a host connect list name in a HCL macro
.apart
.group

priv#=#network privilege for terminal (a octal number in the range 0-377)
.widen; end;
.preface 1
.apart
.skip to column 1
.sec Routing configuration

For all configurations of MICRO-NODES some %routing% information is necessary.
For an isolated node the routing is simple and straightforward.  As the
the number of nodes in a network increases, the routing become more
complicated.  The routing information is contained in the %ROUTE macro%.
Generally the ROUTE macro is placed in a file of the form RUxxxx.MAC, where
xxxx is the node number.  The %ROUTE% macro has three parts: node
identification information, local resource information, and connectivity
information for all other resources in the network.

An example of a routing macro is:
.b

; ru552.mac - network map for node 552 (and friends)
.macro	ROUTE
	node	552
            NPATH   554,554
            NPATH   553,553
      	   hpath   118,554,553
            HPATH   930,*
	   hpath   TYMNET,*
            HPATH   BNET,554
        NODE    553
            NPATH   552,552
           NPATH   554,552
            HPATH   118,*,552
            HPATH   TYMNET,552
           HPATH   930,552
            HPATH   BNET,552
        NODE    554
           NPATH   553,552
            NPATH   552,552
           HPATH   930,552
            HPATH   118,*,552
            HPATH   TYMNET,552
            HPATH   BNET,*
.endm

.endhand

The %NODE% statement specifies which node the information that follows is
associated with.
Information which follows  a NODE statement for a node other that the one
being assembled is ignored.  Thus a NODE statement is REQUIRED in order for
routing information to be assembled for a node.

The first %NPATH% parameter specifies the primary path for reaching
other nodes in the network.  The second parameter specifies a secondary
path to be used if the first is down.

The %HPATH% statement specifies how to reach resources (hosts and gateways)
in the network.  The "*" indicates that the resource is in the node being
assembled.  It specifies a primary and a secondary path line the NPATH
statement.
.skip to column 1
.sec Node modules

The following table summarizes the modules required for various node
configuration options.  Each module should only be loaded once and all
modules may be loaded in any order after the COMMON, ROUTE, and XDT
modules except that END must always be the last module loaded.

The base for the loaded image should normally be 1000.  This is the default
for the PDP-11 LINK11 linker.  It must be specified for the PDP-10
cross-linker.  If the node uses an MXV-11 multi-function card with the ROM
area configured for bank 0, the base address must be 21000.  This must
be specified for both the PDP-11 linker and the PDP-10 cross-linker.

The following modules must always be loaded:

CGxxxx,RUxxxx,EXEC,ERROR,PKT1,PKT2,PKT3D,ONCE,END

If the node includes a Tymshare "watch-dog" timer, the DOG module must be
included unless the AUTO7 module is included.

.byhand
This table shows modules required for each type of link.

Type     Notes              Modules required
  B  using DUP11	LNK1,LNK2,LNKFLG,LNKB,LNKBS,LKBDUP
  B  using DUV11	LNK1,LNK2,LNKFLG,LNKB,LNKBS,LKBDUV,CRCBYT
  B  using DCP		LNK1,LNK2,LNKFLG,LNKB,LNKBS,LKBDCP,CRCBYT
  C			LNK1,LNK2,LNKRSP,LNKC
  D			LNK1,LNK2,LNKRSP,LNKD
  E			LNK1,LNK2,LNKE,LKEPKT,X25Q,CRCTAB
  F  using KMC		LNK1,LNK2,LNKF,LNKF2,TYMA,TYMB
  F  without KMC	LNK1,LNK2,LNKF,LNKF1,TYMA,TYMB
  G			LNK1,LNK2,LNKG,LKGPKT,LKGQAL,CRCTAB
  H  using DU11/DUV11	LNK1,LNKHA,LKHST1,LKHST2,LKHST3,TYMA
     (Tymsat only)	(see note 1)
  H  using DUP11	LNK1,LNKHAP,LKHST1,LKHST2,LKHST3,TYMA
     (Tymsat only)	(see note 1)
  H  using DCP		LNK1,LNKHB,LKHST1,LKHST2,LKHST3,TYMA
     (Tymsat only)	(see note 1)
  H  using DU11/DUV11	LNK1,LNKHA,LKHBS1,LKHBS2,LKHBS3,TYMA,TYMB
     (Tymsat or Tymbas)
  H  using DUP11	LNK1,LNKHAP,LKHBS1,LKHBS2,LKHBS3,TYMA,
     (Tymsat or Tymbas)	  TYMB
  H  using DCP		LNK1,LNKHB,LKHBS1,LKHBS2,LKHBS3,TYMA,
     (Tymsat or Tymbas)	  TYMB
  H  using DU11/DUV11	LNK1,LNKHA,LKHTP1,LKHTP2,LKHTP3,LKHTPC,
     (Tymbas with TPC)	  TYMA,TYMB  (see note 2)
  H  using DUP11	LNK1,LNKHAP,LKHTP1,LKHTP2,LKHTP3,LKHTPC,
     (Tymbas with TPC)	  TYMA,TYMB  (see note 2)
  H  using DCP		LNK1,LNKHB,LKHTP1,LKHTP2,LKHTP3,LKHTPC,
     (Tymbas with TPC)	  TYMA,TYMB  (see note 2)

.endhand
.begin narrow 8,0;
.indent -8
note#1:#For a %Tymsat% only node, the following standard modules must be
assembled with the parameter file SAT.MAC in addition to XP.MAC:  TRM,
TRMF, TRMT, TRMP, CMDS.
.skip 
.indent -8
note#2:#For a node with Tymnet terminal protocol conversion, the module
TRMP must be assembled with the parameter file TPC.MAC in addition to
XP.MAC.
.widen; end;
.skip 
The following table specifies which modules are required for devices:
.skip 
.byhand
	Device  Type          Modules required
	  WD			LOAD
	  ST			STATUS
	  LP     A		LPTA
.endhand
.skip 
If any terminal lines are specified for the node, the following modules must
be included:
.skip 
	TRM,TRMF,TRMP,TRMT,CMDS
. <<.comment .skip >>
. <<.comment If any terminal lines specify the "NEX" command decoder, the CMDNEX and>>
. <<.comment CMDT modules must be included.>>
.skip 
If any terminal lines specify the "TYM" command decoder, the CMDTYM
module must be included.
.skip 
If any teminal lines specify the "SAT" command decoder, the CMDSAT
module must be included.
.skip 
If any terminal specifies auto-baud, the modules corresponding to the
%auto-baud detect% type specified must be included:
.skip 
.byhand
	Detect type	Module		Description
	     1		AUTO13		110, 150, 300 baud ascii
					 and 134.5 baud correspondence 
	     2		AUTO13		110, 300, 1200 baud ascii and
					 134.5 baud correspondence code
	     3		AUTO13		300, 600, 1200, 1800, 2400, 4800
					 and 9600 baud ascii
	     4		AUTO45		TYMNET style detect for 110, 150
					 and 300 baud ascii terminals
	     5		AUTO45		TYMNET style detect for 110, 300
					 and 1200 baud ascii
	     6		AUTO6		TYMNET style detect for 110, 300
					 and 1200 baud ascii and 134.5
					 baud correspondence or ebcdic
					 (using high speed clock)
	     7		AUTO7		TYMNET style detect same as
					 type 6 (but with DOG builtin)
.endhand
.skip 
The AUTO6 and AUTO7 modules cannot both be loaded in the same node.  The AUTO7
module includes Tymshare watchdog timer functions, so if it is loaded, the
module DOG must not be loaded.
.skip 
If any terminal codes other than Ascii are specified, the modules specified
in the following table must be included:
.skip 
.byhand
	Code	Module
	CRS	XLTCRS
	EBC	XLTEBC
	CAL	XLTCAL
	BCD	XLTBCD
.endhand
.skip 
Note that some auto-baud detect tables specify codes other than ASCII.  Use
of any of these auto-baud tables also require that the corresponding
translation tables be loaded.
.skip 
The following table specifies which modules are required for terminal
interfaces:
.skip 
.byhand
	Type      Notes		Modules required
	 A			LINA
	 B    no C or L lines	LINB
	 B    C or L lines	LINBX
	 C			LINC
	 D			LIND,LIND1
	 F			LINF
.endhand
.skip to column 1
.sec Module assembly

The configuration dependent modules are assembled using MACRO-11 or MACN11
as follows: (node name is assumed to be "xxxx")

	CGxxxx=XP,CGxxxx,COMMON

	RUxxxx=XP,CGxxxx,RUxxxx,ROUTE

If sources are available, the remaining modules are assembled as follows:

.byhand
For machines with EIS         For machines without EIS

EXEC=XP,EXEC                  EXEC=NOEIPR,XP,EXEC
ERROR=XP,ERROR                ERROR=NOEIPR,XP,ERROR
PKT1=XP,PKT1                  PKT1=NOEIPR,XP,PKT1
PKT2=XP,PKT2                  PKT2=NOEIPR,XP,PKT2
DOG=XP,DOG                    DOG=NOEIPR,XP,DOG
STATUS=XP,STATUS              STATUS=NOEIPR,XP,STATUS
TRM=XP,TRM*                   TRM=NOEIPR,XP,TRM*
TRMF=XP,TRMF*                 TRMF=NOEIPR,XP,TRMF*
TRMP=XP,TRMP**                TRMP=NOEIPR,XP,TRMP**
TRMT=XP,TRMT*                 TRMT=XP,TRMT*
CMDS=XP,CMDS*                 CMDS=NOEIPR,XP,CMDS*
CMDNEX=XP,CMDNEX              CMDNEX=NOEIPR,XP,CMDNEX
CMDTYM=XP,CMDTYM              CMDTYM=NOEIPR,XP,CMDTYM
AUTO13=XP,AUTO13              AUTO13=NOEIPR,XP,AUTO13
AUTO45=XP,AUTO45              AUTO45=NOEIPR,XP,AUTO45
AUTO6=XP,AUTO6                AUTO6=XP,AUTO6
AUTO7=XP,AUTO7                AUTO7=XP,AUTO7
XLTCRS=XP,XLTCRS              XLTCRS=XP,XLTCRS
XLTEBC=XP,XLTEBC              XLTEBC=XP,XLTEBC
XLTBCD=XP,XLTBCD              XLTBCD=XP,XLTBCD
XLTCAL=XP,XLTCAL              XLTCAL=XP,XLTCAL
LINA=XP,LINA                  LINA=NOEIPR,XP,LINA
LINB=XP,LINB                  LINB=NOEIPR,XP,LINB
LINBX=XP,LINBX,LINB           LINBX=NOEIPR,XP,LINBX,LINB
LINC=XP,LINC                  LINC=NOEIPR,XP,LINC
LIND=XP,XM,LIND               LIND=NOEIPR,XP,XM,LIND
LIND1=XP,XM,LIND1             LIND1=NOEIPR,XP,XM,LIND1
LINF=XP,LINF		      LINF=NOEIPR,XP,LINF
LNK1=XP,LNK1                  LNK1=NOEIPR,XP,LNK1
LNK2=XP,LNK2                  LNK2=XP,LNK2
LNKB=XP,LNKBPR,LNKB           LNKB=NOEIPR,XP,LNKBPR,LNKB
LNKBS=XP,LNKBPR,LNKBPS        LNKBS=NOEIPR,XP,LNKBPR,LNKBPS
LKBDUP=XP,LNKBPR,LKBDUP       LKBDUP=NOEIPR,XP,LNKBPR,LKBDUP
LKBDUV=XP,LNKBPR,LKBDUV       LKBDUV=NOEIPR,XP,LNKBPR,LKBDUV
CRCBYT=XP,CRCBYT              CRCBYT=XP,CRCBYT
LNKC=XP,LNKC                  LNKC=NOEIPR,XP,LNKC
LNKD=XP,LNKD                  LNKD=NOEIPR,XP,LNKD
LNKE=XP,LNKE                  LNKE=NOEIPR,XP,LNKE
LKEPKT=XP,LKEPKT              LKEPKT=NOEIPR,XP,LKEPKT
X25Q=XP,X25Q                  X25Q=NOEIPR,XP,X25Q
LNKF=XP,LNKFPR,LNKF           LNKF=NOEIPR,XP,LNKFPR,LNKF
LNKF1=XP,LNKFPR,LNKF1         LNKF1=NOEIPR,XP,LNKFPR,LNKF1
LNKF2=XP,LNKFPR,LNKF2         LNKF2=NOEIPR,XP,LNKFPR,LNKF2
LNKG=XP,LNKG                  LNKG=NOEIPR,XP,LNKG
LKGPKT=XP,LKGPKT              LKGPKT=NOEIPR,XP,LKGPKT
LKGQAL=XP,LKGQAL              LKGQAL=NOEIPR,XP,LKGQAL
CRCTAB=XP,CRCTAB              CRCTAB=XP,CRCTAB
LNKHA=XP,LNKHA                LNKHA=NOEIPR,XP,LNKHA
LNKHAP=XP,DUPPR,LNKHA         LNKHAP=NOEIPR,XP,DUP,LNKHA
LKHST1=XP,SATPR,LNKHPR,LKHPK1 LKHST1=NOEIPR,XP,SATPR,LNKHPR,LKHPK1
LKHST2=XP,SATPR,LNKHPR,LKHPK2 LKHST2=NOEIPR,XP,SATPR,LNKHPR,LKHPK2
LKHST3=XP,SATPR,LNKHPR,LKHPK3 LKHST3=NOEIPR,XP,SATPR,LNKHPR,LKHPK3
LKHBS1=XP,LNKHPR,LKHPK1       LKHBS1=NOEIPR,XP,LNKHPR,LKHPK1
LKHBS2=XP,LNKHPR,LKHPK2       LKHBS2=NOEIPR,XP,LNKHPR,LKHPK2
LKHBS3=XP,LNKHPR,LKHPK3       LKHBS3=NOEIPR,XP,LNKHPR,LKHPK3
LKHTP1=XP,TPC,LNKHPR,LKHPK1   LKHTP1=NOEIPR,XP,TPC,LNKHPR,LKHPK1
LKHTP2=XP,TPC,LNKHPR,LKHPK2   LKHTP2=NOEIPR,XP,TPC,LNKHPR,LKHPK2
LKHTP3=XP,TPC,LNKHPR,LKHPK3   LKHTP3=NOEIPR,XP,TPC,LNKHPR,LKHPK3
LKHTPC=XP,LNKHPR,LKHTPC       LKHTPC=NOEIPR,XP,LNKHPR,LKHTPC
LOAD=XP,LOAD                  LOAD=NOEIPR,XP,LOAD
ONCE=XP,ONCE                  ONCE=NOEIPR,XP,ONCE
END=XP,END                    END=XP,END
.endhand
.skip 
Notes:
.begin narrow 3,0;
.indent -3
*##If for %Tymsat% only node, these files must be assembled with the
parameter file SAT in addition to XP.
.skip
.indent -3
**#If for Tymsat only node, this file must be assembled with the parameter
file SAT in addition to XP; if for node with Tymnet terminal protocol
converter (LKHTPC loaded) this file must be assembled with the parameter
file TPC in addition to XP.
.widen; end;
.skip to column 1
.sec RSTS host configuration

In order to use a %RSTS% system as a host in a MICRO-NODE network, several network
related parameters must be defined at SYSGEN time.
These parameters specify how the system is connected to the network and
how K.B. numbers are mapped to network terminals or devices.
The parameters associated with the connection to the network specify
how many nodes are connected to the host and give the device addresses for
each interface to a node.  Note that, unlike other devices on a RSTS system,
the device addresses for the network interfaces must be specified at SYSGEN
time.
The correspondence between K.B. numbers and network terminals or devices is
also specified at SYSGEN time.
These specifications establish a one-to-one correspondence between a RSTS
K.B. number and a terminal or device on the network.
This serves two purposes: first, it allows an "outgoing connection" to be
established from the host to the terminal or device by simply "initing" the
corresponding K.B. by a program; second, it guarantees that whenever the
specified device or terminal connects to the host system it will always
be mapped as the corresponding K.B. number.  If the specified K.B. number is
not available, the connection will be refused.  This should normally not
happen since K.B. numbers which are specified to correspond to a special
network device or terminal are not used in the general pool of network
K.B.'s.

The configuration of each RSTS host in a MICRO-NODE network is specified
in the normal manner for RSTS with the addition of the information
necessary to specify the connection to the network.
An extended SYSGEN program will be provided, but, until it is available,
the following proceedure should be used.
The standard DEC SYSGEN program should be run to specify the RSTS system
configuration except for the connection to MICRO-NODE.
Any direct terminal connections to the RSTS system are specified at this
time.
Note that the "multi-terminal" and "echo control" features are not supported
by this release of MICRO-NODE and must not be included in the RSTS configuration.
The output of the SYSGEN program consists of two files: SYSGEN.MAC and
SYSGEN.CTL.  Both of these files must be edited to include the specification
of the MICRO-NODE connection.
In the CONFIG.MAC file, the following lines must be inserted just before
the line which reads ";#TERMINAL#OPTIONS"
.byhand

  NX	=	1	;1 IF NEXILIS NETWORK SUPPORT; ELSE 0
  NXN	=	n	;NUMBER OF INTERFACES TO NETWORK NODES
  N0VEC	=	vec0	;VECTOR ADDRESS FOR FIRST INTERFACE
  N1VEC	=	vec1	;VECTOR ADDRESS FOR SECOND INTERFACE
  N0CSR	=	csr0	;ADDRESS OF CSR FOR FIRST INTERFACE
  N1CSR	=	csr1	;ADDRESS OF CSR FOR SECOND INTERFACE
  N0SOC	=	soc0	;NUMBER OF SOCKETS ON FIRST INTERFACE
  N1SOC	=	soc1	;NUMBER OF SOCKETS ON SECOND INTERFACE
  NT11	=	m	;NUMBER OF NETWORK TERMINAL DDB'S

.group
;DEFINE "OUTGOING" NETWORK SOCKETS
;  FORMAT IS:
;	KBN	K.B.NO.,DEV,CLASS,PRIORITY,TYPE,SUBTYPE,WRN,MAX

        .MACRO  OUTNET
        KBN     specification for outgoing device
        KBN     specification for outgoing device
        .ENDM

.endhand
.apart
.group
.byhand
;DEFINE NETWORK MAP
;       FORMAT IS:
;       NODE    NAME,PRIMARY INTERFACE,SECONDARY INTERFACE

        .MACRO  NETMAP
        NODE    nodea,npa,nsa
        NODE    nodeb,npb,nsb
        .ENDM

.endhand
.apart

In the above code, upper case letters indicate text that must be included
exactly as given; lower case letters indicate text that will vary according
to the configuration.  Additional (or fewer) lines may be required in some
places depending on the configuration.  For each network interface, each
of the symbols NnVEC, NnCSR, and NnSOC must be defined, where n is the
number of the interface.  The first interface is always numbered 0.
Also, a separate KBN line must be included for each "outgoing" network device.
The parameters in these lines must be defined as follows:
.byhand

      CLASS    = 200
      PRIORITY = 0
      TYPE     = 0
      SUBTYPE  = 0
      WRN      = 5
      MAX      = 7

.endhand
The DEVICE parameter is the full network name of the device; for a terminal
this is:
.byhand

      TRnNODE

.endhand
Where "n" is the port on the node for the terminal and "NODE" is the name of
the node.
The K.B. number given must fall with the range of network K.B.'s in this
configuration.  Remember that network K.B.'s are assigned above all other
K.B.'s in the configuration.

The network map section must include a "NODE" line for each node in the
network, including nodes which are not directly connected to this host.
The number following the node name indicates which directly connected node
will be used to reach the indicated node for outgoing connections.
This is the number which is used the NnVEC, NnCSR, and NnSOC symbols.
If a node is not included in this table, it will still be able to connect
to the host, but no outgoing connection from the host to that node will be
possible.

The SYSGEN.CTL file must also be edited to include the required network
modules.
These edits are the same regardless of the configuration.  Preceeding the
line which contains only the text "TTDINT/C", a line must be inserted which
reads "NXDINT/C".
Preceeding the line which contains only the text "TTDVR", a line must be
inserted which reads "NXDVR/C".
Preceeding the first line which reads "$R LINK.SAV", the following text must
be inserted:

After the above changes have been made, the RSTS monitor is built in the
normal way using SYSBAT.
.byhand

$R MACRO.SAV
NXDVR,NXDVR/C=IN:COMMON,KERNEL,DK:CONFIG,IN:CHECK,NXDEF,NXDVR
$R MACRO.SAV
NXDINT,NXDINT/C=IN:COMMON,KERNEL,DK:CONFIG,IN:CHECK,NXDEF,NXDINT

.endhand
The files NXDINT.MAC, NXDVR.MAC, AND NXDEF.MAC must be present on the input
device.
Also, the versions of COMMON.MAC, KERNEL.MAC and TBL.MAC provided with
MICRO-NODE must be used.
.skip to column 1
.appendix DEC 9301 Bootstrap Module

Nexilis Systems provides a set of PROM chips for the %DEC 9301% bootstrap
module which allow a Unibus PDP-11
node to be loaded through either a local (DR-11) or
remote (DU-11 or DUP-11) connection or from paper tape (for diagnostics).
A DEC compatible front-panel emulator is also provided for use with
PDP-11/04 and PDP-11/34 machines equipted with the operators panel.
A simple memory diagnostic routine is included.

Startup characteristics are determined by setting the appropriate
switches on the 9301 card during installation.
The bootstrap can be set up to expect commands from the console terminal
or to boot automatically from any one of 9 devices without operator 
intervention.

The bootstrap is initiated by the operator when the node
is powered up or when the "boot" button (programmers panel) or "init" switch
(operator's panel) is pressed.
.skip  2
Console terminal commands

The console terminal startup option is selected during installation
by setting the 9301 switches as per table A.
The bootstrap then displays the contents of R0, R4, SP, R5 and the '$' prompt.
Initially the registers contain garbage.
Now any of the commands from the console command summary can be entered.
.skip  1
Console command summary
.skip  1
.byhand
        TT      Absolute papertape loader for DEC diagnostics
        D0      DR11 unit 0 boot (local node)
        D1      DR11 unit 1 boot (local node)
        D2      DR11 unit 2 boot (local node)
        D3      DR11 unit 3 boot (local node)
        U0      DUx unit 0 boot (remote node)
        U1      DUx unit 1 boot (remote node)
        U2      DUx unit 2 boot (remote node)
        U3      DUx unit 3 boot (remote node)

        L <address>     load address
        E               examine location
        D <data>        deposit data
        S               start program

.endhand
Note - all commands must be in upper case.

After loading the node the bootstrap waits several seconds before
starting the node.

The memory diagnostic option is selected with the appropriate switch
settings from table A.
This diagnostic tests only the lower 28K of memory.
Any error detected will immediately halt the CPU at address 173742.
The bad memory location can then be determined by examining and recording
the contents of these registers:
.byhand
          R0 = expected data
          R4 = received data
          SP = failing address
.endhand

This kind of error is not solved by skipping the memory diagnostic -
your computer is sick!
Call your DEC representative for assistance.
.skip  1
.once center
*** Warning ***

All normal boots should be done with the memory diagnostic option.
This may be skipped but only at the risk of your system's integrity
as bad memory can cause any number of mysterious problems.
.skip to column 1

The NX9301 bootstrap is capable of booting a MICRO-NODE node through
DR11's, DU11's and DUP11's.
These devices must be strapped for the standard MICRO-NODE address
listed below.
.skip  2
.byhand
          Device  Unit  Address  Vector
          ______  ____  _______  ______
          DR11    0     767770   300
           "      1     767760   310
           "      2     767750   320
           "      3     767740   330
          DUx11   0     760010   340
           "      1     760020   350
           "      2     760030   360
           "      3     760040   370
.endhand
.skip to column 1
.byhand
                       TABLE  A


Automatic startup options     Starting  Switch settings
                              address   34567890
_________________________     ________  ________
Keyboard entry

  with memory diagnostics     773000    xxxxxxxx
  w/o    "      "             773030    xxxxooxx
DR0 entry
  with memory diagnostics     773426    oxxxoxoo
  w/o    "      "             773430    oxxxooxx
DR1 entry
  with memory diagnostics     773436    oxxxoooo
  w/o    "      "             773440    oxxoxxxx
DR2 entry
  with memory diagnostics     773446    oxxoxxoo
  w/o    "      "             773450    oxxoxoxx
DR3 entry
  with memory diagnostics     773456    oxxoxooo
  w/o    "      "             773460    oxxooxxx
DUx0 entry
  with memory diagnostics     773470    oxxoooxx
  w/o    "      "             773472    oxxoooxo
DUx1 entry
  with memory diagnostics     773500    oxoxxxxx
  w/o    "      "             773502    oxoxxxxo
DUx2 entry
  with memory diagnostics     773510    oxoxxoxx
  w/o    "      "             773512    oxoxxoxo
DUx3 entry
  with memory diagnostics     773520    oxoxoxxx
  w/o    "      "             773522    oxoxoxxo
DL paper tape entry
  with memory diagnostics     773532    oxoxooxo
  w/o    "      "             773534    oxoxooox

                                        x = on
                                        o = off

Switch 1 must always be on
Switch 2 should be on to enable automatic boot on power-up, off
         otherwise
.endhand
.skip to column 1
.appendix DEC BDV11 bootstrap module

Nexilis Systems provides a set of PROM chips for the DEC BDV11
bootstrap module for the LSI-11 which allow a node to be loaded
through either a local (DRV11) or remote (DUV11) connection or
from paper (for diagnostics).  A simple memory diagnostic routine is included.

Since there are no option switches on the BDV11 module, the bootstrap
routine scans all devices for activity and loads from whichever one becomes
active.
The bootstrap is entered whenever the node is powered up or whenever the
reset switch in operated.

Complete information on the operation of the BDV11 bootstrap will be
provided in a later edition of the document.
.skip to column 1
.appendix Memory allocation

The following specifies all reserved PDP-11 memory locations.  This
includes the recommended device register and vector addresses for
network devices and interfaces.  Generally, only those devices which are
to be used for booting must be at the specified addresses since all
devices are specified in the config file for each node.  It is
strongly recommended that the addresses given here be used, however,
to eliminate the possibilty of conflicts.
.skip 
The following specify single words:
.skip 
.preface 0
.begin narrow 15,0
.indent -8
0/######Not used

2/######Not used
.skip 
.preface 1
.widen; end;
The following specify word pairs which contain the new PC in the first word
and the new PSW in the second word.
.begin narrow 15,0;
.preface 0
.skip 
.indent -8
4/######Bus time out trap

10/#####Illegal instr trap

14/#####BPT instr trap

20/#####IOT instr trap

24/#####Power fail trap

30/#####EMT instr trap

34/#####TRAP instr trap

40-54###Reserved to software

60/#####CTY input interrupt

64/#####CTY output interrupt

70/

74/

100/####LSI-11 clock interrupt

114/####Memory parity

120/####First DR11 input interrupt

124/####First DR11 output interupt

130/####Second DR11 input interrupt

134/####Second DR11 output interrupt

140/####Third DR11 input interrupt

200/####LP/11/TI810 printer interrupt

204/####RF11/RS11#RJS04/RWS04/RS04#RJS03/RWS03/RS03#disk interrupt

210/####RC11 disk interrupt

214/####TC11/TU56 DECtape interrupt

220/####RK11/RK05 disk interrupt

224/####TMA11/TU10 TS03 TJU16/TWU16/TU16 tape interrupt

230/####CR11/CD11 card reader interrupt

234/

240/####PIRQ interrupt

244/####FIS trap

250/####Memory management trap

254/####RP11/RP03 RJP04/RWP04/RP04 disk interrupt

260/####TA11 cassette interrupt

264/####First RXV11 interrupt

270/####Second RXV11 interrupt

274/

300-364#%Asynchronous% line interfaces or additional link or host interface
interrupts (%asynchronous% interface vectors are assigned downwards from 364)
.skip 
.preface 1
.widen; end;
The following specify single words:
.skip  
.begin narrow 23,0;
.preface 0
.indent -16
770200-770366##Processor dependent locations

770370-772036

772040-772072##RJS04/RWS04/RSO4 RJS03/RWS03/RS03 disk

772074-772436

772440-772476##TJU16/TWU16/TU16 tape

772500-772516

772520-772532##TMA11/TU10/TS03 tape

772534-772776

773000-773376##BDV11 first window or REV11 first half

773400-773776##BDV11 second window or REV11 second half

774000-776676

776700-776752##RP11/RP03 RJP04/RWP04/RP04 disk

776754-777156

777160-777166##CR11/CD11 card reader

777170/########First RXV11 disk RXCS

777172/########First RXV11 disk RXDB

777174/########Second RXV11 disk RXCS

777176/########Second RXV11 disk RXDB

777200-777336

777340-777350##TC11/TU56 DECtape

777400-777416##RK11/RK05 disk

777460-777476##RF11/RS11 disk

777500/########TA11 cassette status

777502/########TA11 cassette data

777504-777506

777510/########TI810 printer control CONTROL

777512/########Not used

777514/########LP11/TI810 printer status

777516/########LP11/TI810 printer data

777520/########BDV11 base registers

777522/########BDV11 scratchpad

777524/########BDV11 switches

777526-777544

777546/########KW11-L clock status

777550-777556

777560/########CTY RCSR

777562/########CTY RBUF

777564/########CTY XCSR

777566/########CTY XBUF

777570-777776##Processor dependent locations
.widen; end;
.preface 1
.skip to column 1
.standard back

    ? 9