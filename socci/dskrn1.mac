TITLE DSKRAN RANDOM DISK I/O
SUBTTL OCT 25 1977

;ACS

T1=1
T2=2
T3=3
T4=4
	P1=5
P2=6
P3=7
P4=10
P=17

PDLLEN==^D30

;I/O CHANNELS

IO==0


;PARAMETERS

SEGNUM==^D10		;NUMBER OF HISEG FILES TO CREATE AND USE.
;MACROS

DEFINE ERROR(MSG)<
	JRST	[OUTSTR [ASCIZ \'MSG\]
		 EXIT]
>;END ERROR MACRO DEFINITION

DEFINE MSG(MSG)<
	OUTSTR	[ASCIZ \'MSG
\]>;END MSG MACRO DEFINITION

;GETTABS

CNFTBL==11
  SYSSIZ==12

NWSTBL==12
  MEMSIZ==23

;UUO OPDEFS

OPDEF VCREAT [CALLI -67]
OPDEF VREMOV [CALLI -65]

;CHANIO DEFINITIONS

VMAP==35
SIMUPD==41

;OTHER STUFF

CPRRED==1
CPRRDW==3

ST:	JFCL
	RESET
	MOVE	P,[IOWD PDLLEN,PDL]


	PJOB	T1,		;GET JOB NUMBER
	MOVEM	T1,SEED		;STORE AS FIRST SEED.

INITL:
	MSG	<STARTING.>
	SETZ	T1,		;DETACH FOR PAGRUN
	ATTACH	T1,
	  JFCL			;THIS NON-SKIPS.

	OPEN	0,[EXP 17,SIXBIT/DSK/,0]
	  ERROR	(CAN'T OPEN CHANNEL)

SUBTTL MAIN PROGRAM

LOOP:	PUSHJ	P,RAND
	IDIVI	T1,^D60000
	MOVE	T1,T2
	USETI	(T1)
	IN	IOWD
	JRST	LOOP
	ERROR(INPUT ERROR)

IOWD:	IOWD 200,BUF
	0
BUF:	BLOCK	200

SUBTTL SUBROUTINES

RAND:	MOVE	T1,SEED		;GET LAST VALUE
	IMUL	T1,RANMUL	;MULTIPLY
	ADD	T1,RANADD
	MOVEM	T1,SEED		;SAVE FOR NEXT TIME
	POPJ	P,		;AND RETURN.


SUBTTL DATA

PDL:	BLOCK	PDLLEN
SEED:	BLOCK	1
RANMUL:	^D13264529
RANADD:	^D179951

	END	ST
