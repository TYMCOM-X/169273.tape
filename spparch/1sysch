1SYSCHECK ** FICHE/FRAME BREAK *****
SDCOMP3
DCOMP  IDENT   11-30-76 COMPARES CHECKSUMS AT SYSTEM DUMP LOCATIONS WITH THOSE
*RECORDED IN 1DISCMAP   AND REPORTS DIFFERENCES
*ALSO COMPARES PAGE 0 DISC 0 WITH FILE (*6UTIL)IPLCKFILE TO VERIFY
*THE IPL IS CORRECT


       BRU START; BRS 10

VERMSG ASC '$SYSTEM CHECKSUM PROGRAM VERSION 3 RUNNING$/'
       ASC 'BLOOD'

MSG    POPD    101B5,2
       STP SAVA; STX SAVX
       EAX* 0; CXA; ETR =37777B; LDB =-1; LDX TOUT; BRS 34
MSG1   LDP SAVA; LDX SAVX; BRR 0
SAVA   BSS 2
SAVX   BSS 1

SYSNUM DATA 770B


MTAB   BSS 2
L2MSG  DATA 1100B
L3MSG  DATA 1326B
L4MSG  DATA 1554B
L5MSG  DATA 2002B
L6AMSG DATA 2230B
L7MSG  DATA 2456B
L10MSG DATA 2704B
L11MSG DATA 3132B
L12MSG DATA 3360B
L13MSG DATA 3606B
L14MSG DATA 4034B
L15MSG DATA 4262B
L16MSG DATA 4510B
L17MSG DATA 4736B
L6BMSG DATA 2343B

MO     DATA 5164B
DAY    DATA 5167B

CSMTAB BSS 2
L2CSM  DATA 5172B
L3CSM  DATA 5175B
L4CSM  DATA 5200B
L5CSM  DATA 5203B
L6ACSM DATA 5206B
L7CSM  DATA 5211B
L10CSM DATA 5214B
L11CSM DATA 5217B
L12CSM DATA 5222B
L13CSM DATA 5225B
L14CSM DATA 5230B
L15CSM DATA 5233B
L16CSM DATA 5236B
L17CSM DATA 5241B
L6BCSM DATA 5244B

RECSYS DATA 5247B
MOTAB  BSS 2
L2MO   DATA 5252B
L3MO   DATA 5255B
L4MO   DATA 5260B
L5MO   DATA 5263B
L6AMO  DATA 5266B
L7MO   DATA 5271B
L10MO  DATA 5274B
L11MO  DATA 5277B
L12MO  DATA 5302B
L13MO  DATA 5305B
L14MO  DATA 5310B
L15MO  DATA 5313B
L16MO  DATA 5316B
L17MO  DATA 5321B
L6BMO  DATA 5324B

DAYTAB BSS 2
L2DAY  DATA 5327B
L3DAY  DATA 5332B
L4DAY  DATA 5335B
L5DAY  DATA 5340B
L6ADAY DATA 5343B
L7DAY  DATA 5346B
L10DAY DATA 5351B
L11DAY DATA 5354B
L12DAY DATA 5357B
L13DAY DATA 5362B
L14DAY DATA 5365B
L15DAY DATA 5370B
L16DAY DATA 5373B
L17DAY DATA 5376B
L6BDAY DATA 5401B


START  STP CIN
       MSG VERMSG
       LDP FILPTR; BRS 64; BRU OPER; STA FNO
       BRU CHECK

FILPTR DATA 3*FIL-1,3*FIL-1+16
FIL    ASC '(*6HELP)1DISCMAP'

OPER   MSG E1; BRS 10
E1     ASC '$CANNOT OPEN 1DISCMAP$/'


CHECK  LDA =1; STA TO
CHECK1; MIN TO; LDA TO; SKG =17B; BRU *+2; BRU IPL
       STA HLOC; SNE =6; BRU CK6; CAX; BRM RMSG; LDA BUF; SNE =-1
       BRU CKRTN; BRM GMCSM (GET (1DISCMAP CHECKSUM)
       BRM GTCSM (GET CHECKSUMS OFF DISC); LDA CKSM1
       SKE MCKSM1; BRU CHECK2 (MISMATCH REPORT IT); SKN TO1
       BRU *+2; BRU CKRTN; LDA CKSM2; SNE MCKSM2; BRU CKRTN
CHECK2 SKR ERRSW; BRU *-1; MSG M1 (CHECKSUM ERRROR)
       BRM PPRGM (PRINT PROGRAM NAME AS SHOWN IN 1DISCMAP)
       MSG M3 (LOC.); LDA TO; BRM PONO
       MSG M4 (1DISCMAP CHECKSUM); LDA MCKSM1; BRM PONO
       MSG M5 (DISC CHECKSUM); LDA CKSM1; BRM PONO
       SKN TO1; BRU *+2; BRU CKRTN (NO SECOND DISC)
       MSG M3 (LOC.); LDA TO1; BRM PONO
       MSG M4 (1DISCMAP CHECKSUM); LDA MCKSM2; BRM PONO
       MSG M5 (DISC HECKSUM); LDA CKSM2; BRM PONO
CKRTN  LDA TO; SNE =2; MIN TO; SNE =4; MIN TO; SNE =12; MIN TO; BRU CHECK1

CALCAD ZRO; CLB; LSH 13; ADD =17400B; BRR CALCAD


GTCSM  ZRO; LDA HLOC; STA TO; SNE =2; BRU ADDON; SNE =4; BRU ADDON; SNE =12B
       BRU ADDON; LDA =-1; STA TO1; STA CKSM2
GTCSM1 LDA TO; BRM CALCAD; STA TOADR; LDA TO1; SNE =-1; BRU GTCSM2
       BRM CALCAD; STA TOADR1
GTCSM2 LDA TOADR; STA DISCR; LDA =7; STA CNT; BRM CKSM
       LDA HCKSM; STA CKSM1; LDA TO1; SNE =-1; BRR GTCSM
       LDA TOADR1; STA DISCR; LDA =7; STA CNT; BRM CKSM
       LDA HCKSM; STA CKSM2; BRR GTCSM
ADDON  ADD =1; STA TO1; BRU GTCSM1
CKSM   ZRO; CLA; STA HCKSM; BRM STCKSM
1CKSM  BRM CPG; BRM RPG; LDA =CBUF; STA PTR; ADD =4000B; STA EPTR
       BRM MKSUM; SKR CNT; BRU 1CKSM; BRR CKSM

MKSUM  ZRO; LDA* PTR; MIN PTR; XMA HCKSM; CLB; LCY 7; ADD HCKSM; STB HCKSM
       ADM HCKSM; LDA PTR; SKE EPTR; BRU MKSUM+1; BRR MKSUM

STCKSM ZRO; CLA; BRM 2CKSM; LDA =17777B; SKN SIXSW; LDA =37777B; BRM 2CKSM
       CLA; BRM 2CKSM; BRR STCKSM
2CKSM  ZRO; XMA HCKSM; CLB; LCY 7; ADD HCKSM; STB HCKSM; ADM HCKSM; BRR 2CKSM

CKSM1  ZRO
CKSM2  ZRO
PTR    ZRO
EPTR   ZRO
HCKSM  ZRO
HLOC   ZRO
PONO   ZRO; LDX TOUT; LDB =8; BRS 36; BRR PONO

PPRGM  ZRO; LDA =155B; CIO TOUT; MSG BUF; LDA =155B; CIO TOUT
       BRR PPRGM

RMSG   ZRO; LDA MTAB,2; SCP FNO; HLT
       LDX =-50; WIO FNO; STA BUF+50,2; BRX *-2; BRR RMSG

*GET 1DISCMAP CHECKSUM

GMCSM  ZRO; LDX TO; LDA CSMTAB,2; SCP FNO; HLT; WIO FNO; STA MCKSM1
       WIO FNO; STA MCKSM2; BRR GMCSM

RPG    ZRO; LDA =CBUF; LDX =4000B; LDB DISCR; BRS 124; LDA =40B
       ADM DISCR; BRR RPG

CPG    ZRO; CLA; LDX =-4000B; STA EBUF,2; BRX *-1; BRR CPG

M1     ASC '$$CHECKSUM ERROR:/'
M3     ASC '$LOC.: /'
M4     ASC '$1DISCMAP CHECKSUM: /'
M5     ASC '$DISC CHECKSUM:     /'
M6A    ASC '6A/'
M6B    ASC '6B/'
M7     ASC '$$**********NOTIFY YOUR SUPERVIOR**********$$/'
M8     ASC '$$NO SYSTEM ERRORS FOUND$/'
M9     ASC '$END OF JOB$/'
M10    ASC '$IPL OKAY/'
M11    ASC '$IPL APPARENTLY BAD/'
M12    ASC '$UNABLE LOCATE (*6UTIL)IPLCKFILE - IPL CHECK NOT MADE/'
M13    ASC '$UNABLE OPEN (*6UTIL)IPLCKFIL - IPL CHECK NOT MADE/'
CK6    CAX; BRM RMSG; BRM GM6; BRM GCSM6A; BRM GCSM6B; LDA CKSM6A
       SNE MCSM6A; BRU CK6B; SKR ERRSW; BRU *-1; MSG M1; LDA =155B
       CIO TOUT; MSG BUF; MSG M3; MSG M6A (6A); MSG M4; LDA MCSM6A
       BRM PONO; MSG M5; LDA CKSM6A; BRM PONO
CK6B   LDA CKSM6B; SNE MCSM6B; BRU CKRTN; SKR ERRSW; BRU *-1
       MSG M1; LDA =155B; CIO TOUT; MSG BUF+31B; MSG M3; MSG M6B (6B)
       MSG M4; LDA MCSM6B; BRM PONO; MSG M5; LDA CKSM6B; BRM PONO
       BRU CKRTN

GM6    ZRO; LDA L6ACSM; SCP FNO; HLT; WIO FNO; STA MCSM6A; LDA L6BCSM; SCP FNO
       HLT 0; WIO FNO; STA MCSM6B; BRR GM6


GCSM6A ZRO; SKR SIXSW; BRU *-1
       LDA =6; STA TO; BRM CALCAD; STA DISCR; LDA =3; STA CNT; BRM CKSM
       LDA HCKSM; STA CKSM6A; CLA; STA SIXSW; BRR GCSM6A

GCSM6B ZRO; SKR SIXSW; BRU *-1
       LDA =6; STA TO; BRM CALCAD; STA DISCR; LDA =3; STA CNT
       BRM RPG; SKR CNT; BRU *-2; LDA =3; STA CNT
       BRM CKSM; LDA HCKSM; STA CKSM6B; CLA; STA SIXSW; BRR GCSM6B

CKSM6A ZRO
CKSM6B ZRO
MCSM6A ZRO
MCSM6B ZRO

THRU   SKN ERRSW; BRU THRU2; MSG M7 (NOTIFY YOUR SUPERVISOR)
       LDA =25; STA CNT
THRU1  SKR CNT; BRU *+2; BRU THRU3; TCO =147B
       LDA =2000; BRS 81; BRU THRU1
THRU2  MSG M8 (NO ERROR FOUND)
THRU3  MSG M9 (EOJ); BRS 10

IPL    LDP IPLPTR; BRS 48; BRU NOIPL; LDP IPLPTR; BRS 64; BRU BIPLF
       STA FNI; LDA =400B; LDX =CBUF; BIO FNI; NOP; STA EPTR; CLA; STA HCKSM
       LDA =CBUF1; LDX =400B; LDB =70000000B; BRS 124
       LDX =-400B
IPL1   LDA CBUF+400B,2; SKE CBUF1+400B,2; BRU IPL2; BRX IPL1
       MSG M10 (IPL OKAY); BRU THRU
IPL2   SKR ERRSW; BRU *-1; MSG M11 (IPL BAD); BRU THRU
NOIPL  MSG M12 (CANNOT LOCATE IPLCKFIL); BRU THRU
BIPLF  MSG M13 (IPLCKFIL BAD); BRU THRU
FILIPL ASC '(*6UTIL)IPLCKFILE'
IPLPTR DATA 3*FILIPL-1,3*FILIPL-1+17
CIN    ZRO
TOUT   ZRO
FNI    ZRO
DISCR ZRO
ERRSW  ZRO
FNO    ZRO
MCKSM1 ZRO
MCKSM2 ZRO
SIXSW  ZRO
TO     ZRO
TO1    ZRO
TOADR  ZRO
TOADR1 ZRO
CNT    ZRO
BUF    BSS 100B
CBUF   EQU 10000B
CBUF1  EQU 10400B
EBUF   EQU CBUF+4000B
       END
1SYSCHECK ** FICHE/FRAME BREAK *****
SDCOMP3 SYMSORT

SYM.  PG.LN. IDENT.

1CKSM   4 21 DCOMP   2CKSM   4 29 DCOMP   ADDON   4 19 DCOMP   
BIPLF   6 32 DCOMP   BUF     7 10 DCOMP   CALCAD  4  8 DCOMP   CBUF    7 11 DCOMP   
CBUF1   7 12 DCOMP   CHECK   3 29 DCOMP   CHECK1  3 30 DCOMP   CHECK2  3 36 DCOMP   
CIN     6 35 DCOMP   CK6     5 29 DCOMP   CK6B    5 33 DCOMP   CKRTN   4  6 DCOMP   
CKSM    4 20 DCOMP   CKSM1   4 31 DCOMP   CKSM2   4 32 DCOMP   CKSM6A  6 12 DCOMP   
CKSM6B  6 13 DCOMP   CNT     7  9 DCOMP   CPG     5 14 DCOMP   CSMTAB  2  3 DCOMP   
DAY     2  1 DCOMP   DAYTAB  2 38 DCOMP   DISCR   6 38 DCOMP   E1      3 26 DCOMP   
EBUF    7 13 DCOMP   EPTR    4 34 DCOMP   ERRSW   6 39 DCOMP   FIL     3 23 DCOMP   
FILIPL  6 33 DCOMP   FILPTR  3 22 DCOMP   FNI     6 37 DCOMP   FNO     7  1 DCOMP   
GCSM6A  6  3 DCOMP   GCSM6B  6  7 DCOMP   GM6     5 38 DCOMP   GMCSM   5  8 DCOMP   
GTCSM   4 11 DCOMP   GTCSM1  4 13 DCOMP   GTCSM2  4 15 DCOMP   HCKSM   4 35 DCOMP   
HLOC    4 36 DCOMP   IPL     6 24 DCOMP   IPL1    6 28 DCOMP   IPL2    6 30 DCOMP   
IPLPTR  6 34 DCOMP   L10CSM  2 10 DCOMP   L10DAY  3  6 DCOMP   L10MO   2 28 DCOMP   
L10MSG  1 29 DCOMP   L11CSM  2 11 DCOMP   L11DAY  3  7 DCOMP   L11MO   2 29 DCOMP   
L11MSG  1 30 DCOMP   L12CSM  2 12 DCOMP   L12DAY  3  8 DCOMP   L12MO   2 30 DCOMP   
L12MSG  1 31 DCOMP   L13CSM  2 13 DCOMP   L13DAY  3  9 DCOMP   L13MO   2 31 DCOMP   
L13MSG  1 32 DCOMP   L14CSM  2 14 DCOMP   L14DAY  3 10 DCOMP   L14MO   2 32 DCOMP   
L14MSG  1 33 DCOMP   L15CSM  2 15 DCOMP   L15DAY  3 11 DCOMP   L15MO   2 33 DCOMP   
L15MSG  1 34 DCOMP   L16CSM  2 16 DCOMP   L16DAY  3 12 DCOMP   L16MO   2 34 DCOMP   
L16MSG  1 35 DCOMP   L17CSM  2 17 DCOMP   L17DAY  3 13 DCOMP   L17MO   2 35 DCOMP   
L17MSG  1 36 DCOMP   L2CSM   2  4 DCOMP   L2DAY   2 39 DCOMP   L2MO    2 22 DCOMP   
L2MSG   1 23 DCOMP   L3CSM   2  5 DCOMP   L3DAY   3  1 DCOMP   L3MO    2 23 DCOMP   
L3MSG   1 24 DCOMP   L4CSM   2  6 DCOMP   L4DAY   3  2 DCOMP   L4MO    2 24 DCOMP   
L4MSG   1 25 DCOMP   L5CSM   2  7 DCOMP   L5DAY   3  3 DCOMP   L5MO    2 25 DCOMP   
L5MSG   1 26 DCOMP   L6ACSM  2  8 DCOMP   L6ADAY  3  4 DCOMP   L6AMO   2 26 DCOMP   
L6AMSG  1 27 DCOMP   L6BCSM  2 18 DCOMP   L6BDAY  3 14 DCOMP   L6BMO   2 36 DCOMP   
L6BMSG  1 37 DCOMP   L7CSM   2  9 DCOMP   L7DAY   3  5 DCOMP   L7MO    2 27 DCOMP   
L7MSG   1 28 DCOMP   M1      5 16 DCOMP   M10     5 25 DCOMP   M11     5 26 DCOMP   
M12     5 27 DCOMP   M13     5 28 DCOMP   M3      5 17 DCOMP   M4      5 18 DCOMP   
M5      5 19 DCOMP   M6A     5 20 DCOMP   M6B     5 21 DCOMP   M7      5 22 DCOMP   
M8      5 23 DCOMP   M9      5 24 DCOMP   MCKSM1  7  2 DCOMP   MCKSM2  7  3 DCOMP   
MCSM6A  6 14 DCOMP   MCSM6B  6 15 DCOMP   MKSUM   4 24 DCOMP   MO      1 39 DCOMP   
MOTAB   2 21 DCOMP   MSG     1 12 DCOMP   MSG1    1 15 DCOMP   MTAB    1 22 DCOMP   
NOIPL   6 31 DCOMP   OPER    3 25 DCOMP   PONO    4 37 DCOMP   PPRGM   4 39 DCOMP   
PTR     4 33 DCOMP   RECSYS  2 20 DCOMP   RMSG    5  3 DCOMP   RPG     5 11 DCOMP   
SAVA    1 16 DCOMP   SAVX    1 17 DCOMP   SIXSW   7  4 DCOMP   START   3 17 DCOMP   
STCKSM  4 27 DCOMP   SYSNUM  1 19 DCOMP   THRU    6 17 DCOMP   THRU1   6 19 DCOMP   
THRU2   6 21 DCOMP   THRU3   6 22 DCOMP   TO      7  5 DCOMP   TO1     7  6 DCOMP   
TOADR   7  7 DCOMP   TOADR1  7  8 DCOMP   TOUT    6 36 DCOMP   VERMSG  1  9 DCOMP   

1SYSCHECK ** FICHE/FRAME BREAK *****
BLDSYSCHECK
NARP
SDCOMP3
BDCOMP3



RES
DDT
;TBDCOMP3
;U
%F
SAVE 3 T 3777 ON G1SYSCHECK-3

240

"

       1SYSCHECK   VERSION 3

"
CHECKSUM
.
(SS940UTIL)SDCOMP3-SYM
(SS940UTIL)G1SYSCHECK-3-GO-FILE
(SS940UTIL)SYSCHECKDOC-DOC-FILE
(SS940UTIL)BLDSYSCHECK-BUILD-FILE
.
"

"
COM TEL
1SYSCHECK ** FICHE/FRAME BREAK *****
SYSCHECKDOC

                                               JUNE 2, 1976

                     1SYSCHECK    VERSION 2

ADDED CODE TO CHECK THE IPL AGAINST FILE (*6UTIL)IPLCKFILE
WHICH IS CREATED WHEN THE IPL IS WRITTEN TO THE DISC BY 1INSTALL.
IF THE IPL COMPARES AGAINST (*6UTIL)IPLCKFILE THE MESSAGE "IPL OKAY" IS
DISPLAYED OTHERWISE THE MESSAGE "IPL APPARENTLY BAD" IS DISPLAYED.

IF THE FILE (*6UTIL)IPLCKFILE IS MISSING (AS WOULD BE
THE CASE UNTIL THE IPL IS NEXT WRITTEN THRU 1INSTALL) OR IF IT IS BAD
AN APPROPRIATE MESSAGE IS DISPLAYED AND THE IPL CHECK IS BYPASSED.




                                                 APRIL 17, 1976


                      1SYSCHECK   VERSION 1

1SYSCHECK IS DESIGNED TO BE RUN BY THE COMMAND FILE (OPER)OPCOM
UPON SYSTEM BRING UP, HOWEVER, IT MAY BE RUN AT ANY TIME BY USERS
WITH DISTRICT 0 OPERATORS LICENSE.

IT VERIFYS THE CHECKSUM OF OPERATING SYSTEMS, DIM, BASE CODES, AND UTILITY
PROGRAMS FROM THE DISC DUMP AREAS AGAINST THE CHECKSUMS RECORDED IN 1DISCMAP,
AND REPORTS ANY DIFFERENCES.

IF A DIFFERENCE OCCURS THE OPERATOR IS TOLD TO NOTIFY HIS SUPERVISOR
AND A SERIES OF SLOW BELLS ARE OUTPUT.


 